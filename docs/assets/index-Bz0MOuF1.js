var Qm=Object.defineProperty;var Zm=(n,e,t)=>e in n?Qm(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var Mt=(n,e,t)=>Zm(n,typeof e!="symbol"?e+"":e,t);function _mergeNamespaces(n,e){for(var t=0;t<e.length;t++){const r=e[t];if(typeof r!="string"&&!Array.isArray(r)){for(const u in r)if(u!=="default"&&!(u in n)){const T=Object.getOwnPropertyDescriptor(r,u);T&&Object.defineProperty(n,u,T.get?T:{enumerable:!0,get:()=>r[u]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const u of document.querySelectorAll('link[rel="modulepreload"]'))r(u);new MutationObserver(u=>{for(const T of u)if(T.type==="childList")for(const d of T.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&r(d)}).observe(document,{childList:!0,subtree:!0});function t(u){const T={};return u.integrity&&(T.integrity=u.integrity),u.referrerPolicy&&(T.referrerPolicy=u.referrerPolicy),u.crossOrigin==="use-credentials"?T.credentials="include":u.crossOrigin==="anonymous"?T.credentials="omit":T.credentials="same-origin",T}function r(u){if(u.ep)return;u.ep=!0;const T=t(u);fetch(u.href,T)}})();function getDefaultExportFromCjs(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}function getAugmentedNamespace(n){if(Object.prototype.hasOwnProperty.call(n,"__esModule"))return n;var e=n.default;if(typeof e=="function"){var t=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(n).forEach(function(r){var u=Object.getOwnPropertyDescriptor(n,r);Object.defineProperty(t,r,u.get?u:{enumerable:!0,get:function(){return n[r]}})}),t}var buffer={},base64Js={},hasRequiredBase64Js;function requireBase64Js(){if(hasRequiredBase64Js)return base64Js;hasRequiredBase64Js=1,base64Js.byteLength=A,base64Js.toByteArray=G,base64Js.fromByteArray=i;for(var n=[],e=[],t=typeof Uint8Array<"u"?Uint8Array:Array,r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",u=0,T=r.length;u<T;++u)n[u]=r[u],e[r.charCodeAt(u)]=u;e[45]=62,e[95]=63;function d(w){var ae=w.length;if(ae%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var ue=w.indexOf("=");ue===-1&&(ue=ae);var he=ue===ae?0:4-ue%4;return[ue,he]}function A(w){var ae=d(w),ue=ae[0],he=ae[1];return(ue+he)*3/4-he}function le(w,ae,ue){return(ae+ue)*3/4-ue}function G(w){var ae,ue=d(w),he=ue[0],pe=ue[1],ge=new t(le(w,he,pe)),be=0,ve=pe>0?he-4:he,we;for(we=0;we<ve;we+=4)ae=e[w.charCodeAt(we)]<<18|e[w.charCodeAt(we+1)]<<12|e[w.charCodeAt(we+2)]<<6|e[w.charCodeAt(we+3)],ge[be++]=ae>>16&255,ge[be++]=ae>>8&255,ge[be++]=ae&255;return pe===2&&(ae=e[w.charCodeAt(we)]<<2|e[w.charCodeAt(we+1)]>>4,ge[be++]=ae&255),pe===1&&(ae=e[w.charCodeAt(we)]<<10|e[w.charCodeAt(we+1)]<<4|e[w.charCodeAt(we+2)]>>2,ge[be++]=ae>>8&255,ge[be++]=ae&255),ge}function B(w){return n[w>>18&63]+n[w>>12&63]+n[w>>6&63]+n[w&63]}function o(w,ae,ue){for(var he,pe=[],ge=ae;ge<ue;ge+=3)he=(w[ge]<<16&16711680)+(w[ge+1]<<8&65280)+(w[ge+2]&255),pe.push(B(he));return pe.join("")}function i(w){for(var ae,ue=w.length,he=ue%3,pe=[],ge=16383,be=0,ve=ue-he;be<ve;be+=ge)pe.push(o(w,be,be+ge>ve?ve:be+ge));return he===1?(ae=w[ue-1],pe.push(n[ae>>2]+n[ae<<4&63]+"==")):he===2&&(ae=(w[ue-2]<<8)+w[ue-1],pe.push(n[ae>>10]+n[ae>>4&63]+n[ae<<2&63]+"=")),pe.join("")}return base64Js}var ieee754={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */var hasRequiredIeee754;function requireIeee754(){return hasRequiredIeee754||(hasRequiredIeee754=1,ieee754.read=function(n,e,t,r,u){var T,d,A=u*8-r-1,le=(1<<A)-1,G=le>>1,B=-7,o=t?u-1:0,i=t?-1:1,w=n[e+o];for(o+=i,T=w&(1<<-B)-1,w>>=-B,B+=A;B>0;T=T*256+n[e+o],o+=i,B-=8);for(d=T&(1<<-B)-1,T>>=-B,B+=r;B>0;d=d*256+n[e+o],o+=i,B-=8);if(T===0)T=1-G;else{if(T===le)return d?NaN:(w?-1:1)*(1/0);d=d+Math.pow(2,r),T=T-G}return(w?-1:1)*d*Math.pow(2,T-r)},ieee754.write=function(n,e,t,r,u,T){var d,A,le,G=T*8-u-1,B=(1<<G)-1,o=B>>1,i=u===23?Math.pow(2,-24)-Math.pow(2,-77):0,w=r?0:T-1,ae=r?1:-1,ue=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(A=isNaN(e)?1:0,d=B):(d=Math.floor(Math.log(e)/Math.LN2),e*(le=Math.pow(2,-d))<1&&(d--,le*=2),d+o>=1?e+=i/le:e+=i*Math.pow(2,1-o),e*le>=2&&(d++,le/=2),d+o>=B?(A=0,d=B):d+o>=1?(A=(e*le-1)*Math.pow(2,u),d=d+o):(A=e*Math.pow(2,o-1)*Math.pow(2,u),d=0));u>=8;n[t+w]=A&255,w+=ae,A/=256,u-=8);for(d=d<<u|A,G+=u;G>0;n[t+w]=d&255,w+=ae,d/=256,G-=8);n[t+w-ae]|=ue*128}),ieee754}/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */var hasRequiredBuffer;function requireBuffer(){return hasRequiredBuffer||(hasRequiredBuffer=1,(function(n){const e=requireBase64Js(),t=requireIeee754(),r=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;n.Buffer=A,n.SlowBuffer=ge,n.INSPECT_MAX_BYTES=50;const u=2147483647;n.kMaxLength=u,A.TYPED_ARRAY_SUPPORT=T(),!A.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function T(){try{const Le=new Uint8Array(1),Ee={foo:function(){return 42}};return Object.setPrototypeOf(Ee,Uint8Array.prototype),Object.setPrototypeOf(Le,Ee),Le.foo()===42}catch{return!1}}Object.defineProperty(A.prototype,"parent",{enumerable:!0,get:function(){if(A.isBuffer(this))return this.buffer}}),Object.defineProperty(A.prototype,"offset",{enumerable:!0,get:function(){if(A.isBuffer(this))return this.byteOffset}});function d(Le){if(Le>u)throw new RangeError('The value "'+Le+'" is invalid for option "size"');const Ee=new Uint8Array(Le);return Object.setPrototypeOf(Ee,A.prototype),Ee}function A(Le,Ee,Oe){if(typeof Le=="number"){if(typeof Ee=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return o(Le)}return le(Le,Ee,Oe)}A.poolSize=8192;function le(Le,Ee,Oe){if(typeof Le=="string")return i(Le,Ee);if(ArrayBuffer.isView(Le))return ae(Le);if(Le==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof Le);if(Ut(Le,ArrayBuffer)||Le&&Ut(Le.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(Ut(Le,SharedArrayBuffer)||Le&&Ut(Le.buffer,SharedArrayBuffer)))return ue(Le,Ee,Oe);if(typeof Le=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const ze=Le.valueOf&&Le.valueOf();if(ze!=null&&ze!==Le)return A.from(ze,Ee,Oe);const st=he(Le);if(st)return st;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof Le[Symbol.toPrimitive]=="function")return A.from(Le[Symbol.toPrimitive]("string"),Ee,Oe);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof Le)}A.from=function(Le,Ee,Oe){return le(Le,Ee,Oe)},Object.setPrototypeOf(A.prototype,Uint8Array.prototype),Object.setPrototypeOf(A,Uint8Array);function G(Le){if(typeof Le!="number")throw new TypeError('"size" argument must be of type number');if(Le<0)throw new RangeError('The value "'+Le+'" is invalid for option "size"')}function B(Le,Ee,Oe){return G(Le),Le<=0?d(Le):Ee!==void 0?typeof Oe=="string"?d(Le).fill(Ee,Oe):d(Le).fill(Ee):d(Le)}A.alloc=function(Le,Ee,Oe){return B(Le,Ee,Oe)};function o(Le){return G(Le),d(Le<0?0:pe(Le)|0)}A.allocUnsafe=function(Le){return o(Le)},A.allocUnsafeSlow=function(Le){return o(Le)};function i(Le,Ee){if((typeof Ee!="string"||Ee==="")&&(Ee="utf8"),!A.isEncoding(Ee))throw new TypeError("Unknown encoding: "+Ee);const Oe=be(Le,Ee)|0;let ze=d(Oe);const st=ze.write(Le,Ee);return st!==Oe&&(ze=ze.slice(0,st)),ze}function w(Le){const Ee=Le.length<0?0:pe(Le.length)|0,Oe=d(Ee);for(let ze=0;ze<Ee;ze+=1)Oe[ze]=Le[ze]&255;return Oe}function ae(Le){if(Ut(Le,Uint8Array)){const Ee=new Uint8Array(Le);return ue(Ee.buffer,Ee.byteOffset,Ee.byteLength)}return w(Le)}function ue(Le,Ee,Oe){if(Ee<0||Le.byteLength<Ee)throw new RangeError('"offset" is outside of buffer bounds');if(Le.byteLength<Ee+(Oe||0))throw new RangeError('"length" is outside of buffer bounds');let ze;return Ee===void 0&&Oe===void 0?ze=new Uint8Array(Le):Oe===void 0?ze=new Uint8Array(Le,Ee):ze=new Uint8Array(Le,Ee,Oe),Object.setPrototypeOf(ze,A.prototype),ze}function he(Le){if(A.isBuffer(Le)){const Ee=pe(Le.length)|0,Oe=d(Ee);return Oe.length===0||Le.copy(Oe,0,0,Ee),Oe}if(Le.length!==void 0)return typeof Le.length!="number"||sn(Le.length)?d(0):w(Le);if(Le.type==="Buffer"&&Array.isArray(Le.data))return w(Le.data)}function pe(Le){if(Le>=u)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+u.toString(16)+" bytes");return Le|0}function ge(Le){return+Le!=Le&&(Le=0),A.alloc(+Le)}A.isBuffer=function(Ee){return Ee!=null&&Ee._isBuffer===!0&&Ee!==A.prototype},A.compare=function(Ee,Oe){if(Ut(Ee,Uint8Array)&&(Ee=A.from(Ee,Ee.offset,Ee.byteLength)),Ut(Oe,Uint8Array)&&(Oe=A.from(Oe,Oe.offset,Oe.byteLength)),!A.isBuffer(Ee)||!A.isBuffer(Oe))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(Ee===Oe)return 0;let ze=Ee.length,st=Oe.length;for(let ct=0,Et=Math.min(ze,st);ct<Et;++ct)if(Ee[ct]!==Oe[ct]){ze=Ee[ct],st=Oe[ct];break}return ze<st?-1:st<ze?1:0},A.isEncoding=function(Ee){switch(String(Ee).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},A.concat=function(Ee,Oe){if(!Array.isArray(Ee))throw new TypeError('"list" argument must be an Array of Buffers');if(Ee.length===0)return A.alloc(0);let ze;if(Oe===void 0)for(Oe=0,ze=0;ze<Ee.length;++ze)Oe+=Ee[ze].length;const st=A.allocUnsafe(Oe);let ct=0;for(ze=0;ze<Ee.length;++ze){let Et=Ee[ze];if(Ut(Et,Uint8Array))ct+Et.length>st.length?(A.isBuffer(Et)||(Et=A.from(Et)),Et.copy(st,ct)):Uint8Array.prototype.set.call(st,Et,ct);else if(A.isBuffer(Et))Et.copy(st,ct);else throw new TypeError('"list" argument must be an Array of Buffers');ct+=Et.length}return st};function be(Le,Ee){if(A.isBuffer(Le))return Le.length;if(ArrayBuffer.isView(Le)||Ut(Le,ArrayBuffer))return Le.byteLength;if(typeof Le!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof Le);const Oe=Le.length,ze=arguments.length>2&&arguments[2]===!0;if(!ze&&Oe===0)return 0;let st=!1;for(;;)switch(Ee){case"ascii":case"latin1":case"binary":return Oe;case"utf8":case"utf-8":return Yn(Le).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Oe*2;case"hex":return Oe>>>1;case"base64":return $t(Le).length;default:if(st)return ze?-1:Yn(Le).length;Ee=(""+Ee).toLowerCase(),st=!0}}A.byteLength=be;function ve(Le,Ee,Oe){let ze=!1;if((Ee===void 0||Ee<0)&&(Ee=0),Ee>this.length||((Oe===void 0||Oe>this.length)&&(Oe=this.length),Oe<=0)||(Oe>>>=0,Ee>>>=0,Oe<=Ee))return"";for(Le||(Le="utf8");;)switch(Le){case"hex":return Ke(this,Ee,Oe);case"utf8":case"utf-8":return De(this,Ee,Oe);case"ascii":return je(this,Ee,Oe);case"latin1":case"binary":return it(this,Ee,Oe);case"base64":return He(this,Ee,Oe);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return qe(this,Ee,Oe);default:if(ze)throw new TypeError("Unknown encoding: "+Le);Le=(Le+"").toLowerCase(),ze=!0}}A.prototype._isBuffer=!0;function we(Le,Ee,Oe){const ze=Le[Ee];Le[Ee]=Le[Oe],Le[Oe]=ze}A.prototype.swap16=function(){const Ee=this.length;if(Ee%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let Oe=0;Oe<Ee;Oe+=2)we(this,Oe,Oe+1);return this},A.prototype.swap32=function(){const Ee=this.length;if(Ee%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let Oe=0;Oe<Ee;Oe+=4)we(this,Oe,Oe+3),we(this,Oe+1,Oe+2);return this},A.prototype.swap64=function(){const Ee=this.length;if(Ee%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let Oe=0;Oe<Ee;Oe+=8)we(this,Oe,Oe+7),we(this,Oe+1,Oe+6),we(this,Oe+2,Oe+5),we(this,Oe+3,Oe+4);return this},A.prototype.toString=function(){const Ee=this.length;return Ee===0?"":arguments.length===0?De(this,0,Ee):ve.apply(this,arguments)},A.prototype.toLocaleString=A.prototype.toString,A.prototype.equals=function(Ee){if(!A.isBuffer(Ee))throw new TypeError("Argument must be a Buffer");return this===Ee?!0:A.compare(this,Ee)===0},A.prototype.inspect=function(){let Ee="";const Oe=n.INSPECT_MAX_BYTES;return Ee=this.toString("hex",0,Oe).replace(/(.{2})/g,"$1 ").trim(),this.length>Oe&&(Ee+=" ... "),"<Buffer "+Ee+">"},r&&(A.prototype[r]=A.prototype.inspect),A.prototype.compare=function(Ee,Oe,ze,st,ct){if(Ut(Ee,Uint8Array)&&(Ee=A.from(Ee,Ee.offset,Ee.byteLength)),!A.isBuffer(Ee))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof Ee);if(Oe===void 0&&(Oe=0),ze===void 0&&(ze=Ee?Ee.length:0),st===void 0&&(st=0),ct===void 0&&(ct=this.length),Oe<0||ze>Ee.length||st<0||ct>this.length)throw new RangeError("out of range index");if(st>=ct&&Oe>=ze)return 0;if(st>=ct)return-1;if(Oe>=ze)return 1;if(Oe>>>=0,ze>>>=0,st>>>=0,ct>>>=0,this===Ee)return 0;let Et=ct-st,It=ze-Oe;const an=Math.min(Et,It),en=this.slice(st,ct),On=Ee.slice(Oe,ze);for(let un=0;un<an;++un)if(en[un]!==On[un]){Et=en[un],It=On[un];break}return Et<It?-1:It<Et?1:0};function Se(Le,Ee,Oe,ze,st){if(Le.length===0)return-1;if(typeof Oe=="string"?(ze=Oe,Oe=0):Oe>2147483647?Oe=2147483647:Oe<-2147483648&&(Oe=-2147483648),Oe=+Oe,sn(Oe)&&(Oe=st?0:Le.length-1),Oe<0&&(Oe=Le.length+Oe),Oe>=Le.length){if(st)return-1;Oe=Le.length-1}else if(Oe<0)if(st)Oe=0;else return-1;if(typeof Ee=="string"&&(Ee=A.from(Ee,ze)),A.isBuffer(Ee))return Ee.length===0?-1:Ae(Le,Ee,Oe,ze,st);if(typeof Ee=="number")return Ee=Ee&255,typeof Uint8Array.prototype.indexOf=="function"?st?Uint8Array.prototype.indexOf.call(Le,Ee,Oe):Uint8Array.prototype.lastIndexOf.call(Le,Ee,Oe):Ae(Le,[Ee],Oe,ze,st);throw new TypeError("val must be string, number or Buffer")}function Ae(Le,Ee,Oe,ze,st){let ct=1,Et=Le.length,It=Ee.length;if(ze!==void 0&&(ze=String(ze).toLowerCase(),ze==="ucs2"||ze==="ucs-2"||ze==="utf16le"||ze==="utf-16le")){if(Le.length<2||Ee.length<2)return-1;ct=2,Et/=2,It/=2,Oe/=2}function an(On,un){return ct===1?On[un]:On.readUInt16BE(un*ct)}let en;if(st){let On=-1;for(en=Oe;en<Et;en++)if(an(Le,en)===an(Ee,On===-1?0:en-On)){if(On===-1&&(On=en),en-On+1===It)return On*ct}else On!==-1&&(en-=en-On),On=-1}else for(Oe+It>Et&&(Oe=Et-It),en=Oe;en>=0;en--){let On=!0;for(let un=0;un<It;un++)if(an(Le,en+un)!==an(Ee,un)){On=!1;break}if(On)return en}return-1}A.prototype.includes=function(Ee,Oe,ze){return this.indexOf(Ee,Oe,ze)!==-1},A.prototype.indexOf=function(Ee,Oe,ze){return Se(this,Ee,Oe,ze,!0)},A.prototype.lastIndexOf=function(Ee,Oe,ze){return Se(this,Ee,Oe,ze,!1)};function Re(Le,Ee,Oe,ze){Oe=Number(Oe)||0;const st=Le.length-Oe;ze?(ze=Number(ze),ze>st&&(ze=st)):ze=st;const ct=Ee.length;ze>ct/2&&(ze=ct/2);let Et;for(Et=0;Et<ze;++Et){const It=parseInt(Ee.substr(Et*2,2),16);if(sn(It))return Et;Le[Oe+Et]=It}return Et}function Te(Le,Ee,Oe,ze){return Kt(Yn(Ee,Le.length-Oe),Le,Oe,ze)}function Ce(Le,Ee,Oe,ze){return Kt(nr(Ee),Le,Oe,ze)}function Ve(Le,Ee,Oe,ze){return Kt($t(Ee),Le,Oe,ze)}function $e(Le,Ee,Oe,ze){return Kt(yt(Ee,Le.length-Oe),Le,Oe,ze)}A.prototype.write=function(Ee,Oe,ze,st){if(Oe===void 0)st="utf8",ze=this.length,Oe=0;else if(ze===void 0&&typeof Oe=="string")st=Oe,ze=this.length,Oe=0;else if(isFinite(Oe))Oe=Oe>>>0,isFinite(ze)?(ze=ze>>>0,st===void 0&&(st="utf8")):(st=ze,ze=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const ct=this.length-Oe;if((ze===void 0||ze>ct)&&(ze=ct),Ee.length>0&&(ze<0||Oe<0)||Oe>this.length)throw new RangeError("Attempt to write outside buffer bounds");st||(st="utf8");let Et=!1;for(;;)switch(st){case"hex":return Re(this,Ee,Oe,ze);case"utf8":case"utf-8":return Te(this,Ee,Oe,ze);case"ascii":case"latin1":case"binary":return Ce(this,Ee,Oe,ze);case"base64":return Ve(this,Ee,Oe,ze);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return $e(this,Ee,Oe,ze);default:if(Et)throw new TypeError("Unknown encoding: "+st);st=(""+st).toLowerCase(),Et=!0}},A.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function He(Le,Ee,Oe){return Ee===0&&Oe===Le.length?e.fromByteArray(Le):e.fromByteArray(Le.slice(Ee,Oe))}function De(Le,Ee,Oe){Oe=Math.min(Le.length,Oe);const ze=[];let st=Ee;for(;st<Oe;){const ct=Le[st];let Et=null,It=ct>239?4:ct>223?3:ct>191?2:1;if(st+It<=Oe){let an,en,On,un;switch(It){case 1:ct<128&&(Et=ct);break;case 2:an=Le[st+1],(an&192)===128&&(un=(ct&31)<<6|an&63,un>127&&(Et=un));break;case 3:an=Le[st+1],en=Le[st+2],(an&192)===128&&(en&192)===128&&(un=(ct&15)<<12|(an&63)<<6|en&63,un>2047&&(un<55296||un>57343)&&(Et=un));break;case 4:an=Le[st+1],en=Le[st+2],On=Le[st+3],(an&192)===128&&(en&192)===128&&(On&192)===128&&(un=(ct&15)<<18|(an&63)<<12|(en&63)<<6|On&63,un>65535&&un<1114112&&(Et=un))}}Et===null?(Et=65533,It=1):Et>65535&&(Et-=65536,ze.push(Et>>>10&1023|55296),Et=56320|Et&1023),ze.push(Et),st+=It}return Me(ze)}const Xe=4096;function Me(Le){const Ee=Le.length;if(Ee<=Xe)return String.fromCharCode.apply(String,Le);let Oe="",ze=0;for(;ze<Ee;)Oe+=String.fromCharCode.apply(String,Le.slice(ze,ze+=Xe));return Oe}function je(Le,Ee,Oe){let ze="";Oe=Math.min(Le.length,Oe);for(let st=Ee;st<Oe;++st)ze+=String.fromCharCode(Le[st]&127);return ze}function it(Le,Ee,Oe){let ze="";Oe=Math.min(Le.length,Oe);for(let st=Ee;st<Oe;++st)ze+=String.fromCharCode(Le[st]);return ze}function Ke(Le,Ee,Oe){const ze=Le.length;(!Ee||Ee<0)&&(Ee=0),(!Oe||Oe<0||Oe>ze)&&(Oe=ze);let st="";for(let ct=Ee;ct<Oe;++ct)st+=wn[Le[ct]];return st}function qe(Le,Ee,Oe){const ze=Le.slice(Ee,Oe);let st="";for(let ct=0;ct<ze.length-1;ct+=2)st+=String.fromCharCode(ze[ct]+ze[ct+1]*256);return st}A.prototype.slice=function(Ee,Oe){const ze=this.length;Ee=~~Ee,Oe=Oe===void 0?ze:~~Oe,Ee<0?(Ee+=ze,Ee<0&&(Ee=0)):Ee>ze&&(Ee=ze),Oe<0?(Oe+=ze,Oe<0&&(Oe=0)):Oe>ze&&(Oe=ze),Oe<Ee&&(Oe=Ee);const st=this.subarray(Ee,Oe);return Object.setPrototypeOf(st,A.prototype),st};function Pe(Le,Ee,Oe){if(Le%1!==0||Le<0)throw new RangeError("offset is not uint");if(Le+Ee>Oe)throw new RangeError("Trying to access beyond buffer length")}A.prototype.readUintLE=A.prototype.readUIntLE=function(Ee,Oe,ze){Ee=Ee>>>0,Oe=Oe>>>0,ze||Pe(Ee,Oe,this.length);let st=this[Ee],ct=1,Et=0;for(;++Et<Oe&&(ct*=256);)st+=this[Ee+Et]*ct;return st},A.prototype.readUintBE=A.prototype.readUIntBE=function(Ee,Oe,ze){Ee=Ee>>>0,Oe=Oe>>>0,ze||Pe(Ee,Oe,this.length);let st=this[Ee+--Oe],ct=1;for(;Oe>0&&(ct*=256);)st+=this[Ee+--Oe]*ct;return st},A.prototype.readUint8=A.prototype.readUInt8=function(Ee,Oe){return Ee=Ee>>>0,Oe||Pe(Ee,1,this.length),this[Ee]},A.prototype.readUint16LE=A.prototype.readUInt16LE=function(Ee,Oe){return Ee=Ee>>>0,Oe||Pe(Ee,2,this.length),this[Ee]|this[Ee+1]<<8},A.prototype.readUint16BE=A.prototype.readUInt16BE=function(Ee,Oe){return Ee=Ee>>>0,Oe||Pe(Ee,2,this.length),this[Ee]<<8|this[Ee+1]},A.prototype.readUint32LE=A.prototype.readUInt32LE=function(Ee,Oe){return Ee=Ee>>>0,Oe||Pe(Ee,4,this.length),(this[Ee]|this[Ee+1]<<8|this[Ee+2]<<16)+this[Ee+3]*16777216},A.prototype.readUint32BE=A.prototype.readUInt32BE=function(Ee,Oe){return Ee=Ee>>>0,Oe||Pe(Ee,4,this.length),this[Ee]*16777216+(this[Ee+1]<<16|this[Ee+2]<<8|this[Ee+3])},A.prototype.readBigUInt64LE=zt(function(Ee){Ee=Ee>>>0,fn(Ee,"offset");const Oe=this[Ee],ze=this[Ee+7];(Oe===void 0||ze===void 0)&&Jt(Ee,this.length-8);const st=Oe+this[++Ee]*2**8+this[++Ee]*2**16+this[++Ee]*2**24,ct=this[++Ee]+this[++Ee]*2**8+this[++Ee]*2**16+ze*2**24;return BigInt(st)+(BigInt(ct)<<BigInt(32))}),A.prototype.readBigUInt64BE=zt(function(Ee){Ee=Ee>>>0,fn(Ee,"offset");const Oe=this[Ee],ze=this[Ee+7];(Oe===void 0||ze===void 0)&&Jt(Ee,this.length-8);const st=Oe*2**24+this[++Ee]*2**16+this[++Ee]*2**8+this[++Ee],ct=this[++Ee]*2**24+this[++Ee]*2**16+this[++Ee]*2**8+ze;return(BigInt(st)<<BigInt(32))+BigInt(ct)}),A.prototype.readIntLE=function(Ee,Oe,ze){Ee=Ee>>>0,Oe=Oe>>>0,ze||Pe(Ee,Oe,this.length);let st=this[Ee],ct=1,Et=0;for(;++Et<Oe&&(ct*=256);)st+=this[Ee+Et]*ct;return ct*=128,st>=ct&&(st-=Math.pow(2,8*Oe)),st},A.prototype.readIntBE=function(Ee,Oe,ze){Ee=Ee>>>0,Oe=Oe>>>0,ze||Pe(Ee,Oe,this.length);let st=Oe,ct=1,Et=this[Ee+--st];for(;st>0&&(ct*=256);)Et+=this[Ee+--st]*ct;return ct*=128,Et>=ct&&(Et-=Math.pow(2,8*Oe)),Et},A.prototype.readInt8=function(Ee,Oe){return Ee=Ee>>>0,Oe||Pe(Ee,1,this.length),this[Ee]&128?(255-this[Ee]+1)*-1:this[Ee]},A.prototype.readInt16LE=function(Ee,Oe){Ee=Ee>>>0,Oe||Pe(Ee,2,this.length);const ze=this[Ee]|this[Ee+1]<<8;return ze&32768?ze|4294901760:ze},A.prototype.readInt16BE=function(Ee,Oe){Ee=Ee>>>0,Oe||Pe(Ee,2,this.length);const ze=this[Ee+1]|this[Ee]<<8;return ze&32768?ze|4294901760:ze},A.prototype.readInt32LE=function(Ee,Oe){return Ee=Ee>>>0,Oe||Pe(Ee,4,this.length),this[Ee]|this[Ee+1]<<8|this[Ee+2]<<16|this[Ee+3]<<24},A.prototype.readInt32BE=function(Ee,Oe){return Ee=Ee>>>0,Oe||Pe(Ee,4,this.length),this[Ee]<<24|this[Ee+1]<<16|this[Ee+2]<<8|this[Ee+3]},A.prototype.readBigInt64LE=zt(function(Ee){Ee=Ee>>>0,fn(Ee,"offset");const Oe=this[Ee],ze=this[Ee+7];(Oe===void 0||ze===void 0)&&Jt(Ee,this.length-8);const st=this[Ee+4]+this[Ee+5]*2**8+this[Ee+6]*2**16+(ze<<24);return(BigInt(st)<<BigInt(32))+BigInt(Oe+this[++Ee]*2**8+this[++Ee]*2**16+this[++Ee]*2**24)}),A.prototype.readBigInt64BE=zt(function(Ee){Ee=Ee>>>0,fn(Ee,"offset");const Oe=this[Ee],ze=this[Ee+7];(Oe===void 0||ze===void 0)&&Jt(Ee,this.length-8);const st=(Oe<<24)+this[++Ee]*2**16+this[++Ee]*2**8+this[++Ee];return(BigInt(st)<<BigInt(32))+BigInt(this[++Ee]*2**24+this[++Ee]*2**16+this[++Ee]*2**8+ze)}),A.prototype.readFloatLE=function(Ee,Oe){return Ee=Ee>>>0,Oe||Pe(Ee,4,this.length),t.read(this,Ee,!0,23,4)},A.prototype.readFloatBE=function(Ee,Oe){return Ee=Ee>>>0,Oe||Pe(Ee,4,this.length),t.read(this,Ee,!1,23,4)},A.prototype.readDoubleLE=function(Ee,Oe){return Ee=Ee>>>0,Oe||Pe(Ee,8,this.length),t.read(this,Ee,!0,52,8)},A.prototype.readDoubleBE=function(Ee,Oe){return Ee=Ee>>>0,Oe||Pe(Ee,8,this.length),t.read(this,Ee,!1,52,8)};function et(Le,Ee,Oe,ze,st,ct){if(!A.isBuffer(Le))throw new TypeError('"buffer" argument must be a Buffer instance');if(Ee>st||Ee<ct)throw new RangeError('"value" argument is out of bounds');if(Oe+ze>Le.length)throw new RangeError("Index out of range")}A.prototype.writeUintLE=A.prototype.writeUIntLE=function(Ee,Oe,ze,st){if(Ee=+Ee,Oe=Oe>>>0,ze=ze>>>0,!st){const It=Math.pow(2,8*ze)-1;et(this,Ee,Oe,ze,It,0)}let ct=1,Et=0;for(this[Oe]=Ee&255;++Et<ze&&(ct*=256);)this[Oe+Et]=Ee/ct&255;return Oe+ze},A.prototype.writeUintBE=A.prototype.writeUIntBE=function(Ee,Oe,ze,st){if(Ee=+Ee,Oe=Oe>>>0,ze=ze>>>0,!st){const It=Math.pow(2,8*ze)-1;et(this,Ee,Oe,ze,It,0)}let ct=ze-1,Et=1;for(this[Oe+ct]=Ee&255;--ct>=0&&(Et*=256);)this[Oe+ct]=Ee/Et&255;return Oe+ze},A.prototype.writeUint8=A.prototype.writeUInt8=function(Ee,Oe,ze){return Ee=+Ee,Oe=Oe>>>0,ze||et(this,Ee,Oe,1,255,0),this[Oe]=Ee&255,Oe+1},A.prototype.writeUint16LE=A.prototype.writeUInt16LE=function(Ee,Oe,ze){return Ee=+Ee,Oe=Oe>>>0,ze||et(this,Ee,Oe,2,65535,0),this[Oe]=Ee&255,this[Oe+1]=Ee>>>8,Oe+2},A.prototype.writeUint16BE=A.prototype.writeUInt16BE=function(Ee,Oe,ze){return Ee=+Ee,Oe=Oe>>>0,ze||et(this,Ee,Oe,2,65535,0),this[Oe]=Ee>>>8,this[Oe+1]=Ee&255,Oe+2},A.prototype.writeUint32LE=A.prototype.writeUInt32LE=function(Ee,Oe,ze){return Ee=+Ee,Oe=Oe>>>0,ze||et(this,Ee,Oe,4,4294967295,0),this[Oe+3]=Ee>>>24,this[Oe+2]=Ee>>>16,this[Oe+1]=Ee>>>8,this[Oe]=Ee&255,Oe+4},A.prototype.writeUint32BE=A.prototype.writeUInt32BE=function(Ee,Oe,ze){return Ee=+Ee,Oe=Oe>>>0,ze||et(this,Ee,Oe,4,4294967295,0),this[Oe]=Ee>>>24,this[Oe+1]=Ee>>>16,this[Oe+2]=Ee>>>8,this[Oe+3]=Ee&255,Oe+4};function Je(Le,Ee,Oe,ze,st){Sn(Ee,ze,st,Le,Oe,7);let ct=Number(Ee&BigInt(4294967295));Le[Oe++]=ct,ct=ct>>8,Le[Oe++]=ct,ct=ct>>8,Le[Oe++]=ct,ct=ct>>8,Le[Oe++]=ct;let Et=Number(Ee>>BigInt(32)&BigInt(4294967295));return Le[Oe++]=Et,Et=Et>>8,Le[Oe++]=Et,Et=Et>>8,Le[Oe++]=Et,Et=Et>>8,Le[Oe++]=Et,Oe}function at(Le,Ee,Oe,ze,st){Sn(Ee,ze,st,Le,Oe,7);let ct=Number(Ee&BigInt(4294967295));Le[Oe+7]=ct,ct=ct>>8,Le[Oe+6]=ct,ct=ct>>8,Le[Oe+5]=ct,ct=ct>>8,Le[Oe+4]=ct;let Et=Number(Ee>>BigInt(32)&BigInt(4294967295));return Le[Oe+3]=Et,Et=Et>>8,Le[Oe+2]=Et,Et=Et>>8,Le[Oe+1]=Et,Et=Et>>8,Le[Oe]=Et,Oe+8}A.prototype.writeBigUInt64LE=zt(function(Ee,Oe=0){return Je(this,Ee,Oe,BigInt(0),BigInt("0xffffffffffffffff"))}),A.prototype.writeBigUInt64BE=zt(function(Ee,Oe=0){return at(this,Ee,Oe,BigInt(0),BigInt("0xffffffffffffffff"))}),A.prototype.writeIntLE=function(Ee,Oe,ze,st){if(Ee=+Ee,Oe=Oe>>>0,!st){const an=Math.pow(2,8*ze-1);et(this,Ee,Oe,ze,an-1,-an)}let ct=0,Et=1,It=0;for(this[Oe]=Ee&255;++ct<ze&&(Et*=256);)Ee<0&&It===0&&this[Oe+ct-1]!==0&&(It=1),this[Oe+ct]=(Ee/Et>>0)-It&255;return Oe+ze},A.prototype.writeIntBE=function(Ee,Oe,ze,st){if(Ee=+Ee,Oe=Oe>>>0,!st){const an=Math.pow(2,8*ze-1);et(this,Ee,Oe,ze,an-1,-an)}let ct=ze-1,Et=1,It=0;for(this[Oe+ct]=Ee&255;--ct>=0&&(Et*=256);)Ee<0&&It===0&&this[Oe+ct+1]!==0&&(It=1),this[Oe+ct]=(Ee/Et>>0)-It&255;return Oe+ze},A.prototype.writeInt8=function(Ee,Oe,ze){return Ee=+Ee,Oe=Oe>>>0,ze||et(this,Ee,Oe,1,127,-128),Ee<0&&(Ee=255+Ee+1),this[Oe]=Ee&255,Oe+1},A.prototype.writeInt16LE=function(Ee,Oe,ze){return Ee=+Ee,Oe=Oe>>>0,ze||et(this,Ee,Oe,2,32767,-32768),this[Oe]=Ee&255,this[Oe+1]=Ee>>>8,Oe+2},A.prototype.writeInt16BE=function(Ee,Oe,ze){return Ee=+Ee,Oe=Oe>>>0,ze||et(this,Ee,Oe,2,32767,-32768),this[Oe]=Ee>>>8,this[Oe+1]=Ee&255,Oe+2},A.prototype.writeInt32LE=function(Ee,Oe,ze){return Ee=+Ee,Oe=Oe>>>0,ze||et(this,Ee,Oe,4,2147483647,-2147483648),this[Oe]=Ee&255,this[Oe+1]=Ee>>>8,this[Oe+2]=Ee>>>16,this[Oe+3]=Ee>>>24,Oe+4},A.prototype.writeInt32BE=function(Ee,Oe,ze){return Ee=+Ee,Oe=Oe>>>0,ze||et(this,Ee,Oe,4,2147483647,-2147483648),Ee<0&&(Ee=4294967295+Ee+1),this[Oe]=Ee>>>24,this[Oe+1]=Ee>>>16,this[Oe+2]=Ee>>>8,this[Oe+3]=Ee&255,Oe+4},A.prototype.writeBigInt64LE=zt(function(Ee,Oe=0){return Je(this,Ee,Oe,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),A.prototype.writeBigInt64BE=zt(function(Ee,Oe=0){return at(this,Ee,Oe,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function tt(Le,Ee,Oe,ze,st,ct){if(Oe+ze>Le.length)throw new RangeError("Index out of range");if(Oe<0)throw new RangeError("Index out of range")}function Tt(Le,Ee,Oe,ze,st){return Ee=+Ee,Oe=Oe>>>0,st||tt(Le,Ee,Oe,4),t.write(Le,Ee,Oe,ze,23,4),Oe+4}A.prototype.writeFloatLE=function(Ee,Oe,ze){return Tt(this,Ee,Oe,!0,ze)},A.prototype.writeFloatBE=function(Ee,Oe,ze){return Tt(this,Ee,Oe,!1,ze)};function vt(Le,Ee,Oe,ze,st){return Ee=+Ee,Oe=Oe>>>0,st||tt(Le,Ee,Oe,8),t.write(Le,Ee,Oe,ze,52,8),Oe+8}A.prototype.writeDoubleLE=function(Ee,Oe,ze){return vt(this,Ee,Oe,!0,ze)},A.prototype.writeDoubleBE=function(Ee,Oe,ze){return vt(this,Ee,Oe,!1,ze)},A.prototype.copy=function(Ee,Oe,ze,st){if(!A.isBuffer(Ee))throw new TypeError("argument should be a Buffer");if(ze||(ze=0),!st&&st!==0&&(st=this.length),Oe>=Ee.length&&(Oe=Ee.length),Oe||(Oe=0),st>0&&st<ze&&(st=ze),st===ze||Ee.length===0||this.length===0)return 0;if(Oe<0)throw new RangeError("targetStart out of bounds");if(ze<0||ze>=this.length)throw new RangeError("Index out of range");if(st<0)throw new RangeError("sourceEnd out of bounds");st>this.length&&(st=this.length),Ee.length-Oe<st-ze&&(st=Ee.length-Oe+ze);const ct=st-ze;return this===Ee&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(Oe,ze,st):Uint8Array.prototype.set.call(Ee,this.subarray(ze,st),Oe),ct},A.prototype.fill=function(Ee,Oe,ze,st){if(typeof Ee=="string"){if(typeof Oe=="string"?(st=Oe,Oe=0,ze=this.length):typeof ze=="string"&&(st=ze,ze=this.length),st!==void 0&&typeof st!="string")throw new TypeError("encoding must be a string");if(typeof st=="string"&&!A.isEncoding(st))throw new TypeError("Unknown encoding: "+st);if(Ee.length===1){const Et=Ee.charCodeAt(0);(st==="utf8"&&Et<128||st==="latin1")&&(Ee=Et)}}else typeof Ee=="number"?Ee=Ee&255:typeof Ee=="boolean"&&(Ee=Number(Ee));if(Oe<0||this.length<Oe||this.length<ze)throw new RangeError("Out of range index");if(ze<=Oe)return this;Oe=Oe>>>0,ze=ze===void 0?this.length:ze>>>0,Ee||(Ee=0);let ct;if(typeof Ee=="number")for(ct=Oe;ct<ze;++ct)this[ct]=Ee;else{const Et=A.isBuffer(Ee)?Ee:A.from(Ee,st),It=Et.length;if(It===0)throw new TypeError('The value "'+Ee+'" is invalid for argument "value"');for(ct=0;ct<ze-Oe;++ct)this[ct+Oe]=Et[ct%It]}return this};const Dt={};function Pt(Le,Ee,Oe){Dt[Le]=class extends Oe{constructor(){super(),Object.defineProperty(this,"message",{value:Ee.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${Le}]`,this.stack,delete this.name}get code(){return Le}set code(st){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:st,writable:!0})}toString(){return`${this.name} [${Le}]: ${this.message}`}}}Pt("ERR_BUFFER_OUT_OF_BOUNDS",function(Le){return Le?`${Le} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),Pt("ERR_INVALID_ARG_TYPE",function(Le,Ee){return`The "${Le}" argument must be of type number. Received type ${typeof Ee}`},TypeError),Pt("ERR_OUT_OF_RANGE",function(Le,Ee,Oe){let ze=`The value of "${Le}" is out of range.`,st=Oe;return Number.isInteger(Oe)&&Math.abs(Oe)>2**32?st=jt(String(Oe)):typeof Oe=="bigint"&&(st=String(Oe),(Oe>BigInt(2)**BigInt(32)||Oe<-(BigInt(2)**BigInt(32)))&&(st=jt(st)),st+="n"),ze+=` It must be ${Ee}. Received ${st}`,ze},RangeError);function jt(Le){let Ee="",Oe=Le.length;const ze=Le[0]==="-"?1:0;for(;Oe>=ze+4;Oe-=3)Ee=`_${Le.slice(Oe-3,Oe)}${Ee}`;return`${Le.slice(0,Oe)}${Ee}`}function tn(Le,Ee,Oe){fn(Ee,"offset"),(Le[Ee]===void 0||Le[Ee+Oe]===void 0)&&Jt(Ee,Le.length-(Oe+1))}function Sn(Le,Ee,Oe,ze,st,ct){if(Le>Oe||Le<Ee){const Et=typeof Ee=="bigint"?"n":"";let It;throw Ee===0||Ee===BigInt(0)?It=`>= 0${Et} and < 2${Et} ** ${(ct+1)*8}${Et}`:It=`>= -(2${Et} ** ${(ct+1)*8-1}${Et}) and < 2 ** ${(ct+1)*8-1}${Et}`,new Dt.ERR_OUT_OF_RANGE("value",It,Le)}tn(ze,st,ct)}function fn(Le,Ee){if(typeof Le!="number")throw new Dt.ERR_INVALID_ARG_TYPE(Ee,"number",Le)}function Jt(Le,Ee,Oe){throw Math.floor(Le)!==Le?(fn(Le,Oe),new Dt.ERR_OUT_OF_RANGE("offset","an integer",Le)):Ee<0?new Dt.ERR_BUFFER_OUT_OF_BOUNDS:new Dt.ERR_OUT_OF_RANGE("offset",`>= 0 and <= ${Ee}`,Le)}const Vn=/[^+/0-9A-Za-z-_]/g;function qn(Le){if(Le=Le.split("=")[0],Le=Le.trim().replace(Vn,""),Le.length<2)return"";for(;Le.length%4!==0;)Le=Le+"=";return Le}function Yn(Le,Ee){Ee=Ee||1/0;let Oe;const ze=Le.length;let st=null;const ct=[];for(let Et=0;Et<ze;++Et){if(Oe=Le.charCodeAt(Et),Oe>55295&&Oe<57344){if(!st){if(Oe>56319){(Ee-=3)>-1&&ct.push(239,191,189);continue}else if(Et+1===ze){(Ee-=3)>-1&&ct.push(239,191,189);continue}st=Oe;continue}if(Oe<56320){(Ee-=3)>-1&&ct.push(239,191,189),st=Oe;continue}Oe=(st-55296<<10|Oe-56320)+65536}else st&&(Ee-=3)>-1&&ct.push(239,191,189);if(st=null,Oe<128){if((Ee-=1)<0)break;ct.push(Oe)}else if(Oe<2048){if((Ee-=2)<0)break;ct.push(Oe>>6|192,Oe&63|128)}else if(Oe<65536){if((Ee-=3)<0)break;ct.push(Oe>>12|224,Oe>>6&63|128,Oe&63|128)}else if(Oe<1114112){if((Ee-=4)<0)break;ct.push(Oe>>18|240,Oe>>12&63|128,Oe>>6&63|128,Oe&63|128)}else throw new Error("Invalid code point")}return ct}function nr(Le){const Ee=[];for(let Oe=0;Oe<Le.length;++Oe)Ee.push(Le.charCodeAt(Oe)&255);return Ee}function yt(Le,Ee){let Oe,ze,st;const ct=[];for(let Et=0;Et<Le.length&&!((Ee-=2)<0);++Et)Oe=Le.charCodeAt(Et),ze=Oe>>8,st=Oe%256,ct.push(st),ct.push(ze);return ct}function $t(Le){return e.toByteArray(qn(Le))}function Kt(Le,Ee,Oe,ze){let st;for(st=0;st<ze&&!(st+Oe>=Ee.length||st>=Le.length);++st)Ee[st+Oe]=Le[st];return st}function Ut(Le,Ee){return Le instanceof Ee||Le!=null&&Le.constructor!=null&&Le.constructor.name!=null&&Le.constructor.name===Ee.name}function sn(Le){return Le!==Le}const wn=(function(){const Le="0123456789abcdef",Ee=new Array(256);for(let Oe=0;Oe<16;++Oe){const ze=Oe*16;for(let st=0;st<16;++st)Ee[ze+st]=Le[Oe]+Le[st]}return Ee})();function zt(Le){return typeof BigInt>"u"?Zn:Le}function Zn(){throw new Error("BigInt not supported")}})(buffer)),buffer}var bufferExports=requireBuffer(),browser={exports:{}},hasRequiredBrowser;function requireBrowser(){if(hasRequiredBrowser)return browser.exports;hasRequiredBrowser=1;var n=browser.exports={},e,t;function r(){throw new Error("setTimeout has not been defined")}function u(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?e=setTimeout:e=r}catch{e=r}try{typeof clearTimeout=="function"?t=clearTimeout:t=u}catch{t=u}})();function T(ue){if(e===setTimeout)return setTimeout(ue,0);if((e===r||!e)&&setTimeout)return e=setTimeout,setTimeout(ue,0);try{return e(ue,0)}catch{try{return e.call(null,ue,0)}catch{return e.call(this,ue,0)}}}function d(ue){if(t===clearTimeout)return clearTimeout(ue);if((t===u||!t)&&clearTimeout)return t=clearTimeout,clearTimeout(ue);try{return t(ue)}catch{try{return t.call(null,ue)}catch{return t.call(this,ue)}}}var A=[],le=!1,G,B=-1;function o(){!le||!G||(le=!1,G.length?A=G.concat(A):B=-1,A.length&&i())}function i(){if(!le){var ue=T(o);le=!0;for(var he=A.length;he;){for(G=A,A=[];++B<he;)G&&G[B].run();B=-1,he=A.length}G=null,le=!1,d(ue)}}n.nextTick=function(ue){var he=new Array(arguments.length-1);if(arguments.length>1)for(var pe=1;pe<arguments.length;pe++)he[pe-1]=arguments[pe];A.push(new w(ue,he)),A.length===1&&!le&&T(i)};function w(ue,he){this.fun=ue,this.array=he}w.prototype.run=function(){this.fun.apply(null,this.array)},n.title="browser",n.browser=!0,n.env={},n.argv=[],n.version="",n.versions={};function ae(){}return n.on=ae,n.addListener=ae,n.once=ae,n.off=ae,n.removeListener=ae,n.removeAllListeners=ae,n.emit=ae,n.prependListener=ae,n.prependOnceListener=ae,n.listeners=function(ue){return[]},n.binding=function(ue){throw new Error("process.binding is not supported")},n.cwd=function(){return"/"},n.chdir=function(ue){throw new Error("process.chdir is not supported")},n.umask=function(){return 0},browser.exports}var browserExports=requireBrowser();const process$1=getDefaultExportFromCjs(browserExports);/**
 * @license
 * Copyright 2009 The Closure Library Authors
 * Copyright 2020 Daniel Wirtz / The long.js Authors.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * SPDX-License-Identifier: Apache-2.0
 */var wasm=null;try{wasm=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch{}function Long(n,e,t){this.low=n|0,this.high=e|0,this.unsigned=!!t}Long.prototype.__isLong__;Object.defineProperty(Long.prototype,"__isLong__",{value:!0});function isLong(n){return(n&&n.__isLong__)===!0}function ctz32(n){var e=Math.clz32(n&-n);return n?31-e:e}Long.isLong=isLong;var INT_CACHE={},UINT_CACHE={};function fromInt(n,e){var t,r,u;return e?(n>>>=0,(u=0<=n&&n<256)&&(r=UINT_CACHE[n],r)?r:(t=fromBits(n,0,!0),u&&(UINT_CACHE[n]=t),t)):(n|=0,(u=-128<=n&&n<128)&&(r=INT_CACHE[n],r)?r:(t=fromBits(n,n<0?-1:0,!1),u&&(INT_CACHE[n]=t),t))}Long.fromInt=fromInt;function fromNumber(n,e){if(isNaN(n))return e?UZERO:ZERO;if(e){if(n<0)return UZERO;if(n>=TWO_PWR_64_DBL)return MAX_UNSIGNED_VALUE}else{if(n<=-TWO_PWR_63_DBL)return MIN_VALUE;if(n+1>=TWO_PWR_63_DBL)return MAX_VALUE}return n<0?fromNumber(-n,e).neg():fromBits(n%TWO_PWR_32_DBL|0,n/TWO_PWR_32_DBL|0,e)}Long.fromNumber=fromNumber;function fromBits(n,e,t){return new Long(n,e,t)}Long.fromBits=fromBits;var pow_dbl=Math.pow;function fromString(n,e,t){if(n.length===0)throw Error("empty string");if(typeof e=="number"?(t=e,e=!1):e=!!e,n==="NaN"||n==="Infinity"||n==="+Infinity"||n==="-Infinity")return e?UZERO:ZERO;if(t=t||10,t<2||36<t)throw RangeError("radix");var r;if((r=n.indexOf("-"))>0)throw Error("interior hyphen");if(r===0)return fromString(n.substring(1),e,t).neg();for(var u=fromNumber(pow_dbl(t,8)),T=ZERO,d=0;d<n.length;d+=8){var A=Math.min(8,n.length-d),le=parseInt(n.substring(d,d+A),t);if(A<8){var G=fromNumber(pow_dbl(t,A));T=T.mul(G).add(fromNumber(le))}else T=T.mul(u),T=T.add(fromNumber(le))}return T.unsigned=e,T}Long.fromString=fromString;function fromValue(n,e){return typeof n=="number"?fromNumber(n,e):typeof n=="string"?fromString(n,e):fromBits(n.low,n.high,typeof e=="boolean"?e:n.unsigned)}Long.fromValue=fromValue;var TWO_PWR_16_DBL=65536,TWO_PWR_24_DBL=1<<24,TWO_PWR_32_DBL=TWO_PWR_16_DBL*TWO_PWR_16_DBL,TWO_PWR_64_DBL=TWO_PWR_32_DBL*TWO_PWR_32_DBL,TWO_PWR_63_DBL=TWO_PWR_64_DBL/2,TWO_PWR_24=fromInt(TWO_PWR_24_DBL),ZERO=fromInt(0);Long.ZERO=ZERO;var UZERO=fromInt(0,!0);Long.UZERO=UZERO;var ONE=fromInt(1);Long.ONE=ONE;var UONE=fromInt(1,!0);Long.UONE=UONE;var NEG_ONE=fromInt(-1);Long.NEG_ONE=NEG_ONE;var MAX_VALUE=fromBits(-1,2147483647,!1);Long.MAX_VALUE=MAX_VALUE;var MAX_UNSIGNED_VALUE=fromBits(-1,-1,!0);Long.MAX_UNSIGNED_VALUE=MAX_UNSIGNED_VALUE;var MIN_VALUE=fromBits(0,-2147483648,!1);Long.MIN_VALUE=MIN_VALUE;var LongPrototype=Long.prototype;LongPrototype.toInt=function(){return this.unsigned?this.low>>>0:this.low};LongPrototype.toNumber=function(){return this.unsigned?(this.high>>>0)*TWO_PWR_32_DBL+(this.low>>>0):this.high*TWO_PWR_32_DBL+(this.low>>>0)};LongPrototype.toString=function(e){if(e=e||10,e<2||36<e)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative())if(this.eq(MIN_VALUE)){var t=fromNumber(e),r=this.div(t),u=r.mul(t).sub(this);return r.toString(e)+u.toInt().toString(e)}else return"-"+this.neg().toString(e);for(var T=fromNumber(pow_dbl(e,6),this.unsigned),d=this,A="";;){var le=d.div(T),G=d.sub(le.mul(T)).toInt()>>>0,B=G.toString(e);if(d=le,d.isZero())return B+A;for(;B.length<6;)B="0"+B;A=""+B+A}};LongPrototype.getHighBits=function(){return this.high};LongPrototype.getHighBitsUnsigned=function(){return this.high>>>0};LongPrototype.getLowBits=function(){return this.low};LongPrototype.getLowBitsUnsigned=function(){return this.low>>>0};LongPrototype.getNumBitsAbs=function(){if(this.isNegative())return this.eq(MIN_VALUE)?64:this.neg().getNumBitsAbs();for(var e=this.high!=0?this.high:this.low,t=31;t>0&&(e&1<<t)==0;t--);return this.high!=0?t+33:t+1};LongPrototype.isZero=function(){return this.high===0&&this.low===0};LongPrototype.eqz=LongPrototype.isZero;LongPrototype.isNegative=function(){return!this.unsigned&&this.high<0};LongPrototype.isPositive=function(){return this.unsigned||this.high>=0};LongPrototype.isOdd=function(){return(this.low&1)===1};LongPrototype.isEven=function(){return(this.low&1)===0};LongPrototype.equals=function(e){return isLong(e)||(e=fromValue(e)),this.unsigned!==e.unsigned&&this.high>>>31===1&&e.high>>>31===1?!1:this.high===e.high&&this.low===e.low};LongPrototype.eq=LongPrototype.equals;LongPrototype.notEquals=function(e){return!this.eq(e)};LongPrototype.neq=LongPrototype.notEquals;LongPrototype.ne=LongPrototype.notEquals;LongPrototype.lessThan=function(e){return this.comp(e)<0};LongPrototype.lt=LongPrototype.lessThan;LongPrototype.lessThanOrEqual=function(e){return this.comp(e)<=0};LongPrototype.lte=LongPrototype.lessThanOrEqual;LongPrototype.le=LongPrototype.lessThanOrEqual;LongPrototype.greaterThan=function(e){return this.comp(e)>0};LongPrototype.gt=LongPrototype.greaterThan;LongPrototype.greaterThanOrEqual=function(e){return this.comp(e)>=0};LongPrototype.gte=LongPrototype.greaterThanOrEqual;LongPrototype.ge=LongPrototype.greaterThanOrEqual;LongPrototype.compare=function(e){if(isLong(e)||(e=fromValue(e)),this.eq(e))return 0;var t=this.isNegative(),r=e.isNegative();return t&&!r?-1:!t&&r?1:this.unsigned?e.high>>>0>this.high>>>0||e.high===this.high&&e.low>>>0>this.low>>>0?-1:1:this.sub(e).isNegative()?-1:1};LongPrototype.comp=LongPrototype.compare;LongPrototype.negate=function(){return!this.unsigned&&this.eq(MIN_VALUE)?MIN_VALUE:this.not().add(ONE)};LongPrototype.neg=LongPrototype.negate;LongPrototype.add=function(e){isLong(e)||(e=fromValue(e));var t=this.high>>>16,r=this.high&65535,u=this.low>>>16,T=this.low&65535,d=e.high>>>16,A=e.high&65535,le=e.low>>>16,G=e.low&65535,B=0,o=0,i=0,w=0;return w+=T+G,i+=w>>>16,w&=65535,i+=u+le,o+=i>>>16,i&=65535,o+=r+A,B+=o>>>16,o&=65535,B+=t+d,B&=65535,fromBits(i<<16|w,B<<16|o,this.unsigned)};LongPrototype.subtract=function(e){return isLong(e)||(e=fromValue(e)),this.add(e.neg())};LongPrototype.sub=LongPrototype.subtract;LongPrototype.multiply=function(e){if(this.isZero())return this;if(isLong(e)||(e=fromValue(e)),wasm){var t=wasm.mul(this.low,this.high,e.low,e.high);return fromBits(t,wasm.get_high(),this.unsigned)}if(e.isZero())return this.unsigned?UZERO:ZERO;if(this.eq(MIN_VALUE))return e.isOdd()?MIN_VALUE:ZERO;if(e.eq(MIN_VALUE))return this.isOdd()?MIN_VALUE:ZERO;if(this.isNegative())return e.isNegative()?this.neg().mul(e.neg()):this.neg().mul(e).neg();if(e.isNegative())return this.mul(e.neg()).neg();if(this.lt(TWO_PWR_24)&&e.lt(TWO_PWR_24))return fromNumber(this.toNumber()*e.toNumber(),this.unsigned);var r=this.high>>>16,u=this.high&65535,T=this.low>>>16,d=this.low&65535,A=e.high>>>16,le=e.high&65535,G=e.low>>>16,B=e.low&65535,o=0,i=0,w=0,ae=0;return ae+=d*B,w+=ae>>>16,ae&=65535,w+=T*B,i+=w>>>16,w&=65535,w+=d*G,i+=w>>>16,w&=65535,i+=u*B,o+=i>>>16,i&=65535,i+=T*G,o+=i>>>16,i&=65535,i+=d*le,o+=i>>>16,i&=65535,o+=r*B+u*G+T*le+d*A,o&=65535,fromBits(w<<16|ae,o<<16|i,this.unsigned)};LongPrototype.mul=LongPrototype.multiply;LongPrototype.divide=function(e){if(isLong(e)||(e=fromValue(e)),e.isZero())throw Error("division by zero");if(wasm){if(!this.unsigned&&this.high===-2147483648&&e.low===-1&&e.high===-1)return this;var t=(this.unsigned?wasm.div_u:wasm.div_s)(this.low,this.high,e.low,e.high);return fromBits(t,wasm.get_high(),this.unsigned)}if(this.isZero())return this.unsigned?UZERO:ZERO;var r,u,T;if(this.unsigned){if(e.unsigned||(e=e.toUnsigned()),e.gt(this))return UZERO;if(e.gt(this.shru(1)))return UONE;T=UZERO}else{if(this.eq(MIN_VALUE)){if(e.eq(ONE)||e.eq(NEG_ONE))return MIN_VALUE;if(e.eq(MIN_VALUE))return ONE;var d=this.shr(1);return r=d.div(e).shl(1),r.eq(ZERO)?e.isNegative()?ONE:NEG_ONE:(u=this.sub(e.mul(r)),T=r.add(u.div(e)),T)}else if(e.eq(MIN_VALUE))return this.unsigned?UZERO:ZERO;if(this.isNegative())return e.isNegative()?this.neg().div(e.neg()):this.neg().div(e).neg();if(e.isNegative())return this.div(e.neg()).neg();T=ZERO}for(u=this;u.gte(e);){r=Math.max(1,Math.floor(u.toNumber()/e.toNumber()));for(var A=Math.ceil(Math.log(r)/Math.LN2),le=A<=48?1:pow_dbl(2,A-48),G=fromNumber(r),B=G.mul(e);B.isNegative()||B.gt(u);)r-=le,G=fromNumber(r,this.unsigned),B=G.mul(e);G.isZero()&&(G=ONE),T=T.add(G),u=u.sub(B)}return T};LongPrototype.div=LongPrototype.divide;LongPrototype.modulo=function(e){if(isLong(e)||(e=fromValue(e)),wasm){var t=(this.unsigned?wasm.rem_u:wasm.rem_s)(this.low,this.high,e.low,e.high);return fromBits(t,wasm.get_high(),this.unsigned)}return this.sub(this.div(e).mul(e))};LongPrototype.mod=LongPrototype.modulo;LongPrototype.rem=LongPrototype.modulo;LongPrototype.not=function(){return fromBits(~this.low,~this.high,this.unsigned)};LongPrototype.countLeadingZeros=function(){return this.high?Math.clz32(this.high):Math.clz32(this.low)+32};LongPrototype.clz=LongPrototype.countLeadingZeros;LongPrototype.countTrailingZeros=function(){return this.low?ctz32(this.low):ctz32(this.high)+32};LongPrototype.ctz=LongPrototype.countTrailingZeros;LongPrototype.and=function(e){return isLong(e)||(e=fromValue(e)),fromBits(this.low&e.low,this.high&e.high,this.unsigned)};LongPrototype.or=function(e){return isLong(e)||(e=fromValue(e)),fromBits(this.low|e.low,this.high|e.high,this.unsigned)};LongPrototype.xor=function(e){return isLong(e)||(e=fromValue(e)),fromBits(this.low^e.low,this.high^e.high,this.unsigned)};LongPrototype.shiftLeft=function(e){return isLong(e)&&(e=e.toInt()),(e&=63)===0?this:e<32?fromBits(this.low<<e,this.high<<e|this.low>>>32-e,this.unsigned):fromBits(0,this.low<<e-32,this.unsigned)};LongPrototype.shl=LongPrototype.shiftLeft;LongPrototype.shiftRight=function(e){return isLong(e)&&(e=e.toInt()),(e&=63)===0?this:e<32?fromBits(this.low>>>e|this.high<<32-e,this.high>>e,this.unsigned):fromBits(this.high>>e-32,this.high>=0?0:-1,this.unsigned)};LongPrototype.shr=LongPrototype.shiftRight;LongPrototype.shiftRightUnsigned=function(e){return isLong(e)&&(e=e.toInt()),(e&=63)===0?this:e<32?fromBits(this.low>>>e|this.high<<32-e,this.high>>>e,this.unsigned):e===32?fromBits(this.high,0,this.unsigned):fromBits(this.high>>>e-32,0,this.unsigned)};LongPrototype.shru=LongPrototype.shiftRightUnsigned;LongPrototype.shr_u=LongPrototype.shiftRightUnsigned;LongPrototype.rotateLeft=function(e){var t;return isLong(e)&&(e=e.toInt()),(e&=63)===0?this:e===32?fromBits(this.high,this.low,this.unsigned):e<32?(t=32-e,fromBits(this.low<<e|this.high>>>t,this.high<<e|this.low>>>t,this.unsigned)):(e-=32,t=32-e,fromBits(this.high<<e|this.low>>>t,this.low<<e|this.high>>>t,this.unsigned))};LongPrototype.rotl=LongPrototype.rotateLeft;LongPrototype.rotateRight=function(e){var t;return isLong(e)&&(e=e.toInt()),(e&=63)===0?this:e===32?fromBits(this.high,this.low,this.unsigned):e<32?(t=32-e,fromBits(this.high<<t|this.low>>>e,this.low<<t|this.high>>>e,this.unsigned)):(e-=32,t=32-e,fromBits(this.low<<t|this.high>>>e,this.high<<t|this.low>>>e,this.unsigned))};LongPrototype.rotr=LongPrototype.rotateRight;LongPrototype.toSigned=function(){return this.unsigned?fromBits(this.low,this.high,!1):this};LongPrototype.toUnsigned=function(){return this.unsigned?this:fromBits(this.low,this.high,!0)};LongPrototype.toBytes=function(e){return e?this.toBytesLE():this.toBytesBE()};LongPrototype.toBytesLE=function(){var e=this.high,t=this.low;return[t&255,t>>>8&255,t>>>16&255,t>>>24,e&255,e>>>8&255,e>>>16&255,e>>>24]};LongPrototype.toBytesBE=function(){var e=this.high,t=this.low;return[e>>>24,e>>>16&255,e>>>8&255,e&255,t>>>24,t>>>16&255,t>>>8&255,t&255]};Long.fromBytes=function(e,t,r){return r?Long.fromBytesLE(e,t):Long.fromBytesBE(e,t)};Long.fromBytesLE=function(e,t){return new Long(e[0]|e[1]<<8|e[2]<<16|e[3]<<24,e[4]|e[5]<<8|e[6]<<16|e[7]<<24,t)};Long.fromBytesBE=function(e,t){return new Long(e[4]<<24|e[5]<<16|e[6]<<8|e[7],e[0]<<24|e[1]<<16|e[2]<<8|e[3],t)};window.Buffer=bufferExports.Buffer;window.process=process$1;window.Long=Long;var jsxRuntime={exports:{}},reactJsxRuntime_production={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredReactJsxRuntime_production;function requireReactJsxRuntime_production(){if(hasRequiredReactJsxRuntime_production)return reactJsxRuntime_production;hasRequiredReactJsxRuntime_production=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(r,u,T){var d=null;if(T!==void 0&&(d=""+T),u.key!==void 0&&(d=""+u.key),"key"in u){T={};for(var A in u)A!=="key"&&(T[A]=u[A])}else T=u;return u=T.ref,{$$typeof:n,type:r,key:d,ref:u!==void 0?u:null,props:T}}return reactJsxRuntime_production.Fragment=e,reactJsxRuntime_production.jsx=t,reactJsxRuntime_production.jsxs=t,reactJsxRuntime_production}var hasRequiredJsxRuntime;function requireJsxRuntime(){return hasRequiredJsxRuntime||(hasRequiredJsxRuntime=1,jsxRuntime.exports=requireReactJsxRuntime_production()),jsxRuntime.exports}var jsxRuntimeExports=requireJsxRuntime(),client={exports:{}},reactDomClient_production={},scheduler={exports:{}},scheduler_production={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredScheduler_production;function requireScheduler_production(){return hasRequiredScheduler_production||(hasRequiredScheduler_production=1,(function(n){function e(Me,je){var it=Me.length;Me.push(je);e:for(;0<it;){var Ke=it-1>>>1,qe=Me[Ke];if(0<u(qe,je))Me[Ke]=je,Me[it]=qe,it=Ke;else break e}}function t(Me){return Me.length===0?null:Me[0]}function r(Me){if(Me.length===0)return null;var je=Me[0],it=Me.pop();if(it!==je){Me[0]=it;e:for(var Ke=0,qe=Me.length,Pe=qe>>>1;Ke<Pe;){var et=2*(Ke+1)-1,Je=Me[et],at=et+1,tt=Me[at];if(0>u(Je,it))at<qe&&0>u(tt,Je)?(Me[Ke]=tt,Me[at]=it,Ke=at):(Me[Ke]=Je,Me[et]=it,Ke=et);else if(at<qe&&0>u(tt,it))Me[Ke]=tt,Me[at]=it,Ke=at;else break e}}return je}function u(Me,je){var it=Me.sortIndex-je.sortIndex;return it!==0?it:Me.id-je.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var T=performance;n.unstable_now=function(){return T.now()}}else{var d=Date,A=d.now();n.unstable_now=function(){return d.now()-A}}var le=[],G=[],B=1,o=null,i=3,w=!1,ae=!1,ue=!1,he=!1,pe=typeof setTimeout=="function"?setTimeout:null,ge=typeof clearTimeout=="function"?clearTimeout:null,be=typeof setImmediate<"u"?setImmediate:null;function ve(Me){for(var je=t(G);je!==null;){if(je.callback===null)r(G);else if(je.startTime<=Me)r(G),je.sortIndex=je.expirationTime,e(le,je);else break;je=t(G)}}function we(Me){if(ue=!1,ve(Me),!ae)if(t(le)!==null)ae=!0,Se||(Se=!0,$e());else{var je=t(G);je!==null&&Xe(we,je.startTime-Me)}}var Se=!1,Ae=-1,Re=5,Te=-1;function Ce(){return he?!0:!(n.unstable_now()-Te<Re)}function Ve(){if(he=!1,Se){var Me=n.unstable_now();Te=Me;var je=!0;try{e:{ae=!1,ue&&(ue=!1,ge(Ae),Ae=-1),w=!0;var it=i;try{t:{for(ve(Me),o=t(le);o!==null&&!(o.expirationTime>Me&&Ce());){var Ke=o.callback;if(typeof Ke=="function"){o.callback=null,i=o.priorityLevel;var qe=Ke(o.expirationTime<=Me);if(Me=n.unstable_now(),typeof qe=="function"){o.callback=qe,ve(Me),je=!0;break t}o===t(le)&&r(le),ve(Me)}else r(le);o=t(le)}if(o!==null)je=!0;else{var Pe=t(G);Pe!==null&&Xe(we,Pe.startTime-Me),je=!1}}break e}finally{o=null,i=it,w=!1}je=void 0}}finally{je?$e():Se=!1}}}var $e;if(typeof be=="function")$e=function(){be(Ve)};else if(typeof MessageChannel<"u"){var He=new MessageChannel,De=He.port2;He.port1.onmessage=Ve,$e=function(){De.postMessage(null)}}else $e=function(){pe(Ve,0)};function Xe(Me,je){Ae=pe(function(){Me(n.unstable_now())},je)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(Me){Me.callback=null},n.unstable_forceFrameRate=function(Me){0>Me||125<Me?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Re=0<Me?Math.floor(1e3/Me):5},n.unstable_getCurrentPriorityLevel=function(){return i},n.unstable_next=function(Me){switch(i){case 1:case 2:case 3:var je=3;break;default:je=i}var it=i;i=je;try{return Me()}finally{i=it}},n.unstable_requestPaint=function(){he=!0},n.unstable_runWithPriority=function(Me,je){switch(Me){case 1:case 2:case 3:case 4:case 5:break;default:Me=3}var it=i;i=Me;try{return je()}finally{i=it}},n.unstable_scheduleCallback=function(Me,je,it){var Ke=n.unstable_now();switch(typeof it=="object"&&it!==null?(it=it.delay,it=typeof it=="number"&&0<it?Ke+it:Ke):it=Ke,Me){case 1:var qe=-1;break;case 2:qe=250;break;case 5:qe=1073741823;break;case 4:qe=1e4;break;default:qe=5e3}return qe=it+qe,Me={id:B++,callback:je,priorityLevel:Me,startTime:it,expirationTime:qe,sortIndex:-1},it>Ke?(Me.sortIndex=it,e(G,Me),t(le)===null&&Me===t(G)&&(ue?(ge(Ae),Ae=-1):ue=!0,Xe(we,it-Ke))):(Me.sortIndex=qe,e(le,Me),ae||w||(ae=!0,Se||(Se=!0,$e()))),Me},n.unstable_shouldYield=Ce,n.unstable_wrapCallback=function(Me){var je=i;return function(){var it=i;i=je;try{return Me.apply(this,arguments)}finally{i=it}}}})(scheduler_production)),scheduler_production}var hasRequiredScheduler;function requireScheduler(){return hasRequiredScheduler||(hasRequiredScheduler=1,scheduler.exports=requireScheduler_production()),scheduler.exports}var react={exports:{}},react_production={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredReact_production;function requireReact_production(){if(hasRequiredReact_production)return react_production;hasRequiredReact_production=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),u=Symbol.for("react.profiler"),T=Symbol.for("react.consumer"),d=Symbol.for("react.context"),A=Symbol.for("react.forward_ref"),le=Symbol.for("react.suspense"),G=Symbol.for("react.memo"),B=Symbol.for("react.lazy"),o=Symbol.for("react.activity"),i=Symbol.iterator;function w(Pe){return Pe===null||typeof Pe!="object"?null:(Pe=i&&Pe[i]||Pe["@@iterator"],typeof Pe=="function"?Pe:null)}var ae={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},ue=Object.assign,he={};function pe(Pe,et,Je){this.props=Pe,this.context=et,this.refs=he,this.updater=Je||ae}pe.prototype.isReactComponent={},pe.prototype.setState=function(Pe,et){if(typeof Pe!="object"&&typeof Pe!="function"&&Pe!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,Pe,et,"setState")},pe.prototype.forceUpdate=function(Pe){this.updater.enqueueForceUpdate(this,Pe,"forceUpdate")};function ge(){}ge.prototype=pe.prototype;function be(Pe,et,Je){this.props=Pe,this.context=et,this.refs=he,this.updater=Je||ae}var ve=be.prototype=new ge;ve.constructor=be,ue(ve,pe.prototype),ve.isPureReactComponent=!0;var we=Array.isArray;function Se(){}var Ae={H:null,A:null,T:null,S:null},Re=Object.prototype.hasOwnProperty;function Te(Pe,et,Je){var at=Je.ref;return{$$typeof:n,type:Pe,key:et,ref:at!==void 0?at:null,props:Je}}function Ce(Pe,et){return Te(Pe.type,et,Pe.props)}function Ve(Pe){return typeof Pe=="object"&&Pe!==null&&Pe.$$typeof===n}function $e(Pe){var et={"=":"=0",":":"=2"};return"$"+Pe.replace(/[=:]/g,function(Je){return et[Je]})}var He=/\/+/g;function De(Pe,et){return typeof Pe=="object"&&Pe!==null&&Pe.key!=null?$e(""+Pe.key):et.toString(36)}function Xe(Pe){switch(Pe.status){case"fulfilled":return Pe.value;case"rejected":throw Pe.reason;default:switch(typeof Pe.status=="string"?Pe.then(Se,Se):(Pe.status="pending",Pe.then(function(et){Pe.status==="pending"&&(Pe.status="fulfilled",Pe.value=et)},function(et){Pe.status==="pending"&&(Pe.status="rejected",Pe.reason=et)})),Pe.status){case"fulfilled":return Pe.value;case"rejected":throw Pe.reason}}throw Pe}function Me(Pe,et,Je,at,tt){var Tt=typeof Pe;(Tt==="undefined"||Tt==="boolean")&&(Pe=null);var vt=!1;if(Pe===null)vt=!0;else switch(Tt){case"bigint":case"string":case"number":vt=!0;break;case"object":switch(Pe.$$typeof){case n:case e:vt=!0;break;case B:return vt=Pe._init,Me(vt(Pe._payload),et,Je,at,tt)}}if(vt)return tt=tt(Pe),vt=at===""?"."+De(Pe,0):at,we(tt)?(Je="",vt!=null&&(Je=vt.replace(He,"$&/")+"/"),Me(tt,et,Je,"",function(jt){return jt})):tt!=null&&(Ve(tt)&&(tt=Ce(tt,Je+(tt.key==null||Pe&&Pe.key===tt.key?"":(""+tt.key).replace(He,"$&/")+"/")+vt)),et.push(tt)),1;vt=0;var Dt=at===""?".":at+":";if(we(Pe))for(var Pt=0;Pt<Pe.length;Pt++)at=Pe[Pt],Tt=Dt+De(at,Pt),vt+=Me(at,et,Je,Tt,tt);else if(Pt=w(Pe),typeof Pt=="function")for(Pe=Pt.call(Pe),Pt=0;!(at=Pe.next()).done;)at=at.value,Tt=Dt+De(at,Pt++),vt+=Me(at,et,Je,Tt,tt);else if(Tt==="object"){if(typeof Pe.then=="function")return Me(Xe(Pe),et,Je,at,tt);throw et=String(Pe),Error("Objects are not valid as a React child (found: "+(et==="[object Object]"?"object with keys {"+Object.keys(Pe).join(", ")+"}":et)+"). If you meant to render a collection of children, use an array instead.")}return vt}function je(Pe,et,Je){if(Pe==null)return Pe;var at=[],tt=0;return Me(Pe,at,"","",function(Tt){return et.call(Je,Tt,tt++)}),at}function it(Pe){if(Pe._status===-1){var et=Pe._result;et=et(),et.then(function(Je){(Pe._status===0||Pe._status===-1)&&(Pe._status=1,Pe._result=Je)},function(Je){(Pe._status===0||Pe._status===-1)&&(Pe._status=2,Pe._result=Je)}),Pe._status===-1&&(Pe._status=0,Pe._result=et)}if(Pe._status===1)return Pe._result.default;throw Pe._result}var Ke=typeof reportError=="function"?reportError:function(Pe){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var et=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof Pe=="object"&&Pe!==null&&typeof Pe.message=="string"?String(Pe.message):String(Pe),error:Pe});if(!window.dispatchEvent(et))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",Pe);return}console.error(Pe)},qe={map:je,forEach:function(Pe,et,Je){je(Pe,function(){et.apply(this,arguments)},Je)},count:function(Pe){var et=0;return je(Pe,function(){et++}),et},toArray:function(Pe){return je(Pe,function(et){return et})||[]},only:function(Pe){if(!Ve(Pe))throw Error("React.Children.only expected to receive a single React element child.");return Pe}};return react_production.Activity=o,react_production.Children=qe,react_production.Component=pe,react_production.Fragment=t,react_production.Profiler=u,react_production.PureComponent=be,react_production.StrictMode=r,react_production.Suspense=le,react_production.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=Ae,react_production.__COMPILER_RUNTIME={__proto__:null,c:function(Pe){return Ae.H.useMemoCache(Pe)}},react_production.cache=function(Pe){return function(){return Pe.apply(null,arguments)}},react_production.cacheSignal=function(){return null},react_production.cloneElement=function(Pe,et,Je){if(Pe==null)throw Error("The argument must be a React element, but you passed "+Pe+".");var at=ue({},Pe.props),tt=Pe.key;if(et!=null)for(Tt in et.key!==void 0&&(tt=""+et.key),et)!Re.call(et,Tt)||Tt==="key"||Tt==="__self"||Tt==="__source"||Tt==="ref"&&et.ref===void 0||(at[Tt]=et[Tt]);var Tt=arguments.length-2;if(Tt===1)at.children=Je;else if(1<Tt){for(var vt=Array(Tt),Dt=0;Dt<Tt;Dt++)vt[Dt]=arguments[Dt+2];at.children=vt}return Te(Pe.type,tt,at)},react_production.createContext=function(Pe){return Pe={$$typeof:d,_currentValue:Pe,_currentValue2:Pe,_threadCount:0,Provider:null,Consumer:null},Pe.Provider=Pe,Pe.Consumer={$$typeof:T,_context:Pe},Pe},react_production.createElement=function(Pe,et,Je){var at,tt={},Tt=null;if(et!=null)for(at in et.key!==void 0&&(Tt=""+et.key),et)Re.call(et,at)&&at!=="key"&&at!=="__self"&&at!=="__source"&&(tt[at]=et[at]);var vt=arguments.length-2;if(vt===1)tt.children=Je;else if(1<vt){for(var Dt=Array(vt),Pt=0;Pt<vt;Pt++)Dt[Pt]=arguments[Pt+2];tt.children=Dt}if(Pe&&Pe.defaultProps)for(at in vt=Pe.defaultProps,vt)tt[at]===void 0&&(tt[at]=vt[at]);return Te(Pe,Tt,tt)},react_production.createRef=function(){return{current:null}},react_production.forwardRef=function(Pe){return{$$typeof:A,render:Pe}},react_production.isValidElement=Ve,react_production.lazy=function(Pe){return{$$typeof:B,_payload:{_status:-1,_result:Pe},_init:it}},react_production.memo=function(Pe,et){return{$$typeof:G,type:Pe,compare:et===void 0?null:et}},react_production.startTransition=function(Pe){var et=Ae.T,Je={};Ae.T=Je;try{var at=Pe(),tt=Ae.S;tt!==null&&tt(Je,at),typeof at=="object"&&at!==null&&typeof at.then=="function"&&at.then(Se,Ke)}catch(Tt){Ke(Tt)}finally{et!==null&&Je.types!==null&&(et.types=Je.types),Ae.T=et}},react_production.unstable_useCacheRefresh=function(){return Ae.H.useCacheRefresh()},react_production.use=function(Pe){return Ae.H.use(Pe)},react_production.useActionState=function(Pe,et,Je){return Ae.H.useActionState(Pe,et,Je)},react_production.useCallback=function(Pe,et){return Ae.H.useCallback(Pe,et)},react_production.useContext=function(Pe){return Ae.H.useContext(Pe)},react_production.useDebugValue=function(){},react_production.useDeferredValue=function(Pe,et){return Ae.H.useDeferredValue(Pe,et)},react_production.useEffect=function(Pe,et){return Ae.H.useEffect(Pe,et)},react_production.useEffectEvent=function(Pe){return Ae.H.useEffectEvent(Pe)},react_production.useId=function(){return Ae.H.useId()},react_production.useImperativeHandle=function(Pe,et,Je){return Ae.H.useImperativeHandle(Pe,et,Je)},react_production.useInsertionEffect=function(Pe,et){return Ae.H.useInsertionEffect(Pe,et)},react_production.useLayoutEffect=function(Pe,et){return Ae.H.useLayoutEffect(Pe,et)},react_production.useMemo=function(Pe,et){return Ae.H.useMemo(Pe,et)},react_production.useOptimistic=function(Pe,et){return Ae.H.useOptimistic(Pe,et)},react_production.useReducer=function(Pe,et,Je){return Ae.H.useReducer(Pe,et,Je)},react_production.useRef=function(Pe){return Ae.H.useRef(Pe)},react_production.useState=function(Pe){return Ae.H.useState(Pe)},react_production.useSyncExternalStore=function(Pe,et,Je){return Ae.H.useSyncExternalStore(Pe,et,Je)},react_production.useTransition=function(){return Ae.H.useTransition()},react_production.version="19.2.3",react_production}var hasRequiredReact;function requireReact(){return hasRequiredReact||(hasRequiredReact=1,react.exports=requireReact_production()),react.exports}var reactDom={exports:{}},reactDom_production={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredReactDom_production;function requireReactDom_production(){if(hasRequiredReactDom_production)return reactDom_production;hasRequiredReactDom_production=1;var n=requireReact();function e(le){var G="https://react.dev/errors/"+le;if(1<arguments.length){G+="?args[]="+encodeURIComponent(arguments[1]);for(var B=2;B<arguments.length;B++)G+="&args[]="+encodeURIComponent(arguments[B])}return"Minified React error #"+le+"; visit "+G+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var r={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},u=Symbol.for("react.portal");function T(le,G,B){var o=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:u,key:o==null?null:""+o,children:le,containerInfo:G,implementation:B}}var d=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function A(le,G){if(le==="font")return"";if(typeof G=="string")return G==="use-credentials"?G:""}return reactDom_production.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,reactDom_production.createPortal=function(le,G){var B=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!G||G.nodeType!==1&&G.nodeType!==9&&G.nodeType!==11)throw Error(e(299));return T(le,G,null,B)},reactDom_production.flushSync=function(le){var G=d.T,B=r.p;try{if(d.T=null,r.p=2,le)return le()}finally{d.T=G,r.p=B,r.d.f()}},reactDom_production.preconnect=function(le,G){typeof le=="string"&&(G?(G=G.crossOrigin,G=typeof G=="string"?G==="use-credentials"?G:"":void 0):G=null,r.d.C(le,G))},reactDom_production.prefetchDNS=function(le){typeof le=="string"&&r.d.D(le)},reactDom_production.preinit=function(le,G){if(typeof le=="string"&&G&&typeof G.as=="string"){var B=G.as,o=A(B,G.crossOrigin),i=typeof G.integrity=="string"?G.integrity:void 0,w=typeof G.fetchPriority=="string"?G.fetchPriority:void 0;B==="style"?r.d.S(le,typeof G.precedence=="string"?G.precedence:void 0,{crossOrigin:o,integrity:i,fetchPriority:w}):B==="script"&&r.d.X(le,{crossOrigin:o,integrity:i,fetchPriority:w,nonce:typeof G.nonce=="string"?G.nonce:void 0})}},reactDom_production.preinitModule=function(le,G){if(typeof le=="string")if(typeof G=="object"&&G!==null){if(G.as==null||G.as==="script"){var B=A(G.as,G.crossOrigin);r.d.M(le,{crossOrigin:B,integrity:typeof G.integrity=="string"?G.integrity:void 0,nonce:typeof G.nonce=="string"?G.nonce:void 0})}}else G==null&&r.d.M(le)},reactDom_production.preload=function(le,G){if(typeof le=="string"&&typeof G=="object"&&G!==null&&typeof G.as=="string"){var B=G.as,o=A(B,G.crossOrigin);r.d.L(le,B,{crossOrigin:o,integrity:typeof G.integrity=="string"?G.integrity:void 0,nonce:typeof G.nonce=="string"?G.nonce:void 0,type:typeof G.type=="string"?G.type:void 0,fetchPriority:typeof G.fetchPriority=="string"?G.fetchPriority:void 0,referrerPolicy:typeof G.referrerPolicy=="string"?G.referrerPolicy:void 0,imageSrcSet:typeof G.imageSrcSet=="string"?G.imageSrcSet:void 0,imageSizes:typeof G.imageSizes=="string"?G.imageSizes:void 0,media:typeof G.media=="string"?G.media:void 0})}},reactDom_production.preloadModule=function(le,G){if(typeof le=="string")if(G){var B=A(G.as,G.crossOrigin);r.d.m(le,{as:typeof G.as=="string"&&G.as!=="script"?G.as:void 0,crossOrigin:B,integrity:typeof G.integrity=="string"?G.integrity:void 0})}else r.d.m(le)},reactDom_production.requestFormReset=function(le){r.d.r(le)},reactDom_production.unstable_batchedUpdates=function(le,G){return le(G)},reactDom_production.useFormState=function(le,G,B){return d.H.useFormState(le,G,B)},reactDom_production.useFormStatus=function(){return d.H.useHostTransitionStatus()},reactDom_production.version="19.2.3",reactDom_production}var hasRequiredReactDom;function requireReactDom(){if(hasRequiredReactDom)return reactDom.exports;hasRequiredReactDom=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),reactDom.exports=requireReactDom_production(),reactDom.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredReactDomClient_production;function requireReactDomClient_production(){if(hasRequiredReactDomClient_production)return reactDomClient_production;hasRequiredReactDomClient_production=1;var n=requireScheduler(),e=requireReact(),t=requireReactDom();function r(s){var l="https://react.dev/errors/"+s;if(1<arguments.length){l+="?args[]="+encodeURIComponent(arguments[1]);for(var ie=2;ie<arguments.length;ie++)l+="&args[]="+encodeURIComponent(arguments[ie])}return"Minified React error #"+s+"; visit "+l+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function u(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11)}function T(s){var l=s,ie=s;if(s.alternate)for(;l.return;)l=l.return;else{s=l;do l=s,(l.flags&4098)!==0&&(ie=l.return),s=l.return;while(s)}return l.tag===3?ie:null}function d(s){if(s.tag===13){var l=s.memoizedState;if(l===null&&(s=s.alternate,s!==null&&(l=s.memoizedState)),l!==null)return l.dehydrated}return null}function A(s){if(s.tag===31){var l=s.memoizedState;if(l===null&&(s=s.alternate,s!==null&&(l=s.memoizedState)),l!==null)return l.dehydrated}return null}function le(s){if(T(s)!==s)throw Error(r(188))}function G(s){var l=s.alternate;if(!l){if(l=T(s),l===null)throw Error(r(188));return l!==s?null:s}for(var ie=s,fe=l;;){var me=ie.return;if(me===null)break;var ye=me.alternate;if(ye===null){if(fe=me.return,fe!==null){ie=fe;continue}break}if(me.child===ye.child){for(ye=me.child;ye;){if(ye===ie)return le(me),s;if(ye===fe)return le(me),l;ye=ye.sibling}throw Error(r(188))}if(ie.return!==fe.return)ie=me,fe=ye;else{for(var Ie=!1,Fe=me.child;Fe;){if(Fe===ie){Ie=!0,ie=me,fe=ye;break}if(Fe===fe){Ie=!0,fe=me,ie=ye;break}Fe=Fe.sibling}if(!Ie){for(Fe=ye.child;Fe;){if(Fe===ie){Ie=!0,ie=ye,fe=me;break}if(Fe===fe){Ie=!0,fe=ye,ie=me;break}Fe=Fe.sibling}if(!Ie)throw Error(r(189))}}if(ie.alternate!==fe)throw Error(r(190))}if(ie.tag!==3)throw Error(r(188));return ie.stateNode.current===ie?s:l}function B(s){var l=s.tag;if(l===5||l===26||l===27||l===6)return s;for(s=s.child;s!==null;){if(l=B(s),l!==null)return l;s=s.sibling}return null}var o=Object.assign,i=Symbol.for("react.element"),w=Symbol.for("react.transitional.element"),ae=Symbol.for("react.portal"),ue=Symbol.for("react.fragment"),he=Symbol.for("react.strict_mode"),pe=Symbol.for("react.profiler"),ge=Symbol.for("react.consumer"),be=Symbol.for("react.context"),ve=Symbol.for("react.forward_ref"),we=Symbol.for("react.suspense"),Se=Symbol.for("react.suspense_list"),Ae=Symbol.for("react.memo"),Re=Symbol.for("react.lazy"),Te=Symbol.for("react.activity"),Ce=Symbol.for("react.memo_cache_sentinel"),Ve=Symbol.iterator;function $e(s){return s===null||typeof s!="object"?null:(s=Ve&&s[Ve]||s["@@iterator"],typeof s=="function"?s:null)}var He=Symbol.for("react.client.reference");function De(s){if(s==null)return null;if(typeof s=="function")return s.$$typeof===He?null:s.displayName||s.name||null;if(typeof s=="string")return s;switch(s){case ue:return"Fragment";case pe:return"Profiler";case he:return"StrictMode";case we:return"Suspense";case Se:return"SuspenseList";case Te:return"Activity"}if(typeof s=="object")switch(s.$$typeof){case ae:return"Portal";case be:return s.displayName||"Context";case ge:return(s._context.displayName||"Context")+".Consumer";case ve:var l=s.render;return s=s.displayName,s||(s=l.displayName||l.name||"",s=s!==""?"ForwardRef("+s+")":"ForwardRef"),s;case Ae:return l=s.displayName||null,l!==null?l:De(s.type)||"Memo";case Re:l=s._payload,s=s._init;try{return De(s(l))}catch{}}return null}var Xe=Array.isArray,Me=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,je=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,it={pending:!1,data:null,method:null,action:null},Ke=[],qe=-1;function Pe(s){return{current:s}}function et(s){0>qe||(s.current=Ke[qe],Ke[qe]=null,qe--)}function Je(s,l){qe++,Ke[qe]=s.current,s.current=l}var at=Pe(null),tt=Pe(null),Tt=Pe(null),vt=Pe(null);function Dt(s,l){switch(Je(Tt,l),Je(tt,s),Je(at,null),l.nodeType){case 9:case 11:s=(s=l.documentElement)&&(s=s.namespaceURI)?fh(s):0;break;default:if(s=l.tagName,l=l.namespaceURI)l=fh(l),s=hh(l,s);else switch(s){case"svg":s=1;break;case"math":s=2;break;default:s=0}}et(at),Je(at,s)}function Pt(){et(at),et(tt),et(Tt)}function jt(s){s.memoizedState!==null&&Je(vt,s);var l=at.current,ie=hh(l,s.type);l!==ie&&(Je(tt,s),Je(at,ie))}function tn(s){tt.current===s&&(et(at),et(tt)),vt.current===s&&(et(vt),Qo._currentValue=it)}var Sn,fn;function Jt(s){if(Sn===void 0)try{throw Error()}catch(ie){var l=ie.stack.trim().match(/\n( *(at )?)/);Sn=l&&l[1]||"",fn=-1<ie.stack.indexOf(`
    at`)?" (<anonymous>)":-1<ie.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Sn+s+fn}var Vn=!1;function qn(s,l){if(!s||Vn)return"";Vn=!0;var ie=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var fe={DetermineComponentFrameRoot:function(){try{if(l){var Ot=function(){throw Error()};if(Object.defineProperty(Ot.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Ot,[])}catch(gt){var ht=gt}Reflect.construct(s,[],Ot)}else{try{Ot.call()}catch(gt){ht=gt}s.call(Ot.prototype)}}else{try{throw Error()}catch(gt){ht=gt}(Ot=s())&&typeof Ot.catch=="function"&&Ot.catch(function(){})}}catch(gt){if(gt&&ht&&typeof gt.stack=="string")return[gt.stack,ht.stack]}return[null,null]}};fe.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var me=Object.getOwnPropertyDescriptor(fe.DetermineComponentFrameRoot,"name");me&&me.configurable&&Object.defineProperty(fe.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var ye=fe.DetermineComponentFrameRoot(),Ie=ye[0],Fe=ye[1];if(Ie&&Fe){var Qe=Ie.split(`
`),ft=Fe.split(`
`);for(me=fe=0;fe<Qe.length&&!Qe[fe].includes("DetermineComponentFrameRoot");)fe++;for(;me<ft.length&&!ft[me].includes("DetermineComponentFrameRoot");)me++;if(fe===Qe.length||me===ft.length)for(fe=Qe.length-1,me=ft.length-1;1<=fe&&0<=me&&Qe[fe]!==ft[me];)me--;for(;1<=fe&&0<=me;fe--,me--)if(Qe[fe]!==ft[me]){if(fe!==1||me!==1)do if(fe--,me--,0>me||Qe[fe]!==ft[me]){var St=`
`+Qe[fe].replace(" at new "," at ");return s.displayName&&St.includes("<anonymous>")&&(St=St.replace("<anonymous>",s.displayName)),St}while(1<=fe&&0<=me);break}}}finally{Vn=!1,Error.prepareStackTrace=ie}return(ie=s?s.displayName||s.name:"")?Jt(ie):""}function Yn(s,l){switch(s.tag){case 26:case 27:case 5:return Jt(s.type);case 16:return Jt("Lazy");case 13:return s.child!==l&&l!==null?Jt("Suspense Fallback"):Jt("Suspense");case 19:return Jt("SuspenseList");case 0:case 15:return qn(s.type,!1);case 11:return qn(s.type.render,!1);case 1:return qn(s.type,!0);case 31:return Jt("Activity");default:return""}}function nr(s){try{var l="",ie=null;do l+=Yn(s,ie),ie=s,s=s.return;while(s);return l}catch(fe){return`
Error generating stack: `+fe.message+`
`+fe.stack}}var yt=Object.prototype.hasOwnProperty,$t=n.unstable_scheduleCallback,Kt=n.unstable_cancelCallback,Ut=n.unstable_shouldYield,sn=n.unstable_requestPaint,wn=n.unstable_now,zt=n.unstable_getCurrentPriorityLevel,Zn=n.unstable_ImmediatePriority,Le=n.unstable_UserBlockingPriority,Ee=n.unstable_NormalPriority,Oe=n.unstable_LowPriority,ze=n.unstable_IdlePriority,st=n.log,ct=n.unstable_setDisableYieldValue,Et=null,It=null;function an(s){if(typeof st=="function"&&ct(s),It&&typeof It.setStrictMode=="function")try{It.setStrictMode(Et,s)}catch{}}var en=Math.clz32?Math.clz32:xn,On=Math.log,un=Math.LN2;function xn(s){return s>>>=0,s===0?32:31-(On(s)/un|0)|0}var Ir=256,qr=262144,Mr=4194304;function qt(s){var l=s&42;if(l!==0)return l;switch(s&-s){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return s&261888;case 262144:case 524288:case 1048576:case 2097152:return s&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return s&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return s}}function Ht(s,l,ie){var fe=s.pendingLanes;if(fe===0)return 0;var me=0,ye=s.suspendedLanes,Ie=s.pingedLanes;s=s.warmLanes;var Fe=fe&134217727;return Fe!==0?(fe=Fe&~ye,fe!==0?me=qt(fe):(Ie&=Fe,Ie!==0?me=qt(Ie):ie||(ie=Fe&~s,ie!==0&&(me=qt(ie))))):(Fe=fe&~ye,Fe!==0?me=qt(Fe):Ie!==0?me=qt(Ie):ie||(ie=fe&~s,ie!==0&&(me=qt(ie)))),me===0?0:l!==0&&l!==me&&(l&ye)===0&&(ye=me&-me,ie=l&-l,ye>=ie||ye===32&&(ie&4194048)!==0)?l:me}function Yt(s,l){return(s.pendingLanes&~(s.suspendedLanes&~s.pingedLanes)&l)===0}function ts(s,l){switch(s){case 1:case 2:case 4:case 8:case 64:return l+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return l+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Yr(){var s=Mr;return Mr<<=1,(Mr&62914560)===0&&(Mr=4194304),s}function Jr(s){for(var l=[],ie=0;31>ie;ie++)l.push(s);return l}function Ur(s,l){s.pendingLanes|=l,l!==268435456&&(s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0)}function ns(s,l,ie,fe,me,ye){var Ie=s.pendingLanes;s.pendingLanes=ie,s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0,s.expiredLanes&=ie,s.entangledLanes&=ie,s.errorRecoveryDisabledLanes&=ie,s.shellSuspendCounter=0;var Fe=s.entanglements,Qe=s.expirationTimes,ft=s.hiddenUpdates;for(ie=Ie&~ie;0<ie;){var St=31-en(ie),Ot=1<<St;Fe[St]=0,Qe[St]=-1;var ht=ft[St];if(ht!==null)for(ft[St]=null,St=0;St<ht.length;St++){var gt=ht[St];gt!==null&&(gt.lane&=-536870913)}ie&=~Ot}fe!==0&&Si(s,fe,0),ye!==0&&me===0&&s.tag!==0&&(s.suspendedLanes|=ye&~(Ie&~l))}function Si(s,l,ie){s.pendingLanes|=l,s.suspendedLanes&=~l;var fe=31-en(l);s.entangledLanes|=l,s.entanglements[fe]=s.entanglements[fe]|1073741824|ie&261930}function Ai(s,l){var ie=s.entangledLanes|=l;for(s=s.entanglements;ie;){var fe=31-en(ie),me=1<<fe;me&l|s[fe]&l&&(s[fe]|=l),ie&=~me}}function Oi(s,l){var ie=l&-l;return ie=(ie&42)!==0?1:ei(ie),(ie&(s.suspendedLanes|l))!==0?0:ie}function ei(s){switch(s){case 2:s=1;break;case 8:s=4;break;case 32:s=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:s=128;break;case 268435456:s=134217728;break;default:s=0}return s}function ti(s){return s&=-s,2<s?8<s?(s&134217727)!==0?32:268435456:8:2}function Ii(){var s=je.p;return s!==0?s:(s=window.event,s===void 0?32:Fh(s.type))}function Mi(s,l){var ie=je.p;try{return je.p=s,l()}finally{je.p=ie}}var fr=Math.random().toString(36).slice(2),$n="__reactFiber$"+fr,Be="__reactProps$"+fr,We="__reactContainer$"+fr,rt="__reactEvents$"+fr,lt="__reactListeners$"+fr,pt="__reactHandles$"+fr,wt="__reactResources$"+fr,Nt="__reactMarker$"+fr;function kt(s){delete s[$n],delete s[Be],delete s[rt],delete s[lt],delete s[pt]}function Ct(s){var l=s[$n];if(l)return l;for(var ie=s.parentNode;ie;){if(l=ie[We]||ie[$n]){if(ie=l.alternate,l.child!==null||ie!==null&&ie.child!==null)for(s=vh(s);s!==null;){if(ie=s[$n])return ie;s=vh(s)}return l}s=ie,ie=s.parentNode}return null}function Xt(s){if(s=s[$n]||s[We]){var l=s.tag;if(l===5||l===6||l===13||l===31||l===26||l===27||l===3)return s}return null}function _n(s){var l=s.tag;if(l===5||l===26||l===27||l===6)return s.stateNode;throw Error(r(33))}function kn(s){var l=s[wt];return l||(l=s[wt]={hoistableStyles:new Map,hoistableScripts:new Map}),l}function hn(s){s[Nt]=!0}var bt=new Set,cn={};function vn(s,l){Jn(s,l),Jn(s+"Capture",l)}function Jn(s,l){for(cn[s]=l,s=0;s<l.length;s++)bt.add(l[s])}var zr=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),ws={},Ts={};function na(s){return yt.call(Ts,s)?!0:yt.call(ws,s)?!1:zr.test(s)?Ts[s]=!0:(ws[s]=!0,!1)}function er(s,l,ie){if(na(l))if(ie===null)s.removeAttribute(l);else{switch(typeof ie){case"undefined":case"function":case"symbol":s.removeAttribute(l);return;case"boolean":var fe=l.toLowerCase().slice(0,5);if(fe!=="data-"&&fe!=="aria-"){s.removeAttribute(l);return}}s.setAttribute(l,""+ie)}}function ni(s,l,ie){if(ie===null)s.removeAttribute(l);else{switch(typeof ie){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(l);return}s.setAttribute(l,""+ie)}}function Nr(s,l,ie,fe){if(fe===null)s.removeAttribute(ie);else{switch(typeof fe){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(ie);return}s.setAttributeNS(l,ie,""+fe)}}function ur(s){switch(typeof s){case"bigint":case"boolean":case"number":case"string":case"undefined":return s;case"object":return s;default:return""}}function lo(s){var l=s.type;return(s=s.nodeName)&&s.toLowerCase()==="input"&&(l==="checkbox"||l==="radio")}function ul(s,l,ie){var fe=Object.getOwnPropertyDescriptor(s.constructor.prototype,l);if(!s.hasOwnProperty(l)&&typeof fe<"u"&&typeof fe.get=="function"&&typeof fe.set=="function"){var me=fe.get,ye=fe.set;return Object.defineProperty(s,l,{configurable:!0,get:function(){return me.call(this)},set:function(Ie){ie=""+Ie,ye.call(this,Ie)}}),Object.defineProperty(s,l,{enumerable:fe.enumerable}),{getValue:function(){return ie},setValue:function(Ie){ie=""+Ie},stopTracking:function(){s._valueTracker=null,delete s[l]}}}}function uo(s){if(!s._valueTracker){var l=lo(s)?"checked":"value";s._valueTracker=ul(s,l,""+s[l])}}function rs(s){if(!s)return!1;var l=s._valueTracker;if(!l)return!0;var ie=l.getValue(),fe="";return s&&(fe=lo(s)?s.checked?"true":"false":s.value),s=fe,s!==ie?(l.setValue(s),!0):!1}function Ni(s){if(s=s||(typeof document<"u"?document:void 0),typeof s>"u")return null;try{return s.activeElement||s.body}catch{return s.body}}var ra=/[\n"\\]/g;function cr(s){return s.replace(ra,function(l){return"\\"+l.charCodeAt(0).toString(16)+" "})}function Es(s,l,ie,fe,me,ye,Ie,Fe){s.name="",Ie!=null&&typeof Ie!="function"&&typeof Ie!="symbol"&&typeof Ie!="boolean"?s.type=Ie:s.removeAttribute("type"),l!=null?Ie==="number"?(l===0&&s.value===""||s.value!=l)&&(s.value=""+ur(l)):s.value!==""+ur(l)&&(s.value=""+ur(l)):Ie!=="submit"&&Ie!=="reset"||s.removeAttribute("value"),l!=null?Ri(s,Ie,ur(l)):ie!=null?Ri(s,Ie,ur(ie)):fe!=null&&s.removeAttribute("value"),me==null&&ye!=null&&(s.defaultChecked=!!ye),me!=null&&(s.checked=me&&typeof me!="function"&&typeof me!="symbol"),Fe!=null&&typeof Fe!="function"&&typeof Fe!="symbol"&&typeof Fe!="boolean"?s.name=""+ur(Fe):s.removeAttribute("name")}function co(s,l,ie,fe,me,ye,Ie,Fe){if(ye!=null&&typeof ye!="function"&&typeof ye!="symbol"&&typeof ye!="boolean"&&(s.type=ye),l!=null||ie!=null){if(!(ye!=="submit"&&ye!=="reset"||l!=null)){uo(s);return}ie=ie!=null?""+ur(ie):"",l=l!=null?""+ur(l):ie,Fe||l===s.value||(s.value=l),s.defaultValue=l}fe=fe??me,fe=typeof fe!="function"&&typeof fe!="symbol"&&!!fe,s.checked=Fe?s.checked:!!fe,s.defaultChecked=!!fe,Ie!=null&&typeof Ie!="function"&&typeof Ie!="symbol"&&typeof Ie!="boolean"&&(s.name=Ie),uo(s)}function Ri(s,l,ie){l==="number"&&Ni(s.ownerDocument)===s||s.defaultValue===""+ie||(s.defaultValue=""+ie)}function ri(s,l,ie,fe){if(s=s.options,l){l={};for(var me=0;me<ie.length;me++)l["$"+ie[me]]=!0;for(ie=0;ie<s.length;ie++)me=l.hasOwnProperty("$"+s[ie].value),s[ie].selected!==me&&(s[ie].selected=me),me&&fe&&(s[ie].defaultSelected=!0)}else{for(ie=""+ur(ie),l=null,me=0;me<s.length;me++){if(s[me].value===ie){s[me].selected=!0,fe&&(s[me].defaultSelected=!0);return}l!==null||s[me].disabled||(l=s[me])}l!==null&&(l.selected=!0)}}function fo(s,l,ie){if(l!=null&&(l=""+ur(l),l!==s.value&&(s.value=l),ie==null)){s.defaultValue!==l&&(s.defaultValue=l);return}s.defaultValue=ie!=null?""+ur(ie):""}function Ss(s,l,ie,fe){if(l==null){if(fe!=null){if(ie!=null)throw Error(r(92));if(Xe(fe)){if(1<fe.length)throw Error(r(93));fe=fe[0]}ie=fe}ie==null&&(ie=""),l=ie}ie=ur(l),s.defaultValue=ie,fe=s.textContent,fe===ie&&fe!==""&&fe!==null&&(s.value=fe),uo(s)}function ii(s,l){if(l){var ie=s.firstChild;if(ie&&ie===s.lastChild&&ie.nodeType===3){ie.nodeValue=l;return}}s.textContent=l}var ln=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function ho(s,l,ie){var fe=l.indexOf("--")===0;ie==null||typeof ie=="boolean"||ie===""?fe?s.setProperty(l,""):l==="float"?s.cssFloat="":s[l]="":fe?s.setProperty(l,ie):typeof ie!="number"||ie===0||ln.has(l)?l==="float"?s.cssFloat=ie:s[l]=(""+ie).trim():s[l]=ie+"px"}function nn(s,l,ie){if(l!=null&&typeof l!="object")throw Error(r(62));if(s=s.style,ie!=null){for(var fe in ie)!ie.hasOwnProperty(fe)||l!=null&&l.hasOwnProperty(fe)||(fe.indexOf("--")===0?s.setProperty(fe,""):fe==="float"?s.cssFloat="":s[fe]="");for(var me in l)fe=l[me],l.hasOwnProperty(me)&&ie[me]!==fe&&ho(s,me,fe)}else for(var ye in l)l.hasOwnProperty(ye)&&ho(s,ye,l[ye])}function Zt(s){if(s.indexOf("-")===-1)return!1;switch(s){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var po=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),As=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function is(s){return As.test(""+s)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":s}function Rr(){}var Os=null;function Is(s){return s=s.target||s.srcElement||window,s.correspondingUseElement&&(s=s.correspondingUseElement),s.nodeType===3?s.parentNode:s}var si=null,oi=null;function mo(s){var l=Xt(s);if(l&&(s=l.stateNode)){var ie=s[Be]||null;e:switch(s=l.stateNode,l.type){case"input":if(Es(s,ie.value,ie.defaultValue,ie.defaultValue,ie.checked,ie.defaultChecked,ie.type,ie.name),l=ie.name,ie.type==="radio"&&l!=null){for(ie=s;ie.parentNode;)ie=ie.parentNode;for(ie=ie.querySelectorAll('input[name="'+cr(""+l)+'"][type="radio"]'),l=0;l<ie.length;l++){var fe=ie[l];if(fe!==s&&fe.form===s.form){var me=fe[Be]||null;if(!me)throw Error(r(90));Es(fe,me.value,me.defaultValue,me.defaultValue,me.checked,me.defaultChecked,me.type,me.name)}}for(l=0;l<ie.length;l++)fe=ie[l],fe.form===s.form&&rs(fe)}break e;case"textarea":fo(s,ie.value,ie.defaultValue);break e;case"select":l=ie.value,l!=null&&ri(s,!!ie.multiple,l,!1)}}}var Ms=!1;function go(s,l,ie){if(Ms)return s(l,ie);Ms=!0;try{var fe=s(l);return fe}finally{if(Ms=!1,(si!==null||oi!==null)&&($a(),si&&(l=si,s=oi,oi=si=null,mo(l),s)))for(l=0;l<s.length;l++)mo(s[l])}}function Di(s,l){var ie=s.stateNode;if(ie===null)return null;var fe=ie[Be]||null;if(fe===null)return null;ie=fe[l];e:switch(l){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(fe=!fe.disabled)||(s=s.type,fe=!(s==="button"||s==="input"||s==="select"||s==="textarea")),s=!fe;break e;default:s=!1}if(s)return null;if(ie&&typeof ie!="function")throw Error(r(231,l,typeof ie));return ie}var Dr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ns=!1;if(Dr)try{var Ne={};Object.defineProperty(Ne,"passive",{get:function(){Ns=!0}}),window.addEventListener("test",Ne,Ne),window.removeEventListener("test",Ne,Ne)}catch{Ns=!1}var ke=null,Ue=null,Ze=null;function ut(){if(Ze)return Ze;var s,l=Ue,ie=l.length,fe,me="value"in ke?ke.value:ke.textContent,ye=me.length;for(s=0;s<ie&&l[s]===me[s];s++);var Ie=ie-s;for(fe=1;fe<=Ie&&l[ie-fe]===me[ye-fe];fe++);return Ze=me.slice(s,1<fe?1-fe:void 0)}function mt(s){var l=s.keyCode;return"charCode"in s?(s=s.charCode,s===0&&l===13&&(s=13)):s=l,s===10&&(s=13),32<=s||s===13?s:0}function Rt(){return!0}function Bt(){return!1}function Gt(s){function l(ie,fe,me,ye,Ie){this._reactName=ie,this._targetInst=me,this.type=fe,this.nativeEvent=ye,this.target=Ie,this.currentTarget=null;for(var Fe in s)s.hasOwnProperty(Fe)&&(ie=s[Fe],this[Fe]=ie?ie(ye):ye[Fe]);return this.isDefaultPrevented=(ye.defaultPrevented!=null?ye.defaultPrevented:ye.returnValue===!1)?Rt:Bt,this.isPropagationStopped=Bt,this}return o(l.prototype,{preventDefault:function(){this.defaultPrevented=!0;var ie=this.nativeEvent;ie&&(ie.preventDefault?ie.preventDefault():typeof ie.returnValue!="unknown"&&(ie.returnValue=!1),this.isDefaultPrevented=Rt)},stopPropagation:function(){var ie=this.nativeEvent;ie&&(ie.stopPropagation?ie.stopPropagation():typeof ie.cancelBubble!="unknown"&&(ie.cancelBubble=!0),this.isPropagationStopped=Rt)},persist:function(){},isPersistent:Rt}),l}var Qt={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(s){return s.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Pn=Gt(Qt),lr=o({},Qt,{view:0,detail:0}),hr=Gt(lr),xt,dn,In,pr=o({},lr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:dl,button:0,buttons:0,relatedTarget:function(s){return s.relatedTarget===void 0?s.fromElement===s.srcElement?s.toElement:s.fromElement:s.relatedTarget},movementX:function(s){return"movementX"in s?s.movementX:(s!==In&&(In&&s.type==="mousemove"?(xt=s.screenX-In.screenX,dn=s.screenY-In.screenY):dn=xt=0,In=s),xt)},movementY:function(s){return"movementY"in s?s.movementY:dn}}),li=Gt(pr),Wh=o({},pr,{dataTransfer:0}),Xh=Gt(Wh),Kh=o({},lr,{relatedTarget:0}),cl=Gt(Kh),Qh=o({},Qt,{animationName:0,elapsedTime:0,pseudoElement:0}),Zh=Gt(Qh),Jh=o({},Qt,{clipboardData:function(s){return"clipboardData"in s?s.clipboardData:window.clipboardData}}),ep=Gt(Jh),tp=o({},Qt,{data:0}),cc=Gt(tp),np={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},rp={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},ip={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function sp(s){var l=this.nativeEvent;return l.getModifierState?l.getModifierState(s):(s=ip[s])?!!l[s]:!1}function dl(){return sp}var op=o({},lr,{key:function(s){if(s.key){var l=np[s.key]||s.key;if(l!=="Unidentified")return l}return s.type==="keypress"?(s=mt(s),s===13?"Enter":String.fromCharCode(s)):s.type==="keydown"||s.type==="keyup"?rp[s.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:dl,charCode:function(s){return s.type==="keypress"?mt(s):0},keyCode:function(s){return s.type==="keydown"||s.type==="keyup"?s.keyCode:0},which:function(s){return s.type==="keypress"?mt(s):s.type==="keydown"||s.type==="keyup"?s.keyCode:0}}),ap=Gt(op),lp=o({},pr,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),dc=Gt(lp),up=o({},lr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:dl}),cp=Gt(up),dp=o({},Qt,{propertyName:0,elapsedTime:0,pseudoElement:0}),fp=Gt(dp),hp=o({},pr,{deltaX:function(s){return"deltaX"in s?s.deltaX:"wheelDeltaX"in s?-s.wheelDeltaX:0},deltaY:function(s){return"deltaY"in s?s.deltaY:"wheelDeltaY"in s?-s.wheelDeltaY:"wheelDelta"in s?-s.wheelDelta:0},deltaZ:0,deltaMode:0}),pp=Gt(hp),mp=o({},Qt,{newState:0,oldState:0}),gp=Gt(mp),yp=[9,13,27,32],fl=Dr&&"CompositionEvent"in window,yo=null;Dr&&"documentMode"in document&&(yo=document.documentMode);var bp=Dr&&"TextEvent"in window&&!yo,fc=Dr&&(!fl||yo&&8<yo&&11>=yo),hc=" ",pc=!1;function mc(s,l){switch(s){case"keyup":return yp.indexOf(l.keyCode)!==-1;case"keydown":return l.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function gc(s){return s=s.detail,typeof s=="object"&&"data"in s?s.data:null}var Rs=!1;function xp(s,l){switch(s){case"compositionend":return gc(l);case"keypress":return l.which!==32?null:(pc=!0,hc);case"textInput":return s=l.data,s===hc&&pc?null:s;default:return null}}function vp(s,l){if(Rs)return s==="compositionend"||!fl&&mc(s,l)?(s=ut(),Ze=Ue=ke=null,Rs=!1,s):null;switch(s){case"paste":return null;case"keypress":if(!(l.ctrlKey||l.altKey||l.metaKey)||l.ctrlKey&&l.altKey){if(l.char&&1<l.char.length)return l.char;if(l.which)return String.fromCharCode(l.which)}return null;case"compositionend":return fc&&l.locale!=="ko"?null:l.data;default:return null}}var wp={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function yc(s){var l=s&&s.nodeName&&s.nodeName.toLowerCase();return l==="input"?!!wp[s.type]:l==="textarea"}function bc(s,l,ie,fe){si?oi?oi.push(fe):oi=[fe]:si=fe,l=Ya(l,"onChange"),0<l.length&&(ie=new Pn("onChange","change",null,ie,fe),s.push({event:ie,listeners:l}))}var bo=null,xo=null;function Tp(s){oh(s,0)}function ia(s){var l=_n(s);if(rs(l))return s}function xc(s,l){if(s==="change")return l}var vc=!1;if(Dr){var hl;if(Dr){var pl="oninput"in document;if(!pl){var wc=document.createElement("div");wc.setAttribute("oninput","return;"),pl=typeof wc.oninput=="function"}hl=pl}else hl=!1;vc=hl&&(!document.documentMode||9<document.documentMode)}function Tc(){bo&&(bo.detachEvent("onpropertychange",Ec),xo=bo=null)}function Ec(s){if(s.propertyName==="value"&&ia(xo)){var l=[];bc(l,xo,s,Is(s)),go(Tp,l)}}function Ep(s,l,ie){s==="focusin"?(Tc(),bo=l,xo=ie,bo.attachEvent("onpropertychange",Ec)):s==="focusout"&&Tc()}function Sp(s){if(s==="selectionchange"||s==="keyup"||s==="keydown")return ia(xo)}function Ap(s,l){if(s==="click")return ia(l)}function Op(s,l){if(s==="input"||s==="change")return ia(l)}function Ip(s,l){return s===l&&(s!==0||1/s===1/l)||s!==s&&l!==l}var vr=typeof Object.is=="function"?Object.is:Ip;function vo(s,l){if(vr(s,l))return!0;if(typeof s!="object"||s===null||typeof l!="object"||l===null)return!1;var ie=Object.keys(s),fe=Object.keys(l);if(ie.length!==fe.length)return!1;for(fe=0;fe<ie.length;fe++){var me=ie[fe];if(!yt.call(l,me)||!vr(s[me],l[me]))return!1}return!0}function Sc(s){for(;s&&s.firstChild;)s=s.firstChild;return s}function Ac(s,l){var ie=Sc(s);s=0;for(var fe;ie;){if(ie.nodeType===3){if(fe=s+ie.textContent.length,s<=l&&fe>=l)return{node:ie,offset:l-s};s=fe}e:{for(;ie;){if(ie.nextSibling){ie=ie.nextSibling;break e}ie=ie.parentNode}ie=void 0}ie=Sc(ie)}}function Oc(s,l){return s&&l?s===l?!0:s&&s.nodeType===3?!1:l&&l.nodeType===3?Oc(s,l.parentNode):"contains"in s?s.contains(l):s.compareDocumentPosition?!!(s.compareDocumentPosition(l)&16):!1:!1}function Ic(s){s=s!=null&&s.ownerDocument!=null&&s.ownerDocument.defaultView!=null?s.ownerDocument.defaultView:window;for(var l=Ni(s.document);l instanceof s.HTMLIFrameElement;){try{var ie=typeof l.contentWindow.location.href=="string"}catch{ie=!1}if(ie)s=l.contentWindow;else break;l=Ni(s.document)}return l}function ml(s){var l=s&&s.nodeName&&s.nodeName.toLowerCase();return l&&(l==="input"&&(s.type==="text"||s.type==="search"||s.type==="tel"||s.type==="url"||s.type==="password")||l==="textarea"||s.contentEditable==="true")}var Mp=Dr&&"documentMode"in document&&11>=document.documentMode,Ds=null,gl=null,wo=null,yl=!1;function Mc(s,l,ie){var fe=ie.window===ie?ie.document:ie.nodeType===9?ie:ie.ownerDocument;yl||Ds==null||Ds!==Ni(fe)||(fe=Ds,"selectionStart"in fe&&ml(fe)?fe={start:fe.selectionStart,end:fe.selectionEnd}:(fe=(fe.ownerDocument&&fe.ownerDocument.defaultView||window).getSelection(),fe={anchorNode:fe.anchorNode,anchorOffset:fe.anchorOffset,focusNode:fe.focusNode,focusOffset:fe.focusOffset}),wo&&vo(wo,fe)||(wo=fe,fe=Ya(gl,"onSelect"),0<fe.length&&(l=new Pn("onSelect","select",null,l,ie),s.push({event:l,listeners:fe}),l.target=Ds)))}function ss(s,l){var ie={};return ie[s.toLowerCase()]=l.toLowerCase(),ie["Webkit"+s]="webkit"+l,ie["Moz"+s]="moz"+l,ie}var Cs={animationend:ss("Animation","AnimationEnd"),animationiteration:ss("Animation","AnimationIteration"),animationstart:ss("Animation","AnimationStart"),transitionrun:ss("Transition","TransitionRun"),transitionstart:ss("Transition","TransitionStart"),transitioncancel:ss("Transition","TransitionCancel"),transitionend:ss("Transition","TransitionEnd")},bl={},Nc={};Dr&&(Nc=document.createElement("div").style,"AnimationEvent"in window||(delete Cs.animationend.animation,delete Cs.animationiteration.animation,delete Cs.animationstart.animation),"TransitionEvent"in window||delete Cs.transitionend.transition);function os(s){if(bl[s])return bl[s];if(!Cs[s])return s;var l=Cs[s],ie;for(ie in l)if(l.hasOwnProperty(ie)&&ie in Nc)return bl[s]=l[ie];return s}var Rc=os("animationend"),Dc=os("animationiteration"),Cc=os("animationstart"),Np=os("transitionrun"),Rp=os("transitionstart"),Dp=os("transitioncancel"),Pc=os("transitionend"),Lc=new Map,xl="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");xl.push("scrollEnd");function Vr(s,l){Lc.set(s,l),vn(l,[s])}var sa=typeof reportError=="function"?reportError:function(s){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var l=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof s=="object"&&s!==null&&typeof s.message=="string"?String(s.message):String(s),error:s});if(!window.dispatchEvent(l))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",s);return}console.error(s)},Cr=[],Ps=0,vl=0;function oa(){for(var s=Ps,l=vl=Ps=0;l<s;){var ie=Cr[l];Cr[l++]=null;var fe=Cr[l];Cr[l++]=null;var me=Cr[l];Cr[l++]=null;var ye=Cr[l];if(Cr[l++]=null,fe!==null&&me!==null){var Ie=fe.pending;Ie===null?me.next=me:(me.next=Ie.next,Ie.next=me),fe.pending=me}ye!==0&&kc(ie,me,ye)}}function aa(s,l,ie,fe){Cr[Ps++]=s,Cr[Ps++]=l,Cr[Ps++]=ie,Cr[Ps++]=fe,vl|=fe,s.lanes|=fe,s=s.alternate,s!==null&&(s.lanes|=fe)}function wl(s,l,ie,fe){return aa(s,l,ie,fe),la(s)}function as(s,l){return aa(s,null,null,l),la(s)}function kc(s,l,ie){s.lanes|=ie;var fe=s.alternate;fe!==null&&(fe.lanes|=ie);for(var me=!1,ye=s.return;ye!==null;)ye.childLanes|=ie,fe=ye.alternate,fe!==null&&(fe.childLanes|=ie),ye.tag===22&&(s=ye.stateNode,s===null||s._visibility&1||(me=!0)),s=ye,ye=ye.return;return s.tag===3?(ye=s.stateNode,me&&l!==null&&(me=31-en(ie),s=ye.hiddenUpdates,fe=s[me],fe===null?s[me]=[l]:fe.push(l),l.lane=ie|536870912),ye):null}function la(s){if(50<Go)throw Go=0,Du=null,Error(r(185));for(var l=s.return;l!==null;)s=l,l=s.return;return s.tag===3?s.stateNode:null}var Ls={};function Cp(s,l,ie,fe){this.tag=s,this.key=ie,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=l,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=fe,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function wr(s,l,ie,fe){return new Cp(s,l,ie,fe)}function Tl(s){return s=s.prototype,!(!s||!s.isReactComponent)}function ui(s,l){var ie=s.alternate;return ie===null?(ie=wr(s.tag,l,s.key,s.mode),ie.elementType=s.elementType,ie.type=s.type,ie.stateNode=s.stateNode,ie.alternate=s,s.alternate=ie):(ie.pendingProps=l,ie.type=s.type,ie.flags=0,ie.subtreeFlags=0,ie.deletions=null),ie.flags=s.flags&65011712,ie.childLanes=s.childLanes,ie.lanes=s.lanes,ie.child=s.child,ie.memoizedProps=s.memoizedProps,ie.memoizedState=s.memoizedState,ie.updateQueue=s.updateQueue,l=s.dependencies,ie.dependencies=l===null?null:{lanes:l.lanes,firstContext:l.firstContext},ie.sibling=s.sibling,ie.index=s.index,ie.ref=s.ref,ie.refCleanup=s.refCleanup,ie}function Fc(s,l){s.flags&=65011714;var ie=s.alternate;return ie===null?(s.childLanes=0,s.lanes=l,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=ie.childLanes,s.lanes=ie.lanes,s.child=ie.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=ie.memoizedProps,s.memoizedState=ie.memoizedState,s.updateQueue=ie.updateQueue,s.type=ie.type,l=ie.dependencies,s.dependencies=l===null?null:{lanes:l.lanes,firstContext:l.firstContext}),s}function ua(s,l,ie,fe,me,ye){var Ie=0;if(fe=s,typeof s=="function")Tl(s)&&(Ie=1);else if(typeof s=="string")Ie=jm(s,ie,at.current)?26:s==="html"||s==="head"||s==="body"?27:5;else e:switch(s){case Te:return s=wr(31,ie,l,me),s.elementType=Te,s.lanes=ye,s;case ue:return ls(ie.children,me,ye,l);case he:Ie=8,me|=24;break;case pe:return s=wr(12,ie,l,me|2),s.elementType=pe,s.lanes=ye,s;case we:return s=wr(13,ie,l,me),s.elementType=we,s.lanes=ye,s;case Se:return s=wr(19,ie,l,me),s.elementType=Se,s.lanes=ye,s;default:if(typeof s=="object"&&s!==null)switch(s.$$typeof){case be:Ie=10;break e;case ge:Ie=9;break e;case ve:Ie=11;break e;case Ae:Ie=14;break e;case Re:Ie=16,fe=null;break e}Ie=29,ie=Error(r(130,s===null?"null":typeof s,"")),fe=null}return l=wr(Ie,ie,l,me),l.elementType=s,l.type=fe,l.lanes=ye,l}function ls(s,l,ie,fe){return s=wr(7,s,fe,l),s.lanes=ie,s}function El(s,l,ie){return s=wr(6,s,null,l),s.lanes=ie,s}function Bc(s){var l=wr(18,null,null,0);return l.stateNode=s,l}function Sl(s,l,ie){return l=wr(4,s.children!==null?s.children:[],s.key,l),l.lanes=ie,l.stateNode={containerInfo:s.containerInfo,pendingChildren:null,implementation:s.implementation},l}var jc=new WeakMap;function Pr(s,l){if(typeof s=="object"&&s!==null){var ie=jc.get(s);return ie!==void 0?ie:(l={value:s,source:l,stack:nr(l)},jc.set(s,l),l)}return{value:s,source:l,stack:nr(l)}}var ks=[],Fs=0,ca=null,To=0,Lr=[],kr=0,Ci=null,Wr=1,Xr="";function ci(s,l){ks[Fs++]=To,ks[Fs++]=ca,ca=s,To=l}function $c(s,l,ie){Lr[kr++]=Wr,Lr[kr++]=Xr,Lr[kr++]=Ci,Ci=s;var fe=Wr;s=Xr;var me=32-en(fe)-1;fe&=~(1<<me),ie+=1;var ye=32-en(l)+me;if(30<ye){var Ie=me-me%5;ye=(fe&(1<<Ie)-1).toString(32),fe>>=Ie,me-=Ie,Wr=1<<32-en(l)+me|ie<<me|fe,Xr=ye+s}else Wr=1<<ye|ie<<me|fe,Xr=s}function Al(s){s.return!==null&&(ci(s,1),$c(s,1,0))}function Ol(s){for(;s===ca;)ca=ks[--Fs],ks[Fs]=null,To=ks[--Fs],ks[Fs]=null;for(;s===Ci;)Ci=Lr[--kr],Lr[kr]=null,Xr=Lr[--kr],Lr[kr]=null,Wr=Lr[--kr],Lr[kr]=null}function Uc(s,l){Lr[kr++]=Wr,Lr[kr++]=Xr,Lr[kr++]=Ci,Wr=l.id,Xr=l.overflow,Ci=s}var ir=null,Fn=null,bn=!1,Pi=null,Fr=!1,Il=Error(r(519));function Li(s){var l=Error(r(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Eo(Pr(l,s)),Il}function zc(s){var l=s.stateNode,ie=s.type,fe=s.memoizedProps;switch(l[$n]=s,l[Be]=fe,ie){case"dialog":mn("cancel",l),mn("close",l);break;case"iframe":case"object":case"embed":mn("load",l);break;case"video":case"audio":for(ie=0;ie<qo.length;ie++)mn(qo[ie],l);break;case"source":mn("error",l);break;case"img":case"image":case"link":mn("error",l),mn("load",l);break;case"details":mn("toggle",l);break;case"input":mn("invalid",l),co(l,fe.value,fe.defaultValue,fe.checked,fe.defaultChecked,fe.type,fe.name,!0);break;case"select":mn("invalid",l);break;case"textarea":mn("invalid",l),Ss(l,fe.value,fe.defaultValue,fe.children)}ie=fe.children,typeof ie!="string"&&typeof ie!="number"&&typeof ie!="bigint"||l.textContent===""+ie||fe.suppressHydrationWarning===!0||ch(l.textContent,ie)?(fe.popover!=null&&(mn("beforetoggle",l),mn("toggle",l)),fe.onScroll!=null&&mn("scroll",l),fe.onScrollEnd!=null&&mn("scrollend",l),fe.onClick!=null&&(l.onclick=Rr),l=!0):l=!1,l||Li(s,!0)}function Vc(s){for(ir=s.return;ir;)switch(ir.tag){case 5:case 31:case 13:Fr=!1;return;case 27:case 3:Fr=!0;return;default:ir=ir.return}}function Bs(s){if(s!==ir)return!1;if(!bn)return Vc(s),bn=!0,!1;var l=s.tag,ie;if((ie=l!==3&&l!==27)&&((ie=l===5)&&(ie=s.type,ie=!(ie!=="form"&&ie!=="button")||Yu(s.type,s.memoizedProps)),ie=!ie),ie&&Fn&&Li(s),Vc(s),l===13){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(r(317));Fn=xh(s)}else if(l===31){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(r(317));Fn=xh(s)}else l===27?(l=Fn,Xi(s.type)?(s=Zu,Zu=null,Fn=s):Fn=l):Fn=ir?jr(s.stateNode.nextSibling):null;return!0}function us(){Fn=ir=null,bn=!1}function Ml(){var s=Pi;return s!==null&&(br===null?br=s:br.push.apply(br,s),Pi=null),s}function Eo(s){Pi===null?Pi=[s]:Pi.push(s)}var Nl=Pe(null),cs=null,di=null;function ki(s,l,ie){Je(Nl,l._currentValue),l._currentValue=ie}function fi(s){s._currentValue=Nl.current,et(Nl)}function Rl(s,l,ie){for(;s!==null;){var fe=s.alternate;if((s.childLanes&l)!==l?(s.childLanes|=l,fe!==null&&(fe.childLanes|=l)):fe!==null&&(fe.childLanes&l)!==l&&(fe.childLanes|=l),s===ie)break;s=s.return}}function Dl(s,l,ie,fe){var me=s.child;for(me!==null&&(me.return=s);me!==null;){var ye=me.dependencies;if(ye!==null){var Ie=me.child;ye=ye.firstContext;e:for(;ye!==null;){var Fe=ye;ye=me;for(var Qe=0;Qe<l.length;Qe++)if(Fe.context===l[Qe]){ye.lanes|=ie,Fe=ye.alternate,Fe!==null&&(Fe.lanes|=ie),Rl(ye.return,ie,s),fe||(Ie=null);break e}ye=Fe.next}}else if(me.tag===18){if(Ie=me.return,Ie===null)throw Error(r(341));Ie.lanes|=ie,ye=Ie.alternate,ye!==null&&(ye.lanes|=ie),Rl(Ie,ie,s),Ie=null}else Ie=me.child;if(Ie!==null)Ie.return=me;else for(Ie=me;Ie!==null;){if(Ie===s){Ie=null;break}if(me=Ie.sibling,me!==null){me.return=Ie.return,Ie=me;break}Ie=Ie.return}me=Ie}}function js(s,l,ie,fe){s=null;for(var me=l,ye=!1;me!==null;){if(!ye){if((me.flags&524288)!==0)ye=!0;else if((me.flags&262144)!==0)break}if(me.tag===10){var Ie=me.alternate;if(Ie===null)throw Error(r(387));if(Ie=Ie.memoizedProps,Ie!==null){var Fe=me.type;vr(me.pendingProps.value,Ie.value)||(s!==null?s.push(Fe):s=[Fe])}}else if(me===vt.current){if(Ie=me.alternate,Ie===null)throw Error(r(387));Ie.memoizedState.memoizedState!==me.memoizedState.memoizedState&&(s!==null?s.push(Qo):s=[Qo])}me=me.return}s!==null&&Dl(l,s,ie,fe),l.flags|=262144}function da(s){for(s=s.firstContext;s!==null;){if(!vr(s.context._currentValue,s.memoizedValue))return!0;s=s.next}return!1}function ds(s){cs=s,di=null,s=s.dependencies,s!==null&&(s.firstContext=null)}function sr(s){return Gc(cs,s)}function fa(s,l){return cs===null&&ds(s),Gc(s,l)}function Gc(s,l){var ie=l._currentValue;if(l={context:l,memoizedValue:ie,next:null},di===null){if(s===null)throw Error(r(308));di=l,s.dependencies={lanes:0,firstContext:l},s.flags|=524288}else di=di.next=l;return ie}var Pp=typeof AbortController<"u"?AbortController:function(){var s=[],l=this.signal={aborted:!1,addEventListener:function(ie,fe){s.push(fe)}};this.abort=function(){l.aborted=!0,s.forEach(function(ie){return ie()})}},Lp=n.unstable_scheduleCallback,kp=n.unstable_NormalPriority,Wn={$$typeof:be,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Cl(){return{controller:new Pp,data:new Map,refCount:0}}function So(s){s.refCount--,s.refCount===0&&Lp(kp,function(){s.controller.abort()})}var Ao=null,Pl=0,$s=0,Us=null;function Fp(s,l){if(Ao===null){var ie=Ao=[];Pl=0,$s=Bu(),Us={status:"pending",value:void 0,then:function(fe){ie.push(fe)}}}return Pl++,l.then(Hc,Hc),l}function Hc(){if(--Pl===0&&Ao!==null){Us!==null&&(Us.status="fulfilled");var s=Ao;Ao=null,$s=0,Us=null;for(var l=0;l<s.length;l++)(0,s[l])()}}function Bp(s,l){var ie=[],fe={status:"pending",value:null,reason:null,then:function(me){ie.push(me)}};return s.then(function(){fe.status="fulfilled",fe.value=l;for(var me=0;me<ie.length;me++)(0,ie[me])(l)},function(me){for(fe.status="rejected",fe.reason=me,me=0;me<ie.length;me++)(0,ie[me])(void 0)}),fe}var qc=Me.S;Me.S=function(s,l){Pf=wn(),typeof l=="object"&&l!==null&&typeof l.then=="function"&&Fp(s,l),qc!==null&&qc(s,l)};var fs=Pe(null);function Ll(){var s=fs.current;return s!==null?s:Ln.pooledCache}function ha(s,l){l===null?Je(fs,fs.current):Je(fs,l.pool)}function Yc(){var s=Ll();return s===null?null:{parent:Wn._currentValue,pool:s}}var zs=Error(r(460)),kl=Error(r(474)),pa=Error(r(542)),ma={then:function(){}};function Wc(s){return s=s.status,s==="fulfilled"||s==="rejected"}function Xc(s,l,ie){switch(ie=s[ie],ie===void 0?s.push(l):ie!==l&&(l.then(Rr,Rr),l=ie),l.status){case"fulfilled":return l.value;case"rejected":throw s=l.reason,Qc(s),s;default:if(typeof l.status=="string")l.then(Rr,Rr);else{if(s=Ln,s!==null&&100<s.shellSuspendCounter)throw Error(r(482));s=l,s.status="pending",s.then(function(fe){if(l.status==="pending"){var me=l;me.status="fulfilled",me.value=fe}},function(fe){if(l.status==="pending"){var me=l;me.status="rejected",me.reason=fe}})}switch(l.status){case"fulfilled":return l.value;case"rejected":throw s=l.reason,Qc(s),s}throw ps=l,zs}}function hs(s){try{var l=s._init;return l(s._payload)}catch(ie){throw ie!==null&&typeof ie=="object"&&typeof ie.then=="function"?(ps=ie,zs):ie}}var ps=null;function Kc(){if(ps===null)throw Error(r(459));var s=ps;return ps=null,s}function Qc(s){if(s===zs||s===pa)throw Error(r(483))}var Vs=null,Oo=0;function ga(s){var l=Oo;return Oo+=1,Vs===null&&(Vs=[]),Xc(Vs,s,l)}function Io(s,l){l=l.props.ref,s.ref=l!==void 0?l:null}function ya(s,l){throw l.$$typeof===i?Error(r(525)):(s=Object.prototype.toString.call(l),Error(r(31,s==="[object Object]"?"object with keys {"+Object.keys(l).join(", ")+"}":s)))}function Zc(s){function l(ot,nt){if(s){var dt=ot.deletions;dt===null?(ot.deletions=[nt],ot.flags|=16):dt.push(nt)}}function ie(ot,nt){if(!s)return null;for(;nt!==null;)l(ot,nt),nt=nt.sibling;return null}function fe(ot){for(var nt=new Map;ot!==null;)ot.key!==null?nt.set(ot.key,ot):nt.set(ot.index,ot),ot=ot.sibling;return nt}function me(ot,nt){return ot=ui(ot,nt),ot.index=0,ot.sibling=null,ot}function ye(ot,nt,dt){return ot.index=dt,s?(dt=ot.alternate,dt!==null?(dt=dt.index,dt<nt?(ot.flags|=67108866,nt):dt):(ot.flags|=67108866,nt)):(ot.flags|=1048576,nt)}function Ie(ot){return s&&ot.alternate===null&&(ot.flags|=67108866),ot}function Fe(ot,nt,dt,At){return nt===null||nt.tag!==6?(nt=El(dt,ot.mode,At),nt.return=ot,nt):(nt=me(nt,dt),nt.return=ot,nt)}function Qe(ot,nt,dt,At){var Vt=dt.type;return Vt===ue?St(ot,nt,dt.props.children,At,dt.key):nt!==null&&(nt.elementType===Vt||typeof Vt=="object"&&Vt!==null&&Vt.$$typeof===Re&&hs(Vt)===nt.type)?(nt=me(nt,dt.props),Io(nt,dt),nt.return=ot,nt):(nt=ua(dt.type,dt.key,dt.props,null,ot.mode,At),Io(nt,dt),nt.return=ot,nt)}function ft(ot,nt,dt,At){return nt===null||nt.tag!==4||nt.stateNode.containerInfo!==dt.containerInfo||nt.stateNode.implementation!==dt.implementation?(nt=Sl(dt,ot.mode,At),nt.return=ot,nt):(nt=me(nt,dt.children||[]),nt.return=ot,nt)}function St(ot,nt,dt,At,Vt){return nt===null||nt.tag!==7?(nt=ls(dt,ot.mode,At,Vt),nt.return=ot,nt):(nt=me(nt,dt),nt.return=ot,nt)}function Ot(ot,nt,dt){if(typeof nt=="string"&&nt!==""||typeof nt=="number"||typeof nt=="bigint")return nt=El(""+nt,ot.mode,dt),nt.return=ot,nt;if(typeof nt=="object"&&nt!==null){switch(nt.$$typeof){case w:return dt=ua(nt.type,nt.key,nt.props,null,ot.mode,dt),Io(dt,nt),dt.return=ot,dt;case ae:return nt=Sl(nt,ot.mode,dt),nt.return=ot,nt;case Re:return nt=hs(nt),Ot(ot,nt,dt)}if(Xe(nt)||$e(nt))return nt=ls(nt,ot.mode,dt,null),nt.return=ot,nt;if(typeof nt.then=="function")return Ot(ot,ga(nt),dt);if(nt.$$typeof===be)return Ot(ot,fa(ot,nt),dt);ya(ot,nt)}return null}function ht(ot,nt,dt,At){var Vt=nt!==null?nt.key:null;if(typeof dt=="string"&&dt!==""||typeof dt=="number"||typeof dt=="bigint")return Vt!==null?null:Fe(ot,nt,""+dt,At);if(typeof dt=="object"&&dt!==null){switch(dt.$$typeof){case w:return dt.key===Vt?Qe(ot,nt,dt,At):null;case ae:return dt.key===Vt?ft(ot,nt,dt,At):null;case Re:return dt=hs(dt),ht(ot,nt,dt,At)}if(Xe(dt)||$e(dt))return Vt!==null?null:St(ot,nt,dt,At,null);if(typeof dt.then=="function")return ht(ot,nt,ga(dt),At);if(dt.$$typeof===be)return ht(ot,nt,fa(ot,dt),At);ya(ot,dt)}return null}function gt(ot,nt,dt,At,Vt){if(typeof At=="string"&&At!==""||typeof At=="number"||typeof At=="bigint")return ot=ot.get(dt)||null,Fe(nt,ot,""+At,Vt);if(typeof At=="object"&&At!==null){switch(At.$$typeof){case w:return ot=ot.get(At.key===null?dt:At.key)||null,Qe(nt,ot,At,Vt);case ae:return ot=ot.get(At.key===null?dt:At.key)||null,ft(nt,ot,At,Vt);case Re:return At=hs(At),gt(ot,nt,dt,At,Vt)}if(Xe(At)||$e(At))return ot=ot.get(dt)||null,St(nt,ot,At,Vt,null);if(typeof At.then=="function")return gt(ot,nt,dt,ga(At),Vt);if(At.$$typeof===be)return gt(ot,nt,dt,fa(nt,At),Vt);ya(nt,At)}return null}function Lt(ot,nt,dt,At){for(var Vt=null,Tn=null,Ft=nt,on=nt=0,yn=null;Ft!==null&&on<dt.length;on++){Ft.index>on?(yn=Ft,Ft=null):yn=Ft.sibling;var En=ht(ot,Ft,dt[on],At);if(En===null){Ft===null&&(Ft=yn);break}s&&Ft&&En.alternate===null&&l(ot,Ft),nt=ye(En,nt,on),Tn===null?Vt=En:Tn.sibling=En,Tn=En,Ft=yn}if(on===dt.length)return ie(ot,Ft),bn&&ci(ot,on),Vt;if(Ft===null){for(;on<dt.length;on++)Ft=Ot(ot,dt[on],At),Ft!==null&&(nt=ye(Ft,nt,on),Tn===null?Vt=Ft:Tn.sibling=Ft,Tn=Ft);return bn&&ci(ot,on),Vt}for(Ft=fe(Ft);on<dt.length;on++)yn=gt(Ft,ot,on,dt[on],At),yn!==null&&(s&&yn.alternate!==null&&Ft.delete(yn.key===null?on:yn.key),nt=ye(yn,nt,on),Tn===null?Vt=yn:Tn.sibling=yn,Tn=yn);return s&&Ft.forEach(function(es){return l(ot,es)}),bn&&ci(ot,on),Vt}function Wt(ot,nt,dt,At){if(dt==null)throw Error(r(151));for(var Vt=null,Tn=null,Ft=nt,on=nt=0,yn=null,En=dt.next();Ft!==null&&!En.done;on++,En=dt.next()){Ft.index>on?(yn=Ft,Ft=null):yn=Ft.sibling;var es=ht(ot,Ft,En.value,At);if(es===null){Ft===null&&(Ft=yn);break}s&&Ft&&es.alternate===null&&l(ot,Ft),nt=ye(es,nt,on),Tn===null?Vt=es:Tn.sibling=es,Tn=es,Ft=yn}if(En.done)return ie(ot,Ft),bn&&ci(ot,on),Vt;if(Ft===null){for(;!En.done;on++,En=dt.next())En=Ot(ot,En.value,At),En!==null&&(nt=ye(En,nt,on),Tn===null?Vt=En:Tn.sibling=En,Tn=En);return bn&&ci(ot,on),Vt}for(Ft=fe(Ft);!En.done;on++,En=dt.next())En=gt(Ft,ot,on,En.value,At),En!==null&&(s&&En.alternate!==null&&Ft.delete(En.key===null?on:En.key),nt=ye(En,nt,on),Tn===null?Vt=En:Tn.sibling=En,Tn=En);return s&&Ft.forEach(function(Km){return l(ot,Km)}),bn&&ci(ot,on),Vt}function Cn(ot,nt,dt,At){if(typeof dt=="object"&&dt!==null&&dt.type===ue&&dt.key===null&&(dt=dt.props.children),typeof dt=="object"&&dt!==null){switch(dt.$$typeof){case w:e:{for(var Vt=dt.key;nt!==null;){if(nt.key===Vt){if(Vt=dt.type,Vt===ue){if(nt.tag===7){ie(ot,nt.sibling),At=me(nt,dt.props.children),At.return=ot,ot=At;break e}}else if(nt.elementType===Vt||typeof Vt=="object"&&Vt!==null&&Vt.$$typeof===Re&&hs(Vt)===nt.type){ie(ot,nt.sibling),At=me(nt,dt.props),Io(At,dt),At.return=ot,ot=At;break e}ie(ot,nt);break}else l(ot,nt);nt=nt.sibling}dt.type===ue?(At=ls(dt.props.children,ot.mode,At,dt.key),At.return=ot,ot=At):(At=ua(dt.type,dt.key,dt.props,null,ot.mode,At),Io(At,dt),At.return=ot,ot=At)}return Ie(ot);case ae:e:{for(Vt=dt.key;nt!==null;){if(nt.key===Vt)if(nt.tag===4&&nt.stateNode.containerInfo===dt.containerInfo&&nt.stateNode.implementation===dt.implementation){ie(ot,nt.sibling),At=me(nt,dt.children||[]),At.return=ot,ot=At;break e}else{ie(ot,nt);break}else l(ot,nt);nt=nt.sibling}At=Sl(dt,ot.mode,At),At.return=ot,ot=At}return Ie(ot);case Re:return dt=hs(dt),Cn(ot,nt,dt,At)}if(Xe(dt))return Lt(ot,nt,dt,At);if($e(dt)){if(Vt=$e(dt),typeof Vt!="function")throw Error(r(150));return dt=Vt.call(dt),Wt(ot,nt,dt,At)}if(typeof dt.then=="function")return Cn(ot,nt,ga(dt),At);if(dt.$$typeof===be)return Cn(ot,nt,fa(ot,dt),At);ya(ot,dt)}return typeof dt=="string"&&dt!==""||typeof dt=="number"||typeof dt=="bigint"?(dt=""+dt,nt!==null&&nt.tag===6?(ie(ot,nt.sibling),At=me(nt,dt),At.return=ot,ot=At):(ie(ot,nt),At=El(dt,ot.mode,At),At.return=ot,ot=At),Ie(ot)):ie(ot,nt)}return function(ot,nt,dt,At){try{Oo=0;var Vt=Cn(ot,nt,dt,At);return Vs=null,Vt}catch(Ft){if(Ft===zs||Ft===pa)throw Ft;var Tn=wr(29,Ft,null,ot.mode);return Tn.lanes=At,Tn.return=ot,Tn}finally{}}}var ms=Zc(!0),Jc=Zc(!1),Fi=!1;function Fl(s){s.updateQueue={baseState:s.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Bl(s,l){s=s.updateQueue,l.updateQueue===s&&(l.updateQueue={baseState:s.baseState,firstBaseUpdate:s.firstBaseUpdate,lastBaseUpdate:s.lastBaseUpdate,shared:s.shared,callbacks:null})}function Bi(s){return{lane:s,tag:0,payload:null,callback:null,next:null}}function ji(s,l,ie){var fe=s.updateQueue;if(fe===null)return null;if(fe=fe.shared,(An&2)!==0){var me=fe.pending;return me===null?l.next=l:(l.next=me.next,me.next=l),fe.pending=l,l=la(s),kc(s,null,ie),l}return aa(s,fe,l,ie),la(s)}function Mo(s,l,ie){if(l=l.updateQueue,l!==null&&(l=l.shared,(ie&4194048)!==0)){var fe=l.lanes;fe&=s.pendingLanes,ie|=fe,l.lanes=ie,Ai(s,ie)}}function jl(s,l){var ie=s.updateQueue,fe=s.alternate;if(fe!==null&&(fe=fe.updateQueue,ie===fe)){var me=null,ye=null;if(ie=ie.firstBaseUpdate,ie!==null){do{var Ie={lane:ie.lane,tag:ie.tag,payload:ie.payload,callback:null,next:null};ye===null?me=ye=Ie:ye=ye.next=Ie,ie=ie.next}while(ie!==null);ye===null?me=ye=l:ye=ye.next=l}else me=ye=l;ie={baseState:fe.baseState,firstBaseUpdate:me,lastBaseUpdate:ye,shared:fe.shared,callbacks:fe.callbacks},s.updateQueue=ie;return}s=ie.lastBaseUpdate,s===null?ie.firstBaseUpdate=l:s.next=l,ie.lastBaseUpdate=l}var $l=!1;function No(){if($l){var s=Us;if(s!==null)throw s}}function Ro(s,l,ie,fe){$l=!1;var me=s.updateQueue;Fi=!1;var ye=me.firstBaseUpdate,Ie=me.lastBaseUpdate,Fe=me.shared.pending;if(Fe!==null){me.shared.pending=null;var Qe=Fe,ft=Qe.next;Qe.next=null,Ie===null?ye=ft:Ie.next=ft,Ie=Qe;var St=s.alternate;St!==null&&(St=St.updateQueue,Fe=St.lastBaseUpdate,Fe!==Ie&&(Fe===null?St.firstBaseUpdate=ft:Fe.next=ft,St.lastBaseUpdate=Qe))}if(ye!==null){var Ot=me.baseState;Ie=0,St=ft=Qe=null,Fe=ye;do{var ht=Fe.lane&-536870913,gt=ht!==Fe.lane;if(gt?(gn&ht)===ht:(fe&ht)===ht){ht!==0&&ht===$s&&($l=!0),St!==null&&(St=St.next={lane:0,tag:Fe.tag,payload:Fe.payload,callback:null,next:null});e:{var Lt=s,Wt=Fe;ht=l;var Cn=ie;switch(Wt.tag){case 1:if(Lt=Wt.payload,typeof Lt=="function"){Ot=Lt.call(Cn,Ot,ht);break e}Ot=Lt;break e;case 3:Lt.flags=Lt.flags&-65537|128;case 0:if(Lt=Wt.payload,ht=typeof Lt=="function"?Lt.call(Cn,Ot,ht):Lt,ht==null)break e;Ot=o({},Ot,ht);break e;case 2:Fi=!0}}ht=Fe.callback,ht!==null&&(s.flags|=64,gt&&(s.flags|=8192),gt=me.callbacks,gt===null?me.callbacks=[ht]:gt.push(ht))}else gt={lane:ht,tag:Fe.tag,payload:Fe.payload,callback:Fe.callback,next:null},St===null?(ft=St=gt,Qe=Ot):St=St.next=gt,Ie|=ht;if(Fe=Fe.next,Fe===null){if(Fe=me.shared.pending,Fe===null)break;gt=Fe,Fe=gt.next,gt.next=null,me.lastBaseUpdate=gt,me.shared.pending=null}}while(!0);St===null&&(Qe=Ot),me.baseState=Qe,me.firstBaseUpdate=ft,me.lastBaseUpdate=St,ye===null&&(me.shared.lanes=0),Gi|=Ie,s.lanes=Ie,s.memoizedState=Ot}}function ed(s,l){if(typeof s!="function")throw Error(r(191,s));s.call(l)}function td(s,l){var ie=s.callbacks;if(ie!==null)for(s.callbacks=null,s=0;s<ie.length;s++)ed(ie[s],l)}var Gs=Pe(null),ba=Pe(0);function nd(s,l){s=vi,Je(ba,s),Je(Gs,l),vi=s|l.baseLanes}function Ul(){Je(ba,vi),Je(Gs,Gs.current)}function zl(){vi=ba.current,et(Gs),et(ba)}var Tr=Pe(null),Br=null;function $i(s){var l=s.alternate;Je(Gn,Gn.current&1),Je(Tr,s),Br===null&&(l===null||Gs.current!==null||l.memoizedState!==null)&&(Br=s)}function Vl(s){Je(Gn,Gn.current),Je(Tr,s),Br===null&&(Br=s)}function rd(s){s.tag===22?(Je(Gn,Gn.current),Je(Tr,s),Br===null&&(Br=s)):Ui()}function Ui(){Je(Gn,Gn.current),Je(Tr,Tr.current)}function Er(s){et(Tr),Br===s&&(Br=null),et(Gn)}var Gn=Pe(0);function xa(s){for(var l=s;l!==null;){if(l.tag===13){var ie=l.memoizedState;if(ie!==null&&(ie=ie.dehydrated,ie===null||Ku(ie)||Qu(ie)))return l}else if(l.tag===19&&(l.memoizedProps.revealOrder==="forwards"||l.memoizedProps.revealOrder==="backwards"||l.memoizedProps.revealOrder==="unstable_legacy-backwards"||l.memoizedProps.revealOrder==="together")){if((l.flags&128)!==0)return l}else if(l.child!==null){l.child.return=l,l=l.child;continue}if(l===s)break;for(;l.sibling===null;){if(l.return===null||l.return===s)return null;l=l.return}l.sibling.return=l.return,l=l.sibling}return null}var hi=0,rn=null,Rn=null,Xn=null,va=!1,Hs=!1,gs=!1,wa=0,Do=0,qs=null,jp=0;function Un(){throw Error(r(321))}function Gl(s,l){if(l===null)return!1;for(var ie=0;ie<l.length&&ie<s.length;ie++)if(!vr(s[ie],l[ie]))return!1;return!0}function Hl(s,l,ie,fe,me,ye){return hi=ye,rn=l,l.memoizedState=null,l.updateQueue=null,l.lanes=0,Me.H=s===null||s.memoizedState===null?zd:ou,gs=!1,ye=ie(fe,me),gs=!1,Hs&&(ye=od(l,ie,fe,me)),sd(s),ye}function sd(s){Me.H=Lo;var l=Rn!==null&&Rn.next!==null;if(hi=0,Xn=Rn=rn=null,va=!1,Do=0,qs=null,l)throw Error(r(300));s===null||Kn||(s=s.dependencies,s!==null&&da(s)&&(Kn=!0))}function od(s,l,ie,fe){rn=s;var me=0;do{if(Hs&&(qs=null),Do=0,Hs=!1,25<=me)throw Error(r(301));if(me+=1,Xn=Rn=null,s.updateQueue!=null){var ye=s.updateQueue;ye.lastEffect=null,ye.events=null,ye.stores=null,ye.memoCache!=null&&(ye.memoCache.index=0)}Me.H=Vd,ye=l(ie,fe)}while(Hs);return ye}function $p(){var s=Me.H,l=s.useState()[0];return l=typeof l.then=="function"?Co(l):l,s=s.useState()[0],(Rn!==null?Rn.memoizedState:null)!==s&&(rn.flags|=1024),l}function ql(){var s=wa!==0;return wa=0,s}function Yl(s,l,ie){l.updateQueue=s.updateQueue,l.flags&=-2053,s.lanes&=~ie}function Wl(s){if(va){for(s=s.memoizedState;s!==null;){var l=s.queue;l!==null&&(l.pending=null),s=s.next}va=!1}hi=0,Xn=Rn=rn=null,Hs=!1,Do=wa=0,qs=null}function dr(){var s={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Xn===null?rn.memoizedState=Xn=s:Xn=Xn.next=s,Xn}function Hn(){if(Rn===null){var s=rn.alternate;s=s!==null?s.memoizedState:null}else s=Rn.next;var l=Xn===null?rn.memoizedState:Xn.next;if(l!==null)Xn=l,Rn=s;else{if(s===null)throw rn.alternate===null?Error(r(467)):Error(r(310));Rn=s,s={memoizedState:Rn.memoizedState,baseState:Rn.baseState,baseQueue:Rn.baseQueue,queue:Rn.queue,next:null},Xn===null?rn.memoizedState=Xn=s:Xn=Xn.next=s}return Xn}function Ta(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Co(s){var l=Do;return Do+=1,qs===null&&(qs=[]),s=Xc(qs,s,l),l=rn,(Xn===null?l.memoizedState:Xn.next)===null&&(l=l.alternate,Me.H=l===null||l.memoizedState===null?zd:ou),s}function Ea(s){if(s!==null&&typeof s=="object"){if(typeof s.then=="function")return Co(s);if(s.$$typeof===be)return sr(s)}throw Error(r(438,String(s)))}function Xl(s){var l=null,ie=rn.updateQueue;if(ie!==null&&(l=ie.memoCache),l==null){var fe=rn.alternate;fe!==null&&(fe=fe.updateQueue,fe!==null&&(fe=fe.memoCache,fe!=null&&(l={data:fe.data.map(function(me){return me.slice()}),index:0})))}if(l==null&&(l={data:[],index:0}),ie===null&&(ie=Ta(),rn.updateQueue=ie),ie.memoCache=l,ie=l.data[l.index],ie===void 0)for(ie=l.data[l.index]=Array(s),fe=0;fe<s;fe++)ie[fe]=Ce;return l.index++,ie}function pi(s,l){return typeof l=="function"?l(s):l}function Sa(s){var l=Hn();return Kl(l,Rn,s)}function Kl(s,l,ie){var fe=s.queue;if(fe===null)throw Error(r(311));fe.lastRenderedReducer=ie;var me=s.baseQueue,ye=fe.pending;if(ye!==null){if(me!==null){var Ie=me.next;me.next=ye.next,ye.next=Ie}l.baseQueue=me=ye,fe.pending=null}if(ye=s.baseState,me===null)s.memoizedState=ye;else{l=me.next;var Fe=Ie=null,Qe=null,ft=l,St=!1;do{var Ot=ft.lane&-536870913;if(Ot!==ft.lane?(gn&Ot)===Ot:(hi&Ot)===Ot){var ht=ft.revertLane;if(ht===0)Qe!==null&&(Qe=Qe.next={lane:0,revertLane:0,gesture:null,action:ft.action,hasEagerState:ft.hasEagerState,eagerState:ft.eagerState,next:null}),Ot===$s&&(St=!0);else if((hi&ht)===ht){ft=ft.next,ht===$s&&(St=!0);continue}else Ot={lane:0,revertLane:ft.revertLane,gesture:null,action:ft.action,hasEagerState:ft.hasEagerState,eagerState:ft.eagerState,next:null},Qe===null?(Fe=Qe=Ot,Ie=ye):Qe=Qe.next=Ot,rn.lanes|=ht,Gi|=ht;Ot=ft.action,gs&&ie(ye,Ot),ye=ft.hasEagerState?ft.eagerState:ie(ye,Ot)}else ht={lane:Ot,revertLane:ft.revertLane,gesture:ft.gesture,action:ft.action,hasEagerState:ft.hasEagerState,eagerState:ft.eagerState,next:null},Qe===null?(Fe=Qe=ht,Ie=ye):Qe=Qe.next=ht,rn.lanes|=Ot,Gi|=Ot;ft=ft.next}while(ft!==null&&ft!==l);if(Qe===null?Ie=ye:Qe.next=Fe,!vr(ye,s.memoizedState)&&(Kn=!0,St&&(ie=Us,ie!==null)))throw ie;s.memoizedState=ye,s.baseState=Ie,s.baseQueue=Qe,fe.lastRenderedState=ye}return me===null&&(fe.lanes=0),[s.memoizedState,fe.dispatch]}function Ql(s){var l=Hn(),ie=l.queue;if(ie===null)throw Error(r(311));ie.lastRenderedReducer=s;var fe=ie.dispatch,me=ie.pending,ye=l.memoizedState;if(me!==null){ie.pending=null;var Ie=me=me.next;do ye=s(ye,Ie.action),Ie=Ie.next;while(Ie!==me);vr(ye,l.memoizedState)||(Kn=!0),l.memoizedState=ye,l.baseQueue===null&&(l.baseState=ye),ie.lastRenderedState=ye}return[ye,fe]}function ad(s,l,ie){var fe=rn,me=Hn(),ye=bn;if(ye){if(ie===void 0)throw Error(r(407));ie=ie()}else ie=l();var Ie=!vr((Rn||me).memoizedState,ie);if(Ie&&(me.memoizedState=ie,Kn=!0),me=me.queue,eu(cd.bind(null,fe,me,s),[s]),me.getSnapshot!==l||Ie||Xn!==null&&Xn.memoizedState.tag&1){if(fe.flags|=2048,Ys(9,{destroy:void 0},ud.bind(null,fe,me,ie,l),null),Ln===null)throw Error(r(349));ye||(hi&127)!==0||ld(fe,l,ie)}return ie}function ld(s,l,ie){s.flags|=16384,s={getSnapshot:l,value:ie},l=rn.updateQueue,l===null?(l=Ta(),rn.updateQueue=l,l.stores=[s]):(ie=l.stores,ie===null?l.stores=[s]:ie.push(s))}function ud(s,l,ie,fe){l.value=ie,l.getSnapshot=fe,dd(l)&&fd(s)}function cd(s,l,ie){return ie(function(){dd(l)&&fd(s)})}function dd(s){var l=s.getSnapshot;s=s.value;try{var ie=l();return!vr(s,ie)}catch{return!0}}function fd(s){var l=as(s,2);l!==null&&xr(l,s,2)}function Zl(s){var l=dr();if(typeof s=="function"){var ie=s;if(s=ie(),gs){an(!0);try{ie()}finally{an(!1)}}}return l.memoizedState=l.baseState=s,l.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:pi,lastRenderedState:s},l}function hd(s,l,ie,fe){return s.baseState=ie,Kl(s,Rn,typeof fe=="function"?fe:pi)}function Up(s,l,ie,fe,me){if(Ia(s))throw Error(r(485));if(s=l.action,s!==null){var ye={payload:me,action:s,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(Ie){ye.listeners.push(Ie)}};Me.T!==null?ie(!0):ye.isTransition=!1,fe(ye),ie=l.pending,ie===null?(ye.next=l.pending=ye,pd(l,ye)):(ye.next=ie.next,l.pending=ie.next=ye)}}function pd(s,l){var ie=l.action,fe=l.payload,me=s.state;if(l.isTransition){var ye=Me.T,Ie={};Me.T=Ie;try{var Fe=ie(me,fe),Qe=Me.S;Qe!==null&&Qe(Ie,Fe),md(s,l,Fe)}catch(ft){Jl(s,l,ft)}finally{ye!==null&&Ie.types!==null&&(ye.types=Ie.types),Me.T=ye}}else try{ye=ie(me,fe),md(s,l,ye)}catch(ft){Jl(s,l,ft)}}function md(s,l,ie){ie!==null&&typeof ie=="object"&&typeof ie.then=="function"?ie.then(function(fe){gd(s,l,fe)},function(fe){return Jl(s,l,fe)}):gd(s,l,ie)}function gd(s,l,ie){l.status="fulfilled",l.value=ie,yd(l),s.state=ie,l=s.pending,l!==null&&(ie=l.next,ie===l?s.pending=null:(ie=ie.next,l.next=ie,pd(s,ie)))}function Jl(s,l,ie){var fe=s.pending;if(s.pending=null,fe!==null){fe=fe.next;do l.status="rejected",l.reason=ie,yd(l),l=l.next;while(l!==fe)}s.action=null}function yd(s){s=s.listeners;for(var l=0;l<s.length;l++)(0,s[l])()}function bd(s,l){return l}function xd(s,l){if(bn){var ie=Ln.formState;if(ie!==null){e:{var fe=rn;if(bn){if(Fn){t:{for(var me=Fn,ye=Fr;me.nodeType!==8;){if(!ye){me=null;break t}if(me=jr(me.nextSibling),me===null){me=null;break t}}ye=me.data,me=ye==="F!"||ye==="F"?me:null}if(me){Fn=jr(me.nextSibling),fe=me.data==="F!";break e}}Li(fe)}fe=!1}fe&&(l=ie[0])}}return ie=dr(),ie.memoizedState=ie.baseState=l,fe={pending:null,lanes:0,dispatch:null,lastRenderedReducer:bd,lastRenderedState:l},ie.queue=fe,ie=jd.bind(null,rn,fe),fe.dispatch=ie,fe=Zl(!1),ye=su.bind(null,rn,!1,fe.queue),fe=dr(),me={state:l,dispatch:null,action:s,pending:null},fe.queue=me,ie=Up.bind(null,rn,me,ye,ie),me.dispatch=ie,fe.memoizedState=s,[l,ie,!1]}function vd(s){var l=Hn();return wd(l,Rn,s)}function wd(s,l,ie){if(l=Kl(s,l,bd)[0],s=Sa(pi)[0],typeof l=="object"&&l!==null&&typeof l.then=="function")try{var fe=Co(l)}catch(Ie){throw Ie===zs?pa:Ie}else fe=l;l=Hn();var me=l.queue,ye=me.dispatch;return ie!==l.memoizedState&&(rn.flags|=2048,Ys(9,{destroy:void 0},zp.bind(null,me,ie),null)),[fe,ye,s]}function zp(s,l){s.action=l}function Td(s){var l=Hn(),ie=Rn;if(ie!==null)return wd(l,ie,s);Hn(),l=l.memoizedState,ie=Hn();var fe=ie.queue.dispatch;return ie.memoizedState=s,[l,fe,!1]}function Ys(s,l,ie,fe){return s={tag:s,create:ie,deps:fe,inst:l,next:null},l=rn.updateQueue,l===null&&(l=Ta(),rn.updateQueue=l),ie=l.lastEffect,ie===null?l.lastEffect=s.next=s:(fe=ie.next,ie.next=s,s.next=fe,l.lastEffect=s),s}function Ed(){return Hn().memoizedState}function Aa(s,l,ie,fe){var me=dr();rn.flags|=s,me.memoizedState=Ys(1|l,{destroy:void 0},ie,fe===void 0?null:fe)}function Oa(s,l,ie,fe){var me=Hn();fe=fe===void 0?null:fe;var ye=me.memoizedState.inst;Rn!==null&&fe!==null&&Gl(fe,Rn.memoizedState.deps)?me.memoizedState=Ys(l,ye,ie,fe):(rn.flags|=s,me.memoizedState=Ys(1|l,ye,ie,fe))}function Sd(s,l){Aa(8390656,8,s,l)}function eu(s,l){Oa(2048,8,s,l)}function Vp(s){rn.flags|=4;var l=rn.updateQueue;if(l===null)l=Ta(),rn.updateQueue=l,l.events=[s];else{var ie=l.events;ie===null?l.events=[s]:ie.push(s)}}function Ad(s){var l=Hn().memoizedState;return Vp({ref:l,nextImpl:s}),function(){if((An&2)!==0)throw Error(r(440));return l.impl.apply(void 0,arguments)}}function Od(s,l){return Oa(4,2,s,l)}function Id(s,l){return Oa(4,4,s,l)}function Md(s,l){if(typeof l=="function"){s=s();var ie=l(s);return function(){typeof ie=="function"?ie():l(null)}}if(l!=null)return s=s(),l.current=s,function(){l.current=null}}function Nd(s,l,ie){ie=ie!=null?ie.concat([s]):null,Oa(4,4,Md.bind(null,l,s),ie)}function tu(){}function Rd(s,l){var ie=Hn();l=l===void 0?null:l;var fe=ie.memoizedState;return l!==null&&Gl(l,fe[1])?fe[0]:(ie.memoizedState=[s,l],s)}function Dd(s,l){var ie=Hn();l=l===void 0?null:l;var fe=ie.memoizedState;if(l!==null&&Gl(l,fe[1]))return fe[0];if(fe=s(),gs){an(!0);try{s()}finally{an(!1)}}return ie.memoizedState=[fe,l],fe}function nu(s,l,ie){return ie===void 0||(hi&1073741824)!==0&&(gn&261930)===0?s.memoizedState=l:(s.memoizedState=ie,s=kf(),rn.lanes|=s,Gi|=s,ie)}function Cd(s,l,ie,fe){return vr(ie,l)?ie:Gs.current!==null?(s=nu(s,ie,fe),vr(s,l)||(Kn=!0),s):(hi&42)===0||(hi&1073741824)!==0&&(gn&261930)===0?(Kn=!0,s.memoizedState=ie):(s=kf(),rn.lanes|=s,Gi|=s,l)}function Pd(s,l,ie,fe,me){var ye=je.p;je.p=ye!==0&&8>ye?ye:8;var Ie=Me.T,Fe={};Me.T=Fe,su(s,!1,l,ie);try{var Qe=me(),ft=Me.S;if(ft!==null&&ft(Fe,Qe),Qe!==null&&typeof Qe=="object"&&typeof Qe.then=="function"){var St=Bp(Qe,fe);Po(s,l,St,Or(s))}else Po(s,l,fe,Or(s))}catch(Ot){Po(s,l,{then:function(){},status:"rejected",reason:Ot},Or())}finally{je.p=ye,Ie!==null&&Fe.types!==null&&(Ie.types=Fe.types),Me.T=Ie}}function Gp(){}function ru(s,l,ie,fe){if(s.tag!==5)throw Error(r(476));var me=Ld(s).queue;Pd(s,me,l,it,ie===null?Gp:function(){return kd(s),ie(fe)})}function Ld(s){var l=s.memoizedState;if(l!==null)return l;l={memoizedState:it,baseState:it,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:pi,lastRenderedState:it},next:null};var ie={};return l.next={memoizedState:ie,baseState:ie,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:pi,lastRenderedState:ie},next:null},s.memoizedState=l,s=s.alternate,s!==null&&(s.memoizedState=l),l}function kd(s){var l=Ld(s);l.next===null&&(l=s.alternate.memoizedState),Po(s,l.next.queue,{},Or())}function iu(){return sr(Qo)}function Fd(){return Hn().memoizedState}function Bd(){return Hn().memoizedState}function Hp(s){for(var l=s.return;l!==null;){switch(l.tag){case 24:case 3:var ie=Or();s=Bi(ie);var fe=ji(l,s,ie);fe!==null&&(xr(fe,l,ie),Mo(fe,l,ie)),l={cache:Cl()},s.payload=l;return}l=l.return}}function qp(s,l,ie){var fe=Or();ie={lane:fe,revertLane:0,gesture:null,action:ie,hasEagerState:!1,eagerState:null,next:null},Ia(s)?$d(l,ie):(ie=wl(s,l,ie,fe),ie!==null&&(xr(ie,s,fe),Ud(ie,l,fe)))}function jd(s,l,ie){var fe=Or();Po(s,l,ie,fe)}function Po(s,l,ie,fe){var me={lane:fe,revertLane:0,gesture:null,action:ie,hasEagerState:!1,eagerState:null,next:null};if(Ia(s))$d(l,me);else{var ye=s.alternate;if(s.lanes===0&&(ye===null||ye.lanes===0)&&(ye=l.lastRenderedReducer,ye!==null))try{var Ie=l.lastRenderedState,Fe=ye(Ie,ie);if(me.hasEagerState=!0,me.eagerState=Fe,vr(Fe,Ie))return aa(s,l,me,0),Ln===null&&oa(),!1}catch{}finally{}if(ie=wl(s,l,me,fe),ie!==null)return xr(ie,s,fe),Ud(ie,l,fe),!0}return!1}function su(s,l,ie,fe){if(fe={lane:2,revertLane:Bu(),gesture:null,action:fe,hasEagerState:!1,eagerState:null,next:null},Ia(s)){if(l)throw Error(r(479))}else l=wl(s,ie,fe,2),l!==null&&xr(l,s,2)}function Ia(s){var l=s.alternate;return s===rn||l!==null&&l===rn}function $d(s,l){Hs=va=!0;var ie=s.pending;ie===null?l.next=l:(l.next=ie.next,ie.next=l),s.pending=l}function Ud(s,l,ie){if((ie&4194048)!==0){var fe=l.lanes;fe&=s.pendingLanes,ie|=fe,l.lanes=ie,Ai(s,ie)}}var Lo={readContext:sr,use:Ea,useCallback:Un,useContext:Un,useEffect:Un,useImperativeHandle:Un,useLayoutEffect:Un,useInsertionEffect:Un,useMemo:Un,useReducer:Un,useRef:Un,useState:Un,useDebugValue:Un,useDeferredValue:Un,useTransition:Un,useSyncExternalStore:Un,useId:Un,useHostTransitionStatus:Un,useFormState:Un,useActionState:Un,useOptimistic:Un,useMemoCache:Un,useCacheRefresh:Un};Lo.useEffectEvent=Un;var zd={readContext:sr,use:Ea,useCallback:function(s,l){return dr().memoizedState=[s,l===void 0?null:l],s},useContext:sr,useEffect:Sd,useImperativeHandle:function(s,l,ie){ie=ie!=null?ie.concat([s]):null,Aa(4194308,4,Md.bind(null,l,s),ie)},useLayoutEffect:function(s,l){return Aa(4194308,4,s,l)},useInsertionEffect:function(s,l){Aa(4,2,s,l)},useMemo:function(s,l){var ie=dr();l=l===void 0?null:l;var fe=s();if(gs){an(!0);try{s()}finally{an(!1)}}return ie.memoizedState=[fe,l],fe},useReducer:function(s,l,ie){var fe=dr();if(ie!==void 0){var me=ie(l);if(gs){an(!0);try{ie(l)}finally{an(!1)}}}else me=l;return fe.memoizedState=fe.baseState=me,s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:s,lastRenderedState:me},fe.queue=s,s=s.dispatch=qp.bind(null,rn,s),[fe.memoizedState,s]},useRef:function(s){var l=dr();return s={current:s},l.memoizedState=s},useState:function(s){s=Zl(s);var l=s.queue,ie=jd.bind(null,rn,l);return l.dispatch=ie,[s.memoizedState,ie]},useDebugValue:tu,useDeferredValue:function(s,l){var ie=dr();return nu(ie,s,l)},useTransition:function(){var s=Zl(!1);return s=Pd.bind(null,rn,s.queue,!0,!1),dr().memoizedState=s,[!1,s]},useSyncExternalStore:function(s,l,ie){var fe=rn,me=dr();if(bn){if(ie===void 0)throw Error(r(407));ie=ie()}else{if(ie=l(),Ln===null)throw Error(r(349));(gn&127)!==0||ld(fe,l,ie)}me.memoizedState=ie;var ye={value:ie,getSnapshot:l};return me.queue=ye,Sd(cd.bind(null,fe,ye,s),[s]),fe.flags|=2048,Ys(9,{destroy:void 0},ud.bind(null,fe,ye,ie,l),null),ie},useId:function(){var s=dr(),l=Ln.identifierPrefix;if(bn){var ie=Xr,fe=Wr;ie=(fe&~(1<<32-en(fe)-1)).toString(32)+ie,l="_"+l+"R_"+ie,ie=wa++,0<ie&&(l+="H"+ie.toString(32)),l+="_"}else ie=jp++,l="_"+l+"r_"+ie.toString(32)+"_";return s.memoizedState=l},useHostTransitionStatus:iu,useFormState:xd,useActionState:xd,useOptimistic:function(s){var l=dr();l.memoizedState=l.baseState=s;var ie={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return l.queue=ie,l=su.bind(null,rn,!0,ie),ie.dispatch=l,[s,l]},useMemoCache:Xl,useCacheRefresh:function(){return dr().memoizedState=Hp.bind(null,rn)},useEffectEvent:function(s){var l=dr(),ie={impl:s};return l.memoizedState=ie,function(){if((An&2)!==0)throw Error(r(440));return ie.impl.apply(void 0,arguments)}}},ou={readContext:sr,use:Ea,useCallback:Rd,useContext:sr,useEffect:eu,useImperativeHandle:Nd,useInsertionEffect:Od,useLayoutEffect:Id,useMemo:Dd,useReducer:Sa,useRef:Ed,useState:function(){return Sa(pi)},useDebugValue:tu,useDeferredValue:function(s,l){var ie=Hn();return Cd(ie,Rn.memoizedState,s,l)},useTransition:function(){var s=Sa(pi)[0],l=Hn().memoizedState;return[typeof s=="boolean"?s:Co(s),l]},useSyncExternalStore:ad,useId:Fd,useHostTransitionStatus:iu,useFormState:vd,useActionState:vd,useOptimistic:function(s,l){var ie=Hn();return hd(ie,Rn,s,l)},useMemoCache:Xl,useCacheRefresh:Bd};ou.useEffectEvent=Ad;var Vd={readContext:sr,use:Ea,useCallback:Rd,useContext:sr,useEffect:eu,useImperativeHandle:Nd,useInsertionEffect:Od,useLayoutEffect:Id,useMemo:Dd,useReducer:Ql,useRef:Ed,useState:function(){return Ql(pi)},useDebugValue:tu,useDeferredValue:function(s,l){var ie=Hn();return Rn===null?nu(ie,s,l):Cd(ie,Rn.memoizedState,s,l)},useTransition:function(){var s=Ql(pi)[0],l=Hn().memoizedState;return[typeof s=="boolean"?s:Co(s),l]},useSyncExternalStore:ad,useId:Fd,useHostTransitionStatus:iu,useFormState:Td,useActionState:Td,useOptimistic:function(s,l){var ie=Hn();return Rn!==null?hd(ie,Rn,s,l):(ie.baseState=s,[s,ie.queue.dispatch])},useMemoCache:Xl,useCacheRefresh:Bd};Vd.useEffectEvent=Ad;function au(s,l,ie,fe){l=s.memoizedState,ie=ie(fe,l),ie=ie==null?l:o({},l,ie),s.memoizedState=ie,s.lanes===0&&(s.updateQueue.baseState=ie)}var lu={enqueueSetState:function(s,l,ie){s=s._reactInternals;var fe=Or(),me=Bi(fe);me.payload=l,ie!=null&&(me.callback=ie),l=ji(s,me,fe),l!==null&&(xr(l,s,fe),Mo(l,s,fe))},enqueueReplaceState:function(s,l,ie){s=s._reactInternals;var fe=Or(),me=Bi(fe);me.tag=1,me.payload=l,ie!=null&&(me.callback=ie),l=ji(s,me,fe),l!==null&&(xr(l,s,fe),Mo(l,s,fe))},enqueueForceUpdate:function(s,l){s=s._reactInternals;var ie=Or(),fe=Bi(ie);fe.tag=2,l!=null&&(fe.callback=l),l=ji(s,fe,ie),l!==null&&(xr(l,s,ie),Mo(l,s,ie))}};function Gd(s,l,ie,fe,me,ye,Ie){return s=s.stateNode,typeof s.shouldComponentUpdate=="function"?s.shouldComponentUpdate(fe,ye,Ie):l.prototype&&l.prototype.isPureReactComponent?!vo(ie,fe)||!vo(me,ye):!0}function Hd(s,l,ie,fe){s=l.state,typeof l.componentWillReceiveProps=="function"&&l.componentWillReceiveProps(ie,fe),typeof l.UNSAFE_componentWillReceiveProps=="function"&&l.UNSAFE_componentWillReceiveProps(ie,fe),l.state!==s&&lu.enqueueReplaceState(l,l.state,null)}function ys(s,l){var ie=l;if("ref"in l){ie={};for(var fe in l)fe!=="ref"&&(ie[fe]=l[fe])}if(s=s.defaultProps){ie===l&&(ie=o({},ie));for(var me in s)ie[me]===void 0&&(ie[me]=s[me])}return ie}function qd(s){sa(s)}function Yd(s){console.error(s)}function Wd(s){sa(s)}function Ma(s,l){try{var ie=s.onUncaughtError;ie(l.value,{componentStack:l.stack})}catch(fe){setTimeout(function(){throw fe})}}function Xd(s,l,ie){try{var fe=s.onCaughtError;fe(ie.value,{componentStack:ie.stack,errorBoundary:l.tag===1?l.stateNode:null})}catch(me){setTimeout(function(){throw me})}}function uu(s,l,ie){return ie=Bi(ie),ie.tag=3,ie.payload={element:null},ie.callback=function(){Ma(s,l)},ie}function Kd(s){return s=Bi(s),s.tag=3,s}function Qd(s,l,ie,fe){var me=ie.type.getDerivedStateFromError;if(typeof me=="function"){var ye=fe.value;s.payload=function(){return me(ye)},s.callback=function(){Xd(l,ie,fe)}}var Ie=ie.stateNode;Ie!==null&&typeof Ie.componentDidCatch=="function"&&(s.callback=function(){Xd(l,ie,fe),typeof me!="function"&&(Hi===null?Hi=new Set([this]):Hi.add(this));var Fe=fe.stack;this.componentDidCatch(fe.value,{componentStack:Fe!==null?Fe:""})})}function Yp(s,l,ie,fe,me){if(ie.flags|=32768,fe!==null&&typeof fe=="object"&&typeof fe.then=="function"){if(l=ie.alternate,l!==null&&js(l,ie,me,!0),ie=Tr.current,ie!==null){switch(ie.tag){case 31:case 13:return Br===null?Ua():ie.alternate===null&&zn===0&&(zn=3),ie.flags&=-257,ie.flags|=65536,ie.lanes=me,fe===ma?ie.flags|=16384:(l=ie.updateQueue,l===null?ie.updateQueue=new Set([fe]):l.add(fe),Lu(s,fe,me)),!1;case 22:return ie.flags|=65536,fe===ma?ie.flags|=16384:(l=ie.updateQueue,l===null?(l={transitions:null,markerInstances:null,retryQueue:new Set([fe])},ie.updateQueue=l):(ie=l.retryQueue,ie===null?l.retryQueue=new Set([fe]):ie.add(fe)),Lu(s,fe,me)),!1}throw Error(r(435,ie.tag))}return Lu(s,fe,me),Ua(),!1}if(bn)return l=Tr.current,l!==null?((l.flags&65536)===0&&(l.flags|=256),l.flags|=65536,l.lanes=me,fe!==Il&&(s=Error(r(422),{cause:fe}),Eo(Pr(s,ie)))):(fe!==Il&&(l=Error(r(423),{cause:fe}),Eo(Pr(l,ie))),s=s.current.alternate,s.flags|=65536,me&=-me,s.lanes|=me,fe=Pr(fe,ie),me=uu(s.stateNode,fe,me),jl(s,me),zn!==4&&(zn=2)),!1;var ye=Error(r(520),{cause:fe});if(ye=Pr(ye,ie),Vo===null?Vo=[ye]:Vo.push(ye),zn!==4&&(zn=2),l===null)return!0;fe=Pr(fe,ie),ie=l;do{switch(ie.tag){case 3:return ie.flags|=65536,s=me&-me,ie.lanes|=s,s=uu(ie.stateNode,fe,s),jl(ie,s),!1;case 1:if(l=ie.type,ye=ie.stateNode,(ie.flags&128)===0&&(typeof l.getDerivedStateFromError=="function"||ye!==null&&typeof ye.componentDidCatch=="function"&&(Hi===null||!Hi.has(ye))))return ie.flags|=65536,me&=-me,ie.lanes|=me,me=Kd(me),Qd(me,s,ie,fe),jl(ie,me),!1}ie=ie.return}while(ie!==null);return!1}var cu=Error(r(461)),Kn=!1;function or(s,l,ie,fe){l.child=s===null?Jc(l,null,ie,fe):ms(l,s.child,ie,fe)}function Zd(s,l,ie,fe,me){ie=ie.render;var ye=l.ref;if("ref"in fe){var Ie={};for(var Fe in fe)Fe!=="ref"&&(Ie[Fe]=fe[Fe])}else Ie=fe;return ds(l),fe=Hl(s,l,ie,Ie,ye,me),Fe=ql(),s!==null&&!Kn?(Yl(s,l,me),mi(s,l,me)):(bn&&Fe&&Al(l),l.flags|=1,or(s,l,fe,me),l.child)}function Jd(s,l,ie,fe,me){if(s===null){var ye=ie.type;return typeof ye=="function"&&!Tl(ye)&&ye.defaultProps===void 0&&ie.compare===null?(l.tag=15,l.type=ye,ef(s,l,ye,fe,me)):(s=ua(ie.type,null,fe,l,l.mode,me),s.ref=l.ref,s.return=l,l.child=s)}if(ye=s.child,!bu(s,me)){var Ie=ye.memoizedProps;if(ie=ie.compare,ie=ie!==null?ie:vo,ie(Ie,fe)&&s.ref===l.ref)return mi(s,l,me)}return l.flags|=1,s=ui(ye,fe),s.ref=l.ref,s.return=l,l.child=s}function ef(s,l,ie,fe,me){if(s!==null){var ye=s.memoizedProps;if(vo(ye,fe)&&s.ref===l.ref)if(Kn=!1,l.pendingProps=fe=ye,bu(s,me))(s.flags&131072)!==0&&(Kn=!0);else return l.lanes=s.lanes,mi(s,l,me)}return du(s,l,ie,fe,me)}function tf(s,l,ie,fe){var me=fe.children,ye=s!==null?s.memoizedState:null;if(s===null&&l.stateNode===null&&(l.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),fe.mode==="hidden"){if((l.flags&128)!==0){if(ye=ye!==null?ye.baseLanes|ie:ie,s!==null){for(fe=l.child=s.child,me=0;fe!==null;)me=me|fe.lanes|fe.childLanes,fe=fe.sibling;fe=me&~ye}else fe=0,l.child=null;return nf(s,l,ye,ie,fe)}if((ie&536870912)!==0)l.memoizedState={baseLanes:0,cachePool:null},s!==null&&ha(l,ye!==null?ye.cachePool:null),ye!==null?nd(l,ye):Ul(),rd(l);else return fe=l.lanes=536870912,nf(s,l,ye!==null?ye.baseLanes|ie:ie,ie,fe)}else ye!==null?(ha(l,ye.cachePool),nd(l,ye),Ui(),l.memoizedState=null):(s!==null&&ha(l,null),Ul(),Ui());return or(s,l,me,ie),l.child}function ko(s,l){return s!==null&&s.tag===22||l.stateNode!==null||(l.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),l.sibling}function nf(s,l,ie,fe,me){var ye=Ll();return ye=ye===null?null:{parent:Wn._currentValue,pool:ye},l.memoizedState={baseLanes:ie,cachePool:ye},s!==null&&ha(l,null),Ul(),rd(l),s!==null&&js(s,l,fe,!0),l.childLanes=me,null}function Na(s,l){return l=Da({mode:l.mode,children:l.children},s.mode),l.ref=s.ref,s.child=l,l.return=s,l}function rf(s,l,ie){return ms(l,s.child,null,ie),s=Na(l,l.pendingProps),s.flags|=2,Er(l),l.memoizedState=null,s}function Wp(s,l,ie){var fe=l.pendingProps,me=(l.flags&128)!==0;if(l.flags&=-129,s===null){if(bn){if(fe.mode==="hidden")return s=Na(l,fe),l.lanes=536870912,ko(null,s);if(Vl(l),(s=Fn)?(s=bh(s,Fr),s=s!==null&&s.data==="&"?s:null,s!==null&&(l.memoizedState={dehydrated:s,treeContext:Ci!==null?{id:Wr,overflow:Xr}:null,retryLane:536870912,hydrationErrors:null},ie=Bc(s),ie.return=l,l.child=ie,ir=l,Fn=null)):s=null,s===null)throw Li(l);return l.lanes=536870912,null}return Na(l,fe)}var ye=s.memoizedState;if(ye!==null){var Ie=ye.dehydrated;if(Vl(l),me)if(l.flags&256)l.flags&=-257,l=rf(s,l,ie);else if(l.memoizedState!==null)l.child=s.child,l.flags|=128,l=null;else throw Error(r(558));else if(Kn||js(s,l,ie,!1),me=(ie&s.childLanes)!==0,Kn||me){if(fe=Ln,fe!==null&&(Ie=Oi(fe,ie),Ie!==0&&Ie!==ye.retryLane))throw ye.retryLane=Ie,as(s,Ie),xr(fe,s,Ie),cu;Ua(),l=rf(s,l,ie)}else s=ye.treeContext,Fn=jr(Ie.nextSibling),ir=l,bn=!0,Pi=null,Fr=!1,s!==null&&Uc(l,s),l=Na(l,fe),l.flags|=4096;return l}return s=ui(s.child,{mode:fe.mode,children:fe.children}),s.ref=l.ref,l.child=s,s.return=l,s}function Ra(s,l){var ie=l.ref;if(ie===null)s!==null&&s.ref!==null&&(l.flags|=4194816);else{if(typeof ie!="function"&&typeof ie!="object")throw Error(r(284));(s===null||s.ref!==ie)&&(l.flags|=4194816)}}function du(s,l,ie,fe,me){return ds(l),ie=Hl(s,l,ie,fe,void 0,me),fe=ql(),s!==null&&!Kn?(Yl(s,l,me),mi(s,l,me)):(bn&&fe&&Al(l),l.flags|=1,or(s,l,ie,me),l.child)}function sf(s,l,ie,fe,me,ye){return ds(l),l.updateQueue=null,ie=od(l,fe,ie,me),sd(s),fe=ql(),s!==null&&!Kn?(Yl(s,l,ye),mi(s,l,ye)):(bn&&fe&&Al(l),l.flags|=1,or(s,l,ie,ye),l.child)}function of(s,l,ie,fe,me){if(ds(l),l.stateNode===null){var ye=Ls,Ie=ie.contextType;typeof Ie=="object"&&Ie!==null&&(ye=sr(Ie)),ye=new ie(fe,ye),l.memoizedState=ye.state!==null&&ye.state!==void 0?ye.state:null,ye.updater=lu,l.stateNode=ye,ye._reactInternals=l,ye=l.stateNode,ye.props=fe,ye.state=l.memoizedState,ye.refs={},Fl(l),Ie=ie.contextType,ye.context=typeof Ie=="object"&&Ie!==null?sr(Ie):Ls,ye.state=l.memoizedState,Ie=ie.getDerivedStateFromProps,typeof Ie=="function"&&(au(l,ie,Ie,fe),ye.state=l.memoizedState),typeof ie.getDerivedStateFromProps=="function"||typeof ye.getSnapshotBeforeUpdate=="function"||typeof ye.UNSAFE_componentWillMount!="function"&&typeof ye.componentWillMount!="function"||(Ie=ye.state,typeof ye.componentWillMount=="function"&&ye.componentWillMount(),typeof ye.UNSAFE_componentWillMount=="function"&&ye.UNSAFE_componentWillMount(),Ie!==ye.state&&lu.enqueueReplaceState(ye,ye.state,null),Ro(l,fe,ye,me),No(),ye.state=l.memoizedState),typeof ye.componentDidMount=="function"&&(l.flags|=4194308),fe=!0}else if(s===null){ye=l.stateNode;var Fe=l.memoizedProps,Qe=ys(ie,Fe);ye.props=Qe;var ft=ye.context,St=ie.contextType;Ie=Ls,typeof St=="object"&&St!==null&&(Ie=sr(St));var Ot=ie.getDerivedStateFromProps;St=typeof Ot=="function"||typeof ye.getSnapshotBeforeUpdate=="function",Fe=l.pendingProps!==Fe,St||typeof ye.UNSAFE_componentWillReceiveProps!="function"&&typeof ye.componentWillReceiveProps!="function"||(Fe||ft!==Ie)&&Hd(l,ye,fe,Ie),Fi=!1;var ht=l.memoizedState;ye.state=ht,Ro(l,fe,ye,me),No(),ft=l.memoizedState,Fe||ht!==ft||Fi?(typeof Ot=="function"&&(au(l,ie,Ot,fe),ft=l.memoizedState),(Qe=Fi||Gd(l,ie,Qe,fe,ht,ft,Ie))?(St||typeof ye.UNSAFE_componentWillMount!="function"&&typeof ye.componentWillMount!="function"||(typeof ye.componentWillMount=="function"&&ye.componentWillMount(),typeof ye.UNSAFE_componentWillMount=="function"&&ye.UNSAFE_componentWillMount()),typeof ye.componentDidMount=="function"&&(l.flags|=4194308)):(typeof ye.componentDidMount=="function"&&(l.flags|=4194308),l.memoizedProps=fe,l.memoizedState=ft),ye.props=fe,ye.state=ft,ye.context=Ie,fe=Qe):(typeof ye.componentDidMount=="function"&&(l.flags|=4194308),fe=!1)}else{ye=l.stateNode,Bl(s,l),Ie=l.memoizedProps,St=ys(ie,Ie),ye.props=St,Ot=l.pendingProps,ht=ye.context,ft=ie.contextType,Qe=Ls,typeof ft=="object"&&ft!==null&&(Qe=sr(ft)),Fe=ie.getDerivedStateFromProps,(ft=typeof Fe=="function"||typeof ye.getSnapshotBeforeUpdate=="function")||typeof ye.UNSAFE_componentWillReceiveProps!="function"&&typeof ye.componentWillReceiveProps!="function"||(Ie!==Ot||ht!==Qe)&&Hd(l,ye,fe,Qe),Fi=!1,ht=l.memoizedState,ye.state=ht,Ro(l,fe,ye,me),No();var gt=l.memoizedState;Ie!==Ot||ht!==gt||Fi||s!==null&&s.dependencies!==null&&da(s.dependencies)?(typeof Fe=="function"&&(au(l,ie,Fe,fe),gt=l.memoizedState),(St=Fi||Gd(l,ie,St,fe,ht,gt,Qe)||s!==null&&s.dependencies!==null&&da(s.dependencies))?(ft||typeof ye.UNSAFE_componentWillUpdate!="function"&&typeof ye.componentWillUpdate!="function"||(typeof ye.componentWillUpdate=="function"&&ye.componentWillUpdate(fe,gt,Qe),typeof ye.UNSAFE_componentWillUpdate=="function"&&ye.UNSAFE_componentWillUpdate(fe,gt,Qe)),typeof ye.componentDidUpdate=="function"&&(l.flags|=4),typeof ye.getSnapshotBeforeUpdate=="function"&&(l.flags|=1024)):(typeof ye.componentDidUpdate!="function"||Ie===s.memoizedProps&&ht===s.memoizedState||(l.flags|=4),typeof ye.getSnapshotBeforeUpdate!="function"||Ie===s.memoizedProps&&ht===s.memoizedState||(l.flags|=1024),l.memoizedProps=fe,l.memoizedState=gt),ye.props=fe,ye.state=gt,ye.context=Qe,fe=St):(typeof ye.componentDidUpdate!="function"||Ie===s.memoizedProps&&ht===s.memoizedState||(l.flags|=4),typeof ye.getSnapshotBeforeUpdate!="function"||Ie===s.memoizedProps&&ht===s.memoizedState||(l.flags|=1024),fe=!1)}return ye=fe,Ra(s,l),fe=(l.flags&128)!==0,ye||fe?(ye=l.stateNode,ie=fe&&typeof ie.getDerivedStateFromError!="function"?null:ye.render(),l.flags|=1,s!==null&&fe?(l.child=ms(l,s.child,null,me),l.child=ms(l,null,ie,me)):or(s,l,ie,me),l.memoizedState=ye.state,s=l.child):s=mi(s,l,me),s}function af(s,l,ie,fe){return us(),l.flags|=256,or(s,l,ie,fe),l.child}var fu={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function hu(s){return{baseLanes:s,cachePool:Yc()}}function pu(s,l,ie){return s=s!==null?s.childLanes&~ie:0,l&&(s|=Ar),s}function lf(s,l,ie){var fe=l.pendingProps,me=!1,ye=(l.flags&128)!==0,Ie;if((Ie=ye)||(Ie=s!==null&&s.memoizedState===null?!1:(Gn.current&2)!==0),Ie&&(me=!0,l.flags&=-129),Ie=(l.flags&32)!==0,l.flags&=-33,s===null){if(bn){if(me?$i(l):Ui(),(s=Fn)?(s=bh(s,Fr),s=s!==null&&s.data!=="&"?s:null,s!==null&&(l.memoizedState={dehydrated:s,treeContext:Ci!==null?{id:Wr,overflow:Xr}:null,retryLane:536870912,hydrationErrors:null},ie=Bc(s),ie.return=l,l.child=ie,ir=l,Fn=null)):s=null,s===null)throw Li(l);return Qu(s)?l.lanes=32:l.lanes=536870912,null}var Fe=fe.children;return fe=fe.fallback,me?(Ui(),me=l.mode,Fe=Da({mode:"hidden",children:Fe},me),fe=ls(fe,me,ie,null),Fe.return=l,fe.return=l,Fe.sibling=fe,l.child=Fe,fe=l.child,fe.memoizedState=hu(ie),fe.childLanes=pu(s,Ie,ie),l.memoizedState=fu,ko(null,fe)):($i(l),mu(l,Fe))}var Qe=s.memoizedState;if(Qe!==null&&(Fe=Qe.dehydrated,Fe!==null)){if(ye)l.flags&256?($i(l),l.flags&=-257,l=gu(s,l,ie)):l.memoizedState!==null?(Ui(),l.child=s.child,l.flags|=128,l=null):(Ui(),Fe=fe.fallback,me=l.mode,fe=Da({mode:"visible",children:fe.children},me),Fe=ls(Fe,me,ie,null),Fe.flags|=2,fe.return=l,Fe.return=l,fe.sibling=Fe,l.child=fe,ms(l,s.child,null,ie),fe=l.child,fe.memoizedState=hu(ie),fe.childLanes=pu(s,Ie,ie),l.memoizedState=fu,l=ko(null,fe));else if($i(l),Qu(Fe)){if(Ie=Fe.nextSibling&&Fe.nextSibling.dataset,Ie)var ft=Ie.dgst;Ie=ft,fe=Error(r(419)),fe.stack="",fe.digest=Ie,Eo({value:fe,source:null,stack:null}),l=gu(s,l,ie)}else if(Kn||js(s,l,ie,!1),Ie=(ie&s.childLanes)!==0,Kn||Ie){if(Ie=Ln,Ie!==null&&(fe=Oi(Ie,ie),fe!==0&&fe!==Qe.retryLane))throw Qe.retryLane=fe,as(s,fe),xr(Ie,s,fe),cu;Ku(Fe)||Ua(),l=gu(s,l,ie)}else Ku(Fe)?(l.flags|=192,l.child=s.child,l=null):(s=Qe.treeContext,Fn=jr(Fe.nextSibling),ir=l,bn=!0,Pi=null,Fr=!1,s!==null&&Uc(l,s),l=mu(l,fe.children),l.flags|=4096);return l}return me?(Ui(),Fe=fe.fallback,me=l.mode,Qe=s.child,ft=Qe.sibling,fe=ui(Qe,{mode:"hidden",children:fe.children}),fe.subtreeFlags=Qe.subtreeFlags&65011712,ft!==null?Fe=ui(ft,Fe):(Fe=ls(Fe,me,ie,null),Fe.flags|=2),Fe.return=l,fe.return=l,fe.sibling=Fe,l.child=fe,ko(null,fe),fe=l.child,Fe=s.child.memoizedState,Fe===null?Fe=hu(ie):(me=Fe.cachePool,me!==null?(Qe=Wn._currentValue,me=me.parent!==Qe?{parent:Qe,pool:Qe}:me):me=Yc(),Fe={baseLanes:Fe.baseLanes|ie,cachePool:me}),fe.memoizedState=Fe,fe.childLanes=pu(s,Ie,ie),l.memoizedState=fu,ko(s.child,fe)):($i(l),ie=s.child,s=ie.sibling,ie=ui(ie,{mode:"visible",children:fe.children}),ie.return=l,ie.sibling=null,s!==null&&(Ie=l.deletions,Ie===null?(l.deletions=[s],l.flags|=16):Ie.push(s)),l.child=ie,l.memoizedState=null,ie)}function mu(s,l){return l=Da({mode:"visible",children:l},s.mode),l.return=s,s.child=l}function Da(s,l){return s=wr(22,s,null,l),s.lanes=0,s}function gu(s,l,ie){return ms(l,s.child,null,ie),s=mu(l,l.pendingProps.children),s.flags|=2,l.memoizedState=null,s}function uf(s,l,ie){s.lanes|=l;var fe=s.alternate;fe!==null&&(fe.lanes|=l),Rl(s.return,l,ie)}function yu(s,l,ie,fe,me,ye){var Ie=s.memoizedState;Ie===null?s.memoizedState={isBackwards:l,rendering:null,renderingStartTime:0,last:fe,tail:ie,tailMode:me,treeForkCount:ye}:(Ie.isBackwards=l,Ie.rendering=null,Ie.renderingStartTime=0,Ie.last=fe,Ie.tail=ie,Ie.tailMode=me,Ie.treeForkCount=ye)}function cf(s,l,ie){var fe=l.pendingProps,me=fe.revealOrder,ye=fe.tail;fe=fe.children;var Ie=Gn.current,Fe=(Ie&2)!==0;if(Fe?(Ie=Ie&1|2,l.flags|=128):Ie&=1,Je(Gn,Ie),or(s,l,fe,ie),fe=bn?To:0,!Fe&&s!==null&&(s.flags&128)!==0)e:for(s=l.child;s!==null;){if(s.tag===13)s.memoizedState!==null&&uf(s,ie,l);else if(s.tag===19)uf(s,ie,l);else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===l)break e;for(;s.sibling===null;){if(s.return===null||s.return===l)break e;s=s.return}s.sibling.return=s.return,s=s.sibling}switch(me){case"forwards":for(ie=l.child,me=null;ie!==null;)s=ie.alternate,s!==null&&xa(s)===null&&(me=ie),ie=ie.sibling;ie=me,ie===null?(me=l.child,l.child=null):(me=ie.sibling,ie.sibling=null),yu(l,!1,me,ie,ye,fe);break;case"backwards":case"unstable_legacy-backwards":for(ie=null,me=l.child,l.child=null;me!==null;){if(s=me.alternate,s!==null&&xa(s)===null){l.child=me;break}s=me.sibling,me.sibling=ie,ie=me,me=s}yu(l,!0,ie,null,ye,fe);break;case"together":yu(l,!1,null,null,void 0,fe);break;default:l.memoizedState=null}return l.child}function mi(s,l,ie){if(s!==null&&(l.dependencies=s.dependencies),Gi|=l.lanes,(ie&l.childLanes)===0)if(s!==null){if(js(s,l,ie,!1),(ie&l.childLanes)===0)return null}else return null;if(s!==null&&l.child!==s.child)throw Error(r(153));if(l.child!==null){for(s=l.child,ie=ui(s,s.pendingProps),l.child=ie,ie.return=l;s.sibling!==null;)s=s.sibling,ie=ie.sibling=ui(s,s.pendingProps),ie.return=l;ie.sibling=null}return l.child}function bu(s,l){return(s.lanes&l)!==0?!0:(s=s.dependencies,!!(s!==null&&da(s)))}function Xp(s,l,ie){switch(l.tag){case 3:Dt(l,l.stateNode.containerInfo),ki(l,Wn,s.memoizedState.cache),us();break;case 27:case 5:jt(l);break;case 4:Dt(l,l.stateNode.containerInfo);break;case 10:ki(l,l.type,l.memoizedProps.value);break;case 31:if(l.memoizedState!==null)return l.flags|=128,Vl(l),null;break;case 13:var fe=l.memoizedState;if(fe!==null)return fe.dehydrated!==null?($i(l),l.flags|=128,null):(ie&l.child.childLanes)!==0?lf(s,l,ie):($i(l),s=mi(s,l,ie),s!==null?s.sibling:null);$i(l);break;case 19:var me=(s.flags&128)!==0;if(fe=(ie&l.childLanes)!==0,fe||(js(s,l,ie,!1),fe=(ie&l.childLanes)!==0),me){if(fe)return cf(s,l,ie);l.flags|=128}if(me=l.memoizedState,me!==null&&(me.rendering=null,me.tail=null,me.lastEffect=null),Je(Gn,Gn.current),fe)break;return null;case 22:return l.lanes=0,tf(s,l,ie,l.pendingProps);case 24:ki(l,Wn,s.memoizedState.cache)}return mi(s,l,ie)}function df(s,l,ie){if(s!==null)if(s.memoizedProps!==l.pendingProps)Kn=!0;else{if(!bu(s,ie)&&(l.flags&128)===0)return Kn=!1,Xp(s,l,ie);Kn=(s.flags&131072)!==0}else Kn=!1,bn&&(l.flags&1048576)!==0&&$c(l,To,l.index);switch(l.lanes=0,l.tag){case 16:e:{var fe=l.pendingProps;if(s=hs(l.elementType),l.type=s,typeof s=="function")Tl(s)?(fe=ys(s,fe),l.tag=1,l=of(null,l,s,fe,ie)):(l.tag=0,l=du(null,l,s,fe,ie));else{if(s!=null){var me=s.$$typeof;if(me===ve){l.tag=11,l=Zd(null,l,s,fe,ie);break e}else if(me===Ae){l.tag=14,l=Jd(null,l,s,fe,ie);break e}}throw l=De(s)||s,Error(r(306,l,""))}}return l;case 0:return du(s,l,l.type,l.pendingProps,ie);case 1:return fe=l.type,me=ys(fe,l.pendingProps),of(s,l,fe,me,ie);case 3:e:{if(Dt(l,l.stateNode.containerInfo),s===null)throw Error(r(387));fe=l.pendingProps;var ye=l.memoizedState;me=ye.element,Bl(s,l),Ro(l,fe,null,ie);var Ie=l.memoizedState;if(fe=Ie.cache,ki(l,Wn,fe),fe!==ye.cache&&Dl(l,[Wn],ie,!0),No(),fe=Ie.element,ye.isDehydrated)if(ye={element:fe,isDehydrated:!1,cache:Ie.cache},l.updateQueue.baseState=ye,l.memoizedState=ye,l.flags&256){l=af(s,l,fe,ie);break e}else if(fe!==me){me=Pr(Error(r(424)),l),Eo(me),l=af(s,l,fe,ie);break e}else{switch(s=l.stateNode.containerInfo,s.nodeType){case 9:s=s.body;break;default:s=s.nodeName==="HTML"?s.ownerDocument.body:s}for(Fn=jr(s.firstChild),ir=l,bn=!0,Pi=null,Fr=!0,ie=Jc(l,null,fe,ie),l.child=ie;ie;)ie.flags=ie.flags&-3|4096,ie=ie.sibling}else{if(us(),fe===me){l=mi(s,l,ie);break e}or(s,l,fe,ie)}l=l.child}return l;case 26:return Ra(s,l),s===null?(ie=Sh(l.type,null,l.pendingProps,null))?l.memoizedState=ie:bn||(ie=l.type,s=l.pendingProps,fe=Wa(Tt.current).createElement(ie),fe[$n]=l,fe[Be]=s,ar(fe,ie,s),hn(fe),l.stateNode=fe):l.memoizedState=Sh(l.type,s.memoizedProps,l.pendingProps,s.memoizedState),null;case 27:return jt(l),s===null&&bn&&(fe=l.stateNode=wh(l.type,l.pendingProps,Tt.current),ir=l,Fr=!0,me=Fn,Xi(l.type)?(Zu=me,Fn=jr(fe.firstChild)):Fn=me),or(s,l,l.pendingProps.children,ie),Ra(s,l),s===null&&(l.flags|=4194304),l.child;case 5:return s===null&&bn&&((me=fe=Fn)&&(fe=Am(fe,l.type,l.pendingProps,Fr),fe!==null?(l.stateNode=fe,ir=l,Fn=jr(fe.firstChild),Fr=!1,me=!0):me=!1),me||Li(l)),jt(l),me=l.type,ye=l.pendingProps,Ie=s!==null?s.memoizedProps:null,fe=ye.children,Yu(me,ye)?fe=null:Ie!==null&&Yu(me,Ie)&&(l.flags|=32),l.memoizedState!==null&&(me=Hl(s,l,$p,null,null,ie),Qo._currentValue=me),Ra(s,l),or(s,l,fe,ie),l.child;case 6:return s===null&&bn&&((s=ie=Fn)&&(ie=Om(ie,l.pendingProps,Fr),ie!==null?(l.stateNode=ie,ir=l,Fn=null,s=!0):s=!1),s||Li(l)),null;case 13:return lf(s,l,ie);case 4:return Dt(l,l.stateNode.containerInfo),fe=l.pendingProps,s===null?l.child=ms(l,null,fe,ie):or(s,l,fe,ie),l.child;case 11:return Zd(s,l,l.type,l.pendingProps,ie);case 7:return or(s,l,l.pendingProps,ie),l.child;case 8:return or(s,l,l.pendingProps.children,ie),l.child;case 12:return or(s,l,l.pendingProps.children,ie),l.child;case 10:return fe=l.pendingProps,ki(l,l.type,fe.value),or(s,l,fe.children,ie),l.child;case 9:return me=l.type._context,fe=l.pendingProps.children,ds(l),me=sr(me),fe=fe(me),l.flags|=1,or(s,l,fe,ie),l.child;case 14:return Jd(s,l,l.type,l.pendingProps,ie);case 15:return ef(s,l,l.type,l.pendingProps,ie);case 19:return cf(s,l,ie);case 31:return Wp(s,l,ie);case 22:return tf(s,l,ie,l.pendingProps);case 24:return ds(l),fe=sr(Wn),s===null?(me=Ll(),me===null&&(me=Ln,ye=Cl(),me.pooledCache=ye,ye.refCount++,ye!==null&&(me.pooledCacheLanes|=ie),me=ye),l.memoizedState={parent:fe,cache:me},Fl(l),ki(l,Wn,me)):((s.lanes&ie)!==0&&(Bl(s,l),Ro(l,null,null,ie),No()),me=s.memoizedState,ye=l.memoizedState,me.parent!==fe?(me={parent:fe,cache:fe},l.memoizedState=me,l.lanes===0&&(l.memoizedState=l.updateQueue.baseState=me),ki(l,Wn,fe)):(fe=ye.cache,ki(l,Wn,fe),fe!==me.cache&&Dl(l,[Wn],ie,!0))),or(s,l,l.pendingProps.children,ie),l.child;case 29:throw l.pendingProps}throw Error(r(156,l.tag))}function gi(s){s.flags|=4}function xu(s,l,ie,fe,me){if((l=(s.mode&32)!==0)&&(l=!1),l){if(s.flags|=16777216,(me&335544128)===me)if(s.stateNode.complete)s.flags|=8192;else if($f())s.flags|=8192;else throw ps=ma,kl}else s.flags&=-16777217}function ff(s,l){if(l.type!=="stylesheet"||(l.state.loading&4)!==0)s.flags&=-16777217;else if(s.flags|=16777216,!Nh(l))if($f())s.flags|=8192;else throw ps=ma,kl}function Ca(s,l){l!==null&&(s.flags|=4),s.flags&16384&&(l=s.tag!==22?Yr():536870912,s.lanes|=l,Qs|=l)}function Fo(s,l){if(!bn)switch(s.tailMode){case"hidden":l=s.tail;for(var ie=null;l!==null;)l.alternate!==null&&(ie=l),l=l.sibling;ie===null?s.tail=null:ie.sibling=null;break;case"collapsed":ie=s.tail;for(var fe=null;ie!==null;)ie.alternate!==null&&(fe=ie),ie=ie.sibling;fe===null?l||s.tail===null?s.tail=null:s.tail.sibling=null:fe.sibling=null}}function Bn(s){var l=s.alternate!==null&&s.alternate.child===s.child,ie=0,fe=0;if(l)for(var me=s.child;me!==null;)ie|=me.lanes|me.childLanes,fe|=me.subtreeFlags&65011712,fe|=me.flags&65011712,me.return=s,me=me.sibling;else for(me=s.child;me!==null;)ie|=me.lanes|me.childLanes,fe|=me.subtreeFlags,fe|=me.flags,me.return=s,me=me.sibling;return s.subtreeFlags|=fe,s.childLanes=ie,l}function Kp(s,l,ie){var fe=l.pendingProps;switch(Ol(l),l.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Bn(l),null;case 1:return Bn(l),null;case 3:return ie=l.stateNode,fe=null,s!==null&&(fe=s.memoizedState.cache),l.memoizedState.cache!==fe&&(l.flags|=2048),fi(Wn),Pt(),ie.pendingContext&&(ie.context=ie.pendingContext,ie.pendingContext=null),(s===null||s.child===null)&&(Bs(l)?gi(l):s===null||s.memoizedState.isDehydrated&&(l.flags&256)===0||(l.flags|=1024,Ml())),Bn(l),null;case 26:var me=l.type,ye=l.memoizedState;return s===null?(gi(l),ye!==null?(Bn(l),ff(l,ye)):(Bn(l),xu(l,me,null,fe,ie))):ye?ye!==s.memoizedState?(gi(l),Bn(l),ff(l,ye)):(Bn(l),l.flags&=-16777217):(s=s.memoizedProps,s!==fe&&gi(l),Bn(l),xu(l,me,s,fe,ie)),null;case 27:if(tn(l),ie=Tt.current,me=l.type,s!==null&&l.stateNode!=null)s.memoizedProps!==fe&&gi(l);else{if(!fe){if(l.stateNode===null)throw Error(r(166));return Bn(l),null}s=at.current,Bs(l)?zc(l):(s=wh(me,fe,ie),l.stateNode=s,gi(l))}return Bn(l),null;case 5:if(tn(l),me=l.type,s!==null&&l.stateNode!=null)s.memoizedProps!==fe&&gi(l);else{if(!fe){if(l.stateNode===null)throw Error(r(166));return Bn(l),null}if(ye=at.current,Bs(l))zc(l);else{var Ie=Wa(Tt.current);switch(ye){case 1:ye=Ie.createElementNS("http://www.w3.org/2000/svg",me);break;case 2:ye=Ie.createElementNS("http://www.w3.org/1998/Math/MathML",me);break;default:switch(me){case"svg":ye=Ie.createElementNS("http://www.w3.org/2000/svg",me);break;case"math":ye=Ie.createElementNS("http://www.w3.org/1998/Math/MathML",me);break;case"script":ye=Ie.createElement("div"),ye.innerHTML="<script><\/script>",ye=ye.removeChild(ye.firstChild);break;case"select":ye=typeof fe.is=="string"?Ie.createElement("select",{is:fe.is}):Ie.createElement("select"),fe.multiple?ye.multiple=!0:fe.size&&(ye.size=fe.size);break;default:ye=typeof fe.is=="string"?Ie.createElement(me,{is:fe.is}):Ie.createElement(me)}}ye[$n]=l,ye[Be]=fe;e:for(Ie=l.child;Ie!==null;){if(Ie.tag===5||Ie.tag===6)ye.appendChild(Ie.stateNode);else if(Ie.tag!==4&&Ie.tag!==27&&Ie.child!==null){Ie.child.return=Ie,Ie=Ie.child;continue}if(Ie===l)break e;for(;Ie.sibling===null;){if(Ie.return===null||Ie.return===l)break e;Ie=Ie.return}Ie.sibling.return=Ie.return,Ie=Ie.sibling}l.stateNode=ye;e:switch(ar(ye,me,fe),me){case"button":case"input":case"select":case"textarea":fe=!!fe.autoFocus;break e;case"img":fe=!0;break e;default:fe=!1}fe&&gi(l)}}return Bn(l),xu(l,l.type,s===null?null:s.memoizedProps,l.pendingProps,ie),null;case 6:if(s&&l.stateNode!=null)s.memoizedProps!==fe&&gi(l);else{if(typeof fe!="string"&&l.stateNode===null)throw Error(r(166));if(s=Tt.current,Bs(l)){if(s=l.stateNode,ie=l.memoizedProps,fe=null,me=ir,me!==null)switch(me.tag){case 27:case 5:fe=me.memoizedProps}s[$n]=l,s=!!(s.nodeValue===ie||fe!==null&&fe.suppressHydrationWarning===!0||ch(s.nodeValue,ie)),s||Li(l,!0)}else s=Wa(s).createTextNode(fe),s[$n]=l,l.stateNode=s}return Bn(l),null;case 31:if(ie=l.memoizedState,s===null||s.memoizedState!==null){if(fe=Bs(l),ie!==null){if(s===null){if(!fe)throw Error(r(318));if(s=l.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(r(557));s[$n]=l}else us(),(l.flags&128)===0&&(l.memoizedState=null),l.flags|=4;Bn(l),s=!1}else ie=Ml(),s!==null&&s.memoizedState!==null&&(s.memoizedState.hydrationErrors=ie),s=!0;if(!s)return l.flags&256?(Er(l),l):(Er(l),null);if((l.flags&128)!==0)throw Error(r(558))}return Bn(l),null;case 13:if(fe=l.memoizedState,s===null||s.memoizedState!==null&&s.memoizedState.dehydrated!==null){if(me=Bs(l),fe!==null&&fe.dehydrated!==null){if(s===null){if(!me)throw Error(r(318));if(me=l.memoizedState,me=me!==null?me.dehydrated:null,!me)throw Error(r(317));me[$n]=l}else us(),(l.flags&128)===0&&(l.memoizedState=null),l.flags|=4;Bn(l),me=!1}else me=Ml(),s!==null&&s.memoizedState!==null&&(s.memoizedState.hydrationErrors=me),me=!0;if(!me)return l.flags&256?(Er(l),l):(Er(l),null)}return Er(l),(l.flags&128)!==0?(l.lanes=ie,l):(ie=fe!==null,s=s!==null&&s.memoizedState!==null,ie&&(fe=l.child,me=null,fe.alternate!==null&&fe.alternate.memoizedState!==null&&fe.alternate.memoizedState.cachePool!==null&&(me=fe.alternate.memoizedState.cachePool.pool),ye=null,fe.memoizedState!==null&&fe.memoizedState.cachePool!==null&&(ye=fe.memoizedState.cachePool.pool),ye!==me&&(fe.flags|=2048)),ie!==s&&ie&&(l.child.flags|=8192),Ca(l,l.updateQueue),Bn(l),null);case 4:return Pt(),s===null&&zu(l.stateNode.containerInfo),Bn(l),null;case 10:return fi(l.type),Bn(l),null;case 19:if(et(Gn),fe=l.memoizedState,fe===null)return Bn(l),null;if(me=(l.flags&128)!==0,ye=fe.rendering,ye===null)if(me)Fo(fe,!1);else{if(zn!==0||s!==null&&(s.flags&128)!==0)for(s=l.child;s!==null;){if(ye=xa(s),ye!==null){for(l.flags|=128,Fo(fe,!1),s=ye.updateQueue,l.updateQueue=s,Ca(l,s),l.subtreeFlags=0,s=ie,ie=l.child;ie!==null;)Fc(ie,s),ie=ie.sibling;return Je(Gn,Gn.current&1|2),bn&&ci(l,fe.treeForkCount),l.child}s=s.sibling}fe.tail!==null&&wn()>Ba&&(l.flags|=128,me=!0,Fo(fe,!1),l.lanes=4194304)}else{if(!me)if(s=xa(ye),s!==null){if(l.flags|=128,me=!0,s=s.updateQueue,l.updateQueue=s,Ca(l,s),Fo(fe,!0),fe.tail===null&&fe.tailMode==="hidden"&&!ye.alternate&&!bn)return Bn(l),null}else 2*wn()-fe.renderingStartTime>Ba&&ie!==536870912&&(l.flags|=128,me=!0,Fo(fe,!1),l.lanes=4194304);fe.isBackwards?(ye.sibling=l.child,l.child=ye):(s=fe.last,s!==null?s.sibling=ye:l.child=ye,fe.last=ye)}return fe.tail!==null?(s=fe.tail,fe.rendering=s,fe.tail=s.sibling,fe.renderingStartTime=wn(),s.sibling=null,ie=Gn.current,Je(Gn,me?ie&1|2:ie&1),bn&&ci(l,fe.treeForkCount),s):(Bn(l),null);case 22:case 23:return Er(l),zl(),fe=l.memoizedState!==null,s!==null?s.memoizedState!==null!==fe&&(l.flags|=8192):fe&&(l.flags|=8192),fe?(ie&536870912)!==0&&(l.flags&128)===0&&(Bn(l),l.subtreeFlags&6&&(l.flags|=8192)):Bn(l),ie=l.updateQueue,ie!==null&&Ca(l,ie.retryQueue),ie=null,s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(ie=s.memoizedState.cachePool.pool),fe=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(fe=l.memoizedState.cachePool.pool),fe!==ie&&(l.flags|=2048),s!==null&&et(fs),null;case 24:return ie=null,s!==null&&(ie=s.memoizedState.cache),l.memoizedState.cache!==ie&&(l.flags|=2048),fi(Wn),Bn(l),null;case 25:return null;case 30:return null}throw Error(r(156,l.tag))}function Qp(s,l){switch(Ol(l),l.tag){case 1:return s=l.flags,s&65536?(l.flags=s&-65537|128,l):null;case 3:return fi(Wn),Pt(),s=l.flags,(s&65536)!==0&&(s&128)===0?(l.flags=s&-65537|128,l):null;case 26:case 27:case 5:return tn(l),null;case 31:if(l.memoizedState!==null){if(Er(l),l.alternate===null)throw Error(r(340));us()}return s=l.flags,s&65536?(l.flags=s&-65537|128,l):null;case 13:if(Er(l),s=l.memoizedState,s!==null&&s.dehydrated!==null){if(l.alternate===null)throw Error(r(340));us()}return s=l.flags,s&65536?(l.flags=s&-65537|128,l):null;case 19:return et(Gn),null;case 4:return Pt(),null;case 10:return fi(l.type),null;case 22:case 23:return Er(l),zl(),s!==null&&et(fs),s=l.flags,s&65536?(l.flags=s&-65537|128,l):null;case 24:return fi(Wn),null;case 25:return null;default:return null}}function hf(s,l){switch(Ol(l),l.tag){case 3:fi(Wn),Pt();break;case 26:case 27:case 5:tn(l);break;case 4:Pt();break;case 31:l.memoizedState!==null&&Er(l);break;case 13:Er(l);break;case 19:et(Gn);break;case 10:fi(l.type);break;case 22:case 23:Er(l),zl(),s!==null&&et(fs);break;case 24:fi(Wn)}}function Bo(s,l){try{var ie=l.updateQueue,fe=ie!==null?ie.lastEffect:null;if(fe!==null){var me=fe.next;ie=me;do{if((ie.tag&s)===s){fe=void 0;var ye=ie.create,Ie=ie.inst;fe=ye(),Ie.destroy=fe}ie=ie.next}while(ie!==me)}}catch(Fe){Nn(l,l.return,Fe)}}function zi(s,l,ie){try{var fe=l.updateQueue,me=fe!==null?fe.lastEffect:null;if(me!==null){var ye=me.next;fe=ye;do{if((fe.tag&s)===s){var Ie=fe.inst,Fe=Ie.destroy;if(Fe!==void 0){Ie.destroy=void 0,me=l;var Qe=ie,ft=Fe;try{ft()}catch(St){Nn(me,Qe,St)}}}fe=fe.next}while(fe!==ye)}}catch(St){Nn(l,l.return,St)}}function pf(s){var l=s.updateQueue;if(l!==null){var ie=s.stateNode;try{td(l,ie)}catch(fe){Nn(s,s.return,fe)}}}function mf(s,l,ie){ie.props=ys(s.type,s.memoizedProps),ie.state=s.memoizedState;try{ie.componentWillUnmount()}catch(fe){Nn(s,l,fe)}}function jo(s,l){try{var ie=s.ref;if(ie!==null){switch(s.tag){case 26:case 27:case 5:var fe=s.stateNode;break;case 30:fe=s.stateNode;break;default:fe=s.stateNode}typeof ie=="function"?s.refCleanup=ie(fe):ie.current=fe}}catch(me){Nn(s,l,me)}}function Kr(s,l){var ie=s.ref,fe=s.refCleanup;if(ie!==null)if(typeof fe=="function")try{fe()}catch(me){Nn(s,l,me)}finally{s.refCleanup=null,s=s.alternate,s!=null&&(s.refCleanup=null)}else if(typeof ie=="function")try{ie(null)}catch(me){Nn(s,l,me)}else ie.current=null}function gf(s){var l=s.type,ie=s.memoizedProps,fe=s.stateNode;try{e:switch(l){case"button":case"input":case"select":case"textarea":ie.autoFocus&&fe.focus();break e;case"img":ie.src?fe.src=ie.src:ie.srcSet&&(fe.srcset=ie.srcSet)}}catch(me){Nn(s,s.return,me)}}function vu(s,l,ie){try{var fe=s.stateNode;xm(fe,s.type,ie,l),fe[Be]=l}catch(me){Nn(s,s.return,me)}}function yf(s){return s.tag===5||s.tag===3||s.tag===26||s.tag===27&&Xi(s.type)||s.tag===4}function wu(s){e:for(;;){for(;s.sibling===null;){if(s.return===null||yf(s.return))return null;s=s.return}for(s.sibling.return=s.return,s=s.sibling;s.tag!==5&&s.tag!==6&&s.tag!==18;){if(s.tag===27&&Xi(s.type)||s.flags&2||s.child===null||s.tag===4)continue e;s.child.return=s,s=s.child}if(!(s.flags&2))return s.stateNode}}function Tu(s,l,ie){var fe=s.tag;if(fe===5||fe===6)s=s.stateNode,l?(ie.nodeType===9?ie.body:ie.nodeName==="HTML"?ie.ownerDocument.body:ie).insertBefore(s,l):(l=ie.nodeType===9?ie.body:ie.nodeName==="HTML"?ie.ownerDocument.body:ie,l.appendChild(s),ie=ie._reactRootContainer,ie!=null||l.onclick!==null||(l.onclick=Rr));else if(fe!==4&&(fe===27&&Xi(s.type)&&(ie=s.stateNode,l=null),s=s.child,s!==null))for(Tu(s,l,ie),s=s.sibling;s!==null;)Tu(s,l,ie),s=s.sibling}function Pa(s,l,ie){var fe=s.tag;if(fe===5||fe===6)s=s.stateNode,l?ie.insertBefore(s,l):ie.appendChild(s);else if(fe!==4&&(fe===27&&Xi(s.type)&&(ie=s.stateNode),s=s.child,s!==null))for(Pa(s,l,ie),s=s.sibling;s!==null;)Pa(s,l,ie),s=s.sibling}function bf(s){var l=s.stateNode,ie=s.memoizedProps;try{for(var fe=s.type,me=l.attributes;me.length;)l.removeAttributeNode(me[0]);ar(l,fe,ie),l[$n]=s,l[Be]=ie}catch(ye){Nn(s,s.return,ye)}}var yi=!1,Qn=!1,Eu=!1,xf=typeof WeakSet=="function"?WeakSet:Set,rr=null;function Zp(s,l){if(s=s.containerInfo,Hu=tl,s=Ic(s),ml(s)){if("selectionStart"in s)var ie={start:s.selectionStart,end:s.selectionEnd};else e:{ie=(ie=s.ownerDocument)&&ie.defaultView||window;var fe=ie.getSelection&&ie.getSelection();if(fe&&fe.rangeCount!==0){ie=fe.anchorNode;var me=fe.anchorOffset,ye=fe.focusNode;fe=fe.focusOffset;try{ie.nodeType,ye.nodeType}catch{ie=null;break e}var Ie=0,Fe=-1,Qe=-1,ft=0,St=0,Ot=s,ht=null;t:for(;;){for(var gt;Ot!==ie||me!==0&&Ot.nodeType!==3||(Fe=Ie+me),Ot!==ye||fe!==0&&Ot.nodeType!==3||(Qe=Ie+fe),Ot.nodeType===3&&(Ie+=Ot.nodeValue.length),(gt=Ot.firstChild)!==null;)ht=Ot,Ot=gt;for(;;){if(Ot===s)break t;if(ht===ie&&++ft===me&&(Fe=Ie),ht===ye&&++St===fe&&(Qe=Ie),(gt=Ot.nextSibling)!==null)break;Ot=ht,ht=Ot.parentNode}Ot=gt}ie=Fe===-1||Qe===-1?null:{start:Fe,end:Qe}}else ie=null}ie=ie||{start:0,end:0}}else ie=null;for(qu={focusedElem:s,selectionRange:ie},tl=!1,rr=l;rr!==null;)if(l=rr,s=l.child,(l.subtreeFlags&1028)!==0&&s!==null)s.return=l,rr=s;else for(;rr!==null;){switch(l=rr,ye=l.alternate,s=l.flags,l.tag){case 0:if((s&4)!==0&&(s=l.updateQueue,s=s!==null?s.events:null,s!==null))for(ie=0;ie<s.length;ie++)me=s[ie],me.ref.impl=me.nextImpl;break;case 11:case 15:break;case 1:if((s&1024)!==0&&ye!==null){s=void 0,ie=l,me=ye.memoizedProps,ye=ye.memoizedState,fe=ie.stateNode;try{var Lt=ys(ie.type,me);s=fe.getSnapshotBeforeUpdate(Lt,ye),fe.__reactInternalSnapshotBeforeUpdate=s}catch(Wt){Nn(ie,ie.return,Wt)}}break;case 3:if((s&1024)!==0){if(s=l.stateNode.containerInfo,ie=s.nodeType,ie===9)Xu(s);else if(ie===1)switch(s.nodeName){case"HEAD":case"HTML":case"BODY":Xu(s);break;default:s.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((s&1024)!==0)throw Error(r(163))}if(s=l.sibling,s!==null){s.return=l.return,rr=s;break}rr=l.return}}function vf(s,l,ie){var fe=ie.flags;switch(ie.tag){case 0:case 11:case 15:bi(s,ie),fe&4&&Bo(5,ie);break;case 1:if(bi(s,ie),fe&4)if(s=ie.stateNode,l===null)try{s.componentDidMount()}catch(Ie){Nn(ie,ie.return,Ie)}else{var me=ys(ie.type,l.memoizedProps);l=l.memoizedState;try{s.componentDidUpdate(me,l,s.__reactInternalSnapshotBeforeUpdate)}catch(Ie){Nn(ie,ie.return,Ie)}}fe&64&&pf(ie),fe&512&&jo(ie,ie.return);break;case 3:if(bi(s,ie),fe&64&&(s=ie.updateQueue,s!==null)){if(l=null,ie.child!==null)switch(ie.child.tag){case 27:case 5:l=ie.child.stateNode;break;case 1:l=ie.child.stateNode}try{td(s,l)}catch(Ie){Nn(ie,ie.return,Ie)}}break;case 27:l===null&&fe&4&&bf(ie);case 26:case 5:bi(s,ie),l===null&&fe&4&&gf(ie),fe&512&&jo(ie,ie.return);break;case 12:bi(s,ie);break;case 31:bi(s,ie),fe&4&&Ef(s,ie);break;case 13:bi(s,ie),fe&4&&Sf(s,ie),fe&64&&(s=ie.memoizedState,s!==null&&(s=s.dehydrated,s!==null&&(ie=am.bind(null,ie),Im(s,ie))));break;case 22:if(fe=ie.memoizedState!==null||yi,!fe){l=l!==null&&l.memoizedState!==null||Qn,me=yi;var ye=Qn;yi=fe,(Qn=l)&&!ye?xi(s,ie,(ie.subtreeFlags&8772)!==0):bi(s,ie),yi=me,Qn=ye}break;case 30:break;default:bi(s,ie)}}function wf(s){var l=s.alternate;l!==null&&(s.alternate=null,wf(l)),s.child=null,s.deletions=null,s.sibling=null,s.tag===5&&(l=s.stateNode,l!==null&&kt(l)),s.stateNode=null,s.return=null,s.dependencies=null,s.memoizedProps=null,s.memoizedState=null,s.pendingProps=null,s.stateNode=null,s.updateQueue=null}var jn=null,mr=!1;function _i(s,l,ie){for(ie=ie.child;ie!==null;)Tf(s,l,ie),ie=ie.sibling}function Tf(s,l,ie){if(It&&typeof It.onCommitFiberUnmount=="function")try{It.onCommitFiberUnmount(Et,ie)}catch{}switch(ie.tag){case 26:Qn||Kr(ie,l),_i(s,l,ie),ie.memoizedState?ie.memoizedState.count--:ie.stateNode&&(ie=ie.stateNode,ie.parentNode.removeChild(ie));break;case 27:Qn||Kr(ie,l);var fe=jn,me=mr;Xi(ie.type)&&(jn=ie.stateNode,mr=!1),_i(s,l,ie),Wo(ie.stateNode),jn=fe,mr=me;break;case 5:Qn||Kr(ie,l);case 6:if(fe=jn,me=mr,jn=null,_i(s,l,ie),jn=fe,mr=me,jn!==null)if(mr)try{(jn.nodeType===9?jn.body:jn.nodeName==="HTML"?jn.ownerDocument.body:jn).removeChild(ie.stateNode)}catch(ye){Nn(ie,l,ye)}else try{jn.removeChild(ie.stateNode)}catch(ye){Nn(ie,l,ye)}break;case 18:jn!==null&&(mr?(s=jn,gh(s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s,ie.stateNode),so(s)):gh(jn,ie.stateNode));break;case 4:fe=jn,me=mr,jn=ie.stateNode.containerInfo,mr=!0,_i(s,l,ie),jn=fe,mr=me;break;case 0:case 11:case 14:case 15:zi(2,ie,l),Qn||zi(4,ie,l),_i(s,l,ie);break;case 1:Qn||(Kr(ie,l),fe=ie.stateNode,typeof fe.componentWillUnmount=="function"&&mf(ie,l,fe)),_i(s,l,ie);break;case 21:_i(s,l,ie);break;case 22:Qn=(fe=Qn)||ie.memoizedState!==null,_i(s,l,ie),Qn=fe;break;default:_i(s,l,ie)}}function Ef(s,l){if(l.memoizedState===null&&(s=l.alternate,s!==null&&(s=s.memoizedState,s!==null))){s=s.dehydrated;try{so(s)}catch(ie){Nn(l,l.return,ie)}}}function Sf(s,l){if(l.memoizedState===null&&(s=l.alternate,s!==null&&(s=s.memoizedState,s!==null&&(s=s.dehydrated,s!==null))))try{so(s)}catch(ie){Nn(l,l.return,ie)}}function Jp(s){switch(s.tag){case 31:case 13:case 19:var l=s.stateNode;return l===null&&(l=s.stateNode=new xf),l;case 22:return s=s.stateNode,l=s._retryCache,l===null&&(l=s._retryCache=new xf),l;default:throw Error(r(435,s.tag))}}function La(s,l){var ie=Jp(s);l.forEach(function(fe){if(!ie.has(fe)){ie.add(fe);var me=lm.bind(null,s,fe);fe.then(me,me)}})}function gr(s,l){var ie=l.deletions;if(ie!==null)for(var fe=0;fe<ie.length;fe++){var me=ie[fe],ye=s,Ie=l,Fe=Ie;e:for(;Fe!==null;){switch(Fe.tag){case 27:if(Xi(Fe.type)){jn=Fe.stateNode,mr=!1;break e}break;case 5:jn=Fe.stateNode,mr=!1;break e;case 3:case 4:jn=Fe.stateNode.containerInfo,mr=!0;break e}Fe=Fe.return}if(jn===null)throw Error(r(160));Tf(ye,Ie,me),jn=null,mr=!1,ye=me.alternate,ye!==null&&(ye.return=null),me.return=null}if(l.subtreeFlags&13886)for(l=l.child;l!==null;)Af(l,s),l=l.sibling}var Gr=null;function Af(s,l){var ie=s.alternate,fe=s.flags;switch(s.tag){case 0:case 11:case 14:case 15:gr(l,s),yr(s),fe&4&&(zi(3,s,s.return),Bo(3,s),zi(5,s,s.return));break;case 1:gr(l,s),yr(s),fe&512&&(Qn||ie===null||Kr(ie,ie.return)),fe&64&&yi&&(s=s.updateQueue,s!==null&&(fe=s.callbacks,fe!==null&&(ie=s.shared.hiddenCallbacks,s.shared.hiddenCallbacks=ie===null?fe:ie.concat(fe))));break;case 26:var me=Gr;if(gr(l,s),yr(s),fe&512&&(Qn||ie===null||Kr(ie,ie.return)),fe&4){var ye=ie!==null?ie.memoizedState:null;if(fe=s.memoizedState,ie===null)if(fe===null)if(s.stateNode===null){e:{fe=s.type,ie=s.memoizedProps,me=me.ownerDocument||me;t:switch(fe){case"title":ye=me.getElementsByTagName("title")[0],(!ye||ye[Nt]||ye[$n]||ye.namespaceURI==="http://www.w3.org/2000/svg"||ye.hasAttribute("itemprop"))&&(ye=me.createElement(fe),me.head.insertBefore(ye,me.querySelector("head > title"))),ar(ye,fe,ie),ye[$n]=s,hn(ye),fe=ye;break e;case"link":var Ie=Ih("link","href",me).get(fe+(ie.href||""));if(Ie){for(var Fe=0;Fe<Ie.length;Fe++)if(ye=Ie[Fe],ye.getAttribute("href")===(ie.href==null||ie.href===""?null:ie.href)&&ye.getAttribute("rel")===(ie.rel==null?null:ie.rel)&&ye.getAttribute("title")===(ie.title==null?null:ie.title)&&ye.getAttribute("crossorigin")===(ie.crossOrigin==null?null:ie.crossOrigin)){Ie.splice(Fe,1);break t}}ye=me.createElement(fe),ar(ye,fe,ie),me.head.appendChild(ye);break;case"meta":if(Ie=Ih("meta","content",me).get(fe+(ie.content||""))){for(Fe=0;Fe<Ie.length;Fe++)if(ye=Ie[Fe],ye.getAttribute("content")===(ie.content==null?null:""+ie.content)&&ye.getAttribute("name")===(ie.name==null?null:ie.name)&&ye.getAttribute("property")===(ie.property==null?null:ie.property)&&ye.getAttribute("http-equiv")===(ie.httpEquiv==null?null:ie.httpEquiv)&&ye.getAttribute("charset")===(ie.charSet==null?null:ie.charSet)){Ie.splice(Fe,1);break t}}ye=me.createElement(fe),ar(ye,fe,ie),me.head.appendChild(ye);break;default:throw Error(r(468,fe))}ye[$n]=s,hn(ye),fe=ye}s.stateNode=fe}else Mh(me,s.type,s.stateNode);else s.stateNode=Oh(me,fe,s.memoizedProps);else ye!==fe?(ye===null?ie.stateNode!==null&&(ie=ie.stateNode,ie.parentNode.removeChild(ie)):ye.count--,fe===null?Mh(me,s.type,s.stateNode):Oh(me,fe,s.memoizedProps)):fe===null&&s.stateNode!==null&&vu(s,s.memoizedProps,ie.memoizedProps)}break;case 27:gr(l,s),yr(s),fe&512&&(Qn||ie===null||Kr(ie,ie.return)),ie!==null&&fe&4&&vu(s,s.memoizedProps,ie.memoizedProps);break;case 5:if(gr(l,s),yr(s),fe&512&&(Qn||ie===null||Kr(ie,ie.return)),s.flags&32){me=s.stateNode;try{ii(me,"")}catch(Lt){Nn(s,s.return,Lt)}}fe&4&&s.stateNode!=null&&(me=s.memoizedProps,vu(s,me,ie!==null?ie.memoizedProps:me)),fe&1024&&(Eu=!0);break;case 6:if(gr(l,s),yr(s),fe&4){if(s.stateNode===null)throw Error(r(162));fe=s.memoizedProps,ie=s.stateNode;try{ie.nodeValue=fe}catch(Lt){Nn(s,s.return,Lt)}}break;case 3:if(Qa=null,me=Gr,Gr=Xa(l.containerInfo),gr(l,s),Gr=me,yr(s),fe&4&&ie!==null&&ie.memoizedState.isDehydrated)try{so(l.containerInfo)}catch(Lt){Nn(s,s.return,Lt)}Eu&&(Eu=!1,Of(s));break;case 4:fe=Gr,Gr=Xa(s.stateNode.containerInfo),gr(l,s),yr(s),Gr=fe;break;case 12:gr(l,s),yr(s);break;case 31:gr(l,s),yr(s),fe&4&&(fe=s.updateQueue,fe!==null&&(s.updateQueue=null,La(s,fe)));break;case 13:gr(l,s),yr(s),s.child.flags&8192&&s.memoizedState!==null!=(ie!==null&&ie.memoizedState!==null)&&(Fa=wn()),fe&4&&(fe=s.updateQueue,fe!==null&&(s.updateQueue=null,La(s,fe)));break;case 22:me=s.memoizedState!==null;var Qe=ie!==null&&ie.memoizedState!==null,ft=yi,St=Qn;if(yi=ft||me,Qn=St||Qe,gr(l,s),Qn=St,yi=ft,yr(s),fe&8192)e:for(l=s.stateNode,l._visibility=me?l._visibility&-2:l._visibility|1,me&&(ie===null||Qe||yi||Qn||bs(s)),ie=null,l=s;;){if(l.tag===5||l.tag===26){if(ie===null){Qe=ie=l;try{if(ye=Qe.stateNode,me)Ie=ye.style,typeof Ie.setProperty=="function"?Ie.setProperty("display","none","important"):Ie.display="none";else{Fe=Qe.stateNode;var Ot=Qe.memoizedProps.style,ht=Ot!=null&&Ot.hasOwnProperty("display")?Ot.display:null;Fe.style.display=ht==null||typeof ht=="boolean"?"":(""+ht).trim()}}catch(Lt){Nn(Qe,Qe.return,Lt)}}}else if(l.tag===6){if(ie===null){Qe=l;try{Qe.stateNode.nodeValue=me?"":Qe.memoizedProps}catch(Lt){Nn(Qe,Qe.return,Lt)}}}else if(l.tag===18){if(ie===null){Qe=l;try{var gt=Qe.stateNode;me?yh(gt,!0):yh(Qe.stateNode,!1)}catch(Lt){Nn(Qe,Qe.return,Lt)}}}else if((l.tag!==22&&l.tag!==23||l.memoizedState===null||l===s)&&l.child!==null){l.child.return=l,l=l.child;continue}if(l===s)break e;for(;l.sibling===null;){if(l.return===null||l.return===s)break e;ie===l&&(ie=null),l=l.return}ie===l&&(ie=null),l.sibling.return=l.return,l=l.sibling}fe&4&&(fe=s.updateQueue,fe!==null&&(ie=fe.retryQueue,ie!==null&&(fe.retryQueue=null,La(s,ie))));break;case 19:gr(l,s),yr(s),fe&4&&(fe=s.updateQueue,fe!==null&&(s.updateQueue=null,La(s,fe)));break;case 30:break;case 21:break;default:gr(l,s),yr(s)}}function yr(s){var l=s.flags;if(l&2){try{for(var ie,fe=s.return;fe!==null;){if(yf(fe)){ie=fe;break}fe=fe.return}if(ie==null)throw Error(r(160));switch(ie.tag){case 27:var me=ie.stateNode,ye=wu(s);Pa(s,ye,me);break;case 5:var Ie=ie.stateNode;ie.flags&32&&(ii(Ie,""),ie.flags&=-33);var Fe=wu(s);Pa(s,Fe,Ie);break;case 3:case 4:var Qe=ie.stateNode.containerInfo,ft=wu(s);Tu(s,ft,Qe);break;default:throw Error(r(161))}}catch(St){Nn(s,s.return,St)}s.flags&=-3}l&4096&&(s.flags&=-4097)}function Of(s){if(s.subtreeFlags&1024)for(s=s.child;s!==null;){var l=s;Of(l),l.tag===5&&l.flags&1024&&l.stateNode.reset(),s=s.sibling}}function bi(s,l){if(l.subtreeFlags&8772)for(l=l.child;l!==null;)vf(s,l.alternate,l),l=l.sibling}function bs(s){for(s=s.child;s!==null;){var l=s;switch(l.tag){case 0:case 11:case 14:case 15:zi(4,l,l.return),bs(l);break;case 1:Kr(l,l.return);var ie=l.stateNode;typeof ie.componentWillUnmount=="function"&&mf(l,l.return,ie),bs(l);break;case 27:Wo(l.stateNode);case 26:case 5:Kr(l,l.return),bs(l);break;case 22:l.memoizedState===null&&bs(l);break;case 30:bs(l);break;default:bs(l)}s=s.sibling}}function xi(s,l,ie){for(ie=ie&&(l.subtreeFlags&8772)!==0,l=l.child;l!==null;){var fe=l.alternate,me=s,ye=l,Ie=ye.flags;switch(ye.tag){case 0:case 11:case 15:xi(me,ye,ie),Bo(4,ye);break;case 1:if(xi(me,ye,ie),fe=ye,me=fe.stateNode,typeof me.componentDidMount=="function")try{me.componentDidMount()}catch(ft){Nn(fe,fe.return,ft)}if(fe=ye,me=fe.updateQueue,me!==null){var Fe=fe.stateNode;try{var Qe=me.shared.hiddenCallbacks;if(Qe!==null)for(me.shared.hiddenCallbacks=null,me=0;me<Qe.length;me++)ed(Qe[me],Fe)}catch(ft){Nn(fe,fe.return,ft)}}ie&&Ie&64&&pf(ye),jo(ye,ye.return);break;case 27:bf(ye);case 26:case 5:xi(me,ye,ie),ie&&fe===null&&Ie&4&&gf(ye),jo(ye,ye.return);break;case 12:xi(me,ye,ie);break;case 31:xi(me,ye,ie),ie&&Ie&4&&Ef(me,ye);break;case 13:xi(me,ye,ie),ie&&Ie&4&&Sf(me,ye);break;case 22:ye.memoizedState===null&&xi(me,ye,ie),jo(ye,ye.return);break;case 30:break;default:xi(me,ye,ie)}l=l.sibling}}function Su(s,l){var ie=null;s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(ie=s.memoizedState.cachePool.pool),s=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(s=l.memoizedState.cachePool.pool),s!==ie&&(s!=null&&s.refCount++,ie!=null&&So(ie))}function Au(s,l){s=null,l.alternate!==null&&(s=l.alternate.memoizedState.cache),l=l.memoizedState.cache,l!==s&&(l.refCount++,s!=null&&So(s))}function Hr(s,l,ie,fe){if(l.subtreeFlags&10256)for(l=l.child;l!==null;)Mf(s,l,ie,fe),l=l.sibling}function Mf(s,l,ie,fe){var me=l.flags;switch(l.tag){case 0:case 11:case 15:Hr(s,l,ie,fe),me&2048&&Bo(9,l);break;case 1:Hr(s,l,ie,fe);break;case 3:Hr(s,l,ie,fe),me&2048&&(s=null,l.alternate!==null&&(s=l.alternate.memoizedState.cache),l=l.memoizedState.cache,l!==s&&(l.refCount++,s!=null&&So(s)));break;case 12:if(me&2048){Hr(s,l,ie,fe),s=l.stateNode;try{var ye=l.memoizedProps,Ie=ye.id,Fe=ye.onPostCommit;typeof Fe=="function"&&Fe(Ie,l.alternate===null?"mount":"update",s.passiveEffectDuration,-0)}catch(Qe){Nn(l,l.return,Qe)}}else Hr(s,l,ie,fe);break;case 31:Hr(s,l,ie,fe);break;case 13:Hr(s,l,ie,fe);break;case 23:break;case 22:ye=l.stateNode,Ie=l.alternate,l.memoizedState!==null?ye._visibility&2?Hr(s,l,ie,fe):$o(s,l):ye._visibility&2?Hr(s,l,ie,fe):(ye._visibility|=2,Ws(s,l,ie,fe,(l.subtreeFlags&10256)!==0||!1)),me&2048&&Su(Ie,l);break;case 24:Hr(s,l,ie,fe),me&2048&&Au(l.alternate,l);break;default:Hr(s,l,ie,fe)}}function Ws(s,l,ie,fe,me){for(me=me&&((l.subtreeFlags&10256)!==0||!1),l=l.child;l!==null;){var ye=s,Ie=l,Fe=ie,Qe=fe,ft=Ie.flags;switch(Ie.tag){case 0:case 11:case 15:Ws(ye,Ie,Fe,Qe,me),Bo(8,Ie);break;case 23:break;case 22:var St=Ie.stateNode;Ie.memoizedState!==null?St._visibility&2?Ws(ye,Ie,Fe,Qe,me):$o(ye,Ie):(St._visibility|=2,Ws(ye,Ie,Fe,Qe,me)),me&&ft&2048&&Su(Ie.alternate,Ie);break;case 24:Ws(ye,Ie,Fe,Qe,me),me&&ft&2048&&Au(Ie.alternate,Ie);break;default:Ws(ye,Ie,Fe,Qe,me)}l=l.sibling}}function $o(s,l){if(l.subtreeFlags&10256)for(l=l.child;l!==null;){var ie=s,fe=l,me=fe.flags;switch(fe.tag){case 22:$o(ie,fe),me&2048&&Su(fe.alternate,fe);break;case 24:$o(ie,fe),me&2048&&Au(fe.alternate,fe);break;default:$o(ie,fe)}l=l.sibling}}var Uo=8192;function Xs(s,l,ie){if(s.subtreeFlags&Uo)for(s=s.child;s!==null;)Nf(s,l,ie),s=s.sibling}function Nf(s,l,ie){switch(s.tag){case 26:Xs(s,l,ie),s.flags&Uo&&s.memoizedState!==null&&$m(ie,Gr,s.memoizedState,s.memoizedProps);break;case 5:Xs(s,l,ie);break;case 3:case 4:var fe=Gr;Gr=Xa(s.stateNode.containerInfo),Xs(s,l,ie),Gr=fe;break;case 22:s.memoizedState===null&&(fe=s.alternate,fe!==null&&fe.memoizedState!==null?(fe=Uo,Uo=16777216,Xs(s,l,ie),Uo=fe):Xs(s,l,ie));break;default:Xs(s,l,ie)}}function Rf(s){var l=s.alternate;if(l!==null&&(s=l.child,s!==null)){l.child=null;do l=s.sibling,s.sibling=null,s=l;while(s!==null)}}function zo(s){var l=s.deletions;if((s.flags&16)!==0){if(l!==null)for(var ie=0;ie<l.length;ie++){var fe=l[ie];rr=fe,Cf(fe,s)}Rf(s)}if(s.subtreeFlags&10256)for(s=s.child;s!==null;)Df(s),s=s.sibling}function Df(s){switch(s.tag){case 0:case 11:case 15:zo(s),s.flags&2048&&zi(9,s,s.return);break;case 3:zo(s);break;case 12:zo(s);break;case 22:var l=s.stateNode;s.memoizedState!==null&&l._visibility&2&&(s.return===null||s.return.tag!==13)?(l._visibility&=-3,ka(s)):zo(s);break;default:zo(s)}}function ka(s){var l=s.deletions;if((s.flags&16)!==0){if(l!==null)for(var ie=0;ie<l.length;ie++){var fe=l[ie];rr=fe,Cf(fe,s)}Rf(s)}for(s=s.child;s!==null;){switch(l=s,l.tag){case 0:case 11:case 15:zi(8,l,l.return),ka(l);break;case 22:ie=l.stateNode,ie._visibility&2&&(ie._visibility&=-3,ka(l));break;default:ka(l)}s=s.sibling}}function Cf(s,l){for(;rr!==null;){var ie=rr;switch(ie.tag){case 0:case 11:case 15:zi(8,ie,l);break;case 23:case 22:if(ie.memoizedState!==null&&ie.memoizedState.cachePool!==null){var fe=ie.memoizedState.cachePool.pool;fe!=null&&fe.refCount++}break;case 24:So(ie.memoizedState.cache)}if(fe=ie.child,fe!==null)fe.return=ie,rr=fe;else e:for(ie=s;rr!==null;){fe=rr;var me=fe.sibling,ye=fe.return;if(wf(fe),fe===ie){rr=null;break e}if(me!==null){me.return=ye,rr=me;break e}rr=ye}}}var em={getCacheForType:function(s){var l=sr(Wn),ie=l.data.get(s);return ie===void 0&&(ie=s(),l.data.set(s,ie)),ie},cacheSignal:function(){return sr(Wn).controller.signal}},tm=typeof WeakMap=="function"?WeakMap:Map,An=0,Ln=null,pn=null,gn=0,Mn=0,Sr=null,Vi=!1,Ks=!1,Ou=!1,vi=0,zn=0,Gi=0,xs=0,Iu=0,Ar=0,Qs=0,Vo=null,br=null,Mu=!1,Fa=0,Pf=0,Ba=1/0,ja=null,Hi=null,tr=0,qi=null,Zs=null,wi=0,Nu=0,Ru=null,Lf=null,Go=0,Du=null;function Or(){return(An&2)!==0&&gn!==0?gn&-gn:Me.T!==null?Bu():Ii()}function kf(){if(Ar===0)if((gn&536870912)===0||bn){var s=qr;qr<<=1,(qr&3932160)===0&&(qr=262144),Ar=s}else Ar=536870912;return s=Tr.current,s!==null&&(s.flags|=32),Ar}function xr(s,l,ie){(s===Ln&&(Mn===2||Mn===9)||s.cancelPendingCommit!==null)&&(Js(s,0),Yi(s,gn,Ar,!1)),Ur(s,ie),((An&2)===0||s!==Ln)&&(s===Ln&&((An&2)===0&&(xs|=ie),zn===4&&Yi(s,gn,Ar,!1)),Qr(s))}function Ff(s,l,ie){if((An&6)!==0)throw Error(r(327));var fe=!ie&&(l&127)===0&&(l&s.expiredLanes)===0||Yt(s,l),me=fe?im(s,l):Pu(s,l,!0),ye=fe;do{if(me===0){Ks&&!fe&&Yi(s,l,0,!1);break}else{if(ie=s.current.alternate,ye&&!nm(ie)){me=Pu(s,l,!1),ye=!1;continue}if(me===2){if(ye=l,s.errorRecoveryDisabledLanes&ye)var Ie=0;else Ie=s.pendingLanes&-536870913,Ie=Ie!==0?Ie:Ie&536870912?536870912:0;if(Ie!==0){l=Ie;e:{var Fe=s;me=Vo;var Qe=Fe.current.memoizedState.isDehydrated;if(Qe&&(Js(Fe,Ie).flags|=256),Ie=Pu(Fe,Ie,!1),Ie!==2){if(Ou&&!Qe){Fe.errorRecoveryDisabledLanes|=ye,xs|=ye,me=4;break e}ye=br,br=me,ye!==null&&(br===null?br=ye:br.push.apply(br,ye))}me=Ie}if(ye=!1,me!==2)continue}}if(me===1){Js(s,0),Yi(s,l,0,!0);break}e:{switch(fe=s,ye=me,ye){case 0:case 1:throw Error(r(345));case 4:if((l&4194048)!==l)break;case 6:Yi(fe,l,Ar,!Vi);break e;case 2:br=null;break;case 3:case 5:break;default:throw Error(r(329))}if((l&62914560)===l&&(me=Fa+300-wn(),10<me)){if(Yi(fe,l,Ar,!Vi),Ht(fe,0,!0)!==0)break e;wi=l,fe.timeoutHandle=ph(Bf.bind(null,fe,ie,br,ja,Mu,l,Ar,xs,Qs,Vi,ye,"Throttled",-0,0),me);break e}Bf(fe,ie,br,ja,Mu,l,Ar,xs,Qs,Vi,ye,null,-0,0)}}break}while(!0);Qr(s)}function Bf(s,l,ie,fe,me,ye,Ie,Fe,Qe,ft,St,Ot,ht,gt){if(s.timeoutHandle=-1,Ot=l.subtreeFlags,Ot&8192||(Ot&16785408)===16785408){Ot={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Rr},Nf(l,ye,Ot);var Lt=(ye&62914560)===ye?Fa-wn():(ye&4194048)===ye?Pf-wn():0;if(Lt=Um(Ot,Lt),Lt!==null){wi=ye,s.cancelPendingCommit=Lt(qf.bind(null,s,l,ye,ie,fe,me,Ie,Fe,Qe,St,Ot,null,ht,gt)),Yi(s,ye,Ie,!ft);return}}qf(s,l,ye,ie,fe,me,Ie,Fe,Qe)}function nm(s){for(var l=s;;){var ie=l.tag;if((ie===0||ie===11||ie===15)&&l.flags&16384&&(ie=l.updateQueue,ie!==null&&(ie=ie.stores,ie!==null)))for(var fe=0;fe<ie.length;fe++){var me=ie[fe],ye=me.getSnapshot;me=me.value;try{if(!vr(ye(),me))return!1}catch{return!1}}if(ie=l.child,l.subtreeFlags&16384&&ie!==null)ie.return=l,l=ie;else{if(l===s)break;for(;l.sibling===null;){if(l.return===null||l.return===s)return!0;l=l.return}l.sibling.return=l.return,l=l.sibling}}return!0}function Yi(s,l,ie,fe){l&=~Iu,l&=~xs,s.suspendedLanes|=l,s.pingedLanes&=~l,fe&&(s.warmLanes|=l),fe=s.expirationTimes;for(var me=l;0<me;){var ye=31-en(me),Ie=1<<ye;fe[ye]=-1,me&=~Ie}ie!==0&&Si(s,ie,l)}function $a(){return(An&6)===0?(Ho(0),!1):!0}function Cu(){if(pn!==null){if(Mn===0)var s=pn.return;else s=pn,di=cs=null,Wl(s),Vs=null,Oo=0,s=pn;for(;s!==null;)hf(s.alternate,s),s=s.return;pn=null}}function Js(s,l){var ie=s.timeoutHandle;ie!==-1&&(s.timeoutHandle=-1,Tm(ie)),ie=s.cancelPendingCommit,ie!==null&&(s.cancelPendingCommit=null,ie()),wi=0,Cu(),Ln=s,pn=ie=ui(s.current,null),gn=l,Mn=0,Sr=null,Vi=!1,Ks=Yt(s,l),Ou=!1,Qs=Ar=Iu=xs=Gi=zn=0,br=Vo=null,Mu=!1,(l&8)!==0&&(l|=l&32);var fe=s.entangledLanes;if(fe!==0)for(s=s.entanglements,fe&=l;0<fe;){var me=31-en(fe),ye=1<<me;l|=s[me],fe&=~ye}return vi=l,oa(),ie}function jf(s,l){rn=null,Me.H=Lo,l===zs||l===pa?(l=Kc(),Mn=3):l===kl?(l=Kc(),Mn=4):Mn=l===cu?8:l!==null&&typeof l=="object"&&typeof l.then=="function"?6:1,Sr=l,pn===null&&(zn=1,Ma(s,Pr(l,s.current)))}function $f(){var s=Tr.current;return s===null?!0:(gn&4194048)===gn?Br===null:(gn&62914560)===gn||(gn&536870912)!==0?s===Br:!1}function Uf(){var s=Me.H;return Me.H=Lo,s===null?Lo:s}function zf(){var s=Me.A;return Me.A=em,s}function Ua(){zn=4,Vi||(gn&4194048)!==gn&&Tr.current!==null||(Ks=!0),(Gi&134217727)===0&&(xs&134217727)===0||Ln===null||Yi(Ln,gn,Ar,!1)}function Pu(s,l,ie){var fe=An;An|=2;var me=Uf(),ye=zf();(Ln!==s||gn!==l)&&(ja=null,Js(s,l)),l=!1;var Ie=zn;e:do try{if(Mn!==0&&pn!==null){var Fe=pn,Qe=Sr;switch(Mn){case 8:Cu(),Ie=6;break e;case 3:case 2:case 9:case 6:Tr.current===null&&(l=!0);var ft=Mn;if(Mn=0,Sr=null,eo(s,Fe,Qe,ft),ie&&Ks){Ie=0;break e}break;default:ft=Mn,Mn=0,Sr=null,eo(s,Fe,Qe,ft)}}rm(),Ie=zn;break}catch(St){jf(s,St)}while(!0);return l&&s.shellSuspendCounter++,di=cs=null,An=fe,Me.H=me,Me.A=ye,pn===null&&(Ln=null,gn=0,oa()),Ie}function rm(){for(;pn!==null;)Vf(pn)}function im(s,l){var ie=An;An|=2;var fe=Uf(),me=zf();Ln!==s||gn!==l?(ja=null,Ba=wn()+500,Js(s,l)):Ks=Yt(s,l);e:do try{if(Mn!==0&&pn!==null){l=pn;var ye=Sr;t:switch(Mn){case 1:Mn=0,Sr=null,eo(s,l,ye,1);break;case 2:case 9:if(Wc(ye)){Mn=0,Sr=null,Gf(l);break}l=function(){Mn!==2&&Mn!==9||Ln!==s||(Mn=7),Qr(s)},ye.then(l,l);break e;case 3:Mn=7;break e;case 4:Mn=5;break e;case 7:Wc(ye)?(Mn=0,Sr=null,Gf(l)):(Mn=0,Sr=null,eo(s,l,ye,7));break;case 5:var Ie=null;switch(pn.tag){case 26:Ie=pn.memoizedState;case 5:case 27:var Fe=pn;if(Ie?Nh(Ie):Fe.stateNode.complete){Mn=0,Sr=null;var Qe=Fe.sibling;if(Qe!==null)pn=Qe;else{var ft=Fe.return;ft!==null?(pn=ft,za(ft)):pn=null}break t}}Mn=0,Sr=null,eo(s,l,ye,5);break;case 6:Mn=0,Sr=null,eo(s,l,ye,6);break;case 8:Cu(),zn=6;break e;default:throw Error(r(462))}}sm();break}catch(St){jf(s,St)}while(!0);return di=cs=null,Me.H=fe,Me.A=me,An=ie,pn!==null?0:(Ln=null,gn=0,oa(),zn)}function sm(){for(;pn!==null&&!Ut();)Vf(pn)}function Vf(s){var l=df(s.alternate,s,vi);s.memoizedProps=s.pendingProps,l===null?za(s):pn=l}function Gf(s){var l=s,ie=l.alternate;switch(l.tag){case 15:case 0:l=sf(ie,l,l.pendingProps,l.type,void 0,gn);break;case 11:l=sf(ie,l,l.pendingProps,l.type.render,l.ref,gn);break;case 5:Wl(l);default:hf(ie,l),l=pn=Fc(l,vi),l=df(ie,l,vi)}s.memoizedProps=s.pendingProps,l===null?za(s):pn=l}function eo(s,l,ie,fe){di=cs=null,Wl(l),Vs=null,Oo=0;var me=l.return;try{if(Yp(s,me,l,ie,gn)){zn=1,Ma(s,Pr(ie,s.current)),pn=null;return}}catch(ye){if(me!==null)throw pn=me,ye;zn=1,Ma(s,Pr(ie,s.current)),pn=null;return}l.flags&32768?(bn||fe===1?s=!0:Ks||(gn&536870912)!==0?s=!1:(Vi=s=!0,(fe===2||fe===9||fe===3||fe===6)&&(fe=Tr.current,fe!==null&&fe.tag===13&&(fe.flags|=16384))),Hf(l,s)):za(l)}function za(s){var l=s;do{if((l.flags&32768)!==0){Hf(l,Vi);return}s=l.return;var ie=Kp(l.alternate,l,vi);if(ie!==null){pn=ie;return}if(l=l.sibling,l!==null){pn=l;return}pn=l=s}while(l!==null);zn===0&&(zn=5)}function Hf(s,l){do{var ie=Qp(s.alternate,s);if(ie!==null){ie.flags&=32767,pn=ie;return}if(ie=s.return,ie!==null&&(ie.flags|=32768,ie.subtreeFlags=0,ie.deletions=null),!l&&(s=s.sibling,s!==null)){pn=s;return}pn=s=ie}while(s!==null);zn=6,pn=null}function qf(s,l,ie,fe,me,ye,Ie,Fe,Qe){s.cancelPendingCommit=null;do Va();while(tr!==0);if((An&6)!==0)throw Error(r(327));if(l!==null){if(l===s.current)throw Error(r(177));if(ye=l.lanes|l.childLanes,ye|=vl,ns(s,ie,ye,Ie,Fe,Qe),s===Ln&&(pn=Ln=null,gn=0),Zs=l,qi=s,wi=ie,Nu=ye,Ru=me,Lf=fe,(l.subtreeFlags&10256)!==0||(l.flags&10256)!==0?(s.callbackNode=null,s.callbackPriority=0,um(Ee,function(){return Qf(),null})):(s.callbackNode=null,s.callbackPriority=0),fe=(l.flags&13878)!==0,(l.subtreeFlags&13878)!==0||fe){fe=Me.T,Me.T=null,me=je.p,je.p=2,Ie=An,An|=4;try{Zp(s,l,ie)}finally{An=Ie,je.p=me,Me.T=fe}}tr=1,Yf(),Wf(),Xf()}}function Yf(){if(tr===1){tr=0;var s=qi,l=Zs,ie=(l.flags&13878)!==0;if((l.subtreeFlags&13878)!==0||ie){ie=Me.T,Me.T=null;var fe=je.p;je.p=2;var me=An;An|=4;try{Af(l,s);var ye=qu,Ie=Ic(s.containerInfo),Fe=ye.focusedElem,Qe=ye.selectionRange;if(Ie!==Fe&&Fe&&Fe.ownerDocument&&Oc(Fe.ownerDocument.documentElement,Fe)){if(Qe!==null&&ml(Fe)){var ft=Qe.start,St=Qe.end;if(St===void 0&&(St=ft),"selectionStart"in Fe)Fe.selectionStart=ft,Fe.selectionEnd=Math.min(St,Fe.value.length);else{var Ot=Fe.ownerDocument||document,ht=Ot&&Ot.defaultView||window;if(ht.getSelection){var gt=ht.getSelection(),Lt=Fe.textContent.length,Wt=Math.min(Qe.start,Lt),Cn=Qe.end===void 0?Wt:Math.min(Qe.end,Lt);!gt.extend&&Wt>Cn&&(Ie=Cn,Cn=Wt,Wt=Ie);var ot=Ac(Fe,Wt),nt=Ac(Fe,Cn);if(ot&&nt&&(gt.rangeCount!==1||gt.anchorNode!==ot.node||gt.anchorOffset!==ot.offset||gt.focusNode!==nt.node||gt.focusOffset!==nt.offset)){var dt=Ot.createRange();dt.setStart(ot.node,ot.offset),gt.removeAllRanges(),Wt>Cn?(gt.addRange(dt),gt.extend(nt.node,nt.offset)):(dt.setEnd(nt.node,nt.offset),gt.addRange(dt))}}}}for(Ot=[],gt=Fe;gt=gt.parentNode;)gt.nodeType===1&&Ot.push({element:gt,left:gt.scrollLeft,top:gt.scrollTop});for(typeof Fe.focus=="function"&&Fe.focus(),Fe=0;Fe<Ot.length;Fe++){var At=Ot[Fe];At.element.scrollLeft=At.left,At.element.scrollTop=At.top}}tl=!!Hu,qu=Hu=null}finally{An=me,je.p=fe,Me.T=ie}}s.current=l,tr=2}}function Wf(){if(tr===2){tr=0;var s=qi,l=Zs,ie=(l.flags&8772)!==0;if((l.subtreeFlags&8772)!==0||ie){ie=Me.T,Me.T=null;var fe=je.p;je.p=2;var me=An;An|=4;try{vf(s,l.alternate,l)}finally{An=me,je.p=fe,Me.T=ie}}tr=3}}function Xf(){if(tr===4||tr===3){tr=0,sn();var s=qi,l=Zs,ie=wi,fe=Lf;(l.subtreeFlags&10256)!==0||(l.flags&10256)!==0?tr=5:(tr=0,Zs=qi=null,Kf(s,s.pendingLanes));var me=s.pendingLanes;if(me===0&&(Hi=null),ti(ie),l=l.stateNode,It&&typeof It.onCommitFiberRoot=="function")try{It.onCommitFiberRoot(Et,l,void 0,(l.current.flags&128)===128)}catch{}if(fe!==null){l=Me.T,me=je.p,je.p=2,Me.T=null;try{for(var ye=s.onRecoverableError,Ie=0;Ie<fe.length;Ie++){var Fe=fe[Ie];ye(Fe.value,{componentStack:Fe.stack})}}finally{Me.T=l,je.p=me}}(wi&3)!==0&&Va(),Qr(s),me=s.pendingLanes,(ie&261930)!==0&&(me&42)!==0?s===Du?Go++:(Go=0,Du=s):Go=0,Ho(0)}}function Kf(s,l){(s.pooledCacheLanes&=l)===0&&(l=s.pooledCache,l!=null&&(s.pooledCache=null,So(l)))}function Va(){return Yf(),Wf(),Xf(),Qf()}function Qf(){if(tr!==5)return!1;var s=qi,l=Nu;Nu=0;var ie=ti(wi),fe=Me.T,me=je.p;try{je.p=32>ie?32:ie,Me.T=null,ie=Ru,Ru=null;var ye=qi,Ie=wi;if(tr=0,Zs=qi=null,wi=0,(An&6)!==0)throw Error(r(331));var Fe=An;if(An|=4,Df(ye.current),Mf(ye,ye.current,Ie,ie),An=Fe,Ho(0,!1),It&&typeof It.onPostCommitFiberRoot=="function")try{It.onPostCommitFiberRoot(Et,ye)}catch{}return!0}finally{je.p=me,Me.T=fe,Kf(s,l)}}function Zf(s,l,ie){l=Pr(ie,l),l=uu(s.stateNode,l,2),s=ji(s,l,2),s!==null&&(Ur(s,2),Qr(s))}function Nn(s,l,ie){if(s.tag===3)Zf(s,s,ie);else for(;l!==null;){if(l.tag===3){Zf(l,s,ie);break}else if(l.tag===1){var fe=l.stateNode;if(typeof l.type.getDerivedStateFromError=="function"||typeof fe.componentDidCatch=="function"&&(Hi===null||!Hi.has(fe))){s=Pr(ie,s),ie=Kd(2),fe=ji(l,ie,2),fe!==null&&(Qd(ie,fe,l,s),Ur(fe,2),Qr(fe));break}}l=l.return}}function Lu(s,l,ie){var fe=s.pingCache;if(fe===null){fe=s.pingCache=new tm;var me=new Set;fe.set(l,me)}else me=fe.get(l),me===void 0&&(me=new Set,fe.set(l,me));me.has(ie)||(Ou=!0,me.add(ie),s=om.bind(null,s,l,ie),l.then(s,s))}function om(s,l,ie){var fe=s.pingCache;fe!==null&&fe.delete(l),s.pingedLanes|=s.suspendedLanes&ie,s.warmLanes&=~ie,Ln===s&&(gn&ie)===ie&&(zn===4||zn===3&&(gn&62914560)===gn&&300>wn()-Fa?(An&2)===0&&Js(s,0):Iu|=ie,Qs===gn&&(Qs=0)),Qr(s)}function Jf(s,l){l===0&&(l=Yr()),s=as(s,l),s!==null&&(Ur(s,l),Qr(s))}function am(s){var l=s.memoizedState,ie=0;l!==null&&(ie=l.retryLane),Jf(s,ie)}function lm(s,l){var ie=0;switch(s.tag){case 31:case 13:var fe=s.stateNode,me=s.memoizedState;me!==null&&(ie=me.retryLane);break;case 19:fe=s.stateNode;break;case 22:fe=s.stateNode._retryCache;break;default:throw Error(r(314))}fe!==null&&fe.delete(l),Jf(s,ie)}function um(s,l){return $t(s,l)}var Ga=null,to=null,ku=!1,Ha=!1,Fu=!1,Wi=0;function Qr(s){s!==to&&s.next===null&&(to===null?Ga=to=s:to=to.next=s),Ha=!0,ku||(ku=!0,dm())}function Ho(s,l){if(!Fu&&Ha){Fu=!0;do for(var ie=!1,fe=Ga;fe!==null;){if(s!==0){var me=fe.pendingLanes;if(me===0)var ye=0;else{var Ie=fe.suspendedLanes,Fe=fe.pingedLanes;ye=(1<<31-en(42|s)+1)-1,ye&=me&~(Ie&~Fe),ye=ye&201326741?ye&201326741|1:ye?ye|2:0}ye!==0&&(ie=!0,rh(fe,ye))}else ye=gn,ye=Ht(fe,fe===Ln?ye:0,fe.cancelPendingCommit!==null||fe.timeoutHandle!==-1),(ye&3)===0||Yt(fe,ye)||(ie=!0,rh(fe,ye));fe=fe.next}while(ie);Fu=!1}}function cm(){eh()}function eh(){Ha=ku=!1;var s=0;Wi!==0&&wm()&&(s=Wi);for(var l=wn(),ie=null,fe=Ga;fe!==null;){var me=fe.next,ye=th(fe,l);ye===0?(fe.next=null,ie===null?Ga=me:ie.next=me,me===null&&(to=ie)):(ie=fe,(s!==0||(ye&3)!==0)&&(Ha=!0)),fe=me}tr!==0&&tr!==5||Ho(s),Wi!==0&&(Wi=0)}function th(s,l){for(var ie=s.suspendedLanes,fe=s.pingedLanes,me=s.expirationTimes,ye=s.pendingLanes&-62914561;0<ye;){var Ie=31-en(ye),Fe=1<<Ie,Qe=me[Ie];Qe===-1?((Fe&ie)===0||(Fe&fe)!==0)&&(me[Ie]=ts(Fe,l)):Qe<=l&&(s.expiredLanes|=Fe),ye&=~Fe}if(l=Ln,ie=gn,ie=Ht(s,s===l?ie:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),fe=s.callbackNode,ie===0||s===l&&(Mn===2||Mn===9)||s.cancelPendingCommit!==null)return fe!==null&&fe!==null&&Kt(fe),s.callbackNode=null,s.callbackPriority=0;if((ie&3)===0||Yt(s,ie)){if(l=ie&-ie,l===s.callbackPriority)return l;switch(fe!==null&&Kt(fe),ti(ie)){case 2:case 8:ie=Le;break;case 32:ie=Ee;break;case 268435456:ie=ze;break;default:ie=Ee}return fe=nh.bind(null,s),ie=$t(ie,fe),s.callbackPriority=l,s.callbackNode=ie,l}return fe!==null&&fe!==null&&Kt(fe),s.callbackPriority=2,s.callbackNode=null,2}function nh(s,l){if(tr!==0&&tr!==5)return s.callbackNode=null,s.callbackPriority=0,null;var ie=s.callbackNode;if(Va()&&s.callbackNode!==ie)return null;var fe=gn;return fe=Ht(s,s===Ln?fe:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),fe===0?null:(Ff(s,fe,l),th(s,wn()),s.callbackNode!=null&&s.callbackNode===ie?nh.bind(null,s):null)}function rh(s,l){if(Va())return null;Ff(s,l,!0)}function dm(){Em(function(){(An&6)!==0?$t(Zn,cm):eh()})}function Bu(){if(Wi===0){var s=$s;s===0&&(s=Ir,Ir<<=1,(Ir&261888)===0&&(Ir=256)),Wi=s}return Wi}function ih(s){return s==null||typeof s=="symbol"||typeof s=="boolean"?null:typeof s=="function"?s:is(""+s)}function sh(s,l){var ie=l.ownerDocument.createElement("input");return ie.name=l.name,ie.value=l.value,s.id&&ie.setAttribute("form",s.id),l.parentNode.insertBefore(ie,l),s=new FormData(s),ie.parentNode.removeChild(ie),s}function fm(s,l,ie,fe,me){if(l==="submit"&&ie&&ie.stateNode===me){var ye=ih((me[Be]||null).action),Ie=fe.submitter;Ie&&(l=(l=Ie[Be]||null)?ih(l.formAction):Ie.getAttribute("formAction"),l!==null&&(ye=l,Ie=null));var Fe=new Pn("action","action",null,fe,me);s.push({event:Fe,listeners:[{instance:null,listener:function(){if(fe.defaultPrevented){if(Wi!==0){var Qe=Ie?sh(me,Ie):new FormData(me);ru(ie,{pending:!0,data:Qe,method:me.method,action:ye},null,Qe)}}else typeof ye=="function"&&(Fe.preventDefault(),Qe=Ie?sh(me,Ie):new FormData(me),ru(ie,{pending:!0,data:Qe,method:me.method,action:ye},ye,Qe))},currentTarget:me}]})}}for(var ju=0;ju<xl.length;ju++){var $u=xl[ju],hm=$u.toLowerCase(),pm=$u[0].toUpperCase()+$u.slice(1);Vr(hm,"on"+pm)}Vr(Rc,"onAnimationEnd"),Vr(Dc,"onAnimationIteration"),Vr(Cc,"onAnimationStart"),Vr("dblclick","onDoubleClick"),Vr("focusin","onFocus"),Vr("focusout","onBlur"),Vr(Np,"onTransitionRun"),Vr(Rp,"onTransitionStart"),Vr(Dp,"onTransitionCancel"),Vr(Pc,"onTransitionEnd"),Jn("onMouseEnter",["mouseout","mouseover"]),Jn("onMouseLeave",["mouseout","mouseover"]),Jn("onPointerEnter",["pointerout","pointerover"]),Jn("onPointerLeave",["pointerout","pointerover"]),vn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),vn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),vn("onBeforeInput",["compositionend","keypress","textInput","paste"]),vn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),vn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),vn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var qo="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),mm=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(qo));function oh(s,l){l=(l&4)!==0;for(var ie=0;ie<s.length;ie++){var fe=s[ie],me=fe.event;fe=fe.listeners;e:{var ye=void 0;if(l)for(var Ie=fe.length-1;0<=Ie;Ie--){var Fe=fe[Ie],Qe=Fe.instance,ft=Fe.currentTarget;if(Fe=Fe.listener,Qe!==ye&&me.isPropagationStopped())break e;ye=Fe,me.currentTarget=ft;try{ye(me)}catch(St){sa(St)}me.currentTarget=null,ye=Qe}else for(Ie=0;Ie<fe.length;Ie++){if(Fe=fe[Ie],Qe=Fe.instance,ft=Fe.currentTarget,Fe=Fe.listener,Qe!==ye&&me.isPropagationStopped())break e;ye=Fe,me.currentTarget=ft;try{ye(me)}catch(St){sa(St)}me.currentTarget=null,ye=Qe}}}}function mn(s,l){var ie=l[rt];ie===void 0&&(ie=l[rt]=new Set);var fe=s+"__bubble";ie.has(fe)||(ah(l,s,2,!1),ie.add(fe))}function Uu(s,l,ie){var fe=0;l&&(fe|=4),ah(ie,s,fe,l)}var qa="_reactListening"+Math.random().toString(36).slice(2);function zu(s){if(!s[qa]){s[qa]=!0,bt.forEach(function(ie){ie!=="selectionchange"&&(mm.has(ie)||Uu(ie,!1,s),Uu(ie,!0,s))});var l=s.nodeType===9?s:s.ownerDocument;l===null||l[qa]||(l[qa]=!0,Uu("selectionchange",!1,l))}}function ah(s,l,ie,fe){switch(Fh(l)){case 2:var me=Gm;break;case 8:me=Hm;break;default:me=rc}ie=me.bind(null,l,ie,s),me=void 0,!Ns||l!=="touchstart"&&l!=="touchmove"&&l!=="wheel"||(me=!0),fe?me!==void 0?s.addEventListener(l,ie,{capture:!0,passive:me}):s.addEventListener(l,ie,!0):me!==void 0?s.addEventListener(l,ie,{passive:me}):s.addEventListener(l,ie,!1)}function Vu(s,l,ie,fe,me){var ye=fe;if((l&1)===0&&(l&2)===0&&fe!==null)e:for(;;){if(fe===null)return;var Ie=fe.tag;if(Ie===3||Ie===4){var Fe=fe.stateNode.containerInfo;if(Fe===me)break;if(Ie===4)for(Ie=fe.return;Ie!==null;){var Qe=Ie.tag;if((Qe===3||Qe===4)&&Ie.stateNode.containerInfo===me)return;Ie=Ie.return}for(;Fe!==null;){if(Ie=Ct(Fe),Ie===null)return;if(Qe=Ie.tag,Qe===5||Qe===6||Qe===26||Qe===27){fe=ye=Ie;continue e}Fe=Fe.parentNode}}fe=fe.return}go(function(){var ft=ye,St=Is(ie),Ot=[];e:{var ht=Lc.get(s);if(ht!==void 0){var gt=Pn,Lt=s;switch(s){case"keypress":if(mt(ie)===0)break e;case"keydown":case"keyup":gt=ap;break;case"focusin":Lt="focus",gt=cl;break;case"focusout":Lt="blur",gt=cl;break;case"beforeblur":case"afterblur":gt=cl;break;case"click":if(ie.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":gt=li;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":gt=Xh;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":gt=cp;break;case Rc:case Dc:case Cc:gt=Zh;break;case Pc:gt=fp;break;case"scroll":case"scrollend":gt=hr;break;case"wheel":gt=pp;break;case"copy":case"cut":case"paste":gt=ep;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":gt=dc;break;case"toggle":case"beforetoggle":gt=gp}var Wt=(l&4)!==0,Cn=!Wt&&(s==="scroll"||s==="scrollend"),ot=Wt?ht!==null?ht+"Capture":null:ht;Wt=[];for(var nt=ft,dt;nt!==null;){var At=nt;if(dt=At.stateNode,At=At.tag,At!==5&&At!==26&&At!==27||dt===null||ot===null||(At=Di(nt,ot),At!=null&&Wt.push(Yo(nt,At,dt))),Cn)break;nt=nt.return}0<Wt.length&&(ht=new gt(ht,Lt,null,ie,St),Ot.push({event:ht,listeners:Wt}))}}if((l&7)===0){e:{if(ht=s==="mouseover"||s==="pointerover",gt=s==="mouseout"||s==="pointerout",ht&&ie!==Os&&(Lt=ie.relatedTarget||ie.fromElement)&&(Ct(Lt)||Lt[We]))break e;if((gt||ht)&&(ht=St.window===St?St:(ht=St.ownerDocument)?ht.defaultView||ht.parentWindow:window,gt?(Lt=ie.relatedTarget||ie.toElement,gt=ft,Lt=Lt?Ct(Lt):null,Lt!==null&&(Cn=T(Lt),Wt=Lt.tag,Lt!==Cn||Wt!==5&&Wt!==27&&Wt!==6)&&(Lt=null)):(gt=null,Lt=ft),gt!==Lt)){if(Wt=li,At="onMouseLeave",ot="onMouseEnter",nt="mouse",(s==="pointerout"||s==="pointerover")&&(Wt=dc,At="onPointerLeave",ot="onPointerEnter",nt="pointer"),Cn=gt==null?ht:_n(gt),dt=Lt==null?ht:_n(Lt),ht=new Wt(At,nt+"leave",gt,ie,St),ht.target=Cn,ht.relatedTarget=dt,At=null,Ct(St)===ft&&(Wt=new Wt(ot,nt+"enter",Lt,ie,St),Wt.target=dt,Wt.relatedTarget=Cn,At=Wt),Cn=At,gt&&Lt)t:{for(Wt=gm,ot=gt,nt=Lt,dt=0,At=ot;At;At=Wt(At))dt++;At=0;for(var Vt=nt;Vt;Vt=Wt(Vt))At++;for(;0<dt-At;)ot=Wt(ot),dt--;for(;0<At-dt;)nt=Wt(nt),At--;for(;dt--;){if(ot===nt||nt!==null&&ot===nt.alternate){Wt=ot;break t}ot=Wt(ot),nt=Wt(nt)}Wt=null}else Wt=null;gt!==null&&lh(Ot,ht,gt,Wt,!1),Lt!==null&&Cn!==null&&lh(Ot,Cn,Lt,Wt,!0)}}e:{if(ht=ft?_n(ft):window,gt=ht.nodeName&&ht.nodeName.toLowerCase(),gt==="select"||gt==="input"&&ht.type==="file")var Tn=xc;else if(yc(ht))if(vc)Tn=Op;else{Tn=Sp;var Ft=Ep}else gt=ht.nodeName,!gt||gt.toLowerCase()!=="input"||ht.type!=="checkbox"&&ht.type!=="radio"?ft&&Zt(ft.elementType)&&(Tn=xc):Tn=Ap;if(Tn&&(Tn=Tn(s,ft))){bc(Ot,Tn,ie,St);break e}Ft&&Ft(s,ht,ft),s==="focusout"&&ft&&ht.type==="number"&&ft.memoizedProps.value!=null&&Ri(ht,"number",ht.value)}switch(Ft=ft?_n(ft):window,s){case"focusin":(yc(Ft)||Ft.contentEditable==="true")&&(Ds=Ft,gl=ft,wo=null);break;case"focusout":wo=gl=Ds=null;break;case"mousedown":yl=!0;break;case"contextmenu":case"mouseup":case"dragend":yl=!1,Mc(Ot,ie,St);break;case"selectionchange":if(Mp)break;case"keydown":case"keyup":Mc(Ot,ie,St)}var on;if(fl)e:{switch(s){case"compositionstart":var yn="onCompositionStart";break e;case"compositionend":yn="onCompositionEnd";break e;case"compositionupdate":yn="onCompositionUpdate";break e}yn=void 0}else Rs?mc(s,ie)&&(yn="onCompositionEnd"):s==="keydown"&&ie.keyCode===229&&(yn="onCompositionStart");yn&&(fc&&ie.locale!=="ko"&&(Rs||yn!=="onCompositionStart"?yn==="onCompositionEnd"&&Rs&&(on=ut()):(ke=St,Ue="value"in ke?ke.value:ke.textContent,Rs=!0)),Ft=Ya(ft,yn),0<Ft.length&&(yn=new cc(yn,s,null,ie,St),Ot.push({event:yn,listeners:Ft}),on?yn.data=on:(on=gc(ie),on!==null&&(yn.data=on)))),(on=bp?xp(s,ie):vp(s,ie))&&(yn=Ya(ft,"onBeforeInput"),0<yn.length&&(Ft=new cc("onBeforeInput","beforeinput",null,ie,St),Ot.push({event:Ft,listeners:yn}),Ft.data=on)),fm(Ot,s,ft,ie,St)}oh(Ot,l)})}function Yo(s,l,ie){return{instance:s,listener:l,currentTarget:ie}}function Ya(s,l){for(var ie=l+"Capture",fe=[];s!==null;){var me=s,ye=me.stateNode;if(me=me.tag,me!==5&&me!==26&&me!==27||ye===null||(me=Di(s,ie),me!=null&&fe.unshift(Yo(s,me,ye)),me=Di(s,l),me!=null&&fe.push(Yo(s,me,ye))),s.tag===3)return fe;s=s.return}return[]}function gm(s){if(s===null)return null;do s=s.return;while(s&&s.tag!==5&&s.tag!==27);return s||null}function lh(s,l,ie,fe,me){for(var ye=l._reactName,Ie=[];ie!==null&&ie!==fe;){var Fe=ie,Qe=Fe.alternate,ft=Fe.stateNode;if(Fe=Fe.tag,Qe!==null&&Qe===fe)break;Fe!==5&&Fe!==26&&Fe!==27||ft===null||(Qe=ft,me?(ft=Di(ie,ye),ft!=null&&Ie.unshift(Yo(ie,ft,Qe))):me||(ft=Di(ie,ye),ft!=null&&Ie.push(Yo(ie,ft,Qe)))),ie=ie.return}Ie.length!==0&&s.push({event:l,listeners:Ie})}var ym=/\r\n?/g,bm=/\u0000|\uFFFD/g;function uh(s){return(typeof s=="string"?s:""+s).replace(ym,`
`).replace(bm,"")}function ch(s,l){return l=uh(l),uh(s)===l}function Dn(s,l,ie,fe,me,ye){switch(ie){case"children":typeof fe=="string"?l==="body"||l==="textarea"&&fe===""||ii(s,fe):(typeof fe=="number"||typeof fe=="bigint")&&l!=="body"&&ii(s,""+fe);break;case"className":ni(s,"class",fe);break;case"tabIndex":ni(s,"tabindex",fe);break;case"dir":case"role":case"viewBox":case"width":case"height":ni(s,ie,fe);break;case"style":nn(s,fe,ye);break;case"data":if(l!=="object"){ni(s,"data",fe);break}case"src":case"href":if(fe===""&&(l!=="a"||ie!=="href")){s.removeAttribute(ie);break}if(fe==null||typeof fe=="function"||typeof fe=="symbol"||typeof fe=="boolean"){s.removeAttribute(ie);break}fe=is(""+fe),s.setAttribute(ie,fe);break;case"action":case"formAction":if(typeof fe=="function"){s.setAttribute(ie,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof ye=="function"&&(ie==="formAction"?(l!=="input"&&Dn(s,l,"name",me.name,me,null),Dn(s,l,"formEncType",me.formEncType,me,null),Dn(s,l,"formMethod",me.formMethod,me,null),Dn(s,l,"formTarget",me.formTarget,me,null)):(Dn(s,l,"encType",me.encType,me,null),Dn(s,l,"method",me.method,me,null),Dn(s,l,"target",me.target,me,null)));if(fe==null||typeof fe=="symbol"||typeof fe=="boolean"){s.removeAttribute(ie);break}fe=is(""+fe),s.setAttribute(ie,fe);break;case"onClick":fe!=null&&(s.onclick=Rr);break;case"onScroll":fe!=null&&mn("scroll",s);break;case"onScrollEnd":fe!=null&&mn("scrollend",s);break;case"dangerouslySetInnerHTML":if(fe!=null){if(typeof fe!="object"||!("__html"in fe))throw Error(r(61));if(ie=fe.__html,ie!=null){if(me.children!=null)throw Error(r(60));s.innerHTML=ie}}break;case"multiple":s.multiple=fe&&typeof fe!="function"&&typeof fe!="symbol";break;case"muted":s.muted=fe&&typeof fe!="function"&&typeof fe!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(fe==null||typeof fe=="function"||typeof fe=="boolean"||typeof fe=="symbol"){s.removeAttribute("xlink:href");break}ie=is(""+fe),s.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",ie);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":fe!=null&&typeof fe!="function"&&typeof fe!="symbol"?s.setAttribute(ie,""+fe):s.removeAttribute(ie);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":fe&&typeof fe!="function"&&typeof fe!="symbol"?s.setAttribute(ie,""):s.removeAttribute(ie);break;case"capture":case"download":fe===!0?s.setAttribute(ie,""):fe!==!1&&fe!=null&&typeof fe!="function"&&typeof fe!="symbol"?s.setAttribute(ie,fe):s.removeAttribute(ie);break;case"cols":case"rows":case"size":case"span":fe!=null&&typeof fe!="function"&&typeof fe!="symbol"&&!isNaN(fe)&&1<=fe?s.setAttribute(ie,fe):s.removeAttribute(ie);break;case"rowSpan":case"start":fe==null||typeof fe=="function"||typeof fe=="symbol"||isNaN(fe)?s.removeAttribute(ie):s.setAttribute(ie,fe);break;case"popover":mn("beforetoggle",s),mn("toggle",s),er(s,"popover",fe);break;case"xlinkActuate":Nr(s,"http://www.w3.org/1999/xlink","xlink:actuate",fe);break;case"xlinkArcrole":Nr(s,"http://www.w3.org/1999/xlink","xlink:arcrole",fe);break;case"xlinkRole":Nr(s,"http://www.w3.org/1999/xlink","xlink:role",fe);break;case"xlinkShow":Nr(s,"http://www.w3.org/1999/xlink","xlink:show",fe);break;case"xlinkTitle":Nr(s,"http://www.w3.org/1999/xlink","xlink:title",fe);break;case"xlinkType":Nr(s,"http://www.w3.org/1999/xlink","xlink:type",fe);break;case"xmlBase":Nr(s,"http://www.w3.org/XML/1998/namespace","xml:base",fe);break;case"xmlLang":Nr(s,"http://www.w3.org/XML/1998/namespace","xml:lang",fe);break;case"xmlSpace":Nr(s,"http://www.w3.org/XML/1998/namespace","xml:space",fe);break;case"is":er(s,"is",fe);break;case"innerText":case"textContent":break;default:(!(2<ie.length)||ie[0]!=="o"&&ie[0]!=="O"||ie[1]!=="n"&&ie[1]!=="N")&&(ie=po.get(ie)||ie,er(s,ie,fe))}}function Gu(s,l,ie,fe,me,ye){switch(ie){case"style":nn(s,fe,ye);break;case"dangerouslySetInnerHTML":if(fe!=null){if(typeof fe!="object"||!("__html"in fe))throw Error(r(61));if(ie=fe.__html,ie!=null){if(me.children!=null)throw Error(r(60));s.innerHTML=ie}}break;case"children":typeof fe=="string"?ii(s,fe):(typeof fe=="number"||typeof fe=="bigint")&&ii(s,""+fe);break;case"onScroll":fe!=null&&mn("scroll",s);break;case"onScrollEnd":fe!=null&&mn("scrollend",s);break;case"onClick":fe!=null&&(s.onclick=Rr);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!cn.hasOwnProperty(ie))e:{if(ie[0]==="o"&&ie[1]==="n"&&(me=ie.endsWith("Capture"),l=ie.slice(2,me?ie.length-7:void 0),ye=s[Be]||null,ye=ye!=null?ye[ie]:null,typeof ye=="function"&&s.removeEventListener(l,ye,me),typeof fe=="function")){typeof ye!="function"&&ye!==null&&(ie in s?s[ie]=null:s.hasAttribute(ie)&&s.removeAttribute(ie)),s.addEventListener(l,fe,me);break e}ie in s?s[ie]=fe:fe===!0?s.setAttribute(ie,""):er(s,ie,fe)}}}function ar(s,l,ie){switch(l){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":mn("error",s),mn("load",s);var fe=!1,me=!1,ye;for(ye in ie)if(ie.hasOwnProperty(ye)){var Ie=ie[ye];if(Ie!=null)switch(ye){case"src":fe=!0;break;case"srcSet":me=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,l));default:Dn(s,l,ye,Ie,ie,null)}}me&&Dn(s,l,"srcSet",ie.srcSet,ie,null),fe&&Dn(s,l,"src",ie.src,ie,null);return;case"input":mn("invalid",s);var Fe=ye=Ie=me=null,Qe=null,ft=null;for(fe in ie)if(ie.hasOwnProperty(fe)){var St=ie[fe];if(St!=null)switch(fe){case"name":me=St;break;case"type":Ie=St;break;case"checked":Qe=St;break;case"defaultChecked":ft=St;break;case"value":ye=St;break;case"defaultValue":Fe=St;break;case"children":case"dangerouslySetInnerHTML":if(St!=null)throw Error(r(137,l));break;default:Dn(s,l,fe,St,ie,null)}}co(s,ye,Fe,Qe,ft,Ie,me,!1);return;case"select":mn("invalid",s),fe=Ie=ye=null;for(me in ie)if(ie.hasOwnProperty(me)&&(Fe=ie[me],Fe!=null))switch(me){case"value":ye=Fe;break;case"defaultValue":Ie=Fe;break;case"multiple":fe=Fe;default:Dn(s,l,me,Fe,ie,null)}l=ye,ie=Ie,s.multiple=!!fe,l!=null?ri(s,!!fe,l,!1):ie!=null&&ri(s,!!fe,ie,!0);return;case"textarea":mn("invalid",s),ye=me=fe=null;for(Ie in ie)if(ie.hasOwnProperty(Ie)&&(Fe=ie[Ie],Fe!=null))switch(Ie){case"value":fe=Fe;break;case"defaultValue":me=Fe;break;case"children":ye=Fe;break;case"dangerouslySetInnerHTML":if(Fe!=null)throw Error(r(91));break;default:Dn(s,l,Ie,Fe,ie,null)}Ss(s,fe,me,ye);return;case"option":for(Qe in ie)if(ie.hasOwnProperty(Qe)&&(fe=ie[Qe],fe!=null))switch(Qe){case"selected":s.selected=fe&&typeof fe!="function"&&typeof fe!="symbol";break;default:Dn(s,l,Qe,fe,ie,null)}return;case"dialog":mn("beforetoggle",s),mn("toggle",s),mn("cancel",s),mn("close",s);break;case"iframe":case"object":mn("load",s);break;case"video":case"audio":for(fe=0;fe<qo.length;fe++)mn(qo[fe],s);break;case"image":mn("error",s),mn("load",s);break;case"details":mn("toggle",s);break;case"embed":case"source":case"link":mn("error",s),mn("load",s);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(ft in ie)if(ie.hasOwnProperty(ft)&&(fe=ie[ft],fe!=null))switch(ft){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,l));default:Dn(s,l,ft,fe,ie,null)}return;default:if(Zt(l)){for(St in ie)ie.hasOwnProperty(St)&&(fe=ie[St],fe!==void 0&&Gu(s,l,St,fe,ie,void 0));return}}for(Fe in ie)ie.hasOwnProperty(Fe)&&(fe=ie[Fe],fe!=null&&Dn(s,l,Fe,fe,ie,null))}function xm(s,l,ie,fe){switch(l){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var me=null,ye=null,Ie=null,Fe=null,Qe=null,ft=null,St=null;for(gt in ie){var Ot=ie[gt];if(ie.hasOwnProperty(gt)&&Ot!=null)switch(gt){case"checked":break;case"value":break;case"defaultValue":Qe=Ot;default:fe.hasOwnProperty(gt)||Dn(s,l,gt,null,fe,Ot)}}for(var ht in fe){var gt=fe[ht];if(Ot=ie[ht],fe.hasOwnProperty(ht)&&(gt!=null||Ot!=null))switch(ht){case"type":ye=gt;break;case"name":me=gt;break;case"checked":ft=gt;break;case"defaultChecked":St=gt;break;case"value":Ie=gt;break;case"defaultValue":Fe=gt;break;case"children":case"dangerouslySetInnerHTML":if(gt!=null)throw Error(r(137,l));break;default:gt!==Ot&&Dn(s,l,ht,gt,fe,Ot)}}Es(s,Ie,Fe,Qe,ft,St,ye,me);return;case"select":gt=Ie=Fe=ht=null;for(ye in ie)if(Qe=ie[ye],ie.hasOwnProperty(ye)&&Qe!=null)switch(ye){case"value":break;case"multiple":gt=Qe;default:fe.hasOwnProperty(ye)||Dn(s,l,ye,null,fe,Qe)}for(me in fe)if(ye=fe[me],Qe=ie[me],fe.hasOwnProperty(me)&&(ye!=null||Qe!=null))switch(me){case"value":ht=ye;break;case"defaultValue":Fe=ye;break;case"multiple":Ie=ye;default:ye!==Qe&&Dn(s,l,me,ye,fe,Qe)}l=Fe,ie=Ie,fe=gt,ht!=null?ri(s,!!ie,ht,!1):!!fe!=!!ie&&(l!=null?ri(s,!!ie,l,!0):ri(s,!!ie,ie?[]:"",!1));return;case"textarea":gt=ht=null;for(Fe in ie)if(me=ie[Fe],ie.hasOwnProperty(Fe)&&me!=null&&!fe.hasOwnProperty(Fe))switch(Fe){case"value":break;case"children":break;default:Dn(s,l,Fe,null,fe,me)}for(Ie in fe)if(me=fe[Ie],ye=ie[Ie],fe.hasOwnProperty(Ie)&&(me!=null||ye!=null))switch(Ie){case"value":ht=me;break;case"defaultValue":gt=me;break;case"children":break;case"dangerouslySetInnerHTML":if(me!=null)throw Error(r(91));break;default:me!==ye&&Dn(s,l,Ie,me,fe,ye)}fo(s,ht,gt);return;case"option":for(var Lt in ie)if(ht=ie[Lt],ie.hasOwnProperty(Lt)&&ht!=null&&!fe.hasOwnProperty(Lt))switch(Lt){case"selected":s.selected=!1;break;default:Dn(s,l,Lt,null,fe,ht)}for(Qe in fe)if(ht=fe[Qe],gt=ie[Qe],fe.hasOwnProperty(Qe)&&ht!==gt&&(ht!=null||gt!=null))switch(Qe){case"selected":s.selected=ht&&typeof ht!="function"&&typeof ht!="symbol";break;default:Dn(s,l,Qe,ht,fe,gt)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Wt in ie)ht=ie[Wt],ie.hasOwnProperty(Wt)&&ht!=null&&!fe.hasOwnProperty(Wt)&&Dn(s,l,Wt,null,fe,ht);for(ft in fe)if(ht=fe[ft],gt=ie[ft],fe.hasOwnProperty(ft)&&ht!==gt&&(ht!=null||gt!=null))switch(ft){case"children":case"dangerouslySetInnerHTML":if(ht!=null)throw Error(r(137,l));break;default:Dn(s,l,ft,ht,fe,gt)}return;default:if(Zt(l)){for(var Cn in ie)ht=ie[Cn],ie.hasOwnProperty(Cn)&&ht!==void 0&&!fe.hasOwnProperty(Cn)&&Gu(s,l,Cn,void 0,fe,ht);for(St in fe)ht=fe[St],gt=ie[St],!fe.hasOwnProperty(St)||ht===gt||ht===void 0&&gt===void 0||Gu(s,l,St,ht,fe,gt);return}}for(var ot in ie)ht=ie[ot],ie.hasOwnProperty(ot)&&ht!=null&&!fe.hasOwnProperty(ot)&&Dn(s,l,ot,null,fe,ht);for(Ot in fe)ht=fe[Ot],gt=ie[Ot],!fe.hasOwnProperty(Ot)||ht===gt||ht==null&&gt==null||Dn(s,l,Ot,ht,fe,gt)}function dh(s){switch(s){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function vm(){if(typeof performance.getEntriesByType=="function"){for(var s=0,l=0,ie=performance.getEntriesByType("resource"),fe=0;fe<ie.length;fe++){var me=ie[fe],ye=me.transferSize,Ie=me.initiatorType,Fe=me.duration;if(ye&&Fe&&dh(Ie)){for(Ie=0,Fe=me.responseEnd,fe+=1;fe<ie.length;fe++){var Qe=ie[fe],ft=Qe.startTime;if(ft>Fe)break;var St=Qe.transferSize,Ot=Qe.initiatorType;St&&dh(Ot)&&(Qe=Qe.responseEnd,Ie+=St*(Qe<Fe?1:(Fe-ft)/(Qe-ft)))}if(--fe,l+=8*(ye+Ie)/(me.duration/1e3),s++,10<s)break}}if(0<s)return l/s/1e6}return navigator.connection&&(s=navigator.connection.downlink,typeof s=="number")?s:5}var Hu=null,qu=null;function Wa(s){return s.nodeType===9?s:s.ownerDocument}function fh(s){switch(s){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function hh(s,l){if(s===0)switch(l){case"svg":return 1;case"math":return 2;default:return 0}return s===1&&l==="foreignObject"?0:s}function Yu(s,l){return s==="textarea"||s==="noscript"||typeof l.children=="string"||typeof l.children=="number"||typeof l.children=="bigint"||typeof l.dangerouslySetInnerHTML=="object"&&l.dangerouslySetInnerHTML!==null&&l.dangerouslySetInnerHTML.__html!=null}var Wu=null;function wm(){var s=window.event;return s&&s.type==="popstate"?s===Wu?!1:(Wu=s,!0):(Wu=null,!1)}var ph=typeof setTimeout=="function"?setTimeout:void 0,Tm=typeof clearTimeout=="function"?clearTimeout:void 0,mh=typeof Promise=="function"?Promise:void 0,Em=typeof queueMicrotask=="function"?queueMicrotask:typeof mh<"u"?function(s){return mh.resolve(null).then(s).catch(Sm)}:ph;function Sm(s){setTimeout(function(){throw s})}function Xi(s){return s==="head"}function gh(s,l){var ie=l,fe=0;do{var me=ie.nextSibling;if(s.removeChild(ie),me&&me.nodeType===8)if(ie=me.data,ie==="/$"||ie==="/&"){if(fe===0){s.removeChild(me),so(l);return}fe--}else if(ie==="$"||ie==="$?"||ie==="$~"||ie==="$!"||ie==="&")fe++;else if(ie==="html")Wo(s.ownerDocument.documentElement);else if(ie==="head"){ie=s.ownerDocument.head,Wo(ie);for(var ye=ie.firstChild;ye;){var Ie=ye.nextSibling,Fe=ye.nodeName;ye[Nt]||Fe==="SCRIPT"||Fe==="STYLE"||Fe==="LINK"&&ye.rel.toLowerCase()==="stylesheet"||ie.removeChild(ye),ye=Ie}}else ie==="body"&&Wo(s.ownerDocument.body);ie=me}while(ie);so(l)}function yh(s,l){var ie=s;s=0;do{var fe=ie.nextSibling;if(ie.nodeType===1?l?(ie._stashedDisplay=ie.style.display,ie.style.display="none"):(ie.style.display=ie._stashedDisplay||"",ie.getAttribute("style")===""&&ie.removeAttribute("style")):ie.nodeType===3&&(l?(ie._stashedText=ie.nodeValue,ie.nodeValue=""):ie.nodeValue=ie._stashedText||""),fe&&fe.nodeType===8)if(ie=fe.data,ie==="/$"){if(s===0)break;s--}else ie!=="$"&&ie!=="$?"&&ie!=="$~"&&ie!=="$!"||s++;ie=fe}while(ie)}function Xu(s){var l=s.firstChild;for(l&&l.nodeType===10&&(l=l.nextSibling);l;){var ie=l;switch(l=l.nextSibling,ie.nodeName){case"HTML":case"HEAD":case"BODY":Xu(ie),kt(ie);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(ie.rel.toLowerCase()==="stylesheet")continue}s.removeChild(ie)}}function Am(s,l,ie,fe){for(;s.nodeType===1;){var me=ie;if(s.nodeName.toLowerCase()!==l.toLowerCase()){if(!fe&&(s.nodeName!=="INPUT"||s.type!=="hidden"))break}else if(fe){if(!s[Nt])switch(l){case"meta":if(!s.hasAttribute("itemprop"))break;return s;case"link":if(ye=s.getAttribute("rel"),ye==="stylesheet"&&s.hasAttribute("data-precedence"))break;if(ye!==me.rel||s.getAttribute("href")!==(me.href==null||me.href===""?null:me.href)||s.getAttribute("crossorigin")!==(me.crossOrigin==null?null:me.crossOrigin)||s.getAttribute("title")!==(me.title==null?null:me.title))break;return s;case"style":if(s.hasAttribute("data-precedence"))break;return s;case"script":if(ye=s.getAttribute("src"),(ye!==(me.src==null?null:me.src)||s.getAttribute("type")!==(me.type==null?null:me.type)||s.getAttribute("crossorigin")!==(me.crossOrigin==null?null:me.crossOrigin))&&ye&&s.hasAttribute("async")&&!s.hasAttribute("itemprop"))break;return s;default:return s}}else if(l==="input"&&s.type==="hidden"){var ye=me.name==null?null:""+me.name;if(me.type==="hidden"&&s.getAttribute("name")===ye)return s}else return s;if(s=jr(s.nextSibling),s===null)break}return null}function Om(s,l,ie){if(l==="")return null;for(;s.nodeType!==3;)if((s.nodeType!==1||s.nodeName!=="INPUT"||s.type!=="hidden")&&!ie||(s=jr(s.nextSibling),s===null))return null;return s}function bh(s,l){for(;s.nodeType!==8;)if((s.nodeType!==1||s.nodeName!=="INPUT"||s.type!=="hidden")&&!l||(s=jr(s.nextSibling),s===null))return null;return s}function Ku(s){return s.data==="$?"||s.data==="$~"}function Qu(s){return s.data==="$!"||s.data==="$?"&&s.ownerDocument.readyState!=="loading"}function Im(s,l){var ie=s.ownerDocument;if(s.data==="$~")s._reactRetry=l;else if(s.data!=="$?"||ie.readyState!=="loading")l();else{var fe=function(){l(),ie.removeEventListener("DOMContentLoaded",fe)};ie.addEventListener("DOMContentLoaded",fe),s._reactRetry=fe}}function jr(s){for(;s!=null;s=s.nextSibling){var l=s.nodeType;if(l===1||l===3)break;if(l===8){if(l=s.data,l==="$"||l==="$!"||l==="$?"||l==="$~"||l==="&"||l==="F!"||l==="F")break;if(l==="/$"||l==="/&")return null}}return s}var Zu=null;function xh(s){s=s.nextSibling;for(var l=0;s;){if(s.nodeType===8){var ie=s.data;if(ie==="/$"||ie==="/&"){if(l===0)return jr(s.nextSibling);l--}else ie!=="$"&&ie!=="$!"&&ie!=="$?"&&ie!=="$~"&&ie!=="&"||l++}s=s.nextSibling}return null}function vh(s){s=s.previousSibling;for(var l=0;s;){if(s.nodeType===8){var ie=s.data;if(ie==="$"||ie==="$!"||ie==="$?"||ie==="$~"||ie==="&"){if(l===0)return s;l--}else ie!=="/$"&&ie!=="/&"||l++}s=s.previousSibling}return null}function wh(s,l,ie){switch(l=Wa(ie),s){case"html":if(s=l.documentElement,!s)throw Error(r(452));return s;case"head":if(s=l.head,!s)throw Error(r(453));return s;case"body":if(s=l.body,!s)throw Error(r(454));return s;default:throw Error(r(451))}}function Wo(s){for(var l=s.attributes;l.length;)s.removeAttributeNode(l[0]);kt(s)}var $r=new Map,Th=new Set;function Xa(s){return typeof s.getRootNode=="function"?s.getRootNode():s.nodeType===9?s:s.ownerDocument}var Ti=je.d;je.d={f:Mm,r:Nm,D:Rm,C:Dm,L:Cm,m:Pm,X:km,S:Lm,M:Fm};function Mm(){var s=Ti.f(),l=$a();return s||l}function Nm(s){var l=Xt(s);l!==null&&l.tag===5&&l.type==="form"?kd(l):Ti.r(s)}var no=typeof document>"u"?null:document;function Eh(s,l,ie){var fe=no;if(fe&&typeof l=="string"&&l){var me=cr(l);me='link[rel="'+s+'"][href="'+me+'"]',typeof ie=="string"&&(me+='[crossorigin="'+ie+'"]'),Th.has(me)||(Th.add(me),s={rel:s,crossOrigin:ie,href:l},fe.querySelector(me)===null&&(l=fe.createElement("link"),ar(l,"link",s),hn(l),fe.head.appendChild(l)))}}function Rm(s){Ti.D(s),Eh("dns-prefetch",s,null)}function Dm(s,l){Ti.C(s,l),Eh("preconnect",s,l)}function Cm(s,l,ie){Ti.L(s,l,ie);var fe=no;if(fe&&s&&l){var me='link[rel="preload"][as="'+cr(l)+'"]';l==="image"&&ie&&ie.imageSrcSet?(me+='[imagesrcset="'+cr(ie.imageSrcSet)+'"]',typeof ie.imageSizes=="string"&&(me+='[imagesizes="'+cr(ie.imageSizes)+'"]')):me+='[href="'+cr(s)+'"]';var ye=me;switch(l){case"style":ye=ro(s);break;case"script":ye=io(s)}$r.has(ye)||(s=o({rel:"preload",href:l==="image"&&ie&&ie.imageSrcSet?void 0:s,as:l},ie),$r.set(ye,s),fe.querySelector(me)!==null||l==="style"&&fe.querySelector(Xo(ye))||l==="script"&&fe.querySelector(Ko(ye))||(l=fe.createElement("link"),ar(l,"link",s),hn(l),fe.head.appendChild(l)))}}function Pm(s,l){Ti.m(s,l);var ie=no;if(ie&&s){var fe=l&&typeof l.as=="string"?l.as:"script",me='link[rel="modulepreload"][as="'+cr(fe)+'"][href="'+cr(s)+'"]',ye=me;switch(fe){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":ye=io(s)}if(!$r.has(ye)&&(s=o({rel:"modulepreload",href:s},l),$r.set(ye,s),ie.querySelector(me)===null)){switch(fe){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(ie.querySelector(Ko(ye)))return}fe=ie.createElement("link"),ar(fe,"link",s),hn(fe),ie.head.appendChild(fe)}}}function Lm(s,l,ie){Ti.S(s,l,ie);var fe=no;if(fe&&s){var me=kn(fe).hoistableStyles,ye=ro(s);l=l||"default";var Ie=me.get(ye);if(!Ie){var Fe={loading:0,preload:null};if(Ie=fe.querySelector(Xo(ye)))Fe.loading=5;else{s=o({rel:"stylesheet",href:s,"data-precedence":l},ie),(ie=$r.get(ye))&&Ju(s,ie);var Qe=Ie=fe.createElement("link");hn(Qe),ar(Qe,"link",s),Qe._p=new Promise(function(ft,St){Qe.onload=ft,Qe.onerror=St}),Qe.addEventListener("load",function(){Fe.loading|=1}),Qe.addEventListener("error",function(){Fe.loading|=2}),Fe.loading|=4,Ka(Ie,l,fe)}Ie={type:"stylesheet",instance:Ie,count:1,state:Fe},me.set(ye,Ie)}}}function km(s,l){Ti.X(s,l);var ie=no;if(ie&&s){var fe=kn(ie).hoistableScripts,me=io(s),ye=fe.get(me);ye||(ye=ie.querySelector(Ko(me)),ye||(s=o({src:s,async:!0},l),(l=$r.get(me))&&ec(s,l),ye=ie.createElement("script"),hn(ye),ar(ye,"link",s),ie.head.appendChild(ye)),ye={type:"script",instance:ye,count:1,state:null},fe.set(me,ye))}}function Fm(s,l){Ti.M(s,l);var ie=no;if(ie&&s){var fe=kn(ie).hoistableScripts,me=io(s),ye=fe.get(me);ye||(ye=ie.querySelector(Ko(me)),ye||(s=o({src:s,async:!0,type:"module"},l),(l=$r.get(me))&&ec(s,l),ye=ie.createElement("script"),hn(ye),ar(ye,"link",s),ie.head.appendChild(ye)),ye={type:"script",instance:ye,count:1,state:null},fe.set(me,ye))}}function Sh(s,l,ie,fe){var me=(me=Tt.current)?Xa(me):null;if(!me)throw Error(r(446));switch(s){case"meta":case"title":return null;case"style":return typeof ie.precedence=="string"&&typeof ie.href=="string"?(l=ro(ie.href),ie=kn(me).hoistableStyles,fe=ie.get(l),fe||(fe={type:"style",instance:null,count:0,state:null},ie.set(l,fe)),fe):{type:"void",instance:null,count:0,state:null};case"link":if(ie.rel==="stylesheet"&&typeof ie.href=="string"&&typeof ie.precedence=="string"){s=ro(ie.href);var ye=kn(me).hoistableStyles,Ie=ye.get(s);if(Ie||(me=me.ownerDocument||me,Ie={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},ye.set(s,Ie),(ye=me.querySelector(Xo(s)))&&!ye._p&&(Ie.instance=ye,Ie.state.loading=5),$r.has(s)||(ie={rel:"preload",as:"style",href:ie.href,crossOrigin:ie.crossOrigin,integrity:ie.integrity,media:ie.media,hrefLang:ie.hrefLang,referrerPolicy:ie.referrerPolicy},$r.set(s,ie),ye||Bm(me,s,ie,Ie.state))),l&&fe===null)throw Error(r(528,""));return Ie}if(l&&fe!==null)throw Error(r(529,""));return null;case"script":return l=ie.async,ie=ie.src,typeof ie=="string"&&l&&typeof l!="function"&&typeof l!="symbol"?(l=io(ie),ie=kn(me).hoistableScripts,fe=ie.get(l),fe||(fe={type:"script",instance:null,count:0,state:null},ie.set(l,fe)),fe):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,s))}}function ro(s){return'href="'+cr(s)+'"'}function Xo(s){return'link[rel="stylesheet"]['+s+"]"}function Ah(s){return o({},s,{"data-precedence":s.precedence,precedence:null})}function Bm(s,l,ie,fe){s.querySelector('link[rel="preload"][as="style"]['+l+"]")?fe.loading=1:(l=s.createElement("link"),fe.preload=l,l.addEventListener("load",function(){return fe.loading|=1}),l.addEventListener("error",function(){return fe.loading|=2}),ar(l,"link",ie),hn(l),s.head.appendChild(l))}function io(s){return'[src="'+cr(s)+'"]'}function Ko(s){return"script[async]"+s}function Oh(s,l,ie){if(l.count++,l.instance===null)switch(l.type){case"style":var fe=s.querySelector('style[data-href~="'+cr(ie.href)+'"]');if(fe)return l.instance=fe,hn(fe),fe;var me=o({},ie,{"data-href":ie.href,"data-precedence":ie.precedence,href:null,precedence:null});return fe=(s.ownerDocument||s).createElement("style"),hn(fe),ar(fe,"style",me),Ka(fe,ie.precedence,s),l.instance=fe;case"stylesheet":me=ro(ie.href);var ye=s.querySelector(Xo(me));if(ye)return l.state.loading|=4,l.instance=ye,hn(ye),ye;fe=Ah(ie),(me=$r.get(me))&&Ju(fe,me),ye=(s.ownerDocument||s).createElement("link"),hn(ye);var Ie=ye;return Ie._p=new Promise(function(Fe,Qe){Ie.onload=Fe,Ie.onerror=Qe}),ar(ye,"link",fe),l.state.loading|=4,Ka(ye,ie.precedence,s),l.instance=ye;case"script":return ye=io(ie.src),(me=s.querySelector(Ko(ye)))?(l.instance=me,hn(me),me):(fe=ie,(me=$r.get(ye))&&(fe=o({},ie),ec(fe,me)),s=s.ownerDocument||s,me=s.createElement("script"),hn(me),ar(me,"link",fe),s.head.appendChild(me),l.instance=me);case"void":return null;default:throw Error(r(443,l.type))}else l.type==="stylesheet"&&(l.state.loading&4)===0&&(fe=l.instance,l.state.loading|=4,Ka(fe,ie.precedence,s));return l.instance}function Ka(s,l,ie){for(var fe=ie.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),me=fe.length?fe[fe.length-1]:null,ye=me,Ie=0;Ie<fe.length;Ie++){var Fe=fe[Ie];if(Fe.dataset.precedence===l)ye=Fe;else if(ye!==me)break}ye?ye.parentNode.insertBefore(s,ye.nextSibling):(l=ie.nodeType===9?ie.head:ie,l.insertBefore(s,l.firstChild))}function Ju(s,l){s.crossOrigin==null&&(s.crossOrigin=l.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=l.referrerPolicy),s.title==null&&(s.title=l.title)}function ec(s,l){s.crossOrigin==null&&(s.crossOrigin=l.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=l.referrerPolicy),s.integrity==null&&(s.integrity=l.integrity)}var Qa=null;function Ih(s,l,ie){if(Qa===null){var fe=new Map,me=Qa=new Map;me.set(ie,fe)}else me=Qa,fe=me.get(ie),fe||(fe=new Map,me.set(ie,fe));if(fe.has(s))return fe;for(fe.set(s,null),ie=ie.getElementsByTagName(s),me=0;me<ie.length;me++){var ye=ie[me];if(!(ye[Nt]||ye[$n]||s==="link"&&ye.getAttribute("rel")==="stylesheet")&&ye.namespaceURI!=="http://www.w3.org/2000/svg"){var Ie=ye.getAttribute(l)||"";Ie=s+Ie;var Fe=fe.get(Ie);Fe?Fe.push(ye):fe.set(Ie,[ye])}}return fe}function Mh(s,l,ie){s=s.ownerDocument||s,s.head.insertBefore(ie,l==="title"?s.querySelector("head > title"):null)}function jm(s,l,ie){if(ie===1||l.itemProp!=null)return!1;switch(s){case"meta":case"title":return!0;case"style":if(typeof l.precedence!="string"||typeof l.href!="string"||l.href==="")break;return!0;case"link":if(typeof l.rel!="string"||typeof l.href!="string"||l.href===""||l.onLoad||l.onError)break;switch(l.rel){case"stylesheet":return s=l.disabled,typeof l.precedence=="string"&&s==null;default:return!0}case"script":if(l.async&&typeof l.async!="function"&&typeof l.async!="symbol"&&!l.onLoad&&!l.onError&&l.src&&typeof l.src=="string")return!0}return!1}function Nh(s){return!(s.type==="stylesheet"&&(s.state.loading&3)===0)}function $m(s,l,ie,fe){if(ie.type==="stylesheet"&&(typeof fe.media!="string"||matchMedia(fe.media).matches!==!1)&&(ie.state.loading&4)===0){if(ie.instance===null){var me=ro(fe.href),ye=l.querySelector(Xo(me));if(ye){l=ye._p,l!==null&&typeof l=="object"&&typeof l.then=="function"&&(s.count++,s=Za.bind(s),l.then(s,s)),ie.state.loading|=4,ie.instance=ye,hn(ye);return}ye=l.ownerDocument||l,fe=Ah(fe),(me=$r.get(me))&&Ju(fe,me),ye=ye.createElement("link"),hn(ye);var Ie=ye;Ie._p=new Promise(function(Fe,Qe){Ie.onload=Fe,Ie.onerror=Qe}),ar(ye,"link",fe),ie.instance=ye}s.stylesheets===null&&(s.stylesheets=new Map),s.stylesheets.set(ie,l),(l=ie.state.preload)&&(ie.state.loading&3)===0&&(s.count++,ie=Za.bind(s),l.addEventListener("load",ie),l.addEventListener("error",ie))}}var tc=0;function Um(s,l){return s.stylesheets&&s.count===0&&el(s,s.stylesheets),0<s.count||0<s.imgCount?function(ie){var fe=setTimeout(function(){if(s.stylesheets&&el(s,s.stylesheets),s.unsuspend){var ye=s.unsuspend;s.unsuspend=null,ye()}},6e4+l);0<s.imgBytes&&tc===0&&(tc=62500*vm());var me=setTimeout(function(){if(s.waitingForImages=!1,s.count===0&&(s.stylesheets&&el(s,s.stylesheets),s.unsuspend)){var ye=s.unsuspend;s.unsuspend=null,ye()}},(s.imgBytes>tc?50:800)+l);return s.unsuspend=ie,function(){s.unsuspend=null,clearTimeout(fe),clearTimeout(me)}}:null}function Za(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)el(this,this.stylesheets);else if(this.unsuspend){var s=this.unsuspend;this.unsuspend=null,s()}}}var Ja=null;function el(s,l){s.stylesheets=null,s.unsuspend!==null&&(s.count++,Ja=new Map,l.forEach(zm,s),Ja=null,Za.call(s))}function zm(s,l){if(!(l.state.loading&4)){var ie=Ja.get(s);if(ie)var fe=ie.get(null);else{ie=new Map,Ja.set(s,ie);for(var me=s.querySelectorAll("link[data-precedence],style[data-precedence]"),ye=0;ye<me.length;ye++){var Ie=me[ye];(Ie.nodeName==="LINK"||Ie.getAttribute("media")!=="not all")&&(ie.set(Ie.dataset.precedence,Ie),fe=Ie)}fe&&ie.set(null,fe)}me=l.instance,Ie=me.getAttribute("data-precedence"),ye=ie.get(Ie)||fe,ye===fe&&ie.set(null,me),ie.set(Ie,me),this.count++,fe=Za.bind(this),me.addEventListener("load",fe),me.addEventListener("error",fe),ye?ye.parentNode.insertBefore(me,ye.nextSibling):(s=s.nodeType===9?s.head:s,s.insertBefore(me,s.firstChild)),l.state.loading|=4}}var Qo={$$typeof:be,Provider:null,Consumer:null,_currentValue:it,_currentValue2:it,_threadCount:0};function Vm(s,l,ie,fe,me,ye,Ie,Fe,Qe){this.tag=1,this.containerInfo=s,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Jr(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Jr(0),this.hiddenUpdates=Jr(null),this.identifierPrefix=fe,this.onUncaughtError=me,this.onCaughtError=ye,this.onRecoverableError=Ie,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=Qe,this.incompleteTransitions=new Map}function Rh(s,l,ie,fe,me,ye,Ie,Fe,Qe,ft,St,Ot){return s=new Vm(s,l,ie,Ie,Qe,ft,St,Ot,Fe),l=1,ye===!0&&(l|=24),ye=wr(3,null,null,l),s.current=ye,ye.stateNode=s,l=Cl(),l.refCount++,s.pooledCache=l,l.refCount++,ye.memoizedState={element:fe,isDehydrated:ie,cache:l},Fl(ye),s}function Dh(s){return s?(s=Ls,s):Ls}function Ch(s,l,ie,fe,me,ye){me=Dh(me),fe.context===null?fe.context=me:fe.pendingContext=me,fe=Bi(l),fe.payload={element:ie},ye=ye===void 0?null:ye,ye!==null&&(fe.callback=ye),ie=ji(s,fe,l),ie!==null&&(xr(ie,s,l),Mo(ie,s,l))}function Ph(s,l){if(s=s.memoizedState,s!==null&&s.dehydrated!==null){var ie=s.retryLane;s.retryLane=ie!==0&&ie<l?ie:l}}function nc(s,l){Ph(s,l),(s=s.alternate)&&Ph(s,l)}function Lh(s){if(s.tag===13||s.tag===31){var l=as(s,67108864);l!==null&&xr(l,s,67108864),nc(s,67108864)}}function kh(s){if(s.tag===13||s.tag===31){var l=Or();l=ei(l);var ie=as(s,l);ie!==null&&xr(ie,s,l),nc(s,l)}}var tl=!0;function Gm(s,l,ie,fe){var me=Me.T;Me.T=null;var ye=je.p;try{je.p=2,rc(s,l,ie,fe)}finally{je.p=ye,Me.T=me}}function Hm(s,l,ie,fe){var me=Me.T;Me.T=null;var ye=je.p;try{je.p=8,rc(s,l,ie,fe)}finally{je.p=ye,Me.T=me}}function rc(s,l,ie,fe){if(tl){var me=ic(fe);if(me===null)Vu(s,l,fe,nl,ie),Bh(s,fe);else if(Ym(me,s,l,ie,fe))fe.stopPropagation();else if(Bh(s,fe),l&4&&-1<qm.indexOf(s)){for(;me!==null;){var ye=Xt(me);if(ye!==null)switch(ye.tag){case 3:if(ye=ye.stateNode,ye.current.memoizedState.isDehydrated){var Ie=qt(ye.pendingLanes);if(Ie!==0){var Fe=ye;for(Fe.pendingLanes|=2,Fe.entangledLanes|=2;Ie;){var Qe=1<<31-en(Ie);Fe.entanglements[1]|=Qe,Ie&=~Qe}Qr(ye),(An&6)===0&&(Ba=wn()+500,Ho(0))}}break;case 31:case 13:Fe=as(ye,2),Fe!==null&&xr(Fe,ye,2),$a(),nc(ye,2)}if(ye=ic(fe),ye===null&&Vu(s,l,fe,nl,ie),ye===me)break;me=ye}me!==null&&fe.stopPropagation()}else Vu(s,l,fe,null,ie)}}function ic(s){return s=Is(s),sc(s)}var nl=null;function sc(s){if(nl=null,s=Ct(s),s!==null){var l=T(s);if(l===null)s=null;else{var ie=l.tag;if(ie===13){if(s=d(l),s!==null)return s;s=null}else if(ie===31){if(s=A(l),s!==null)return s;s=null}else if(ie===3){if(l.stateNode.current.memoizedState.isDehydrated)return l.tag===3?l.stateNode.containerInfo:null;s=null}else l!==s&&(s=null)}}return nl=s,null}function Fh(s){switch(s){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(zt()){case Zn:return 2;case Le:return 8;case Ee:case Oe:return 32;case ze:return 268435456;default:return 32}default:return 32}}var oc=!1,Ki=null,Qi=null,Zi=null,Zo=new Map,Jo=new Map,Ji=[],qm="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Bh(s,l){switch(s){case"focusin":case"focusout":Ki=null;break;case"dragenter":case"dragleave":Qi=null;break;case"mouseover":case"mouseout":Zi=null;break;case"pointerover":case"pointerout":Zo.delete(l.pointerId);break;case"gotpointercapture":case"lostpointercapture":Jo.delete(l.pointerId)}}function ea(s,l,ie,fe,me,ye){return s===null||s.nativeEvent!==ye?(s={blockedOn:l,domEventName:ie,eventSystemFlags:fe,nativeEvent:ye,targetContainers:[me]},l!==null&&(l=Xt(l),l!==null&&Lh(l)),s):(s.eventSystemFlags|=fe,l=s.targetContainers,me!==null&&l.indexOf(me)===-1&&l.push(me),s)}function Ym(s,l,ie,fe,me){switch(l){case"focusin":return Ki=ea(Ki,s,l,ie,fe,me),!0;case"dragenter":return Qi=ea(Qi,s,l,ie,fe,me),!0;case"mouseover":return Zi=ea(Zi,s,l,ie,fe,me),!0;case"pointerover":var ye=me.pointerId;return Zo.set(ye,ea(Zo.get(ye)||null,s,l,ie,fe,me)),!0;case"gotpointercapture":return ye=me.pointerId,Jo.set(ye,ea(Jo.get(ye)||null,s,l,ie,fe,me)),!0}return!1}function jh(s){var l=Ct(s.target);if(l!==null){var ie=T(l);if(ie!==null){if(l=ie.tag,l===13){if(l=d(ie),l!==null){s.blockedOn=l,Mi(s.priority,function(){kh(ie)});return}}else if(l===31){if(l=A(ie),l!==null){s.blockedOn=l,Mi(s.priority,function(){kh(ie)});return}}else if(l===3&&ie.stateNode.current.memoizedState.isDehydrated){s.blockedOn=ie.tag===3?ie.stateNode.containerInfo:null;return}}}s.blockedOn=null}function rl(s){if(s.blockedOn!==null)return!1;for(var l=s.targetContainers;0<l.length;){var ie=ic(s.nativeEvent);if(ie===null){ie=s.nativeEvent;var fe=new ie.constructor(ie.type,ie);Os=fe,ie.target.dispatchEvent(fe),Os=null}else return l=Xt(ie),l!==null&&Lh(l),s.blockedOn=ie,!1;l.shift()}return!0}function $h(s,l,ie){rl(s)&&ie.delete(l)}function Wm(){oc=!1,Ki!==null&&rl(Ki)&&(Ki=null),Qi!==null&&rl(Qi)&&(Qi=null),Zi!==null&&rl(Zi)&&(Zi=null),Zo.forEach($h),Jo.forEach($h)}function il(s,l){s.blockedOn===l&&(s.blockedOn=null,oc||(oc=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,Wm)))}var sl=null;function Uh(s){sl!==s&&(sl=s,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){sl===s&&(sl=null);for(var l=0;l<s.length;l+=3){var ie=s[l],fe=s[l+1],me=s[l+2];if(typeof fe!="function"){if(sc(fe||ie)===null)continue;break}var ye=Xt(ie);ye!==null&&(s.splice(l,3),l-=3,ru(ye,{pending:!0,data:me,method:ie.method,action:fe},fe,me))}}))}function so(s){function l(Qe){return il(Qe,s)}Ki!==null&&il(Ki,s),Qi!==null&&il(Qi,s),Zi!==null&&il(Zi,s),Zo.forEach(l),Jo.forEach(l);for(var ie=0;ie<Ji.length;ie++){var fe=Ji[ie];fe.blockedOn===s&&(fe.blockedOn=null)}for(;0<Ji.length&&(ie=Ji[0],ie.blockedOn===null);)jh(ie),ie.blockedOn===null&&Ji.shift();if(ie=(s.ownerDocument||s).$$reactFormReplay,ie!=null)for(fe=0;fe<ie.length;fe+=3){var me=ie[fe],ye=ie[fe+1],Ie=me[Be]||null;if(typeof ye=="function")Ie||Uh(ie);else if(Ie){var Fe=null;if(ye&&ye.hasAttribute("formAction")){if(me=ye,Ie=ye[Be]||null)Fe=Ie.formAction;else if(sc(me)!==null)continue}else Fe=Ie.action;typeof Fe=="function"?ie[fe+1]=Fe:(ie.splice(fe,3),fe-=3),Uh(ie)}}}function zh(){function s(ye){ye.canIntercept&&ye.info==="react-transition"&&ye.intercept({handler:function(){return new Promise(function(Ie){return me=Ie})},focusReset:"manual",scroll:"manual"})}function l(){me!==null&&(me(),me=null),fe||setTimeout(ie,20)}function ie(){if(!fe&&!navigation.transition){var ye=navigation.currentEntry;ye&&ye.url!=null&&navigation.navigate(ye.url,{state:ye.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var fe=!1,me=null;return navigation.addEventListener("navigate",s),navigation.addEventListener("navigatesuccess",l),navigation.addEventListener("navigateerror",l),setTimeout(ie,100),function(){fe=!0,navigation.removeEventListener("navigate",s),navigation.removeEventListener("navigatesuccess",l),navigation.removeEventListener("navigateerror",l),me!==null&&(me(),me=null)}}}function ac(s){this._internalRoot=s}ol.prototype.render=ac.prototype.render=function(s){var l=this._internalRoot;if(l===null)throw Error(r(409));var ie=l.current,fe=Or();Ch(ie,fe,s,l,null,null)},ol.prototype.unmount=ac.prototype.unmount=function(){var s=this._internalRoot;if(s!==null){this._internalRoot=null;var l=s.containerInfo;Ch(s.current,2,null,s,null,null),$a(),l[We]=null}};function ol(s){this._internalRoot=s}ol.prototype.unstable_scheduleHydration=function(s){if(s){var l=Ii();s={blockedOn:null,target:s,priority:l};for(var ie=0;ie<Ji.length&&l!==0&&l<Ji[ie].priority;ie++);Ji.splice(ie,0,s),ie===0&&jh(s)}};var Vh=e.version;if(Vh!=="19.2.3")throw Error(r(527,Vh,"19.2.3"));je.findDOMNode=function(s){var l=s._reactInternals;if(l===void 0)throw typeof s.render=="function"?Error(r(188)):(s=Object.keys(s).join(","),Error(r(268,s)));return s=G(l),s=s!==null?B(s):null,s=s===null?null:s.stateNode,s};var Xm={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:Me,reconcilerVersion:"19.2.3"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var al=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!al.isDisabled&&al.supportsFiber)try{Et=al.inject(Xm),It=al}catch{}}return reactDomClient_production.createRoot=function(s,l){if(!u(s))throw Error(r(299));var ie=!1,fe="",me=qd,ye=Yd,Ie=Wd;return l!=null&&(l.unstable_strictMode===!0&&(ie=!0),l.identifierPrefix!==void 0&&(fe=l.identifierPrefix),l.onUncaughtError!==void 0&&(me=l.onUncaughtError),l.onCaughtError!==void 0&&(ye=l.onCaughtError),l.onRecoverableError!==void 0&&(Ie=l.onRecoverableError)),l=Rh(s,1,!1,null,null,ie,fe,null,me,ye,Ie,zh),s[We]=l.current,zu(s),new ac(l)},reactDomClient_production.hydrateRoot=function(s,l,ie){if(!u(s))throw Error(r(299));var fe=!1,me="",ye=qd,Ie=Yd,Fe=Wd,Qe=null;return ie!=null&&(ie.unstable_strictMode===!0&&(fe=!0),ie.identifierPrefix!==void 0&&(me=ie.identifierPrefix),ie.onUncaughtError!==void 0&&(ye=ie.onUncaughtError),ie.onCaughtError!==void 0&&(Ie=ie.onCaughtError),ie.onRecoverableError!==void 0&&(Fe=ie.onRecoverableError),ie.formState!==void 0&&(Qe=ie.formState)),l=Rh(s,1,!0,l,ie??null,fe,me,Qe,ye,Ie,Fe,zh),l.context=Dh(null),ie=l.current,fe=Or(),fe=ei(fe),me=Bi(fe),me.callback=null,ji(ie,me,fe),ie=fe,l.current.lanes=ie,Ur(l,ie),Qr(l),s[We]=l.current,zu(s),new ol(l)},reactDomClient_production.version="19.2.3",reactDomClient_production}var hasRequiredClient;function requireClient(){if(hasRequiredClient)return client.exports;hasRequiredClient=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),client.exports=requireReactDomClient_production(),client.exports}var clientExports=requireClient(),reactExports=requireReact();function __awaiter(n,e,t,r){function u(T){return T instanceof t?T:new t(function(d){d(T)})}return new(t||(t=Promise))(function(T,d){function A(B){try{G(r.next(B))}catch(o){d(o)}}function le(B){try{G(r.throw(B))}catch(o){d(o)}}function G(B){B.done?T(B.value):u(B.value).then(A,le)}G((r=r.apply(n,e||[])).next())})}function __values(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function __await(n){return this instanceof __await?(this.v=n,this):new __await(n)}function __asyncGenerator(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=t.apply(n,e||[]),u,T=[];return u=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),A("next"),A("throw"),A("return",d),u[Symbol.asyncIterator]=function(){return this},u;function d(w){return function(ae){return Promise.resolve(ae).then(w,o)}}function A(w,ae){r[w]&&(u[w]=function(ue){return new Promise(function(he,pe){T.push([w,ue,he,pe])>1||le(w,ue)})},ae&&(u[w]=ae(u[w])))}function le(w,ae){try{G(r[w](ae))}catch(ue){i(T[0][3],ue)}}function G(w){w.value instanceof __await?Promise.resolve(w.value.v).then(B,o):i(T[0][2],w)}function B(w){le("next",w)}function o(w){le("throw",w)}function i(w,ae){w(ae),T.shift(),T.length&&le(T[0][0],T[0][1])}}function __asyncDelegator(n){var e,t;return e={},r("next"),r("throw",function(u){throw u}),r("return"),e[Symbol.iterator]=function(){return this},e;function r(u,T){e[u]=n[u]?function(d){return(t=!t)?{value:__await(n[u](d)),done:!1}:T?T(d):d}:T}}function __asyncValues(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof __values=="function"?__values(n):n[Symbol.iterator](),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(T){t[T]=n[T]&&function(d){return new Promise(function(A,le){d=n[T](d),u(A,le,d.done,d.value)})}}function u(T,d,A,le){Promise.resolve(le).then(function(G){T({value:G,done:A})},d)}}typeof SuppressedError=="function"&&SuppressedError;const decoder=new TextDecoder("utf-8"),decodeUtf8=n=>decoder.decode(n),encoder=new TextEncoder,encodeUtf8=n=>encoder.encode(n),isNumber=n=>typeof n=="number",isBoolean=n=>typeof n=="boolean",isFunction=n=>typeof n=="function",isObject=n=>n!=null&&Object(n)===n,isPromise=n=>isObject(n)&&isFunction(n.then),isIterable=n=>isObject(n)&&isFunction(n[Symbol.iterator]),isAsyncIterable=n=>isObject(n)&&isFunction(n[Symbol.asyncIterator]),isArrowJSON=n=>isObject(n)&&isObject(n.schema),isIteratorResult=n=>isObject(n)&&"done"in n&&"value"in n,isFileHandle=n=>isObject(n)&&isFunction(n.stat)&&isNumber(n.fd),isFetchResponse=n=>isObject(n)&&isReadableDOMStream(n.body),isReadableInterop=n=>"_getDOMStream"in n&&"_getNodeStream"in n,isWritableDOMStream=n=>isObject(n)&&isFunction(n.abort)&&isFunction(n.getWriter)&&!isReadableInterop(n),isReadableDOMStream=n=>isObject(n)&&isFunction(n.cancel)&&isFunction(n.getReader)&&!isReadableInterop(n),isWritableNodeStream=n=>isObject(n)&&isFunction(n.end)&&isFunction(n.write)&&isBoolean(n.writable)&&!isReadableInterop(n),isReadableNodeStream=n=>isObject(n)&&isFunction(n.read)&&isFunction(n.pipe)&&isBoolean(n.readable)&&!isReadableInterop(n),isFlatbuffersByteBuffer=n=>isObject(n)&&isFunction(n.clear)&&isFunction(n.bytes)&&isFunction(n.position)&&isFunction(n.setPosition)&&isFunction(n.capacity)&&isFunction(n.getBufferIdentifier)&&isFunction(n.createLong),SharedArrayBuf=typeof SharedArrayBuffer<"u"?SharedArrayBuffer:ArrayBuffer;function collapseContiguousByteRanges(n){const e=n[0]?[n[0]]:[];let t,r,u,T;for(let d,A,le=0,G=0,B=n.length;++le<B;){if(d=e[G],A=n[le],!d||!A||d.buffer!==A.buffer||A.byteOffset<d.byteOffset){A&&(e[++G]=A);continue}if({byteOffset:t,byteLength:u}=d,{byteOffset:r,byteLength:T}=A,t+u<r||r+T<t){A&&(e[++G]=A);continue}e[G]=new Uint8Array(d.buffer,t,r-t+T)}return e}function memcpy(n,e,t=0,r=e.byteLength){const u=n.byteLength,T=new Uint8Array(n.buffer,n.byteOffset,u),d=new Uint8Array(e.buffer,e.byteOffset,Math.min(r,u));return T.set(d,t),n}function joinUint8Arrays(n,e){const t=collapseContiguousByteRanges(n),r=t.reduce((B,o)=>B+o.byteLength,0);let u,T,d,A=0,le=-1;const G=Math.min(e||Number.POSITIVE_INFINITY,r);for(const B=t.length;++le<B;){if(u=t[le],T=u.subarray(0,Math.min(u.length,G-A)),G<=A+T.length){T.length<u.length?t[le]=u.subarray(T.length):T.length===u.length&&le++,d?memcpy(d,T,A):d=T;break}memcpy(d||(d=new Uint8Array(G)),T,A),A+=T.length}return[d||new Uint8Array(0),t.slice(le),r-(d?d.byteLength:0)]}function toArrayBufferView(n,e){let t=isIteratorResult(e)?e.value:e;return t instanceof n?n===Uint8Array?new n(t.buffer,t.byteOffset,t.byteLength):t:t?(typeof t=="string"&&(t=encodeUtf8(t)),t instanceof ArrayBuffer?new n(t):t instanceof SharedArrayBuf?new n(t):isFlatbuffersByteBuffer(t)?toArrayBufferView(n,t.bytes()):ArrayBuffer.isView(t)?t.byteLength<=0?new n(0):new n(t.buffer,t.byteOffset,t.byteLength/n.BYTES_PER_ELEMENT):n.from(t)):new n(0)}const toInt32Array=n=>toArrayBufferView(Int32Array,n),toUint8Array=n=>toArrayBufferView(Uint8Array,n),pump$1=n=>(n.next(),n);function*toArrayBufferViewIterator(n,e){const t=function*(u){yield u},r=typeof e=="string"||ArrayBuffer.isView(e)||e instanceof ArrayBuffer||e instanceof SharedArrayBuf?t(e):isIterable(e)?e:t(e);return yield*pump$1((function*(u){let T=null;do T=u.next(yield toArrayBufferView(n,T));while(!T.done)})(r[Symbol.iterator]())),new n}const toUint8ArrayIterator=n=>toArrayBufferViewIterator(Uint8Array,n);function toArrayBufferViewAsyncIterator(n,e){return __asyncGenerator(this,arguments,function*(){if(isPromise(e))return yield __await(yield __await(yield*__asyncDelegator(__asyncValues(toArrayBufferViewAsyncIterator(n,yield __await(e))))));const r=function(d){return __asyncGenerator(this,arguments,function*(){yield yield __await(yield __await(d))})},u=function(d){return __asyncGenerator(this,arguments,function*(){yield __await(yield*__asyncDelegator(__asyncValues(pump$1((function*(A){let le=null;do le=A.next(yield le==null?void 0:le.value);while(!le.done)})(d[Symbol.iterator]())))))})},T=typeof e=="string"||ArrayBuffer.isView(e)||e instanceof ArrayBuffer||e instanceof SharedArrayBuf?r(e):isIterable(e)?u(e):isAsyncIterable(e)?e:r(e);return yield __await(yield*__asyncDelegator(__asyncValues(pump$1((function(d){return __asyncGenerator(this,arguments,function*(){let A=null;do A=yield __await(d.next(yield yield __await(toArrayBufferView(n,A))));while(!A.done)})})(T[Symbol.asyncIterator]()))))),yield __await(new n)})}const toUint8ArrayAsyncIterator=n=>toArrayBufferViewAsyncIterator(Uint8Array,n);function rebaseValueOffsets(n,e,t){if(n!==0){t=t.slice(0,e+1);for(let r=-1;++r<=e;)t[r]+=n}return t}function compareArrayLike(n,e){let t=0;const r=n.length;if(r!==e.length)return!1;if(r>0)do if(n[t]!==e[t])return!1;while(++t<r);return!0}const streamAdapters={fromIterable(n){return pump(fromIterable(n))},fromAsyncIterable(n){return pump(fromAsyncIterable(n))},fromDOMStream(n){return pump(fromDOMStream(n))},fromNodeStream(n){return pump(fromNodeStream(n))},toDOMStream(n,e){throw new Error('"toDOMStream" not available in this environment')},toNodeStream(n,e){throw new Error('"toNodeStream" not available in this environment')}},pump=n=>(n.next(),n);function*fromIterable(n){let e,t=!1,r=[],u,T,d,A=0;function le(){return T==="peek"?joinUint8Arrays(r,d)[0]:([u,r,A]=joinUint8Arrays(r,d),u)}({cmd:T,size:d}=yield null);const G=toUint8ArrayIterator(n)[Symbol.iterator]();try{do if({done:e,value:u}=Number.isNaN(d-A)?G.next():G.next(d-A),!e&&u.byteLength>0&&(r.push(u),A+=u.byteLength),e||d<=A)do({cmd:T,size:d}=yield le());while(d<A);while(!e)}catch(B){(t=!0)&&typeof G.throw=="function"&&G.throw(B)}finally{t===!1&&typeof G.return=="function"&&G.return(null)}return null}function fromAsyncIterable(n){return __asyncGenerator(this,arguments,function*(){let t,r=!1,u=[],T,d,A,le=0;function G(){return d==="peek"?joinUint8Arrays(u,A)[0]:([T,u,le]=joinUint8Arrays(u,A),T)}({cmd:d,size:A}=yield yield __await(null));const B=toUint8ArrayAsyncIterator(n)[Symbol.asyncIterator]();try{do if({done:t,value:T}=Number.isNaN(A-le)?yield __await(B.next()):yield __await(B.next(A-le)),!t&&T.byteLength>0&&(u.push(T),le+=T.byteLength),t||A<=le)do({cmd:d,size:A}=yield yield __await(G()));while(A<le);while(!t)}catch(o){(r=!0)&&typeof B.throw=="function"&&(yield __await(B.throw(o)))}finally{r===!1&&typeof B.return=="function"&&(yield __await(B.return(new Uint8Array(0))))}return yield __await(null)})}function fromDOMStream(n){return __asyncGenerator(this,arguments,function*(){let t=!1,r=!1,u=[],T,d,A,le=0;function G(){return d==="peek"?joinUint8Arrays(u,A)[0]:([T,u,le]=joinUint8Arrays(u,A),T)}({cmd:d,size:A}=yield yield __await(null));const B=new AdaptiveByteReader(n);try{do if({done:t,value:T}=Number.isNaN(A-le)?yield __await(B.read()):yield __await(B.read(A-le)),!t&&T.byteLength>0&&(u.push(toUint8Array(T)),le+=T.byteLength),t||A<=le)do({cmd:d,size:A}=yield yield __await(G()));while(A<le);while(!t)}catch(o){(r=!0)&&(yield __await(B.cancel(o)))}finally{r===!1?yield __await(B.cancel()):n.locked&&B.releaseLock()}return yield __await(null)})}class AdaptiveByteReader{constructor(e){this.source=e,this.reader=null,this.reader=this.source.getReader(),this.reader.closed.catch(()=>{})}get closed(){return this.reader?this.reader.closed.catch(()=>{}):Promise.resolve()}releaseLock(){this.reader&&this.reader.releaseLock(),this.reader=null}cancel(e){return __awaiter(this,void 0,void 0,function*(){const{reader:t,source:r}=this;t&&(yield t.cancel(e).catch(()=>{})),r&&r.locked&&this.releaseLock()})}read(e){return __awaiter(this,void 0,void 0,function*(){if(e===0)return{done:this.reader==null,value:new Uint8Array(0)};const t=yield this.reader.read();return!t.done&&(t.value=toUint8Array(t)),t})}}const onEvent=(n,e)=>{const t=u=>r([e,u]);let r;return[e,t,new Promise(u=>(r=u)&&n.once(e,t))]};function fromNodeStream(n){return __asyncGenerator(this,arguments,function*(){const t=[];let r="error",u=!1,T=null,d,A,le=0,G=[],B;function o(){return d==="peek"?joinUint8Arrays(G,A)[0]:([B,G,le]=joinUint8Arrays(G,A),B)}if({cmd:d,size:A}=yield yield __await(null),n.isTTY)return yield yield __await(new Uint8Array(0)),yield __await(null);try{t[0]=onEvent(n,"end"),t[1]=onEvent(n,"error");do{if(t[2]=onEvent(n,"readable"),[r,T]=yield __await(Promise.race(t.map(w=>w[2]))),r==="error")break;if((u=r==="end")||(Number.isFinite(A-le)?(B=toUint8Array(n.read(A-le)),B.byteLength<A-le&&(B=toUint8Array(n.read()))):B=toUint8Array(n.read()),B.byteLength>0&&(G.push(B),le+=B.byteLength)),u||A<=le)do({cmd:d,size:A}=yield yield __await(o()));while(A<le)}while(!u)}finally{yield __await(i(t,r==="error"?T:null))}return yield __await(null);function i(w,ae){return B=G=null,new Promise((ue,he)=>{for(const[pe,ge]of w)n.off(pe,ge);try{const pe=n.destroy;pe&&pe.call(n,ae),ae=void 0}catch(pe){ae=pe||ae}finally{ae!=null?he(ae):ue()}})}})}var MetadataVersion$1;(function(n){n[n.V1=0]="V1",n[n.V2=1]="V2",n[n.V3=2]="V3",n[n.V4=3]="V4",n[n.V5=4]="V5"})(MetadataVersion$1||(MetadataVersion$1={}));var UnionMode$1;(function(n){n[n.Sparse=0]="Sparse",n[n.Dense=1]="Dense"})(UnionMode$1||(UnionMode$1={}));var Precision$1;(function(n){n[n.HALF=0]="HALF",n[n.SINGLE=1]="SINGLE",n[n.DOUBLE=2]="DOUBLE"})(Precision$1||(Precision$1={}));var DateUnit$1;(function(n){n[n.DAY=0]="DAY",n[n.MILLISECOND=1]="MILLISECOND"})(DateUnit$1||(DateUnit$1={}));var TimeUnit$1;(function(n){n[n.SECOND=0]="SECOND",n[n.MILLISECOND=1]="MILLISECOND",n[n.MICROSECOND=2]="MICROSECOND",n[n.NANOSECOND=3]="NANOSECOND"})(TimeUnit$1||(TimeUnit$1={}));var IntervalUnit$1;(function(n){n[n.YEAR_MONTH=0]="YEAR_MONTH",n[n.DAY_TIME=1]="DAY_TIME",n[n.MONTH_DAY_NANO=2]="MONTH_DAY_NANO"})(IntervalUnit$1||(IntervalUnit$1={}));var MessageHeader$1;(function(n){n[n.NONE=0]="NONE",n[n.Schema=1]="Schema",n[n.DictionaryBatch=2]="DictionaryBatch",n[n.RecordBatch=3]="RecordBatch",n[n.Tensor=4]="Tensor",n[n.SparseTensor=5]="SparseTensor"})(MessageHeader$1||(MessageHeader$1={}));var Type$1;(function(n){n[n.NONE=0]="NONE",n[n.Null=1]="Null",n[n.Int=2]="Int",n[n.Float=3]="Float",n[n.Binary=4]="Binary",n[n.Utf8=5]="Utf8",n[n.Bool=6]="Bool",n[n.Decimal=7]="Decimal",n[n.Date=8]="Date",n[n.Time=9]="Time",n[n.Timestamp=10]="Timestamp",n[n.Interval=11]="Interval",n[n.List=12]="List",n[n.Struct=13]="Struct",n[n.Union=14]="Union",n[n.FixedSizeBinary=15]="FixedSizeBinary",n[n.FixedSizeList=16]="FixedSizeList",n[n.Map=17]="Map",n[n.Dictionary=-1]="Dictionary",n[n.Int8=-2]="Int8",n[n.Int16=-3]="Int16",n[n.Int32=-4]="Int32",n[n.Int64=-5]="Int64",n[n.Uint8=-6]="Uint8",n[n.Uint16=-7]="Uint16",n[n.Uint32=-8]="Uint32",n[n.Uint64=-9]="Uint64",n[n.Float16=-10]="Float16",n[n.Float32=-11]="Float32",n[n.Float64=-12]="Float64",n[n.DateDay=-13]="DateDay",n[n.DateMillisecond=-14]="DateMillisecond",n[n.TimestampSecond=-15]="TimestampSecond",n[n.TimestampMillisecond=-16]="TimestampMillisecond",n[n.TimestampMicrosecond=-17]="TimestampMicrosecond",n[n.TimestampNanosecond=-18]="TimestampNanosecond",n[n.TimeSecond=-19]="TimeSecond",n[n.TimeMillisecond=-20]="TimeMillisecond",n[n.TimeMicrosecond=-21]="TimeMicrosecond",n[n.TimeNanosecond=-22]="TimeNanosecond",n[n.DenseUnion=-23]="DenseUnion",n[n.SparseUnion=-24]="SparseUnion",n[n.IntervalDayTime=-25]="IntervalDayTime",n[n.IntervalYearMonth=-26]="IntervalYearMonth"})(Type$1||(Type$1={}));var BufferType;(function(n){n[n.OFFSET=0]="OFFSET",n[n.DATA=1]="DATA",n[n.VALIDITY=2]="VALIDITY",n[n.TYPE=3]="TYPE"})(BufferType||(BufferType={}));const undf=void 0;function valueToString(n){if(n===null)return"null";if(n===undf)return"undefined";switch(typeof n){case"number":return`${n}`;case"bigint":return`${n}`;case"string":return`"${n}"`}return typeof n[Symbol.toPrimitive]=="function"?n[Symbol.toPrimitive]("string"):ArrayBuffer.isView(n)?n instanceof BigInt64Array||n instanceof BigUint64Array?`[${[...n].map(e=>valueToString(e))}]`:`[${n}]`:ArrayBuffer.isView(n)?`[${n}]`:JSON.stringify(n,(e,t)=>typeof t=="bigint"?`${t}`:t)}const isArrowBigNumSymbol=Symbol.for("isArrowBigNum");function BigNum(n,...e){return e.length===0?Object.setPrototypeOf(toArrayBufferView(this.TypedArray,n),this.constructor.prototype):Object.setPrototypeOf(new this.TypedArray(n,...e),this.constructor.prototype)}BigNum.prototype[isArrowBigNumSymbol]=!0;BigNum.prototype.toJSON=function(){return`"${bigNumToString(this)}"`};BigNum.prototype.valueOf=function(){return bigNumToNumber(this)};BigNum.prototype.toString=function(){return bigNumToString(this)};BigNum.prototype[Symbol.toPrimitive]=function(n="default"){switch(n){case"number":return bigNumToNumber(this);case"string":return bigNumToString(this);case"default":return bigNumToBigInt(this)}return bigNumToString(this)};function SignedBigNum(...n){return BigNum.apply(this,n)}function UnsignedBigNum(...n){return BigNum.apply(this,n)}function DecimalBigNum(...n){return BigNum.apply(this,n)}Object.setPrototypeOf(SignedBigNum.prototype,Object.create(Int32Array.prototype));Object.setPrototypeOf(UnsignedBigNum.prototype,Object.create(Uint32Array.prototype));Object.setPrototypeOf(DecimalBigNum.prototype,Object.create(Uint32Array.prototype));Object.assign(SignedBigNum.prototype,BigNum.prototype,{constructor:SignedBigNum,signed:!0,TypedArray:Int32Array,BigIntArray:BigInt64Array});Object.assign(UnsignedBigNum.prototype,BigNum.prototype,{constructor:UnsignedBigNum,signed:!1,TypedArray:Uint32Array,BigIntArray:BigUint64Array});Object.assign(DecimalBigNum.prototype,BigNum.prototype,{constructor:DecimalBigNum,signed:!0,TypedArray:Uint32Array,BigIntArray:BigUint64Array});function bigNumToNumber(n){const{buffer:e,byteOffset:t,length:r,signed:u}=n,T=new BigUint64Array(e,t,r),d=u&&T.at(-1)&BigInt(1)<<BigInt(63);let A=BigInt(d?1:0),le=BigInt(0);if(d){for(const G of T)A+=~G*(BigInt(1)<<BigInt(32)*le++);A*=BigInt(-1)}else for(const G of T)A+=G*(BigInt(1)<<BigInt(32)*le++);return A}const bigNumToString=(n=>{if(n.byteLength===8)return`${new n.BigIntArray(n.buffer,n.byteOffset,1)[0]}`;if(!n.signed)return unsignedBigNumToString(n);let e=new Uint16Array(n.buffer,n.byteOffset,n.byteLength/2);if(new Int16Array([e.at(-1)])[0]>=0)return unsignedBigNumToString(n);e=e.slice();let r=1;for(let T=0;T<e.length;T++){const d=e[T],A=~d+r;e[T]=A,r&=d===0?1:0}return`-${unsignedBigNumToString(e)}`}),bigNumToBigInt=(n=>n.byteLength===8?new n.BigIntArray(n.buffer,n.byteOffset,1)[0]:bigNumToString(n));function unsignedBigNumToString(n){let e="";const t=new Uint32Array(2);let r=new Uint16Array(n.buffer,n.byteOffset,n.byteLength/2);const u=new Uint32Array((r=new Uint16Array(r).reverse()).buffer);let T=-1;const d=r.length-1;do{for(t[0]=r[T=0];T<d;)r[T++]=t[1]=t[0]/10,t[0]=(t[0]-t[1]*10<<16)+r[T];r[T]=t[1]=t[0]/10,t[0]=t[0]-t[1]*10,e=`${t[0]}${e}`}while(u[0]||u[1]||u[2]||u[3]);return e??"0"}class BN{static new(e,t){switch(t){case!0:return new SignedBigNum(e);case!1:return new UnsignedBigNum(e)}switch(e.constructor){case Int8Array:case Int16Array:case Int32Array:case BigInt64Array:return new SignedBigNum(e)}return e.byteLength===16?new DecimalBigNum(e):new UnsignedBigNum(e)}static signed(e){return new SignedBigNum(e)}static unsigned(e){return new UnsignedBigNum(e)}static decimal(e){return new DecimalBigNum(e)}constructor(e,t){return BN.new(e,t)}}function bigIntToNumber(n){if(typeof n=="bigint"&&(n<Number.MIN_SAFE_INTEGER||n>Number.MAX_SAFE_INTEGER))throw new TypeError(`${n} is not safe to convert to a number.`);return Number(n)}var _a$3,_b,_c,_d,_e,_f,_g,_h,_j,_k,_l,_m,_o,_p,_q,_r,_s,_t,_u;class DataType{static isNull(e){return(e==null?void 0:e.typeId)===Type$1.Null}static isInt(e){return(e==null?void 0:e.typeId)===Type$1.Int}static isFloat(e){return(e==null?void 0:e.typeId)===Type$1.Float}static isBinary(e){return(e==null?void 0:e.typeId)===Type$1.Binary}static isUtf8(e){return(e==null?void 0:e.typeId)===Type$1.Utf8}static isBool(e){return(e==null?void 0:e.typeId)===Type$1.Bool}static isDecimal(e){return(e==null?void 0:e.typeId)===Type$1.Decimal}static isDate(e){return(e==null?void 0:e.typeId)===Type$1.Date}static isTime(e){return(e==null?void 0:e.typeId)===Type$1.Time}static isTimestamp(e){return(e==null?void 0:e.typeId)===Type$1.Timestamp}static isInterval(e){return(e==null?void 0:e.typeId)===Type$1.Interval}static isList(e){return(e==null?void 0:e.typeId)===Type$1.List}static isStruct(e){return(e==null?void 0:e.typeId)===Type$1.Struct}static isUnion(e){return(e==null?void 0:e.typeId)===Type$1.Union}static isFixedSizeBinary(e){return(e==null?void 0:e.typeId)===Type$1.FixedSizeBinary}static isFixedSizeList(e){return(e==null?void 0:e.typeId)===Type$1.FixedSizeList}static isMap(e){return(e==null?void 0:e.typeId)===Type$1.Map}static isDictionary(e){return(e==null?void 0:e.typeId)===Type$1.Dictionary}static isDenseUnion(e){return DataType.isUnion(e)&&e.mode===UnionMode$1.Dense}static isSparseUnion(e){return DataType.isUnion(e)&&e.mode===UnionMode$1.Sparse}get typeId(){return Type$1.NONE}}_a$3=Symbol.toStringTag;DataType[_a$3]=(n=>(n.children=null,n.ArrayType=Array,n[Symbol.toStringTag]="DataType"))(DataType.prototype);let Null$1=class extends DataType{toString(){return"Null"}get typeId(){return Type$1.Null}};_b=Symbol.toStringTag;Null$1[_b]=(n=>n[Symbol.toStringTag]="Null")(Null$1.prototype);class Int_ extends DataType{constructor(e,t){super(),this.isSigned=e,this.bitWidth=t}get typeId(){return Type$1.Int}get ArrayType(){switch(this.bitWidth){case 8:return this.isSigned?Int8Array:Uint8Array;case 16:return this.isSigned?Int16Array:Uint16Array;case 32:return this.isSigned?Int32Array:Uint32Array;case 64:return this.isSigned?BigInt64Array:BigUint64Array}throw new Error(`Unrecognized ${this[Symbol.toStringTag]} type`)}toString(){return`${this.isSigned?"I":"Ui"}nt${this.bitWidth}`}}_c=Symbol.toStringTag;Int_[_c]=(n=>(n.isSigned=null,n.bitWidth=null,n[Symbol.toStringTag]="Int"))(Int_.prototype);class Int32 extends Int_{constructor(){super(!0,32)}get ArrayType(){return Int32Array}}Object.defineProperty(Int32.prototype,"ArrayType",{value:Int32Array});class Float extends DataType{constructor(e){super(),this.precision=e}get typeId(){return Type$1.Float}get ArrayType(){switch(this.precision){case Precision$1.HALF:return Uint16Array;case Precision$1.SINGLE:return Float32Array;case Precision$1.DOUBLE:return Float64Array}throw new Error(`Unrecognized ${this[Symbol.toStringTag]} type`)}toString(){return`Float${this.precision<<5||16}`}}_d=Symbol.toStringTag;Float[_d]=(n=>(n.precision=null,n[Symbol.toStringTag]="Float"))(Float.prototype);let Binary$1=class extends DataType{constructor(){super()}get typeId(){return Type$1.Binary}toString(){return"Binary"}};_e=Symbol.toStringTag;Binary$1[_e]=(n=>(n.ArrayType=Uint8Array,n[Symbol.toStringTag]="Binary"))(Binary$1.prototype);let Utf8$1=class extends DataType{constructor(){super()}get typeId(){return Type$1.Utf8}toString(){return"Utf8"}};_f=Symbol.toStringTag;Utf8$1[_f]=(n=>(n.ArrayType=Uint8Array,n[Symbol.toStringTag]="Utf8"))(Utf8$1.prototype);let Bool$1=class extends DataType{constructor(){super()}get typeId(){return Type$1.Bool}toString(){return"Bool"}};_g=Symbol.toStringTag;Bool$1[_g]=(n=>(n.ArrayType=Uint8Array,n[Symbol.toStringTag]="Bool"))(Bool$1.prototype);let Decimal$1=class extends DataType{constructor(e,t,r=128){super(),this.scale=e,this.precision=t,this.bitWidth=r}get typeId(){return Type$1.Decimal}toString(){return`Decimal[${this.precision}e${this.scale>0?"+":""}${this.scale}]`}};_h=Symbol.toStringTag;Decimal$1[_h]=(n=>(n.scale=null,n.precision=null,n.ArrayType=Uint32Array,n[Symbol.toStringTag]="Decimal"))(Decimal$1.prototype);class Date_ extends DataType{constructor(e){super(),this.unit=e}get typeId(){return Type$1.Date}toString(){return`Date${(this.unit+1)*32}<${DateUnit$1[this.unit]}>`}}_j=Symbol.toStringTag;Date_[_j]=(n=>(n.unit=null,n.ArrayType=Int32Array,n[Symbol.toStringTag]="Date"))(Date_.prototype);class Time_ extends DataType{constructor(e,t){super(),this.unit=e,this.bitWidth=t}get typeId(){return Type$1.Time}toString(){return`Time${this.bitWidth}<${TimeUnit$1[this.unit]}>`}get ArrayType(){switch(this.bitWidth){case 32:return Int32Array;case 64:return BigInt64Array}throw new Error(`Unrecognized ${this[Symbol.toStringTag]} type`)}}_k=Symbol.toStringTag;Time_[_k]=(n=>(n.unit=null,n.bitWidth=null,n[Symbol.toStringTag]="Time"))(Time_.prototype);class Timestamp_ extends DataType{constructor(e,t){super(),this.unit=e,this.timezone=t}get typeId(){return Type$1.Timestamp}toString(){return`Timestamp<${TimeUnit$1[this.unit]}${this.timezone?`, ${this.timezone}`:""}>`}}_l=Symbol.toStringTag;Timestamp_[_l]=(n=>(n.unit=null,n.timezone=null,n.ArrayType=Int32Array,n[Symbol.toStringTag]="Timestamp"))(Timestamp_.prototype);class Interval_ extends DataType{constructor(e){super(),this.unit=e}get typeId(){return Type$1.Interval}toString(){return`Interval<${IntervalUnit$1[this.unit]}>`}}_m=Symbol.toStringTag;Interval_[_m]=(n=>(n.unit=null,n.ArrayType=Int32Array,n[Symbol.toStringTag]="Interval"))(Interval_.prototype);let List$1=class extends DataType{constructor(e){super(),this.children=[e]}get typeId(){return Type$1.List}toString(){return`List<${this.valueType}>`}get valueType(){return this.children[0].type}get valueField(){return this.children[0]}get ArrayType(){return this.valueType.ArrayType}};_o=Symbol.toStringTag;List$1[_o]=(n=>(n.children=null,n[Symbol.toStringTag]="List"))(List$1.prototype);class Struct extends DataType{constructor(e){super(),this.children=e}get typeId(){return Type$1.Struct}toString(){return`Struct<{${this.children.map(e=>`${e.name}:${e.type}`).join(", ")}}>`}}_p=Symbol.toStringTag;Struct[_p]=(n=>(n.children=null,n[Symbol.toStringTag]="Struct"))(Struct.prototype);class Union_ extends DataType{constructor(e,t,r){super(),this.mode=e,this.children=r,this.typeIds=t=Int32Array.from(t),this.typeIdToChildIndex=t.reduce((u,T,d)=>(u[T]=d)&&u||u,Object.create(null))}get typeId(){return Type$1.Union}toString(){return`${this[Symbol.toStringTag]}<${this.children.map(e=>`${e.type}`).join(" | ")}>`}}_q=Symbol.toStringTag;Union_[_q]=(n=>(n.mode=null,n.typeIds=null,n.children=null,n.typeIdToChildIndex=null,n.ArrayType=Int8Array,n[Symbol.toStringTag]="Union"))(Union_.prototype);let FixedSizeBinary$1=class extends DataType{constructor(e){super(),this.byteWidth=e}get typeId(){return Type$1.FixedSizeBinary}toString(){return`FixedSizeBinary[${this.byteWidth}]`}};_r=Symbol.toStringTag;FixedSizeBinary$1[_r]=(n=>(n.byteWidth=null,n.ArrayType=Uint8Array,n[Symbol.toStringTag]="FixedSizeBinary"))(FixedSizeBinary$1.prototype);let FixedSizeList$1=class extends DataType{constructor(e,t){super(),this.listSize=e,this.children=[t]}get typeId(){return Type$1.FixedSizeList}get valueType(){return this.children[0].type}get valueField(){return this.children[0]}get ArrayType(){return this.valueType.ArrayType}toString(){return`FixedSizeList[${this.listSize}]<${this.valueType}>`}};_s=Symbol.toStringTag;FixedSizeList$1[_s]=(n=>(n.children=null,n.listSize=null,n[Symbol.toStringTag]="FixedSizeList"))(FixedSizeList$1.prototype);class Map_ extends DataType{constructor(e,t=!1){super(),this.children=[e],this.keysSorted=t}get typeId(){return Type$1.Map}get keyType(){return this.children[0].type.children[0].type}get valueType(){return this.children[0].type.children[1].type}get childType(){return this.children[0].type}toString(){return`Map<{${this.children[0].type.children.map(e=>`${e.name}:${e.type}`).join(", ")}}>`}}_t=Symbol.toStringTag;Map_[_t]=(n=>(n.children=null,n.keysSorted=null,n[Symbol.toStringTag]="Map_"))(Map_.prototype);const getId=(n=>()=>++n)(-1);class Dictionary extends DataType{constructor(e,t,r,u){super(),this.indices=t,this.dictionary=e,this.isOrdered=u||!1,this.id=r==null?getId():bigIntToNumber(r)}get typeId(){return Type$1.Dictionary}get children(){return this.dictionary.children}get valueType(){return this.dictionary}get ArrayType(){return this.dictionary.ArrayType}toString(){return`Dictionary<${this.indices}, ${this.dictionary}>`}}_u=Symbol.toStringTag;Dictionary[_u]=(n=>(n.id=null,n.indices=null,n.isOrdered=null,n.dictionary=null,n[Symbol.toStringTag]="Dictionary"))(Dictionary.prototype);function strideForType(n){const e=n;switch(n.typeId){case Type$1.Decimal:return n.bitWidth/32;case Type$1.Timestamp:return 2;case Type$1.Date:return 1+e.unit;case Type$1.Interval:return 1+e.unit;case Type$1.FixedSizeList:return e.listSize;case Type$1.FixedSizeBinary:return e.byteWidth;default:return 1}}class Visitor{visitMany(e,...t){return e.map((r,u)=>this.visit(r,...t.map(T=>T[u])))}visit(...e){return this.getVisitFn(e[0],!1).apply(this,e)}getVisitFn(e,t=!0){return getVisitFn(this,e,t)}getVisitFnByTypeId(e,t=!0){return getVisitFnByTypeId(this,e,t)}visitNull(e,...t){return null}visitBool(e,...t){return null}visitInt(e,...t){return null}visitFloat(e,...t){return null}visitUtf8(e,...t){return null}visitBinary(e,...t){return null}visitFixedSizeBinary(e,...t){return null}visitDate(e,...t){return null}visitTimestamp(e,...t){return null}visitTime(e,...t){return null}visitDecimal(e,...t){return null}visitList(e,...t){return null}visitStruct(e,...t){return null}visitUnion(e,...t){return null}visitDictionary(e,...t){return null}visitInterval(e,...t){return null}visitFixedSizeList(e,...t){return null}visitMap(e,...t){return null}}function getVisitFn(n,e,t=!0){return typeof e=="number"?getVisitFnByTypeId(n,e,t):typeof e=="string"&&e in Type$1?getVisitFnByTypeId(n,Type$1[e],t):e&&e instanceof DataType?getVisitFnByTypeId(n,inferDType(e),t):e!=null&&e.type&&e.type instanceof DataType?getVisitFnByTypeId(n,inferDType(e.type),t):getVisitFnByTypeId(n,Type$1.NONE,t)}function getVisitFnByTypeId(n,e,t=!0){let r=null;switch(e){case Type$1.Null:r=n.visitNull;break;case Type$1.Bool:r=n.visitBool;break;case Type$1.Int:r=n.visitInt;break;case Type$1.Int8:r=n.visitInt8||n.visitInt;break;case Type$1.Int16:r=n.visitInt16||n.visitInt;break;case Type$1.Int32:r=n.visitInt32||n.visitInt;break;case Type$1.Int64:r=n.visitInt64||n.visitInt;break;case Type$1.Uint8:r=n.visitUint8||n.visitInt;break;case Type$1.Uint16:r=n.visitUint16||n.visitInt;break;case Type$1.Uint32:r=n.visitUint32||n.visitInt;break;case Type$1.Uint64:r=n.visitUint64||n.visitInt;break;case Type$1.Float:r=n.visitFloat;break;case Type$1.Float16:r=n.visitFloat16||n.visitFloat;break;case Type$1.Float32:r=n.visitFloat32||n.visitFloat;break;case Type$1.Float64:r=n.visitFloat64||n.visitFloat;break;case Type$1.Utf8:r=n.visitUtf8;break;case Type$1.Binary:r=n.visitBinary;break;case Type$1.FixedSizeBinary:r=n.visitFixedSizeBinary;break;case Type$1.Date:r=n.visitDate;break;case Type$1.DateDay:r=n.visitDateDay||n.visitDate;break;case Type$1.DateMillisecond:r=n.visitDateMillisecond||n.visitDate;break;case Type$1.Timestamp:r=n.visitTimestamp;break;case Type$1.TimestampSecond:r=n.visitTimestampSecond||n.visitTimestamp;break;case Type$1.TimestampMillisecond:r=n.visitTimestampMillisecond||n.visitTimestamp;break;case Type$1.TimestampMicrosecond:r=n.visitTimestampMicrosecond||n.visitTimestamp;break;case Type$1.TimestampNanosecond:r=n.visitTimestampNanosecond||n.visitTimestamp;break;case Type$1.Time:r=n.visitTime;break;case Type$1.TimeSecond:r=n.visitTimeSecond||n.visitTime;break;case Type$1.TimeMillisecond:r=n.visitTimeMillisecond||n.visitTime;break;case Type$1.TimeMicrosecond:r=n.visitTimeMicrosecond||n.visitTime;break;case Type$1.TimeNanosecond:r=n.visitTimeNanosecond||n.visitTime;break;case Type$1.Decimal:r=n.visitDecimal;break;case Type$1.List:r=n.visitList;break;case Type$1.Struct:r=n.visitStruct;break;case Type$1.Union:r=n.visitUnion;break;case Type$1.DenseUnion:r=n.visitDenseUnion||n.visitUnion;break;case Type$1.SparseUnion:r=n.visitSparseUnion||n.visitUnion;break;case Type$1.Dictionary:r=n.visitDictionary;break;case Type$1.Interval:r=n.visitInterval;break;case Type$1.IntervalDayTime:r=n.visitIntervalDayTime||n.visitInterval;break;case Type$1.IntervalYearMonth:r=n.visitIntervalYearMonth||n.visitInterval;break;case Type$1.FixedSizeList:r=n.visitFixedSizeList;break;case Type$1.Map:r=n.visitMap;break}if(typeof r=="function")return r;if(!t)return()=>null;throw new Error(`Unrecognized type '${Type$1[e]}'`)}function inferDType(n){switch(n.typeId){case Type$1.Null:return Type$1.Null;case Type$1.Int:{const{bitWidth:e,isSigned:t}=n;switch(e){case 8:return t?Type$1.Int8:Type$1.Uint8;case 16:return t?Type$1.Int16:Type$1.Uint16;case 32:return t?Type$1.Int32:Type$1.Uint32;case 64:return t?Type$1.Int64:Type$1.Uint64}return Type$1.Int}case Type$1.Float:switch(n.precision){case Precision$1.HALF:return Type$1.Float16;case Precision$1.SINGLE:return Type$1.Float32;case Precision$1.DOUBLE:return Type$1.Float64}return Type$1.Float;case Type$1.Binary:return Type$1.Binary;case Type$1.Utf8:return Type$1.Utf8;case Type$1.Bool:return Type$1.Bool;case Type$1.Decimal:return Type$1.Decimal;case Type$1.Time:switch(n.unit){case TimeUnit$1.SECOND:return Type$1.TimeSecond;case TimeUnit$1.MILLISECOND:return Type$1.TimeMillisecond;case TimeUnit$1.MICROSECOND:return Type$1.TimeMicrosecond;case TimeUnit$1.NANOSECOND:return Type$1.TimeNanosecond}return Type$1.Time;case Type$1.Timestamp:switch(n.unit){case TimeUnit$1.SECOND:return Type$1.TimestampSecond;case TimeUnit$1.MILLISECOND:return Type$1.TimestampMillisecond;case TimeUnit$1.MICROSECOND:return Type$1.TimestampMicrosecond;case TimeUnit$1.NANOSECOND:return Type$1.TimestampNanosecond}return Type$1.Timestamp;case Type$1.Date:switch(n.unit){case DateUnit$1.DAY:return Type$1.DateDay;case DateUnit$1.MILLISECOND:return Type$1.DateMillisecond}return Type$1.Date;case Type$1.Interval:switch(n.unit){case IntervalUnit$1.DAY_TIME:return Type$1.IntervalDayTime;case IntervalUnit$1.YEAR_MONTH:return Type$1.IntervalYearMonth}return Type$1.Interval;case Type$1.Map:return Type$1.Map;case Type$1.List:return Type$1.List;case Type$1.Struct:return Type$1.Struct;case Type$1.Union:switch(n.mode){case UnionMode$1.Dense:return Type$1.DenseUnion;case UnionMode$1.Sparse:return Type$1.SparseUnion}return Type$1.Union;case Type$1.FixedSizeBinary:return Type$1.FixedSizeBinary;case Type$1.FixedSizeList:return Type$1.FixedSizeList;case Type$1.Dictionary:return Type$1.Dictionary}throw new Error(`Unrecognized type '${Type$1[n.typeId]}'`)}Visitor.prototype.visitInt8=null;Visitor.prototype.visitInt16=null;Visitor.prototype.visitInt32=null;Visitor.prototype.visitInt64=null;Visitor.prototype.visitUint8=null;Visitor.prototype.visitUint16=null;Visitor.prototype.visitUint32=null;Visitor.prototype.visitUint64=null;Visitor.prototype.visitFloat16=null;Visitor.prototype.visitFloat32=null;Visitor.prototype.visitFloat64=null;Visitor.prototype.visitDateDay=null;Visitor.prototype.visitDateMillisecond=null;Visitor.prototype.visitTimestampSecond=null;Visitor.prototype.visitTimestampMillisecond=null;Visitor.prototype.visitTimestampMicrosecond=null;Visitor.prototype.visitTimestampNanosecond=null;Visitor.prototype.visitTimeSecond=null;Visitor.prototype.visitTimeMillisecond=null;Visitor.prototype.visitTimeMicrosecond=null;Visitor.prototype.visitTimeNanosecond=null;Visitor.prototype.visitDenseUnion=null;Visitor.prototype.visitSparseUnion=null;Visitor.prototype.visitIntervalDayTime=null;Visitor.prototype.visitIntervalYearMonth=null;const f64=new Float64Array(1),u32=new Uint32Array(f64.buffer);function uint16ToFloat64(n){const e=(n&31744)>>10,t=(n&1023)/1024,r=Math.pow(-1,(n&32768)>>15);switch(e){case 31:return r*(t?Number.NaN:1/0);case 0:return r*(t?6103515625e-14*t:0)}return r*Math.pow(2,e-15)*(1+t)}function float64ToUint16(n){if(n!==n)return 32256;f64[0]=n;const e=(u32[1]&2147483648)>>16&65535;let t=u32[1]&2146435072,r=0;return t>=1089470464?u32[0]>0?t=31744:(t=(t&2080374784)>>16,r=(u32[1]&1048575)>>10):t<=1056964608?(r=1048576+(u32[1]&1048575),r=1048576+(r<<(t>>20)-998)>>21,t=0):(t=t-1056964608>>10,r=(u32[1]&1048575)+512>>10),e|t|r&65535}class SetVisitor extends Visitor{}function wrapSet(n){return(e,t,r)=>{if(e.setValid(t,r!=null))return n(e,t,r)}}const setEpochMsToDays=(n,e,t)=>{n[e]=Math.trunc(t/864e5)},setEpochMsToMillisecondsLong=(n,e,t)=>{n[e]=Math.trunc(t%4294967296),n[e+1]=Math.trunc(t/4294967296)},setEpochMsToMicrosecondsLong=(n,e,t)=>{n[e]=Math.trunc(t*1e3%4294967296),n[e+1]=Math.trunc(t*1e3/4294967296)},setEpochMsToNanosecondsLong=(n,e,t)=>{n[e]=Math.trunc(t*1e6%4294967296),n[e+1]=Math.trunc(t*1e6/4294967296)},setVariableWidthBytes=(n,e,t,r)=>{if(t+1<e.length){const{[t]:u,[t+1]:T}=e;n.set(r.subarray(0,T-u),u)}},setBool=({offset:n,values:e},t,r)=>{const u=n+t;r?e[u>>3]|=1<<u%8:e[u>>3]&=~(1<<u%8)},setInt=({values:n},e,t)=>{n[e]=t},setFloat=({values:n},e,t)=>{n[e]=t},setFloat16=({values:n},e,t)=>{n[e]=float64ToUint16(t)},setAnyFloat=(n,e,t)=>{switch(n.type.precision){case Precision$1.HALF:return setFloat16(n,e,t);case Precision$1.SINGLE:case Precision$1.DOUBLE:return setFloat(n,e,t)}},setDateDay=({values:n},e,t)=>{setEpochMsToDays(n,e,t.valueOf())},setDateMillisecond=({values:n},e,t)=>{setEpochMsToMillisecondsLong(n,e*2,t.valueOf())},setFixedSizeBinary=({stride:n,values:e},t,r)=>{e.set(r.subarray(0,n),n*t)},setBinary=({values:n,valueOffsets:e},t,r)=>setVariableWidthBytes(n,e,t,r),setUtf8=({values:n,valueOffsets:e},t,r)=>{setVariableWidthBytes(n,e,t,encodeUtf8(r))},setDate=(n,e,t)=>{n.type.unit===DateUnit$1.DAY?setDateDay(n,e,t):setDateMillisecond(n,e,t)},setTimestampSecond=({values:n},e,t)=>setEpochMsToMillisecondsLong(n,e*2,t/1e3),setTimestampMillisecond=({values:n},e,t)=>setEpochMsToMillisecondsLong(n,e*2,t),setTimestampMicrosecond=({values:n},e,t)=>setEpochMsToMicrosecondsLong(n,e*2,t),setTimestampNanosecond=({values:n},e,t)=>setEpochMsToNanosecondsLong(n,e*2,t),setTimestamp=(n,e,t)=>{switch(n.type.unit){case TimeUnit$1.SECOND:return setTimestampSecond(n,e,t);case TimeUnit$1.MILLISECOND:return setTimestampMillisecond(n,e,t);case TimeUnit$1.MICROSECOND:return setTimestampMicrosecond(n,e,t);case TimeUnit$1.NANOSECOND:return setTimestampNanosecond(n,e,t)}},setTimeSecond=({values:n},e,t)=>{n[e]=t},setTimeMillisecond=({values:n},e,t)=>{n[e]=t},setTimeMicrosecond=({values:n},e,t)=>{n[e]=t},setTimeNanosecond=({values:n},e,t)=>{n[e]=t},setTime=(n,e,t)=>{switch(n.type.unit){case TimeUnit$1.SECOND:return setTimeSecond(n,e,t);case TimeUnit$1.MILLISECOND:return setTimeMillisecond(n,e,t);case TimeUnit$1.MICROSECOND:return setTimeMicrosecond(n,e,t);case TimeUnit$1.NANOSECOND:return setTimeNanosecond(n,e,t)}},setDecimal=({values:n,stride:e},t,r)=>{n.set(r.subarray(0,e),e*t)},setList=(n,e,t)=>{const r=n.children[0],u=n.valueOffsets,T=instance$6.getVisitFn(r);if(Array.isArray(t))for(let d=-1,A=u[e],le=u[e+1];A<le;)T(r,A++,t[++d]);else for(let d=-1,A=u[e],le=u[e+1];A<le;)T(r,A++,t.get(++d))},setMap=(n,e,t)=>{const r=n.children[0],{valueOffsets:u}=n,T=instance$6.getVisitFn(r);let{[e]:d,[e+1]:A}=u;const le=t instanceof Map?t.entries():Object.entries(t);for(const G of le)if(T(r,d,G),++d>=A)break},_setStructArrayValue=(n,e)=>(t,r,u,T)=>r&&t(r,n,e[T]),_setStructVectorValue=(n,e)=>(t,r,u,T)=>r&&t(r,n,e.get(T)),_setStructMapValue=(n,e)=>(t,r,u,T)=>r&&t(r,n,e.get(u.name)),_setStructObjectValue=(n,e)=>(t,r,u,T)=>r&&t(r,n,e[u.name]),setStruct=(n,e,t)=>{const r=n.type.children.map(T=>instance$6.getVisitFn(T.type)),u=t instanceof Map?_setStructMapValue(e,t):t instanceof Vector?_setStructVectorValue(e,t):Array.isArray(t)?_setStructArrayValue(e,t):_setStructObjectValue(e,t);n.type.children.forEach((T,d)=>u(r[d],n.children[d],T,d))},setUnion=(n,e,t)=>{n.type.mode===UnionMode$1.Dense?setDenseUnion(n,e,t):setSparseUnion(n,e,t)},setDenseUnion=(n,e,t)=>{const r=n.type.typeIdToChildIndex[n.typeIds[e]],u=n.children[r];instance$6.visit(u,n.valueOffsets[e],t)},setSparseUnion=(n,e,t)=>{const r=n.type.typeIdToChildIndex[n.typeIds[e]],u=n.children[r];instance$6.visit(u,e,t)},setDictionary=(n,e,t)=>{var r;(r=n.dictionary)===null||r===void 0||r.set(n.values[e],t)},setIntervalValue=(n,e,t)=>{n.type.unit===IntervalUnit$1.DAY_TIME?setIntervalDayTime(n,e,t):setIntervalYearMonth(n,e,t)},setIntervalDayTime=({values:n},e,t)=>{n.set(t.subarray(0,2),2*e)},setIntervalYearMonth=({values:n},e,t)=>{n[e]=t[0]*12+t[1]%12},setFixedSizeList=(n,e,t)=>{const{stride:r}=n,u=n.children[0],T=instance$6.getVisitFn(u);if(Array.isArray(t))for(let d=-1,A=e*r;++d<r;)T(u,A+d,t[d]);else for(let d=-1,A=e*r;++d<r;)T(u,A+d,t.get(d))};SetVisitor.prototype.visitBool=wrapSet(setBool);SetVisitor.prototype.visitInt=wrapSet(setInt);SetVisitor.prototype.visitInt8=wrapSet(setInt);SetVisitor.prototype.visitInt16=wrapSet(setInt);SetVisitor.prototype.visitInt32=wrapSet(setInt);SetVisitor.prototype.visitInt64=wrapSet(setInt);SetVisitor.prototype.visitUint8=wrapSet(setInt);SetVisitor.prototype.visitUint16=wrapSet(setInt);SetVisitor.prototype.visitUint32=wrapSet(setInt);SetVisitor.prototype.visitUint64=wrapSet(setInt);SetVisitor.prototype.visitFloat=wrapSet(setAnyFloat);SetVisitor.prototype.visitFloat16=wrapSet(setFloat16);SetVisitor.prototype.visitFloat32=wrapSet(setFloat);SetVisitor.prototype.visitFloat64=wrapSet(setFloat);SetVisitor.prototype.visitUtf8=wrapSet(setUtf8);SetVisitor.prototype.visitBinary=wrapSet(setBinary);SetVisitor.prototype.visitFixedSizeBinary=wrapSet(setFixedSizeBinary);SetVisitor.prototype.visitDate=wrapSet(setDate);SetVisitor.prototype.visitDateDay=wrapSet(setDateDay);SetVisitor.prototype.visitDateMillisecond=wrapSet(setDateMillisecond);SetVisitor.prototype.visitTimestamp=wrapSet(setTimestamp);SetVisitor.prototype.visitTimestampSecond=wrapSet(setTimestampSecond);SetVisitor.prototype.visitTimestampMillisecond=wrapSet(setTimestampMillisecond);SetVisitor.prototype.visitTimestampMicrosecond=wrapSet(setTimestampMicrosecond);SetVisitor.prototype.visitTimestampNanosecond=wrapSet(setTimestampNanosecond);SetVisitor.prototype.visitTime=wrapSet(setTime);SetVisitor.prototype.visitTimeSecond=wrapSet(setTimeSecond);SetVisitor.prototype.visitTimeMillisecond=wrapSet(setTimeMillisecond);SetVisitor.prototype.visitTimeMicrosecond=wrapSet(setTimeMicrosecond);SetVisitor.prototype.visitTimeNanosecond=wrapSet(setTimeNanosecond);SetVisitor.prototype.visitDecimal=wrapSet(setDecimal);SetVisitor.prototype.visitList=wrapSet(setList);SetVisitor.prototype.visitStruct=wrapSet(setStruct);SetVisitor.prototype.visitUnion=wrapSet(setUnion);SetVisitor.prototype.visitDenseUnion=wrapSet(setDenseUnion);SetVisitor.prototype.visitSparseUnion=wrapSet(setSparseUnion);SetVisitor.prototype.visitDictionary=wrapSet(setDictionary);SetVisitor.prototype.visitInterval=wrapSet(setIntervalValue);SetVisitor.prototype.visitIntervalDayTime=wrapSet(setIntervalDayTime);SetVisitor.prototype.visitIntervalYearMonth=wrapSet(setIntervalYearMonth);SetVisitor.prototype.visitFixedSizeList=wrapSet(setFixedSizeList);SetVisitor.prototype.visitMap=wrapSet(setMap);const instance$6=new SetVisitor,kParent=Symbol.for("parent"),kRowIndex=Symbol.for("rowIndex");class StructRow{constructor(e,t){return this[kParent]=e,this[kRowIndex]=t,new Proxy(this,new StructRowProxyHandler)}toArray(){return Object.values(this.toJSON())}toJSON(){const e=this[kRowIndex],t=this[kParent],r=t.type.children,u={};for(let T=-1,d=r.length;++T<d;)u[r[T].name]=instance$5.visit(t.children[T],e);return u}toString(){return`{${[...this].map(([e,t])=>`${valueToString(e)}: ${valueToString(t)}`).join(", ")}}`}[Symbol.for("nodejs.util.inspect.custom")](){return this.toString()}[Symbol.iterator](){return new StructRowIterator(this[kParent],this[kRowIndex])}}class StructRowIterator{constructor(e,t){this.childIndex=0,this.children=e.children,this.rowIndex=t,this.childFields=e.type.children,this.numChildren=this.childFields.length}[Symbol.iterator](){return this}next(){const e=this.childIndex;return e<this.numChildren?(this.childIndex=e+1,{done:!1,value:[this.childFields[e].name,instance$5.visit(this.children[e],this.rowIndex)]}):{done:!0,value:null}}}Object.defineProperties(StructRow.prototype,{[Symbol.toStringTag]:{enumerable:!1,configurable:!1,value:"Row"},[kParent]:{writable:!0,enumerable:!1,configurable:!1,value:null},[kRowIndex]:{writable:!0,enumerable:!1,configurable:!1,value:-1}});class StructRowProxyHandler{isExtensible(){return!1}deleteProperty(){return!1}preventExtensions(){return!0}ownKeys(e){return e[kParent].type.children.map(t=>t.name)}has(e,t){return e[kParent].type.children.findIndex(r=>r.name===t)!==-1}getOwnPropertyDescriptor(e,t){if(e[kParent].type.children.findIndex(r=>r.name===t)!==-1)return{writable:!0,enumerable:!0,configurable:!0}}get(e,t){if(Reflect.has(e,t))return e[t];const r=e[kParent].type.children.findIndex(u=>u.name===t);if(r!==-1){const u=instance$5.visit(e[kParent].children[r],e[kRowIndex]);return Reflect.set(e,t,u),u}}set(e,t,r){const u=e[kParent].type.children.findIndex(T=>T.name===t);return u!==-1?(instance$6.visit(e[kParent].children[u],e[kRowIndex],r),Reflect.set(e,t,r)):Reflect.has(e,t)||typeof t=="symbol"?Reflect.set(e,t,r):!1}}class GetVisitor extends Visitor{}function wrapGet(n){return(e,t)=>e.getValid(t)?n(e,t):null}const epochDaysToMs=(n,e)=>864e5*n[e],epochMillisecondsLongToMs=(n,e)=>4294967296*n[e+1]+(n[e]>>>0),epochMicrosecondsLongToMs=(n,e)=>4294967296*(n[e+1]/1e3)+(n[e]>>>0)/1e3,epochNanosecondsLongToMs=(n,e)=>4294967296*(n[e+1]/1e6)+(n[e]>>>0)/1e6,epochMillisecondsToDate=n=>new Date(n),epochDaysToDate=(n,e)=>epochMillisecondsToDate(epochDaysToMs(n,e)),epochMillisecondsLongToDate=(n,e)=>epochMillisecondsToDate(epochMillisecondsLongToMs(n,e)),getNull=(n,e)=>null,getVariableWidthBytes=(n,e,t)=>{if(t+1>=e.length)return null;const r=e[t],u=e[t+1];return n.subarray(r,u)},getBool$1=({offset:n,values:e},t)=>{const r=n+t;return(e[r>>3]&1<<r%8)!==0},getDateDay=({values:n},e)=>epochDaysToDate(n,e),getDateMillisecond=({values:n},e)=>epochMillisecondsLongToDate(n,e*2),getNumeric=({stride:n,values:e},t)=>e[n*t],getFloat16=({stride:n,values:e},t)=>uint16ToFloat64(e[n*t]),getBigInts=({values:n},e)=>n[e],getFixedSizeBinary=({stride:n,values:e},t)=>e.subarray(n*t,n*(t+1)),getBinary=({values:n,valueOffsets:e},t)=>getVariableWidthBytes(n,e,t),getUtf8=({values:n,valueOffsets:e},t)=>{const r=getVariableWidthBytes(n,e,t);return r!==null?decodeUtf8(r):null},getInt=({values:n},e)=>n[e],getFloat=({type:n,values:e},t)=>n.precision!==Precision$1.HALF?e[t]:uint16ToFloat64(e[t]),getDate=(n,e)=>n.type.unit===DateUnit$1.DAY?getDateDay(n,e):getDateMillisecond(n,e),getTimestampSecond=({values:n},e)=>1e3*epochMillisecondsLongToMs(n,e*2),getTimestampMillisecond=({values:n},e)=>epochMillisecondsLongToMs(n,e*2),getTimestampMicrosecond=({values:n},e)=>epochMicrosecondsLongToMs(n,e*2),getTimestampNanosecond=({values:n},e)=>epochNanosecondsLongToMs(n,e*2),getTimestamp=(n,e)=>{switch(n.type.unit){case TimeUnit$1.SECOND:return getTimestampSecond(n,e);case TimeUnit$1.MILLISECOND:return getTimestampMillisecond(n,e);case TimeUnit$1.MICROSECOND:return getTimestampMicrosecond(n,e);case TimeUnit$1.NANOSECOND:return getTimestampNanosecond(n,e)}},getTimeSecond=({values:n},e)=>n[e],getTimeMillisecond=({values:n},e)=>n[e],getTimeMicrosecond=({values:n},e)=>n[e],getTimeNanosecond=({values:n},e)=>n[e],getTime=(n,e)=>{switch(n.type.unit){case TimeUnit$1.SECOND:return getTimeSecond(n,e);case TimeUnit$1.MILLISECOND:return getTimeMillisecond(n,e);case TimeUnit$1.MICROSECOND:return getTimeMicrosecond(n,e);case TimeUnit$1.NANOSECOND:return getTimeNanosecond(n,e)}},getDecimal=({values:n,stride:e},t)=>BN.decimal(n.subarray(e*t,e*(t+1))),getList=(n,e)=>{const{valueOffsets:t,stride:r,children:u}=n,{[e*r]:T,[e*r+1]:d}=t,le=u[0].slice(T,d-T);return new Vector([le])},getMap=(n,e)=>{const{valueOffsets:t,children:r}=n,{[e]:u,[e+1]:T}=t,d=r[0];return new MapRow(d.slice(u,T-u))},getStruct=(n,e)=>new StructRow(n,e),getUnion=(n,e)=>n.type.mode===UnionMode$1.Dense?getDenseUnion(n,e):getSparseUnion(n,e),getDenseUnion=(n,e)=>{const t=n.type.typeIdToChildIndex[n.typeIds[e]],r=n.children[t];return instance$5.visit(r,n.valueOffsets[e])},getSparseUnion=(n,e)=>{const t=n.type.typeIdToChildIndex[n.typeIds[e]],r=n.children[t];return instance$5.visit(r,e)},getDictionary=(n,e)=>{var t;return(t=n.dictionary)===null||t===void 0?void 0:t.get(n.values[e])},getInterval=(n,e)=>n.type.unit===IntervalUnit$1.DAY_TIME?getIntervalDayTime(n,e):getIntervalYearMonth(n,e),getIntervalDayTime=({values:n},e)=>n.subarray(2*e,2*(e+1)),getIntervalYearMonth=({values:n},e)=>{const t=n[e],r=new Int32Array(2);return r[0]=Math.trunc(t/12),r[1]=Math.trunc(t%12),r},getFixedSizeList=(n,e)=>{const{stride:t,children:r}=n,T=r[0].slice(e*t,t);return new Vector([T])};GetVisitor.prototype.visitNull=wrapGet(getNull);GetVisitor.prototype.visitBool=wrapGet(getBool$1);GetVisitor.prototype.visitInt=wrapGet(getInt);GetVisitor.prototype.visitInt8=wrapGet(getNumeric);GetVisitor.prototype.visitInt16=wrapGet(getNumeric);GetVisitor.prototype.visitInt32=wrapGet(getNumeric);GetVisitor.prototype.visitInt64=wrapGet(getBigInts);GetVisitor.prototype.visitUint8=wrapGet(getNumeric);GetVisitor.prototype.visitUint16=wrapGet(getNumeric);GetVisitor.prototype.visitUint32=wrapGet(getNumeric);GetVisitor.prototype.visitUint64=wrapGet(getBigInts);GetVisitor.prototype.visitFloat=wrapGet(getFloat);GetVisitor.prototype.visitFloat16=wrapGet(getFloat16);GetVisitor.prototype.visitFloat32=wrapGet(getNumeric);GetVisitor.prototype.visitFloat64=wrapGet(getNumeric);GetVisitor.prototype.visitUtf8=wrapGet(getUtf8);GetVisitor.prototype.visitBinary=wrapGet(getBinary);GetVisitor.prototype.visitFixedSizeBinary=wrapGet(getFixedSizeBinary);GetVisitor.prototype.visitDate=wrapGet(getDate);GetVisitor.prototype.visitDateDay=wrapGet(getDateDay);GetVisitor.prototype.visitDateMillisecond=wrapGet(getDateMillisecond);GetVisitor.prototype.visitTimestamp=wrapGet(getTimestamp);GetVisitor.prototype.visitTimestampSecond=wrapGet(getTimestampSecond);GetVisitor.prototype.visitTimestampMillisecond=wrapGet(getTimestampMillisecond);GetVisitor.prototype.visitTimestampMicrosecond=wrapGet(getTimestampMicrosecond);GetVisitor.prototype.visitTimestampNanosecond=wrapGet(getTimestampNanosecond);GetVisitor.prototype.visitTime=wrapGet(getTime);GetVisitor.prototype.visitTimeSecond=wrapGet(getTimeSecond);GetVisitor.prototype.visitTimeMillisecond=wrapGet(getTimeMillisecond);GetVisitor.prototype.visitTimeMicrosecond=wrapGet(getTimeMicrosecond);GetVisitor.prototype.visitTimeNanosecond=wrapGet(getTimeNanosecond);GetVisitor.prototype.visitDecimal=wrapGet(getDecimal);GetVisitor.prototype.visitList=wrapGet(getList);GetVisitor.prototype.visitStruct=wrapGet(getStruct);GetVisitor.prototype.visitUnion=wrapGet(getUnion);GetVisitor.prototype.visitDenseUnion=wrapGet(getDenseUnion);GetVisitor.prototype.visitSparseUnion=wrapGet(getSparseUnion);GetVisitor.prototype.visitDictionary=wrapGet(getDictionary);GetVisitor.prototype.visitInterval=wrapGet(getInterval);GetVisitor.prototype.visitIntervalDayTime=wrapGet(getIntervalDayTime);GetVisitor.prototype.visitIntervalYearMonth=wrapGet(getIntervalYearMonth);GetVisitor.prototype.visitFixedSizeList=wrapGet(getFixedSizeList);GetVisitor.prototype.visitMap=wrapGet(getMap);const instance$5=new GetVisitor,kKeys=Symbol.for("keys"),kVals=Symbol.for("vals");class MapRow{constructor(e){return this[kKeys]=new Vector([e.children[0]]).memoize(),this[kVals]=e.children[1],new Proxy(this,new MapRowProxyHandler)}[Symbol.iterator](){return new MapRowIterator(this[kKeys],this[kVals])}get size(){return this[kKeys].length}toArray(){return Object.values(this.toJSON())}toJSON(){const e=this[kKeys],t=this[kVals],r={};for(let u=-1,T=e.length;++u<T;)r[e.get(u)]=instance$5.visit(t,u);return r}toString(){return`{${[...this].map(([e,t])=>`${valueToString(e)}: ${valueToString(t)}`).join(", ")}}`}[Symbol.for("nodejs.util.inspect.custom")](){return this.toString()}}class MapRowIterator{constructor(e,t){this.keys=e,this.vals=t,this.keyIndex=0,this.numKeys=e.length}[Symbol.iterator](){return this}next(){const e=this.keyIndex;return e===this.numKeys?{done:!0,value:null}:(this.keyIndex++,{done:!1,value:[this.keys.get(e),instance$5.visit(this.vals,e)]})}}class MapRowProxyHandler{isExtensible(){return!1}deleteProperty(){return!1}preventExtensions(){return!0}ownKeys(e){return e[kKeys].toArray().map(String)}has(e,t){return e[kKeys].includes(t)}getOwnPropertyDescriptor(e,t){if(e[kKeys].indexOf(t)!==-1)return{writable:!0,enumerable:!0,configurable:!0}}get(e,t){if(Reflect.has(e,t))return e[t];const r=e[kKeys].indexOf(t);if(r!==-1){const u=instance$5.visit(Reflect.get(e,kVals),r);return Reflect.set(e,t,u),u}}set(e,t,r){const u=e[kKeys].indexOf(t);return u!==-1?(instance$6.visit(Reflect.get(e,kVals),u,r),Reflect.set(e,t,r)):Reflect.has(e,t)?Reflect.set(e,t,r):!1}}Object.defineProperties(MapRow.prototype,{[Symbol.toStringTag]:{enumerable:!1,configurable:!1,value:"Row"},[kKeys]:{writable:!0,enumerable:!1,configurable:!1,value:null},[kVals]:{writable:!0,enumerable:!1,configurable:!1,value:null}});let tmp;function clampRange(n,e,t,r){const{length:u=0}=n;let T=typeof e!="number"?0:e,d=typeof t!="number"?u:t;return T<0&&(T=(T%u+u)%u),d<0&&(d=(d%u+u)%u),d<T&&(tmp=T,T=d,d=tmp),d>u&&(d=u),r?r(n,T,d):[T,d]}const isNaNFast=n=>n!==n;function createElementComparator(n){if(typeof n!=="object"||n===null)return isNaNFast(n)?isNaNFast:t=>t===n;if(n instanceof Date){const t=n.valueOf();return r=>r instanceof Date?r.valueOf()===t:!1}return ArrayBuffer.isView(n)?t=>t?compareArrayLike(n,t):!1:n instanceof Map?createMapComparator(n):Array.isArray(n)?createArrayLikeComparator(n):n instanceof Vector?createVectorComparator(n):createObjectComparator(n,!0)}function createArrayLikeComparator(n){const e=[];for(let t=-1,r=n.length;++t<r;)e[t]=createElementComparator(n[t]);return createSubElementsComparator(e)}function createMapComparator(n){let e=-1;const t=[];for(const r of n.values())t[++e]=createElementComparator(r);return createSubElementsComparator(t)}function createVectorComparator(n){const e=[];for(let t=-1,r=n.length;++t<r;)e[t]=createElementComparator(n.get(t));return createSubElementsComparator(e)}function createObjectComparator(n,e=!1){const t=Object.keys(n);if(!e&&t.length===0)return()=>!1;const r=[];for(let u=-1,T=t.length;++u<T;)r[u]=createElementComparator(n[t[u]]);return createSubElementsComparator(r,t)}function createSubElementsComparator(n,e){return t=>{if(!t||typeof t!="object")return!1;switch(t.constructor){case Array:return compareArray(n,t);case Map:return compareObject(n,t,t.keys());case MapRow:case StructRow:case Object:case void 0:return compareObject(n,t,e||Object.keys(t))}return t instanceof Vector?compareVector(n,t):!1}}function compareArray(n,e){const t=n.length;if(e.length!==t)return!1;for(let r=-1;++r<t;)if(!n[r](e[r]))return!1;return!0}function compareVector(n,e){const t=n.length;if(e.length!==t)return!1;for(let r=-1;++r<t;)if(!n[r](e.get(r)))return!1;return!0}function compareObject(n,e,t){const r=t[Symbol.iterator](),u=e instanceof Map?e.keys():Object.keys(e)[Symbol.iterator](),T=e instanceof Map?e.values():Object.values(e)[Symbol.iterator]();let d=0;const A=n.length;let le=T.next(),G=r.next(),B=u.next();for(;d<A&&!G.done&&!B.done&&!le.done&&!(G.value!==B.value||!n[d](le.value));++d,G=r.next(),B=u.next(),le=T.next());return d===A&&G.done&&B.done&&le.done?!0:(r.return&&r.return(),u.return&&u.return(),T.return&&T.return(),!1)}function getBool(n,e,t,r){return(t&1<<r)!==0}function getBit(n,e,t,r){return(t&1<<r)>>r}function truncateBitmap(n,e,t){const r=t.byteLength+7&-8;if(n>0||t.byteLength<r){const u=new Uint8Array(r);return u.set(n%8===0?t.subarray(n>>3):packBools(new BitIterator(t,n,e,null,getBool)).subarray(0,r)),u}return t}function packBools(n){const e=[];let t=0,r=0,u=0;for(const d of n)d&&(u|=1<<r),++r===8&&(e[t++]=u,u=r=0);(t===0||r>0)&&(e[t++]=u);const T=new Uint8Array(e.length+7&-8);return T.set(e),T}class BitIterator{constructor(e,t,r,u,T){this.bytes=e,this.length=r,this.context=u,this.get=T,this.bit=t%8,this.byteIndex=t>>3,this.byte=e[this.byteIndex++],this.index=0}next(){return this.index<this.length?(this.bit===8&&(this.bit=0,this.byte=this.bytes[this.byteIndex++]),{value:this.get(this.context,this.index++,this.byte,this.bit++)}):{done:!0,value:null}}[Symbol.iterator](){return this}}function popcnt_bit_range(n,e,t){if(t-e<=0)return 0;if(t-e<8){let T=0;for(const d of new BitIterator(n,e,t-e,n,getBit))T+=d;return T}const r=t>>3<<3,u=e+(e%8===0?0:8-e%8);return popcnt_bit_range(n,e,u)+popcnt_bit_range(n,r,t)+popcnt_array(n,u>>3,r-u>>3)}function popcnt_array(n,e,t){let r=0,u=Math.trunc(e);const T=new DataView(n.buffer,n.byteOffset,n.byteLength),d=t===void 0?n.byteLength:u+t;for(;d-u>=4;)r+=popcnt_uint32(T.getUint32(u)),u+=4;for(;d-u>=2;)r+=popcnt_uint32(T.getUint16(u)),u+=2;for(;d-u>=1;)r+=popcnt_uint32(T.getUint8(u)),u+=1;return r}function popcnt_uint32(n){let e=Math.trunc(n);return e=e-(e>>>1&1431655765),e=(e&858993459)+(e>>>2&858993459),(e+(e>>>4)&252645135)*16843009>>>24}const kUnknownNullCount=-1;class Data{get typeId(){return this.type.typeId}get ArrayType(){return this.type.ArrayType}get buffers(){return[this.valueOffsets,this.values,this.nullBitmap,this.typeIds]}get byteLength(){let e=0;const{valueOffsets:t,values:r,nullBitmap:u,typeIds:T}=this;return t&&(e+=t.byteLength),r&&(e+=r.byteLength),u&&(e+=u.byteLength),T&&(e+=T.byteLength),this.children.reduce((d,A)=>d+A.byteLength,e)}get nullCount(){let e=this._nullCount,t;return e<=kUnknownNullCount&&(t=this.nullBitmap)&&(this._nullCount=e=this.length-popcnt_bit_range(t,this.offset,this.offset+this.length)),e}constructor(e,t,r,u,T,d=[],A){this.type=e,this.children=d,this.dictionary=A,this.offset=Math.floor(Math.max(t||0,0)),this.length=Math.floor(Math.max(r||0,0)),this._nullCount=Math.floor(Math.max(u||0,-1));let le;T instanceof Data?(this.stride=T.stride,this.values=T.values,this.typeIds=T.typeIds,this.nullBitmap=T.nullBitmap,this.valueOffsets=T.valueOffsets):(this.stride=strideForType(e),T&&((le=T[0])&&(this.valueOffsets=le),(le=T[1])&&(this.values=le),(le=T[2])&&(this.nullBitmap=le),(le=T[3])&&(this.typeIds=le))),this.nullable=this._nullCount!==0&&this.nullBitmap&&this.nullBitmap.byteLength>0}getValid(e){if(this.nullable&&this.nullCount>0){const t=this.offset+e;return(this.nullBitmap[t>>3]&1<<t%8)!==0}return!0}setValid(e,t){if(!this.nullable)return t;if(!this.nullBitmap||this.nullBitmap.byteLength<=e>>3){const{nullBitmap:le}=this._changeLengthAndBackfillNullBitmap(this.length);Object.assign(this,{nullBitmap:le,_nullCount:0})}const{nullBitmap:r,offset:u}=this,T=u+e>>3,d=(u+e)%8,A=r[T]>>d&1;return t?A===0&&(r[T]|=1<<d,this._nullCount=this.nullCount+1):A===1&&(r[T]&=~(1<<d),this._nullCount=this.nullCount-1),t}clone(e=this.type,t=this.offset,r=this.length,u=this._nullCount,T=this,d=this.children){return new Data(e,t,r,u,T,d,this.dictionary)}slice(e,t){const{stride:r,typeId:u,children:T}=this,d=+(this._nullCount===0)-1,A=u===16?r:1,le=this._sliceBuffers(e,t,r,u);return this.clone(this.type,this.offset+e,t,d,le,T.length===0||this.valueOffsets?T:this._sliceChildren(T,A*e,A*t))}_changeLengthAndBackfillNullBitmap(e){if(this.typeId===Type$1.Null)return this.clone(this.type,0,e,0);const{length:t,nullCount:r}=this,u=new Uint8Array((e+63&-64)>>3).fill(255,0,t>>3);u[t>>3]=(1<<t-(t&-8))-1,r>0&&u.set(truncateBitmap(this.offset,t,this.nullBitmap),0);const T=this.buffers;return T[BufferType.VALIDITY]=u,this.clone(this.type,0,e,r+(e-t),T)}_sliceBuffers(e,t,r,u){let T;const{buffers:d}=this;return(T=d[BufferType.TYPE])&&(d[BufferType.TYPE]=T.subarray(e,e+t)),(T=d[BufferType.OFFSET])&&(d[BufferType.OFFSET]=T.subarray(e,e+t+1))||(T=d[BufferType.DATA])&&(d[BufferType.DATA]=u===6?T:T.subarray(r*e,r*(e+t))),d}_sliceChildren(e,t,r){return e.map(u=>u.slice(t,r))}}Data.prototype.children=Object.freeze([]);class MakeDataVisitor extends Visitor{visit(e){return this.getVisitFn(e.type).call(this,e)}visitNull(e){const{["type"]:t,["offset"]:r=0,["length"]:u=0}=e;return new Data(t,r,u,0)}visitBool(e){const{["type"]:t,["offset"]:r=0}=e,u=toUint8Array(e.nullBitmap),T=toArrayBufferView(t.ArrayType,e.data),{["length"]:d=T.length>>3,["nullCount"]:A=e.nullBitmap?-1:0}=e;return new Data(t,r,d,A,[void 0,T,u])}visitInt(e){const{["type"]:t,["offset"]:r=0}=e,u=toUint8Array(e.nullBitmap),T=toArrayBufferView(t.ArrayType,e.data),{["length"]:d=T.length,["nullCount"]:A=e.nullBitmap?-1:0}=e;return new Data(t,r,d,A,[void 0,T,u])}visitFloat(e){const{["type"]:t,["offset"]:r=0}=e,u=toUint8Array(e.nullBitmap),T=toArrayBufferView(t.ArrayType,e.data),{["length"]:d=T.length,["nullCount"]:A=e.nullBitmap?-1:0}=e;return new Data(t,r,d,A,[void 0,T,u])}visitUtf8(e){const{["type"]:t,["offset"]:r=0}=e,u=toUint8Array(e.data),T=toUint8Array(e.nullBitmap),d=toInt32Array(e.valueOffsets),{["length"]:A=d.length-1,["nullCount"]:le=e.nullBitmap?-1:0}=e;return new Data(t,r,A,le,[d,u,T])}visitBinary(e){const{["type"]:t,["offset"]:r=0}=e,u=toUint8Array(e.data),T=toUint8Array(e.nullBitmap),d=toInt32Array(e.valueOffsets),{["length"]:A=d.length-1,["nullCount"]:le=e.nullBitmap?-1:0}=e;return new Data(t,r,A,le,[d,u,T])}visitFixedSizeBinary(e){const{["type"]:t,["offset"]:r=0}=e,u=toUint8Array(e.nullBitmap),T=toArrayBufferView(t.ArrayType,e.data),{["length"]:d=T.length/strideForType(t),["nullCount"]:A=e.nullBitmap?-1:0}=e;return new Data(t,r,d,A,[void 0,T,u])}visitDate(e){const{["type"]:t,["offset"]:r=0}=e,u=toUint8Array(e.nullBitmap),T=toArrayBufferView(t.ArrayType,e.data),{["length"]:d=T.length/strideForType(t),["nullCount"]:A=e.nullBitmap?-1:0}=e;return new Data(t,r,d,A,[void 0,T,u])}visitTimestamp(e){const{["type"]:t,["offset"]:r=0}=e,u=toUint8Array(e.nullBitmap),T=toArrayBufferView(t.ArrayType,e.data),{["length"]:d=T.length/strideForType(t),["nullCount"]:A=e.nullBitmap?-1:0}=e;return new Data(t,r,d,A,[void 0,T,u])}visitTime(e){const{["type"]:t,["offset"]:r=0}=e,u=toUint8Array(e.nullBitmap),T=toArrayBufferView(t.ArrayType,e.data),{["length"]:d=T.length/strideForType(t),["nullCount"]:A=e.nullBitmap?-1:0}=e;return new Data(t,r,d,A,[void 0,T,u])}visitDecimal(e){const{["type"]:t,["offset"]:r=0}=e,u=toUint8Array(e.nullBitmap),T=toArrayBufferView(t.ArrayType,e.data),{["length"]:d=T.length/strideForType(t),["nullCount"]:A=e.nullBitmap?-1:0}=e;return new Data(t,r,d,A,[void 0,T,u])}visitList(e){const{["type"]:t,["offset"]:r=0,["child"]:u}=e,T=toUint8Array(e.nullBitmap),d=toInt32Array(e.valueOffsets),{["length"]:A=d.length-1,["nullCount"]:le=e.nullBitmap?-1:0}=e;return new Data(t,r,A,le,[d,void 0,T],[u])}visitStruct(e){const{["type"]:t,["offset"]:r=0,["children"]:u=[]}=e,T=toUint8Array(e.nullBitmap),{length:d=u.reduce((le,{length:G})=>Math.max(le,G),0),nullCount:A=e.nullBitmap?-1:0}=e;return new Data(t,r,d,A,[void 0,void 0,T],u)}visitUnion(e){const{["type"]:t,["offset"]:r=0,["children"]:u=[]}=e,T=toUint8Array(e.nullBitmap),d=toArrayBufferView(t.ArrayType,e.typeIds),{["length"]:A=d.length,["nullCount"]:le=e.nullBitmap?-1:0}=e;if(DataType.isSparseUnion(t))return new Data(t,r,A,le,[void 0,void 0,T,d],u);const G=toInt32Array(e.valueOffsets);return new Data(t,r,A,le,[G,void 0,T,d],u)}visitDictionary(e){const{["type"]:t,["offset"]:r=0}=e,u=toUint8Array(e.nullBitmap),T=toArrayBufferView(t.indices.ArrayType,e.data),{["dictionary"]:d=new Vector([new MakeDataVisitor().visit({type:t.dictionary})])}=e,{["length"]:A=T.length,["nullCount"]:le=e.nullBitmap?-1:0}=e;return new Data(t,r,A,le,[void 0,T,u],[],d)}visitInterval(e){const{["type"]:t,["offset"]:r=0}=e,u=toUint8Array(e.nullBitmap),T=toArrayBufferView(t.ArrayType,e.data),{["length"]:d=T.length/strideForType(t),["nullCount"]:A=e.nullBitmap?-1:0}=e;return new Data(t,r,d,A,[void 0,T,u])}visitFixedSizeList(e){const{["type"]:t,["offset"]:r=0,["child"]:u=new MakeDataVisitor().visit({type:t.valueType})}=e,T=toUint8Array(e.nullBitmap),{["length"]:d=u.length/strideForType(t),["nullCount"]:A=e.nullBitmap?-1:0}=e;return new Data(t,r,d,A,[void 0,void 0,T],[u])}visitMap(e){const{["type"]:t,["offset"]:r=0,["child"]:u=new MakeDataVisitor().visit({type:t.childType})}=e,T=toUint8Array(e.nullBitmap),d=toInt32Array(e.valueOffsets),{["length"]:A=d.length-1,["nullCount"]:le=e.nullBitmap?-1:0}=e;return new Data(t,r,A,le,[d,void 0,T],[u])}}function makeData(n){return new MakeDataVisitor().visit(n)}class ChunkedIterator{constructor(e=0,t){this.numChunks=e,this.getChunkIterator=t,this.chunkIndex=0,this.chunkIterator=this.getChunkIterator(0)}next(){for(;this.chunkIndex<this.numChunks;){const e=this.chunkIterator.next();if(!e.done)return e;++this.chunkIndex<this.numChunks&&(this.chunkIterator=this.getChunkIterator(this.chunkIndex))}return{done:!0,value:null}}[Symbol.iterator](){return this}}function computeChunkNullCounts(n){return n.reduce((e,t)=>e+t.nullCount,0)}function computeChunkOffsets(n){return n.reduce((e,t,r)=>(e[r+1]=e[r]+t.length,e),new Uint32Array(n.length+1))}function sliceChunks(n,e,t,r){const u=[];for(let T=-1,d=n.length;++T<d;){const A=n[T],le=e[T],{length:G}=A;if(le>=r)break;if(t>=le+G)continue;if(le>=t&&le+G<=r){u.push(A);continue}const B=Math.max(0,t-le),o=Math.min(r-le,G);u.push(A.slice(B,o-B))}return u.length===0&&u.push(n[0].slice(0,0)),u}function binarySearch(n,e,t,r){let u=0,T=0,d=e.length-1;do{if(u>=d-1)return t<e[d]?r(n,u,t-e[u]):null;T=u+Math.trunc((d-u)*.5),t<e[T]?d=T:u=T}while(u<d)}function isChunkedValid(n,e){return n.getValid(e)}function wrapChunkedCall1(n){function e(t,r,u){return n(t[r],u)}return function(t){const r=this.data;return binarySearch(r,this._offsets,t,e)}}function wrapChunkedCall2(n){let e;function t(r,u,T){return n(r[u],T,e)}return function(r,u){const T=this.data;e=u;const d=binarySearch(T,this._offsets,r,t);return e=void 0,d}}function wrapChunkedIndexOf(n){let e;function t(r,u,T){let d=T,A=0,le=0;for(let G=u-1,B=r.length;++G<B;){const o=r[G];if(~(A=n(o,e,d)))return le+A;d=0,le+=o.length}return-1}return function(r,u){e=r;const T=this.data,d=typeof u!="number"?t(T,0,0):binarySearch(T,this._offsets,u,t);return e=void 0,d}}class IndexOfVisitor extends Visitor{}function nullIndexOf(n,e){return e===null&&n.length>0?0:-1}function indexOfNull(n,e){const{nullBitmap:t}=n;if(!t||n.nullCount<=0)return-1;let r=0;for(const u of new BitIterator(t,n.offset+(e||0),n.length,t,getBool)){if(!u)return r;++r}return-1}function indexOfValue(n,e,t){if(e===void 0)return-1;if(e===null)return indexOfNull(n,t);const r=instance$5.getVisitFn(n),u=createElementComparator(e);for(let T=(t||0)-1,d=n.length;++T<d;)if(u(r(n,T)))return T;return-1}function indexOfUnion(n,e,t){const r=instance$5.getVisitFn(n),u=createElementComparator(e);for(let T=(t||0)-1,d=n.length;++T<d;)if(u(r(n,T)))return T;return-1}IndexOfVisitor.prototype.visitNull=nullIndexOf;IndexOfVisitor.prototype.visitBool=indexOfValue;IndexOfVisitor.prototype.visitInt=indexOfValue;IndexOfVisitor.prototype.visitInt8=indexOfValue;IndexOfVisitor.prototype.visitInt16=indexOfValue;IndexOfVisitor.prototype.visitInt32=indexOfValue;IndexOfVisitor.prototype.visitInt64=indexOfValue;IndexOfVisitor.prototype.visitUint8=indexOfValue;IndexOfVisitor.prototype.visitUint16=indexOfValue;IndexOfVisitor.prototype.visitUint32=indexOfValue;IndexOfVisitor.prototype.visitUint64=indexOfValue;IndexOfVisitor.prototype.visitFloat=indexOfValue;IndexOfVisitor.prototype.visitFloat16=indexOfValue;IndexOfVisitor.prototype.visitFloat32=indexOfValue;IndexOfVisitor.prototype.visitFloat64=indexOfValue;IndexOfVisitor.prototype.visitUtf8=indexOfValue;IndexOfVisitor.prototype.visitBinary=indexOfValue;IndexOfVisitor.prototype.visitFixedSizeBinary=indexOfValue;IndexOfVisitor.prototype.visitDate=indexOfValue;IndexOfVisitor.prototype.visitDateDay=indexOfValue;IndexOfVisitor.prototype.visitDateMillisecond=indexOfValue;IndexOfVisitor.prototype.visitTimestamp=indexOfValue;IndexOfVisitor.prototype.visitTimestampSecond=indexOfValue;IndexOfVisitor.prototype.visitTimestampMillisecond=indexOfValue;IndexOfVisitor.prototype.visitTimestampMicrosecond=indexOfValue;IndexOfVisitor.prototype.visitTimestampNanosecond=indexOfValue;IndexOfVisitor.prototype.visitTime=indexOfValue;IndexOfVisitor.prototype.visitTimeSecond=indexOfValue;IndexOfVisitor.prototype.visitTimeMillisecond=indexOfValue;IndexOfVisitor.prototype.visitTimeMicrosecond=indexOfValue;IndexOfVisitor.prototype.visitTimeNanosecond=indexOfValue;IndexOfVisitor.prototype.visitDecimal=indexOfValue;IndexOfVisitor.prototype.visitList=indexOfValue;IndexOfVisitor.prototype.visitStruct=indexOfValue;IndexOfVisitor.prototype.visitUnion=indexOfValue;IndexOfVisitor.prototype.visitDenseUnion=indexOfUnion;IndexOfVisitor.prototype.visitSparseUnion=indexOfUnion;IndexOfVisitor.prototype.visitDictionary=indexOfValue;IndexOfVisitor.prototype.visitInterval=indexOfValue;IndexOfVisitor.prototype.visitIntervalDayTime=indexOfValue;IndexOfVisitor.prototype.visitIntervalYearMonth=indexOfValue;IndexOfVisitor.prototype.visitFixedSizeList=indexOfValue;IndexOfVisitor.prototype.visitMap=indexOfValue;const instance$4=new IndexOfVisitor;class IteratorVisitor extends Visitor{}function vectorIterator(n){const{type:e}=n;if(n.nullCount===0&&n.stride===1&&(e.typeId===Type$1.Timestamp||e instanceof Int_&&e.bitWidth!==64||e instanceof Time_&&e.bitWidth!==64||e instanceof Float&&e.precision!==Precision$1.HALF))return new ChunkedIterator(n.data.length,r=>{const u=n.data[r];return u.values.subarray(0,u.length)[Symbol.iterator]()});let t=0;return new ChunkedIterator(n.data.length,r=>{const T=n.data[r].length,d=n.slice(t,t+T);return t+=T,new VectorIterator(d)})}class VectorIterator{constructor(e){this.vector=e,this.index=0}next(){return this.index<this.vector.length?{value:this.vector.get(this.index++)}:{done:!0,value:null}}[Symbol.iterator](){return this}}IteratorVisitor.prototype.visitNull=vectorIterator;IteratorVisitor.prototype.visitBool=vectorIterator;IteratorVisitor.prototype.visitInt=vectorIterator;IteratorVisitor.prototype.visitInt8=vectorIterator;IteratorVisitor.prototype.visitInt16=vectorIterator;IteratorVisitor.prototype.visitInt32=vectorIterator;IteratorVisitor.prototype.visitInt64=vectorIterator;IteratorVisitor.prototype.visitUint8=vectorIterator;IteratorVisitor.prototype.visitUint16=vectorIterator;IteratorVisitor.prototype.visitUint32=vectorIterator;IteratorVisitor.prototype.visitUint64=vectorIterator;IteratorVisitor.prototype.visitFloat=vectorIterator;IteratorVisitor.prototype.visitFloat16=vectorIterator;IteratorVisitor.prototype.visitFloat32=vectorIterator;IteratorVisitor.prototype.visitFloat64=vectorIterator;IteratorVisitor.prototype.visitUtf8=vectorIterator;IteratorVisitor.prototype.visitBinary=vectorIterator;IteratorVisitor.prototype.visitFixedSizeBinary=vectorIterator;IteratorVisitor.prototype.visitDate=vectorIterator;IteratorVisitor.prototype.visitDateDay=vectorIterator;IteratorVisitor.prototype.visitDateMillisecond=vectorIterator;IteratorVisitor.prototype.visitTimestamp=vectorIterator;IteratorVisitor.prototype.visitTimestampSecond=vectorIterator;IteratorVisitor.prototype.visitTimestampMillisecond=vectorIterator;IteratorVisitor.prototype.visitTimestampMicrosecond=vectorIterator;IteratorVisitor.prototype.visitTimestampNanosecond=vectorIterator;IteratorVisitor.prototype.visitTime=vectorIterator;IteratorVisitor.prototype.visitTimeSecond=vectorIterator;IteratorVisitor.prototype.visitTimeMillisecond=vectorIterator;IteratorVisitor.prototype.visitTimeMicrosecond=vectorIterator;IteratorVisitor.prototype.visitTimeNanosecond=vectorIterator;IteratorVisitor.prototype.visitDecimal=vectorIterator;IteratorVisitor.prototype.visitList=vectorIterator;IteratorVisitor.prototype.visitStruct=vectorIterator;IteratorVisitor.prototype.visitUnion=vectorIterator;IteratorVisitor.prototype.visitDenseUnion=vectorIterator;IteratorVisitor.prototype.visitSparseUnion=vectorIterator;IteratorVisitor.prototype.visitDictionary=vectorIterator;IteratorVisitor.prototype.visitInterval=vectorIterator;IteratorVisitor.prototype.visitIntervalDayTime=vectorIterator;IteratorVisitor.prototype.visitIntervalYearMonth=vectorIterator;IteratorVisitor.prototype.visitFixedSizeList=vectorIterator;IteratorVisitor.prototype.visitMap=vectorIterator;const instance$3=new IteratorVisitor,sum=(n,e)=>n+e;class GetByteLengthVisitor extends Visitor{visitNull(e,t){return 0}visitInt(e,t){return e.type.bitWidth/8}visitFloat(e,t){return e.type.ArrayType.BYTES_PER_ELEMENT}visitBool(e,t){return 1/8}visitDecimal(e,t){return e.type.bitWidth/8}visitDate(e,t){return(e.type.unit+1)*4}visitTime(e,t){return e.type.bitWidth/8}visitTimestamp(e,t){return e.type.unit===TimeUnit$1.SECOND?4:8}visitInterval(e,t){return(e.type.unit+1)*4}visitStruct(e,t){return e.children.reduce((r,u)=>r+instance$2.visit(u,t),0)}visitFixedSizeBinary(e,t){return e.type.byteWidth}visitMap(e,t){return 8+e.children.reduce((r,u)=>r+instance$2.visit(u,t),0)}visitDictionary(e,t){var r;return e.type.indices.bitWidth/8+(((r=e.dictionary)===null||r===void 0?void 0:r.getByteLength(e.values[t]))||0)}}const getUtf8ByteLength=({valueOffsets:n},e)=>8+(n[e+1]-n[e]),getBinaryByteLength=({valueOffsets:n},e)=>8+(n[e+1]-n[e]),getListByteLength=({valueOffsets:n,stride:e,children:t},r)=>{const u=t[0],{[r*e]:T}=n,{[r*e+1]:d}=n,A=instance$2.getVisitFn(u.type),le=u.slice(T,d-T);let G=8;for(let B=-1,o=d-T;++B<o;)G+=A(le,B);return G},getFixedSizeListByteLength=({stride:n,children:e},t)=>{const r=e[0],u=r.slice(t*n,n),T=instance$2.getVisitFn(r.type);let d=0;for(let A=-1,le=u.length;++A<le;)d+=T(u,A);return d},getUnionByteLength=(n,e)=>n.type.mode===UnionMode$1.Dense?getDenseUnionByteLength(n,e):getSparseUnionByteLength(n,e),getDenseUnionByteLength=({type:n,children:e,typeIds:t,valueOffsets:r},u)=>{const T=n.typeIdToChildIndex[t[u]];return 8+instance$2.visit(e[T],r[u])},getSparseUnionByteLength=({children:n},e)=>4+instance$2.visitMany(n,n.map(()=>e)).reduce(sum,0);GetByteLengthVisitor.prototype.visitUtf8=getUtf8ByteLength;GetByteLengthVisitor.prototype.visitBinary=getBinaryByteLength;GetByteLengthVisitor.prototype.visitList=getListByteLength;GetByteLengthVisitor.prototype.visitFixedSizeList=getFixedSizeListByteLength;GetByteLengthVisitor.prototype.visitUnion=getUnionByteLength;GetByteLengthVisitor.prototype.visitDenseUnion=getDenseUnionByteLength;GetByteLengthVisitor.prototype.visitSparseUnion=getSparseUnionByteLength;const instance$2=new GetByteLengthVisitor;var _a$2;const visitorsByTypeId={},vectorPrototypesByTypeId={};class Vector{constructor(e){var t,r,u;const T=e[0]instanceof Vector?e.flatMap(A=>A.data):e;if(T.length===0||T.some(A=>!(A instanceof Data)))throw new TypeError("Vector constructor expects an Array of Data instances.");const d=(t=T[0])===null||t===void 0?void 0:t.type;switch(T.length){case 0:this._offsets=[0];break;case 1:{const{get:A,set:le,indexOf:G,byteLength:B}=visitorsByTypeId[d.typeId],o=T[0];this.isValid=i=>isChunkedValid(o,i),this.get=i=>A(o,i),this.set=(i,w)=>le(o,i,w),this.indexOf=i=>G(o,i),this.getByteLength=i=>B(o,i),this._offsets=[0,o.length];break}default:Object.setPrototypeOf(this,vectorPrototypesByTypeId[d.typeId]),this._offsets=computeChunkOffsets(T);break}this.data=T,this.type=d,this.stride=strideForType(d),this.numChildren=(u=(r=d.children)===null||r===void 0?void 0:r.length)!==null&&u!==void 0?u:0,this.length=this._offsets.at(-1)}get byteLength(){return this._byteLength===-1&&(this._byteLength=this.data.reduce((e,t)=>e+t.byteLength,0)),this._byteLength}get nullCount(){return this._nullCount===-1&&(this._nullCount=computeChunkNullCounts(this.data)),this._nullCount}get ArrayType(){return this.type.ArrayType}get[Symbol.toStringTag](){return`${this.VectorName}<${this.type[Symbol.toStringTag]}>`}get VectorName(){return`${Type$1[this.type.typeId]}Vector`}isValid(e){return!1}get(e){return null}set(e,t){}indexOf(e,t){return-1}includes(e,t){return this.indexOf(e,t)>0}getByteLength(e){return 0}[Symbol.iterator](){return instance$3.visit(this)}concat(...e){return new Vector(this.data.concat(e.flatMap(t=>t.data).flat(Number.POSITIVE_INFINITY)))}slice(e,t){return new Vector(clampRange(this,e,t,({data:r,_offsets:u},T,d)=>sliceChunks(r,u,T,d)))}toJSON(){return[...this]}toArray(){const{type:e,data:t,length:r,stride:u,ArrayType:T}=this;switch(e.typeId){case Type$1.Int:case Type$1.Float:case Type$1.Decimal:case Type$1.Time:case Type$1.Timestamp:switch(t.length){case 0:return new T;case 1:return t[0].values.subarray(0,r*u);default:return t.reduce((d,{values:A,length:le})=>(d.array.set(A.subarray(0,le*u),d.offset),d.offset+=le*u,d),{array:new T(r*u),offset:0}).array}}return[...this]}toString(){return`[${[...this].join(",")}]`}getChild(e){var t;return this.getChildAt((t=this.type.children)===null||t===void 0?void 0:t.findIndex(r=>r.name===e))}getChildAt(e){return e>-1&&e<this.numChildren?new Vector(this.data.map(({children:t})=>t[e])):null}get isMemoized(){return DataType.isDictionary(this.type)?this.data[0].dictionary.isMemoized:!1}memoize(){if(DataType.isDictionary(this.type)){const e=new MemoizedVector(this.data[0].dictionary),t=this.data.map(r=>{const u=r.clone();return u.dictionary=e,u});return new Vector(t)}return new MemoizedVector(this)}unmemoize(){if(DataType.isDictionary(this.type)&&this.isMemoized){const e=this.data[0].dictionary.unmemoize(),t=this.data.map(r=>{const u=r.clone();return u.dictionary=e,u});return new Vector(t)}return this}}_a$2=Symbol.toStringTag;Vector[_a$2]=(n=>{n.type=DataType.prototype,n.data=[],n.length=0,n.stride=1,n.numChildren=0,n._nullCount=-1,n._byteLength=-1,n._offsets=new Uint32Array([0]),n[Symbol.isConcatSpreadable]=!0;const e=Object.keys(Type$1).map(t=>Type$1[t]).filter(t=>typeof t=="number"&&t!==Type$1.NONE);for(const t of e){const r=instance$5.getVisitFnByTypeId(t),u=instance$6.getVisitFnByTypeId(t),T=instance$4.getVisitFnByTypeId(t),d=instance$2.getVisitFnByTypeId(t);visitorsByTypeId[t]={get:r,set:u,indexOf:T,byteLength:d},vectorPrototypesByTypeId[t]=Object.create(n,{isValid:{value:wrapChunkedCall1(isChunkedValid)},get:{value:wrapChunkedCall1(instance$5.getVisitFnByTypeId(t))},set:{value:wrapChunkedCall2(instance$6.getVisitFnByTypeId(t))},indexOf:{value:wrapChunkedIndexOf(instance$4.getVisitFnByTypeId(t))},getByteLength:{value:wrapChunkedCall1(instance$2.getVisitFnByTypeId(t))}})}return"Vector"})(Vector.prototype);class MemoizedVector extends Vector{constructor(e){super(e.data);const t=this.get,r=this.set,u=this.slice,T=new Array(this.length);Object.defineProperty(this,"get",{value(d){const A=T[d];if(A!==void 0)return A;const le=t.call(this,d);return T[d]=le,le}}),Object.defineProperty(this,"set",{value(d,A){r.call(this,d,A),T[d]=A}}),Object.defineProperty(this,"slice",{value:(d,A)=>new MemoizedVector(u.call(this,d,A))}),Object.defineProperty(this,"isMemoized",{value:!0}),Object.defineProperty(this,"unmemoize",{value:()=>new Vector(this.data)}),Object.defineProperty(this,"memoize",{value:()=>this})}}class Block{constructor(){this.bb=null,this.bb_pos=0}__init(e,t){return this.bb_pos=e,this.bb=t,this}offset(){return this.bb.readInt64(this.bb_pos)}metaDataLength(){return this.bb.readInt32(this.bb_pos+8)}bodyLength(){return this.bb.readInt64(this.bb_pos+16)}static sizeOf(){return 24}static createBlock(e,t,r,u){return e.prep(8,24),e.writeInt64(BigInt(u??0)),e.pad(4),e.writeInt32(r),e.writeInt64(BigInt(t??0)),e.offset()}}const SIZEOF_SHORT=2,SIZEOF_INT=4,FILE_IDENTIFIER_LENGTH=4,SIZE_PREFIX_LENGTH=4,int32=new Int32Array(2),float32=new Float32Array(int32.buffer),float64=new Float64Array(int32.buffer),isLittleEndian=new Uint16Array(new Uint8Array([1,0]).buffer)[0]===1;var Encoding;(function(n){n[n.UTF8_BYTES=1]="UTF8_BYTES",n[n.UTF16_STRING=2]="UTF16_STRING"})(Encoding||(Encoding={}));let ByteBuffer$2=class Hh{constructor(e){this.bytes_=e,this.position_=0,this.text_decoder_=new TextDecoder}static allocate(e){return new Hh(new Uint8Array(e))}clear(){this.position_=0}bytes(){return this.bytes_}position(){return this.position_}setPosition(e){this.position_=e}capacity(){return this.bytes_.length}readInt8(e){return this.readUint8(e)<<24>>24}readUint8(e){return this.bytes_[e]}readInt16(e){return this.readUint16(e)<<16>>16}readUint16(e){return this.bytes_[e]|this.bytes_[e+1]<<8}readInt32(e){return this.bytes_[e]|this.bytes_[e+1]<<8|this.bytes_[e+2]<<16|this.bytes_[e+3]<<24}readUint32(e){return this.readInt32(e)>>>0}readInt64(e){return BigInt.asIntN(64,BigInt(this.readUint32(e))+(BigInt(this.readUint32(e+4))<<BigInt(32)))}readUint64(e){return BigInt.asUintN(64,BigInt(this.readUint32(e))+(BigInt(this.readUint32(e+4))<<BigInt(32)))}readFloat32(e){return int32[0]=this.readInt32(e),float32[0]}readFloat64(e){return int32[isLittleEndian?0:1]=this.readInt32(e),int32[isLittleEndian?1:0]=this.readInt32(e+4),float64[0]}writeInt8(e,t){this.bytes_[e]=t}writeUint8(e,t){this.bytes_[e]=t}writeInt16(e,t){this.bytes_[e]=t,this.bytes_[e+1]=t>>8}writeUint16(e,t){this.bytes_[e]=t,this.bytes_[e+1]=t>>8}writeInt32(e,t){this.bytes_[e]=t,this.bytes_[e+1]=t>>8,this.bytes_[e+2]=t>>16,this.bytes_[e+3]=t>>24}writeUint32(e,t){this.bytes_[e]=t,this.bytes_[e+1]=t>>8,this.bytes_[e+2]=t>>16,this.bytes_[e+3]=t>>24}writeInt64(e,t){this.writeInt32(e,Number(BigInt.asIntN(32,t))),this.writeInt32(e+4,Number(BigInt.asIntN(32,t>>BigInt(32))))}writeUint64(e,t){this.writeUint32(e,Number(BigInt.asUintN(32,t))),this.writeUint32(e+4,Number(BigInt.asUintN(32,t>>BigInt(32))))}writeFloat32(e,t){float32[0]=t,this.writeInt32(e,int32[0])}writeFloat64(e,t){float64[0]=t,this.writeInt32(e,int32[isLittleEndian?0:1]),this.writeInt32(e+4,int32[isLittleEndian?1:0])}getBufferIdentifier(){if(this.bytes_.length<this.position_+SIZEOF_INT+FILE_IDENTIFIER_LENGTH)throw new Error("FlatBuffers: ByteBuffer is too short to contain an identifier.");let e="";for(let t=0;t<FILE_IDENTIFIER_LENGTH;t++)e+=String.fromCharCode(this.readInt8(this.position_+SIZEOF_INT+t));return e}__offset(e,t){const r=e-this.readInt32(e);return t<this.readInt16(r)?this.readInt16(r+t):0}__union(e,t){return e.bb_pos=t+this.readInt32(t),e.bb=this,e}__string(e,t){e+=this.readInt32(e);const r=this.readInt32(e);e+=SIZEOF_INT;const u=this.bytes_.subarray(e,e+r);return t===Encoding.UTF8_BYTES?u:this.text_decoder_.decode(u)}__union_with_string(e,t){return typeof e=="string"?this.__string(t):this.__union(e,t)}__indirect(e){return e+this.readInt32(e)}__vector(e){return e+this.readInt32(e)+SIZEOF_INT}__vector_len(e){return this.readInt32(e+this.readInt32(e))}__has_identifier(e){if(e.length!=FILE_IDENTIFIER_LENGTH)throw new Error("FlatBuffers: file identifier must be length "+FILE_IDENTIFIER_LENGTH);for(let t=0;t<FILE_IDENTIFIER_LENGTH;t++)if(e.charCodeAt(t)!=this.readInt8(this.position()+SIZEOF_INT+t))return!1;return!0}createScalarList(e,t){const r=[];for(let u=0;u<t;++u){const T=e(u);T!==null&&r.push(T)}return r}createObjList(e,t){const r=[];for(let u=0;u<t;++u){const T=e(u);T!==null&&r.push(T.unpack())}return r}},Builder$2=class qh{constructor(e){this.minalign=1,this.vtable=null,this.vtable_in_use=0,this.isNested=!1,this.object_start=0,this.vtables=[],this.vector_num_elems=0,this.force_defaults=!1,this.string_maps=null,this.text_encoder=new TextEncoder;let t;e?t=e:t=1024,this.bb=ByteBuffer$2.allocate(t),this.space=t}clear(){this.bb.clear(),this.space=this.bb.capacity(),this.minalign=1,this.vtable=null,this.vtable_in_use=0,this.isNested=!1,this.object_start=0,this.vtables=[],this.vector_num_elems=0,this.force_defaults=!1,this.string_maps=null}forceDefaults(e){this.force_defaults=e}dataBuffer(){return this.bb}asUint8Array(){return this.bb.bytes().subarray(this.bb.position(),this.bb.position()+this.offset())}prep(e,t){e>this.minalign&&(this.minalign=e);const r=~(this.bb.capacity()-this.space+t)+1&e-1;for(;this.space<r+e+t;){const u=this.bb.capacity();this.bb=qh.growByteBuffer(this.bb),this.space+=this.bb.capacity()-u}this.pad(r)}pad(e){for(let t=0;t<e;t++)this.bb.writeInt8(--this.space,0)}writeInt8(e){this.bb.writeInt8(this.space-=1,e)}writeInt16(e){this.bb.writeInt16(this.space-=2,e)}writeInt32(e){this.bb.writeInt32(this.space-=4,e)}writeInt64(e){this.bb.writeInt64(this.space-=8,e)}writeFloat32(e){this.bb.writeFloat32(this.space-=4,e)}writeFloat64(e){this.bb.writeFloat64(this.space-=8,e)}addInt8(e){this.prep(1,0),this.writeInt8(e)}addInt16(e){this.prep(2,0),this.writeInt16(e)}addInt32(e){this.prep(4,0),this.writeInt32(e)}addInt64(e){this.prep(8,0),this.writeInt64(e)}addFloat32(e){this.prep(4,0),this.writeFloat32(e)}addFloat64(e){this.prep(8,0),this.writeFloat64(e)}addFieldInt8(e,t,r){(this.force_defaults||t!=r)&&(this.addInt8(t),this.slot(e))}addFieldInt16(e,t,r){(this.force_defaults||t!=r)&&(this.addInt16(t),this.slot(e))}addFieldInt32(e,t,r){(this.force_defaults||t!=r)&&(this.addInt32(t),this.slot(e))}addFieldInt64(e,t,r){(this.force_defaults||t!==r)&&(this.addInt64(t),this.slot(e))}addFieldFloat32(e,t,r){(this.force_defaults||t!=r)&&(this.addFloat32(t),this.slot(e))}addFieldFloat64(e,t,r){(this.force_defaults||t!=r)&&(this.addFloat64(t),this.slot(e))}addFieldOffset(e,t,r){(this.force_defaults||t!=r)&&(this.addOffset(t),this.slot(e))}addFieldStruct(e,t,r){t!=r&&(this.nested(t),this.slot(e))}nested(e){if(e!=this.offset())throw new TypeError("FlatBuffers: struct must be serialized inline.")}notNested(){if(this.isNested)throw new TypeError("FlatBuffers: object serialization must not be nested.")}slot(e){this.vtable!==null&&(this.vtable[e]=this.offset())}offset(){return this.bb.capacity()-this.space}static growByteBuffer(e){const t=e.capacity();if(t&3221225472)throw new Error("FlatBuffers: cannot grow buffer beyond 2 gigabytes.");const r=t<<1,u=ByteBuffer$2.allocate(r);return u.setPosition(r-t),u.bytes().set(e.bytes(),r-t),u}addOffset(e){this.prep(SIZEOF_INT,0),this.writeInt32(this.offset()-e+SIZEOF_INT)}startObject(e){this.notNested(),this.vtable==null&&(this.vtable=[]),this.vtable_in_use=e;for(let t=0;t<e;t++)this.vtable[t]=0;this.isNested=!0,this.object_start=this.offset()}endObject(){if(this.vtable==null||!this.isNested)throw new Error("FlatBuffers: endObject called without startObject");this.addInt32(0);const e=this.offset();let t=this.vtable_in_use-1;for(;t>=0&&this.vtable[t]==0;t--);const r=t+1;for(;t>=0;t--)this.addInt16(this.vtable[t]!=0?e-this.vtable[t]:0);const u=2;this.addInt16(e-this.object_start);const T=(r+u)*SIZEOF_SHORT;this.addInt16(T);let d=0;const A=this.space;e:for(t=0;t<this.vtables.length;t++){const le=this.bb.capacity()-this.vtables[t];if(T==this.bb.readInt16(le)){for(let G=SIZEOF_SHORT;G<T;G+=SIZEOF_SHORT)if(this.bb.readInt16(A+G)!=this.bb.readInt16(le+G))continue e;d=this.vtables[t];break}}return d?(this.space=this.bb.capacity()-e,this.bb.writeInt32(this.space,d-e)):(this.vtables.push(this.offset()),this.bb.writeInt32(this.bb.capacity()-e,this.offset()-e)),this.isNested=!1,e}finish(e,t,r){const u=r?SIZE_PREFIX_LENGTH:0;if(t){const T=t;if(this.prep(this.minalign,SIZEOF_INT+FILE_IDENTIFIER_LENGTH+u),T.length!=FILE_IDENTIFIER_LENGTH)throw new TypeError("FlatBuffers: file identifier must be length "+FILE_IDENTIFIER_LENGTH);for(let d=FILE_IDENTIFIER_LENGTH-1;d>=0;d--)this.writeInt8(T.charCodeAt(d))}this.prep(this.minalign,SIZEOF_INT+u),this.addOffset(e),u&&this.addInt32(this.bb.capacity()-this.space),this.bb.setPosition(this.space)}finishSizePrefixed(e,t){this.finish(e,t,!0)}requiredField(e,t){const r=this.bb.capacity()-e,u=r-this.bb.readInt32(r);if(!(t<this.bb.readInt16(u)&&this.bb.readInt16(u+t)!=0))throw new TypeError("FlatBuffers: field "+t+" must be set")}startVector(e,t,r){this.notNested(),this.vector_num_elems=t,this.prep(SIZEOF_INT,e*t),this.prep(r,e*t)}endVector(){return this.writeInt32(this.vector_num_elems),this.offset()}createSharedString(e){if(!e)return 0;if(this.string_maps||(this.string_maps=new Map),this.string_maps.has(e))return this.string_maps.get(e);const t=this.createString(e);return this.string_maps.set(e,t),t}createString(e){if(e==null)return 0;let t;e instanceof Uint8Array?t=e:t=this.text_encoder.encode(e),this.addInt8(0),this.startVector(1,t.length,1),this.bb.setPosition(this.space-=t.length);for(let r=0,u=this.space,T=this.bb.bytes();r<t.length;r++)T[u++]=t[r];return this.endVector()}createObjectOffset(e){return e===null?0:typeof e=="string"?this.createString(e):e.pack(this)}createObjectOffsetList(e){const t=[];for(let r=0;r<e.length;++r){const u=e[r];if(u!==null)t.push(this.createObjectOffset(u));else throw new TypeError("FlatBuffers: Argument for createObjectOffsetList cannot contain null.")}return t}createStructOffsetList(e,t){return t(this,e.length),this.createObjectOffsetList(e.slice().reverse()),this.endVector()}};class KeyValue{constructor(){this.bb=null,this.bb_pos=0}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsKeyValue(e,t){return(t||new KeyValue).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsKeyValue(e,t){return e.setPosition(e.position()+SIZE_PREFIX_LENGTH),(t||new KeyValue).__init(e.readInt32(e.position())+e.position(),e)}key(e){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.__string(this.bb_pos+t,e):null}value(e){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__string(this.bb_pos+t,e):null}static startKeyValue(e){e.startObject(2)}static addKey(e,t){e.addFieldOffset(0,t,0)}static addValue(e,t){e.addFieldOffset(1,t,0)}static endKeyValue(e){return e.endObject()}static createKeyValue(e,t,r){return KeyValue.startKeyValue(e),KeyValue.addKey(e,t),KeyValue.addValue(e,r),KeyValue.endKeyValue(e)}}var MetadataVersion;(function(n){n[n.V1=0]="V1",n[n.V2=1]="V2",n[n.V3=2]="V3",n[n.V4=3]="V4",n[n.V5=4]="V5"})(MetadataVersion||(MetadataVersion={}));var Endianness;(function(n){n[n.Little=0]="Little",n[n.Big=1]="Big"})(Endianness||(Endianness={}));var DictionaryKind;(function(n){n[n.DenseArray=0]="DenseArray"})(DictionaryKind||(DictionaryKind={}));class Int{constructor(){this.bb=null,this.bb_pos=0}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsInt(e,t){return(t||new Int).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsInt(e,t){return e.setPosition(e.position()+SIZE_PREFIX_LENGTH),(t||new Int).__init(e.readInt32(e.position())+e.position(),e)}bitWidth(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt32(this.bb_pos+e):0}isSigned(){const e=this.bb.__offset(this.bb_pos,6);return e?!!this.bb.readInt8(this.bb_pos+e):!1}static startInt(e){e.startObject(2)}static addBitWidth(e,t){e.addFieldInt32(0,t,0)}static addIsSigned(e,t){e.addFieldInt8(1,+t,0)}static endInt(e){return e.endObject()}static createInt(e,t,r){return Int.startInt(e),Int.addBitWidth(e,t),Int.addIsSigned(e,r),Int.endInt(e)}}class DictionaryEncoding{constructor(){this.bb=null,this.bb_pos=0}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsDictionaryEncoding(e,t){return(t||new DictionaryEncoding).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsDictionaryEncoding(e,t){return e.setPosition(e.position()+SIZE_PREFIX_LENGTH),(t||new DictionaryEncoding).__init(e.readInt32(e.position())+e.position(),e)}id(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt64(this.bb_pos+e):BigInt("0")}indexType(e){const t=this.bb.__offset(this.bb_pos,6);return t?(e||new Int).__init(this.bb.__indirect(this.bb_pos+t),this.bb):null}isOrdered(){const e=this.bb.__offset(this.bb_pos,8);return e?!!this.bb.readInt8(this.bb_pos+e):!1}dictionaryKind(){const e=this.bb.__offset(this.bb_pos,10);return e?this.bb.readInt16(this.bb_pos+e):DictionaryKind.DenseArray}static startDictionaryEncoding(e){e.startObject(4)}static addId(e,t){e.addFieldInt64(0,t,BigInt("0"))}static addIndexType(e,t){e.addFieldOffset(1,t,0)}static addIsOrdered(e,t){e.addFieldInt8(2,+t,0)}static addDictionaryKind(e,t){e.addFieldInt16(3,t,DictionaryKind.DenseArray)}static endDictionaryEncoding(e){return e.endObject()}}class Binary{constructor(){this.bb=null,this.bb_pos=0}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsBinary(e,t){return(t||new Binary).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsBinary(e,t){return e.setPosition(e.position()+SIZE_PREFIX_LENGTH),(t||new Binary).__init(e.readInt32(e.position())+e.position(),e)}static startBinary(e){e.startObject(0)}static endBinary(e){return e.endObject()}static createBinary(e){return Binary.startBinary(e),Binary.endBinary(e)}}class Bool{constructor(){this.bb=null,this.bb_pos=0}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsBool(e,t){return(t||new Bool).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsBool(e,t){return e.setPosition(e.position()+SIZE_PREFIX_LENGTH),(t||new Bool).__init(e.readInt32(e.position())+e.position(),e)}static startBool(e){e.startObject(0)}static endBool(e){return e.endObject()}static createBool(e){return Bool.startBool(e),Bool.endBool(e)}}var DateUnit;(function(n){n[n.DAY=0]="DAY",n[n.MILLISECOND=1]="MILLISECOND"})(DateUnit||(DateUnit={}));let Date$1=class oo{constructor(){this.bb=null,this.bb_pos=0}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsDate(e,t){return(t||new oo).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsDate(e,t){return e.setPosition(e.position()+SIZE_PREFIX_LENGTH),(t||new oo).__init(e.readInt32(e.position())+e.position(),e)}unit(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt16(this.bb_pos+e):DateUnit.MILLISECOND}static startDate(e){e.startObject(1)}static addUnit(e,t){e.addFieldInt16(0,t,DateUnit.MILLISECOND)}static endDate(e){return e.endObject()}static createDate(e,t){return oo.startDate(e),oo.addUnit(e,t),oo.endDate(e)}};class Decimal{constructor(){this.bb=null,this.bb_pos=0}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsDecimal(e,t){return(t||new Decimal).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsDecimal(e,t){return e.setPosition(e.position()+SIZE_PREFIX_LENGTH),(t||new Decimal).__init(e.readInt32(e.position())+e.position(),e)}precision(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt32(this.bb_pos+e):0}scale(){const e=this.bb.__offset(this.bb_pos,6);return e?this.bb.readInt32(this.bb_pos+e):0}bitWidth(){const e=this.bb.__offset(this.bb_pos,8);return e?this.bb.readInt32(this.bb_pos+e):128}static startDecimal(e){e.startObject(3)}static addPrecision(e,t){e.addFieldInt32(0,t,0)}static addScale(e,t){e.addFieldInt32(1,t,0)}static addBitWidth(e,t){e.addFieldInt32(2,t,128)}static endDecimal(e){return e.endObject()}static createDecimal(e,t,r,u){return Decimal.startDecimal(e),Decimal.addPrecision(e,t),Decimal.addScale(e,r),Decimal.addBitWidth(e,u),Decimal.endDecimal(e)}}var TimeUnit;(function(n){n[n.SECOND=0]="SECOND",n[n.MILLISECOND=1]="MILLISECOND",n[n.MICROSECOND=2]="MICROSECOND",n[n.NANOSECOND=3]="NANOSECOND"})(TimeUnit||(TimeUnit={}));class FixedSizeBinary{constructor(){this.bb=null,this.bb_pos=0}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsFixedSizeBinary(e,t){return(t||new FixedSizeBinary).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsFixedSizeBinary(e,t){return e.setPosition(e.position()+SIZE_PREFIX_LENGTH),(t||new FixedSizeBinary).__init(e.readInt32(e.position())+e.position(),e)}byteWidth(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt32(this.bb_pos+e):0}static startFixedSizeBinary(e){e.startObject(1)}static addByteWidth(e,t){e.addFieldInt32(0,t,0)}static endFixedSizeBinary(e){return e.endObject()}static createFixedSizeBinary(e,t){return FixedSizeBinary.startFixedSizeBinary(e),FixedSizeBinary.addByteWidth(e,t),FixedSizeBinary.endFixedSizeBinary(e)}}class FixedSizeList{constructor(){this.bb=null,this.bb_pos=0}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsFixedSizeList(e,t){return(t||new FixedSizeList).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsFixedSizeList(e,t){return e.setPosition(e.position()+SIZE_PREFIX_LENGTH),(t||new FixedSizeList).__init(e.readInt32(e.position())+e.position(),e)}listSize(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt32(this.bb_pos+e):0}static startFixedSizeList(e){e.startObject(1)}static addListSize(e,t){e.addFieldInt32(0,t,0)}static endFixedSizeList(e){return e.endObject()}static createFixedSizeList(e,t){return FixedSizeList.startFixedSizeList(e),FixedSizeList.addListSize(e,t),FixedSizeList.endFixedSizeList(e)}}var Precision;(function(n){n[n.HALF=0]="HALF",n[n.SINGLE=1]="SINGLE",n[n.DOUBLE=2]="DOUBLE"})(Precision||(Precision={}));class FloatingPoint{constructor(){this.bb=null,this.bb_pos=0}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsFloatingPoint(e,t){return(t||new FloatingPoint).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsFloatingPoint(e,t){return e.setPosition(e.position()+SIZE_PREFIX_LENGTH),(t||new FloatingPoint).__init(e.readInt32(e.position())+e.position(),e)}precision(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt16(this.bb_pos+e):Precision.HALF}static startFloatingPoint(e){e.startObject(1)}static addPrecision(e,t){e.addFieldInt16(0,t,Precision.HALF)}static endFloatingPoint(e){return e.endObject()}static createFloatingPoint(e,t){return FloatingPoint.startFloatingPoint(e),FloatingPoint.addPrecision(e,t),FloatingPoint.endFloatingPoint(e)}}var IntervalUnit;(function(n){n[n.YEAR_MONTH=0]="YEAR_MONTH",n[n.DAY_TIME=1]="DAY_TIME",n[n.MONTH_DAY_NANO=2]="MONTH_DAY_NANO"})(IntervalUnit||(IntervalUnit={}));class Interval{constructor(){this.bb=null,this.bb_pos=0}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsInterval(e,t){return(t||new Interval).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsInterval(e,t){return e.setPosition(e.position()+SIZE_PREFIX_LENGTH),(t||new Interval).__init(e.readInt32(e.position())+e.position(),e)}unit(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt16(this.bb_pos+e):IntervalUnit.YEAR_MONTH}static startInterval(e){e.startObject(1)}static addUnit(e,t){e.addFieldInt16(0,t,IntervalUnit.YEAR_MONTH)}static endInterval(e){return e.endObject()}static createInterval(e,t){return Interval.startInterval(e),Interval.addUnit(e,t),Interval.endInterval(e)}}class List{constructor(){this.bb=null,this.bb_pos=0}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsList(e,t){return(t||new List).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsList(e,t){return e.setPosition(e.position()+SIZE_PREFIX_LENGTH),(t||new List).__init(e.readInt32(e.position())+e.position(),e)}static startList(e){e.startObject(0)}static endList(e){return e.endObject()}static createList(e){return List.startList(e),List.endList(e)}}let Map$1=class ao{constructor(){this.bb=null,this.bb_pos=0}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsMap(e,t){return(t||new ao).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsMap(e,t){return e.setPosition(e.position()+SIZE_PREFIX_LENGTH),(t||new ao).__init(e.readInt32(e.position())+e.position(),e)}keysSorted(){const e=this.bb.__offset(this.bb_pos,4);return e?!!this.bb.readInt8(this.bb_pos+e):!1}static startMap(e){e.startObject(1)}static addKeysSorted(e,t){e.addFieldInt8(0,+t,0)}static endMap(e){return e.endObject()}static createMap(e,t){return ao.startMap(e),ao.addKeysSorted(e,t),ao.endMap(e)}};class Null{constructor(){this.bb=null,this.bb_pos=0}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsNull(e,t){return(t||new Null).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsNull(e,t){return e.setPosition(e.position()+SIZE_PREFIX_LENGTH),(t||new Null).__init(e.readInt32(e.position())+e.position(),e)}static startNull(e){e.startObject(0)}static endNull(e){return e.endObject()}static createNull(e){return Null.startNull(e),Null.endNull(e)}}class Struct_{constructor(){this.bb=null,this.bb_pos=0}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsStruct_(e,t){return(t||new Struct_).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsStruct_(e,t){return e.setPosition(e.position()+SIZE_PREFIX_LENGTH),(t||new Struct_).__init(e.readInt32(e.position())+e.position(),e)}static startStruct_(e){e.startObject(0)}static endStruct_(e){return e.endObject()}static createStruct_(e){return Struct_.startStruct_(e),Struct_.endStruct_(e)}}class Time{constructor(){this.bb=null,this.bb_pos=0}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsTime(e,t){return(t||new Time).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsTime(e,t){return e.setPosition(e.position()+SIZE_PREFIX_LENGTH),(t||new Time).__init(e.readInt32(e.position())+e.position(),e)}unit(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt16(this.bb_pos+e):TimeUnit.MILLISECOND}bitWidth(){const e=this.bb.__offset(this.bb_pos,6);return e?this.bb.readInt32(this.bb_pos+e):32}static startTime(e){e.startObject(2)}static addUnit(e,t){e.addFieldInt16(0,t,TimeUnit.MILLISECOND)}static addBitWidth(e,t){e.addFieldInt32(1,t,32)}static endTime(e){return e.endObject()}static createTime(e,t,r){return Time.startTime(e),Time.addUnit(e,t),Time.addBitWidth(e,r),Time.endTime(e)}}class Timestamp{constructor(){this.bb=null,this.bb_pos=0}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsTimestamp(e,t){return(t||new Timestamp).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsTimestamp(e,t){return e.setPosition(e.position()+SIZE_PREFIX_LENGTH),(t||new Timestamp).__init(e.readInt32(e.position())+e.position(),e)}unit(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt16(this.bb_pos+e):TimeUnit.SECOND}timezone(e){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__string(this.bb_pos+t,e):null}static startTimestamp(e){e.startObject(2)}static addUnit(e,t){e.addFieldInt16(0,t,TimeUnit.SECOND)}static addTimezone(e,t){e.addFieldOffset(1,t,0)}static endTimestamp(e){return e.endObject()}static createTimestamp(e,t,r){return Timestamp.startTimestamp(e),Timestamp.addUnit(e,t),Timestamp.addTimezone(e,r),Timestamp.endTimestamp(e)}}var UnionMode;(function(n){n[n.Sparse=0]="Sparse",n[n.Dense=1]="Dense"})(UnionMode||(UnionMode={}));class Union{constructor(){this.bb=null,this.bb_pos=0}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsUnion(e,t){return(t||new Union).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsUnion(e,t){return e.setPosition(e.position()+SIZE_PREFIX_LENGTH),(t||new Union).__init(e.readInt32(e.position())+e.position(),e)}mode(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt16(this.bb_pos+e):UnionMode.Sparse}typeIds(e){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readInt32(this.bb.__vector(this.bb_pos+t)+e*4):0}typeIdsLength(){const e=this.bb.__offset(this.bb_pos,6);return e?this.bb.__vector_len(this.bb_pos+e):0}typeIdsArray(){const e=this.bb.__offset(this.bb_pos,6);return e?new Int32Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+e),this.bb.__vector_len(this.bb_pos+e)):null}static startUnion(e){e.startObject(2)}static addMode(e,t){e.addFieldInt16(0,t,UnionMode.Sparse)}static addTypeIds(e,t){e.addFieldOffset(1,t,0)}static createTypeIdsVector(e,t){e.startVector(4,t.length,4);for(let r=t.length-1;r>=0;r--)e.addInt32(t[r]);return e.endVector()}static startTypeIdsVector(e,t){e.startVector(4,t,4)}static endUnion(e){return e.endObject()}static createUnion(e,t,r){return Union.startUnion(e),Union.addMode(e,t),Union.addTypeIds(e,r),Union.endUnion(e)}}class Utf8{constructor(){this.bb=null,this.bb_pos=0}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsUtf8(e,t){return(t||new Utf8).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsUtf8(e,t){return e.setPosition(e.position()+SIZE_PREFIX_LENGTH),(t||new Utf8).__init(e.readInt32(e.position())+e.position(),e)}static startUtf8(e){e.startObject(0)}static endUtf8(e){return e.endObject()}static createUtf8(e){return Utf8.startUtf8(e),Utf8.endUtf8(e)}}var Type;(function(n){n[n.NONE=0]="NONE",n[n.Null=1]="Null",n[n.Int=2]="Int",n[n.FloatingPoint=3]="FloatingPoint",n[n.Binary=4]="Binary",n[n.Utf8=5]="Utf8",n[n.Bool=6]="Bool",n[n.Decimal=7]="Decimal",n[n.Date=8]="Date",n[n.Time=9]="Time",n[n.Timestamp=10]="Timestamp",n[n.Interval=11]="Interval",n[n.List=12]="List",n[n.Struct_=13]="Struct_",n[n.Union=14]="Union",n[n.FixedSizeBinary=15]="FixedSizeBinary",n[n.FixedSizeList=16]="FixedSizeList",n[n.Map=17]="Map",n[n.Duration=18]="Duration",n[n.LargeBinary=19]="LargeBinary",n[n.LargeUtf8=20]="LargeUtf8",n[n.LargeList=21]="LargeList",n[n.RunEndEncoded=22]="RunEndEncoded"})(Type||(Type={}));let Field$1=class ll{constructor(){this.bb=null,this.bb_pos=0}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsField(e,t){return(t||new ll).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsField(e,t){return e.setPosition(e.position()+SIZE_PREFIX_LENGTH),(t||new ll).__init(e.readInt32(e.position())+e.position(),e)}name(e){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.__string(this.bb_pos+t,e):null}nullable(){const e=this.bb.__offset(this.bb_pos,6);return e?!!this.bb.readInt8(this.bb_pos+e):!1}typeType(){const e=this.bb.__offset(this.bb_pos,8);return e?this.bb.readUint8(this.bb_pos+e):Type.NONE}type(e){const t=this.bb.__offset(this.bb_pos,10);return t?this.bb.__union(e,this.bb_pos+t):null}dictionary(e){const t=this.bb.__offset(this.bb_pos,12);return t?(e||new DictionaryEncoding).__init(this.bb.__indirect(this.bb_pos+t),this.bb):null}children(e,t){const r=this.bb.__offset(this.bb_pos,14);return r?(t||new ll).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+e*4),this.bb):null}childrenLength(){const e=this.bb.__offset(this.bb_pos,14);return e?this.bb.__vector_len(this.bb_pos+e):0}customMetadata(e,t){const r=this.bb.__offset(this.bb_pos,16);return r?(t||new KeyValue).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+e*4),this.bb):null}customMetadataLength(){const e=this.bb.__offset(this.bb_pos,16);return e?this.bb.__vector_len(this.bb_pos+e):0}static startField(e){e.startObject(7)}static addName(e,t){e.addFieldOffset(0,t,0)}static addNullable(e,t){e.addFieldInt8(1,+t,0)}static addTypeType(e,t){e.addFieldInt8(2,t,Type.NONE)}static addType(e,t){e.addFieldOffset(3,t,0)}static addDictionary(e,t){e.addFieldOffset(4,t,0)}static addChildren(e,t){e.addFieldOffset(5,t,0)}static createChildrenVector(e,t){e.startVector(4,t.length,4);for(let r=t.length-1;r>=0;r--)e.addOffset(t[r]);return e.endVector()}static startChildrenVector(e,t){e.startVector(4,t,4)}static addCustomMetadata(e,t){e.addFieldOffset(6,t,0)}static createCustomMetadataVector(e,t){e.startVector(4,t.length,4);for(let r=t.length-1;r>=0;r--)e.addOffset(t[r]);return e.endVector()}static startCustomMetadataVector(e,t){e.startVector(4,t,4)}static endField(e){return e.endObject()}},Schema$1=class Ei{constructor(){this.bb=null,this.bb_pos=0}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsSchema(e,t){return(t||new Ei).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsSchema(e,t){return e.setPosition(e.position()+SIZE_PREFIX_LENGTH),(t||new Ei).__init(e.readInt32(e.position())+e.position(),e)}endianness(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt16(this.bb_pos+e):Endianness.Little}fields(e,t){const r=this.bb.__offset(this.bb_pos,6);return r?(t||new Field$1).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+e*4),this.bb):null}fieldsLength(){const e=this.bb.__offset(this.bb_pos,6);return e?this.bb.__vector_len(this.bb_pos+e):0}customMetadata(e,t){const r=this.bb.__offset(this.bb_pos,8);return r?(t||new KeyValue).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+e*4),this.bb):null}customMetadataLength(){const e=this.bb.__offset(this.bb_pos,8);return e?this.bb.__vector_len(this.bb_pos+e):0}features(e){const t=this.bb.__offset(this.bb_pos,10);return t?this.bb.readInt64(this.bb.__vector(this.bb_pos+t)+e*8):BigInt(0)}featuresLength(){const e=this.bb.__offset(this.bb_pos,10);return e?this.bb.__vector_len(this.bb_pos+e):0}static startSchema(e){e.startObject(4)}static addEndianness(e,t){e.addFieldInt16(0,t,Endianness.Little)}static addFields(e,t){e.addFieldOffset(1,t,0)}static createFieldsVector(e,t){e.startVector(4,t.length,4);for(let r=t.length-1;r>=0;r--)e.addOffset(t[r]);return e.endVector()}static startFieldsVector(e,t){e.startVector(4,t,4)}static addCustomMetadata(e,t){e.addFieldOffset(2,t,0)}static createCustomMetadataVector(e,t){e.startVector(4,t.length,4);for(let r=t.length-1;r>=0;r--)e.addOffset(t[r]);return e.endVector()}static startCustomMetadataVector(e,t){e.startVector(4,t,4)}static addFeatures(e,t){e.addFieldOffset(3,t,0)}static createFeaturesVector(e,t){e.startVector(8,t.length,8);for(let r=t.length-1;r>=0;r--)e.addInt64(t[r]);return e.endVector()}static startFeaturesVector(e,t){e.startVector(8,t,8)}static endSchema(e){return e.endObject()}static finishSchemaBuffer(e,t){e.finish(t)}static finishSizePrefixedSchemaBuffer(e,t){e.finish(t,void 0,!0)}static createSchema(e,t,r,u,T){return Ei.startSchema(e),Ei.addEndianness(e,t),Ei.addFields(e,r),Ei.addCustomMetadata(e,u),Ei.addFeatures(e,T),Ei.endSchema(e)}};class Footer{constructor(){this.bb=null,this.bb_pos=0}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsFooter(e,t){return(t||new Footer).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsFooter(e,t){return e.setPosition(e.position()+SIZE_PREFIX_LENGTH),(t||new Footer).__init(e.readInt32(e.position())+e.position(),e)}version(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt16(this.bb_pos+e):MetadataVersion.V1}schema(e){const t=this.bb.__offset(this.bb_pos,6);return t?(e||new Schema$1).__init(this.bb.__indirect(this.bb_pos+t),this.bb):null}dictionaries(e,t){const r=this.bb.__offset(this.bb_pos,8);return r?(t||new Block).__init(this.bb.__vector(this.bb_pos+r)+e*24,this.bb):null}dictionariesLength(){const e=this.bb.__offset(this.bb_pos,8);return e?this.bb.__vector_len(this.bb_pos+e):0}recordBatches(e,t){const r=this.bb.__offset(this.bb_pos,10);return r?(t||new Block).__init(this.bb.__vector(this.bb_pos+r)+e*24,this.bb):null}recordBatchesLength(){const e=this.bb.__offset(this.bb_pos,10);return e?this.bb.__vector_len(this.bb_pos+e):0}customMetadata(e,t){const r=this.bb.__offset(this.bb_pos,12);return r?(t||new KeyValue).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+e*4),this.bb):null}customMetadataLength(){const e=this.bb.__offset(this.bb_pos,12);return e?this.bb.__vector_len(this.bb_pos+e):0}static startFooter(e){e.startObject(5)}static addVersion(e,t){e.addFieldInt16(0,t,MetadataVersion.V1)}static addSchema(e,t){e.addFieldOffset(1,t,0)}static addDictionaries(e,t){e.addFieldOffset(2,t,0)}static startDictionariesVector(e,t){e.startVector(24,t,8)}static addRecordBatches(e,t){e.addFieldOffset(3,t,0)}static startRecordBatchesVector(e,t){e.startVector(24,t,8)}static addCustomMetadata(e,t){e.addFieldOffset(4,t,0)}static createCustomMetadataVector(e,t){e.startVector(4,t.length,4);for(let r=t.length-1;r>=0;r--)e.addOffset(t[r]);return e.endVector()}static startCustomMetadataVector(e,t){e.startVector(4,t,4)}static endFooter(e){return e.endObject()}static finishFooterBuffer(e,t){e.finish(t)}static finishSizePrefixedFooterBuffer(e,t){e.finish(t,void 0,!0)}}class Schema{constructor(e=[],t,r){this.fields=e||[],this.metadata=t||new Map,r||(r=generateDictionaryMap(e)),this.dictionaries=r}get[Symbol.toStringTag](){return"Schema"}get names(){return this.fields.map(e=>e.name)}toString(){return`Schema<{ ${this.fields.map((e,t)=>`${t}: ${e}`).join(", ")} }>`}select(e){const t=new Set(e),r=this.fields.filter(u=>t.has(u.name));return new Schema(r,this.metadata)}selectAt(e){const t=e.map(r=>this.fields[r]).filter(Boolean);return new Schema(t,this.metadata)}assign(...e){const t=e[0]instanceof Schema?e[0]:Array.isArray(e[0])?new Schema(e[0]):new Schema(e),r=[...this.fields],u=mergeMaps(mergeMaps(new Map,this.metadata),t.metadata),T=t.fields.filter(A=>{const le=r.findIndex(G=>G.name===A.name);return~le?(r[le]=A.clone({metadata:mergeMaps(mergeMaps(new Map,r[le].metadata),A.metadata)}))&&!1:!0}),d=generateDictionaryMap(T,new Map);return new Schema([...r,...T],u,new Map([...this.dictionaries,...d]))}}Schema.prototype.fields=null;Schema.prototype.metadata=null;Schema.prototype.dictionaries=null;class Field{static new(...e){let[t,r,u,T]=e;return e[0]&&typeof e[0]=="object"&&({name:t}=e[0],r===void 0&&(r=e[0].type),u===void 0&&(u=e[0].nullable),T===void 0&&(T=e[0].metadata)),new Field(`${t}`,r,u,T)}constructor(e,t,r=!1,u){this.name=e,this.type=t,this.nullable=r,this.metadata=u||new Map}get typeId(){return this.type.typeId}get[Symbol.toStringTag](){return"Field"}toString(){return`${this.name}: ${this.type}`}clone(...e){let[t,r,u,T]=e;return!e[0]||typeof e[0]!="object"?[t=this.name,r=this.type,u=this.nullable,T=this.metadata]=e:{name:t=this.name,type:r=this.type,nullable:u=this.nullable,metadata:T=this.metadata}=e[0],Field.new(t,r,u,T)}}Field.prototype.type=null;Field.prototype.name=null;Field.prototype.nullable=null;Field.prototype.metadata=null;function mergeMaps(n,e){return new Map([...n||new Map,...e||new Map])}function generateDictionaryMap(n,e=new Map){for(let t=-1,r=n.length;++t<r;){const T=n[t].type;if(DataType.isDictionary(T)){if(!e.has(T.id))e.set(T.id,T.dictionary);else if(e.get(T.id)!==T.dictionary)throw new Error("Cannot create Schema containing two different dictionaries with the same Id")}T.children&&T.children.length>0&&generateDictionaryMap(T.children,e)}return e}var Builder$1=Builder$2,ByteBuffer$1=ByteBuffer$2;class Footer_{static decode(e){e=new ByteBuffer$1(toUint8Array(e));const t=Footer.getRootAsFooter(e),r=Schema.decode(t.schema());return new OffHeapFooter(r,t)}static encode(e){const t=new Builder$1,r=Schema.encode(t,e.schema);Footer.startRecordBatchesVector(t,e.numRecordBatches);for(const d of[...e.recordBatches()].slice().reverse())FileBlock.encode(t,d);const u=t.endVector();Footer.startDictionariesVector(t,e.numDictionaries);for(const d of[...e.dictionaryBatches()].slice().reverse())FileBlock.encode(t,d);const T=t.endVector();return Footer.startFooter(t),Footer.addSchema(t,r),Footer.addVersion(t,MetadataVersion$1.V4),Footer.addRecordBatches(t,u),Footer.addDictionaries(t,T),Footer.finishFooterBuffer(t,Footer.endFooter(t)),t.asUint8Array()}get numRecordBatches(){return this._recordBatches.length}get numDictionaries(){return this._dictionaryBatches.length}constructor(e,t=MetadataVersion$1.V4,r,u){this.schema=e,this.version=t,r&&(this._recordBatches=r),u&&(this._dictionaryBatches=u)}*recordBatches(){for(let e,t=-1,r=this.numRecordBatches;++t<r;)(e=this.getRecordBatch(t))&&(yield e)}*dictionaryBatches(){for(let e,t=-1,r=this.numDictionaries;++t<r;)(e=this.getDictionaryBatch(t))&&(yield e)}getRecordBatch(e){return e>=0&&e<this.numRecordBatches&&this._recordBatches[e]||null}getDictionaryBatch(e){return e>=0&&e<this.numDictionaries&&this._dictionaryBatches[e]||null}}class OffHeapFooter extends Footer_{get numRecordBatches(){return this._footer.recordBatchesLength()}get numDictionaries(){return this._footer.dictionariesLength()}constructor(e,t){super(e,t.version()),this._footer=t}getRecordBatch(e){if(e>=0&&e<this.numRecordBatches){const t=this._footer.recordBatches(e);if(t)return FileBlock.decode(t)}return null}getDictionaryBatch(e){if(e>=0&&e<this.numDictionaries){const t=this._footer.dictionaries(e);if(t)return FileBlock.decode(t)}return null}}class FileBlock{static decode(e){return new FileBlock(e.metaDataLength(),e.bodyLength(),e.offset())}static encode(e,t){const{metaDataLength:r}=t,u=BigInt(t.offset),T=BigInt(t.bodyLength);return Block.createBlock(e,u,r,T)}constructor(e,t,r){this.metaDataLength=e,this.offset=bigIntToNumber(r),this.bodyLength=bigIntToNumber(t)}}const ITERATOR_DONE=Object.freeze({done:!0,value:void 0});class ArrowJSON{constructor(e){this._json=e}get schema(){return this._json.schema}get batches(){return this._json.batches||[]}get dictionaries(){return this._json.dictionaries||[]}}class ReadableInterop{tee(){return this._getDOMStream().tee()}pipe(e,t){return this._getNodeStream().pipe(e,t)}pipeTo(e,t){return this._getDOMStream().pipeTo(e,t)}pipeThrough(e,t){return this._getDOMStream().pipeThrough(e,t)}_getDOMStream(){return this._DOMStream||(this._DOMStream=this.toDOMStream())}_getNodeStream(){return this._nodeStream||(this._nodeStream=this.toNodeStream())}}class AsyncQueue extends ReadableInterop{constructor(){super(),this._values=[],this.resolvers=[],this._closedPromise=new Promise(e=>this._closedPromiseResolve=e)}get closed(){return this._closedPromise}cancel(e){return __awaiter(this,void 0,void 0,function*(){yield this.return(e)})}write(e){this._ensureOpen()&&(this.resolvers.length<=0?this._values.push(e):this.resolvers.shift().resolve({done:!1,value:e}))}abort(e){this._closedPromiseResolve&&(this.resolvers.length<=0?this._error={error:e}:this.resolvers.shift().reject({done:!0,value:e}))}close(){if(this._closedPromiseResolve){const{resolvers:e}=this;for(;e.length>0;)e.shift().resolve(ITERATOR_DONE);this._closedPromiseResolve(),this._closedPromiseResolve=void 0}}[Symbol.asyncIterator](){return this}toDOMStream(e){return streamAdapters.toDOMStream(this._closedPromiseResolve||this._error?this:this._values,e)}toNodeStream(e){return streamAdapters.toNodeStream(this._closedPromiseResolve||this._error?this:this._values,e)}throw(e){return __awaiter(this,void 0,void 0,function*(){return yield this.abort(e),ITERATOR_DONE})}return(e){return __awaiter(this,void 0,void 0,function*(){return yield this.close(),ITERATOR_DONE})}read(e){return __awaiter(this,void 0,void 0,function*(){return(yield this.next(e,"read")).value})}peek(e){return __awaiter(this,void 0,void 0,function*(){return(yield this.next(e,"peek")).value})}next(...e){return this._values.length>0?Promise.resolve({done:!1,value:this._values.shift()}):this._error?Promise.reject({done:!0,value:this._error.error}):this._closedPromiseResolve?new Promise((t,r)=>{this.resolvers.push({resolve:t,reject:r})}):Promise.resolve(ITERATOR_DONE)}_ensureOpen(){if(this._closedPromiseResolve)return!0;throw new Error("AsyncQueue is closed")}}class AsyncByteQueue extends AsyncQueue{write(e){if((e=toUint8Array(e)).byteLength>0)return super.write(e)}toString(e=!1){return e?decodeUtf8(this.toUint8Array(!0)):this.toUint8Array(!1).then(decodeUtf8)}toUint8Array(e=!1){return e?joinUint8Arrays(this._values)[0]:__awaiter(this,void 0,void 0,function*(){var t,r,u,T;const d=[];let A=0;try{for(var le=!0,G=__asyncValues(this),B;B=yield G.next(),t=B.done,!t;le=!0){T=B.value,le=!1;const o=T;d.push(o),A+=o.byteLength}}catch(o){r={error:o}}finally{try{!le&&!t&&(u=G.return)&&(yield u.call(G))}finally{if(r)throw r.error}}return joinUint8Arrays(d,A)[0]})}}class ByteStream{constructor(e){e&&(this.source=new ByteStreamSource(streamAdapters.fromIterable(e)))}[Symbol.iterator](){return this}next(e){return this.source.next(e)}throw(e){return this.source.throw(e)}return(e){return this.source.return(e)}peek(e){return this.source.peek(e)}read(e){return this.source.read(e)}}class AsyncByteStream{constructor(e){e instanceof AsyncByteStream?this.source=e.source:e instanceof AsyncByteQueue?this.source=new AsyncByteStreamSource(streamAdapters.fromAsyncIterable(e)):isReadableNodeStream(e)?this.source=new AsyncByteStreamSource(streamAdapters.fromNodeStream(e)):isReadableDOMStream(e)?this.source=new AsyncByteStreamSource(streamAdapters.fromDOMStream(e)):isFetchResponse(e)?this.source=new AsyncByteStreamSource(streamAdapters.fromDOMStream(e.body)):isIterable(e)?this.source=new AsyncByteStreamSource(streamAdapters.fromIterable(e)):isPromise(e)?this.source=new AsyncByteStreamSource(streamAdapters.fromAsyncIterable(e)):isAsyncIterable(e)&&(this.source=new AsyncByteStreamSource(streamAdapters.fromAsyncIterable(e)))}[Symbol.asyncIterator](){return this}next(e){return this.source.next(e)}throw(e){return this.source.throw(e)}return(e){return this.source.return(e)}get closed(){return this.source.closed}cancel(e){return this.source.cancel(e)}peek(e){return this.source.peek(e)}read(e){return this.source.read(e)}}class ByteStreamSource{constructor(e){this.source=e}cancel(e){this.return(e)}peek(e){return this.next(e,"peek").value}read(e){return this.next(e,"read").value}next(e,t="read"){return this.source.next({cmd:t,size:e})}throw(e){return Object.create(this.source.throw&&this.source.throw(e)||ITERATOR_DONE)}return(e){return Object.create(this.source.return&&this.source.return(e)||ITERATOR_DONE)}}class AsyncByteStreamSource{constructor(e){this.source=e,this._closedPromise=new Promise(t=>this._closedPromiseResolve=t)}cancel(e){return __awaiter(this,void 0,void 0,function*(){yield this.return(e)})}get closed(){return this._closedPromise}read(e){return __awaiter(this,void 0,void 0,function*(){return(yield this.next(e,"read")).value})}peek(e){return __awaiter(this,void 0,void 0,function*(){return(yield this.next(e,"peek")).value})}next(e,t="read"){return __awaiter(this,void 0,void 0,function*(){return yield this.source.next({cmd:t,size:e})})}throw(e){return __awaiter(this,void 0,void 0,function*(){const t=this.source.throw&&(yield this.source.throw(e))||ITERATOR_DONE;return this._closedPromiseResolve&&this._closedPromiseResolve(),this._closedPromiseResolve=void 0,Object.create(t)})}return(e){return __awaiter(this,void 0,void 0,function*(){const t=this.source.return&&(yield this.source.return(e))||ITERATOR_DONE;return this._closedPromiseResolve&&this._closedPromiseResolve(),this._closedPromiseResolve=void 0,Object.create(t)})}}class RandomAccessFile extends ByteStream{constructor(e,t){super(),this.position=0,this.buffer=toUint8Array(e),this.size=t===void 0?this.buffer.byteLength:t}readInt32(e){const{buffer:t,byteOffset:r}=this.readAt(e,4);return new DataView(t,r).getInt32(0,!0)}seek(e){return this.position=Math.min(e,this.size),e<this.size}read(e){const{buffer:t,size:r,position:u}=this;return t&&u<r?(typeof e!="number"&&(e=Number.POSITIVE_INFINITY),this.position=Math.min(r,u+Math.min(r-u,e)),t.subarray(u,this.position)):null}readAt(e,t){const r=this.buffer,u=Math.min(this.size,e+t);return r?r.subarray(e,u):new Uint8Array(t)}close(){this.buffer&&(this.buffer=null)}throw(e){return this.close(),{done:!0,value:e}}return(e){return this.close(),{done:!0,value:e}}}class AsyncRandomAccessFile extends AsyncByteStream{constructor(e,t){super(),this.position=0,this._handle=e,typeof t=="number"?this.size=t:this._pending=__awaiter(this,void 0,void 0,function*(){this.size=(yield e.stat()).size,delete this._pending})}readInt32(e){return __awaiter(this,void 0,void 0,function*(){const{buffer:t,byteOffset:r}=yield this.readAt(e,4);return new DataView(t,r).getInt32(0,!0)})}seek(e){return __awaiter(this,void 0,void 0,function*(){return this._pending&&(yield this._pending),this.position=Math.min(e,this.size),e<this.size})}read(e){return __awaiter(this,void 0,void 0,function*(){this._pending&&(yield this._pending);const{_handle:t,size:r,position:u}=this;if(t&&u<r){typeof e!="number"&&(e=Number.POSITIVE_INFINITY);let T=u,d=0,A=0;const le=Math.min(r,T+Math.min(r-T,e)),G=new Uint8Array(Math.max(0,(this.position=le)-T));for(;(T+=A)<le&&(d+=A)<G.byteLength;)({bytesRead:A}=yield t.read(G,d,G.byteLength-d,T));return G}return null})}readAt(e,t){return __awaiter(this,void 0,void 0,function*(){this._pending&&(yield this._pending);const{_handle:r,size:u}=this;if(r&&e+t<u){const T=Math.min(u,e+t),d=new Uint8Array(T-e);return(yield r.read(d,0,t,e)).buffer}return new Uint8Array(t)})}close(){return __awaiter(this,void 0,void 0,function*(){const e=this._handle;this._handle=null,e&&(yield e.close())})}throw(e){return __awaiter(this,void 0,void 0,function*(){return yield this.close(),{done:!0,value:e}})}return(e){return __awaiter(this,void 0,void 0,function*(){return yield this.close(),{done:!0,value:e}})}}const carryBit16=65536;function intAsHex(n){return n<0&&(n=4294967295+n+1),`0x${n.toString(16)}`}const kInt32DecimalDigits=8,kPowersOfTen=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8];class BaseInt64{constructor(e){this.buffer=e}high(){return this.buffer[1]}low(){return this.buffer[0]}_times(e){const t=new Uint32Array([this.buffer[1]>>>16,this.buffer[1]&65535,this.buffer[0]>>>16,this.buffer[0]&65535]),r=new Uint32Array([e.buffer[1]>>>16,e.buffer[1]&65535,e.buffer[0]>>>16,e.buffer[0]&65535]);let u=t[3]*r[3];this.buffer[0]=u&65535;let T=u>>>16;return u=t[2]*r[3],T+=u,u=t[3]*r[2]>>>0,T+=u,this.buffer[0]+=T<<16,this.buffer[1]=T>>>0<u?carryBit16:0,this.buffer[1]+=T>>>16,this.buffer[1]+=t[1]*r[3]+t[2]*r[2]+t[3]*r[1],this.buffer[1]+=t[0]*r[3]+t[1]*r[2]+t[2]*r[1]+t[3]*r[0]<<16,this}_plus(e){const t=this.buffer[0]+e.buffer[0]>>>0;this.buffer[1]+=e.buffer[1],t<this.buffer[0]>>>0&&++this.buffer[1],this.buffer[0]=t}lessThan(e){return this.buffer[1]<e.buffer[1]||this.buffer[1]===e.buffer[1]&&this.buffer[0]<e.buffer[0]}equals(e){return this.buffer[1]===e.buffer[1]&&this.buffer[0]==e.buffer[0]}greaterThan(e){return e.lessThan(this)}hex(){return`${intAsHex(this.buffer[1])} ${intAsHex(this.buffer[0])}`}}class Uint64 extends BaseInt64{times(e){return this._times(e),this}plus(e){return this._plus(e),this}static from(e,t=new Uint32Array(2)){return Uint64.fromString(typeof e=="string"?e:e.toString(),t)}static fromNumber(e,t=new Uint32Array(2)){return Uint64.fromString(e.toString(),t)}static fromString(e,t=new Uint32Array(2)){const r=e.length,u=new Uint64(t);for(let T=0;T<r;){const d=kInt32DecimalDigits<r-T?kInt32DecimalDigits:r-T,A=new Uint64(new Uint32Array([Number.parseInt(e.slice(T,T+d),10),0])),le=new Uint64(new Uint32Array([kPowersOfTen[d],0]));u.times(le),u.plus(A),T+=d}return u}static convertArray(e){const t=new Uint32Array(e.length*2);for(let r=-1,u=e.length;++r<u;)Uint64.from(e[r],new Uint32Array(t.buffer,t.byteOffset+2*r*4,2));return t}static multiply(e,t){return new Uint64(new Uint32Array(e.buffer)).times(t)}static add(e,t){return new Uint64(new Uint32Array(e.buffer)).plus(t)}}class Int64 extends BaseInt64{negate(){return this.buffer[0]=~this.buffer[0]+1,this.buffer[1]=~this.buffer[1],this.buffer[0]==0&&++this.buffer[1],this}times(e){return this._times(e),this}plus(e){return this._plus(e),this}lessThan(e){const t=this.buffer[1]<<0,r=e.buffer[1]<<0;return t<r||t===r&&this.buffer[0]<e.buffer[0]}static from(e,t=new Uint32Array(2)){return Int64.fromString(typeof e=="string"?e:e.toString(),t)}static fromNumber(e,t=new Uint32Array(2)){return Int64.fromString(e.toString(),t)}static fromString(e,t=new Uint32Array(2)){const r=e.startsWith("-"),u=e.length,T=new Int64(t);for(let d=r?1:0;d<u;){const A=kInt32DecimalDigits<u-d?kInt32DecimalDigits:u-d,le=new Int64(new Uint32Array([Number.parseInt(e.slice(d,d+A),10),0])),G=new Int64(new Uint32Array([kPowersOfTen[A],0]));T.times(G),T.plus(le),d+=A}return r?T.negate():T}static convertArray(e){const t=new Uint32Array(e.length*2);for(let r=-1,u=e.length;++r<u;)Int64.from(e[r],new Uint32Array(t.buffer,t.byteOffset+2*r*4,2));return t}static multiply(e,t){return new Int64(new Uint32Array(e.buffer)).times(t)}static add(e,t){return new Int64(new Uint32Array(e.buffer)).plus(t)}}class Int128{constructor(e){this.buffer=e}high(){return new Int64(new Uint32Array(this.buffer.buffer,this.buffer.byteOffset+8,2))}low(){return new Int64(new Uint32Array(this.buffer.buffer,this.buffer.byteOffset,2))}negate(){return this.buffer[0]=~this.buffer[0]+1,this.buffer[1]=~this.buffer[1],this.buffer[2]=~this.buffer[2],this.buffer[3]=~this.buffer[3],this.buffer[0]==0&&++this.buffer[1],this.buffer[1]==0&&++this.buffer[2],this.buffer[2]==0&&++this.buffer[3],this}times(e){const t=new Uint64(new Uint32Array([this.buffer[3],0])),r=new Uint64(new Uint32Array([this.buffer[2],0])),u=new Uint64(new Uint32Array([this.buffer[1],0])),T=new Uint64(new Uint32Array([this.buffer[0],0])),d=new Uint64(new Uint32Array([e.buffer[3],0])),A=new Uint64(new Uint32Array([e.buffer[2],0])),le=new Uint64(new Uint32Array([e.buffer[1],0])),G=new Uint64(new Uint32Array([e.buffer[0],0]));let B=Uint64.multiply(T,G);this.buffer[0]=B.low();const o=new Uint64(new Uint32Array([B.high(),0]));return B=Uint64.multiply(u,G),o.plus(B),B=Uint64.multiply(T,le),o.plus(B),this.buffer[1]=o.low(),this.buffer[3]=o.lessThan(B)?1:0,this.buffer[2]=o.high(),new Uint64(new Uint32Array(this.buffer.buffer,this.buffer.byteOffset+8,2)).plus(Uint64.multiply(r,G)).plus(Uint64.multiply(u,le)).plus(Uint64.multiply(T,A)),this.buffer[3]+=Uint64.multiply(t,G).plus(Uint64.multiply(r,le)).plus(Uint64.multiply(u,A)).plus(Uint64.multiply(T,d)).low(),this}plus(e){const t=new Uint32Array(4);return t[3]=this.buffer[3]+e.buffer[3]>>>0,t[2]=this.buffer[2]+e.buffer[2]>>>0,t[1]=this.buffer[1]+e.buffer[1]>>>0,t[0]=this.buffer[0]+e.buffer[0]>>>0,t[0]<this.buffer[0]>>>0&&++t[1],t[1]<this.buffer[1]>>>0&&++t[2],t[2]<this.buffer[2]>>>0&&++t[3],this.buffer[3]=t[3],this.buffer[2]=t[2],this.buffer[1]=t[1],this.buffer[0]=t[0],this}hex(){return`${intAsHex(this.buffer[3])} ${intAsHex(this.buffer[2])} ${intAsHex(this.buffer[1])} ${intAsHex(this.buffer[0])}`}static multiply(e,t){return new Int128(new Uint32Array(e.buffer)).times(t)}static add(e,t){return new Int128(new Uint32Array(e.buffer)).plus(t)}static from(e,t=new Uint32Array(4)){return Int128.fromString(typeof e=="string"?e:e.toString(),t)}static fromNumber(e,t=new Uint32Array(4)){return Int128.fromString(e.toString(),t)}static fromString(e,t=new Uint32Array(4)){const r=e.startsWith("-"),u=e.length,T=new Int128(t);for(let d=r?1:0;d<u;){const A=kInt32DecimalDigits<u-d?kInt32DecimalDigits:u-d,le=new Int128(new Uint32Array([Number.parseInt(e.slice(d,d+A),10),0,0,0])),G=new Int128(new Uint32Array([kPowersOfTen[A],0,0,0]));T.times(G),T.plus(le),d+=A}return r?T.negate():T}static convertArray(e){const t=new Uint32Array(e.length*4);for(let r=-1,u=e.length;++r<u;)Int128.from(e[r],new Uint32Array(t.buffer,t.byteOffset+16*r,4));return t}}class VectorLoader extends Visitor{constructor(e,t,r,u){super(),this.nodesIndex=-1,this.buffersIndex=-1,this.bytes=e,this.nodes=t,this.buffers=r,this.dictionaries=u}visit(e){return super.visit(e instanceof Field?e.type:e)}visitNull(e,{length:t}=this.nextFieldNode()){return makeData({type:e,length:t})}visitBool(e,{length:t,nullCount:r}=this.nextFieldNode()){return makeData({type:e,length:t,nullCount:r,nullBitmap:this.readNullBitmap(e,r),data:this.readData(e)})}visitInt(e,{length:t,nullCount:r}=this.nextFieldNode()){return makeData({type:e,length:t,nullCount:r,nullBitmap:this.readNullBitmap(e,r),data:this.readData(e)})}visitFloat(e,{length:t,nullCount:r}=this.nextFieldNode()){return makeData({type:e,length:t,nullCount:r,nullBitmap:this.readNullBitmap(e,r),data:this.readData(e)})}visitUtf8(e,{length:t,nullCount:r}=this.nextFieldNode()){return makeData({type:e,length:t,nullCount:r,nullBitmap:this.readNullBitmap(e,r),valueOffsets:this.readOffsets(e),data:this.readData(e)})}visitBinary(e,{length:t,nullCount:r}=this.nextFieldNode()){return makeData({type:e,length:t,nullCount:r,nullBitmap:this.readNullBitmap(e,r),valueOffsets:this.readOffsets(e),data:this.readData(e)})}visitFixedSizeBinary(e,{length:t,nullCount:r}=this.nextFieldNode()){return makeData({type:e,length:t,nullCount:r,nullBitmap:this.readNullBitmap(e,r),data:this.readData(e)})}visitDate(e,{length:t,nullCount:r}=this.nextFieldNode()){return makeData({type:e,length:t,nullCount:r,nullBitmap:this.readNullBitmap(e,r),data:this.readData(e)})}visitTimestamp(e,{length:t,nullCount:r}=this.nextFieldNode()){return makeData({type:e,length:t,nullCount:r,nullBitmap:this.readNullBitmap(e,r),data:this.readData(e)})}visitTime(e,{length:t,nullCount:r}=this.nextFieldNode()){return makeData({type:e,length:t,nullCount:r,nullBitmap:this.readNullBitmap(e,r),data:this.readData(e)})}visitDecimal(e,{length:t,nullCount:r}=this.nextFieldNode()){return makeData({type:e,length:t,nullCount:r,nullBitmap:this.readNullBitmap(e,r),data:this.readData(e)})}visitList(e,{length:t,nullCount:r}=this.nextFieldNode()){return makeData({type:e,length:t,nullCount:r,nullBitmap:this.readNullBitmap(e,r),valueOffsets:this.readOffsets(e),child:this.visit(e.children[0])})}visitStruct(e,{length:t,nullCount:r}=this.nextFieldNode()){return makeData({type:e,length:t,nullCount:r,nullBitmap:this.readNullBitmap(e,r),children:this.visitMany(e.children)})}visitUnion(e){return e.mode===UnionMode$1.Sparse?this.visitSparseUnion(e):this.visitDenseUnion(e)}visitDenseUnion(e,{length:t,nullCount:r}=this.nextFieldNode()){return makeData({type:e,length:t,nullCount:r,nullBitmap:this.readNullBitmap(e,r),typeIds:this.readTypeIds(e),valueOffsets:this.readOffsets(e),children:this.visitMany(e.children)})}visitSparseUnion(e,{length:t,nullCount:r}=this.nextFieldNode()){return makeData({type:e,length:t,nullCount:r,nullBitmap:this.readNullBitmap(e,r),typeIds:this.readTypeIds(e),children:this.visitMany(e.children)})}visitDictionary(e,{length:t,nullCount:r}=this.nextFieldNode()){return makeData({type:e,length:t,nullCount:r,nullBitmap:this.readNullBitmap(e,r),data:this.readData(e.indices),dictionary:this.readDictionary(e)})}visitInterval(e,{length:t,nullCount:r}=this.nextFieldNode()){return makeData({type:e,length:t,nullCount:r,nullBitmap:this.readNullBitmap(e,r),data:this.readData(e)})}visitFixedSizeList(e,{length:t,nullCount:r}=this.nextFieldNode()){return makeData({type:e,length:t,nullCount:r,nullBitmap:this.readNullBitmap(e,r),child:this.visit(e.children[0])})}visitMap(e,{length:t,nullCount:r}=this.nextFieldNode()){return makeData({type:e,length:t,nullCount:r,nullBitmap:this.readNullBitmap(e,r),valueOffsets:this.readOffsets(e),child:this.visit(e.children[0])})}nextFieldNode(){return this.nodes[++this.nodesIndex]}nextBufferRange(){return this.buffers[++this.buffersIndex]}readNullBitmap(e,t,r=this.nextBufferRange()){return t>0&&this.readData(e,r)||new Uint8Array(0)}readOffsets(e,t){return this.readData(e,t)}readTypeIds(e,t){return this.readData(e,t)}readData(e,{length:t,offset:r}=this.nextBufferRange()){return this.bytes.subarray(r,r+t)}readDictionary(e){return this.dictionaries.get(e.id)}}class JSONVectorLoader extends VectorLoader{constructor(e,t,r,u){super(new Uint8Array(0),t,r,u),this.sources=e}readNullBitmap(e,t,{offset:r}=this.nextBufferRange()){return t<=0?new Uint8Array(0):packBools(this.sources[r])}readOffsets(e,{offset:t}=this.nextBufferRange()){return toArrayBufferView(Uint8Array,toArrayBufferView(Int32Array,this.sources[t]))}readTypeIds(e,{offset:t}=this.nextBufferRange()){return toArrayBufferView(Uint8Array,toArrayBufferView(e.ArrayType,this.sources[t]))}readData(e,{offset:t}=this.nextBufferRange()){const{sources:r}=this;return DataType.isTimestamp(e)||(DataType.isInt(e)||DataType.isTime(e))&&e.bitWidth===64||DataType.isDate(e)&&e.unit===DateUnit$1.MILLISECOND?toArrayBufferView(Uint8Array,Int64.convertArray(r[t])):DataType.isDecimal(e)?toArrayBufferView(Uint8Array,Int128.convertArray(r[t])):DataType.isBinary(e)||DataType.isFixedSizeBinary(e)?binaryDataFromJSON(r[t]):DataType.isBool(e)?packBools(r[t]):DataType.isUtf8(e)?encodeUtf8(r[t].join("")):toArrayBufferView(Uint8Array,toArrayBufferView(e.ArrayType,r[t].map(u=>+u)))}}function binaryDataFromJSON(n){const e=n.join(""),t=new Uint8Array(e.length/2);for(let r=0;r<e.length;r+=2)t[r>>1]=Number.parseInt(e.slice(r,r+2),16);return t}class TypeComparator extends Visitor{compareSchemas(e,t){return e===t||t instanceof e.constructor&&this.compareManyFields(e.fields,t.fields)}compareManyFields(e,t){return e===t||Array.isArray(e)&&Array.isArray(t)&&e.length===t.length&&e.every((r,u)=>this.compareFields(r,t[u]))}compareFields(e,t){return e===t||t instanceof e.constructor&&e.name===t.name&&e.nullable===t.nullable&&this.visit(e.type,t.type)}}function compareConstructor(n,e){return e instanceof n.constructor}function compareAny(n,e){return n===e||compareConstructor(n,e)}function compareInt(n,e){return n===e||compareConstructor(n,e)&&n.bitWidth===e.bitWidth&&n.isSigned===e.isSigned}function compareFloat(n,e){return n===e||compareConstructor(n,e)&&n.precision===e.precision}function compareFixedSizeBinary(n,e){return n===e||compareConstructor(n,e)&&n.byteWidth===e.byteWidth}function compareDate(n,e){return n===e||compareConstructor(n,e)&&n.unit===e.unit}function compareTimestamp(n,e){return n===e||compareConstructor(n,e)&&n.unit===e.unit&&n.timezone===e.timezone}function compareTime(n,e){return n===e||compareConstructor(n,e)&&n.unit===e.unit&&n.bitWidth===e.bitWidth}function compareList(n,e){return n===e||compareConstructor(n,e)&&n.children.length===e.children.length&&instance$1.compareManyFields(n.children,e.children)}function compareStruct(n,e){return n===e||compareConstructor(n,e)&&n.children.length===e.children.length&&instance$1.compareManyFields(n.children,e.children)}function compareUnion(n,e){return n===e||compareConstructor(n,e)&&n.mode===e.mode&&n.typeIds.every((t,r)=>t===e.typeIds[r])&&instance$1.compareManyFields(n.children,e.children)}function compareDictionary(n,e){return n===e||compareConstructor(n,e)&&n.id===e.id&&n.isOrdered===e.isOrdered&&instance$1.visit(n.indices,e.indices)&&instance$1.visit(n.dictionary,e.dictionary)}function compareInterval(n,e){return n===e||compareConstructor(n,e)&&n.unit===e.unit}function compareFixedSizeList(n,e){return n===e||compareConstructor(n,e)&&n.listSize===e.listSize&&n.children.length===e.children.length&&instance$1.compareManyFields(n.children,e.children)}function compareMap(n,e){return n===e||compareConstructor(n,e)&&n.keysSorted===e.keysSorted&&n.children.length===e.children.length&&instance$1.compareManyFields(n.children,e.children)}TypeComparator.prototype.visitNull=compareAny;TypeComparator.prototype.visitBool=compareAny;TypeComparator.prototype.visitInt=compareInt;TypeComparator.prototype.visitInt8=compareInt;TypeComparator.prototype.visitInt16=compareInt;TypeComparator.prototype.visitInt32=compareInt;TypeComparator.prototype.visitInt64=compareInt;TypeComparator.prototype.visitUint8=compareInt;TypeComparator.prototype.visitUint16=compareInt;TypeComparator.prototype.visitUint32=compareInt;TypeComparator.prototype.visitUint64=compareInt;TypeComparator.prototype.visitFloat=compareFloat;TypeComparator.prototype.visitFloat16=compareFloat;TypeComparator.prototype.visitFloat32=compareFloat;TypeComparator.prototype.visitFloat64=compareFloat;TypeComparator.prototype.visitUtf8=compareAny;TypeComparator.prototype.visitBinary=compareAny;TypeComparator.prototype.visitFixedSizeBinary=compareFixedSizeBinary;TypeComparator.prototype.visitDate=compareDate;TypeComparator.prototype.visitDateDay=compareDate;TypeComparator.prototype.visitDateMillisecond=compareDate;TypeComparator.prototype.visitTimestamp=compareTimestamp;TypeComparator.prototype.visitTimestampSecond=compareTimestamp;TypeComparator.prototype.visitTimestampMillisecond=compareTimestamp;TypeComparator.prototype.visitTimestampMicrosecond=compareTimestamp;TypeComparator.prototype.visitTimestampNanosecond=compareTimestamp;TypeComparator.prototype.visitTime=compareTime;TypeComparator.prototype.visitTimeSecond=compareTime;TypeComparator.prototype.visitTimeMillisecond=compareTime;TypeComparator.prototype.visitTimeMicrosecond=compareTime;TypeComparator.prototype.visitTimeNanosecond=compareTime;TypeComparator.prototype.visitDecimal=compareAny;TypeComparator.prototype.visitList=compareList;TypeComparator.prototype.visitStruct=compareStruct;TypeComparator.prototype.visitUnion=compareUnion;TypeComparator.prototype.visitDenseUnion=compareUnion;TypeComparator.prototype.visitSparseUnion=compareUnion;TypeComparator.prototype.visitDictionary=compareDictionary;TypeComparator.prototype.visitInterval=compareInterval;TypeComparator.prototype.visitIntervalDayTime=compareInterval;TypeComparator.prototype.visitIntervalYearMonth=compareInterval;TypeComparator.prototype.visitFixedSizeList=compareFixedSizeList;TypeComparator.prototype.visitMap=compareMap;const instance$1=new TypeComparator;function compareSchemas(n,e){return instance$1.compareSchemas(n,e)}function distributeVectorsIntoRecordBatches(n,e){return uniformlyDistributeChunksAcrossRecordBatches(n,e.map(t=>t.data.concat()))}function uniformlyDistributeChunksAcrossRecordBatches(n,e){const t=[...n.fields],r=[],u={numBatches:e.reduce((o,i)=>Math.max(o,i.length),0)};let T=0,d=0,A=-1;const le=e.length;let G,B=[];for(;u.numBatches-- >0;){for(d=Number.POSITIVE_INFINITY,A=-1;++A<le;)B[A]=G=e[A].shift(),d=Math.min(d,G?G.length:d);Number.isFinite(d)&&(B=distributeChildren(t,d,B,e,u),d>0&&(r[T++]=makeData({type:new Struct(t),length:d,nullCount:0,children:B.slice()})))}return[n=n.assign(t),r.map(o=>new RecordBatch$2(n,o))]}function distributeChildren(n,e,t,r,u){var T;const d=(e+63&-64)>>3;for(let A=-1,le=r.length;++A<le;){const G=t[A],B=G==null?void 0:G.length;if(B>=e)B===e?t[A]=G:(t[A]=G.slice(0,e),u.numBatches=Math.max(u.numBatches,r[A].unshift(G.slice(e,B-e))));else{const o=n[A];n[A]=o.clone({nullable:!0}),t[A]=(T=G==null?void 0:G._changeLengthAndBackfillNullBitmap(e))!==null&&T!==void 0?T:makeData({type:o.type,length:e,nullCount:e,nullBitmap:new Uint8Array(d)})}}return t}var _a$1;class Table{constructor(...e){var t,r;if(e.length===0)return this.batches=[],this.schema=new Schema([]),this._offsets=[0],this;let u,T;e[0]instanceof Schema&&(u=e.shift()),e.at(-1)instanceof Uint32Array&&(T=e.pop());const d=le=>{if(le){if(le instanceof RecordBatch$2)return[le];if(le instanceof Table)return le.batches;if(le instanceof Data){if(le.type instanceof Struct)return[new RecordBatch$2(new Schema(le.type.children),le)]}else{if(Array.isArray(le))return le.flatMap(G=>d(G));if(typeof le[Symbol.iterator]=="function")return[...le].flatMap(G=>d(G));if(typeof le=="object"){const G=Object.keys(le),B=G.map(w=>new Vector([le[w]])),o=new Schema(G.map((w,ae)=>new Field(String(w),B[ae].type))),[,i]=distributeVectorsIntoRecordBatches(o,B);return i.length===0?[new RecordBatch$2(le)]:i}}}return[]},A=e.flatMap(le=>d(le));if(u=(r=u??((t=A[0])===null||t===void 0?void 0:t.schema))!==null&&r!==void 0?r:new Schema([]),!(u instanceof Schema))throw new TypeError("Table constructor expects a [Schema, RecordBatch[]] pair.");for(const le of A){if(!(le instanceof RecordBatch$2))throw new TypeError("Table constructor expects a [Schema, RecordBatch[]] pair.");if(!compareSchemas(u,le.schema))throw new TypeError("Table and inner RecordBatch schemas must be equivalent.")}this.schema=u,this.batches=A,this._offsets=T??computeChunkOffsets(this.data)}get data(){return this.batches.map(({data:e})=>e)}get numCols(){return this.schema.fields.length}get numRows(){return this.data.reduce((e,t)=>e+t.length,0)}get nullCount(){return this._nullCount===-1&&(this._nullCount=computeChunkNullCounts(this.data)),this._nullCount}isValid(e){return!1}get(e){return null}set(e,t){}indexOf(e,t){return-1}getByteLength(e){return 0}[Symbol.iterator](){return this.batches.length>0?instance$3.visit(new Vector(this.data)):new Array(0)[Symbol.iterator]()}toArray(){return[...this]}toString(){return`[
  ${this.toArray().join(`,
  `)}
]`}concat(...e){const t=this.schema,r=this.data.concat(e.flatMap(({data:u})=>u));return new Table(t,r.map(u=>new RecordBatch$2(t,u)))}slice(e,t){const r=this.schema;[e,t]=clampRange({length:this.numRows},e,t);const u=sliceChunks(this.data,this._offsets,e,t);return new Table(r,u.map(T=>new RecordBatch$2(r,T)))}getChild(e){return this.getChildAt(this.schema.fields.findIndex(t=>t.name===e))}getChildAt(e){if(e>-1&&e<this.schema.fields.length){const t=this.data.map(r=>r.children[e]);if(t.length===0){const{type:r}=this.schema.fields[e],u=makeData({type:r,length:0,nullCount:0});t.push(u._changeLengthAndBackfillNullBitmap(this.numRows))}return new Vector(t)}return null}setChild(e,t){var r;return this.setChildAt((r=this.schema.fields)===null||r===void 0?void 0:r.findIndex(u=>u.name===e),t)}setChildAt(e,t){let r=this.schema,u=[...this.batches];if(e>-1&&e<this.numCols){t||(t=new Vector([makeData({type:new Null$1,length:this.numRows})]));const T=r.fields.slice(),d=T[e].clone({type:t.type}),A=this.schema.fields.map((le,G)=>this.getChildAt(G));[T[e],A[e]]=[d,t],[r,u]=distributeVectorsIntoRecordBatches(r,A)}return new Table(r,u)}select(e){const t=this.schema.fields.reduce((r,u,T)=>r.set(u.name,T),new Map);return this.selectAt(e.map(r=>t.get(r)).filter(r=>r>-1))}selectAt(e){const t=this.schema.selectAt(e),r=this.batches.map(u=>u.selectAt(e));return new Table(t,r)}assign(e){const t=this.schema.fields,[r,u]=e.schema.fields.reduce((A,le,G)=>{const[B,o]=A,i=t.findIndex(w=>w.name===le.name);return~i?o[i]=G:B.push(G),A},[[],[]]),T=this.schema.assign(e.schema),d=[...t.map((A,le)=>[le,u[le]]).map(([A,le])=>le===void 0?this.getChildAt(A):e.getChildAt(le)),...r.map(A=>e.getChildAt(A))].filter(Boolean);return new Table(...distributeVectorsIntoRecordBatches(T,d))}}_a$1=Symbol.toStringTag;Table[_a$1]=(n=>(n.schema=null,n.batches=[],n._offsets=new Uint32Array([0]),n._nullCount=-1,n[Symbol.isConcatSpreadable]=!0,n.isValid=wrapChunkedCall1(isChunkedValid),n.get=wrapChunkedCall1(instance$5.getVisitFn(Type$1.Struct)),n.set=wrapChunkedCall2(instance$6.getVisitFn(Type$1.Struct)),n.indexOf=wrapChunkedIndexOf(instance$4.getVisitFn(Type$1.Struct)),n.getByteLength=wrapChunkedCall1(instance$2.getVisitFn(Type$1.Struct)),"Table"))(Table.prototype);var _a;let RecordBatch$2=class ta{constructor(...e){switch(e.length){case 2:{if([this.schema]=e,!(this.schema instanceof Schema))throw new TypeError("RecordBatch constructor expects a [Schema, Data] pair.");if([,this.data=makeData({nullCount:0,type:new Struct(this.schema.fields),children:this.schema.fields.map(t=>makeData({type:t.type,nullCount:0}))})]=e,!(this.data instanceof Data))throw new TypeError("RecordBatch constructor expects a [Schema, Data] pair.");[this.schema,this.data]=ensureSameLengthData(this.schema,this.data.children);break}case 1:{const[t]=e,{fields:r,children:u,length:T}=Object.keys(t).reduce((le,G,B)=>(le.children[B]=t[G],le.length=Math.max(le.length,t[G].length),le.fields[B]=Field.new({name:G,type:t[G].type,nullable:!0}),le),{length:0,fields:new Array,children:new Array}),d=new Schema(r),A=makeData({type:new Struct(r),length:T,children:u,nullCount:0});[this.schema,this.data]=ensureSameLengthData(d,A.children,T);break}default:throw new TypeError("RecordBatch constructor expects an Object mapping names to child Data, or a [Schema, Data] pair.")}}get dictionaries(){return this._dictionaries||(this._dictionaries=collectDictionaries(this.schema.fields,this.data.children))}get numCols(){return this.schema.fields.length}get numRows(){return this.data.length}get nullCount(){return this.data.nullCount}isValid(e){return this.data.getValid(e)}get(e){return instance$5.visit(this.data,e)}set(e,t){return instance$6.visit(this.data,e,t)}indexOf(e,t){return instance$4.visit(this.data,e,t)}getByteLength(e){return instance$2.visit(this.data,e)}[Symbol.iterator](){return instance$3.visit(new Vector([this.data]))}toArray(){return[...this]}concat(...e){return new Table(this.schema,[this,...e])}slice(e,t){const[r]=new Vector([this.data]).slice(e,t).data;return new ta(this.schema,r)}getChild(e){var t;return this.getChildAt((t=this.schema.fields)===null||t===void 0?void 0:t.findIndex(r=>r.name===e))}getChildAt(e){return e>-1&&e<this.schema.fields.length?new Vector([this.data.children[e]]):null}setChild(e,t){var r;return this.setChildAt((r=this.schema.fields)===null||r===void 0?void 0:r.findIndex(u=>u.name===e),t)}setChildAt(e,t){let r=this.schema,u=this.data;if(e>-1&&e<this.numCols){t||(t=new Vector([makeData({type:new Null$1,length:this.numRows})]));const T=r.fields.slice(),d=u.children.slice(),A=T[e].clone({type:t.type});[T[e],d[e]]=[A,t.data[0]],r=new Schema(T,new Map(this.schema.metadata)),u=makeData({type:new Struct(T),children:d})}return new ta(r,u)}select(e){const t=this.schema.select(e),r=new Struct(t.fields),u=[];for(const T of e){const d=this.schema.fields.findIndex(A=>A.name===T);~d&&(u[d]=this.data.children[d])}return new ta(t,makeData({type:r,length:this.numRows,children:u}))}selectAt(e){const t=this.schema.selectAt(e),r=e.map(T=>this.data.children[T]).filter(Boolean),u=makeData({type:new Struct(t.fields),length:this.numRows,children:r});return new ta(t,u)}};_a=Symbol.toStringTag;RecordBatch$2[_a]=(n=>(n._nullCount=-1,n[Symbol.isConcatSpreadable]=!0,"RecordBatch"))(RecordBatch$2.prototype);function ensureSameLengthData(n,e,t=e.reduce((r,u)=>Math.max(r,u.length),0)){var r;const u=[...n.fields],T=[...e],d=(t+63&-64)>>3;for(const[A,le]of n.fields.entries()){const G=e[A];(!G||G.length!==t)&&(u[A]=le.clone({nullable:!0}),T[A]=(r=G==null?void 0:G._changeLengthAndBackfillNullBitmap(t))!==null&&r!==void 0?r:makeData({type:le.type,length:t,nullCount:t,nullBitmap:new Uint8Array(d)}))}return[n.assign(u),makeData({type:new Struct(u),length:t,children:T})]}function collectDictionaries(n,e,t=new Map){for(let r=-1,u=n.length;++r<u;){const d=n[r].type,A=e[r];if(DataType.isDictionary(d)){if(!t.has(d.id))A.dictionary&&t.set(d.id,A.dictionary);else if(t.get(d.id)!==A.dictionary)throw new Error("Cannot create Schema containing two different dictionaries with the same Id")}d.children&&d.children.length>0&&collectDictionaries(d.children,A.children,t)}return t}class _InternalEmptyPlaceholderRecordBatch extends RecordBatch$2{constructor(e){const t=e.fields.map(u=>makeData({type:u.type})),r=makeData({type:new Struct(e.fields),nullCount:0,children:t});super(e,r)}}var BodyCompressionMethod;(function(n){n[n.BUFFER=0]="BUFFER"})(BodyCompressionMethod||(BodyCompressionMethod={}));var CompressionType;(function(n){n[n.LZ4_FRAME=0]="LZ4_FRAME",n[n.ZSTD=1]="ZSTD"})(CompressionType||(CompressionType={}));class BodyCompression{constructor(){this.bb=null,this.bb_pos=0}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsBodyCompression(e,t){return(t||new BodyCompression).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsBodyCompression(e,t){return e.setPosition(e.position()+SIZE_PREFIX_LENGTH),(t||new BodyCompression).__init(e.readInt32(e.position())+e.position(),e)}codec(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt8(this.bb_pos+e):CompressionType.LZ4_FRAME}method(){const e=this.bb.__offset(this.bb_pos,6);return e?this.bb.readInt8(this.bb_pos+e):BodyCompressionMethod.BUFFER}static startBodyCompression(e){e.startObject(2)}static addCodec(e,t){e.addFieldInt8(0,t,CompressionType.LZ4_FRAME)}static addMethod(e,t){e.addFieldInt8(1,t,BodyCompressionMethod.BUFFER)}static endBodyCompression(e){return e.endObject()}static createBodyCompression(e,t,r){return BodyCompression.startBodyCompression(e),BodyCompression.addCodec(e,t),BodyCompression.addMethod(e,r),BodyCompression.endBodyCompression(e)}}let Buffer$1=class{constructor(){this.bb=null,this.bb_pos=0}__init(e,t){return this.bb_pos=e,this.bb=t,this}offset(){return this.bb.readInt64(this.bb_pos)}length(){return this.bb.readInt64(this.bb_pos+8)}static sizeOf(){return 16}static createBuffer(e,t,r){return e.prep(8,16),e.writeInt64(BigInt(r??0)),e.writeInt64(BigInt(t??0)),e.offset()}},FieldNode$1=class{constructor(){this.bb=null,this.bb_pos=0}__init(e,t){return this.bb_pos=e,this.bb=t,this}length(){return this.bb.readInt64(this.bb_pos)}nullCount(){return this.bb.readInt64(this.bb_pos+8)}static sizeOf(){return 16}static createFieldNode(e,t,r){return e.prep(8,16),e.writeInt64(BigInt(r??0)),e.writeInt64(BigInt(t??0)),e.offset()}},RecordBatch$1=class lc{constructor(){this.bb=null,this.bb_pos=0}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsRecordBatch(e,t){return(t||new lc).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsRecordBatch(e,t){return e.setPosition(e.position()+SIZE_PREFIX_LENGTH),(t||new lc).__init(e.readInt32(e.position())+e.position(),e)}length(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt64(this.bb_pos+e):BigInt("0")}nodes(e,t){const r=this.bb.__offset(this.bb_pos,6);return r?(t||new FieldNode$1).__init(this.bb.__vector(this.bb_pos+r)+e*16,this.bb):null}nodesLength(){const e=this.bb.__offset(this.bb_pos,6);return e?this.bb.__vector_len(this.bb_pos+e):0}buffers(e,t){const r=this.bb.__offset(this.bb_pos,8);return r?(t||new Buffer$1).__init(this.bb.__vector(this.bb_pos+r)+e*16,this.bb):null}buffersLength(){const e=this.bb.__offset(this.bb_pos,8);return e?this.bb.__vector_len(this.bb_pos+e):0}compression(e){const t=this.bb.__offset(this.bb_pos,10);return t?(e||new BodyCompression).__init(this.bb.__indirect(this.bb_pos+t),this.bb):null}static startRecordBatch(e){e.startObject(4)}static addLength(e,t){e.addFieldInt64(0,t,BigInt("0"))}static addNodes(e,t){e.addFieldOffset(1,t,0)}static startNodesVector(e,t){e.startVector(16,t,8)}static addBuffers(e,t){e.addFieldOffset(2,t,0)}static startBuffersVector(e,t){e.startVector(16,t,8)}static addCompression(e,t){e.addFieldOffset(3,t,0)}static endRecordBatch(e){return e.endObject()}},DictionaryBatch$1=class uc{constructor(){this.bb=null,this.bb_pos=0}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsDictionaryBatch(e,t){return(t||new uc).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsDictionaryBatch(e,t){return e.setPosition(e.position()+SIZE_PREFIX_LENGTH),(t||new uc).__init(e.readInt32(e.position())+e.position(),e)}id(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt64(this.bb_pos+e):BigInt("0")}data(e){const t=this.bb.__offset(this.bb_pos,6);return t?(e||new RecordBatch$1).__init(this.bb.__indirect(this.bb_pos+t),this.bb):null}isDelta(){const e=this.bb.__offset(this.bb_pos,8);return e?!!this.bb.readInt8(this.bb_pos+e):!1}static startDictionaryBatch(e){e.startObject(3)}static addId(e,t){e.addFieldInt64(0,t,BigInt("0"))}static addData(e,t){e.addFieldOffset(1,t,0)}static addIsDelta(e,t){e.addFieldInt8(2,+t,0)}static endDictionaryBatch(e){return e.endObject()}};var MessageHeader;(function(n){n[n.NONE=0]="NONE",n[n.Schema=1]="Schema",n[n.DictionaryBatch=2]="DictionaryBatch",n[n.RecordBatch=3]="RecordBatch",n[n.Tensor=4]="Tensor",n[n.SparseTensor=5]="SparseTensor"})(MessageHeader||(MessageHeader={}));let Message$1=class Zr{constructor(){this.bb=null,this.bb_pos=0}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsMessage(e,t){return(t||new Zr).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsMessage(e,t){return e.setPosition(e.position()+SIZE_PREFIX_LENGTH),(t||new Zr).__init(e.readInt32(e.position())+e.position(),e)}version(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt16(this.bb_pos+e):MetadataVersion.V1}headerType(){const e=this.bb.__offset(this.bb_pos,6);return e?this.bb.readUint8(this.bb_pos+e):MessageHeader.NONE}header(e){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__union(e,this.bb_pos+t):null}bodyLength(){const e=this.bb.__offset(this.bb_pos,10);return e?this.bb.readInt64(this.bb_pos+e):BigInt("0")}customMetadata(e,t){const r=this.bb.__offset(this.bb_pos,12);return r?(t||new KeyValue).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+e*4),this.bb):null}customMetadataLength(){const e=this.bb.__offset(this.bb_pos,12);return e?this.bb.__vector_len(this.bb_pos+e):0}static startMessage(e){e.startObject(5)}static addVersion(e,t){e.addFieldInt16(0,t,MetadataVersion.V1)}static addHeaderType(e,t){e.addFieldInt8(1,t,MessageHeader.NONE)}static addHeader(e,t){e.addFieldOffset(2,t,0)}static addBodyLength(e,t){e.addFieldInt64(3,t,BigInt("0"))}static addCustomMetadata(e,t){e.addFieldOffset(4,t,0)}static createCustomMetadataVector(e,t){e.startVector(4,t.length,4);for(let r=t.length-1;r>=0;r--)e.addOffset(t[r]);return e.endVector()}static startCustomMetadataVector(e,t){e.startVector(4,t,4)}static endMessage(e){return e.endObject()}static finishMessageBuffer(e,t){e.finish(t)}static finishSizePrefixedMessageBuffer(e,t){e.finish(t,void 0,!0)}static createMessage(e,t,r,u,T,d){return Zr.startMessage(e),Zr.addVersion(e,t),Zr.addHeaderType(e,r),Zr.addHeader(e,u),Zr.addBodyLength(e,T),Zr.addCustomMetadata(e,d),Zr.endMessage(e)}};class TypeAssembler extends Visitor{visit(e,t){return e==null||t==null?void 0:super.visit(e,t)}visitNull(e,t){return Null.startNull(t),Null.endNull(t)}visitInt(e,t){return Int.startInt(t),Int.addBitWidth(t,e.bitWidth),Int.addIsSigned(t,e.isSigned),Int.endInt(t)}visitFloat(e,t){return FloatingPoint.startFloatingPoint(t),FloatingPoint.addPrecision(t,e.precision),FloatingPoint.endFloatingPoint(t)}visitBinary(e,t){return Binary.startBinary(t),Binary.endBinary(t)}visitBool(e,t){return Bool.startBool(t),Bool.endBool(t)}visitUtf8(e,t){return Utf8.startUtf8(t),Utf8.endUtf8(t)}visitDecimal(e,t){return Decimal.startDecimal(t),Decimal.addScale(t,e.scale),Decimal.addPrecision(t,e.precision),Decimal.addBitWidth(t,e.bitWidth),Decimal.endDecimal(t)}visitDate(e,t){return Date$1.startDate(t),Date$1.addUnit(t,e.unit),Date$1.endDate(t)}visitTime(e,t){return Time.startTime(t),Time.addUnit(t,e.unit),Time.addBitWidth(t,e.bitWidth),Time.endTime(t)}visitTimestamp(e,t){const r=e.timezone&&t.createString(e.timezone)||void 0;return Timestamp.startTimestamp(t),Timestamp.addUnit(t,e.unit),r!==void 0&&Timestamp.addTimezone(t,r),Timestamp.endTimestamp(t)}visitInterval(e,t){return Interval.startInterval(t),Interval.addUnit(t,e.unit),Interval.endInterval(t)}visitList(e,t){return List.startList(t),List.endList(t)}visitStruct(e,t){return Struct_.startStruct_(t),Struct_.endStruct_(t)}visitUnion(e,t){Union.startTypeIdsVector(t,e.typeIds.length);const r=Union.createTypeIdsVector(t,e.typeIds);return Union.startUnion(t),Union.addMode(t,e.mode),Union.addTypeIds(t,r),Union.endUnion(t)}visitDictionary(e,t){const r=this.visit(e.indices,t);return DictionaryEncoding.startDictionaryEncoding(t),DictionaryEncoding.addId(t,BigInt(e.id)),DictionaryEncoding.addIsOrdered(t,e.isOrdered),r!==void 0&&DictionaryEncoding.addIndexType(t,r),DictionaryEncoding.endDictionaryEncoding(t)}visitFixedSizeBinary(e,t){return FixedSizeBinary.startFixedSizeBinary(t),FixedSizeBinary.addByteWidth(t,e.byteWidth),FixedSizeBinary.endFixedSizeBinary(t)}visitFixedSizeList(e,t){return FixedSizeList.startFixedSizeList(t),FixedSizeList.addListSize(t,e.listSize),FixedSizeList.endFixedSizeList(t)}visitMap(e,t){return Map$1.startMap(t),Map$1.addKeysSorted(t,e.keysSorted),Map$1.endMap(t)}}const instance=new TypeAssembler;function schemaFromJSON(n,e=new Map){return new Schema(schemaFieldsFromJSON(n,e),customMetadataFromJSON(n.customMetadata),e)}function recordBatchFromJSON(n){return new RecordBatch(n.count,fieldNodesFromJSON(n.columns),buffersFromJSON(n.columns))}function dictionaryBatchFromJSON(n){return new DictionaryBatch(recordBatchFromJSON(n.data),n.id,n.isDelta)}function schemaFieldsFromJSON(n,e){return(n.fields||[]).filter(Boolean).map(t=>Field.fromJSON(t,e))}function fieldChildrenFromJSON(n,e){return(n.children||[]).filter(Boolean).map(t=>Field.fromJSON(t,e))}function fieldNodesFromJSON(n){return(n||[]).reduce((e,t)=>[...e,new FieldNode(t.count,nullCountFromJSON(t.VALIDITY)),...fieldNodesFromJSON(t.children)],[])}function buffersFromJSON(n,e=[]){for(let t=-1,r=(n||[]).length;++t<r;){const u=n[t];u.VALIDITY&&e.push(new BufferRegion(e.length,u.VALIDITY.length)),u.TYPE&&e.push(new BufferRegion(e.length,u.TYPE.length)),u.OFFSET&&e.push(new BufferRegion(e.length,u.OFFSET.length)),u.DATA&&e.push(new BufferRegion(e.length,u.DATA.length)),e=buffersFromJSON(u.children,e)}return e}function nullCountFromJSON(n){return(n||[]).reduce((e,t)=>e+ +(t===0),0)}function fieldFromJSON(n,e){let t,r,u,T,d,A;return!e||!(T=n.dictionary)?(d=typeFromJSON(n,fieldChildrenFromJSON(n,e)),u=new Field(n.name,d,n.nullable,customMetadataFromJSON(n.customMetadata))):e.has(t=T.id)?(r=(r=T.indexType)?indexTypeFromJSON(r):new Int32,A=new Dictionary(e.get(t),r,t,T.isOrdered),u=new Field(n.name,A,n.nullable,customMetadataFromJSON(n.customMetadata))):(r=(r=T.indexType)?indexTypeFromJSON(r):new Int32,e.set(t,d=typeFromJSON(n,fieldChildrenFromJSON(n,e))),A=new Dictionary(d,r,t,T.isOrdered),u=new Field(n.name,A,n.nullable,customMetadataFromJSON(n.customMetadata))),u||null}function customMetadataFromJSON(n){return new Map(Object.entries(n||{}))}function indexTypeFromJSON(n){return new Int_(n.isSigned,n.bitWidth)}function typeFromJSON(n,e){const t=n.type.name;switch(t){case"NONE":return new Null$1;case"null":return new Null$1;case"binary":return new Binary$1;case"utf8":return new Utf8$1;case"bool":return new Bool$1;case"list":return new List$1((e||[])[0]);case"struct":return new Struct(e||[]);case"struct_":return new Struct(e||[])}switch(t){case"int":{const r=n.type;return new Int_(r.isSigned,r.bitWidth)}case"floatingpoint":{const r=n.type;return new Float(Precision$1[r.precision])}case"decimal":{const r=n.type;return new Decimal$1(r.scale,r.precision,r.bitWidth)}case"date":{const r=n.type;return new Date_(DateUnit$1[r.unit])}case"time":{const r=n.type;return new Time_(TimeUnit$1[r.unit],r.bitWidth)}case"timestamp":{const r=n.type;return new Timestamp_(TimeUnit$1[r.unit],r.timezone)}case"interval":{const r=n.type;return new Interval_(IntervalUnit$1[r.unit])}case"union":{const r=n.type;return new Union_(UnionMode$1[r.mode],r.typeIds||[],e||[])}case"fixedsizebinary":{const r=n.type;return new FixedSizeBinary$1(r.byteWidth)}case"fixedsizelist":{const r=n.type;return new FixedSizeList$1(r.listSize,(e||[])[0])}case"map":{const r=n.type;return new Map_((e||[])[0],r.keysSorted)}}throw new Error(`Unrecognized type: "${t}"`)}var Builder=Builder$2,ByteBuffer=ByteBuffer$2;class Message{static fromJSON(e,t){const r=new Message(0,MetadataVersion$1.V4,t);return r._createHeader=messageHeaderFromJSON(e,t),r}static decode(e){e=new ByteBuffer(toUint8Array(e));const t=Message$1.getRootAsMessage(e),r=t.bodyLength(),u=t.version(),T=t.headerType(),d=new Message(r,u,T);return d._createHeader=decodeMessageHeader(t,T),d}static encode(e){const t=new Builder;let r=-1;return e.isSchema()?r=Schema.encode(t,e.header()):e.isRecordBatch()?r=RecordBatch.encode(t,e.header()):e.isDictionaryBatch()&&(r=DictionaryBatch.encode(t,e.header())),Message$1.startMessage(t),Message$1.addVersion(t,MetadataVersion$1.V4),Message$1.addHeader(t,r),Message$1.addHeaderType(t,e.headerType),Message$1.addBodyLength(t,BigInt(e.bodyLength)),Message$1.finishMessageBuffer(t,Message$1.endMessage(t)),t.asUint8Array()}static from(e,t=0){if(e instanceof Schema)return new Message(0,MetadataVersion$1.V4,MessageHeader$1.Schema,e);if(e instanceof RecordBatch)return new Message(t,MetadataVersion$1.V4,MessageHeader$1.RecordBatch,e);if(e instanceof DictionaryBatch)return new Message(t,MetadataVersion$1.V4,MessageHeader$1.DictionaryBatch,e);throw new Error(`Unrecognized Message header: ${e}`)}get type(){return this.headerType}get version(){return this._version}get headerType(){return this._headerType}get bodyLength(){return this._bodyLength}header(){return this._createHeader()}isSchema(){return this.headerType===MessageHeader$1.Schema}isRecordBatch(){return this.headerType===MessageHeader$1.RecordBatch}isDictionaryBatch(){return this.headerType===MessageHeader$1.DictionaryBatch}constructor(e,t,r,u){this._version=t,this._headerType=r,this.body=new Uint8Array(0),u&&(this._createHeader=()=>u),this._bodyLength=bigIntToNumber(e)}}class RecordBatch{get nodes(){return this._nodes}get length(){return this._length}get buffers(){return this._buffers}constructor(e,t,r){this._nodes=t,this._buffers=r,this._length=bigIntToNumber(e)}}class DictionaryBatch{get id(){return this._id}get data(){return this._data}get isDelta(){return this._isDelta}get length(){return this.data.length}get nodes(){return this.data.nodes}get buffers(){return this.data.buffers}constructor(e,t,r=!1){this._data=e,this._isDelta=r,this._id=bigIntToNumber(t)}}class BufferRegion{constructor(e,t){this.offset=bigIntToNumber(e),this.length=bigIntToNumber(t)}}class FieldNode{constructor(e,t){this.length=bigIntToNumber(e),this.nullCount=bigIntToNumber(t)}}function messageHeaderFromJSON(n,e){return(()=>{switch(e){case MessageHeader$1.Schema:return Schema.fromJSON(n);case MessageHeader$1.RecordBatch:return RecordBatch.fromJSON(n);case MessageHeader$1.DictionaryBatch:return DictionaryBatch.fromJSON(n)}throw new Error(`Unrecognized Message type: { name: ${MessageHeader$1[e]}, type: ${e} }`)})}function decodeMessageHeader(n,e){return(()=>{switch(e){case MessageHeader$1.Schema:return Schema.decode(n.header(new Schema$1));case MessageHeader$1.RecordBatch:return RecordBatch.decode(n.header(new RecordBatch$1),n.version());case MessageHeader$1.DictionaryBatch:return DictionaryBatch.decode(n.header(new DictionaryBatch$1),n.version())}throw new Error(`Unrecognized Message type: { name: ${MessageHeader$1[e]}, type: ${e} }`)})}Field.encode=encodeField;Field.decode=decodeField;Field.fromJSON=fieldFromJSON;Schema.encode=encodeSchema;Schema.decode=decodeSchema;Schema.fromJSON=schemaFromJSON;RecordBatch.encode=encodeRecordBatch;RecordBatch.decode=decodeRecordBatch;RecordBatch.fromJSON=recordBatchFromJSON;DictionaryBatch.encode=encodeDictionaryBatch;DictionaryBatch.decode=decodeDictionaryBatch;DictionaryBatch.fromJSON=dictionaryBatchFromJSON;FieldNode.encode=encodeFieldNode;FieldNode.decode=decodeFieldNode;BufferRegion.encode=encodeBufferRegion;BufferRegion.decode=decodeBufferRegion;function decodeSchema(n,e=new Map){const t=decodeSchemaFields(n,e);return new Schema(t,decodeCustomMetadata(n),e)}function decodeRecordBatch(n,e=MetadataVersion$1.V4){if(n.compression()!==null)throw new Error("Record batch compression not implemented");return new RecordBatch(n.length(),decodeFieldNodes(n),decodeBuffers(n,e))}function decodeDictionaryBatch(n,e=MetadataVersion$1.V4){return new DictionaryBatch(RecordBatch.decode(n.data(),e),n.id(),n.isDelta())}function decodeBufferRegion(n){return new BufferRegion(n.offset(),n.length())}function decodeFieldNode(n){return new FieldNode(n.length(),n.nullCount())}function decodeFieldNodes(n){const e=[];for(let t,r=-1,u=-1,T=n.nodesLength();++r<T;)(t=n.nodes(r))&&(e[++u]=FieldNode.decode(t));return e}function decodeBuffers(n,e){const t=[];for(let r,u=-1,T=-1,d=n.buffersLength();++u<d;)(r=n.buffers(u))&&(e<MetadataVersion$1.V4&&(r.bb_pos+=8*(u+1)),t[++T]=BufferRegion.decode(r));return t}function decodeSchemaFields(n,e){const t=[];for(let r,u=-1,T=-1,d=n.fieldsLength();++u<d;)(r=n.fields(u))&&(t[++T]=Field.decode(r,e));return t}function decodeFieldChildren(n,e){const t=[];for(let r,u=-1,T=-1,d=n.childrenLength();++u<d;)(r=n.children(u))&&(t[++T]=Field.decode(r,e));return t}function decodeField(n,e){let t,r,u,T,d,A;return!e||!(A=n.dictionary())?(u=decodeFieldType(n,decodeFieldChildren(n,e)),r=new Field(n.name(),u,n.nullable(),decodeCustomMetadata(n))):e.has(t=bigIntToNumber(A.id()))?(T=(T=A.indexType())?decodeIndexType(T):new Int32,d=new Dictionary(e.get(t),T,t,A.isOrdered()),r=new Field(n.name(),d,n.nullable(),decodeCustomMetadata(n))):(T=(T=A.indexType())?decodeIndexType(T):new Int32,e.set(t,u=decodeFieldType(n,decodeFieldChildren(n,e))),d=new Dictionary(u,T,t,A.isOrdered()),r=new Field(n.name(),d,n.nullable(),decodeCustomMetadata(n))),r||null}function decodeCustomMetadata(n){const e=new Map;if(n)for(let t,r,u=-1,T=Math.trunc(n.customMetadataLength());++u<T;)(t=n.customMetadata(u))&&(r=t.key())!=null&&e.set(r,t.value());return e}function decodeIndexType(n){return new Int_(n.isSigned(),n.bitWidth())}function decodeFieldType(n,e){const t=n.typeType();switch(t){case Type.NONE:return new Null$1;case Type.Null:return new Null$1;case Type.Binary:return new Binary$1;case Type.Utf8:return new Utf8$1;case Type.Bool:return new Bool$1;case Type.List:return new List$1((e||[])[0]);case Type.Struct_:return new Struct(e||[])}switch(t){case Type.Int:{const r=n.type(new Int);return new Int_(r.isSigned(),r.bitWidth())}case Type.FloatingPoint:{const r=n.type(new FloatingPoint);return new Float(r.precision())}case Type.Decimal:{const r=n.type(new Decimal);return new Decimal$1(r.scale(),r.precision(),r.bitWidth())}case Type.Date:{const r=n.type(new Date$1);return new Date_(r.unit())}case Type.Time:{const r=n.type(new Time);return new Time_(r.unit(),r.bitWidth())}case Type.Timestamp:{const r=n.type(new Timestamp);return new Timestamp_(r.unit(),r.timezone())}case Type.Interval:{const r=n.type(new Interval);return new Interval_(r.unit())}case Type.Union:{const r=n.type(new Union);return new Union_(r.mode(),r.typeIdsArray()||[],e||[])}case Type.FixedSizeBinary:{const r=n.type(new FixedSizeBinary);return new FixedSizeBinary$1(r.byteWidth())}case Type.FixedSizeList:{const r=n.type(new FixedSizeList);return new FixedSizeList$1(r.listSize(),(e||[])[0])}case Type.Map:{const r=n.type(new Map$1);return new Map_((e||[])[0],r.keysSorted())}}throw new Error(`Unrecognized type: "${Type[t]}" (${t})`)}function encodeSchema(n,e){const t=e.fields.map(T=>Field.encode(n,T));Schema$1.startFieldsVector(n,t.length);const r=Schema$1.createFieldsVector(n,t),u=e.metadata&&e.metadata.size>0?Schema$1.createCustomMetadataVector(n,[...e.metadata].map(([T,d])=>{const A=n.createString(`${T}`),le=n.createString(`${d}`);return KeyValue.startKeyValue(n),KeyValue.addKey(n,A),KeyValue.addValue(n,le),KeyValue.endKeyValue(n)})):-1;return Schema$1.startSchema(n),Schema$1.addFields(n,r),Schema$1.addEndianness(n,platformIsLittleEndian?Endianness.Little:Endianness.Big),u!==-1&&Schema$1.addCustomMetadata(n,u),Schema$1.endSchema(n)}function encodeField(n,e){let t=-1,r=-1,u=-1;const T=e.type;let d=e.typeId;DataType.isDictionary(T)?(d=T.dictionary.typeId,u=instance.visit(T,n),r=instance.visit(T.dictionary,n)):r=instance.visit(T,n);const A=(T.children||[]).map(B=>Field.encode(n,B)),le=Field$1.createChildrenVector(n,A),G=e.metadata&&e.metadata.size>0?Field$1.createCustomMetadataVector(n,[...e.metadata].map(([B,o])=>{const i=n.createString(`${B}`),w=n.createString(`${o}`);return KeyValue.startKeyValue(n),KeyValue.addKey(n,i),KeyValue.addValue(n,w),KeyValue.endKeyValue(n)})):-1;return e.name&&(t=n.createString(e.name)),Field$1.startField(n),Field$1.addType(n,r),Field$1.addTypeType(n,d),Field$1.addChildren(n,le),Field$1.addNullable(n,!!e.nullable),t!==-1&&Field$1.addName(n,t),u!==-1&&Field$1.addDictionary(n,u),G!==-1&&Field$1.addCustomMetadata(n,G),Field$1.endField(n)}function encodeRecordBatch(n,e){const t=e.nodes||[],r=e.buffers||[];RecordBatch$1.startNodesVector(n,t.length);for(const d of t.slice().reverse())FieldNode.encode(n,d);const u=n.endVector();RecordBatch$1.startBuffersVector(n,r.length);for(const d of r.slice().reverse())BufferRegion.encode(n,d);const T=n.endVector();return RecordBatch$1.startRecordBatch(n),RecordBatch$1.addLength(n,BigInt(e.length)),RecordBatch$1.addNodes(n,u),RecordBatch$1.addBuffers(n,T),RecordBatch$1.endRecordBatch(n)}function encodeDictionaryBatch(n,e){const t=RecordBatch.encode(n,e.data);return DictionaryBatch$1.startDictionaryBatch(n),DictionaryBatch$1.addId(n,BigInt(e.id)),DictionaryBatch$1.addIsDelta(n,e.isDelta),DictionaryBatch$1.addData(n,t),DictionaryBatch$1.endDictionaryBatch(n)}function encodeFieldNode(n,e){return FieldNode$1.createFieldNode(n,BigInt(e.length),BigInt(e.nullCount))}function encodeBufferRegion(n,e){return Buffer$1.createBuffer(n,BigInt(e.offset),BigInt(e.length))}const platformIsLittleEndian=(()=>{const n=new ArrayBuffer(2);return new DataView(n).setInt16(0,256,!0),new Int16Array(n)[0]===256})(),invalidMessageType=n=>`Expected ${MessageHeader$1[n]} Message in stream, but was null or length 0.`,nullMessage=n=>`Header pointer of flatbuffer-encoded ${MessageHeader$1[n]} Message is null or length 0.`,invalidMessageMetadata=(n,e)=>`Expected to read ${n} metadata bytes, but only read ${e}.`,invalidMessageBodyLength=(n,e)=>`Expected to read ${n} bytes for message body, but only read ${e}.`;class MessageReader{constructor(e){this.source=e instanceof ByteStream?e:new ByteStream(e)}[Symbol.iterator](){return this}next(){let e;return(e=this.readMetadataLength()).done||e.value===-1&&(e=this.readMetadataLength()).done||(e=this.readMetadata(e.value)).done?ITERATOR_DONE:e}throw(e){return this.source.throw(e)}return(e){return this.source.return(e)}readMessage(e){let t;if((t=this.next()).done)return null;if(e!=null&&t.value.headerType!==e)throw new Error(invalidMessageType(e));return t.value}readMessageBody(e){if(e<=0)return new Uint8Array(0);const t=toUint8Array(this.source.read(e));if(t.byteLength<e)throw new Error(invalidMessageBodyLength(e,t.byteLength));return t.byteOffset%8===0&&t.byteOffset+t.byteLength<=t.buffer.byteLength?t:t.slice()}readSchema(e=!1){const t=MessageHeader$1.Schema,r=this.readMessage(t),u=r==null?void 0:r.header();if(e&&!u)throw new Error(nullMessage(t));return u}readMetadataLength(){const e=this.source.read(PADDING),t=e&&new ByteBuffer$2(e),r=(t==null?void 0:t.readInt32(0))||0;return{done:r===0,value:r}}readMetadata(e){const t=this.source.read(e);if(!t)return ITERATOR_DONE;if(t.byteLength<e)throw new Error(invalidMessageMetadata(e,t.byteLength));return{done:!1,value:Message.decode(t)}}}class AsyncMessageReader{constructor(e,t){this.source=e instanceof AsyncByteStream?e:isFileHandle(e)?new AsyncRandomAccessFile(e,t):new AsyncByteStream(e)}[Symbol.asyncIterator](){return this}next(){return __awaiter(this,void 0,void 0,function*(){let e;return(e=yield this.readMetadataLength()).done||e.value===-1&&(e=yield this.readMetadataLength()).done||(e=yield this.readMetadata(e.value)).done?ITERATOR_DONE:e})}throw(e){return __awaiter(this,void 0,void 0,function*(){return yield this.source.throw(e)})}return(e){return __awaiter(this,void 0,void 0,function*(){return yield this.source.return(e)})}readMessage(e){return __awaiter(this,void 0,void 0,function*(){let t;if((t=yield this.next()).done)return null;if(e!=null&&t.value.headerType!==e)throw new Error(invalidMessageType(e));return t.value})}readMessageBody(e){return __awaiter(this,void 0,void 0,function*(){if(e<=0)return new Uint8Array(0);const t=toUint8Array(yield this.source.read(e));if(t.byteLength<e)throw new Error(invalidMessageBodyLength(e,t.byteLength));return t.byteOffset%8===0&&t.byteOffset+t.byteLength<=t.buffer.byteLength?t:t.slice()})}readSchema(e=!1){return __awaiter(this,void 0,void 0,function*(){const t=MessageHeader$1.Schema,r=yield this.readMessage(t),u=r==null?void 0:r.header();if(e&&!u)throw new Error(nullMessage(t));return u})}readMetadataLength(){return __awaiter(this,void 0,void 0,function*(){const e=yield this.source.read(PADDING),t=e&&new ByteBuffer$2(e),r=(t==null?void 0:t.readInt32(0))||0;return{done:r===0,value:r}})}readMetadata(e){return __awaiter(this,void 0,void 0,function*(){const t=yield this.source.read(e);if(!t)return ITERATOR_DONE;if(t.byteLength<e)throw new Error(invalidMessageMetadata(e,t.byteLength));return{done:!1,value:Message.decode(t)}})}}class JSONMessageReader extends MessageReader{constructor(e){super(new Uint8Array(0)),this._schema=!1,this._body=[],this._batchIndex=0,this._dictionaryIndex=0,this._json=e instanceof ArrowJSON?e:new ArrowJSON(e)}next(){const{_json:e}=this;if(!this._schema)return this._schema=!0,{done:!1,value:Message.fromJSON(e.schema,MessageHeader$1.Schema)};if(this._dictionaryIndex<e.dictionaries.length){const t=e.dictionaries[this._dictionaryIndex++];return this._body=t.data.columns,{done:!1,value:Message.fromJSON(t,MessageHeader$1.DictionaryBatch)}}if(this._batchIndex<e.batches.length){const t=e.batches[this._batchIndex++];return this._body=t.columns,{done:!1,value:Message.fromJSON(t,MessageHeader$1.RecordBatch)}}return this._body=[],ITERATOR_DONE}readMessageBody(e){return t(this._body);function t(r){return(r||[]).reduce((u,T)=>[...u,...T.VALIDITY&&[T.VALIDITY]||[],...T.TYPE&&[T.TYPE]||[],...T.OFFSET&&[T.OFFSET]||[],...T.DATA&&[T.DATA]||[],...t(T.children)],[])}}readMessage(e){let t;if((t=this.next()).done)return null;if(e!=null&&t.value.headerType!==e)throw new Error(invalidMessageType(e));return t.value}readSchema(){const e=MessageHeader$1.Schema,t=this.readMessage(e),r=t==null?void 0:t.header();if(!t||!r)throw new Error(nullMessage(e));return r}}const PADDING=4,MAGIC_STR="ARROW1",MAGIC=new Uint8Array(MAGIC_STR.length);for(let n=0;n<MAGIC_STR.length;n+=1)MAGIC[n]=MAGIC_STR.codePointAt(n);function checkForMagicArrowString(n,e=0){for(let t=-1,r=MAGIC.length;++t<r;)if(MAGIC[t]!==n[e+t])return!1;return!0}const magicLength=MAGIC.length,magicAndPadding=magicLength+PADDING,magicX2AndPadding=magicLength*2+PADDING;class RecordBatchReader extends ReadableInterop{constructor(e){super(),this._impl=e}get closed(){return this._impl.closed}get schema(){return this._impl.schema}get autoDestroy(){return this._impl.autoDestroy}get dictionaries(){return this._impl.dictionaries}get numDictionaries(){return this._impl.numDictionaries}get numRecordBatches(){return this._impl.numRecordBatches}get footer(){return this._impl.isFile()?this._impl.footer:null}isSync(){return this._impl.isSync()}isAsync(){return this._impl.isAsync()}isFile(){return this._impl.isFile()}isStream(){return this._impl.isStream()}next(){return this._impl.next()}throw(e){return this._impl.throw(e)}return(e){return this._impl.return(e)}cancel(){return this._impl.cancel()}reset(e){return this._impl.reset(e),this._DOMStream=void 0,this._nodeStream=void 0,this}open(e){const t=this._impl.open(e);return isPromise(t)?t.then(()=>this):this}readRecordBatch(e){return this._impl.isFile()?this._impl.readRecordBatch(e):null}[Symbol.iterator](){return this._impl[Symbol.iterator]()}[Symbol.asyncIterator](){return this._impl[Symbol.asyncIterator]()}toDOMStream(){return streamAdapters.toDOMStream(this.isSync()?{[Symbol.iterator]:()=>this}:{[Symbol.asyncIterator]:()=>this})}toNodeStream(){return streamAdapters.toNodeStream(this.isSync()?{[Symbol.iterator]:()=>this}:{[Symbol.asyncIterator]:()=>this},{objectMode:!0})}static throughNode(e){throw new Error('"throughNode" not available in this environment')}static throughDOM(e,t){throw new Error('"throughDOM" not available in this environment')}static from(e){return e instanceof RecordBatchReader?e:isArrowJSON(e)?fromArrowJSON(e):isFileHandle(e)?fromFileHandle(e):isPromise(e)?__awaiter(this,void 0,void 0,function*(){return yield RecordBatchReader.from(yield e)}):isFetchResponse(e)||isReadableDOMStream(e)||isReadableNodeStream(e)||isAsyncIterable(e)?fromAsyncByteStream(new AsyncByteStream(e)):fromByteStream(new ByteStream(e))}static readAll(e){return e instanceof RecordBatchReader?e.isSync()?readAllSync(e):readAllAsync(e):isArrowJSON(e)||ArrayBuffer.isView(e)||isIterable(e)||isIteratorResult(e)?readAllSync(e):readAllAsync(e)}}class RecordBatchStreamReader extends RecordBatchReader{constructor(e){super(e),this._impl=e}readAll(){return[...this]}[Symbol.iterator](){return this._impl[Symbol.iterator]()}[Symbol.asyncIterator](){return __asyncGenerator(this,arguments,function*(){yield __await(yield*__asyncDelegator(__asyncValues(this[Symbol.iterator]())))})}}class AsyncRecordBatchStreamReader extends RecordBatchReader{constructor(e){super(e),this._impl=e}readAll(){var e,t,r,u;return __awaiter(this,void 0,void 0,function*(){const T=new Array;try{for(var d=!0,A=__asyncValues(this),le;le=yield A.next(),e=le.done,!e;d=!0){u=le.value,d=!1;const G=u;T.push(G)}}catch(G){t={error:G}}finally{try{!d&&!e&&(r=A.return)&&(yield r.call(A))}finally{if(t)throw t.error}}return T})}[Symbol.iterator](){throw new Error("AsyncRecordBatchStreamReader is not Iterable")}[Symbol.asyncIterator](){return this._impl[Symbol.asyncIterator]()}}class RecordBatchFileReader extends RecordBatchStreamReader{constructor(e){super(e),this._impl=e}}class AsyncRecordBatchFileReader extends AsyncRecordBatchStreamReader{constructor(e){super(e),this._impl=e}}class RecordBatchReaderImpl{get numDictionaries(){return this._dictionaryIndex}get numRecordBatches(){return this._recordBatchIndex}constructor(e=new Map){this.closed=!1,this.autoDestroy=!0,this._dictionaryIndex=0,this._recordBatchIndex=0,this.dictionaries=e}isSync(){return!1}isAsync(){return!1}isFile(){return!1}isStream(){return!1}reset(e){return this._dictionaryIndex=0,this._recordBatchIndex=0,this.schema=e,this.dictionaries=new Map,this}_loadRecordBatch(e,t){const r=this._loadVectors(e,t,this.schema.fields),u=makeData({type:new Struct(this.schema.fields),length:e.length,children:r});return new RecordBatch$2(this.schema,u)}_loadDictionaryBatch(e,t){const{id:r,isDelta:u}=e,{dictionaries:T,schema:d}=this,A=T.get(r);if(u||!A){const le=d.dictionaries.get(r),G=this._loadVectors(e.data,t,[le]);return(A&&u?A.concat(new Vector(G)):new Vector(G)).memoize()}return A.memoize()}_loadVectors(e,t,r){return new VectorLoader(t,e.nodes,e.buffers,this.dictionaries).visitMany(r)}}class RecordBatchStreamReaderImpl extends RecordBatchReaderImpl{constructor(e,t){super(t),this._reader=isArrowJSON(e)?new JSONMessageReader(this._handle=e):new MessageReader(this._handle=e)}isSync(){return!0}isStream(){return!0}[Symbol.iterator](){return this}cancel(){!this.closed&&(this.closed=!0)&&(this.reset()._reader.return(),this._reader=null,this.dictionaries=null)}open(e){return this.closed||(this.autoDestroy=shouldAutoDestroy(this,e),this.schema||(this.schema=this._reader.readSchema())||this.cancel()),this}throw(e){return!this.closed&&this.autoDestroy&&(this.closed=!0)?this.reset()._reader.throw(e):ITERATOR_DONE}return(e){return!this.closed&&this.autoDestroy&&(this.closed=!0)?this.reset()._reader.return(e):ITERATOR_DONE}next(){if(this.closed)return ITERATOR_DONE;let e;const{_reader:t}=this;for(;e=this._readNextMessageAndValidate();)if(e.isSchema())this.reset(e.header());else if(e.isRecordBatch()){this._recordBatchIndex++;const r=e.header(),u=t.readMessageBody(e.bodyLength);return{done:!1,value:this._loadRecordBatch(r,u)}}else if(e.isDictionaryBatch()){this._dictionaryIndex++;const r=e.header(),u=t.readMessageBody(e.bodyLength),T=this._loadDictionaryBatch(r,u);this.dictionaries.set(r.id,T)}return this.schema&&this._recordBatchIndex===0?(this._recordBatchIndex++,{done:!1,value:new _InternalEmptyPlaceholderRecordBatch(this.schema)}):this.return()}_readNextMessageAndValidate(e){return this._reader.readMessage(e)}}class AsyncRecordBatchStreamReaderImpl extends RecordBatchReaderImpl{constructor(e,t){super(t),this._reader=new AsyncMessageReader(this._handle=e)}isAsync(){return!0}isStream(){return!0}[Symbol.asyncIterator](){return this}cancel(){return __awaiter(this,void 0,void 0,function*(){!this.closed&&(this.closed=!0)&&(yield this.reset()._reader.return(),this._reader=null,this.dictionaries=null)})}open(e){return __awaiter(this,void 0,void 0,function*(){return this.closed||(this.autoDestroy=shouldAutoDestroy(this,e),this.schema||(this.schema=yield this._reader.readSchema())||(yield this.cancel())),this})}throw(e){return __awaiter(this,void 0,void 0,function*(){return!this.closed&&this.autoDestroy&&(this.closed=!0)?yield this.reset()._reader.throw(e):ITERATOR_DONE})}return(e){return __awaiter(this,void 0,void 0,function*(){return!this.closed&&this.autoDestroy&&(this.closed=!0)?yield this.reset()._reader.return(e):ITERATOR_DONE})}next(){return __awaiter(this,void 0,void 0,function*(){if(this.closed)return ITERATOR_DONE;let e;const{_reader:t}=this;for(;e=yield this._readNextMessageAndValidate();)if(e.isSchema())yield this.reset(e.header());else if(e.isRecordBatch()){this._recordBatchIndex++;const r=e.header(),u=yield t.readMessageBody(e.bodyLength);return{done:!1,value:this._loadRecordBatch(r,u)}}else if(e.isDictionaryBatch()){this._dictionaryIndex++;const r=e.header(),u=yield t.readMessageBody(e.bodyLength),T=this._loadDictionaryBatch(r,u);this.dictionaries.set(r.id,T)}return this.schema&&this._recordBatchIndex===0?(this._recordBatchIndex++,{done:!1,value:new _InternalEmptyPlaceholderRecordBatch(this.schema)}):yield this.return()})}_readNextMessageAndValidate(e){return __awaiter(this,void 0,void 0,function*(){return yield this._reader.readMessage(e)})}}class RecordBatchFileReaderImpl extends RecordBatchStreamReaderImpl{get footer(){return this._footer}get numDictionaries(){return this._footer?this._footer.numDictionaries:0}get numRecordBatches(){return this._footer?this._footer.numRecordBatches:0}constructor(e,t){super(e instanceof RandomAccessFile?e:new RandomAccessFile(e),t)}isSync(){return!0}isFile(){return!0}open(e){if(!this.closed&&!this._footer){this.schema=(this._footer=this._readFooter()).schema;for(const t of this._footer.dictionaryBatches())t&&this._readDictionaryBatch(this._dictionaryIndex++)}return super.open(e)}readRecordBatch(e){var t;if(this.closed)return null;this._footer||this.open();const r=(t=this._footer)===null||t===void 0?void 0:t.getRecordBatch(e);if(r&&this._handle.seek(r.offset)){const u=this._reader.readMessage(MessageHeader$1.RecordBatch);if(u!=null&&u.isRecordBatch()){const T=u.header(),d=this._reader.readMessageBody(u.bodyLength);return this._loadRecordBatch(T,d)}}return null}_readDictionaryBatch(e){var t;const r=(t=this._footer)===null||t===void 0?void 0:t.getDictionaryBatch(e);if(r&&this._handle.seek(r.offset)){const u=this._reader.readMessage(MessageHeader$1.DictionaryBatch);if(u!=null&&u.isDictionaryBatch()){const T=u.header(),d=this._reader.readMessageBody(u.bodyLength),A=this._loadDictionaryBatch(T,d);this.dictionaries.set(T.id,A)}}}_readFooter(){const{_handle:e}=this,t=e.size-magicAndPadding,r=e.readInt32(t),u=e.readAt(t-r,r);return Footer_.decode(u)}_readNextMessageAndValidate(e){var t;if(this._footer||this.open(),this._footer&&this._recordBatchIndex<this.numRecordBatches){const r=(t=this._footer)===null||t===void 0?void 0:t.getRecordBatch(this._recordBatchIndex);if(r&&this._handle.seek(r.offset))return this._reader.readMessage(e)}return null}}class AsyncRecordBatchFileReaderImpl extends AsyncRecordBatchStreamReaderImpl{get footer(){return this._footer}get numDictionaries(){return this._footer?this._footer.numDictionaries:0}get numRecordBatches(){return this._footer?this._footer.numRecordBatches:0}constructor(e,...t){const r=typeof t[0]!="number"?t.shift():void 0,u=t[0]instanceof Map?t.shift():void 0;super(e instanceof AsyncRandomAccessFile?e:new AsyncRandomAccessFile(e,r),u)}isFile(){return!0}isAsync(){return!0}open(e){const t=Object.create(null,{open:{get:()=>super.open}});return __awaiter(this,void 0,void 0,function*(){if(!this.closed&&!this._footer){this.schema=(this._footer=yield this._readFooter()).schema;for(const r of this._footer.dictionaryBatches())r&&(yield this._readDictionaryBatch(this._dictionaryIndex++))}return yield t.open.call(this,e)})}readRecordBatch(e){var t;return __awaiter(this,void 0,void 0,function*(){if(this.closed)return null;this._footer||(yield this.open());const r=(t=this._footer)===null||t===void 0?void 0:t.getRecordBatch(e);if(r&&(yield this._handle.seek(r.offset))){const u=yield this._reader.readMessage(MessageHeader$1.RecordBatch);if(u!=null&&u.isRecordBatch()){const T=u.header(),d=yield this._reader.readMessageBody(u.bodyLength);return this._loadRecordBatch(T,d)}}return null})}_readDictionaryBatch(e){var t;return __awaiter(this,void 0,void 0,function*(){const r=(t=this._footer)===null||t===void 0?void 0:t.getDictionaryBatch(e);if(r&&(yield this._handle.seek(r.offset))){const u=yield this._reader.readMessage(MessageHeader$1.DictionaryBatch);if(u!=null&&u.isDictionaryBatch()){const T=u.header(),d=yield this._reader.readMessageBody(u.bodyLength),A=this._loadDictionaryBatch(T,d);this.dictionaries.set(T.id,A)}}})}_readFooter(){return __awaiter(this,void 0,void 0,function*(){const{_handle:e}=this;e._pending&&(yield e._pending);const t=e.size-magicAndPadding,r=yield e.readInt32(t),u=yield e.readAt(t-r,r);return Footer_.decode(u)})}_readNextMessageAndValidate(e){return __awaiter(this,void 0,void 0,function*(){if(this._footer||(yield this.open()),this._footer&&this._recordBatchIndex<this.numRecordBatches){const t=this._footer.getRecordBatch(this._recordBatchIndex);if(t&&(yield this._handle.seek(t.offset)))return yield this._reader.readMessage(e)}return null})}}class RecordBatchJSONReaderImpl extends RecordBatchStreamReaderImpl{constructor(e,t){super(e,t)}_loadVectors(e,t,r){return new JSONVectorLoader(t,e.nodes,e.buffers,this.dictionaries).visitMany(r)}}function shouldAutoDestroy(n,e){return e&&typeof e.autoDestroy=="boolean"?e.autoDestroy:n.autoDestroy}function*readAllSync(n){const e=RecordBatchReader.from(n);try{if(!e.open({autoDestroy:!1}).closed)do yield e;while(!e.reset().open().closed)}finally{e.cancel()}}function readAllAsync(n){return __asyncGenerator(this,arguments,function*(){const t=yield __await(RecordBatchReader.from(n));try{if(!(yield __await(t.open({autoDestroy:!1}))).closed)do yield yield __await(t);while(!(yield __await(t.reset().open())).closed)}finally{yield __await(t.cancel())}})}function fromArrowJSON(n){return new RecordBatchStreamReader(new RecordBatchJSONReaderImpl(n))}function fromByteStream(n){const e=n.peek(magicLength+7&-8);return e&&e.byteLength>=4?checkForMagicArrowString(e)?new RecordBatchFileReader(new RecordBatchFileReaderImpl(n.read())):new RecordBatchStreamReader(new RecordBatchStreamReaderImpl(n)):new RecordBatchStreamReader(new RecordBatchStreamReaderImpl((function*(){})()))}function fromAsyncByteStream(n){return __awaiter(this,void 0,void 0,function*(){const e=yield n.peek(magicLength+7&-8);return e&&e.byteLength>=4?checkForMagicArrowString(e)?new RecordBatchFileReader(new RecordBatchFileReaderImpl(yield n.read())):new AsyncRecordBatchStreamReader(new AsyncRecordBatchStreamReaderImpl(n)):new AsyncRecordBatchStreamReader(new AsyncRecordBatchStreamReaderImpl((function(){return __asyncGenerator(this,arguments,function*(){})})()))})}function fromFileHandle(n){return __awaiter(this,void 0,void 0,function*(){const{size:e}=yield n.stat(),t=new AsyncRandomAccessFile(n,e);return e>=magicX2AndPadding&&checkForMagicArrowString(yield t.readAt(0,magicLength+7&-8))?new AsyncRecordBatchFileReader(new AsyncRecordBatchFileReaderImpl(t)):new AsyncRecordBatchStreamReader(new AsyncRecordBatchStreamReaderImpl(t))})}class VectorAssembler extends Visitor{static assemble(...e){const t=u=>u.flatMap(T=>Array.isArray(T)?t(T):T instanceof RecordBatch$2?T.data.children:T.data),r=new VectorAssembler;return r.visitMany(t(e)),r}constructor(){super(),this._byteLength=0,this._nodes=[],this._buffers=[],this._bufferRegions=[]}visit(e){if(e instanceof Vector)return this.visitMany(e.data),this;const{type:t}=e;if(!DataType.isDictionary(t)){const{length:r,nullCount:u}=e;if(r>2147483647)throw new RangeError("Cannot write arrays larger than 2^31 - 1 in length");DataType.isNull(t)||addBuffer.call(this,u<=0?new Uint8Array(0):truncateBitmap(e.offset,r,e.nullBitmap)),this.nodes.push(new FieldNode(r,u))}return super.visit(e)}visitNull(e){return this}visitDictionary(e){return this.visit(e.clone(e.type.indices))}get nodes(){return this._nodes}get buffers(){return this._buffers}get byteLength(){return this._byteLength}get bufferRegions(){return this._bufferRegions}}function addBuffer(n){const e=n.byteLength+7&-8;return this.buffers.push(n),this.bufferRegions.push(new BufferRegion(this._byteLength,e)),this._byteLength+=e,this}function assembleUnion(n){const{type:e,length:t,typeIds:r,valueOffsets:u}=n;if(addBuffer.call(this,r),e.mode===UnionMode$1.Sparse)return assembleNestedVector.call(this,n);if(e.mode===UnionMode$1.Dense){if(n.offset<=0)return addBuffer.call(this,u),assembleNestedVector.call(this,n);{const T=r.reduce((B,o)=>Math.max(B,o),r[0]),d=new Int32Array(T+1),A=new Int32Array(T+1).fill(-1),le=new Int32Array(t),G=rebaseValueOffsets(-u[0],t,u);for(let B,o,i=-1;++i<t;)(o=A[B=r[i]])===-1&&(o=A[B]=G[B]),le[i]=G[i]-o,++d[B];addBuffer.call(this,le);for(let B,o=-1,i=e.children.length;++o<i;)if(B=n.children[o]){const w=e.typeIds[o],ae=Math.min(t,d[w]);this.visit(B.slice(A[w],ae))}}}return this}function assembleBoolVector(n){let e;return n.nullCount>=n.length?addBuffer.call(this,new Uint8Array(0)):(e=n.values)instanceof Uint8Array?addBuffer.call(this,truncateBitmap(n.offset,n.length,e)):addBuffer.call(this,packBools(n.values))}function assembleFlatVector(n){return addBuffer.call(this,n.values.subarray(0,n.length*n.stride))}function assembleFlatListVector(n){const{length:e,values:t,valueOffsets:r}=n,u=r[0],T=r[e],d=Math.min(T-u,t.byteLength-u);return addBuffer.call(this,rebaseValueOffsets(-r[0],e,r)),addBuffer.call(this,t.subarray(u,u+d)),this}function assembleListVector(n){const{length:e,valueOffsets:t}=n;return t&&addBuffer.call(this,rebaseValueOffsets(t[0],e,t)),this.visit(n.children[0])}function assembleNestedVector(n){return this.visitMany(n.type.children.map((e,t)=>n.children[t]).filter(Boolean))[0]}VectorAssembler.prototype.visitBool=assembleBoolVector;VectorAssembler.prototype.visitInt=assembleFlatVector;VectorAssembler.prototype.visitFloat=assembleFlatVector;VectorAssembler.prototype.visitUtf8=assembleFlatListVector;VectorAssembler.prototype.visitBinary=assembleFlatListVector;VectorAssembler.prototype.visitFixedSizeBinary=assembleFlatVector;VectorAssembler.prototype.visitDate=assembleFlatVector;VectorAssembler.prototype.visitTimestamp=assembleFlatVector;VectorAssembler.prototype.visitTime=assembleFlatVector;VectorAssembler.prototype.visitDecimal=assembleFlatVector;VectorAssembler.prototype.visitList=assembleListVector;VectorAssembler.prototype.visitStruct=assembleNestedVector;VectorAssembler.prototype.visitUnion=assembleUnion;VectorAssembler.prototype.visitInterval=assembleFlatVector;VectorAssembler.prototype.visitFixedSizeList=assembleListVector;VectorAssembler.prototype.visitMap=assembleListVector;class RecordBatchWriter extends ReadableInterop{static throughNode(e){throw new Error('"throughNode" not available in this environment')}static throughDOM(e,t){throw new Error('"throughDOM" not available in this environment')}constructor(e){super(),this._position=0,this._started=!1,this._sink=new AsyncByteQueue,this._schema=null,this._dictionaryBlocks=[],this._recordBatchBlocks=[],this._dictionaryDeltaOffsets=new Map,isObject(e)||(e={autoDestroy:!0,writeLegacyIpcFormat:!1}),this._autoDestroy=typeof e.autoDestroy=="boolean"?e.autoDestroy:!0,this._writeLegacyIpcFormat=typeof e.writeLegacyIpcFormat=="boolean"?e.writeLegacyIpcFormat:!1}toString(e=!1){return this._sink.toString(e)}toUint8Array(e=!1){return this._sink.toUint8Array(e)}writeAll(e){return isPromise(e)?e.then(t=>this.writeAll(t)):isAsyncIterable(e)?writeAllAsync(this,e):writeAll(this,e)}get closed(){return this._sink.closed}[Symbol.asyncIterator](){return this._sink[Symbol.asyncIterator]()}toDOMStream(e){return this._sink.toDOMStream(e)}toNodeStream(e){return this._sink.toNodeStream(e)}close(){return this.reset()._sink.close()}abort(e){return this.reset()._sink.abort(e)}finish(){return this._autoDestroy?this.close():this.reset(this._sink,this._schema),this}reset(e=this._sink,t=null){return e===this._sink||e instanceof AsyncByteQueue?this._sink=e:(this._sink=new AsyncByteQueue,e&&isWritableDOMStream(e)?this.toDOMStream({type:"bytes"}).pipeTo(e):e&&isWritableNodeStream(e)&&this.toNodeStream({objectMode:!1}).pipe(e)),this._started&&this._schema&&this._writeFooter(this._schema),this._started=!1,this._dictionaryBlocks=[],this._recordBatchBlocks=[],this._dictionaryDeltaOffsets=new Map,(!t||!compareSchemas(t,this._schema))&&(t==null?(this._position=0,this._schema=null):(this._started=!0,this._schema=t,this._writeSchema(t))),this}write(e){let t=null;if(this._sink){if(e==null)return this.finish()&&void 0;if(e instanceof Table&&!(t=e.schema))return this.finish()&&void 0;if(e instanceof RecordBatch$2&&!(t=e.schema))return this.finish()&&void 0}else throw new Error("RecordBatchWriter is closed");if(t&&!compareSchemas(t,this._schema)){if(this._started&&this._autoDestroy)return this.close();this.reset(this._sink,t)}e instanceof RecordBatch$2?e instanceof _InternalEmptyPlaceholderRecordBatch||this._writeRecordBatch(e):e instanceof Table?this.writeAll(e.batches):isIterable(e)&&this.writeAll(e)}_writeMessage(e,t=8){const r=t-1,u=Message.encode(e),T=u.byteLength,d=this._writeLegacyIpcFormat?4:8,A=T+d+r&~r,le=A-T-d;return e.headerType===MessageHeader$1.RecordBatch?this._recordBatchBlocks.push(new FileBlock(A,e.bodyLength,this._position)):e.headerType===MessageHeader$1.DictionaryBatch&&this._dictionaryBlocks.push(new FileBlock(A,e.bodyLength,this._position)),this._writeLegacyIpcFormat||this._write(Int32Array.of(-1)),this._write(Int32Array.of(A-d)),T>0&&this._write(u),this._writePadding(le)}_write(e){if(this._started){const t=toUint8Array(e);t&&t.byteLength>0&&(this._sink.write(t),this._position+=t.byteLength)}return this}_writeSchema(e){return this._writeMessage(Message.from(e))}_writeFooter(e){return this._writeLegacyIpcFormat?this._write(Int32Array.of(0)):this._write(Int32Array.of(-1,0))}_writeMagic(){return this._write(MAGIC)}_writePadding(e){return e>0?this._write(new Uint8Array(e)):this}_writeRecordBatch(e){const{byteLength:t,nodes:r,bufferRegions:u,buffers:T}=VectorAssembler.assemble(e),d=new RecordBatch(e.numRows,r,u),A=Message.from(d,t);return this._writeDictionaries(e)._writeMessage(A)._writeBodyBuffers(T)}_writeDictionaryBatch(e,t,r=!1){this._dictionaryDeltaOffsets.set(t,e.length+(this._dictionaryDeltaOffsets.get(t)||0));const{byteLength:u,nodes:T,bufferRegions:d,buffers:A}=VectorAssembler.assemble(new Vector([e])),le=new RecordBatch(e.length,T,d),G=new DictionaryBatch(le,t,r),B=Message.from(G,u);return this._writeMessage(B)._writeBodyBuffers(A)}_writeBodyBuffers(e){let t,r,u;for(let T=-1,d=e.length;++T<d;)(t=e[T])&&(r=t.byteLength)>0&&(this._write(t),(u=(r+7&-8)-r)>0&&this._writePadding(u));return this}_writeDictionaries(e){for(let[t,r]of e.dictionaries){let u=this._dictionaryDeltaOffsets.get(t)||0;if(u===0||(r=r==null?void 0:r.slice(u)).length>0)for(const T of r.data)this._writeDictionaryBatch(T,t,u>0),u+=T.length}return this}}class RecordBatchStreamWriter extends RecordBatchWriter{static writeAll(e,t){const r=new RecordBatchStreamWriter(t);return isPromise(e)?e.then(u=>r.writeAll(u)):isAsyncIterable(e)?writeAllAsync(r,e):writeAll(r,e)}}class RecordBatchFileWriter extends RecordBatchWriter{static writeAll(e){const t=new RecordBatchFileWriter;return isPromise(e)?e.then(r=>t.writeAll(r)):isAsyncIterable(e)?writeAllAsync(t,e):writeAll(t,e)}constructor(){super(),this._autoDestroy=!0}_writeSchema(e){return this._writeMagic()._writePadding(2)}_writeFooter(e){const t=Footer_.encode(new Footer_(e,MetadataVersion$1.V4,this._recordBatchBlocks,this._dictionaryBlocks));return super._writeFooter(e)._write(t)._write(Int32Array.of(t.byteLength))._writeMagic()}}function writeAll(n,e){let t=e;e instanceof Table&&(t=e.batches,n.reset(void 0,e.schema));for(const r of t)n.write(r);return n.finish()}function writeAllAsync(n,e){var t,r,u,T,d,A,le;return __awaiter(this,void 0,void 0,function*(){try{for(t=!0,r=__asyncValues(e);u=yield r.next(),T=u.done,!T;t=!0){le=u.value,t=!1;const G=le;n.write(G)}}catch(G){d={error:G}}finally{try{!t&&!T&&(A=r.return)&&(yield A.call(r))}finally{if(d)throw d.error}}return n.finish()})}function tableToIPC(n,e="stream"){return(e==="stream"?RecordBatchStreamWriter:RecordBatchFileWriter).writeAll(n).toUint8Array(!0)}var Y=Object.create,N=Object.defineProperty,H=Object.getOwnPropertyDescriptor,j=Object.getOwnPropertyNames,K=Object.getPrototypeOf,V=Object.prototype.hasOwnProperty,z=(n,e)=>()=>(e||n((e={exports:{}}).exports,e),e.exports),J=(n,e,t,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let u of j(e))!V.call(n,u)&&u!==t&&N(n,u,{get:()=>e[u],enumerable:!(r=H(e,u))||r.enumerable});return n},$=(n,e,t)=>(t=n!=null?Y(K(n)):{},J(!n||!n.__esModule?N(t,"default",{value:n,enumerable:!0}):t,n)),x$3=z((n,e)=>{e.exports=Worker}),Z=(n=>(n[n.UNDEFINED=0]="UNDEFINED",n[n.AUTOMATIC=1]="AUTOMATIC",n[n.READ_ONLY=2]="READ_ONLY",n[n.READ_WRITE=3]="READ_WRITE",n))(Z||{}),X$1=(n=>(n[n.IDENTIFIER=0]="IDENTIFIER",n[n.NUMERIC_CONSTANT=1]="NUMERIC_CONSTANT",n[n.STRING_CONSTANT=2]="STRING_CONSTANT",n[n.OPERATOR=3]="OPERATOR",n[n.KEYWORD=4]="KEYWORD",n[n.COMMENT=5]="COMMENT",n))(X$1||{}),ee=(n=>(n[n.NONE=0]="NONE",n[n.DEBUG=1]="DEBUG",n[n.INFO=2]="INFO",n[n.WARNING=3]="WARNING",n[n.ERROR=4]="ERROR",n))(ee||{}),re=(n=>(n[n.NONE=0]="NONE",n[n.CONNECT=1]="CONNECT",n[n.DISCONNECT=2]="DISCONNECT",n[n.OPEN=3]="OPEN",n[n.QUERY=4]="QUERY",n[n.INSTANTIATE=5]="INSTANTIATE",n))(re||{}),te=(n=>(n[n.NONE=0]="NONE",n[n.OK=1]="OK",n[n.ERROR=2]="ERROR",n[n.START=3]="START",n[n.RUN=4]="RUN",n[n.CAPTURE=5]="CAPTURE",n))(te||{}),se=(n=>(n[n.NONE=0]="NONE",n[n.WEB_WORKER=1]="WEB_WORKER",n[n.NODE_WORKER=2]="NODE_WORKER",n[n.BINDINGS=3]="BINDINGS",n[n.ASYNC_DUCKDB=4]="ASYNC_DUCKDB",n))(se||{}),P=class{constructor(n=2){this.level=n}log(n){n.level>=this.level&&console.log(n)}},ne=(n=>(n[n.SUCCESS=0]="SUCCESS",n))(ne||{}),E=class{constructor(n,e){this._bindings=n,this._conn=e}get bindings(){return this._bindings}async close(){return this._bindings.disconnect(this._conn)}useUnsafe(n){return n(this._bindings,this._conn)}async query(n){this._bindings.logger.log({timestamp:new Date,level:2,origin:4,topic:4,event:4,value:n});let e=await this._bindings.runQuery(this._conn,n),t=RecordBatchReader.from(e);return console.assert(t.isSync(),"Reader is not sync"),console.assert(t.isFile(),"Reader is not file"),new Table(t)}async send(n){this._bindings.logger.log({timestamp:new Date,level:2,origin:4,topic:4,event:4,value:n});let e=await this._bindings.startPendingQuery(this._conn,n);for(;e==null;)e=await this._bindings.pollPendingQuery(this._conn);let t=new p(this._bindings,this._conn,e),r=await RecordBatchReader.from(t);return console.assert(r.isAsync()),console.assert(r.isStream()),r}async cancelSent(){return await this._bindings.cancelPendingQuery(this._conn)}async getTableNames(n){return await this._bindings.getTableNames(this._conn,n)}async prepare(n){let e=await this._bindings.createPrepared(this._conn,n);return new b(this._bindings,this._conn,e)}async insertArrowTable(n,e){let t=tableToIPC(n,"stream");await this.insertArrowFromIPCStream(t,e)}async insertArrowFromIPCStream(n,e){await this._bindings.insertArrowFromIPCStream(this._conn,n,e)}async insertCSVFromPath(n,e){await this._bindings.insertCSVFromPath(this._conn,n,e)}async insertJSONFromPath(n,e){await this._bindings.insertJSONFromPath(this._conn,n,e)}},p=class{constructor(n,e,t){this.db=n,this.conn=e,this.header=t,this._first=!0,this._depleted=!1,this._inFlight=null}async next(){if(this._first)return this._first=!1,{done:!1,value:this.header};if(this._depleted)return{done:!0,value:null};let n;return this._inFlight!=null?(n=await this._inFlight,this._inFlight=null):n=await this.db.fetchQueryResults(this.conn),this._depleted=n.length==0,this._depleted||(this._inFlight=this.db.fetchQueryResults(this.conn)),{done:this._depleted,value:n}}[Symbol.asyncIterator](){return this}},b=class{constructor(n,e,t){this.bindings=n,this.connectionId=e,this.statementId=t}async close(){await this.bindings.closePrepared(this.connectionId,this.statementId)}async query(...n){let e=await this.bindings.runPrepared(this.connectionId,this.statementId,n),t=RecordBatchReader.from(e);return console.assert(t.isSync()),console.assert(t.isFile()),new Table(t)}async send(...n){let e=await this.bindings.sendPrepared(this.connectionId,this.statementId,n),t=new p(this.bindings,this.connectionId,e),r=await RecordBatchReader.from(t);return console.assert(r.isAsync()),console.assert(r.isStream()),r}},L=(n=>(n.CANCEL_PENDING_QUERY="CANCEL_PENDING_QUERY",n.CLOSE_PREPARED="CLOSE_PREPARED",n.COLLECT_FILE_STATISTICS="COLLECT_FILE_STATISTICS",n.CONNECT="CONNECT",n.COPY_FILE_TO_BUFFER="COPY_FILE_TO_BUFFER",n.COPY_FILE_TO_PATH="COPY_FILE_TO_PATH",n.CREATE_PREPARED="CREATE_PREPARED",n.DISCONNECT="DISCONNECT",n.DROP_FILE="DROP_FILE",n.DROP_FILES="DROP_FILES",n.EXPORT_FILE_STATISTICS="EXPORT_FILE_STATISTICS",n.FETCH_QUERY_RESULTS="FETCH_QUERY_RESULTS",n.FLUSH_FILES="FLUSH_FILES",n.GET_FEATURE_FLAGS="GET_FEATURE_FLAGS",n.GET_TABLE_NAMES="GET_TABLE_NAMES",n.GET_VERSION="GET_VERSION",n.GLOB_FILE_INFOS="GLOB_FILE_INFOS",n.INSERT_ARROW_FROM_IPC_STREAM="INSERT_ARROW_FROM_IPC_STREAM",n.INSERT_CSV_FROM_PATH="IMPORT_CSV_FROM_PATH",n.INSERT_JSON_FROM_PATH="IMPORT_JSON_FROM_PATH",n.INSTANTIATE="INSTANTIATE",n.OPEN="OPEN",n.PING="PING",n.POLL_PENDING_QUERY="POLL_PENDING_QUERY",n.REGISTER_FILE_BUFFER="REGISTER_FILE_BUFFER",n.REGISTER_FILE_HANDLE="REGISTER_FILE_HANDLE",n.REGISTER_FILE_URL="REGISTER_FILE_URL",n.RESET="RESET",n.RUN_PREPARED="RUN_PREPARED",n.RUN_QUERY="RUN_QUERY",n.SEND_PREPARED="SEND_PREPARED",n.START_PENDING_QUERY="START_PENDING_QUERY",n.TOKENIZE="TOKENIZE",n))(L||{}),D=(n=>(n.CONNECTION_INFO="CONNECTION_INFO",n.ERROR="ERROR",n.FEATURE_FLAGS="FEATURE_FLAGS",n.FILE_BUFFER="FILE_BUFFER",n.FILE_INFOS="FILE_INFOS",n.FILE_SIZE="FILE_SIZE",n.FILE_STATISTICS="FILE_STATISTICS",n.INSTANTIATE_PROGRESS="INSTANTIATE_PROGRESS",n.LOG="LOG",n.OK="OK",n.PREPARED_STATEMENT_ID="PREPARED_STATEMENT_ID",n.QUERY_PLAN="QUERY_PLAN",n.QUERY_RESULT="QUERY_RESULT",n.QUERY_RESULT_CHUNK="QUERY_RESULT_CHUNK",n.QUERY_RESULT_HEADER="QUERY_RESULT_HEADER",n.QUERY_RESULT_HEADER_OR_NULL="QUERY_RESULT_HEADER_OR_NULL",n.REGISTERED_FILE="REGISTERED_FILE",n.SCRIPT_TOKENS="SCRIPT_TOKENS",n.SUCCESS="SUCCESS",n.TABLE_NAMES="TABLE_NAMES",n.VERSION_STRING="VERSION_STRING",n))(D||{}),a$1=class{constructor(e,t){this.promiseResolver=()=>{},this.promiseRejecter=()=>{},this.type=e,this.data=t,this.promise=new Promise((r,u)=>{this.promiseResolver=r,this.promiseRejecter=u})}};function R(n){switch(n.typeId){case Type$1.Binary:return{sqlType:"binary"};case Type$1.Bool:return{sqlType:"bool"};case Type$1.Date:return{sqlType:"date"};case Type$1.DateDay:return{sqlType:"date32[d]"};case Type$1.DateMillisecond:return{sqlType:"date64[ms]"};case Type$1.Decimal:{let e=n;return{sqlType:"decimal",precision:e.precision,scale:e.scale}}case Type$1.Float:return{sqlType:"float"};case Type$1.Float16:return{sqlType:"float16"};case Type$1.Float32:return{sqlType:"float32"};case Type$1.Float64:return{sqlType:"float64"};case Type$1.Int:return{sqlType:"int32"};case Type$1.Int16:return{sqlType:"int16"};case Type$1.Int32:return{sqlType:"int32"};case Type$1.Int64:return{sqlType:"int64"};case Type$1.Uint16:return{sqlType:"uint16"};case Type$1.Uint32:return{sqlType:"uint32"};case Type$1.Uint64:return{sqlType:"uint64"};case Type$1.Uint8:return{sqlType:"uint8"};case Type$1.IntervalDayTime:return{sqlType:"interval[dt]"};case Type$1.IntervalYearMonth:return{sqlType:"interval[m]"};case Type$1.List:return{sqlType:"list",valueType:R(n.valueType)};case Type$1.FixedSizeBinary:return{sqlType:"fixedsizebinary",byteWidth:n.byteWidth};case Type$1.Null:return{sqlType:"null"};case Type$1.Utf8:return{sqlType:"utf8"};case Type$1.Struct:return{sqlType:"struct",fields:n.children.map(e=>_(e.name,e.type))};case Type$1.Map:{let e=n;return{sqlType:"map",keyType:R(e.keyType),valueType:R(e.valueType)}}case Type$1.Time:return{sqlType:"time[s]"};case Type$1.TimeMicrosecond:return{sqlType:"time[us]"};case Type$1.TimeMillisecond:return{sqlType:"time[ms]"};case Type$1.TimeNanosecond:return{sqlType:"time[ns]"};case Type$1.TimeSecond:return{sqlType:"time[s]"};case Type$1.Timestamp:return{sqlType:"timestamp",timezone:n.timezone||void 0};case Type$1.TimestampSecond:return{sqlType:"timestamp[s]",timezone:n.timezone||void 0};case Type$1.TimestampMicrosecond:return{sqlType:"timestamp[us]",timezone:n.timezone||void 0};case Type$1.TimestampNanosecond:return{sqlType:"timestamp[ns]",timezone:n.timezone||void 0};case Type$1.TimestampMillisecond:return{sqlType:"timestamp[ms]",timezone:n.timezone||void 0}}throw new Error("unsupported arrow type: ".concat(n.toString()))}function _(n,e){let t=R(e);return t.name=n,t}var oe=new TextEncoder,O=class{constructor(n,e=null){this._onInstantiationProgress=[],this._worker=null,this._workerShutdownPromise=null,this._workerShutdownResolver=()=>{},this._nextMessageId=0,this._pendingRequests=new Map,this._logger=n,this._onMessageHandler=this.onMessage.bind(this),this._onErrorHandler=this.onError.bind(this),this._onCloseHandler=this.onClose.bind(this),e!=null&&this.attach(e)}get logger(){return this._logger}attach(n){this._worker=n,this._worker.addEventListener("message",this._onMessageHandler),this._worker.addEventListener("error",this._onErrorHandler),this._worker.addEventListener("close",this._onCloseHandler),this._workerShutdownPromise=new Promise((e,t)=>{this._workerShutdownResolver=e})}detach(){this._worker&&(this._worker.removeEventListener("message",this._onMessageHandler),this._worker.removeEventListener("error",this._onErrorHandler),this._worker.removeEventListener("close",this._onCloseHandler),this._worker=null,this._workerShutdownResolver(null),this._workerShutdownPromise=null,this._workerShutdownResolver=()=>{})}async terminate(){this._worker&&(this._worker.terminate(),this._worker=null,this._workerShutdownPromise=null,this._workerShutdownResolver=()=>{})}async postTask(n,e=[]){if(!this._worker){console.error("cannot send a message since the worker is not set!");return}let t=this._nextMessageId++;return this._pendingRequests.set(t,n),this._worker.postMessage({messageId:t,type:n.type,data:n.data},e),await n.promise}onMessage(n){var e;let t=n.data;switch(t.type){case"LOG":{this._logger.log(t.data);return}case"INSTANTIATE_PROGRESS":{for(let u of this._onInstantiationProgress)u(t.data);return}}let r=this._pendingRequests.get(t.requestId);if(!r){console.warn("unassociated response: [".concat(t.requestId,", ").concat(t.type.toString(),"]"));return}if(this._pendingRequests.delete(t.requestId),t.type=="ERROR"){let u=new Error(t.data.message);u.name=t.data.name,(e=Object.getOwnPropertyDescriptor(u,"stack"))!=null&&e.writable&&(u.stack=t.data.stack),r.promiseRejecter(u);return}switch(r.type){case"CLOSE_PREPARED":case"COLLECT_FILE_STATISTICS":case"COPY_FILE_TO_PATH":case"DISCONNECT":case"DROP_FILE":case"DROP_FILES":case"FLUSH_FILES":case"INSERT_ARROW_FROM_IPC_STREAM":case"IMPORT_CSV_FROM_PATH":case"IMPORT_JSON_FROM_PATH":case"OPEN":case"PING":case"REGISTER_FILE_BUFFER":case"REGISTER_FILE_HANDLE":case"REGISTER_FILE_URL":case"RESET":if(t.type=="OK"){r.promiseResolver(t.data);return}break;case"INSTANTIATE":if(this._onInstantiationProgress=[],t.type=="OK"){r.promiseResolver(t.data);return}break;case"GLOB_FILE_INFOS":if(t.type=="FILE_INFOS"){r.promiseResolver(t.data);return}break;case"GET_VERSION":if(t.type=="VERSION_STRING"){r.promiseResolver(t.data);return}break;case"GET_FEATURE_FLAGS":if(t.type=="FEATURE_FLAGS"){r.promiseResolver(t.data);return}break;case"GET_TABLE_NAMES":if(t.type=="TABLE_NAMES"){r.promiseResolver(t.data);return}break;case"TOKENIZE":if(t.type=="SCRIPT_TOKENS"){r.promiseResolver(t.data);return}break;case"COPY_FILE_TO_BUFFER":if(t.type=="FILE_BUFFER"){r.promiseResolver(t.data);return}break;case"EXPORT_FILE_STATISTICS":if(t.type=="FILE_STATISTICS"){r.promiseResolver(t.data);return}break;case"CONNECT":if(t.type=="CONNECTION_INFO"){r.promiseResolver(t.data);return}break;case"RUN_PREPARED":case"RUN_QUERY":if(t.type=="QUERY_RESULT"){r.promiseResolver(t.data);return}break;case"SEND_PREPARED":if(t.type=="QUERY_RESULT_HEADER"){r.promiseResolver(t.data);return}break;case"START_PENDING_QUERY":if(t.type=="QUERY_RESULT_HEADER_OR_NULL"){r.promiseResolver(t.data);return}break;case"POLL_PENDING_QUERY":if(t.type=="QUERY_RESULT_HEADER_OR_NULL"){r.promiseResolver(t.data);return}break;case"CANCEL_PENDING_QUERY":if(this._onInstantiationProgress=[],t.type=="SUCCESS"){r.promiseResolver(t.data);return}break;case"FETCH_QUERY_RESULTS":if(t.type=="QUERY_RESULT_CHUNK"){r.promiseResolver(t.data);return}break;case"CREATE_PREPARED":if(t.type=="PREPARED_STATEMENT_ID"){r.promiseResolver(t.data);return}break}r.promiseRejecter(new Error("unexpected response type: ".concat(t.type.toString())))}onError(n){console.error(n),console.error("error in duckdb worker: ".concat(n.message)),this._pendingRequests.clear()}onClose(){if(this._workerShutdownResolver(null),this._pendingRequests.size!=0){console.warn("worker terminated with ".concat(this._pendingRequests.size," pending requests"));return}this._pendingRequests.clear()}async reset(){let n=new a$1("RESET",null);return await this.postTask(n)}async ping(){let n=new a$1("PING",null);await this.postTask(n)}async dropFile(n){let e=new a$1("DROP_FILE",n);return await this.postTask(e)}async dropFiles(){let n=new a$1("DROP_FILES",null);return await this.postTask(n)}async flushFiles(){let n=new a$1("FLUSH_FILES",null);return await this.postTask(n)}async instantiate(n,e=null,t=r=>{}){this._onInstantiationProgress.push(t);let r=new a$1("INSTANTIATE",[n,e]);return await this.postTask(r)}async getVersion(){let n=new a$1("GET_VERSION",null);return await this.postTask(n)}async getFeatureFlags(){let n=new a$1("GET_FEATURE_FLAGS",null);return await this.postTask(n)}async open(n){let e=new a$1("OPEN",n);await this.postTask(e)}async tokenize(n){let e=new a$1("TOKENIZE",n);return await this.postTask(e)}async connectInternal(){let n=new a$1("CONNECT",null);return await this.postTask(n)}async connect(){let n=await this.connectInternal();return new E(this,n)}async disconnect(n){let e=new a$1("DISCONNECT",n);await this.postTask(e)}async runQuery(n,e){let t=new a$1("RUN_QUERY",[n,e]);return await this.postTask(t)}async startPendingQuery(n,e){let t=new a$1("START_PENDING_QUERY",[n,e]);return await this.postTask(t)}async pollPendingQuery(n){let e=new a$1("POLL_PENDING_QUERY",n);return await this.postTask(e)}async cancelPendingQuery(n){let e=new a$1("CANCEL_PENDING_QUERY",n);return await this.postTask(e)}async fetchQueryResults(n){let e=new a$1("FETCH_QUERY_RESULTS",n);return await this.postTask(e)}async getTableNames(n,e){let t=new a$1("GET_TABLE_NAMES",[n,e]);return await this.postTask(t)}async createPrepared(n,e){let t=new a$1("CREATE_PREPARED",[n,e]);return await this.postTask(t)}async closePrepared(n,e){let t=new a$1("CLOSE_PREPARED",[n,e]);await this.postTask(t)}async runPrepared(n,e,t){let r=new a$1("RUN_PREPARED",[n,e,t]);return await this.postTask(r)}async sendPrepared(n,e,t){let r=new a$1("SEND_PREPARED",[n,e,t]);return await this.postTask(r)}async globFiles(n){let e=new a$1("GLOB_FILE_INFOS",n);return await this.postTask(e)}async registerFileText(n,e){let t=oe.encode(e);await this.registerFileBuffer(n,t)}async registerFileURL(n,e,t,r){e===void 0&&(e=n);let u=new a$1("REGISTER_FILE_URL",[n,e,t,r]);await this.postTask(u)}async registerEmptyFileBuffer(n){let e=new a$1("REGISTER_FILE_BUFFER",[n,new Uint8Array]);await this.postTask(e)}async registerFileBuffer(n,e){let t=new a$1("REGISTER_FILE_BUFFER",[n,e]);await this.postTask(t,[e.buffer])}async registerFileHandle(n,e,t,r){let u=new a$1("REGISTER_FILE_HANDLE",[n,e,t,r]);await this.postTask(u,[])}async collectFileStatistics(n,e){let t=new a$1("COLLECT_FILE_STATISTICS",[n,e]);await this.postTask(t,[])}async exportFileStatistics(n){let e=new a$1("EXPORT_FILE_STATISTICS",n);return await this.postTask(e,[])}async copyFileToBuffer(n){let e=new a$1("COPY_FILE_TO_BUFFER",n);return await this.postTask(e)}async copyFileToPath(n,e){let t=new a$1("COPY_FILE_TO_PATH",[n,e]);await this.postTask(t)}async insertArrowFromIPCStream(n,e,t){if(e.length==0)return;let r=new a$1("INSERT_ARROW_FROM_IPC_STREAM",[n,e,t]);await this.postTask(r,[e.buffer])}async insertCSVFromPath(n,e,t){if(t.columns!==void 0){let u=[];for(let T in t.columns){let d=t.columns[T];u.push(_(T,d))}t.columnsFlat=u,delete t.columns}let r=new a$1("IMPORT_CSV_FROM_PATH",[n,e,t]);await this.postTask(r)}async insertJSONFromPath(n,e,t){if(t.columns!==void 0){let u=[];for(let T in t.columns){let d=t.columns[T];u.push(_(T,d))}t.columnsFlat=u,delete t.columns}let r=new a$1("IMPORT_JSON_FROM_PATH",[n,e,t]);await this.postTask(r)}},F=async()=>WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,5,3,1,0,1,10,14,1,12,0,65,0,65,0,65,0,252,10,0,0,11])),f=async()=>WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,10,8,1,6,0,6,64,25,11,11])),C=async()=>WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,5,1,96,0,1,123,3,2,1,0,10,10,1,8,0,65,0,253,15,253,98,11])),U=()=>(async n=>{try{return typeof MessageChannel<"u"&&new MessageChannel().port1.postMessage(new SharedArrayBuffer(1)),WebAssembly.validate(n)}catch{return!1}})(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,5,4,1,3,1,1,10,11,1,9,0,65,0,254,16,2,0,26,11])),m$1={name:"@duckdb/duckdb-wasm",version:"1.28.0"},W=m$1.name,v=m$1.version,I=m$1.version.split(".");I[0];I[1];I[2];var M=()=>typeof navigator>"u";function Ge(){let n="https://cdn.jsdelivr.net/npm/".concat(W,"@").concat(v,"/dist/");return{mvp:{mainModule:"".concat(n,"duckdb-mvp.wasm"),mainWorker:"".concat(n,"duckdb-browser-mvp.worker.js")},eh:{mainModule:"".concat(n,"duckdb-eh.wasm"),mainWorker:"".concat(n,"duckdb-browser-eh.worker.js")}}}var k=null,y$3=null,g=null,S=null,h=null;async function de(){return k==null&&(k=typeof BigInt64Array<"u"),y$3==null&&(y$3=await f()),g==null&&(g=await U()),S==null&&(S=await C()),h==null&&(h=await F()),{bigInt64Array:k,crossOriginIsolated:M()||globalThis.crossOriginIsolated||!1,wasmExceptions:y$3,wasmSIMD:S,wasmThreads:g,wasmBulkMemory:h}}async function xe(n){let e=await de();if(e.wasmExceptions){if(e.wasmSIMD&&e.wasmThreads&&e.crossOriginIsolated&&n.coi)return{mainModule:n.coi.mainModule,mainWorker:n.coi.mainWorker,pthreadWorker:n.coi.pthreadWorker};if(n.eh)return{mainModule:n.eh.mainModule,mainWorker:n.eh.mainWorker,pthreadWorker:null}}return{mainModule:n.mvp.mainModule,mainWorker:n.mvp.mainWorker,pthreadWorker:null}}var Q=$(x$3());async function Ye(n){let e=new Request(n),t=await fetch(e),r=URL.createObjectURL(await t.blob());return new Q.default(r)}function ce(){let n=new TextDecoder;return e=>(typeof SharedArrayBuffer<"u"&&e.buffer instanceof SharedArrayBuffer&&(e=new Uint8Array(e)),n.decode(e))}ce();var q=(n=>(n[n.BUFFER=0]="BUFFER",n[n.NODE_FS=1]="NODE_FS",n[n.BROWSER_FILEREADER=2]="BROWSER_FILEREADER",n[n.BROWSER_FSACCESS=3]="BROWSER_FSACCESS",n[n.HTTP=4]="HTTP",n[n.S3=5]="S3",n))(q||{}),EntityType=(n=>(n.CONTAINER="CONTAINER",n.SERVICE="SERVICE",n.RULE="RULE",n.PREDICATE="PREDICATE",n))(EntityType||{}),ImpactLevel=(n=>(n.PROHIBITIVE="PROHIBITIVE",n.UNDESIRABLE="UNDESIRABLE",n.ACCEPTABLE="ACCEPTABLE",n.NEUTRAL="NEUTRAL",n))(ImpactLevel||{}),AlertType=(n=>(n.STRATEGIC_RISK="STRATEGIC_RISK",n.OPERATIONAL_IMPLICATION="OPERATIONAL_IMPLICATION",n))(AlertType||{}),ServiceType=(n=>(n.INFRASTRUCTURE="INFRA",n.DATA="DATA_STORE",n.COMPUTE="COMPUTE",n.HUMAN="HUMAN_PROCESS",n.INTERFACE="INTERFACE",n.LEGACY="LEGACY_SYSTEM",n))(ServiceType||{});const COLORS={container:"#6366f1",service:"#10b981",serviceExperimental:"#f59e0b",[ImpactLevel.PROHIBITIVE]:"#ef4444",[ImpactLevel.UNDESIRABLE]:"#f97316",[ImpactLevel.ACCEPTABLE]:"#10b981",[ImpactLevel.NEUTRAL]:"#64748b",predicate:"#8b5cf6",rule:"#ec4899"},PROJECTS=[{id:"proj_hospital_base",name:"Hospital de Base  Infraestrutura Digital",domain:"Public Health / Critical Infra",description:"Modernization of a high-volume public hospital. Managing tension between legacy reliability, regulatory sovereignty, and AI innovation."},{id:"proj_ml_audio",name:"Audio Classification Pipeline",domain:"MLOps / Research",description:"End-to-end Machine Learning pipeline for acoustic event detection. Managing trade-offs between feature complexity (Path A vs B) and compute resources."}],PREDICATES=[{id:"p_sov",label:"Data Residency Preserved",description:"Patient PII must legally remain within national jurisdiction storage.",category:"SECURITY"},{id:"p_comp",label:"Regulatory Compliance Maintained",description:"Adherence to HIPAA/LGPD standards for all data at rest and in transit.",category:"SECURITY"},{id:"p_trace",label:"Clinical Decision Traceable",description:"Every diagnostic output must be attributable to a licensed professional.",category:"CLINICAL"},{id:"p_cont",label:"24/7 Operational Continuity",description:"System must support emergency intake even during internet blackouts.",category:"OPERATIONAL"},{id:"p_human",label:"Human Verification Required",description:"Automated suggestions cannot trigger prescriptions without MD signature.",category:"HUMAN"},{id:"p_audit",label:"AI Output Requires Audit",description:"Stochastic model outputs must be logged and reviewed.",category:"HUMAN"},{id:"p_data_valid",label:"Input Data Validity",description:"Garbage in, garbage out. Raw data must vary sufficiently for training.",category:"OPERATIONAL"},{id:"p_repro",label:"Reproducibility",description:"All transformation steps must be deterministic or seeded.",category:"CLINICAL"},{id:"p_resource",label:"Resource Budget",description:"Compute cost must not exceed project allocation.",category:"OPERATIONAL"},{id:"p_arch_cons",label:"Architectural Consistency",description:"Components must be mathematically compatible (dimensions, tensors).",category:"OPERATIONAL"}],RULES=[{id:"r_compliance",name:"Strict Sovereignty (LGPD)",description:"If patient data is stored externally, strict regulatory validation is required.",priority:"MUST",matcherKeywords:["Cloud","Off-Prem"],predicateIds:["p_sov","p_comp"],operator:"AND"},{id:"r_continuity",name:"Emergency Continuity",description:"If system supports Emergency Care, local fallback is mandatory.",priority:"MUST",matcherKeywords:["Critical","Emergency"],predicateIds:["p_cont"],operator:"AND"},{id:"r_ai_safe",name:"AI Clinical Safety",description:"If AI assists decision, Human-in-the-Loop is mandatory.",priority:"MUST",matcherKeywords:["AI","Stochastic"],predicateIds:["p_human","p_audit"],operator:"AND"},{id:"r_hybrid",name:"Hybrid Complexity Cap",description:"If Legacy and Cloud coexist, synchronization overhead must be managed.",priority:"SHOULD",matcherKeywords:["Legacy","Cloud"],predicateIds:[],operator:"OR"},{id:"r_cost",name:"OpEx/Egress Limit",description:"If data crosses provider boundaries frequently, cost controls apply.",priority:"SHOULD",matcherKeywords:["Egress","API-Gateway"],predicateIds:[],operator:"OR"},{id:"r_rep_loss",name:"Representation Integrity",description:"Combining high-capacity Models (Transformer) with low-fidelity Preprocessing (Basic SVD) creates an informational bottleneck.",priority:"SHOULD",matcherKeywords:["Transformer","SVD"],predicateIds:["p_arch_cons"],operator:"AND"},{id:"r_norm_safe",name:"Normalization Safety",description:"Training Neural Networks without prior Data Normalization leads to gradient explosions and instability.",priority:"MUST",matcherKeywords:["Training","Normalization"],predicateIds:["p_data_valid"],operator:"AND"},{id:"r_maint_div",name:"Pipeline Divergence",description:"Maintaining divergent preprocessing paths (Path A & Path B) simultaneously creates strategic tech debt.",priority:"SHOULD",matcherKeywords:["Path-A","Path-B"],predicateIds:["p_repro"],operator:"AND"},{id:"r_model_eval",name:"Evaluation Mandatory",description:"A trained model node must have a downstream evaluation node to assess performance metrics.",priority:"MUST",matcherKeywords:["Training","Inference"],predicateIds:["p_repro"],operator:"AND"}],SVC_EMR_CORE={id:"svc_emr",name:"Legacy EMR Core (Mainframe)",type:ServiceType.LEGACY,attributes:["On-Prem","Legacy","Critical","SQL-Cluster"],isExperimental:!1,group:"On-Prem Core"},SVC_HL7_ETL={id:"svc_etl",name:"HL7 Batch ETL",type:ServiceType.INTERFACE,attributes:["On-Prem","Slow","Fragile"],isExperimental:!1,group:"Integration"},SVC_VPN={id:"svc_vpn",name:"Site-to-Site VPN",type:ServiceType.INFRASTRUCTURE,attributes:["On-Prem","Bottleneck","Secure"],isExperimental:!1,group:"Network"},SVC_LOCAL_CACHE={id:"svc_cache",name:"Emergency Local Cache",type:ServiceType.DATA,attributes:["On-Prem","Continuity","Sync-Required"],isExperimental:!1,group:"On-Prem Core"},SVC_CLOUD_LAKE={id:"svc_aws_lake",name:"Cloud Data Lake (Encrypted)",type:ServiceType.DATA,attributes:["Cloud","Off-Prem","Scalable","Egress"],isExperimental:!1,group:"Cloud Infra"},SVC_AI_TRIAGE={id:"svc_ai_triage",name:"GenAI Triage Assistant",type:ServiceType.COMPUTE,attributes:["Cloud","AI","Stochastic","Black-Box"],isExperimental:!0,group:"AI Services"};ServiceType.COMPUTE;const SVC_MD_AUDIT={id:"svc_human_audit",name:"Clinical Board Review",type:ServiceType.HUMAN,attributes:["Human-Process","Safety-Layer","Slow","High-Cost"],isExperimental:!1,group:"Governance"},SVC_TECH_OPS={id:"svc_ops_team",name:"24/7 Ops Center",type:ServiceType.HUMAN,attributes:["Human-Process","Operational"],isExperimental:!1,group:"Governance"},NODE_RAW={id:"node_raw_wavs",name:"raw_wavs",type:ServiceType.DATA,attributes:["Input","SVD-Dataset","wav_files"],isExperimental:!1,group:"Input Cluster"},NODE_INGEST={id:"node_ingest",name:"ingest",type:ServiceType.INTERFACE,attributes:["IO","SVD-Dataset"],isExperimental:!1,group:"Input Cluster"},NODE_PRE={id:"node_pre",name:"pre (Normalize)",type:ServiceType.COMPUTE,attributes:["Preprocessing","Normalization","SVD-Dataset"],isExperimental:!1,group:"Input Cluster"},NODE_FEAT={id:"node_feat",name:"feat (SVD/MFCC)",type:ServiceType.COMPUTE,attributes:["Feature-Eng","Path-A","SVD","Low-Dim","features.csv"],isExperimental:!1,group:"Path A (Baseline)"},NODE_ENC={id:"node_enc",name:"enc (Transformer)",type:ServiceType.COMPUTE,attributes:["Transformer","Path-B","GPU","High-Dim","Experimental","embeddings.csv"],isExperimental:!0,group:"Path B (Transformer)"},NODE_BUILDER={id:"node_builder",name:"builder (TFRecord)",type:ServiceType.DATA,attributes:["Aggregation","TFRecord"],isExperimental:!1,group:"Output Cluster"},NODE_TRAIN={id:"node_train",name:"train (Model)",type:ServiceType.COMPUTE,attributes:["Training","Stochastic","checkpoints"],isExperimental:!1,group:"Output Cluster"},NODE_EVAL={id:"node_eval",name:"eval (Metrics)",type:ServiceType.HUMAN,attributes:["Validation","Interpretation","metrics.json"],isExperimental:!1,group:"Output Cluster"},NODE_PLOT={id:"node_plot",name:"plot (Viz)",type:ServiceType.INTERFACE,attributes:["Reporting","confusion.png"],isExperimental:!1,group:"Output Cluster"},INITIAL_ARRANGEMENTS=[{id:"hyp_a_conservative",projectId:"proj_hospital_base",name:"A. Modernizao Conservadora",createdAt:1,container:{id:"cont_v1",versionLabel:"V1.0 - Ironclad",hypothesisName:"Legacy Extension Strategy",description:"Maximize stability. Keep all PII on-prem. Use VPN for remote access. No AI integration to avoid regulatory risk.",activeRules:RULES.filter(n=>n.matcherKeywords.includes("Legacy")||n.matcherKeywords.includes("Cloud"))},services:[SVC_EMR_CORE,SVC_HL7_ETL,SVC_VPN,SVC_TECH_OPS],predicates:PREDICATES.filter(n=>n.category!=="OPERATIONAL"||n.id==="p_cont")},{id:"hyp_b_hybrid",projectId:"proj_hospital_base",name:"B. Cloud Hbrida + IA Assistiva",createdAt:2,parentId:"hyp_a_conservative",container:{id:"cont_v2",versionLabel:"V2.1 - Intelligent Hybrid",hypothesisName:"Operational Efficiency via AI",description:"Move historical data to Cloud Lake. Use AI for triage assistance, but enforce strict Human Audit. High integration complexity.",activeRules:RULES.filter(n=>n.matcherKeywords.includes("Legacy")||n.matcherKeywords.includes("Cloud")||n.matcherKeywords.includes("AI"))},services:[SVC_EMR_CORE,SVC_CLOUD_LAKE,SVC_AI_TRIAGE,SVC_MD_AUDIT,SVC_LOCAL_CACHE],predicates:PREDICATES.filter(n=>n.category!=="OPERATIONAL"||n.id==="p_cont")},{id:"hyp_ml_baseline",projectId:"proj_ml_audio",name:"Path A: Baseline SVD",createdAt:4,container:{id:"cont_ml_v1",versionLabel:"V1.0 - Baseline",hypothesisName:"Classical SVD Feature Extraction",description:"Standard production path. Uses simple deterministic feature extraction (SVD). Low compute cost, highly interpretable.",activeRules:RULES.filter(n=>n.id.startsWith("r_rep_loss")||n.id.startsWith("r_norm_safe")||n.id.startsWith("r_model_eval"))},services:[NODE_RAW,NODE_INGEST,NODE_PRE,NODE_FEAT,NODE_BUILDER,NODE_TRAIN,NODE_EVAL,NODE_PLOT],predicates:PREDICATES.filter(n=>n.id==="p_data_valid"||n.id==="p_repro"||n.id==="p_arch_cons")},{id:"hyp_ml_transformer",projectId:"proj_ml_audio",name:"Path B: Transformer",createdAt:5,parentId:"hyp_ml_baseline",container:{id:"cont_ml_v2",versionLabel:"V2.0 - Transformer",hypothesisName:"Deep Learning Embedding Injection",description:'Injects "Path B" (Transformer Encoder). Higher accuracy expected but creates dependency on GPU resources.',activeRules:RULES.filter(n=>n.id.startsWith("r_rep_loss")||n.id.startsWith("r_norm_safe")||n.id.startsWith("r_model_eval"))},services:[NODE_RAW,NODE_INGEST,NODE_PRE,NODE_ENC,NODE_BUILDER,NODE_TRAIN,NODE_EVAL,NODE_PLOT],predicates:PREDICATES.filter(n=>n.id==="p_data_valid"||n.id==="p_repro"||n.id==="p_arch_cons")},{id:"hyp_ml_conflict",projectId:"proj_ml_audio",name:"Conflict: SVD + Transformer",createdAt:6,parentId:"hyp_ml_transformer",container:{id:"cont_ml_v3",versionLabel:"V2.1 - Conflict Draft",hypothesisName:"Architectural Mismatch",description:"Testing what happens if we feed Low-Dim SVD features into the Transformer. Also skipped normalization to save time.",activeRules:RULES.filter(n=>n.id.startsWith("r_rep_loss")||n.id.startsWith("r_norm_safe")||n.id.startsWith("r_model_eval"))},services:[NODE_RAW,NODE_INGEST,NODE_FEAT,NODE_ENC,NODE_BUILDER,NODE_TRAIN,NODE_EVAL],predicates:PREDICATES.filter(n=>n.id==="p_data_valid"||n.id==="p_repro"||n.id==="p_arch_cons")},{id:"hyp_ml_ab",projectId:"proj_ml_audio",name:"Combined A/B Test",createdAt:7,container:{id:"cont_ml_ab",versionLabel:"V3.0 - A/B Suite",hypothesisName:"Simultaneous Execution",description:"Running both paths simultaneously for evaluation. High complexity.",activeRules:RULES.filter(n=>n.id.startsWith("r_maint_div")||n.id.startsWith("r_model_eval"))},services:[NODE_RAW,NODE_INGEST,NODE_PRE,NODE_FEAT,NODE_ENC,NODE_BUILDER,NODE_TRAIN,NODE_EVAL,NODE_PLOT],predicates:PREDICATES.filter(n=>n.id==="p_repro"||n.id==="p_resource")}],JSDELIVR_BUNDLES=Ge();class DBManager{constructor(){this.db=null,this.conn=null,this.isReady=!1,this.cache=new Map,this.listeners=[]}static getInstance(){return DBManager.instance||(DBManager.instance=new DBManager),DBManager.instance}subscribe(e){return this.listeners.push(e),()=>{this.listeners=this.listeners.filter(t=>t!==e)}}notify(){this.listeners.forEach(e=>e())}async init(){if(this.db)return;const e=await xe(JSDELIVR_BUNDLES),t=await Ye(e.mainWorker),r=new P;this.db=new O(r,t),await this.db.instantiate(e.mainModule,e.pthreadWorker),this.conn=await this.db.connect(),await this.createSchema(),await this.seedData(),this.isReady=!0,console.log("DuckDB Initialized"),this.notify()}async createSchema(){this.conn&&(await this.conn.query(`
      CREATE TABLE IF NOT EXISTS projects (
        id TEXT PRIMARY KEY,
        name TEXT,
        domain TEXT,
        description TEXT
      );
    `),await this.conn.query(`
      CREATE TABLE IF NOT EXISTS pipelines (
        id TEXT PRIMARY KEY,
        project_id TEXT,
        name TEXT,
        parent_id TEXT,
        created_at BIGINT,
        container_json TEXT, -- Stores versionLabel, description, activeRules
        predicates_json TEXT 
      );
    `),await this.conn.query(`
      CREATE TABLE IF NOT EXISTS nodes (
        id TEXT,
        pipeline_id TEXT,
        name TEXT,
        type TEXT,
        group_name TEXT,
        is_experimental BOOLEAN,
        attributes_json TEXT, -- JSON Array
        PRIMARY KEY (id, pipeline_id)
      );
    `))}async seedData(){if(!(!this.conn||(await this.conn.query("SELECT count(*) as c FROM projects")).toArray()[0].c>0)){console.log("Seeding Database...");for(const r of PROJECTS)await this.conn.query(`
        INSERT INTO projects VALUES ('${r.id}', '${r.name}', '${r.domain}', '${r.description.replace(/'/g,"''")}')
      `);for(const r of INITIAL_ARRANGEMENTS){const u=JSON.stringify(r.container).replace(/'/g,"''"),T=JSON.stringify(r.predicates).replace(/'/g,"''"),d=r.parentId?`'${r.parentId}'`:"NULL";await this.conn.query(`
            INSERT INTO pipelines VALUES (
                '${r.id}', 
                '${r.projectId}', 
                '${r.name.replace(/'/g,"''")}', 
                ${d}, 
                ${r.createdAt}, 
                '${u}', 
                '${T}'
            )
        `);for(const A of r.services){const le=JSON.stringify(A.attributes).replace(/'/g,"''"),G=A.group?`'${A.group}'`:"NULL";await this.conn.query(`
                INSERT INTO nodes VALUES (
                    '${A.id}',
                    '${r.id}',
                    '${A.name.replace(/'/g,"''")}',
                    '${A.type}',
                    ${G},
                    ${A.isExperimental},
                    '${le}'
                )
            `)}}}}invalidateCache(e){e?this.cache.delete(e):this.cache.clear(),this.notify()}async execute(e){if(!this.conn)throw new Error("DB not initialized");try{const t=await this.conn.query(e),r=e.trim().toUpperCase();return(r.startsWith("INSERT")||r.startsWith("UPDATE")||r.startsWith("DELETE")||r.startsWith("DROP")||r.startsWith("ALTER"))&&this.invalidateCache(),t.toArray().map(u=>JSON.parse(JSON.stringify(u,(T,d)=>typeof d=="bigint"?d.toString():d)))}catch(t){throw new Error(t.message)}}async getProjects(){if(!this.conn)throw new Error("DB not initialized");return(await this.conn.query("SELECT * FROM projects")).toArray().map(t=>({id:t.id,name:t.name,domain:t.domain,description:t.description}))}async getArrangements(e){if(!this.conn)throw new Error("DB not initialized");if(this.cache.has(e))return this.cache.get(e);const r=(await this.conn.query(`
        SELECT * FROM pipelines WHERE project_id = '${e}' ORDER BY created_at ASC
    `)).toArray(),u=[];for(const T of r){const A=(await this.conn.query(`
            SELECT * FROM nodes WHERE pipeline_id = '${T.id}'
        `)).toArray().map(le=>({id:le.id,name:le.name,type:le.type,group:le.group_name,isExperimental:le.is_experimental,attributes:JSON.parse(le.attributes_json)}));u.push({id:T.id,projectId:T.project_id,name:T.name,parentId:T.parent_id,createdAt:Number(T.created_at),container:JSON.parse(T.container_json),predicates:JSON.parse(T.predicates_json),services:A})}return this.cache.set(e,u),u}async exportProject(e){const r=(await this.getProjects()).find(T=>T.id===e),u=await this.getArrangements(e);return JSON.stringify({project:r,arrangements:u},null,2)}async createFullSnapshot(){const e=await this.getProjects(),t={projects:e,arrangements:[]};for(const r of e){const u=await this.getArrangements(r.id);t.arrangements.push(...u)}return JSON.stringify(t)}async importProject(e){if(this.conn)try{const t=JSON.parse(e),r=t.projects?t.projects:[t.project],u=t.arrangements;for(const T of r)(await this.conn.query(`SELECT id FROM projects WHERE id = '${T.id}'`)).numRows===0&&await this.conn.query(`
                        INSERT INTO projects VALUES ('${T.id}', '${T.name}', '${T.domain}', '${T.description.replace(/'/g,"''")}')
                    `);for(const T of u){if((await this.conn.query(`SELECT id FROM pipelines WHERE id = '${T.id}'`)).numRows>0)continue;const A=JSON.stringify(T.container).replace(/'/g,"''"),le=JSON.stringify(T.predicates).replace(/'/g,"''"),G=T.parentId?`'${T.parentId}'`:"NULL";await this.conn.query(`
                   INSERT INTO pipelines VALUES (
                       '${T.id}', 
                       '${T.projectId}', 
                       '${T.name.replace(/'/g,"''")}', 
                       ${G}, 
                       ${T.createdAt}, 
                       '${A}', 
                       '${le}'
                   )
               `);for(const B of T.services){const o=JSON.stringify(B.attributes).replace(/'/g,"''"),i=B.group?`'${B.group}'`:"NULL";await this.conn.query(`
                       INSERT INTO nodes VALUES (
                           '${B.id}',
                           '${T.id}',
                           '${B.name.replace(/'/g,"''")}',
                           '${B.type}',
                           ${i},
                           ${B.isExperimental},
                           '${o}'
                       )
                   `)}}this.invalidateCache(),console.log("Import successful")}catch(t){throw console.error("Import failed",t),new Error("Invalid Import JSON")}}async restoreSnapshot(e){this.conn&&(await this.conn.query("DELETE FROM nodes"),await this.conn.query("DELETE FROM pipelines"),await this.conn.query("DELETE FROM projects"),this.invalidateCache(),await this.importProject(e))}async saveFork(e){if(!this.conn)return;const t=e,r=JSON.stringify(t.container).replace(/'/g,"''"),u=JSON.stringify(t.predicates).replace(/'/g,"''"),T=t.parentId?`'${t.parentId}'`:"NULL";await this.conn.query(`
        INSERT INTO pipelines VALUES (
            '${t.id}', 
            '${t.projectId}', 
            '${t.name.replace(/'/g,"''")}', 
            ${T}, 
            ${t.createdAt}, 
            '${r}', 
            '${u}'
        )
      `);for(const A of t.services){const le=JSON.stringify(A.attributes).replace(/'/g,"''"),G=A.group?`'${A.group}'`:"NULL";await this.conn.query(`
            INSERT INTO nodes VALUES (
                '${A.id}',
                '${t.id}',
                '${A.name.replace(/'/g,"''")}',
                '${A.type}',
                ${G},
                ${A.isExperimental},
                '${le}'
            )
        `)}const d=this.cache.get(t.projectId)||[];this.cache.set(t.projectId,[...d,t]),this.notify()}}const db=DBManager.getInstance();function max$1(n,e){let t;if(e===void 0)for(const r of n)r!=null&&(t<r||t===void 0&&r>=r)&&(t=r);else{let r=-1;for(let u of n)(u=e(u,++r,n))!=null&&(t<u||t===void 0&&u>=u)&&(t=u)}return t}function min$1(n,e){let t;if(e===void 0)for(const r of n)r!=null&&(t>r||t===void 0&&r>=r)&&(t=r);else{let r=-1;for(let u of n)(u=e(u,++r,n))!=null&&(t>u||t===void 0&&u>=u)&&(t=u)}return t}function mean$1(n,e){let t=0,r=0;if(e===void 0)for(let u of n)u!=null&&(u=+u)>=u&&(++t,r+=u);else{let u=-1;for(let T of n)(T=e(T,++u,n))!=null&&(T=+T)>=T&&(++t,r+=T)}if(t)return r/t}var noop={value:()=>{}};function dispatch(){for(var n=0,e=arguments.length,t={},r;n<e;++n){if(!(r=arguments[n]+"")||r in t||/[\s.]/.test(r))throw new Error("illegal type: "+r);t[r]=[]}return new Dispatch(t)}function Dispatch(n){this._=n}function parseTypenames$1(n,e){return n.trim().split(/^|\s+/).map(function(t){var r="",u=t.indexOf(".");if(u>=0&&(r=t.slice(u+1),t=t.slice(0,u)),t&&!e.hasOwnProperty(t))throw new Error("unknown type: "+t);return{type:t,name:r}})}Dispatch.prototype=dispatch.prototype={constructor:Dispatch,on:function(n,e){var t=this._,r=parseTypenames$1(n+"",t),u,T=-1,d=r.length;if(arguments.length<2){for(;++T<d;)if((u=(n=r[T]).type)&&(u=get$1(t[u],n.name)))return u;return}if(e!=null&&typeof e!="function")throw new Error("invalid callback: "+e);for(;++T<d;)if(u=(n=r[T]).type)t[u]=set$1(t[u],n.name,e);else if(e==null)for(u in t)t[u]=set$1(t[u],n.name,null);return this},copy:function(){var n={},e=this._;for(var t in e)n[t]=e[t].slice();return new Dispatch(n)},call:function(n,e){if((u=arguments.length-2)>0)for(var t=new Array(u),r=0,u,T;r<u;++r)t[r]=arguments[r+2];if(!this._.hasOwnProperty(n))throw new Error("unknown type: "+n);for(T=this._[n],r=0,u=T.length;r<u;++r)T[r].value.apply(e,t)},apply:function(n,e,t){if(!this._.hasOwnProperty(n))throw new Error("unknown type: "+n);for(var r=this._[n],u=0,T=r.length;u<T;++u)r[u].value.apply(e,t)}};function get$1(n,e){for(var t=0,r=n.length,u;t<r;++t)if((u=n[t]).name===e)return u.value}function set$1(n,e,t){for(var r=0,u=n.length;r<u;++r)if(n[r].name===e){n[r]=noop,n=n.slice(0,r).concat(n.slice(r+1));break}return t!=null&&n.push({name:e,value:t}),n}var xhtml="http://www.w3.org/1999/xhtml";const namespaces={svg:"http://www.w3.org/2000/svg",xhtml,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function namespace(n){var e=n+="",t=e.indexOf(":");return t>=0&&(e=n.slice(0,t))!=="xmlns"&&(n=n.slice(t+1)),namespaces.hasOwnProperty(e)?{space:namespaces[e],local:n}:n}function creatorInherit(n){return function(){var e=this.ownerDocument,t=this.namespaceURI;return t===xhtml&&e.documentElement.namespaceURI===xhtml?e.createElement(n):e.createElementNS(t,n)}}function creatorFixed(n){return function(){return this.ownerDocument.createElementNS(n.space,n.local)}}function creator(n){var e=namespace(n);return(e.local?creatorFixed:creatorInherit)(e)}function none(){}function selector(n){return n==null?none:function(){return this.querySelector(n)}}function selection_select(n){typeof n!="function"&&(n=selector(n));for(var e=this._groups,t=e.length,r=new Array(t),u=0;u<t;++u)for(var T=e[u],d=T.length,A=r[u]=new Array(d),le,G,B=0;B<d;++B)(le=T[B])&&(G=n.call(le,le.__data__,B,T))&&("__data__"in le&&(G.__data__=le.__data__),A[B]=G);return new Selection$1(r,this._parents)}function array(n){return n==null?[]:Array.isArray(n)?n:Array.from(n)}function empty(){return[]}function selectorAll(n){return n==null?empty:function(){return this.querySelectorAll(n)}}function arrayAll(n){return function(){return array(n.apply(this,arguments))}}function selection_selectAll(n){typeof n=="function"?n=arrayAll(n):n=selectorAll(n);for(var e=this._groups,t=e.length,r=[],u=[],T=0;T<t;++T)for(var d=e[T],A=d.length,le,G=0;G<A;++G)(le=d[G])&&(r.push(n.call(le,le.__data__,G,d)),u.push(le));return new Selection$1(r,u)}function matcher(n){return function(){return this.matches(n)}}function childMatcher(n){return function(e){return e.matches(n)}}var find$1=Array.prototype.find;function childFind(n){return function(){return find$1.call(this.children,n)}}function childFirst(){return this.firstElementChild}function selection_selectChild(n){return this.select(n==null?childFirst:childFind(typeof n=="function"?n:childMatcher(n)))}var filter=Array.prototype.filter;function children(){return Array.from(this.children)}function childrenFilter(n){return function(){return filter.call(this.children,n)}}function selection_selectChildren(n){return this.selectAll(n==null?children:childrenFilter(typeof n=="function"?n:childMatcher(n)))}function selection_filter(n){typeof n!="function"&&(n=matcher(n));for(var e=this._groups,t=e.length,r=new Array(t),u=0;u<t;++u)for(var T=e[u],d=T.length,A=r[u]=[],le,G=0;G<d;++G)(le=T[G])&&n.call(le,le.__data__,G,T)&&A.push(le);return new Selection$1(r,this._parents)}function sparse(n){return new Array(n.length)}function selection_enter(){return new Selection$1(this._enter||this._groups.map(sparse),this._parents)}function EnterNode(n,e){this.ownerDocument=n.ownerDocument,this.namespaceURI=n.namespaceURI,this._next=null,this._parent=n,this.__data__=e}EnterNode.prototype={constructor:EnterNode,appendChild:function(n){return this._parent.insertBefore(n,this._next)},insertBefore:function(n,e){return this._parent.insertBefore(n,e)},querySelector:function(n){return this._parent.querySelector(n)},querySelectorAll:function(n){return this._parent.querySelectorAll(n)}};function constant$4(n){return function(){return n}}function bindIndex(n,e,t,r,u,T){for(var d=0,A,le=e.length,G=T.length;d<G;++d)(A=e[d])?(A.__data__=T[d],r[d]=A):t[d]=new EnterNode(n,T[d]);for(;d<le;++d)(A=e[d])&&(u[d]=A)}function bindKey(n,e,t,r,u,T,d){var A,le,G=new Map,B=e.length,o=T.length,i=new Array(B),w;for(A=0;A<B;++A)(le=e[A])&&(i[A]=w=d.call(le,le.__data__,A,e)+"",G.has(w)?u[A]=le:G.set(w,le));for(A=0;A<o;++A)w=d.call(n,T[A],A,T)+"",(le=G.get(w))?(r[A]=le,le.__data__=T[A],G.delete(w)):t[A]=new EnterNode(n,T[A]);for(A=0;A<B;++A)(le=e[A])&&G.get(i[A])===le&&(u[A]=le)}function datum(n){return n.__data__}function selection_data(n,e){if(!arguments.length)return Array.from(this,datum);var t=e?bindKey:bindIndex,r=this._parents,u=this._groups;typeof n!="function"&&(n=constant$4(n));for(var T=u.length,d=new Array(T),A=new Array(T),le=new Array(T),G=0;G<T;++G){var B=r[G],o=u[G],i=o.length,w=arraylike(n.call(B,B&&B.__data__,G,r)),ae=w.length,ue=A[G]=new Array(ae),he=d[G]=new Array(ae),pe=le[G]=new Array(i);t(B,o,ue,he,pe,w,e);for(var ge=0,be=0,ve,we;ge<ae;++ge)if(ve=ue[ge]){for(ge>=be&&(be=ge+1);!(we=he[be])&&++be<ae;);ve._next=we||null}}return d=new Selection$1(d,r),d._enter=A,d._exit=le,d}function arraylike(n){return typeof n=="object"&&"length"in n?n:Array.from(n)}function selection_exit(){return new Selection$1(this._exit||this._groups.map(sparse),this._parents)}function selection_join(n,e,t){var r=this.enter(),u=this,T=this.exit();return typeof n=="function"?(r=n(r),r&&(r=r.selection())):r=r.append(n+""),e!=null&&(u=e(u),u&&(u=u.selection())),t==null?T.remove():t(T),r&&u?r.merge(u).order():u}function selection_merge(n){for(var e=n.selection?n.selection():n,t=this._groups,r=e._groups,u=t.length,T=r.length,d=Math.min(u,T),A=new Array(u),le=0;le<d;++le)for(var G=t[le],B=r[le],o=G.length,i=A[le]=new Array(o),w,ae=0;ae<o;++ae)(w=G[ae]||B[ae])&&(i[ae]=w);for(;le<u;++le)A[le]=t[le];return new Selection$1(A,this._parents)}function selection_order(){for(var n=this._groups,e=-1,t=n.length;++e<t;)for(var r=n[e],u=r.length-1,T=r[u],d;--u>=0;)(d=r[u])&&(T&&d.compareDocumentPosition(T)^4&&T.parentNode.insertBefore(d,T),T=d);return this}function selection_sort(n){n||(n=ascending);function e(o,i){return o&&i?n(o.__data__,i.__data__):!o-!i}for(var t=this._groups,r=t.length,u=new Array(r),T=0;T<r;++T){for(var d=t[T],A=d.length,le=u[T]=new Array(A),G,B=0;B<A;++B)(G=d[B])&&(le[B]=G);le.sort(e)}return new Selection$1(u,this._parents).order()}function ascending(n,e){return n<e?-1:n>e?1:n>=e?0:NaN}function selection_call(){var n=arguments[0];return arguments[0]=this,n.apply(null,arguments),this}function selection_nodes(){return Array.from(this)}function selection_node(){for(var n=this._groups,e=0,t=n.length;e<t;++e)for(var r=n[e],u=0,T=r.length;u<T;++u){var d=r[u];if(d)return d}return null}function selection_size(){let n=0;for(const e of this)++n;return n}function selection_empty(){return!this.node()}function selection_each(n){for(var e=this._groups,t=0,r=e.length;t<r;++t)for(var u=e[t],T=0,d=u.length,A;T<d;++T)(A=u[T])&&n.call(A,A.__data__,T,u);return this}function attrRemove$1(n){return function(){this.removeAttribute(n)}}function attrRemoveNS$1(n){return function(){this.removeAttributeNS(n.space,n.local)}}function attrConstant$1(n,e){return function(){this.setAttribute(n,e)}}function attrConstantNS$1(n,e){return function(){this.setAttributeNS(n.space,n.local,e)}}function attrFunction$1(n,e){return function(){var t=e.apply(this,arguments);t==null?this.removeAttribute(n):this.setAttribute(n,t)}}function attrFunctionNS$1(n,e){return function(){var t=e.apply(this,arguments);t==null?this.removeAttributeNS(n.space,n.local):this.setAttributeNS(n.space,n.local,t)}}function selection_attr(n,e){var t=namespace(n);if(arguments.length<2){var r=this.node();return t.local?r.getAttributeNS(t.space,t.local):r.getAttribute(t)}return this.each((e==null?t.local?attrRemoveNS$1:attrRemove$1:typeof e=="function"?t.local?attrFunctionNS$1:attrFunction$1:t.local?attrConstantNS$1:attrConstant$1)(t,e))}function defaultView(n){return n.ownerDocument&&n.ownerDocument.defaultView||n.document&&n||n.defaultView}function styleRemove$1(n){return function(){this.style.removeProperty(n)}}function styleConstant$1(n,e,t){return function(){this.style.setProperty(n,e,t)}}function styleFunction$1(n,e,t){return function(){var r=e.apply(this,arguments);r==null?this.style.removeProperty(n):this.style.setProperty(n,r,t)}}function selection_style(n,e,t){return arguments.length>1?this.each((e==null?styleRemove$1:typeof e=="function"?styleFunction$1:styleConstant$1)(n,e,t??"")):styleValue(this.node(),n)}function styleValue(n,e){return n.style.getPropertyValue(e)||defaultView(n).getComputedStyle(n,null).getPropertyValue(e)}function propertyRemove(n){return function(){delete this[n]}}function propertyConstant(n,e){return function(){this[n]=e}}function propertyFunction(n,e){return function(){var t=e.apply(this,arguments);t==null?delete this[n]:this[n]=t}}function selection_property(n,e){return arguments.length>1?this.each((e==null?propertyRemove:typeof e=="function"?propertyFunction:propertyConstant)(n,e)):this.node()[n]}function classArray(n){return n.trim().split(/^|\s+/)}function classList(n){return n.classList||new ClassList(n)}function ClassList(n){this._node=n,this._names=classArray(n.getAttribute("class")||"")}ClassList.prototype={add:function(n){var e=this._names.indexOf(n);e<0&&(this._names.push(n),this._node.setAttribute("class",this._names.join(" ")))},remove:function(n){var e=this._names.indexOf(n);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(n){return this._names.indexOf(n)>=0}};function classedAdd(n,e){for(var t=classList(n),r=-1,u=e.length;++r<u;)t.add(e[r])}function classedRemove(n,e){for(var t=classList(n),r=-1,u=e.length;++r<u;)t.remove(e[r])}function classedTrue(n){return function(){classedAdd(this,n)}}function classedFalse(n){return function(){classedRemove(this,n)}}function classedFunction(n,e){return function(){(e.apply(this,arguments)?classedAdd:classedRemove)(this,n)}}function selection_classed(n,e){var t=classArray(n+"");if(arguments.length<2){for(var r=classList(this.node()),u=-1,T=t.length;++u<T;)if(!r.contains(t[u]))return!1;return!0}return this.each((typeof e=="function"?classedFunction:e?classedTrue:classedFalse)(t,e))}function textRemove(){this.textContent=""}function textConstant$1(n){return function(){this.textContent=n}}function textFunction$1(n){return function(){var e=n.apply(this,arguments);this.textContent=e??""}}function selection_text(n){return arguments.length?this.each(n==null?textRemove:(typeof n=="function"?textFunction$1:textConstant$1)(n)):this.node().textContent}function htmlRemove(){this.innerHTML=""}function htmlConstant(n){return function(){this.innerHTML=n}}function htmlFunction(n){return function(){var e=n.apply(this,arguments);this.innerHTML=e??""}}function selection_html(n){return arguments.length?this.each(n==null?htmlRemove:(typeof n=="function"?htmlFunction:htmlConstant)(n)):this.node().innerHTML}function raise(){this.nextSibling&&this.parentNode.appendChild(this)}function selection_raise(){return this.each(raise)}function lower(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function selection_lower(){return this.each(lower)}function selection_append(n){var e=typeof n=="function"?n:creator(n);return this.select(function(){return this.appendChild(e.apply(this,arguments))})}function constantNull(){return null}function selection_insert(n,e){var t=typeof n=="function"?n:creator(n),r=e==null?constantNull:typeof e=="function"?e:selector(e);return this.select(function(){return this.insertBefore(t.apply(this,arguments),r.apply(this,arguments)||null)})}function remove(){var n=this.parentNode;n&&n.removeChild(this)}function selection_remove(){return this.each(remove)}function selection_cloneShallow(){var n=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(n,this.nextSibling):n}function selection_cloneDeep(){var n=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(n,this.nextSibling):n}function selection_clone(n){return this.select(n?selection_cloneDeep:selection_cloneShallow)}function selection_datum(n){return arguments.length?this.property("__data__",n):this.node().__data__}function contextListener(n){return function(e){n.call(this,e,this.__data__)}}function parseTypenames(n){return n.trim().split(/^|\s+/).map(function(e){var t="",r=e.indexOf(".");return r>=0&&(t=e.slice(r+1),e=e.slice(0,r)),{type:e,name:t}})}function onRemove(n){return function(){var e=this.__on;if(e){for(var t=0,r=-1,u=e.length,T;t<u;++t)T=e[t],(!n.type||T.type===n.type)&&T.name===n.name?this.removeEventListener(T.type,T.listener,T.options):e[++r]=T;++r?e.length=r:delete this.__on}}}function onAdd(n,e,t){return function(){var r=this.__on,u,T=contextListener(e);if(r){for(var d=0,A=r.length;d<A;++d)if((u=r[d]).type===n.type&&u.name===n.name){this.removeEventListener(u.type,u.listener,u.options),this.addEventListener(u.type,u.listener=T,u.options=t),u.value=e;return}}this.addEventListener(n.type,T,t),u={type:n.type,name:n.name,value:e,listener:T,options:t},r?r.push(u):this.__on=[u]}}function selection_on(n,e,t){var r=parseTypenames(n+""),u,T=r.length,d;if(arguments.length<2){var A=this.node().__on;if(A){for(var le=0,G=A.length,B;le<G;++le)for(u=0,B=A[le];u<T;++u)if((d=r[u]).type===B.type&&d.name===B.name)return B.value}return}for(A=e?onAdd:onRemove,u=0;u<T;++u)this.each(A(r[u],e,t));return this}function dispatchEvent(n,e,t){var r=defaultView(n),u=r.CustomEvent;typeof u=="function"?u=new u(e,t):(u=r.document.createEvent("Event"),t?(u.initEvent(e,t.bubbles,t.cancelable),u.detail=t.detail):u.initEvent(e,!1,!1)),n.dispatchEvent(u)}function dispatchConstant(n,e){return function(){return dispatchEvent(this,n,e)}}function dispatchFunction(n,e){return function(){return dispatchEvent(this,n,e.apply(this,arguments))}}function selection_dispatch(n,e){return this.each((typeof e=="function"?dispatchFunction:dispatchConstant)(n,e))}function*selection_iterator(){for(var n=this._groups,e=0,t=n.length;e<t;++e)for(var r=n[e],u=0,T=r.length,d;u<T;++u)(d=r[u])&&(yield d)}var root$1=[null];function Selection$1(n,e){this._groups=n,this._parents=e}function selection(){return new Selection$1([[document.documentElement]],root$1)}function selection_selection(){return this}Selection$1.prototype=selection.prototype={constructor:Selection$1,select:selection_select,selectAll:selection_selectAll,selectChild:selection_selectChild,selectChildren:selection_selectChildren,filter:selection_filter,data:selection_data,enter:selection_enter,exit:selection_exit,join:selection_join,merge:selection_merge,selection:selection_selection,order:selection_order,sort:selection_sort,call:selection_call,nodes:selection_nodes,node:selection_node,size:selection_size,empty:selection_empty,each:selection_each,attr:selection_attr,style:selection_style,property:selection_property,classed:selection_classed,text:selection_text,html:selection_html,raise:selection_raise,lower:selection_lower,append:selection_append,insert:selection_insert,remove:selection_remove,clone:selection_clone,datum:selection_datum,on:selection_on,dispatch:selection_dispatch,[Symbol.iterator]:selection_iterator};function select(n){return typeof n=="string"?new Selection$1([[document.querySelector(n)]],[document.documentElement]):new Selection$1([[n]],root$1)}function sourceEvent(n){let e;for(;e=n.sourceEvent;)n=e;return n}function pointer(n,e){if(n=sourceEvent(n),e===void 0&&(e=n.currentTarget),e){var t=e.ownerSVGElement||e;if(t.createSVGPoint){var r=t.createSVGPoint();return r.x=n.clientX,r.y=n.clientY,r=r.matrixTransform(e.getScreenCTM().inverse()),[r.x,r.y]}if(e.getBoundingClientRect){var u=e.getBoundingClientRect();return[n.clientX-u.left-e.clientLeft,n.clientY-u.top-e.clientTop]}}return[n.pageX,n.pageY]}const nonpassive={passive:!1},nonpassivecapture={capture:!0,passive:!1};function nopropagation$1(n){n.stopImmediatePropagation()}function noevent$1(n){n.preventDefault(),n.stopImmediatePropagation()}function dragDisable(n){var e=n.document.documentElement,t=select(n).on("dragstart.drag",noevent$1,nonpassivecapture);"onselectstart"in e?t.on("selectstart.drag",noevent$1,nonpassivecapture):(e.__noselect=e.style.MozUserSelect,e.style.MozUserSelect="none")}function yesdrag(n,e){var t=n.document.documentElement,r=select(n).on("dragstart.drag",null);e&&(r.on("click.drag",noevent$1,nonpassivecapture),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in t?r.on("selectstart.drag",null):(t.style.MozUserSelect=t.__noselect,delete t.__noselect)}const constant$3=n=>()=>n;function DragEvent(n,{sourceEvent:e,subject:t,target:r,identifier:u,active:T,x:d,y:A,dx:le,dy:G,dispatch:B}){Object.defineProperties(this,{type:{value:n,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},subject:{value:t,enumerable:!0,configurable:!0},target:{value:r,enumerable:!0,configurable:!0},identifier:{value:u,enumerable:!0,configurable:!0},active:{value:T,enumerable:!0,configurable:!0},x:{value:d,enumerable:!0,configurable:!0},y:{value:A,enumerable:!0,configurable:!0},dx:{value:le,enumerable:!0,configurable:!0},dy:{value:G,enumerable:!0,configurable:!0},_:{value:B}})}DragEvent.prototype.on=function(){var n=this._.on.apply(this._,arguments);return n===this._?this:n};function defaultFilter$1(n){return!n.ctrlKey&&!n.button}function defaultContainer(){return this.parentNode}function defaultSubject(n,e){return e??{x:n.x,y:n.y}}function defaultTouchable$1(){return navigator.maxTouchPoints||"ontouchstart"in this}function drag(){var n=defaultFilter$1,e=defaultContainer,t=defaultSubject,r=defaultTouchable$1,u={},T=dispatch("start","drag","end"),d=0,A,le,G,B,o=0;function i(ve){ve.on("mousedown.drag",w).filter(r).on("touchstart.drag",he).on("touchmove.drag",pe,nonpassive).on("touchend.drag touchcancel.drag",ge).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function w(ve,we){if(!(B||!n.call(this,ve,we))){var Se=be(this,e.call(this,ve,we),ve,we,"mouse");Se&&(select(ve.view).on("mousemove.drag",ae,nonpassivecapture).on("mouseup.drag",ue,nonpassivecapture),dragDisable(ve.view),nopropagation$1(ve),G=!1,A=ve.clientX,le=ve.clientY,Se("start",ve))}}function ae(ve){if(noevent$1(ve),!G){var we=ve.clientX-A,Se=ve.clientY-le;G=we*we+Se*Se>o}u.mouse("drag",ve)}function ue(ve){select(ve.view).on("mousemove.drag mouseup.drag",null),yesdrag(ve.view,G),noevent$1(ve),u.mouse("end",ve)}function he(ve,we){if(n.call(this,ve,we)){var Se=ve.changedTouches,Ae=e.call(this,ve,we),Re=Se.length,Te,Ce;for(Te=0;Te<Re;++Te)(Ce=be(this,Ae,ve,we,Se[Te].identifier,Se[Te]))&&(nopropagation$1(ve),Ce("start",ve,Se[Te]))}}function pe(ve){var we=ve.changedTouches,Se=we.length,Ae,Re;for(Ae=0;Ae<Se;++Ae)(Re=u[we[Ae].identifier])&&(noevent$1(ve),Re("drag",ve,we[Ae]))}function ge(ve){var we=ve.changedTouches,Se=we.length,Ae,Re;for(B&&clearTimeout(B),B=setTimeout(function(){B=null},500),Ae=0;Ae<Se;++Ae)(Re=u[we[Ae].identifier])&&(nopropagation$1(ve),Re("end",ve,we[Ae]))}function be(ve,we,Se,Ae,Re,Te){var Ce=T.copy(),Ve=pointer(Te||Se,we),$e,He,De;if((De=t.call(ve,new DragEvent("beforestart",{sourceEvent:Se,target:i,identifier:Re,active:d,x:Ve[0],y:Ve[1],dx:0,dy:0,dispatch:Ce}),Ae))!=null)return $e=De.x-Ve[0]||0,He=De.y-Ve[1]||0,function Xe(Me,je,it){var Ke=Ve,qe;switch(Me){case"start":u[Re]=Xe,qe=d++;break;case"end":delete u[Re],--d;case"drag":Ve=pointer(it||je,we),qe=d;break}Ce.call(Me,ve,new DragEvent(Me,{sourceEvent:je,subject:De,target:i,identifier:Re,active:qe,x:Ve[0]+$e,y:Ve[1]+He,dx:Ve[0]-Ke[0],dy:Ve[1]-Ke[1],dispatch:Ce}),Ae)}}return i.filter=function(ve){return arguments.length?(n=typeof ve=="function"?ve:constant$3(!!ve),i):n},i.container=function(ve){return arguments.length?(e=typeof ve=="function"?ve:constant$3(ve),i):e},i.subject=function(ve){return arguments.length?(t=typeof ve=="function"?ve:constant$3(ve),i):t},i.touchable=function(ve){return arguments.length?(r=typeof ve=="function"?ve:constant$3(!!ve),i):r},i.on=function(){var ve=T.on.apply(T,arguments);return ve===T?i:ve},i.clickDistance=function(ve){return arguments.length?(o=(ve=+ve)*ve,i):Math.sqrt(o)},i}function define(n,e,t){n.prototype=e.prototype=t,t.constructor=n}function extend(n,e){var t=Object.create(n.prototype);for(var r in e)t[r]=e[r];return t}function Color(){}var darker=.7,brighter=1/darker,reI="\\s*([+-]?\\d+)\\s*",reN="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",reP="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",reHex=/^#([0-9a-f]{3,8})$/,reRgbInteger=new RegExp(`^rgb\\(${reI},${reI},${reI}\\)$`),reRgbPercent=new RegExp(`^rgb\\(${reP},${reP},${reP}\\)$`),reRgbaInteger=new RegExp(`^rgba\\(${reI},${reI},${reI},${reN}\\)$`),reRgbaPercent=new RegExp(`^rgba\\(${reP},${reP},${reP},${reN}\\)$`),reHslPercent=new RegExp(`^hsl\\(${reN},${reP},${reP}\\)$`),reHslaPercent=new RegExp(`^hsla\\(${reN},${reP},${reP},${reN}\\)$`),named={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};define(Color,color,{copy(n){return Object.assign(new this.constructor,this,n)},displayable(){return this.rgb().displayable()},hex:color_formatHex,formatHex:color_formatHex,formatHex8:color_formatHex8,formatHsl:color_formatHsl,formatRgb:color_formatRgb,toString:color_formatRgb});function color_formatHex(){return this.rgb().formatHex()}function color_formatHex8(){return this.rgb().formatHex8()}function color_formatHsl(){return hslConvert(this).formatHsl()}function color_formatRgb(){return this.rgb().formatRgb()}function color(n){var e,t;return n=(n+"").trim().toLowerCase(),(e=reHex.exec(n))?(t=e[1].length,e=parseInt(e[1],16),t===6?rgbn(e):t===3?new Rgb(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):t===8?rgba(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):t===4?rgba(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=reRgbInteger.exec(n))?new Rgb(e[1],e[2],e[3],1):(e=reRgbPercent.exec(n))?new Rgb(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=reRgbaInteger.exec(n))?rgba(e[1],e[2],e[3],e[4]):(e=reRgbaPercent.exec(n))?rgba(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=reHslPercent.exec(n))?hsla(e[1],e[2]/100,e[3]/100,1):(e=reHslaPercent.exec(n))?hsla(e[1],e[2]/100,e[3]/100,e[4]):named.hasOwnProperty(n)?rgbn(named[n]):n==="transparent"?new Rgb(NaN,NaN,NaN,0):null}function rgbn(n){return new Rgb(n>>16&255,n>>8&255,n&255,1)}function rgba(n,e,t,r){return r<=0&&(n=e=t=NaN),new Rgb(n,e,t,r)}function rgbConvert(n){return n instanceof Color||(n=color(n)),n?(n=n.rgb(),new Rgb(n.r,n.g,n.b,n.opacity)):new Rgb}function rgb(n,e,t,r){return arguments.length===1?rgbConvert(n):new Rgb(n,e,t,r??1)}function Rgb(n,e,t,r){this.r=+n,this.g=+e,this.b=+t,this.opacity=+r}define(Rgb,rgb,extend(Color,{brighter(n){return n=n==null?brighter:Math.pow(brighter,n),new Rgb(this.r*n,this.g*n,this.b*n,this.opacity)},darker(n){return n=n==null?darker:Math.pow(darker,n),new Rgb(this.r*n,this.g*n,this.b*n,this.opacity)},rgb(){return this},clamp(){return new Rgb(clampi(this.r),clampi(this.g),clampi(this.b),clampa(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:rgb_formatHex,formatHex:rgb_formatHex,formatHex8:rgb_formatHex8,formatRgb:rgb_formatRgb,toString:rgb_formatRgb}));function rgb_formatHex(){return`#${hex(this.r)}${hex(this.g)}${hex(this.b)}`}function rgb_formatHex8(){return`#${hex(this.r)}${hex(this.g)}${hex(this.b)}${hex((isNaN(this.opacity)?1:this.opacity)*255)}`}function rgb_formatRgb(){const n=clampa(this.opacity);return`${n===1?"rgb(":"rgba("}${clampi(this.r)}, ${clampi(this.g)}, ${clampi(this.b)}${n===1?")":`, ${n})`}`}function clampa(n){return isNaN(n)?1:Math.max(0,Math.min(1,n))}function clampi(n){return Math.max(0,Math.min(255,Math.round(n)||0))}function hex(n){return n=clampi(n),(n<16?"0":"")+n.toString(16)}function hsla(n,e,t,r){return r<=0?n=e=t=NaN:t<=0||t>=1?n=e=NaN:e<=0&&(n=NaN),new Hsl(n,e,t,r)}function hslConvert(n){if(n instanceof Hsl)return new Hsl(n.h,n.s,n.l,n.opacity);if(n instanceof Color||(n=color(n)),!n)return new Hsl;if(n instanceof Hsl)return n;n=n.rgb();var e=n.r/255,t=n.g/255,r=n.b/255,u=Math.min(e,t,r),T=Math.max(e,t,r),d=NaN,A=T-u,le=(T+u)/2;return A?(e===T?d=(t-r)/A+(t<r)*6:t===T?d=(r-e)/A+2:d=(e-t)/A+4,A/=le<.5?T+u:2-T-u,d*=60):A=le>0&&le<1?0:d,new Hsl(d,A,le,n.opacity)}function hsl(n,e,t,r){return arguments.length===1?hslConvert(n):new Hsl(n,e,t,r??1)}function Hsl(n,e,t,r){this.h=+n,this.s=+e,this.l=+t,this.opacity=+r}define(Hsl,hsl,extend(Color,{brighter(n){return n=n==null?brighter:Math.pow(brighter,n),new Hsl(this.h,this.s,this.l*n,this.opacity)},darker(n){return n=n==null?darker:Math.pow(darker,n),new Hsl(this.h,this.s,this.l*n,this.opacity)},rgb(){var n=this.h%360+(this.h<0)*360,e=isNaN(n)||isNaN(this.s)?0:this.s,t=this.l,r=t+(t<.5?t:1-t)*e,u=2*t-r;return new Rgb(hsl2rgb(n>=240?n-240:n+120,u,r),hsl2rgb(n,u,r),hsl2rgb(n<120?n+240:n-120,u,r),this.opacity)},clamp(){return new Hsl(clamph(this.h),clampt(this.s),clampt(this.l),clampa(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const n=clampa(this.opacity);return`${n===1?"hsl(":"hsla("}${clamph(this.h)}, ${clampt(this.s)*100}%, ${clampt(this.l)*100}%${n===1?")":`, ${n})`}`}}));function clamph(n){return n=(n||0)%360,n<0?n+360:n}function clampt(n){return Math.max(0,Math.min(1,n||0))}function hsl2rgb(n,e,t){return(n<60?e+(t-e)*n/60:n<180?t:n<240?e+(t-e)*(240-n)/60:e)*255}const constant$2=n=>()=>n;function linear(n,e){return function(t){return n+t*e}}function exponential(n,e,t){return n=Math.pow(n,t),e=Math.pow(e,t)-n,t=1/t,function(r){return Math.pow(n+r*e,t)}}function gamma(n){return(n=+n)==1?nogamma:function(e,t){return t-e?exponential(e,t,n):constant$2(isNaN(e)?t:e)}}function nogamma(n,e){var t=e-n;return t?linear(n,t):constant$2(isNaN(n)?e:n)}const interpolateRgb=(function n(e){var t=gamma(e);function r(u,T){var d=t((u=rgb(u)).r,(T=rgb(T)).r),A=t(u.g,T.g),le=t(u.b,T.b),G=nogamma(u.opacity,T.opacity);return function(B){return u.r=d(B),u.g=A(B),u.b=le(B),u.opacity=G(B),u+""}}return r.gamma=n,r})(1);function interpolateNumber(n,e){return n=+n,e=+e,function(t){return n*(1-t)+e*t}}var reA=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,reB=new RegExp(reA.source,"g");function zero(n){return function(){return n}}function one(n){return function(e){return n(e)+""}}function interpolateString(n,e){var t=reA.lastIndex=reB.lastIndex=0,r,u,T,d=-1,A=[],le=[];for(n=n+"",e=e+"";(r=reA.exec(n))&&(u=reB.exec(e));)(T=u.index)>t&&(T=e.slice(t,T),A[d]?A[d]+=T:A[++d]=T),(r=r[0])===(u=u[0])?A[d]?A[d]+=u:A[++d]=u:(A[++d]=null,le.push({i:d,x:interpolateNumber(r,u)})),t=reB.lastIndex;return t<e.length&&(T=e.slice(t),A[d]?A[d]+=T:A[++d]=T),A.length<2?le[0]?one(le[0].x):zero(e):(e=le.length,function(G){for(var B=0,o;B<e;++B)A[(o=le[B]).i]=o.x(G);return A.join("")})}var degrees=180/Math.PI,identity$1={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function decompose(n,e,t,r,u,T){var d,A,le;return(d=Math.sqrt(n*n+e*e))&&(n/=d,e/=d),(le=n*t+e*r)&&(t-=n*le,r-=e*le),(A=Math.sqrt(t*t+r*r))&&(t/=A,r/=A,le/=A),n*r<e*t&&(n=-n,e=-e,le=-le,d=-d),{translateX:u,translateY:T,rotate:Math.atan2(e,n)*degrees,skewX:Math.atan(le)*degrees,scaleX:d,scaleY:A}}var svgNode;function parseCss(n){const e=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(n+"");return e.isIdentity?identity$1:decompose(e.a,e.b,e.c,e.d,e.e,e.f)}function parseSvg(n){return n==null||(svgNode||(svgNode=document.createElementNS("http://www.w3.org/2000/svg","g")),svgNode.setAttribute("transform",n),!(n=svgNode.transform.baseVal.consolidate()))?identity$1:(n=n.matrix,decompose(n.a,n.b,n.c,n.d,n.e,n.f))}function interpolateTransform(n,e,t,r){function u(G){return G.length?G.pop()+" ":""}function T(G,B,o,i,w,ae){if(G!==o||B!==i){var ue=w.push("translate(",null,e,null,t);ae.push({i:ue-4,x:interpolateNumber(G,o)},{i:ue-2,x:interpolateNumber(B,i)})}else(o||i)&&w.push("translate("+o+e+i+t)}function d(G,B,o,i){G!==B?(G-B>180?B+=360:B-G>180&&(G+=360),i.push({i:o.push(u(o)+"rotate(",null,r)-2,x:interpolateNumber(G,B)})):B&&o.push(u(o)+"rotate("+B+r)}function A(G,B,o,i){G!==B?i.push({i:o.push(u(o)+"skewX(",null,r)-2,x:interpolateNumber(G,B)}):B&&o.push(u(o)+"skewX("+B+r)}function le(G,B,o,i,w,ae){if(G!==o||B!==i){var ue=w.push(u(w)+"scale(",null,",",null,")");ae.push({i:ue-4,x:interpolateNumber(G,o)},{i:ue-2,x:interpolateNumber(B,i)})}else(o!==1||i!==1)&&w.push(u(w)+"scale("+o+","+i+")")}return function(G,B){var o=[],i=[];return G=n(G),B=n(B),T(G.translateX,G.translateY,B.translateX,B.translateY,o,i),d(G.rotate,B.rotate,o,i),A(G.skewX,B.skewX,o,i),le(G.scaleX,G.scaleY,B.scaleX,B.scaleY,o,i),G=B=null,function(w){for(var ae=-1,ue=i.length,he;++ae<ue;)o[(he=i[ae]).i]=he.x(w);return o.join("")}}}var interpolateTransformCss=interpolateTransform(parseCss,"px, ","px)","deg)"),interpolateTransformSvg=interpolateTransform(parseSvg,", ",")",")"),epsilon2=1e-12;function cosh(n){return((n=Math.exp(n))+1/n)/2}function sinh(n){return((n=Math.exp(n))-1/n)/2}function tanh(n){return((n=Math.exp(2*n))-1)/(n+1)}const interpolateZoom=(function n(e,t,r){function u(T,d){var A=T[0],le=T[1],G=T[2],B=d[0],o=d[1],i=d[2],w=B-A,ae=o-le,ue=w*w+ae*ae,he,pe;if(ue<epsilon2)pe=Math.log(i/G)/e,he=function(Ae){return[A+Ae*w,le+Ae*ae,G*Math.exp(e*Ae*pe)]};else{var ge=Math.sqrt(ue),be=(i*i-G*G+r*ue)/(2*G*t*ge),ve=(i*i-G*G-r*ue)/(2*i*t*ge),we=Math.log(Math.sqrt(be*be+1)-be),Se=Math.log(Math.sqrt(ve*ve+1)-ve);pe=(Se-we)/e,he=function(Ae){var Re=Ae*pe,Te=cosh(we),Ce=G/(t*ge)*(Te*tanh(e*Re+we)-sinh(we));return[A+Ce*w,le+Ce*ae,G*Te/cosh(e*Re+we)]}}return he.duration=pe*1e3*e/Math.SQRT2,he}return u.rho=function(T){var d=Math.max(.001,+T),A=d*d,le=A*A;return n(d,A,le)},u})(Math.SQRT2,2,4);var frame=0,timeout$1=0,interval=0,pokeDelay=1e3,taskHead,taskTail,clockLast=0,clockNow=0,clockSkew=0,clock=typeof performance=="object"&&performance.now?performance:Date,setFrame=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(n){setTimeout(n,17)};function now(){return clockNow||(setFrame(clearNow),clockNow=clock.now()+clockSkew)}function clearNow(){clockNow=0}function Timer(){this._call=this._time=this._next=null}Timer.prototype=timer.prototype={constructor:Timer,restart:function(n,e,t){if(typeof n!="function")throw new TypeError("callback is not a function");t=(t==null?now():+t)+(e==null?0:+e),!this._next&&taskTail!==this&&(taskTail?taskTail._next=this:taskHead=this,taskTail=this),this._call=n,this._time=t,sleep()},stop:function(){this._call&&(this._call=null,this._time=1/0,sleep())}};function timer(n,e,t){var r=new Timer;return r.restart(n,e,t),r}function timerFlush(){now(),++frame;for(var n=taskHead,e;n;)(e=clockNow-n._time)>=0&&n._call.call(void 0,e),n=n._next;--frame}function wake(){clockNow=(clockLast=clock.now())+clockSkew,frame=timeout$1=0;try{timerFlush()}finally{frame=0,nap(),clockNow=0}}function poke(){var n=clock.now(),e=n-clockLast;e>pokeDelay&&(clockSkew-=e,clockLast=n)}function nap(){for(var n,e=taskHead,t,r=1/0;e;)e._call?(r>e._time&&(r=e._time),n=e,e=e._next):(t=e._next,e._next=null,e=n?n._next=t:taskHead=t);taskTail=n,sleep(r)}function sleep(n){if(!frame){timeout$1&&(timeout$1=clearTimeout(timeout$1));var e=n-clockNow;e>24?(n<1/0&&(timeout$1=setTimeout(wake,n-clock.now()-clockSkew)),interval&&(interval=clearInterval(interval))):(interval||(clockLast=clock.now(),interval=setInterval(poke,pokeDelay)),frame=1,setFrame(wake))}}function timeout(n,e,t){var r=new Timer;return e=e==null?0:+e,r.restart(u=>{r.stop(),n(u+e)},e,t),r}var emptyOn=dispatch("start","end","cancel","interrupt"),emptyTween=[],CREATED=0,SCHEDULED=1,STARTING=2,STARTED=3,RUNNING=4,ENDING=5,ENDED=6;function schedule(n,e,t,r,u,T){var d=n.__transition;if(!d)n.__transition={};else if(t in d)return;create(n,t,{name:e,index:r,group:u,on:emptyOn,tween:emptyTween,time:T.time,delay:T.delay,duration:T.duration,ease:T.ease,timer:null,state:CREATED})}function init(n,e){var t=get(n,e);if(t.state>CREATED)throw new Error("too late; already scheduled");return t}function set(n,e){var t=get(n,e);if(t.state>STARTED)throw new Error("too late; already running");return t}function get(n,e){var t=n.__transition;if(!t||!(t=t[e]))throw new Error("transition not found");return t}function create(n,e,t){var r=n.__transition,u;r[e]=t,t.timer=timer(T,0,t.time);function T(G){t.state=SCHEDULED,t.timer.restart(d,t.delay,t.time),t.delay<=G&&d(G-t.delay)}function d(G){var B,o,i,w;if(t.state!==SCHEDULED)return le();for(B in r)if(w=r[B],w.name===t.name){if(w.state===STARTED)return timeout(d);w.state===RUNNING?(w.state=ENDED,w.timer.stop(),w.on.call("interrupt",n,n.__data__,w.index,w.group),delete r[B]):+B<e&&(w.state=ENDED,w.timer.stop(),w.on.call("cancel",n,n.__data__,w.index,w.group),delete r[B])}if(timeout(function(){t.state===STARTED&&(t.state=RUNNING,t.timer.restart(A,t.delay,t.time),A(G))}),t.state=STARTING,t.on.call("start",n,n.__data__,t.index,t.group),t.state===STARTING){for(t.state=STARTED,u=new Array(i=t.tween.length),B=0,o=-1;B<i;++B)(w=t.tween[B].value.call(n,n.__data__,t.index,t.group))&&(u[++o]=w);u.length=o+1}}function A(G){for(var B=G<t.duration?t.ease.call(null,G/t.duration):(t.timer.restart(le),t.state=ENDING,1),o=-1,i=u.length;++o<i;)u[o].call(n,B);t.state===ENDING&&(t.on.call("end",n,n.__data__,t.index,t.group),le())}function le(){t.state=ENDED,t.timer.stop(),delete r[e];for(var G in r)return;delete n.__transition}}function interrupt(n,e){var t=n.__transition,r,u,T=!0,d;if(t){e=e==null?null:e+"";for(d in t){if((r=t[d]).name!==e){T=!1;continue}u=r.state>STARTING&&r.state<ENDING,r.state=ENDED,r.timer.stop(),r.on.call(u?"interrupt":"cancel",n,n.__data__,r.index,r.group),delete t[d]}T&&delete n.__transition}}function selection_interrupt(n){return this.each(function(){interrupt(this,n)})}function tweenRemove(n,e){var t,r;return function(){var u=set(this,n),T=u.tween;if(T!==t){r=t=T;for(var d=0,A=r.length;d<A;++d)if(r[d].name===e){r=r.slice(),r.splice(d,1);break}}u.tween=r}}function tweenFunction(n,e,t){var r,u;if(typeof t!="function")throw new Error;return function(){var T=set(this,n),d=T.tween;if(d!==r){u=(r=d).slice();for(var A={name:e,value:t},le=0,G=u.length;le<G;++le)if(u[le].name===e){u[le]=A;break}le===G&&u.push(A)}T.tween=u}}function transition_tween(n,e){var t=this._id;if(n+="",arguments.length<2){for(var r=get(this.node(),t).tween,u=0,T=r.length,d;u<T;++u)if((d=r[u]).name===n)return d.value;return null}return this.each((e==null?tweenRemove:tweenFunction)(t,n,e))}function tweenValue(n,e,t){var r=n._id;return n.each(function(){var u=set(this,r);(u.value||(u.value={}))[e]=t.apply(this,arguments)}),function(u){return get(u,r).value[e]}}function interpolate$1(n,e){var t;return(typeof e=="number"?interpolateNumber:e instanceof color?interpolateRgb:(t=color(e))?(e=t,interpolateRgb):interpolateString)(n,e)}function attrRemove(n){return function(){this.removeAttribute(n)}}function attrRemoveNS(n){return function(){this.removeAttributeNS(n.space,n.local)}}function attrConstant(n,e,t){var r,u=t+"",T;return function(){var d=this.getAttribute(n);return d===u?null:d===r?T:T=e(r=d,t)}}function attrConstantNS(n,e,t){var r,u=t+"",T;return function(){var d=this.getAttributeNS(n.space,n.local);return d===u?null:d===r?T:T=e(r=d,t)}}function attrFunction(n,e,t){var r,u,T;return function(){var d,A=t(this),le;return A==null?void this.removeAttribute(n):(d=this.getAttribute(n),le=A+"",d===le?null:d===r&&le===u?T:(u=le,T=e(r=d,A)))}}function attrFunctionNS(n,e,t){var r,u,T;return function(){var d,A=t(this),le;return A==null?void this.removeAttributeNS(n.space,n.local):(d=this.getAttributeNS(n.space,n.local),le=A+"",d===le?null:d===r&&le===u?T:(u=le,T=e(r=d,A)))}}function transition_attr(n,e){var t=namespace(n),r=t==="transform"?interpolateTransformSvg:interpolate$1;return this.attrTween(n,typeof e=="function"?(t.local?attrFunctionNS:attrFunction)(t,r,tweenValue(this,"attr."+n,e)):e==null?(t.local?attrRemoveNS:attrRemove)(t):(t.local?attrConstantNS:attrConstant)(t,r,e))}function attrInterpolate(n,e){return function(t){this.setAttribute(n,e.call(this,t))}}function attrInterpolateNS(n,e){return function(t){this.setAttributeNS(n.space,n.local,e.call(this,t))}}function attrTweenNS(n,e){var t,r;function u(){var T=e.apply(this,arguments);return T!==r&&(t=(r=T)&&attrInterpolateNS(n,T)),t}return u._value=e,u}function attrTween(n,e){var t,r;function u(){var T=e.apply(this,arguments);return T!==r&&(t=(r=T)&&attrInterpolate(n,T)),t}return u._value=e,u}function transition_attrTween(n,e){var t="attr."+n;if(arguments.length<2)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;var r=namespace(n);return this.tween(t,(r.local?attrTweenNS:attrTween)(r,e))}function delayFunction(n,e){return function(){init(this,n).delay=+e.apply(this,arguments)}}function delayConstant(n,e){return e=+e,function(){init(this,n).delay=e}}function transition_delay(n){var e=this._id;return arguments.length?this.each((typeof n=="function"?delayFunction:delayConstant)(e,n)):get(this.node(),e).delay}function durationFunction(n,e){return function(){set(this,n).duration=+e.apply(this,arguments)}}function durationConstant(n,e){return e=+e,function(){set(this,n).duration=e}}function transition_duration(n){var e=this._id;return arguments.length?this.each((typeof n=="function"?durationFunction:durationConstant)(e,n)):get(this.node(),e).duration}function easeConstant(n,e){if(typeof e!="function")throw new Error;return function(){set(this,n).ease=e}}function transition_ease(n){var e=this._id;return arguments.length?this.each(easeConstant(e,n)):get(this.node(),e).ease}function easeVarying(n,e){return function(){var t=e.apply(this,arguments);if(typeof t!="function")throw new Error;set(this,n).ease=t}}function transition_easeVarying(n){if(typeof n!="function")throw new Error;return this.each(easeVarying(this._id,n))}function transition_filter(n){typeof n!="function"&&(n=matcher(n));for(var e=this._groups,t=e.length,r=new Array(t),u=0;u<t;++u)for(var T=e[u],d=T.length,A=r[u]=[],le,G=0;G<d;++G)(le=T[G])&&n.call(le,le.__data__,G,T)&&A.push(le);return new Transition(r,this._parents,this._name,this._id)}function transition_merge(n){if(n._id!==this._id)throw new Error;for(var e=this._groups,t=n._groups,r=e.length,u=t.length,T=Math.min(r,u),d=new Array(r),A=0;A<T;++A)for(var le=e[A],G=t[A],B=le.length,o=d[A]=new Array(B),i,w=0;w<B;++w)(i=le[w]||G[w])&&(o[w]=i);for(;A<r;++A)d[A]=e[A];return new Transition(d,this._parents,this._name,this._id)}function start(n){return(n+"").trim().split(/^|\s+/).every(function(e){var t=e.indexOf(".");return t>=0&&(e=e.slice(0,t)),!e||e==="start"})}function onFunction(n,e,t){var r,u,T=start(e)?init:set;return function(){var d=T(this,n),A=d.on;A!==r&&(u=(r=A).copy()).on(e,t),d.on=u}}function transition_on(n,e){var t=this._id;return arguments.length<2?get(this.node(),t).on.on(n):this.each(onFunction(t,n,e))}function removeFunction(n){return function(){var e=this.parentNode;for(var t in this.__transition)if(+t!==n)return;e&&e.removeChild(this)}}function transition_remove(){return this.on("end.remove",removeFunction(this._id))}function transition_select(n){var e=this._name,t=this._id;typeof n!="function"&&(n=selector(n));for(var r=this._groups,u=r.length,T=new Array(u),d=0;d<u;++d)for(var A=r[d],le=A.length,G=T[d]=new Array(le),B,o,i=0;i<le;++i)(B=A[i])&&(o=n.call(B,B.__data__,i,A))&&("__data__"in B&&(o.__data__=B.__data__),G[i]=o,schedule(G[i],e,t,i,G,get(B,t)));return new Transition(T,this._parents,e,t)}function transition_selectAll(n){var e=this._name,t=this._id;typeof n!="function"&&(n=selectorAll(n));for(var r=this._groups,u=r.length,T=[],d=[],A=0;A<u;++A)for(var le=r[A],G=le.length,B,o=0;o<G;++o)if(B=le[o]){for(var i=n.call(B,B.__data__,o,le),w,ae=get(B,t),ue=0,he=i.length;ue<he;++ue)(w=i[ue])&&schedule(w,e,t,ue,i,ae);T.push(i),d.push(B)}return new Transition(T,d,e,t)}var Selection=selection.prototype.constructor;function transition_selection(){return new Selection(this._groups,this._parents)}function styleNull(n,e){var t,r,u;return function(){var T=styleValue(this,n),d=(this.style.removeProperty(n),styleValue(this,n));return T===d?null:T===t&&d===r?u:u=e(t=T,r=d)}}function styleRemove(n){return function(){this.style.removeProperty(n)}}function styleConstant(n,e,t){var r,u=t+"",T;return function(){var d=styleValue(this,n);return d===u?null:d===r?T:T=e(r=d,t)}}function styleFunction(n,e,t){var r,u,T;return function(){var d=styleValue(this,n),A=t(this),le=A+"";return A==null&&(le=A=(this.style.removeProperty(n),styleValue(this,n))),d===le?null:d===r&&le===u?T:(u=le,T=e(r=d,A))}}function styleMaybeRemove(n,e){var t,r,u,T="style."+e,d="end."+T,A;return function(){var le=set(this,n),G=le.on,B=le.value[T]==null?A||(A=styleRemove(e)):void 0;(G!==t||u!==B)&&(r=(t=G).copy()).on(d,u=B),le.on=r}}function transition_style(n,e,t){var r=(n+="")=="transform"?interpolateTransformCss:interpolate$1;return e==null?this.styleTween(n,styleNull(n,r)).on("end.style."+n,styleRemove(n)):typeof e=="function"?this.styleTween(n,styleFunction(n,r,tweenValue(this,"style."+n,e))).each(styleMaybeRemove(this._id,n)):this.styleTween(n,styleConstant(n,r,e),t).on("end.style."+n,null)}function styleInterpolate(n,e,t){return function(r){this.style.setProperty(n,e.call(this,r),t)}}function styleTween(n,e,t){var r,u;function T(){var d=e.apply(this,arguments);return d!==u&&(r=(u=d)&&styleInterpolate(n,d,t)),r}return T._value=e,T}function transition_styleTween(n,e,t){var r="style."+(n+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(e==null)return this.tween(r,null);if(typeof e!="function")throw new Error;return this.tween(r,styleTween(n,e,t??""))}function textConstant(n){return function(){this.textContent=n}}function textFunction(n){return function(){var e=n(this);this.textContent=e??""}}function transition_text(n){return this.tween("text",typeof n=="function"?textFunction(tweenValue(this,"text",n)):textConstant(n==null?"":n+""))}function textInterpolate(n){return function(e){this.textContent=n.call(this,e)}}function textTween(n){var e,t;function r(){var u=n.apply(this,arguments);return u!==t&&(e=(t=u)&&textInterpolate(u)),e}return r._value=n,r}function transition_textTween(n){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(n==null)return this.tween(e,null);if(typeof n!="function")throw new Error;return this.tween(e,textTween(n))}function transition_transition(){for(var n=this._name,e=this._id,t=newId(),r=this._groups,u=r.length,T=0;T<u;++T)for(var d=r[T],A=d.length,le,G=0;G<A;++G)if(le=d[G]){var B=get(le,e);schedule(le,n,t,G,d,{time:B.time+B.delay+B.duration,delay:0,duration:B.duration,ease:B.ease})}return new Transition(r,this._parents,n,t)}function transition_end(){var n,e,t=this,r=t._id,u=t.size();return new Promise(function(T,d){var A={value:d},le={value:function(){--u===0&&T()}};t.each(function(){var G=set(this,r),B=G.on;B!==n&&(e=(n=B).copy(),e._.cancel.push(A),e._.interrupt.push(A),e._.end.push(le)),G.on=e}),u===0&&T()})}var id=0;function Transition(n,e,t,r){this._groups=n,this._parents=e,this._name=t,this._id=r}function newId(){return++id}var selection_prototype=selection.prototype;Transition.prototype={constructor:Transition,select:transition_select,selectAll:transition_selectAll,selectChild:selection_prototype.selectChild,selectChildren:selection_prototype.selectChildren,filter:transition_filter,merge:transition_merge,selection:transition_selection,transition:transition_transition,call:selection_prototype.call,nodes:selection_prototype.nodes,node:selection_prototype.node,size:selection_prototype.size,empty:selection_prototype.empty,each:selection_prototype.each,on:transition_on,attr:transition_attr,attrTween:transition_attrTween,style:transition_style,styleTween:transition_styleTween,text:transition_text,textTween:transition_textTween,remove:transition_remove,tween:transition_tween,delay:transition_delay,duration:transition_duration,ease:transition_ease,easeVarying:transition_easeVarying,end:transition_end,[Symbol.iterator]:selection_prototype[Symbol.iterator]};function cubicInOut(n){return((n*=2)<=1?n*n*n:(n-=2)*n*n+2)/2}var defaultTiming={time:null,delay:0,duration:250,ease:cubicInOut};function inherit(n,e){for(var t;!(t=n.__transition)||!(t=t[e]);)if(!(n=n.parentNode))throw new Error(`transition ${e} not found`);return t}function selection_transition(n){var e,t;n instanceof Transition?(e=n._id,n=n._name):(e=newId(),(t=defaultTiming).time=now(),n=n==null?null:n+"");for(var r=this._groups,u=r.length,T=0;T<u;++T)for(var d=r[T],A=d.length,le,G=0;G<A;++G)(le=d[G])&&schedule(le,n,e,G,d,t||inherit(le,e));return new Transition(r,this._parents,n,e)}selection.prototype.interrupt=selection_interrupt;selection.prototype.transition=selection_transition;function center(n,e){var t,r=1;n==null&&(n=0),e==null&&(e=0);function u(){var T,d=t.length,A,le=0,G=0;for(T=0;T<d;++T)A=t[T],le+=A.x,G+=A.y;for(le=(le/d-n)*r,G=(G/d-e)*r,T=0;T<d;++T)A=t[T],A.x-=le,A.y-=G}return u.initialize=function(T){t=T},u.x=function(T){return arguments.length?(n=+T,u):n},u.y=function(T){return arguments.length?(e=+T,u):e},u.strength=function(T){return arguments.length?(r=+T,u):r},u}function tree_add(n){const e=+this._x.call(null,n),t=+this._y.call(null,n);return add(this.cover(e,t),e,t,n)}function add(n,e,t,r){if(isNaN(e)||isNaN(t))return n;var u,T=n._root,d={data:r},A=n._x0,le=n._y0,G=n._x1,B=n._y1,o,i,w,ae,ue,he,pe,ge;if(!T)return n._root=d,n;for(;T.length;)if((ue=e>=(o=(A+G)/2))?A=o:G=o,(he=t>=(i=(le+B)/2))?le=i:B=i,u=T,!(T=T[pe=he<<1|ue]))return u[pe]=d,n;if(w=+n._x.call(null,T.data),ae=+n._y.call(null,T.data),e===w&&t===ae)return d.next=T,u?u[pe]=d:n._root=d,n;do u=u?u[pe]=new Array(4):n._root=new Array(4),(ue=e>=(o=(A+G)/2))?A=o:G=o,(he=t>=(i=(le+B)/2))?le=i:B=i;while((pe=he<<1|ue)===(ge=(ae>=i)<<1|w>=o));return u[ge]=T,u[pe]=d,n}function addAll(n){var e,t,r=n.length,u,T,d=new Array(r),A=new Array(r),le=1/0,G=1/0,B=-1/0,o=-1/0;for(t=0;t<r;++t)isNaN(u=+this._x.call(null,e=n[t]))||isNaN(T=+this._y.call(null,e))||(d[t]=u,A[t]=T,u<le&&(le=u),u>B&&(B=u),T<G&&(G=T),T>o&&(o=T));if(le>B||G>o)return this;for(this.cover(le,G).cover(B,o),t=0;t<r;++t)add(this,d[t],A[t],n[t]);return this}function tree_cover(n,e){if(isNaN(n=+n)||isNaN(e=+e))return this;var t=this._x0,r=this._y0,u=this._x1,T=this._y1;if(isNaN(t))u=(t=Math.floor(n))+1,T=(r=Math.floor(e))+1;else{for(var d=u-t||1,A=this._root,le,G;t>n||n>=u||r>e||e>=T;)switch(G=(e<r)<<1|n<t,le=new Array(4),le[G]=A,A=le,d*=2,G){case 0:u=t+d,T=r+d;break;case 1:t=u-d,T=r+d;break;case 2:u=t+d,r=T-d;break;case 3:t=u-d,r=T-d;break}this._root&&this._root.length&&(this._root=A)}return this._x0=t,this._y0=r,this._x1=u,this._y1=T,this}function tree_data(){var n=[];return this.visit(function(e){if(!e.length)do n.push(e.data);while(e=e.next)}),n}function tree_extent(n){return arguments.length?this.cover(+n[0][0],+n[0][1]).cover(+n[1][0],+n[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]}function Quad(n,e,t,r,u){this.node=n,this.x0=e,this.y0=t,this.x1=r,this.y1=u}function tree_find(n,e,t){var r,u=this._x0,T=this._y0,d,A,le,G,B=this._x1,o=this._y1,i=[],w=this._root,ae,ue;for(w&&i.push(new Quad(w,u,T,B,o)),t==null?t=1/0:(u=n-t,T=e-t,B=n+t,o=e+t,t*=t);ae=i.pop();)if(!(!(w=ae.node)||(d=ae.x0)>B||(A=ae.y0)>o||(le=ae.x1)<u||(G=ae.y1)<T))if(w.length){var he=(d+le)/2,pe=(A+G)/2;i.push(new Quad(w[3],he,pe,le,G),new Quad(w[2],d,pe,he,G),new Quad(w[1],he,A,le,pe),new Quad(w[0],d,A,he,pe)),(ue=(e>=pe)<<1|n>=he)&&(ae=i[i.length-1],i[i.length-1]=i[i.length-1-ue],i[i.length-1-ue]=ae)}else{var ge=n-+this._x.call(null,w.data),be=e-+this._y.call(null,w.data),ve=ge*ge+be*be;if(ve<t){var we=Math.sqrt(t=ve);u=n-we,T=e-we,B=n+we,o=e+we,r=w.data}}return r}function tree_remove(n){if(isNaN(B=+this._x.call(null,n))||isNaN(o=+this._y.call(null,n)))return this;var e,t=this._root,r,u,T,d=this._x0,A=this._y0,le=this._x1,G=this._y1,B,o,i,w,ae,ue,he,pe;if(!t)return this;if(t.length)for(;;){if((ae=B>=(i=(d+le)/2))?d=i:le=i,(ue=o>=(w=(A+G)/2))?A=w:G=w,e=t,!(t=t[he=ue<<1|ae]))return this;if(!t.length)break;(e[he+1&3]||e[he+2&3]||e[he+3&3])&&(r=e,pe=he)}for(;t.data!==n;)if(u=t,!(t=t.next))return this;return(T=t.next)&&delete t.next,u?(T?u.next=T:delete u.next,this):e?(T?e[he]=T:delete e[he],(t=e[0]||e[1]||e[2]||e[3])&&t===(e[3]||e[2]||e[1]||e[0])&&!t.length&&(r?r[pe]=t:this._root=t),this):(this._root=T,this)}function removeAll(n){for(var e=0,t=n.length;e<t;++e)this.remove(n[e]);return this}function tree_root(){return this._root}function tree_size(){var n=0;return this.visit(function(e){if(!e.length)do++n;while(e=e.next)}),n}function tree_visit(n){var e=[],t,r=this._root,u,T,d,A,le;for(r&&e.push(new Quad(r,this._x0,this._y0,this._x1,this._y1));t=e.pop();)if(!n(r=t.node,T=t.x0,d=t.y0,A=t.x1,le=t.y1)&&r.length){var G=(T+A)/2,B=(d+le)/2;(u=r[3])&&e.push(new Quad(u,G,B,A,le)),(u=r[2])&&e.push(new Quad(u,T,B,G,le)),(u=r[1])&&e.push(new Quad(u,G,d,A,B)),(u=r[0])&&e.push(new Quad(u,T,d,G,B))}return this}function tree_visitAfter(n){var e=[],t=[],r;for(this._root&&e.push(new Quad(this._root,this._x0,this._y0,this._x1,this._y1));r=e.pop();){var u=r.node;if(u.length){var T,d=r.x0,A=r.y0,le=r.x1,G=r.y1,B=(d+le)/2,o=(A+G)/2;(T=u[0])&&e.push(new Quad(T,d,A,B,o)),(T=u[1])&&e.push(new Quad(T,B,A,le,o)),(T=u[2])&&e.push(new Quad(T,d,o,B,G)),(T=u[3])&&e.push(new Quad(T,B,o,le,G))}t.push(r)}for(;r=t.pop();)n(r.node,r.x0,r.y0,r.x1,r.y1);return this}function defaultX(n){return n[0]}function tree_x(n){return arguments.length?(this._x=n,this):this._x}function defaultY(n){return n[1]}function tree_y(n){return arguments.length?(this._y=n,this):this._y}function quadtree(n,e,t){var r=new Quadtree(e??defaultX,t??defaultY,NaN,NaN,NaN,NaN);return n==null?r:r.addAll(n)}function Quadtree(n,e,t,r,u,T){this._x=n,this._y=e,this._x0=t,this._y0=r,this._x1=u,this._y1=T,this._root=void 0}function leaf_copy(n){for(var e={data:n.data},t=e;n=n.next;)t=t.next={data:n.data};return e}var treeProto=quadtree.prototype=Quadtree.prototype;treeProto.copy=function(){var n=new Quadtree(this._x,this._y,this._x0,this._y0,this._x1,this._y1),e=this._root,t,r;if(!e)return n;if(!e.length)return n._root=leaf_copy(e),n;for(t=[{source:e,target:n._root=new Array(4)}];e=t.pop();)for(var u=0;u<4;++u)(r=e.source[u])&&(r.length?t.push({source:r,target:e.target[u]=new Array(4)}):e.target[u]=leaf_copy(r));return n};treeProto.add=tree_add;treeProto.addAll=addAll;treeProto.cover=tree_cover;treeProto.data=tree_data;treeProto.extent=tree_extent;treeProto.find=tree_find;treeProto.remove=tree_remove;treeProto.removeAll=removeAll;treeProto.root=tree_root;treeProto.size=tree_size;treeProto.visit=tree_visit;treeProto.visitAfter=tree_visitAfter;treeProto.x=tree_x;treeProto.y=tree_y;function constant$1(n){return function(){return n}}function jiggle(n){return(n()-.5)*1e-6}function x$2(n){return n.x+n.vx}function y$2(n){return n.y+n.vy}function collide(n){var e,t,r,u=1,T=1;typeof n!="function"&&(n=constant$1(n==null?1:+n));function d(){for(var G,B=e.length,o,i,w,ae,ue,he,pe=0;pe<T;++pe)for(o=quadtree(e,x$2,y$2).visitAfter(A),G=0;G<B;++G)i=e[G],ue=t[i.index],he=ue*ue,w=i.x+i.vx,ae=i.y+i.vy,o.visit(ge);function ge(be,ve,we,Se,Ae){var Re=be.data,Te=be.r,Ce=ue+Te;if(Re){if(Re.index>i.index){var Ve=w-Re.x-Re.vx,$e=ae-Re.y-Re.vy,He=Ve*Ve+$e*$e;He<Ce*Ce&&(Ve===0&&(Ve=jiggle(r),He+=Ve*Ve),$e===0&&($e=jiggle(r),He+=$e*$e),He=(Ce-(He=Math.sqrt(He)))/He*u,i.vx+=(Ve*=He)*(Ce=(Te*=Te)/(he+Te)),i.vy+=($e*=He)*Ce,Re.vx-=Ve*(Ce=1-Ce),Re.vy-=$e*Ce)}return}return ve>w+Ce||Se<w-Ce||we>ae+Ce||Ae<ae-Ce}}function A(G){if(G.data)return G.r=t[G.data.index];for(var B=G.r=0;B<4;++B)G[B]&&G[B].r>G.r&&(G.r=G[B].r)}function le(){if(e){var G,B=e.length,o;for(t=new Array(B),G=0;G<B;++G)o=e[G],t[o.index]=+n(o,G,e)}}return d.initialize=function(G,B){e=G,r=B,le()},d.iterations=function(G){return arguments.length?(T=+G,d):T},d.strength=function(G){return arguments.length?(u=+G,d):u},d.radius=function(G){return arguments.length?(n=typeof G=="function"?G:constant$1(+G),le(),d):n},d}function index(n){return n.index}function find(n,e){var t=n.get(e);if(!t)throw new Error("node not found: "+e);return t}function link(n){var e=index,t=o,r,u=constant$1(30),T,d,A,le,G,B=1;n==null&&(n=[]);function o(he){return 1/Math.min(A[he.source.index],A[he.target.index])}function i(he){for(var pe=0,ge=n.length;pe<B;++pe)for(var be=0,ve,we,Se,Ae,Re,Te,Ce;be<ge;++be)ve=n[be],we=ve.source,Se=ve.target,Ae=Se.x+Se.vx-we.x-we.vx||jiggle(G),Re=Se.y+Se.vy-we.y-we.vy||jiggle(G),Te=Math.sqrt(Ae*Ae+Re*Re),Te=(Te-T[be])/Te*he*r[be],Ae*=Te,Re*=Te,Se.vx-=Ae*(Ce=le[be]),Se.vy-=Re*Ce,we.vx+=Ae*(Ce=1-Ce),we.vy+=Re*Ce}function w(){if(d){var he,pe=d.length,ge=n.length,be=new Map(d.map((we,Se)=>[e(we,Se,d),we])),ve;for(he=0,A=new Array(pe);he<ge;++he)ve=n[he],ve.index=he,typeof ve.source!="object"&&(ve.source=find(be,ve.source)),typeof ve.target!="object"&&(ve.target=find(be,ve.target)),A[ve.source.index]=(A[ve.source.index]||0)+1,A[ve.target.index]=(A[ve.target.index]||0)+1;for(he=0,le=new Array(ge);he<ge;++he)ve=n[he],le[he]=A[ve.source.index]/(A[ve.source.index]+A[ve.target.index]);r=new Array(ge),ae(),T=new Array(ge),ue()}}function ae(){if(d)for(var he=0,pe=n.length;he<pe;++he)r[he]=+t(n[he],he,n)}function ue(){if(d)for(var he=0,pe=n.length;he<pe;++he)T[he]=+u(n[he],he,n)}return i.initialize=function(he,pe){d=he,G=pe,w()},i.links=function(he){return arguments.length?(n=he,w(),i):n},i.id=function(he){return arguments.length?(e=he,i):e},i.iterations=function(he){return arguments.length?(B=+he,i):B},i.strength=function(he){return arguments.length?(t=typeof he=="function"?he:constant$1(+he),ae(),i):t},i.distance=function(he){return arguments.length?(u=typeof he=="function"?he:constant$1(+he),ue(),i):u},i}const a=1664525,c=1013904223,m=4294967296;function lcg(){let n=1;return()=>(n=(a*n+c)%m)/m}function x$1(n){return n.x}function y$1(n){return n.y}var initialRadius=10,initialAngle=Math.PI*(3-Math.sqrt(5));function simulation(n){var e,t=1,r=.001,u=1-Math.pow(r,1/300),T=0,d=.6,A=new Map,le=timer(o),G=dispatch("tick","end"),B=lcg();n==null&&(n=[]);function o(){i(),G.call("tick",e),t<r&&(le.stop(),G.call("end",e))}function i(ue){var he,pe=n.length,ge;ue===void 0&&(ue=1);for(var be=0;be<ue;++be)for(t+=(T-t)*u,A.forEach(function(ve){ve(t)}),he=0;he<pe;++he)ge=n[he],ge.fx==null?ge.x+=ge.vx*=d:(ge.x=ge.fx,ge.vx=0),ge.fy==null?ge.y+=ge.vy*=d:(ge.y=ge.fy,ge.vy=0);return e}function w(){for(var ue=0,he=n.length,pe;ue<he;++ue){if(pe=n[ue],pe.index=ue,pe.fx!=null&&(pe.x=pe.fx),pe.fy!=null&&(pe.y=pe.fy),isNaN(pe.x)||isNaN(pe.y)){var ge=initialRadius*Math.sqrt(.5+ue),be=ue*initialAngle;pe.x=ge*Math.cos(be),pe.y=ge*Math.sin(be)}(isNaN(pe.vx)||isNaN(pe.vy))&&(pe.vx=pe.vy=0)}}function ae(ue){return ue.initialize&&ue.initialize(n,B),ue}return w(),e={tick:i,restart:function(){return le.restart(o),e},stop:function(){return le.stop(),e},nodes:function(ue){return arguments.length?(n=ue,w(),A.forEach(ae),e):n},alpha:function(ue){return arguments.length?(t=+ue,e):t},alphaMin:function(ue){return arguments.length?(r=+ue,e):r},alphaDecay:function(ue){return arguments.length?(u=+ue,e):+u},alphaTarget:function(ue){return arguments.length?(T=+ue,e):T},velocityDecay:function(ue){return arguments.length?(d=1-ue,e):1-d},randomSource:function(ue){return arguments.length?(B=ue,A.forEach(ae),e):B},force:function(ue,he){return arguments.length>1?(he==null?A.delete(ue):A.set(ue,ae(he)),e):A.get(ue)},find:function(ue,he,pe){var ge=0,be=n.length,ve,we,Se,Ae,Re;for(pe==null?pe=1/0:pe*=pe,ge=0;ge<be;++ge)Ae=n[ge],ve=ue-Ae.x,we=he-Ae.y,Se=ve*ve+we*we,Se<pe&&(Re=Ae,pe=Se);return Re},on:function(ue,he){return arguments.length>1?(G.on(ue,he),e):G.on(ue)}}}function manyBody(){var n,e,t,r,u=constant$1(-30),T,d=1,A=1/0,le=.81;function G(w){var ae,ue=n.length,he=quadtree(n,x$1,y$1).visitAfter(o);for(r=w,ae=0;ae<ue;++ae)e=n[ae],he.visit(i)}function B(){if(n){var w,ae=n.length,ue;for(T=new Array(ae),w=0;w<ae;++w)ue=n[w],T[ue.index]=+u(ue,w,n)}}function o(w){var ae=0,ue,he,pe=0,ge,be,ve;if(w.length){for(ge=be=ve=0;ve<4;++ve)(ue=w[ve])&&(he=Math.abs(ue.value))&&(ae+=ue.value,pe+=he,ge+=he*ue.x,be+=he*ue.y);w.x=ge/pe,w.y=be/pe}else{ue=w,ue.x=ue.data.x,ue.y=ue.data.y;do ae+=T[ue.data.index];while(ue=ue.next)}w.value=ae}function i(w,ae,ue,he){if(!w.value)return!0;var pe=w.x-e.x,ge=w.y-e.y,be=he-ae,ve=pe*pe+ge*ge;if(be*be/le<ve)return ve<A&&(pe===0&&(pe=jiggle(t),ve+=pe*pe),ge===0&&(ge=jiggle(t),ve+=ge*ge),ve<d&&(ve=Math.sqrt(d*ve)),e.vx+=pe*w.value*r/ve,e.vy+=ge*w.value*r/ve),!0;if(w.length||ve>=A)return;(w.data!==e||w.next)&&(pe===0&&(pe=jiggle(t),ve+=pe*pe),ge===0&&(ge=jiggle(t),ve+=ge*ge),ve<d&&(ve=Math.sqrt(d*ve)));do w.data!==e&&(be=T[w.data.index]*r/ve,e.vx+=pe*be,e.vy+=ge*be);while(w=w.next)}return G.initialize=function(w,ae){n=w,t=ae,B()},G.strength=function(w){return arguments.length?(u=typeof w=="function"?w:constant$1(+w),B(),G):u},G.distanceMin=function(w){return arguments.length?(d=w*w,G):Math.sqrt(d)},G.distanceMax=function(w){return arguments.length?(A=w*w,G):Math.sqrt(A)},G.theta=function(w){return arguments.length?(le=w*w,G):Math.sqrt(le)},G}function x(n){var e=constant$1(.1),t,r,u;typeof n!="function"&&(n=constant$1(n==null?0:+n));function T(A){for(var le=0,G=t.length,B;le<G;++le)B=t[le],B.vx+=(u[le]-B.x)*r[le]*A}function d(){if(t){var A,le=t.length;for(r=new Array(le),u=new Array(le),A=0;A<le;++A)r[A]=isNaN(u[A]=+n(t[A],A,t))?0:+e(t[A],A,t)}}return T.initialize=function(A){t=A,d()},T.strength=function(A){return arguments.length?(e=typeof A=="function"?A:constant$1(+A),d(),T):e},T.x=function(A){return arguments.length?(n=typeof A=="function"?A:constant$1(+A),d(),T):n},T}function y(n){var e=constant$1(.1),t,r,u;typeof n!="function"&&(n=constant$1(n==null?0:+n));function T(A){for(var le=0,G=t.length,B;le<G;++le)B=t[le],B.vy+=(u[le]-B.y)*r[le]*A}function d(){if(t){var A,le=t.length;for(r=new Array(le),u=new Array(le),A=0;A<le;++A)r[A]=isNaN(u[A]=+n(t[A],A,t))?0:+e(t[A],A,t)}}return T.initialize=function(A){t=A,d()},T.strength=function(A){return arguments.length?(e=typeof A=="function"?A:constant$1(+A),d(),T):e},T.y=function(A){return arguments.length?(n=typeof A=="function"?A:constant$1(+A),d(),T):n},T}const constant=n=>()=>n;function ZoomEvent(n,{sourceEvent:e,target:t,transform:r,dispatch:u}){Object.defineProperties(this,{type:{value:n,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},target:{value:t,enumerable:!0,configurable:!0},transform:{value:r,enumerable:!0,configurable:!0},_:{value:u}})}function Transform(n,e,t){this.k=n,this.x=e,this.y=t}Transform.prototype={constructor:Transform,scale:function(n){return n===1?this:new Transform(this.k*n,this.x,this.y)},translate:function(n,e){return n===0&e===0?this:new Transform(this.k,this.x+this.k*n,this.y+this.k*e)},apply:function(n){return[n[0]*this.k+this.x,n[1]*this.k+this.y]},applyX:function(n){return n*this.k+this.x},applyY:function(n){return n*this.k+this.y},invert:function(n){return[(n[0]-this.x)/this.k,(n[1]-this.y)/this.k]},invertX:function(n){return(n-this.x)/this.k},invertY:function(n){return(n-this.y)/this.k},rescaleX:function(n){return n.copy().domain(n.range().map(this.invertX,this).map(n.invert,n))},rescaleY:function(n){return n.copy().domain(n.range().map(this.invertY,this).map(n.invert,n))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var identity=new Transform(1,0,0);Transform.prototype;function nopropagation(n){n.stopImmediatePropagation()}function noevent(n){n.preventDefault(),n.stopImmediatePropagation()}function defaultFilter(n){return(!n.ctrlKey||n.type==="wheel")&&!n.button}function defaultExtent(){var n=this;return n instanceof SVGElement?(n=n.ownerSVGElement||n,n.hasAttribute("viewBox")?(n=n.viewBox.baseVal,[[n.x,n.y],[n.x+n.width,n.y+n.height]]):[[0,0],[n.width.baseVal.value,n.height.baseVal.value]]):[[0,0],[n.clientWidth,n.clientHeight]]}function defaultTransform(){return this.__zoom||identity}function defaultWheelDelta(n){return-n.deltaY*(n.deltaMode===1?.05:n.deltaMode?1:.002)*(n.ctrlKey?10:1)}function defaultTouchable(){return navigator.maxTouchPoints||"ontouchstart"in this}function defaultConstrain(n,e,t){var r=n.invertX(e[0][0])-t[0][0],u=n.invertX(e[1][0])-t[1][0],T=n.invertY(e[0][1])-t[0][1],d=n.invertY(e[1][1])-t[1][1];return n.translate(u>r?(r+u)/2:Math.min(0,r)||Math.max(0,u),d>T?(T+d)/2:Math.min(0,T)||Math.max(0,d))}function zoom(){var n=defaultFilter,e=defaultExtent,t=defaultConstrain,r=defaultWheelDelta,u=defaultTouchable,T=[0,1/0],d=[[-1/0,-1/0],[1/0,1/0]],A=250,le=interpolateZoom,G=dispatch("start","zoom","end"),B,o,i,w=500,ae=150,ue=0,he=10;function pe(De){De.property("__zoom",defaultTransform).on("wheel.zoom",Re,{passive:!1}).on("mousedown.zoom",Te).on("dblclick.zoom",Ce).filter(u).on("touchstart.zoom",Ve).on("touchmove.zoom",$e).on("touchend.zoom touchcancel.zoom",He).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}pe.transform=function(De,Xe,Me,je){var it=De.selection?De.selection():De;it.property("__zoom",defaultTransform),De!==it?we(De,Xe,Me,je):it.interrupt().each(function(){Se(this,arguments).event(je).start().zoom(null,typeof Xe=="function"?Xe.apply(this,arguments):Xe).end()})},pe.scaleBy=function(De,Xe,Me,je){pe.scaleTo(De,function(){var it=this.__zoom.k,Ke=typeof Xe=="function"?Xe.apply(this,arguments):Xe;return it*Ke},Me,je)},pe.scaleTo=function(De,Xe,Me,je){pe.transform(De,function(){var it=e.apply(this,arguments),Ke=this.__zoom,qe=Me==null?ve(it):typeof Me=="function"?Me.apply(this,arguments):Me,Pe=Ke.invert(qe),et=typeof Xe=="function"?Xe.apply(this,arguments):Xe;return t(be(ge(Ke,et),qe,Pe),it,d)},Me,je)},pe.translateBy=function(De,Xe,Me,je){pe.transform(De,function(){return t(this.__zoom.translate(typeof Xe=="function"?Xe.apply(this,arguments):Xe,typeof Me=="function"?Me.apply(this,arguments):Me),e.apply(this,arguments),d)},null,je)},pe.translateTo=function(De,Xe,Me,je,it){pe.transform(De,function(){var Ke=e.apply(this,arguments),qe=this.__zoom,Pe=je==null?ve(Ke):typeof je=="function"?je.apply(this,arguments):je;return t(identity.translate(Pe[0],Pe[1]).scale(qe.k).translate(typeof Xe=="function"?-Xe.apply(this,arguments):-Xe,typeof Me=="function"?-Me.apply(this,arguments):-Me),Ke,d)},je,it)};function ge(De,Xe){return Xe=Math.max(T[0],Math.min(T[1],Xe)),Xe===De.k?De:new Transform(Xe,De.x,De.y)}function be(De,Xe,Me){var je=Xe[0]-Me[0]*De.k,it=Xe[1]-Me[1]*De.k;return je===De.x&&it===De.y?De:new Transform(De.k,je,it)}function ve(De){return[(+De[0][0]+ +De[1][0])/2,(+De[0][1]+ +De[1][1])/2]}function we(De,Xe,Me,je){De.on("start.zoom",function(){Se(this,arguments).event(je).start()}).on("interrupt.zoom end.zoom",function(){Se(this,arguments).event(je).end()}).tween("zoom",function(){var it=this,Ke=arguments,qe=Se(it,Ke).event(je),Pe=e.apply(it,Ke),et=Me==null?ve(Pe):typeof Me=="function"?Me.apply(it,Ke):Me,Je=Math.max(Pe[1][0]-Pe[0][0],Pe[1][1]-Pe[0][1]),at=it.__zoom,tt=typeof Xe=="function"?Xe.apply(it,Ke):Xe,Tt=le(at.invert(et).concat(Je/at.k),tt.invert(et).concat(Je/tt.k));return function(vt){if(vt===1)vt=tt;else{var Dt=Tt(vt),Pt=Je/Dt[2];vt=new Transform(Pt,et[0]-Dt[0]*Pt,et[1]-Dt[1]*Pt)}qe.zoom(null,vt)}})}function Se(De,Xe,Me){return!Me&&De.__zooming||new Ae(De,Xe)}function Ae(De,Xe){this.that=De,this.args=Xe,this.active=0,this.sourceEvent=null,this.extent=e.apply(De,Xe),this.taps=0}Ae.prototype={event:function(De){return De&&(this.sourceEvent=De),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(De,Xe){return this.mouse&&De!=="mouse"&&(this.mouse[1]=Xe.invert(this.mouse[0])),this.touch0&&De!=="touch"&&(this.touch0[1]=Xe.invert(this.touch0[0])),this.touch1&&De!=="touch"&&(this.touch1[1]=Xe.invert(this.touch1[0])),this.that.__zoom=Xe,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(De){var Xe=select(this.that).datum();G.call(De,this.that,new ZoomEvent(De,{sourceEvent:this.sourceEvent,target:pe,transform:this.that.__zoom,dispatch:G}),Xe)}};function Re(De,...Xe){if(!n.apply(this,arguments))return;var Me=Se(this,Xe).event(De),je=this.__zoom,it=Math.max(T[0],Math.min(T[1],je.k*Math.pow(2,r.apply(this,arguments)))),Ke=pointer(De);if(Me.wheel)(Me.mouse[0][0]!==Ke[0]||Me.mouse[0][1]!==Ke[1])&&(Me.mouse[1]=je.invert(Me.mouse[0]=Ke)),clearTimeout(Me.wheel);else{if(je.k===it)return;Me.mouse=[Ke,je.invert(Ke)],interrupt(this),Me.start()}noevent(De),Me.wheel=setTimeout(qe,ae),Me.zoom("mouse",t(be(ge(je,it),Me.mouse[0],Me.mouse[1]),Me.extent,d));function qe(){Me.wheel=null,Me.end()}}function Te(De,...Xe){if(i||!n.apply(this,arguments))return;var Me=De.currentTarget,je=Se(this,Xe,!0).event(De),it=select(De.view).on("mousemove.zoom",et,!0).on("mouseup.zoom",Je,!0),Ke=pointer(De,Me),qe=De.clientX,Pe=De.clientY;dragDisable(De.view),nopropagation(De),je.mouse=[Ke,this.__zoom.invert(Ke)],interrupt(this),je.start();function et(at){if(noevent(at),!je.moved){var tt=at.clientX-qe,Tt=at.clientY-Pe;je.moved=tt*tt+Tt*Tt>ue}je.event(at).zoom("mouse",t(be(je.that.__zoom,je.mouse[0]=pointer(at,Me),je.mouse[1]),je.extent,d))}function Je(at){it.on("mousemove.zoom mouseup.zoom",null),yesdrag(at.view,je.moved),noevent(at),je.event(at).end()}}function Ce(De,...Xe){if(n.apply(this,arguments)){var Me=this.__zoom,je=pointer(De.changedTouches?De.changedTouches[0]:De,this),it=Me.invert(je),Ke=Me.k*(De.shiftKey?.5:2),qe=t(be(ge(Me,Ke),je,it),e.apply(this,Xe),d);noevent(De),A>0?select(this).transition().duration(A).call(we,qe,je,De):select(this).call(pe.transform,qe,je,De)}}function Ve(De,...Xe){if(n.apply(this,arguments)){var Me=De.touches,je=Me.length,it=Se(this,Xe,De.changedTouches.length===je).event(De),Ke,qe,Pe,et;for(nopropagation(De),qe=0;qe<je;++qe)Pe=Me[qe],et=pointer(Pe,this),et=[et,this.__zoom.invert(et),Pe.identifier],it.touch0?!it.touch1&&it.touch0[2]!==et[2]&&(it.touch1=et,it.taps=0):(it.touch0=et,Ke=!0,it.taps=1+!!B);B&&(B=clearTimeout(B)),Ke&&(it.taps<2&&(o=et[0],B=setTimeout(function(){B=null},w)),interrupt(this),it.start())}}function $e(De,...Xe){if(this.__zooming){var Me=Se(this,Xe).event(De),je=De.changedTouches,it=je.length,Ke,qe,Pe,et;for(noevent(De),Ke=0;Ke<it;++Ke)qe=je[Ke],Pe=pointer(qe,this),Me.touch0&&Me.touch0[2]===qe.identifier?Me.touch0[0]=Pe:Me.touch1&&Me.touch1[2]===qe.identifier&&(Me.touch1[0]=Pe);if(qe=Me.that.__zoom,Me.touch1){var Je=Me.touch0[0],at=Me.touch0[1],tt=Me.touch1[0],Tt=Me.touch1[1],vt=(vt=tt[0]-Je[0])*vt+(vt=tt[1]-Je[1])*vt,Dt=(Dt=Tt[0]-at[0])*Dt+(Dt=Tt[1]-at[1])*Dt;qe=ge(qe,Math.sqrt(vt/Dt)),Pe=[(Je[0]+tt[0])/2,(Je[1]+tt[1])/2],et=[(at[0]+Tt[0])/2,(at[1]+Tt[1])/2]}else if(Me.touch0)Pe=Me.touch0[0],et=Me.touch0[1];else return;Me.zoom("touch",t(be(qe,Pe,et),Me.extent,d))}}function He(De,...Xe){if(this.__zooming){var Me=Se(this,Xe).event(De),je=De.changedTouches,it=je.length,Ke,qe;for(nopropagation(De),i&&clearTimeout(i),i=setTimeout(function(){i=null},w),Ke=0;Ke<it;++Ke)qe=je[Ke],Me.touch0&&Me.touch0[2]===qe.identifier?delete Me.touch0:Me.touch1&&Me.touch1[2]===qe.identifier&&delete Me.touch1;if(Me.touch1&&!Me.touch0&&(Me.touch0=Me.touch1,delete Me.touch1),Me.touch0)Me.touch0[1]=this.__zoom.invert(Me.touch0[0]);else if(Me.end(),Me.taps===2&&(qe=pointer(qe,this),Math.hypot(o[0]-qe[0],o[1]-qe[1])<he)){var Pe=select(this).on("dblclick.zoom");Pe&&Pe.apply(this,arguments)}}}return pe.wheelDelta=function(De){return arguments.length?(r=typeof De=="function"?De:constant(+De),pe):r},pe.filter=function(De){return arguments.length?(n=typeof De=="function"?De:constant(!!De),pe):n},pe.touchable=function(De){return arguments.length?(u=typeof De=="function"?De:constant(!!De),pe):u},pe.extent=function(De){return arguments.length?(e=typeof De=="function"?De:constant([[+De[0][0],+De[0][1]],[+De[1][0],+De[1][1]]]),pe):e},pe.scaleExtent=function(De){return arguments.length?(T[0]=+De[0],T[1]=+De[1],pe):[T[0],T[1]]},pe.translateExtent=function(De){return arguments.length?(d[0][0]=+De[0][0],d[1][0]=+De[1][0],d[0][1]=+De[0][1],d[1][1]=+De[1][1],pe):[[d[0][0],d[0][1]],[d[1][0],d[1][1]]]},pe.constrain=function(De){return arguments.length?(t=De,pe):t},pe.duration=function(De){return arguments.length?(A=+De,pe):A},pe.interpolate=function(De){return arguments.length?(le=De,pe):le},pe.on=function(){var De=G.on.apply(G,arguments);return De===G?pe:De},pe.clickDistance=function(De){return arguments.length?(ue=(De=+De)*De,pe):Math.sqrt(ue)},pe.tapDistance=function(De){return arguments.length?(he=+De,pe):he},pe}/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const toKebabCase=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),toCamelCase=n=>n.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,r)=>r?r.toUpperCase():t.toLowerCase()),toPascalCase=n=>{const e=toCamelCase(n);return e.charAt(0).toUpperCase()+e.slice(1)},mergeClasses=(...n)=>n.filter((e,t,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===t).join(" ").trim(),hasA11yProp=n=>{for(const e in n)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var defaultAttributes={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Icon=reactExports.forwardRef(({color:n="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:r,className:u="",children:T,iconNode:d,...A},le)=>reactExports.createElement("svg",{ref:le,...defaultAttributes,width:e,height:e,stroke:n,strokeWidth:r?Number(t)*24/Number(e):t,className:mergeClasses("lucide",u),...!T&&!hasA11yProp(A)&&{"aria-hidden":"true"},...A},[...d.map(([G,B])=>reactExports.createElement(G,B)),...Array.isArray(T)?T:[T]]));/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const createLucideIcon=(n,e)=>{const t=reactExports.forwardRef(({className:r,...u},T)=>reactExports.createElement(Icon,{ref:T,iconNode:e,className:mergeClasses(`lucide-${toKebabCase(toPascalCase(n))}`,`lucide-${n}`,r),...u}));return t.displayName=toPascalCase(n),t};/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$H=[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]],Activity=createLucideIcon("activity",__iconNode$H);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$G=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],ArrowRight=createLucideIcon("arrow-right",__iconNode$G);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$F=[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]],Bot=createLucideIcon("bot",__iconNode$F);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$E=[["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]],Box=createLucideIcon("box",__iconNode$E);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$D=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],ChevronDown=createLucideIcon("chevron-down",__iconNode$D);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$C=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],ChevronUp=createLucideIcon("chevron-up",__iconNode$C);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$B=[["path",{d:"m11 17-5-5 5-5",key:"13zhaf"}],["path",{d:"m18 17-5-5 5-5",key:"h8a8et"}]],ChevronsLeft=createLucideIcon("chevrons-left",__iconNode$B);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$A=[["path",{d:"m6 17 5-5-5-5",key:"xnjwq"}],["path",{d:"m13 17 5-5-5-5",key:"17xmmf"}]],ChevronsRight=createLucideIcon("chevrons-right",__iconNode$A);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$z=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],CircleAlert=createLucideIcon("circle-alert",__iconNode$z);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$y=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],CircleCheckBig=createLucideIcon("circle-check-big",__iconNode$y);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$x=[["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M17 20v2",key:"1rnc9c"}],["path",{d:"M17 2v2",key:"11trls"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M2 17h2",key:"7oei6x"}],["path",{d:"M2 7h2",key:"asdhe0"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"M20 17h2",key:"1fpfkl"}],["path",{d:"M20 7h2",key:"1o8tra"}],["path",{d:"M7 20v2",key:"4gnj0m"}],["path",{d:"M7 2v2",key:"1i4yhu"}],["rect",{x:"4",y:"4",width:"16",height:"16",rx:"2",key:"1vbyd7"}],["rect",{x:"8",y:"8",width:"8",height:"8",rx:"1",key:"z9xiuo"}]],Cpu=createLucideIcon("cpu",__iconNode$x);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$w=[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]],Database=createLucideIcon("database",__iconNode$w);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$v=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],Download=createLucideIcon("download",__iconNode$v);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$u=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],FileText=createLucideIcon("file-text",__iconNode$u);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$t=[["line",{x1:"6",x2:"6",y1:"3",y2:"15",key:"17qcm7"}],["circle",{cx:"18",cy:"6",r:"3",key:"1h7g24"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["path",{d:"M18 9a9 9 0 0 1-9 9",key:"n2h4wq"}]],GitBranch=createLucideIcon("git-branch",__iconNode$t);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$s=[["circle",{cx:"18",cy:"18",r:"3",key:"1xkwt0"}],["circle",{cx:"6",cy:"6",r:"3",key:"1lh9wr"}],["path",{d:"M13 6h3a2 2 0 0 1 2 2v7",key:"1yeb86"}],["path",{d:"M11 18H8a2 2 0 0 1-2-2V9",key:"19pyzm"}]],GitCompare=createLucideIcon("git-compare",__iconNode$s);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$r=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]],Globe=createLucideIcon("globe",__iconNode$r);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$q=[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]],GripVertical=createLucideIcon("grip-vertical",__iconNode$q);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$p=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]],History=createLucideIcon("history",__iconNode$p);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$o=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],Info=createLucideIcon("info",__iconNode$o);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$n=[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]],Key=createLucideIcon("key",__iconNode$n);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$m=[["path",{d:"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z",key:"zw3jo"}],["path",{d:"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12",key:"1wduqc"}],["path",{d:"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17",key:"kqbvx6"}]],Layers=createLucideIcon("layers",__iconNode$m);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$l=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"m21 3-7 7",key:"1l2asr"}],["path",{d:"m3 21 7-7",key:"tjx5ai"}],["path",{d:"M9 21H3v-6",key:"wtvkvv"}]],Maximize2=createLucideIcon("maximize-2",__iconNode$l);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$k=[["path",{d:"M8 3H5a2 2 0 0 0-2 2v3",key:"1dcmit"}],["path",{d:"M21 8V5a2 2 0 0 0-2-2h-3",key:"1e4gt3"}],["path",{d:"M3 16v3a2 2 0 0 0 2 2h3",key:"wsl5sc"}],["path",{d:"M16 21h3a2 2 0 0 0 2-2v-3",key:"18trek"}]],Maximize=createLucideIcon("maximize",__iconNode$k);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$j=[["path",{d:"M4.037 4.688a.495.495 0 0 1 .651-.651l16 6.5a.5.5 0 0 1-.063.947l-6.124 1.58a2 2 0 0 0-1.438 1.435l-1.579 6.126a.5.5 0 0 1-.947.063z",key:"edeuup"}]],MousePointer2=createLucideIcon("mouse-pointer-2",__iconNode$j);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$i=[["rect",{x:"16",y:"16",width:"6",height:"6",rx:"1",key:"4q2zg0"}],["rect",{x:"2",y:"16",width:"6",height:"6",rx:"1",key:"8cvhb9"}],["rect",{x:"9",y:"2",width:"6",height:"6",rx:"1",key:"1egb70"}],["path",{d:"M5 16v-3a1 1 0 0 1 1-1h12a1 1 0 0 1 1 1v3",key:"1jsf9p"}],["path",{d:"M12 12V8",key:"2874zd"}]],Network=createLucideIcon("network",__iconNode$i);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$h=[["path",{d:"M12 16h.01",key:"1drbdi"}],["path",{d:"M12 8v4",key:"1got3b"}],["path",{d:"M15.312 2a2 2 0 0 1 1.414.586l4.688 4.688A2 2 0 0 1 22 8.688v6.624a2 2 0 0 1-.586 1.414l-4.688 4.688a2 2 0 0 1-1.414.586H8.688a2 2 0 0 1-1.414-.586l-4.688-4.688A2 2 0 0 1 2 15.312V8.688a2 2 0 0 1 .586-1.414l4.688-4.688A2 2 0 0 1 8.688 2z",key:"1fd625"}]],OctagonAlert=createLucideIcon("octagon-alert",__iconNode$h);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$g=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],Pen=createLucideIcon("pen",__iconNode$g);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$f=[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]],Play=createLucideIcon("play",__iconNode$f);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$e=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],Plus=createLucideIcon("plus",__iconNode$e);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$d=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],RefreshCw=createLucideIcon("refresh-cw",__iconNode$d);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$c=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],Save=createLucideIcon("save",__iconNode$c);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$b=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Settings=createLucideIcon("settings",__iconNode$b);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$a=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],Shield=createLucideIcon("shield",__iconNode$a);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$9=[["path",{d:"M21 10.656V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h12.344",key:"2acyp4"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],SquareCheckBig=createLucideIcon("square-check-big",__iconNode$9);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$8=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]],Square=createLucideIcon("square",__iconNode$8);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$7=[["path",{d:"M12 19h8",key:"baeox8"}],["path",{d:"m4 17 6-6-6-6",key:"1yngyt"}]],Terminal=createLucideIcon("terminal",__iconNode$7);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$6=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],Trash2=createLucideIcon("trash-2",__iconNode$6);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$5=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],TriangleAlert=createLucideIcon("triangle-alert",__iconNode$5);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$4=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],Upload=createLucideIcon("upload",__iconNode$4);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$3=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],X=createLucideIcon("x",__iconNode$3);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$2=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],Zap=createLucideIcon("zap",__iconNode$2);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$1=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"11",x2:"11",y1:"8",y2:"14",key:"1vmskp"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]],ZoomIn=createLucideIcon("zoom-in",__iconNode$1);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]],ZoomOut=createLucideIcon("zoom-out",__iconNode),GraphCanvas=({arrangement:n,width:e,height:t,onNodeClick:r,highlightedServiceIds:u=[],selectedEntityIds:T=[],alerts:d=[]})=>{const A=reactExports.useRef(null),le=reactExports.useRef(null),G=reactExports.useRef(null),B=reactExports.useRef(null),o=reactExports.useRef(null),i=reactExports.useRef([]);reactExports.useEffect(()=>{if(!A.current)return;const pe=select(A.current);pe.selectAll("*").remove();const ge=u.length>0;pe.append("defs").append("pattern").attr("id","grid-graph").attr("width",40).attr("height",40).attr("patternUnits","userSpaceOnUse").append("path").attr("d","M 40 0 L 0 0 0 40").attr("fill","none").attr("stroke","#1e293b").attr("stroke-width",.5);const we=pe.append("g");o.current=we;const Se=zoom().scaleExtent([.1,4]).on("zoom",Je=>{we.attr("transform",Je.transform)});le.current=Se;const Ae=pe.append("rect").attr("width","100%").attr("height","100%").attr("fill","url(#grid-graph)").call(Se);G.current=Ae,pe.append("defs").append("marker").attr("id","arrow").attr("viewBox","0 -5 10 10").attr("refX",28).attr("refY",0).attr("markerWidth",6).attr("markerHeight",6).attr("orient","auto").append("path").attr("fill","#475569").attr("d","M0,-5L10,0L0,5");const Re=[],Te=[],Ce=Je=>{const at=d.filter(tt=>tt.provenance.includes(Je));return at.some(tt=>tt.severity===ImpactLevel.PROHIBITIVE)?COLORS[ImpactLevel.PROHIBITIVE]:at.some(tt=>tt.severity===ImpactLevel.UNDESIRABLE)?COLORS[ImpactLevel.UNDESIRABLE]:at.some(tt=>tt.severity===ImpactLevel.ACCEPTABLE)?COLORS[ImpactLevel.ACCEPTABLE]:COLORS[ImpactLevel.NEUTRAL]},Ve={[ServiceType.HUMAN]:0,[ServiceType.INTERFACE]:0,[ServiceType.COMPUTE]:1,[ServiceType.DATA]:2,[ServiceType.LEGACY]:2,[ServiceType.INFRASTRUCTURE]:3};n.services.forEach(Je=>{const at=ge&&!u.includes(Je.id)&&!T.includes(Je.id),tt=Ce(Je.id),Tt=T.includes(Je.id);Re.push({id:Je.id,type:EntityType.SERVICE,serviceType:Je.type,label:Je.name,radius:24,color:tt,strokeColor:tt,strokeDash:"none",isExperimental:Je.isExperimental,opacity:at?.2:1,isSelected:Tt,group:Je.group})}),i.current=Re,Re.forEach(Je=>{Re.forEach(at=>{if(Je.id===at.id)return;const tt=Ve[Je.serviceType]||0;(Ve[at.serviceType]||0)===tt+1&&Te.push({source:Je.id,target:at.id,opacity:.4})})});const $e=simulation(Re).force("link",link(Te).id(Je=>Je.id).distance(120).strength(.5)).force("charge",manyBody().strength(-500)).force("collide",collide().radius(60)).force("x",x(Je=>{const at=Ve[Je.serviceType]||0;return e/4*(at+.5)}).strength(.8)).force("y",y(Je=>Je.group&&Je.group.includes("Path A")?t/2-100:Je.group&&Je.group.includes("Path B")?t/2+100:t/2).strength(.2)).stop();B.current=$e;for(let Je=0;Je<300;++Je)$e.tick();Re.forEach(Je=>{Je.fx=Je.x,Je.fy=Je.y});const He=we.append("g").attr("class","links"),De=we.append("g").attr("class","nodes"),Xe=we.append("g").attr("class","group-labels"),Me=He.selectAll("path").data(Te).enter().append("path").attr("stroke-width",1.5).attr("stroke","#475569").attr("stroke-opacity",Je=>Je.opacity).attr("marker-end","url(#arrow)").attr("fill","none").attr("d",Je=>`M${Je.source.x},${Je.source.y} L${Je.target.x},${Je.target.y}`),je=De.selectAll("g").data(Re).enter().append("g").attr("opacity",Je=>Je.opacity).attr("transform",Je=>`translate(${Je.x},${Je.y})`).style("cursor","grab").call(drag().on("start",Ke).on("drag",qe).on("end",Pe));je.each(function(Je){const at=select(this);Je.isSelected&&at.append("circle").attr("r",Je.radius+6).attr("fill","none").attr("stroke","#ffffff").attr("stroke-width",2).attr("stroke-dasharray","4,2"),at.append("circle").attr("r",Je.radius+2).attr("fill","none").attr("stroke",Je.strokeColor).attr("stroke-opacity",.3).attr("stroke-width",4),at.append("circle").attr("r",Je.radius).attr("fill","#0f172a").attr("stroke",Je.strokeColor).attr("stroke-width",2),at.append("text").text(Je.serviceType?Je.serviceType[0]:"?").attr("dy","0.35em").attr("text-anchor","middle").attr("font-weight","bold").attr("fill",Je.strokeColor).attr("font-size","14px"),Je.isExperimental&&at.append("text").text("EXP").attr("y",-Je.radius-8).attr("text-anchor","middle").attr("font-size","9px").attr("fill",COLORS.serviceExperimental).attr("font-weight","bold"),at.append("text").text(Je.label).attr("x",0).attr("y",Je.radius+15).attr("text-anchor","middle").attr("dominant-baseline","hanging").attr("fill","#cbd5e1").attr("font-family","ui-monospace, monospace").attr("font-size","10px").attr("pointer-events","none").style("text-transform","uppercase").call(et,100)}),je.on("click",(Je,at)=>{r(at.type,at.id,Je.ctrlKey||Je.metaKey),Je.stopPropagation()}),Array.from(new Set(Re.map(Je=>Je.group).filter(Boolean))).forEach(Je=>{const at=Re.filter(vt=>vt.group===Je),tt=mean$1(at,vt=>vt.x)||0,Tt=mean$1(at,vt=>vt.y)||0;Xe.append("text").text(Je).attr("x",tt).attr("y",Tt-50).attr("text-anchor","middle").attr("font-size","12px").attr("fill","#64748b").attr("font-weight","bold").attr("opacity",.5).style("text-transform","uppercase").style("letter-spacing","2px")}),$e.on("tick",()=>{Me.attr("d",Je=>`M${Je.source.x},${Je.source.y} L${Je.target.x},${Je.target.y}`),je.attr("transform",Je=>`translate(${Je.x},${Je.y})`)});function Ke(Je,at){Je.active||$e.alphaTarget(.3).restart(),at.fx=at.x,at.fy=at.y,select(this).style("cursor","grabbing")}function qe(Je,at){at.fx=Je.x,at.fy=Je.y}function Pe(Je,at){Je.active||$e.alphaTarget(0),select(this).style("cursor","grab")}function et(Je,at){Je.each(function(){})}return()=>{$e.stop()}},[n,e,t,r,u,d,T]);const w=()=>{G.current&&le.current&&G.current.transition().call(le.current.scaleBy,1.2)},ae=()=>{G.current&&le.current&&G.current.transition().call(le.current.scaleBy,.8)},ue=()=>{if(!G.current||!le.current||i.current.length===0)return;const pe=i.current,ge=min$1(pe,$e=>$e.x-$e.radius)||0,be=max$1(pe,$e=>$e.x+$e.radius)||0,ve=min$1(pe,$e=>$e.y-$e.radius)||0,we=max$1(pe,$e=>$e.y+$e.radius)||0,Se=be-ge,Ae=we-ve,Re=60,Te=Math.min((e-Re*2)/Se,(t-Re*2)/Ae),Ce=(e-Se*Te)/2-ge*Te,Ve=(t-Ae*Te)/2-ve*Te;G.current.transition().duration(750).call(le.current.transform,identity.translate(Ce,Ve).scale(Te))},he=()=>{B.current&&(i.current.forEach(pe=>{pe.fx=null,pe.fy=null}),B.current.alpha(1).restart())};return jsxRuntimeExports.jsxs("div",{className:"relative w-full h-full bg-slate-950",children:[jsxRuntimeExports.jsx("svg",{ref:A,width:e,height:t,style:{userSelect:"none"}}),jsxRuntimeExports.jsxs("div",{className:"absolute bottom-6 right-6 flex flex-col gap-2",children:[jsxRuntimeExports.jsx("button",{onClick:ue,className:"p-2 bg-slate-800 border border-slate-700 text-slate-300 hover:text-white hover:bg-slate-700 rounded shadow",title:"Fit to Screen",children:jsxRuntimeExports.jsx(Maximize,{size:18})}),jsxRuntimeExports.jsx("button",{onClick:he,className:"p-2 bg-slate-800 border border-slate-700 text-slate-300 hover:text-white hover:bg-slate-700 rounded shadow",title:"Auto Arrange",children:jsxRuntimeExports.jsx(RefreshCw,{size:18})}),jsxRuntimeExports.jsx("div",{className:"h-px bg-slate-700 my-1"}),jsxRuntimeExports.jsx("button",{onClick:w,className:"p-2 bg-slate-800 border border-slate-700 text-slate-300 hover:text-white hover:bg-slate-700 rounded shadow",title:"Zoom In",children:jsxRuntimeExports.jsx(ZoomIn,{size:18})}),jsxRuntimeExports.jsx("button",{onClick:ae,className:"p-2 bg-slate-800 border border-slate-700 text-slate-300 hover:text-white hover:bg-slate-700 rounded shadow",title:"Zoom Out",children:jsxRuntimeExports.jsx(ZoomOut,{size:18})})]})]})},RulesCanvas=({arrangement:n,evaluatedRules:e,width:t,height:r,onNodeClick:u,selectedEntityIds:T=[]})=>{const d=reactExports.useRef(null),A=reactExports.useRef(null),le=reactExports.useRef(null),G=reactExports.useRef(null),B=reactExports.useRef([]);reactExports.useEffect(()=>{if(!d.current)return;const ue=select(d.current);ue.selectAll("*").remove(),ue.append("defs").append("pattern").attr("id","grid-rules").attr("width",40).attr("height",40).attr("patternUnits","userSpaceOnUse").append("path").attr("d","M 40 0 L 0 0 0 40").attr("fill","none").attr("stroke","#1e293b").attr("stroke-width",.5);const ge=ue.append("g"),be=zoom().scaleExtent([.1,4]).on("zoom",qe=>{ge.attr("transform",qe.transform)});A.current=be;const ve=ue.append("rect").attr("width","100%").attr("height","100%").attr("fill","url(#grid-rules)").style("pointer-events","all").call(be);le.current=ve;const we=[],Se=[];n.predicates.forEach(qe=>{const Pe=T.includes(qe.id);we.push({id:qe.id,type:EntityType.PREDICATE,label:qe.label,color:COLORS.predicate,stroke:"#475569",shape:"RECT",opacity:T.length>0&&!Pe?.4:1,isSelected:Pe})}),n.container.activeRules.forEach(qe=>{const Pe=e.find(Tt=>Tt.id===qe.id),et=Pe?Pe.status:"NOT_EVALUATED";let Je="#1e293b",at=COLORS.rule;et==="FAILED"?(Je="#450a0a",at="#ef4444"):et==="WARNING"?(Je="#451a03",at="#f97316"):et==="PASSED"&&(Je="#064e3b",at="#10b981");const tt=T.includes(qe.id);if(tt&&(Je=color(Je).brighter(.5).toString()),we.push({id:qe.id,type:EntityType.RULE,label:qe.name,color:Je,stroke:at,shape:"DIAMOND",opacity:T.length>0&&!tt?.4:1,status:et,isSelected:tt}),qe.predicateIds&&qe.predicateIds.length>0)if(qe.predicateIds.length>1){const Tt=`${qe.id}_op`;we.push({id:Tt,type:"OPERATOR",label:qe.operator||"AND",color:"#334155",stroke:"#475569",shape:"CIRCLE",opacity:T.length>0&&!tt?.4:1,isSelected:!1}),Se.push({source:qe.id,target:Tt,isStrong:!0,color:"#64748b"}),qe.predicateIds.forEach(vt=>{Se.push({source:Tt,target:vt,isStrong:!0,color:"#64748b"})})}else{const Tt=qe.predicateIds[0];Se.push({source:qe.id,target:Tt,isStrong:!0,color:"#64748b"})}}),B.current=we;const Ae=simulation(we).force("link",link(Se).id(qe=>qe.id).distance(120)).force("charge",manyBody().strength(-400)).force("center",center(t/2,r/2)).force("collide",collide().radius(85)).stop();G.current=Ae;for(let qe=0;qe<300;++qe)Ae.tick();we.forEach(qe=>{qe.fx=qe.x,qe.fy=qe.y}),ue.append("defs").append("marker").attr("id","arrow-rule").attr("viewBox","0 -5 10 10").attr("refX",25).attr("refY",0).attr("markerWidth",8).attr("markerHeight",8).attr("orient","auto").append("path").attr("fill","#64748b").attr("d","M0,-5L10,0L0,5");const Re=ge.append("g").attr("class","links"),Te=ge.append("g").attr("class","labels"),Ce=ge.append("g").attr("class","nodes"),Ve=Re.selectAll("line").data(Se).enter().append("line").attr("stroke-width",1).attr("stroke",qe=>qe.color).attr("stroke-opacity",.5).attr("marker-end","url(#arrow-rule)").attr("x1",qe=>qe.source.x).attr("y1",qe=>qe.source.y).attr("x2",qe=>qe.target.x).attr("y2",qe=>qe.target.y),$e=Se.filter(qe=>{const Pe=qe.source,et=qe.target;return Pe.type===EntityType.RULE&&et.type!=="OPERATOR"||Pe.type==="OPERATOR"}),He=qe=>{const Pe=qe.source;if(Pe.type===EntityType.RULE)return Pe.label;if(Pe.type==="OPERATOR"){const et=Pe.id.replace("_op",""),Je=we.find(at=>at.id===et);return Je?Je.label:""}return""},De=Te.selectAll("text").data($e).enter().append("text").text(qe=>He(qe)).attr("font-size","7px").attr("font-family","sans-serif").attr("fill","#94a3b8").attr("text-anchor","middle").attr("paint-order","stroke").attr("stroke","#020617").attr("stroke-width",3).attr("dy",-3).attr("opacity",.8).attr("x",qe=>qe.source.x+(qe.target.x-qe.source.x)*.7).attr("y",qe=>qe.source.y+(qe.target.y-qe.source.y)*.7),Xe=Ce.selectAll("g").data(we).enter().append("g").attr("opacity",qe=>qe.opacity).attr("transform",qe=>`translate(${qe.x},${qe.y})`).style("cursor","grab").call(drag().on("start",Me).on("drag",je).on("end",it));Xe.each(function(qe){const Pe=select(this);qe.isSelected&&(qe.shape==="RECT"?Pe.append("rect").attr("width",146).attr("height",38).attr("x",-73).attr("y",-19).attr("rx",6).attr("fill","none").attr("stroke","#ffffff").attr("stroke-width",2).attr("stroke-dasharray","4,2"):qe.shape==="DIAMOND"&&Pe.append("path").attr("d","M0,-28 L28,0 L0,28 L-28,0 Z").attr("fill","none").attr("stroke","#ffffff").attr("stroke-width",2).attr("stroke-dasharray","4,2")),qe.shape==="RECT"?(Pe.append("rect").attr("width",140).attr("height",32).attr("x",-70).attr("y",-16).attr("rx",4).attr("fill","#0f172a").attr("stroke",qe.stroke).attr("stroke-width",1),Pe.append("text").text(qe.label).attr("font-size","10px").attr("font-family","ui-monospace, monospace").attr("fill","#cbd5e1").attr("text-anchor","middle").attr("dy","0.35em").attr("pointer-events","none").style("text-transform","uppercase").call(Ke,130)):qe.shape==="CIRCLE"?(Pe.append("circle").attr("r",15).attr("fill",qe.color).attr("stroke",qe.stroke).attr("stroke-width",1),Pe.append("text").text(qe.label).attr("font-size","8px").attr("fill","#94a3b8").attr("text-anchor","middle").attr("dy","0.35em").style("font-weight","bold")):(Pe.append("path").attr("d","M0,-24 L24,0 L0,24 L-24,0 Z").attr("fill",qe.color).attr("stroke",qe.stroke).attr("stroke-width",2),Pe.append("text").text(qe.label).attr("font-size","9px").attr("fill","#ffffff").attr("font-weight","bold").attr("text-anchor","middle").attr("dy","0.35em").attr("pointer-events","none").call(Ke,40))}),Xe.on("click",(qe,Pe)=>{Pe.type!=="OPERATOR"&&u(Pe.type,Pe.id,qe.ctrlKey||qe.metaKey),qe.stopPropagation()}),Ae.on("tick",()=>{Ve.attr("x1",qe=>qe.source.x).attr("y1",qe=>qe.source.y).attr("x2",qe=>qe.target.x).attr("y2",qe=>qe.target.y),De.attr("x",qe=>qe.source.x+(qe.target.x-qe.source.x)*.7).attr("y",qe=>qe.source.y+(qe.target.y-qe.source.y)*.7),Xe.attr("transform",qe=>`translate(${qe.x},${qe.y})`)});function Me(qe,Pe){qe.active||Ae.alphaTarget(.3).restart(),Pe.fx=Pe.x,Pe.fy=Pe.y,select(this).style("cursor","grabbing")}function je(qe,Pe){Pe.fx=qe.x,Pe.fy=qe.y}function it(qe,Pe){qe.active||Ae.alphaTarget(0),select(this).style("cursor","grab")}function Ke(qe,Pe){qe.each(function(){const et=select(this),Je=et.text().split(/\s+/).reverse();let at,tt=[],Tt=0;const vt=1.1,Dt=et.attr("y")||0,Pt=parseFloat(et.attr("dy")||"0");let jt=et.text(null).append("tspan").attr("x",0).attr("y",Dt).attr("dy",Pt+"em");for(;at=Je.pop();)tt.push(at),jt.text(tt.join(" ")),jt.node().getComputedTextLength()>Pe&&(tt.pop(),jt.text(tt.join(" ")),tt=[at],jt=et.append("tspan").attr("x",0).attr("y",Dt).attr("dy",++Tt*vt+Pt+"em").text(at))})}return()=>{Ae.stop()}},[n,e,t,r,T]);const o=()=>{le.current&&A.current&&le.current.transition().call(A.current.scaleBy,1.2)},i=()=>{le.current&&A.current&&le.current.transition().call(A.current.scaleBy,.8)},w=()=>{if(!le.current||!A.current||B.current.length===0)return;const ue=B.current,he=min$1(ue,Ce=>Ce.x)||0,pe=max$1(ue,Ce=>Ce.x)||0,ge=min$1(ue,Ce=>Ce.y)||0,be=max$1(ue,Ce=>Ce.y)||0,ve=pe-he+160,we=be-ge+160,Se=40,Ae=Math.min((t-Se*2)/ve,(r-Se*2)/we),Re=(t-ve*Ae)/2-(he-80)*Ae,Te=(r-we*Ae)/2-(ge-80)*Ae;le.current.transition().duration(750).call(A.current.transform,identity.translate(Re,Te).scale(Ae))},ae=()=>{G.current&&(B.current.forEach(ue=>{ue.fx=null,ue.fy=null}),G.current.alpha(1).restart())};return jsxRuntimeExports.jsxs("div",{className:"relative w-full h-full bg-slate-950",children:[jsxRuntimeExports.jsx("svg",{ref:d,width:t,height:r,style:{userSelect:"none"}}),jsxRuntimeExports.jsxs("div",{className:"absolute bottom-6 right-6 flex flex-col gap-2",children:[jsxRuntimeExports.jsx("button",{onClick:w,className:"p-2 bg-slate-800 border border-slate-700 text-slate-300 hover:text-white hover:bg-slate-700 rounded shadow",title:"Fit to Screen",children:jsxRuntimeExports.jsx(Maximize,{size:18})}),jsxRuntimeExports.jsx("button",{onClick:ae,className:"p-2 bg-slate-800 border border-slate-700 text-slate-300 hover:text-white hover:bg-slate-700 rounded shadow",title:"Auto Arrange",children:jsxRuntimeExports.jsx(RefreshCw,{size:18})}),jsxRuntimeExports.jsx("div",{className:"h-px bg-slate-700 my-1"}),jsxRuntimeExports.jsx("button",{onClick:o,className:"p-2 bg-slate-800 border border-slate-700 text-slate-300 hover:text-white hover:bg-slate-700 rounded shadow",title:"Zoom In",children:jsxRuntimeExports.jsx(ZoomIn,{size:18})}),jsxRuntimeExports.jsx("button",{onClick:i,className:"p-2 bg-slate-800 border border-slate-700 text-slate-300 hover:text-white hover:bg-slate-700 rounded shadow",title:"Zoom Out",children:jsxRuntimeExports.jsx(ZoomOut,{size:18})})]})]})},ComparisonView=({arrangementA:n,arrangementB:e,allArrangements:t,onSelectB:r,onClose:u,generateAlerts:T})=>{const d=reactExports.useMemo(()=>T(n),[n,T]),A=reactExports.useMemo(()=>e?T(e):[],[e,T]),le=o=>{let i=0;return o.forEach(w=>{w.severity===ImpactLevel.PROHIBITIVE&&(i+=100),w.severity===ImpactLevel.UNDESIRABLE&&(i+=10),w.severity===ImpactLevel.ACCEPTABLE&&(i-=5)}),i},G=le(d),B=le(A);return jsxRuntimeExports.jsxs("div",{className:"absolute inset-0 bg-slate-900/95 backdrop-blur-sm z-50 flex flex-col p-6 animate-in fade-in duration-200",children:[jsxRuntimeExports.jsxs("div",{className:"flex justify-between items-center mb-6",children:[jsxRuntimeExports.jsxs("h2",{className:"text-2xl font-bold text-white flex items-center gap-2",children:[jsxRuntimeExports.jsx(GitCompare,{className:"text-indigo-400"}),"Consequence Comparison"]}),jsxRuntimeExports.jsx("button",{onClick:u,className:"text-slate-400 hover:text-white px-4 py-2 bg-slate-800 rounded",children:"Close"})]}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-2 gap-8 h-full overflow-hidden",children:[jsxRuntimeExports.jsx(HypothesisColumn,{arrangement:n,alerts:d,score:G,isBase:!0}),jsxRuntimeExports.jsxs("div",{className:"flex flex-col h-full",children:[jsxRuntimeExports.jsx("div",{className:"mb-4",children:jsxRuntimeExports.jsxs("select",{className:"bg-slate-900 border border-slate-600 text-white rounded p-3 w-full text-lg font-semibold",value:(e==null?void 0:e.id)||"",onChange:o=>r(o.target.value),children:[jsxRuntimeExports.jsx("option",{value:"",disabled:!0,children:"Select comparison target..."}),t.filter(o=>o.id!==n.id).map(o=>jsxRuntimeExports.jsxs("option",{value:o.id,children:[o.name," (",o.container.versionLabel,")"]},o.id))]})}),e?jsxRuntimeExports.jsx(HypothesisColumn,{arrangement:e,alerts:A,score:B,isBase:!1}):jsxRuntimeExports.jsx("div",{className:"flex-1 border border-slate-700 rounded-lg p-6 bg-slate-800/50 flex items-center justify-center text-slate-500",children:"Select a hypothesis to compare impacts."})]})]})]})},HypothesisColumn=({arrangement:n,alerts:e,score:t,isBase:r})=>{const u=[...e].sort((T,d)=>{const A={[ImpactLevel.PROHIBITIVE]:3,[ImpactLevel.UNDESIRABLE]:2,[ImpactLevel.NEUTRAL]:1,[ImpactLevel.ACCEPTABLE]:0};return A[d.severity]-A[T.severity]});return jsxRuntimeExports.jsxs("div",{className:"border border-slate-700 rounded-lg p-6 bg-slate-800/50 flex flex-col h-full overflow-hidden",children:[jsxRuntimeExports.jsxs("div",{className:"flex justify-between items-start mb-4 pb-4 border-b border-slate-700",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h3",{className:"text-xl font-semibold text-indigo-300",children:n.name}),jsxRuntimeExports.jsxs("p",{className:"text-sm text-slate-400 mt-1 italic",children:['"',n.container.hypothesisName,'"']})]}),jsxRuntimeExports.jsxs("div",{className:`px-3 py-1 rounded text-xs font-bold ${t>50?"bg-red-900 text-red-400":t>10?"bg-amber-900 text-amber-400":"bg-emerald-900 text-emerald-400"}`,children:["Risk Score: ",t]})]}),jsxRuntimeExports.jsxs("div",{className:"flex-1 overflow-y-auto space-y-4",children:[u.length===0&&jsxRuntimeExports.jsx("div",{className:"text-slate-500 italic text-center p-4",children:"No critical impacts detected."}),u.map(T=>jsxRuntimeExports.jsxs("div",{className:`p-3 rounded border-l-4 ${T.severity===ImpactLevel.PROHIBITIVE?"border-red-500 bg-red-950/20":T.severity===ImpactLevel.UNDESIRABLE?"border-amber-500 bg-amber-950/20":T.severity===ImpactLevel.ACCEPTABLE?"border-emerald-500 bg-emerald-950/20":"border-slate-500 bg-slate-900"}`,children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[T.severity===ImpactLevel.PROHIBITIVE&&jsxRuntimeExports.jsx(OctagonAlert,{size:14,className:"text-red-500"}),T.severity===ImpactLevel.UNDESIRABLE&&jsxRuntimeExports.jsx(TriangleAlert,{size:14,className:"text-amber-500"}),jsxRuntimeExports.jsx("span",{className:"text-sm font-bold text-slate-200",children:T.title})]}),jsxRuntimeExports.jsx("p",{className:"text-xs text-slate-400",children:T.description})]},T.id))]}),jsxRuntimeExports.jsxs("div",{className:"mt-4 pt-4 border-t border-slate-700",children:[jsxRuntimeExports.jsx("h4",{className:"text-xs font-bold text-slate-500 uppercase mb-2",children:"Service Stack"}),jsxRuntimeExports.jsx("div",{className:"flex flex-wrap gap-2",children:n.services.map(T=>jsxRuntimeExports.jsxs("span",{className:"px-2 py-1 bg-slate-900 rounded text-xs text-slate-400 border border-slate-800",children:[T.name," ",T.isExperimental&&"(EXP)"]},T.id))})]})]})};function dispatchCallback(n,e){n&&n(e)}function reverseDictionary(n){return Object.fromEntries(Object.entries(n).map(([e,t])=>[t,e]))}function escapeRegExp(n){return n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}const Callable=class{constructor(){let n=function(...e){return n._call(...e)};return Object.setPrototypeOf(n,new.target.prototype)}_call(...n){throw Error("Must implement _call method in subclass")}};function isTypedArray(n){var e,t,r;return((r=(t=(e=n==null?void 0:n.prototype)==null?void 0:e.__proto__)==null?void 0:t.constructor)==null?void 0:r.name)==="TypedArray"}function isIntegralNumber(n){return Number.isInteger(n)||typeof n=="bigint"}function exists(n){return n!=null}function calculateDimensions(n){const e=[];let t=n;for(;Array.isArray(t);)e.push(t.length),t=t[0];return e}function pop(n,e,t=void 0){const r=n[e];if(r!==void 0)return delete n[e],r;if(t===void 0)throw Error(`Key ${e} does not exist in object.`);return t}function mergeArrays(...n){return Array.prototype.concat.apply([],n)}function product(...n){return n.reduce((e,t)=>e.flatMap(r=>t.map(u=>[r,u])))}function calculateReflectOffset(n,e){return Math.abs((n+e)%(2*e)-e)}const sharp={},ONNX_NODE=Object.freeze(Object.defineProperty({__proto__:null,default:sharp},Symbol.toStringTag,{value:"Module"}));var ortWeb_min$1={exports:{}};const backends={},backendsSortedByPriority=[],registerBackend=(n,e,t)=>{if(e&&typeof e.init=="function"&&typeof e.createSessionHandler=="function"){const r=backends[n];if(r===void 0)backends[n]={backend:e,priority:t};else{if(r.priority>t)return;if(r.priority===t&&r.backend!==e)throw new Error(`cannot register backend "${n}" using priority ${t}`)}if(t>=0){const u=backendsSortedByPriority.indexOf(n);u!==-1&&backendsSortedByPriority.splice(u,1);for(let T=0;T<backendsSortedByPriority.length;T++)if(backends[backendsSortedByPriority[T]].priority<=t){backendsSortedByPriority.splice(T,0,n);return}backendsSortedByPriority.push(n)}return}throw new TypeError("not a valid backend")},resolveBackend=async n=>{const e=n.length===0?backendsSortedByPriority:n,t=[];for(const r of e){const u=backends[r];if(u){if(u.initialized)return u.backend;if(u.aborted)continue;const T=!!u.initPromise;try{return T||(u.initPromise=u.backend.init()),await u.initPromise,u.initialized=!0,u.backend}catch(d){T||t.push({name:r,err:d}),u.aborted=!0}finally{delete u.initPromise}}}throw new Error(`no available backend found. ERR: ${t.map(r=>`[${r.name}] ${r.err}`).join(", ")}`)};class EnvImpl{constructor(){this.wasm={},this.webgl={},this.logLevelInternal="warning"}set logLevel(e){if(e!==void 0){if(typeof e!="string"||["verbose","info","warning","error","fatal"].indexOf(e)===-1)throw new Error(`Unsupported logging level: ${e}`);this.logLevelInternal=e}}get logLevel(){return this.logLevelInternal}}const env$2=new EnvImpl,isBigInt64ArrayAvailable=typeof BigInt64Array<"u"&&typeof BigInt64Array.from=="function",isBigUint64ArrayAvailable=typeof BigUint64Array<"u"&&typeof BigUint64Array.from=="function",NUMERIC_TENSOR_TYPE_TO_TYPEDARRAY_MAP=new Map([["float32",Float32Array],["uint8",Uint8Array],["int8",Int8Array],["uint16",Uint16Array],["int16",Int16Array],["int32",Int32Array],["bool",Uint8Array],["float64",Float64Array],["uint32",Uint32Array]]),NUMERIC_TENSOR_TYPEDARRAY_TO_TYPE_MAP=new Map([[Float32Array,"float32"],[Uint8Array,"uint8"],[Int8Array,"int8"],[Uint16Array,"uint16"],[Int16Array,"int16"],[Int32Array,"int32"],[Float64Array,"float64"],[Uint32Array,"uint32"]]);isBigInt64ArrayAvailable&&(NUMERIC_TENSOR_TYPE_TO_TYPEDARRAY_MAP.set("int64",BigInt64Array),NUMERIC_TENSOR_TYPEDARRAY_TO_TYPE_MAP.set(BigInt64Array,"int64"));isBigUint64ArrayAvailable&&(NUMERIC_TENSOR_TYPE_TO_TYPEDARRAY_MAP.set("uint64",BigUint64Array),NUMERIC_TENSOR_TYPEDARRAY_TO_TYPE_MAP.set(BigUint64Array,"uint64"));const calculateSize=n=>{let e=1;for(let t=0;t<n.length;t++){const r=n[t];if(typeof r!="number"||!Number.isSafeInteger(r))throw new TypeError(`dims[${t}] must be an integer, got: ${r}`);if(r<0)throw new RangeError(`dims[${t}] must be a non-negative integer, got: ${r}`);e*=r}return e};let Tensor$2=class vs{constructor(e,t,r){let u,T,d;if(typeof e=="string")if(u=e,d=r,e==="string"){if(!Array.isArray(t))throw new TypeError("A string tensor's data must be a string array.");T=t}else{const le=NUMERIC_TENSOR_TYPE_TO_TYPEDARRAY_MAP.get(e);if(le===void 0)throw new TypeError(`Unsupported tensor type: ${e}.`);if(Array.isArray(t))T=le.from(t);else if(t instanceof le)T=t;else throw new TypeError(`A ${u} tensor's data must be type of ${le}`)}else if(d=t,Array.isArray(e)){if(e.length===0)throw new TypeError("Tensor type cannot be inferred from an empty array.");const le=typeof e[0];if(le==="string")u="string",T=e;else if(le==="boolean")u="bool",T=Uint8Array.from(e);else throw new TypeError(`Invalid element type of data array: ${le}.`)}else{const le=NUMERIC_TENSOR_TYPEDARRAY_TO_TYPE_MAP.get(e.constructor);if(le===void 0)throw new TypeError(`Unsupported type for tensor data: ${e.constructor}.`);u=le,T=e}if(d===void 0)d=[T.length];else if(!Array.isArray(d))throw new TypeError("A tensor's dims must be a number array");const A=calculateSize(d);if(A!==T.length)throw new Error(`Tensor's size(${A}) does not match data length(${T.length}).`);this.dims=d,this.type=u,this.data=T,this.size=A}static bufferToTensor(e,t){if(e===void 0)throw new Error("Image buffer must be defined");if(t.height===void 0||t.width===void 0)throw new Error("Image height and width must be defined");const{height:r,width:u}=t,T=t.norm;let d,A;T===void 0||T.mean===void 0?d=255:d=T.mean,T===void 0||T.bias===void 0?A=0:A=T.bias;const le=t.bitmapFormat!==void 0?t.bitmapFormat:"RGBA",G=t.tensorFormat!==void 0&&t.tensorFormat!==void 0?t.tensorFormat:"RGB",B=r*u,o=G==="RGBA"?new Float32Array(B*4):new Float32Array(B*3);let i=4,w=0,ae=1,ue=2,he=3,pe=0,ge=B,be=B*2,ve=-1;le==="RGB"&&(i=3,w=0,ae=1,ue=2,he=-1),G==="RGBA"?ve=B*3:G==="RBG"?(pe=0,be=B,ge=B*2):G==="BGR"&&(be=0,ge=B,pe=B*2);for(let Se=0;Se<B;Se++,w+=i,ue+=i,ae+=i,he+=i)o[pe++]=(e[w]+A)/d,o[ge++]=(e[ae]+A)/d,o[be++]=(e[ue]+A)/d,ve!==-1&&he!==-1&&(o[ve++]=(e[he]+A)/d);return G==="RGBA"?new vs("float32",o,[1,4,r,u]):new vs("float32",o,[1,3,r,u])}static async fromImage(e,t){const r=typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement,u=typeof ImageData<"u"&&e instanceof ImageData,T=typeof ImageBitmap<"u"&&e instanceof ImageBitmap,d=typeof String<"u"&&(e instanceof String||typeof e=="string");let A,le={};if(r){const G=document.createElement("canvas"),B=G.getContext("2d");if(B!=null){let o=e.naturalHeight,i=e.naturalWidth;if(t!==void 0&&t.resizedHeight!==void 0&&t.resizedWidth!==void 0&&(o=t.resizedHeight,i=t.resizedWidth),t!==void 0){if(le=t,t.tensorFormat!==void 0)throw new Error("Image input config format must be RGBA for HTMLImageElement");if(le.tensorFormat="RGBA",t.height!==void 0&&t.height!==o)throw new Error("Image input config height doesn't match HTMLImageElement height");if(le.height=o,t.width!==void 0&&t.width!==i)throw new Error("Image input config width doesn't match HTMLImageElement width");le.width=i}else le.tensorFormat="RGBA",le.height=o,le.width=i;G.width=i,G.height=o,B.drawImage(e,0,0,i,o),A=B.getImageData(0,0,i,o).data}else throw new Error("Can not access image data")}else if(u){const G="RGBA";let B,o;if(t!==void 0&&t.resizedWidth!==void 0&&t.resizedHeight!==void 0?(B=t.resizedHeight,o=t.resizedWidth):(B=e.height,o=e.width),t!==void 0){if(le=t,t.bitmapFormat!==void 0&&t.bitmapFormat!==G)throw new Error("Image input config format must be RGBA for ImageData");le.bitmapFormat="RGBA"}else le.bitmapFormat="RGBA";if(le.height=B,le.width=o,t!==void 0){const i=document.createElement("canvas");i.width=o,i.height=B;const w=i.getContext("2d");if(w!=null)w.putImageData(e,0,0),A=w.getImageData(0,0,o,B).data;else throw new Error("Can not access image data")}else A=e.data}else if(T){if(t===void 0)throw new Error("Please provide image config with format for Imagebitmap");if(t.bitmapFormat!==void 0)throw new Error("Image input config format must be defined for ImageBitmap");const G=document.createElement("canvas").getContext("2d");if(G!=null){const B=e.height,o=e.width;if(G.drawImage(e,0,0,o,B),A=G.getImageData(0,0,o,B).data,t!==void 0){if(t.height!==void 0&&t.height!==B)throw new Error("Image input config height doesn't match ImageBitmap height");if(le.height=B,t.width!==void 0&&t.width!==o)throw new Error("Image input config width doesn't match ImageBitmap width");le.width=o}else le.height=B,le.width=o;return vs.bufferToTensor(A,le)}else throw new Error("Can not access image data")}else{if(d)return new Promise((G,B)=>{const o=document.createElement("canvas"),i=o.getContext("2d");if(!e||!i)return B();const w=new Image;w.crossOrigin="Anonymous",w.src=e,w.onload=()=>{o.width=w.width,o.height=w.height,i.drawImage(w,0,0,o.width,o.height);const ae=i.getImageData(0,0,o.width,o.height);if(t!==void 0){if(t.height!==void 0&&t.height!==o.height)throw new Error("Image input config height doesn't match ImageBitmap height");if(le.height=o.height,t.width!==void 0&&t.width!==o.width)throw new Error("Image input config width doesn't match ImageBitmap width");le.width=o.width}else le.height=o.height,le.width=o.width;G(vs.bufferToTensor(ae.data,le))}});throw new Error("Input data provided is not supported - aborted tensor creation")}if(A!==void 0)return vs.bufferToTensor(A,le);throw new Error("Input data provided is not supported - aborted tensor creation")}toImageData(e){var t,r;const u=document.createElement("canvas").getContext("2d");let T;if(u!=null){const d=this.dims[3],A=this.dims[2],le=this.dims[1],G=e!==void 0&&e.format!==void 0?e.format:"RGB",B=e!==void 0&&((t=e.norm)===null||t===void 0?void 0:t.mean)!==void 0?e.norm.mean:255,o=e!==void 0&&((r=e.norm)===null||r===void 0?void 0:r.bias)!==void 0?e.norm.bias:0,i=A*d;if(e!==void 0){if(e.height!==void 0&&e.height!==A)throw new Error("Image output config height doesn't match tensor height");if(e.width!==void 0&&e.width!==d)throw new Error("Image output config width doesn't match tensor width");if(e.format!==void 0&&le===4&&e.format!=="RGBA"||le===3&&e.format!=="RGB"&&e.format!=="BGR")throw new Error("Tensor format doesn't match input tensor dims")}const w=4;let ae=0,ue=1,he=2,pe=3,ge=0,be=i,ve=i*2,we=-1;G==="RGBA"?(ge=0,be=i,ve=i*2,we=i*3):G==="RGB"?(ge=0,be=i,ve=i*2):G==="RBG"&&(ge=0,ve=i,be=i*2),T=u.createImageData(d,A);for(let Se=0;Se<A*d;ae+=w,ue+=w,he+=w,pe+=w,Se++)T.data[ae]=(this.data[ge++]-o)*B,T.data[ue]=(this.data[be++]-o)*B,T.data[he]=(this.data[ve++]-o)*B,T.data[pe]=we===-1?255:(this.data[we++]-o)*B}else throw new Error("Can not access image data");return T}reshape(e){return new vs(this.type,this.data,e)}};const Tensor$1=Tensor$2;let InferenceSession$2=class Yh{constructor(e){this.handler=e}async run(e,t,r){const u={};let T={};if(typeof e!="object"||e===null||e instanceof Tensor$1||Array.isArray(e))throw new TypeError("'feeds' must be an object that use input names as keys and OnnxValue as corresponding values.");let d=!0;if(typeof t=="object"){if(t===null)throw new TypeError("Unexpected argument[1]: cannot be null.");if(t instanceof Tensor$1)throw new TypeError("'fetches' cannot be a Tensor");if(Array.isArray(t)){if(t.length===0)throw new TypeError("'fetches' cannot be an empty array.");d=!1;for(const G of t){if(typeof G!="string")throw new TypeError("'fetches' must be a string array or an object.");if(this.outputNames.indexOf(G)===-1)throw new RangeError(`'fetches' contains invalid output name: ${G}.`);u[G]=null}if(typeof r=="object"&&r!==null)T=r;else if(typeof r<"u")throw new TypeError("'options' must be an object.")}else{let G=!1;const B=Object.getOwnPropertyNames(t);for(const o of this.outputNames)if(B.indexOf(o)!==-1){const i=t[o];(i===null||i instanceof Tensor$1)&&(G=!0,d=!1,u[o]=i)}if(G){if(typeof r=="object"&&r!==null)T=r;else if(typeof r<"u")throw new TypeError("'options' must be an object.")}else T=t}}else if(typeof t<"u")throw new TypeError("Unexpected argument[1]: must be 'fetches' or 'options'.");for(const G of this.inputNames)if(typeof e[G]>"u")throw new Error(`input '${G}' is missing in 'feeds'.`);if(d)for(const G of this.outputNames)u[G]=null;const A=await this.handler.run(e,u,T),le={};for(const G in A)Object.hasOwnProperty.call(A,G)&&(le[G]=new Tensor$1(A[G].type,A[G].data,A[G].dims));return le}static async create(e,t,r,u){let T,d={};if(typeof e=="string"){if(T=e,typeof t=="object"&&t!==null)d=t;else if(typeof t<"u")throw new TypeError("'options' must be an object.")}else if(e instanceof Uint8Array){if(T=e,typeof t=="object"&&t!==null)d=t;else if(typeof t<"u")throw new TypeError("'options' must be an object.")}else if(e instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&e instanceof SharedArrayBuffer){const o=e;let i=0,w=e.byteLength;if(typeof t=="object"&&t!==null)d=t;else if(typeof t=="number"){if(i=t,!Number.isSafeInteger(i))throw new RangeError("'byteOffset' must be an integer.");if(i<0||i>=o.byteLength)throw new RangeError(`'byteOffset' is out of range [0, ${o.byteLength}).`);if(w=e.byteLength-i,typeof r=="number"){if(w=r,!Number.isSafeInteger(w))throw new RangeError("'byteLength' must be an integer.");if(w<=0||i+w>o.byteLength)throw new RangeError(`'byteLength' is out of range (0, ${o.byteLength-i}].`);if(typeof u=="object"&&u!==null)d=u;else if(typeof u<"u")throw new TypeError("'options' must be an object.")}else if(typeof r<"u")throw new TypeError("'byteLength' must be a number.")}else if(typeof t<"u")throw new TypeError("'options' must be an object.");T=new Uint8Array(o,i,w)}else throw new TypeError("Unexpected argument[0]: must be 'path' or 'buffer'.");const le=(d.executionProviders||[]).map(o=>typeof o=="string"?o:o.name),B=await(await resolveBackend(le)).createSessionHandler(T,d);return new Yh(B)}startProfiling(){this.handler.startProfiling()}endProfiling(){this.handler.endProfiling()}get inputNames(){return this.handler.inputNames}get outputNames(){return this.handler.outputNames}};const InferenceSession$1=InferenceSession$2,lib=Object.freeze(Object.defineProperty({__proto__:null,InferenceSession:InferenceSession$1,Tensor:Tensor$1,env:env$2,registerBackend},Symbol.toStringTag,{value:"Module"})),require$$0=getAugmentedNamespace(lib);/*!
* ONNX Runtime Web v1.14.0
* Copyright (c) Microsoft Corporation. All rights reserved.
* Licensed under the MIT License.
*/var hasRequiredOrtWeb_min;function requireOrtWeb_min(){return hasRequiredOrtWeb_min||(hasRequiredOrtWeb_min=1,(function(module,exports$1){(function(n,e){module.exports=e(require$$0)})(self,(__WEBPACK_EXTERNAL_MODULE__1670__=>(()=>{var __webpack_modules__={3474:(n,e,t)=>{var r,u=(r=(r=typeof document<"u"&&document.currentScript?document.currentScript.src:void 0)||"/index.js",function(T){function d(){return Ke.buffer!=Pe&&fn(Ke.buffer),et}function A(){return Ke.buffer!=Pe&&fn(Ke.buffer),Je}function le(){return Ke.buffer!=Pe&&fn(Ke.buffer),at}function G(){return Ke.buffer!=Pe&&fn(Ke.buffer),tt}function B(){return Ke.buffer!=Pe&&fn(Ke.buffer),Tt}var o,i,w;T=T||{},o||(o=T!==void 0?T:{}),o.ready=new Promise((function(Ne,ke){i=Ne,w=ke}));var ae,ue,he,pe,ge,be,ve=Object.assign({},o),we="./this.program",Se=(Ne,ke)=>{throw ke},Ae=typeof window=="object",Re=typeof importScripts=="function",Te=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string",Ce=o.ENVIRONMENT_IS_PTHREAD||!1,Ve="";function $e(Ne){return o.locateFile?o.locateFile(Ne,Ve):Ve+Ne}if(Te){let Ne;Ve=Re?t(908).dirname(Ve)+"/":"//",be=()=>{ge||(pe=t(1384),ge=t(908))},ae=function(ke,Ue){return be(),ke=ge.normalize(ke),pe.readFileSync(ke,Ue?void 0:"utf8")},he=ke=>((ke=ae(ke,!0)).buffer||(ke=new Uint8Array(ke)),ke),ue=(ke,Ue,Ze)=>{be(),ke=ge.normalize(ke),pe.readFile(ke,(function(ut,mt){ut?Ze(ut):Ue(mt.buffer)}))},1<process.argv.length&&(we=process.argv[1].replace(/\\/g,"/")),process.argv.slice(2),process.on("uncaughtException",(function(ke){if(!(ke instanceof Oe))throw ke})),process.on("unhandledRejection",(function(ke){throw ke})),Se=(ke,Ue)=>{if($t())throw process.exitCode=ke,Ue;Ue instanceof Oe||je("exiting due to exception: "+Ue),process.exit(ke)},o.inspect=function(){return"[Emscripten Module object]"};try{Ne=t(9925)}catch(ke){throw console.error('The "worker_threads" module is not supported in this node.js build - perhaps a newer version is needed?'),ke}t.g.Worker=Ne.Worker}else(Ae||Re)&&(Re?Ve=self.location.href:typeof document<"u"&&document.currentScript&&(Ve=document.currentScript.src),r&&(Ve=r),Ve=Ve.indexOf("blob:")!==0?Ve.substr(0,Ve.replace(/[?#].*/,"").lastIndexOf("/")+1):"",Te||(ae=Ne=>{var ke=new XMLHttpRequest;return ke.open("GET",Ne,!1),ke.send(null),ke.responseText},Re&&(he=Ne=>{var ke=new XMLHttpRequest;return ke.open("GET",Ne,!1),ke.responseType="arraybuffer",ke.send(null),new Uint8Array(ke.response)}),ue=(Ne,ke,Ue)=>{var Ze=new XMLHttpRequest;Ze.open("GET",Ne,!0),Ze.responseType="arraybuffer",Ze.onload=()=>{Ze.status==200||Ze.status==0&&Ze.response?ke(Ze.response):Ue()},Ze.onerror=Ue,Ze.send(null)}));Te&&typeof performance>"u"&&(t.g.performance=t(6953).performance);var He=console.log.bind(console),De=console.warn.bind(console);Te&&(be(),He=Ne=>pe.writeSync(1,Ne+`
`),De=Ne=>pe.writeSync(2,Ne+`
`));var Xe,Me=o.print||He,je=o.printErr||De;Object.assign(o,ve),ve=null,o.thisProgram&&(we=o.thisProgram),o.quit&&(Se=o.quit),o.wasmBinary&&(Xe=o.wasmBinary);var it=o.noExitRuntime||!1;typeof WebAssembly!="object"&&zt("no native wasm support detected");var Ke,qe,Pe,et,Je,at,tt,Tt,vt=!1,Dt=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0;function Pt(Ne,ke,Ue){var Ze=(ke>>>=0)+Ue;for(Ue=ke;Ne[Ue]&&!(Ue>=Ze);)++Ue;if(16<Ue-ke&&Ne.buffer&&Dt)return Dt.decode(Ne.buffer instanceof SharedArrayBuffer?Ne.slice(ke,Ue):Ne.subarray(ke,Ue));for(Ze="";ke<Ue;){var ut=Ne[ke++];if(128&ut){var mt=63&Ne[ke++];if((224&ut)==192)Ze+=String.fromCharCode((31&ut)<<6|mt);else{var Rt=63&Ne[ke++];65536>(ut=(240&ut)==224?(15&ut)<<12|mt<<6|Rt:(7&ut)<<18|mt<<12|Rt<<6|63&Ne[ke++])?Ze+=String.fromCharCode(ut):(ut-=65536,Ze+=String.fromCharCode(55296|ut>>10,56320|1023&ut))}}else Ze+=String.fromCharCode(ut)}return Ze}function jt(Ne,ke){return(Ne>>>=0)?Pt(A(),Ne,ke):""}function tn(Ne,ke,Ue,Ze){if(!(0<Ze))return 0;var ut=Ue>>>=0;Ze=Ue+Ze-1;for(var mt=0;mt<Ne.length;++mt){var Rt=Ne.charCodeAt(mt);if(55296<=Rt&&57343>=Rt&&(Rt=65536+((1023&Rt)<<10)|1023&Ne.charCodeAt(++mt)),127>=Rt){if(Ue>=Ze)break;ke[Ue++>>>0]=Rt}else{if(2047>=Rt){if(Ue+1>=Ze)break;ke[Ue++>>>0]=192|Rt>>6}else{if(65535>=Rt){if(Ue+2>=Ze)break;ke[Ue++>>>0]=224|Rt>>12}else{if(Ue+3>=Ze)break;ke[Ue++>>>0]=240|Rt>>18,ke[Ue++>>>0]=128|Rt>>12&63}ke[Ue++>>>0]=128|Rt>>6&63}ke[Ue++>>>0]=128|63&Rt}}return ke[Ue>>>0]=0,Ue-ut}function Sn(Ne){for(var ke=0,Ue=0;Ue<Ne.length;++Ue){var Ze=Ne.charCodeAt(Ue);127>=Ze?ke++:2047>=Ze?ke+=2:55296<=Ze&&57343>=Ze?(ke+=4,++Ue):ke+=3}return ke}function fn(Ne){Pe=Ne,o.HEAP8=et=new Int8Array(Ne),o.HEAP16=new Int16Array(Ne),o.HEAP32=at=new Int32Array(Ne),o.HEAPU8=Je=new Uint8Array(Ne),o.HEAPU16=new Uint16Array(Ne),o.HEAPU32=tt=new Uint32Array(Ne),o.HEAPF32=new Float32Array(Ne),o.HEAPF64=Tt=new Float64Array(Ne)}Ce&&(Pe=o.buffer);var Jt=o.INITIAL_MEMORY||16777216;if(Ce)Ke=o.wasmMemory,Pe=o.buffer;else if(o.wasmMemory)Ke=o.wasmMemory;else if(!((Ke=new WebAssembly.Memory({initial:Jt/65536,maximum:65536,shared:!0})).buffer instanceof SharedArrayBuffer))throw je("requested a shared WebAssembly.Memory but the returned buffer is not a SharedArrayBuffer, indicating that while the browser has SharedArrayBuffer it does not have WebAssembly threads support - you may need to set a flag"),Te&&console.log("(on node you may need: --experimental-wasm-threads --experimental-wasm-bulk-memory and also use a recent version)"),Error("bad memory");Ke&&(Pe=Ke.buffer),Jt=Pe.byteLength,fn(Pe);var Vn,qn=[],Yn=[],nr=[],yt=[];function $t(){return it||!1}function Kt(){var Ne=o.preRun.shift();qn.unshift(Ne)}var Ut,sn=0,wn=null;function zt(Ne){throw Ce?postMessage({cmd:"onAbort",arg:Ne}):o.onAbort&&o.onAbort(Ne),je(Ne="Aborted("+Ne+")"),vt=!0,Ne=new WebAssembly.RuntimeError(Ne+". Build with -sASSERTIONS for more info."),w(Ne),Ne}function Zn(){return Ut.startsWith("data:application/octet-stream;base64,")}function Le(){var Ne=Ut;try{if(Ne==Ut&&Xe)return new Uint8Array(Xe);if(he)return he(Ne);throw"both async and sync fetching of the wasm failed"}catch(ke){zt(ke)}}Ut="ort-wasm-threaded.wasm",Zn()||(Ut=$e(Ut));var Ee={};function Oe(Ne){this.name="ExitStatus",this.message="Program terminated with exit("+Ne+")",this.status=Ne}function ze(Ne){(Ne=It.Vb[Ne])||zt(),It.mc(Ne)}function st(Ne){var ke=It.Cc();if(!ke)return 6;It.ac.push(ke),It.Vb[Ne.Ub]=ke,ke.Ub=Ne.Ub;var Ue={cmd:"run",start_routine:Ne.Ic,arg:Ne.zc,pthread_ptr:Ne.Ub};return ke.$b=()=>{Ue.time=performance.now(),ke.postMessage(Ue,Ne.Nc)},ke.loaded&&(ke.$b(),delete ke.$b),0}function ct(Ne){if(Ce)return Ct(1,1,Ne);$t()||(It.oc(),o.onExit&&o.onExit(Ne),vt=!0),Se(Ne,new Oe(Ne))}function Et(Ne,ke){if(!ke&&Ce)throw On(Ne),"unwind";$t()||Ce||(Es(),an(nr),cr(0),ws[1].length&&Ts(1,10),ws[2].length&&Ts(2,10),It.oc()),ct(Ne)}var It={Yb:[],ac:[],qc:[],Vb:{},fc:function(){Ce&&It.Ec()},Pc:function(){},Ec:function(){It.receiveObjectTransfer=It.Gc,It.threadInitTLS=It.pc,It.setExitStatus=It.nc,it=!1},nc:function(){},oc:function(){for(var Ne of Object.values(It.Vb))It.mc(Ne);for(Ne of It.Yb)Ne.terminate();It.Yb=[]},mc:function(Ne){var ke=Ne.Ub;delete It.Vb[ke],It.Yb.push(Ne),It.ac.splice(It.ac.indexOf(Ne),1),Ne.Ub=0,Ss(ke)},Gc:function(){},pc:function(){It.qc.forEach((Ne=>Ne()))},Fc:function(Ne,ke){Ne.onmessage=Ue=>{var Ze=(Ue=Ue.data).cmd;if(Ne.Ub&&(It.Bc=Ne.Ub),Ue.targetThread&&Ue.targetThread!=rs()){var ut=It.Vb[Ue.Qc];ut?ut.postMessage(Ue,Ue.transferList):je('Internal error! Worker sent a message "'+Ze+'" to target pthread '+Ue.targetThread+", but that thread no longer exists!")}else Ze==="processProxyingQueue"?rt(Ue.queue):Ze==="spawnThread"?st(Ue):Ze==="cleanupThread"?ze(Ue.thread):Ze==="killThread"?(Ue=Ue.thread,Ze=It.Vb[Ue],delete It.Vb[Ue],Ze.terminate(),Ss(Ue),It.ac.splice(It.ac.indexOf(Ze),1),Ze.Ub=0):Ze==="cancelThread"?It.Vb[Ue.thread].postMessage({cmd:"cancel"}):Ze==="loaded"?(Ne.loaded=!0,ke&&ke(Ne),Ne.$b&&(Ne.$b(),delete Ne.$b)):Ze==="print"?Me("Thread "+Ue.threadId+": "+Ue.text):Ze==="printErr"?je("Thread "+Ue.threadId+": "+Ue.text):Ze==="alert"?alert("Thread "+Ue.threadId+": "+Ue.text):Ue.target==="setimmediate"?Ne.postMessage(Ue):Ze==="onAbort"?o.onAbort&&o.onAbort(Ue.arg):Ze&&je("worker sent an unknown command "+Ze);It.Bc=void 0},Ne.onerror=Ue=>{throw je("worker sent an error! "+Ue.filename+":"+Ue.lineno+": "+Ue.message),Ue},Te&&(Ne.on("message",(function(Ue){Ne.onmessage({data:Ue})})),Ne.on("error",(function(Ue){Ne.onerror(Ue)})),Ne.on("detachedExit",(function(){}))),Ne.postMessage({cmd:"load",urlOrBlob:o.mainScriptUrlOrBlob||r,wasmMemory:Ke,wasmModule:qe})},yc:function(){var Ne=$e("ort-wasm-threaded.worker.js");It.Yb.push(new Worker(Ne))},Cc:function(){return It.Yb.length==0&&(It.yc(),It.Fc(It.Yb[0])),It.Yb.pop()}};function an(Ne){for(;0<Ne.length;)Ne.shift()(o)}function en(Ne){var ke=nn();return Ne=Ne(),Zt(ke),Ne}function On(Ne){if(Ce)return Ct(2,0,Ne);try{Et(Ne)}catch(ke){ke instanceof Oe||ke=="unwind"||Se(1,ke)}}o.PThread=It,o.establishStackSpace=function(){var Ne=rs(),ke=le()[Ne+44>>2>>>0];Ne=le()[Ne+48>>2>>>0],ho(ke,ke-Ne),Zt(ke)};var un=[];function xn(Ne){var ke=un[Ne];return ke||(Ne>=un.length&&(un.length=Ne+1),un[Ne]=ke=Vn.get(Ne)),ke}o.invokeEntryPoint=function(Ne,ke){Ne=xn(Ne)(ke),$t()?It.nc(Ne):ii(Ne)};var Ir,qr,Mr=[],qt=0,Ht=0;function Yt(Ne){this.Zb=Ne,this.Sb=Ne-24,this.xc=function(ke){G()[this.Sb+4>>2>>>0]=ke},this.bc=function(){return G()[this.Sb+4>>2>>>0]},this.wc=function(ke){G()[this.Sb+8>>2>>>0]=ke},this.Dc=function(){return G()[this.Sb+8>>2>>>0]},this.rc=function(){le()[this.Sb>>2>>>0]=0},this.hc=function(ke){ke=ke?1:0,d()[this.Sb+12>>0>>>0]=ke},this.uc=function(){return d()[this.Sb+12>>0>>>0]!=0},this.ic=function(ke){ke=ke?1:0,d()[this.Sb+13>>0>>>0]=ke},this.kc=function(){return d()[this.Sb+13>>0>>>0]!=0},this.fc=function(ke,Ue){this.cc(0),this.xc(ke),this.wc(Ue),this.rc(),this.hc(!1),this.ic(!1)},this.sc=function(){Atomics.add(le(),this.Sb>>2,1)},this.Hc=function(){return Atomics.sub(le(),this.Sb>>2,1)===1},this.cc=function(ke){G()[this.Sb+16>>2>>>0]=ke},this.tc=function(){return G()[this.Sb+16>>2>>>0]},this.vc=function(){if(is(this.bc()))return G()[this.Zb>>2>>>0];var ke=this.tc();return ke!==0?ke:this.Zb}}function ts(Ne){return ra(new Yt(Ne).Sb)}function Yr(Ne,ke,Ue,Ze){return Ce?Ct(3,1,Ne,ke,Ue,Ze):Jr(Ne,ke,Ue,Ze)}function Jr(Ne,ke,Ue,Ze){if(typeof SharedArrayBuffer>"u")return je("Current environment does not support SharedArrayBuffer, pthreads are not available!"),6;var ut=[];return Ce&&ut.length===0?Yr(Ne,ke,Ue,Ze):(Ne={Ic:Ue,Ub:Ne,zc:Ze,Nc:ut},Ce?(Ne.Oc="spawnThread",postMessage(Ne,ut),0):st(Ne))}function Ur(Ne,ke,Ue){return Ce?Ct(4,1,Ne,ke,Ue):0}function ns(Ne,ke){if(Ce)return Ct(5,1,Ne,ke)}function Si(Ne,ke){if(Ce)return Ct(6,1,Ne,ke)}function Ai(Ne,ke,Ue){if(Ce)return Ct(7,1,Ne,ke,Ue)}function Oi(Ne,ke,Ue){return Ce?Ct(8,1,Ne,ke,Ue):0}function ei(Ne,ke){if(Ce)return Ct(9,1,Ne,ke)}function ti(Ne,ke,Ue){if(Ce)return Ct(10,1,Ne,ke,Ue)}function Ii(Ne,ke,Ue,Ze){if(Ce)return Ct(11,1,Ne,ke,Ue,Ze)}function Mi(Ne,ke,Ue,Ze){if(Ce)return Ct(12,1,Ne,ke,Ue,Ze)}function fr(Ne,ke,Ue,Ze){if(Ce)return Ct(13,1,Ne,ke,Ue,Ze)}function $n(Ne){if(Ce)return Ct(14,1,Ne)}function Be(Ne,ke){if(Ce)return Ct(15,1,Ne,ke)}function We(Ne,ke,Ue){if(Ce)return Ct(16,1,Ne,ke,Ue)}function rt(Ne){Atomics.store(le(),Ne>>2,1),rs()&&fo(Ne),Atomics.compareExchange(le(),Ne>>2,1,0)}function lt(Ne){return G()[Ne>>>2]+4294967296*le()[Ne+4>>>2]}function pt(Ne,ke,Ue,Ze,ut,mt){return Ce?Ct(17,1,Ne,ke,Ue,Ze,ut,mt):-52}function wt(Ne,ke,Ue,Ze,ut,mt){if(Ce)return Ct(18,1,Ne,ke,Ue,Ze,ut,mt)}function Nt(Ne){var ke=Sn(Ne)+1,Ue=Ni(ke);return Ue&&tn(Ne,d(),Ue,ke),Ue}function kt(Ne,ke,Ue){function Ze(Qt){return(Qt=Qt.toTimeString().match(/\(([A-Za-z ]+)\)$/))?Qt[1]:"GMT"}if(Ce)return Ct(19,1,Ne,ke,Ue);var ut=new Date().getFullYear(),mt=new Date(ut,0,1),Rt=new Date(ut,6,1);ut=mt.getTimezoneOffset();var Bt=Rt.getTimezoneOffset(),Gt=Math.max(ut,Bt);le()[Ne>>2>>>0]=60*Gt,le()[ke>>2>>>0]=+(ut!=Bt),Ne=Ze(mt),ke=Ze(Rt),Ne=Nt(Ne),ke=Nt(ke),Bt<ut?(G()[Ue>>2>>>0]=Ne,G()[Ue+4>>2>>>0]=ke):(G()[Ue>>2>>>0]=ke,G()[Ue+4>>2>>>0]=Ne)}function Ct(Ne,ke){var Ue=arguments.length-2,Ze=arguments;return en((()=>{for(var ut=po(8*Ue),mt=ut>>3,Rt=0;Rt<Ue;Rt++){var Bt=Ze[2+Rt];B()[mt+Rt>>>0]=Bt}return ri(Ne,Ue,ut,ke)}))}o.executeNotifiedProxyingQueue=rt,qr=Te?()=>{var Ne=process.hrtime();return 1e3*Ne[0]+Ne[1]/1e6}:Ce?()=>performance.now()-o.__performance_now_clock_drift:()=>performance.now();var Xt,_n=[],kn={};function hn(){if(!Xt){var Ne,ke={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:(typeof navigator=="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:we||"./this.program"};for(Ne in kn)kn[Ne]===void 0?delete ke[Ne]:ke[Ne]=kn[Ne];var Ue=[];for(Ne in ke)Ue.push(Ne+"="+ke[Ne]);Xt=Ue}return Xt}function bt(Ne,ke){if(Ce)return Ct(20,1,Ne,ke);var Ue=0;return hn().forEach((function(Ze,ut){var mt=ke+Ue;for(ut=G()[Ne+4*ut>>2>>>0]=mt,mt=0;mt<Ze.length;++mt)d()[ut++>>0>>>0]=Ze.charCodeAt(mt);d()[ut>>0>>>0]=0,Ue+=Ze.length+1})),0}function cn(Ne,ke){if(Ce)return Ct(21,1,Ne,ke);var Ue=hn();G()[Ne>>2>>>0]=Ue.length;var Ze=0;return Ue.forEach((function(ut){Ze+=ut.length+1})),G()[ke>>2>>>0]=Ze,0}function vn(Ne){return Ce?Ct(22,1,Ne):52}function Jn(Ne,ke,Ue,Ze){return Ce?Ct(23,1,Ne,ke,Ue,Ze):52}function zr(Ne,ke,Ue,Ze,ut){return Ce?Ct(24,1,Ne,ke,Ue,Ze,ut):70}var ws=[null,[],[]];function Ts(Ne,ke){var Ue=ws[Ne];ke===0||ke===10?((Ne===1?Me:je)(Pt(Ue,0)),Ue.length=0):Ue.push(ke)}function na(Ne,ke,Ue,Ze){if(Ce)return Ct(25,1,Ne,ke,Ue,Ze);for(var ut=0,mt=0;mt<Ue;mt++){var Rt=G()[ke>>2>>>0],Bt=G()[ke+4>>2>>>0];ke+=8;for(var Gt=0;Gt<Bt;Gt++)Ts(Ne,A()[Rt+Gt>>>0]);ut+=Bt}return G()[Ze>>2>>>0]=ut,0}var er=0;function ni(Ne){return Ne%4==0&&(Ne%100!=0||Ne%400==0)}var Nr=[31,29,31,30,31,30,31,31,30,31,30,31],ur=[31,28,31,30,31,30,31,31,30,31,30,31];function lo(Ne,ke,Ue,Ze){function ut(xt,dn,In){for(xt=typeof xt=="number"?xt.toString():xt||"";xt.length<dn;)xt=In[0]+xt;return xt}function mt(xt,dn){return ut(xt,dn,"0")}function Rt(xt,dn){function In(li){return 0>li?-1:0<li?1:0}var pr;return(pr=In(xt.getFullYear()-dn.getFullYear()))===0&&(pr=In(xt.getMonth()-dn.getMonth()))===0&&(pr=In(xt.getDate()-dn.getDate())),pr}function Bt(xt){switch(xt.getDay()){case 0:return new Date(xt.getFullYear()-1,11,29);case 1:return xt;case 2:return new Date(xt.getFullYear(),0,3);case 3:return new Date(xt.getFullYear(),0,2);case 4:return new Date(xt.getFullYear(),0,1);case 5:return new Date(xt.getFullYear()-1,11,31);case 6:return new Date(xt.getFullYear()-1,11,30)}}function Gt(xt){var dn=xt.Wb;for(xt=new Date(new Date(xt.Xb+1900,0,1).getTime());0<dn;){var In=xt.getMonth(),pr=(ni(xt.getFullYear())?Nr:ur)[In];if(!(dn>pr-xt.getDate())){xt.setDate(xt.getDate()+dn);break}dn-=pr-xt.getDate()+1,xt.setDate(1),11>In?xt.setMonth(In+1):(xt.setMonth(0),xt.setFullYear(xt.getFullYear()+1))}return In=new Date(xt.getFullYear()+1,0,4),dn=Bt(new Date(xt.getFullYear(),0,4)),In=Bt(In),0>=Rt(dn,xt)?0>=Rt(In,xt)?xt.getFullYear()+1:xt.getFullYear():xt.getFullYear()-1}var Qt=le()[Ze+40>>2>>>0];for(var Pn in Ze={Lc:le()[Ze>>2>>>0],Kc:le()[Ze+4>>2>>>0],dc:le()[Ze+8>>2>>>0],jc:le()[Ze+12>>2>>>0],ec:le()[Ze+16>>2>>>0],Xb:le()[Ze+20>>2>>>0],Tb:le()[Ze+24>>2>>>0],Wb:le()[Ze+28>>2>>>0],Rc:le()[Ze+32>>2>>>0],Jc:le()[Ze+36>>2>>>0],Mc:Qt?jt(Qt):""},Ue=jt(Ue),Qt={"%c":"%a %b %d %H:%M:%S %Y","%D":"%m/%d/%y","%F":"%Y-%m-%d","%h":"%b","%r":"%I:%M:%S %p","%R":"%H:%M","%T":"%H:%M:%S","%x":"%m/%d/%y","%X":"%H:%M:%S","%Ec":"%c","%EC":"%C","%Ex":"%m/%d/%y","%EX":"%H:%M:%S","%Ey":"%y","%EY":"%Y","%Od":"%d","%Oe":"%e","%OH":"%H","%OI":"%I","%Om":"%m","%OM":"%M","%OS":"%S","%Ou":"%u","%OU":"%U","%OV":"%V","%Ow":"%w","%OW":"%W","%Oy":"%y"})Ue=Ue.replace(new RegExp(Pn,"g"),Qt[Pn]);var lr="Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),hr="January February March April May June July August September October November December".split(" ");for(Pn in Qt={"%a":function(xt){return lr[xt.Tb].substring(0,3)},"%A":function(xt){return lr[xt.Tb]},"%b":function(xt){return hr[xt.ec].substring(0,3)},"%B":function(xt){return hr[xt.ec]},"%C":function(xt){return mt((xt.Xb+1900)/100|0,2)},"%d":function(xt){return mt(xt.jc,2)},"%e":function(xt){return ut(xt.jc,2," ")},"%g":function(xt){return Gt(xt).toString().substring(2)},"%G":function(xt){return Gt(xt)},"%H":function(xt){return mt(xt.dc,2)},"%I":function(xt){return(xt=xt.dc)==0?xt=12:12<xt&&(xt-=12),mt(xt,2)},"%j":function(xt){for(var dn=0,In=0;In<=xt.ec-1;dn+=(ni(xt.Xb+1900)?Nr:ur)[In++]);return mt(xt.jc+dn,3)},"%m":function(xt){return mt(xt.ec+1,2)},"%M":function(xt){return mt(xt.Kc,2)},"%n":function(){return`
`},"%p":function(xt){return 0<=xt.dc&&12>xt.dc?"AM":"PM"},"%S":function(xt){return mt(xt.Lc,2)},"%t":function(){return"	"},"%u":function(xt){return xt.Tb||7},"%U":function(xt){return mt(Math.floor((xt.Wb+7-xt.Tb)/7),2)},"%V":function(xt){var dn=Math.floor((xt.Wb+7-(xt.Tb+6)%7)/7);if(2>=(xt.Tb+371-xt.Wb-2)%7&&dn++,dn)dn==53&&((In=(xt.Tb+371-xt.Wb)%7)==4||In==3&&ni(xt.Xb)||(dn=1));else{dn=52;var In=(xt.Tb+7-xt.Wb-1)%7;(In==4||In==5&&ni(xt.Xb%400-1))&&dn++}return mt(dn,2)},"%w":function(xt){return xt.Tb},"%W":function(xt){return mt(Math.floor((xt.Wb+7-(xt.Tb+6)%7)/7),2)},"%y":function(xt){return(xt.Xb+1900).toString().substring(2)},"%Y":function(xt){return xt.Xb+1900},"%z":function(xt){var dn=0<=(xt=xt.Jc);return xt=Math.abs(xt)/60,(dn?"+":"-")+("0000"+(xt/60*100+xt%60)).slice(-4)},"%Z":function(xt){return xt.Mc},"%%":function(){return"%"}},Ue=Ue.replace(/%%/g,"\0\0"),Qt)Ue.includes(Pn)&&(Ue=Ue.replace(new RegExp(Pn,"g"),Qt[Pn](Ze)));return Pn=(function(xt){var dn=Array(Sn(xt)+1);return tn(xt,dn,0,dn.length),dn})(Ue=Ue.replace(/\0\0/g,"%")),Pn.length>ke?0:((function(xt,dn){d().set(xt,dn>>>0)})(Pn,Ne),Pn.length-1)}It.fc();var ul=[null,ct,On,Yr,Ur,ns,Si,Ai,Oi,ei,ti,Ii,Mi,fr,$n,Be,We,pt,wt,kt,bt,cn,vn,Jn,zr,na],uo={b:function(Ne){return Ni(Ne+24)+24},n:function(Ne){return(Ne=new Yt(Ne)).uc()||(Ne.hc(!0),qt--),Ne.ic(!1),Mr.push(Ne),Ne.sc(),Ne.vc()},ma:function(Ne){throw je("Unexpected exception thrown, this is not properly supported - aborting"),vt=!0,Ne},x:function(){ln(0);var Ne=Mr.pop();if(Ne.Hc()&&!Ne.kc()){var ke=Ne.Dc();ke&&xn(ke)(Ne.Zb),ts(Ne.Zb)}Ht=0},e:function(){var Ne=Ht;if(!Ne)return er=0;var ke=new Yt(Ne);ke.cc(Ne);var Ue=ke.bc();if(!Ue)return er=0,Ne;for(var Ze=Array.prototype.slice.call(arguments),ut=0;ut<Ze.length;ut++){var mt=Ze[ut];if(mt===0||mt===Ue)break;if(As(mt,Ue,ke.Sb+16))return er=mt,Ne}return er=Ue,Ne},l:function(){var Ne=Ht;if(!Ne)return er=0;var ke=new Yt(Ne);ke.cc(Ne);var Ue=ke.bc();if(!Ue)return er=0,Ne;for(var Ze=Array.prototype.slice.call(arguments),ut=0;ut<Ze.length;ut++){var mt=Ze[ut];if(mt===0||mt===Ue)break;if(As(mt,Ue,ke.Sb+16))return er=mt,Ne}return er=Ue,Ne},h:function(){var Ne=Ht;if(!Ne)return er=0;var ke=new Yt(Ne);ke.cc(Ne);var Ue=ke.bc();if(!Ue)return er=0,Ne;for(var Ze=Array.prototype.slice.call(arguments),ut=0;ut<Ze.length;ut++){var mt=Ze[ut];if(mt===0||mt===Ue)break;if(As(mt,Ue,ke.Sb+16))return er=mt,Ne}return er=Ue,Ne},t:ts,M:function(){var Ne=Mr.pop();Ne||zt("no exception to throw");var ke=Ne.Zb;throw Ne.kc()||(Mr.push(Ne),Ne.ic(!0),Ne.hc(!1),qt++),Ht=ke,ke},c:function(Ne,ke,Ue){throw new Yt(Ne).fc(ke,Ue),Ht=Ne,qt++,Ne},pa:function(){return qt},Fa:function(Ne){co(Ne,!Re,1,!Ae),It.pc()},T:function(Ne){Ce?postMessage({cmd:"cleanupThread",thread:Ne}):ze(Ne)},xa:Jr,j:function(Ne){throw Ht||(Ht=Ne),Ne},H:Ur,Ma:ns,ua:Si,wa:Ai,oa:Oi,Ka:ei,Ca:ti,Ja:Ii,V:Mi,va:fr,sa:$n,La:Be,ta:We,Ta:function(){},X:function(){zt("To use dlopen, you need enable dynamic linking, see https://github.com/emscripten-core/emscripten/wiki/Linking")},Ua:function(){zt("To use dlopen, you need enable dynamic linking, see https://github.com/emscripten-core/emscripten/wiki/Linking")},W:function(){return Date.now()},ya:function(){return 2097152},Oa:function(){return!0},za:function(Ne,ke,Ue,Ze){if(Ne==ke)setTimeout((()=>rt(Ze)));else if(Ce)postMessage({targetThread:Ne,cmd:"processProxyingQueue",queue:Ze});else{if(!(Ne=It.Vb[Ne]))return;Ne.postMessage({cmd:"processProxyingQueue",queue:Ze})}return 1},Ea:function(){return-1},Pa:function(Ne,ke){Ne=new Date(1e3*lt(Ne)),le()[ke>>2>>>0]=Ne.getUTCSeconds(),le()[ke+4>>2>>>0]=Ne.getUTCMinutes(),le()[ke+8>>2>>>0]=Ne.getUTCHours(),le()[ke+12>>2>>>0]=Ne.getUTCDate(),le()[ke+16>>2>>>0]=Ne.getUTCMonth(),le()[ke+20>>2>>>0]=Ne.getUTCFullYear()-1900,le()[ke+24>>2>>>0]=Ne.getUTCDay(),Ne=(Ne.getTime()-Date.UTC(Ne.getUTCFullYear(),0,1,0,0,0,0))/864e5|0,le()[ke+28>>2>>>0]=Ne},Qa:function(Ne,ke){Ne=new Date(1e3*lt(Ne)),le()[ke>>2>>>0]=Ne.getSeconds(),le()[ke+4>>2>>>0]=Ne.getMinutes(),le()[ke+8>>2>>>0]=Ne.getHours(),le()[ke+12>>2>>>0]=Ne.getDate(),le()[ke+16>>2>>>0]=Ne.getMonth(),le()[ke+20>>2>>>0]=Ne.getFullYear()-1900,le()[ke+24>>2>>>0]=Ne.getDay();var Ue=new Date(Ne.getFullYear(),0,1),Ze=(Ne.getTime()-Ue.getTime())/864e5|0;le()[ke+28>>2>>>0]=Ze,le()[ke+36>>2>>>0]=-60*Ne.getTimezoneOffset(),Ze=new Date(Ne.getFullYear(),6,1).getTimezoneOffset(),Ne=0|(Ze!=(Ue=Ue.getTimezoneOffset())&&Ne.getTimezoneOffset()==Math.min(Ue,Ze)),le()[ke+32>>2>>>0]=Ne},Ra:function(Ne){var ke=new Date(le()[Ne+20>>2>>>0]+1900,le()[Ne+16>>2>>>0],le()[Ne+12>>2>>>0],le()[Ne+8>>2>>>0],le()[Ne+4>>2>>>0],le()[Ne>>2>>>0],0),Ue=le()[Ne+32>>2>>>0],Ze=ke.getTimezoneOffset(),ut=new Date(ke.getFullYear(),0,1),mt=new Date(ke.getFullYear(),6,1).getTimezoneOffset(),Rt=ut.getTimezoneOffset(),Bt=Math.min(Rt,mt);return 0>Ue?le()[Ne+32>>2>>>0]=+(mt!=Rt&&Bt==Ze):0<Ue!=(Bt==Ze)&&(mt=Math.max(Rt,mt),ke.setTime(ke.getTime()+6e4*((0<Ue?Bt:mt)-Ze))),le()[Ne+24>>2>>>0]=ke.getDay(),Ue=(ke.getTime()-ut.getTime())/864e5|0,le()[Ne+28>>2>>>0]=Ue,le()[Ne>>2>>>0]=ke.getSeconds(),le()[Ne+4>>2>>>0]=ke.getMinutes(),le()[Ne+8>>2>>>0]=ke.getHours(),le()[Ne+12>>2>>>0]=ke.getDate(),le()[Ne+16>>2>>>0]=ke.getMonth(),ke.getTime()/1e3|0},Aa:pt,Ba:wt,Sa:function Ne(ke,Ue,Ze){Ne.Ac||(Ne.Ac=!0,kt(ke,Ue,Ze))},y:function(){zt("")},U:function(){if(!Te&&!Re){var Ne="Blocking on the main thread is very dangerous, see https://emscripten.org/docs/porting/pthreads.html#blocking-on-the-main-browser-thread";Ir||(Ir={}),Ir[Ne]||(Ir[Ne]=1,Te&&(Ne="warning: "+Ne),je(Ne))}},ra:function(){return 4294901760},B:qr,Ia:function(Ne,ke,Ue){A().copyWithin(Ne>>>0,ke>>>0,ke+Ue>>>0)},F:function(){return Te?t(3993).cpus().length:navigator.hardwareConcurrency},Da:function(Ne,ke,Ue){_n.length=ke,Ue>>=3;for(var Ze=0;Ze<ke;Ze++)_n[Ze]=B()[Ue+Ze>>>0];return(0>Ne?Ee[-Ne-1]:ul[Ne]).apply(null,_n)},qa:function(Ne){var ke=A().length;if((Ne>>>=0)<=ke||4294901760<Ne)return!1;for(var Ue=1;4>=Ue;Ue*=2){var Ze=ke*(1+.2/Ue);Ze=Math.min(Ze,Ne+100663296);var ut=Math;Ze=Math.max(Ne,Ze),ut=ut.min.call(ut,4294901760,Ze+(65536-Ze%65536)%65536);e:{try{Ke.grow(ut-Pe.byteLength+65535>>>16),fn(Ke.buffer);var mt=1;break e}catch{}mt=void 0}if(mt)return!0}return!1},Na:function(){throw"unwind"},Ga:bt,Ha:cn,J:Et,I:vn,S:Jn,ga:zr,R:na,d:function(){return er},na:function Ne(ke,Ue){Ne.lc||(Ne.lc=(function(){if(typeof crypto=="object"&&typeof crypto.getRandomValues=="function"){var ut=new Uint8Array(1);return()=>(crypto.getRandomValues(ut),ut[0])}if(Te)try{var mt=t(Object((function(){var Rt=new Error("Cannot find module 'crypto'");throw Rt.code="MODULE_NOT_FOUND",Rt})()));return()=>mt.randomBytes(1)[0]}catch{}return()=>zt("randomDevice")})());for(var Ze=0;Ze<Ue;Ze++)d()[ke+Ze>>0>>>0]=Ne.lc();return 0},ia:function(Ne,ke,Ue){var Ze=nn();try{return xn(Ne)(ke,Ue)}catch(ut){if(Zt(Ze),ut!==ut+0)throw ut;ln(1,0)}},ja:function(Ne,ke,Ue){var Ze=nn();try{return xn(Ne)(ke,Ue)}catch(ut){if(Zt(Ze),ut!==ut+0)throw ut;ln(1,0)}},K:function(Ne){var ke=nn();try{return xn(Ne)()}catch(Ue){if(Zt(ke),Ue!==Ue+0)throw Ue;ln(1,0)}},f:function(Ne,ke){var Ue=nn();try{return xn(Ne)(ke)}catch(Ze){if(Zt(Ue),Ze!==Ze+0)throw Ze;ln(1,0)}},P:function(Ne,ke,Ue){var Ze=nn();try{return xn(Ne)(ke,Ue)}catch(ut){if(Zt(Ze),ut!==ut+0)throw ut;ln(1,0)}},Q:function(Ne,ke,Ue){var Ze=nn();try{return xn(Ne)(ke,Ue)}catch(ut){if(Zt(Ze),ut!==ut+0)throw ut;ln(1,0)}},k:function(Ne,ke,Ue){var Ze=nn();try{return xn(Ne)(ke,Ue)}catch(ut){if(Zt(Ze),ut!==ut+0)throw ut;ln(1,0)}},p:function(Ne,ke,Ue,Ze){var ut=nn();try{return xn(Ne)(ke,Ue,Ze)}catch(mt){if(Zt(ut),mt!==mt+0)throw mt;ln(1,0)}},q:function(Ne,ke,Ue,Ze,ut){var mt=nn();try{return xn(Ne)(ke,Ue,Ze,ut)}catch(Rt){if(Zt(mt),Rt!==Rt+0)throw Rt;ln(1,0)}},N:function(Ne,ke,Ue,Ze,ut,mt){var Rt=nn();try{return xn(Ne)(ke,Ue,Ze,ut,mt)}catch(Bt){if(Zt(Rt),Bt!==Bt+0)throw Bt;ln(1,0)}},s:function(Ne,ke,Ue,Ze,ut,mt){var Rt=nn();try{return xn(Ne)(ke,Ue,Ze,ut,mt)}catch(Bt){if(Zt(Rt),Bt!==Bt+0)throw Bt;ln(1,0)}},w:function(Ne,ke,Ue,Ze,ut,mt,Rt){var Bt=nn();try{return xn(Ne)(ke,Ue,Ze,ut,mt,Rt)}catch(Gt){if(Zt(Bt),Gt!==Gt+0)throw Gt;ln(1,0)}},L:function(Ne,ke,Ue,Ze,ut,mt,Rt,Bt){var Gt=nn();try{return xn(Ne)(ke,Ue,Ze,ut,mt,Rt,Bt)}catch(Qt){if(Zt(Gt),Qt!==Qt+0)throw Qt;ln(1,0)}},E:function(Ne,ke,Ue,Ze,ut,mt,Rt,Bt,Gt,Qt,Pn,lr){var hr=nn();try{return xn(Ne)(ke,Ue,Ze,ut,mt,Rt,Bt,Gt,Qt,Pn,lr)}catch(xt){if(Zt(hr),xt!==xt+0)throw xt;ln(1,0)}},aa:function(Ne,ke,Ue,Ze,ut,mt,Rt,Bt){var Gt=nn();try{return Di(Ne,ke,Ue,Ze,ut,mt,Rt,Bt)}catch(Qt){if(Zt(Gt),Qt!==Qt+0)throw Qt;ln(1,0)}},_:function(Ne,ke,Ue,Ze,ut,mt,Rt){var Bt=nn();try{return Os(Ne,ke,Ue,Ze,ut,mt,Rt)}catch(Gt){if(Zt(Bt),Gt!==Gt+0)throw Gt;ln(1,0)}},Z:function(Ne,ke,Ue,Ze,ut){var mt=nn();try{return Dr(Ne,ke,Ue,Ze,ut)}catch(Rt){if(Zt(mt),Rt!==Rt+0)throw Rt;ln(1,0)}},ca:function(Ne,ke,Ue,Ze){var ut=nn();try{return Ms(Ne,ke,Ue,Ze)}catch(mt){if(Zt(ut),mt!==mt+0)throw mt;ln(1,0)}},$:function(Ne){var ke=nn();try{return Rr(Ne)}catch(Ue){if(Zt(ke),Ue!==Ue+0)throw Ue;ln(1,0)}},ba:function(Ne,ke){var Ue=nn();try{return go(Ne,ke)}catch(Ze){if(Zt(Ue),Ze!==Ze+0)throw Ze;ln(1,0)}},Y:function(Ne,ke,Ue){var Ze=nn();try{return Is(Ne,ke,Ue)}catch(ut){if(Zt(Ze),ut!==ut+0)throw ut;ln(1,0)}},g:function(Ne){var ke=nn();try{xn(Ne)()}catch(Ue){if(Zt(ke),Ue!==Ue+0)throw Ue;ln(1,0)}},r:function(Ne,ke){var Ue=nn();try{xn(Ne)(ke)}catch(Ze){if(Zt(Ue),Ze!==Ze+0)throw Ze;ln(1,0)}},i:function(Ne,ke,Ue){var Ze=nn();try{xn(Ne)(ke,Ue)}catch(ut){if(Zt(Ze),ut!==ut+0)throw ut;ln(1,0)}},ha:function(Ne,ke,Ue,Ze){var ut=nn();try{xn(Ne)(ke,Ue,Ze)}catch(mt){if(Zt(ut),mt!==mt+0)throw mt;ln(1,0)}},m:function(Ne,ke,Ue,Ze){var ut=nn();try{xn(Ne)(ke,Ue,Ze)}catch(mt){if(Zt(ut),mt!==mt+0)throw mt;ln(1,0)}},v:function(Ne,ke,Ue,Ze,ut){var mt=nn();try{xn(Ne)(ke,Ue,Ze,ut)}catch(Rt){if(Zt(mt),Rt!==Rt+0)throw Rt;ln(1,0)}},u:function(Ne,ke,Ue,Ze,ut,mt){var Rt=nn();try{xn(Ne)(ke,Ue,Ze,ut,mt)}catch(Bt){if(Zt(Rt),Bt!==Bt+0)throw Bt;ln(1,0)}},O:function(Ne,ke,Ue,Ze,ut,mt,Rt){var Bt=nn();try{xn(Ne)(ke,Ue,Ze,ut,mt,Rt)}catch(Gt){if(Zt(Bt),Gt!==Gt+0)throw Gt;ln(1,0)}},A:function(Ne,ke,Ue,Ze,ut,mt,Rt,Bt){var Gt=nn();try{xn(Ne)(ke,Ue,Ze,ut,mt,Rt,Bt)}catch(Qt){if(Zt(Gt),Qt!==Qt+0)throw Qt;ln(1,0)}},ka:function(Ne,ke,Ue,Ze,ut,mt,Rt,Bt,Gt){var Qt=nn();try{xn(Ne)(ke,Ue,Ze,ut,mt,Rt,Bt,Gt)}catch(Pn){if(Zt(Qt),Pn!==Pn+0)throw Pn;ln(1,0)}},C:function(Ne,ke,Ue,Ze,ut,mt,Rt,Bt,Gt,Qt,Pn){var lr=nn();try{xn(Ne)(ke,Ue,Ze,ut,mt,Rt,Bt,Gt,Qt,Pn)}catch(hr){if(Zt(lr),hr!==hr+0)throw hr;ln(1,0)}},D:function(Ne,ke,Ue,Ze,ut,mt,Rt,Bt,Gt,Qt,Pn,lr,hr,xt,dn,In){var pr=nn();try{xn(Ne)(ke,Ue,Ze,ut,mt,Rt,Bt,Gt,Qt,Pn,lr,hr,xt,dn,In)}catch(li){if(Zt(pr),li!==li+0)throw li;ln(1,0)}},fa:function(Ne,ke,Ue,Ze,ut,mt,Rt,Bt){var Gt=nn();try{si(Ne,ke,Ue,Ze,ut,mt,Rt,Bt)}catch(Qt){if(Zt(Gt),Qt!==Qt+0)throw Qt;ln(1,0)}},da:function(Ne,ke,Ue,Ze,ut,mt,Rt,Bt,Gt,Qt,Pn,lr){var hr=nn();try{mo(Ne,ke,Ue,Ze,ut,mt,Rt,Bt,Gt,Qt,Pn,lr)}catch(xt){if(Zt(hr),xt!==xt+0)throw xt;ln(1,0)}},ea:function(Ne,ke,Ue,Ze,ut,mt){var Rt=nn();try{oi(Ne,ke,Ue,Ze,ut,mt)}catch(Bt){if(Zt(Rt),Bt!==Bt+0)throw Bt;ln(1,0)}},o:function(Ne){return Ne},a:Ke||o.wasmMemory,G:function(Ne){er=Ne},la:lo,z:function(Ne,ke,Ue,Ze){return lo(Ne,ke,Ue,Ze)}};(function(){function Ne(ut,mt){o.asm=ut.exports,It.qc.push(o.asm.sb),Vn=o.asm.ub,Yn.unshift(o.asm.Va),qe=mt,Ce||(sn--,o.monitorRunDependencies&&o.monitorRunDependencies(sn),sn==0&&wn&&(ut=wn,wn=null,ut()))}function ke(ut){Ne(ut.instance,ut.module)}function Ue(ut){return(function(){if(!Xe&&(Ae||Re)){if(typeof fetch=="function"&&!Ut.startsWith("file://"))return fetch(Ut,{credentials:"same-origin"}).then((function(mt){if(!mt.ok)throw"failed to load wasm binary file at '"+Ut+"'";return mt.arrayBuffer()})).catch((function(){return Le()}));if(ue)return new Promise((function(mt,Rt){ue(Ut,(function(Bt){mt(new Uint8Array(Bt))}),Rt)}))}return Promise.resolve().then((function(){return Le()}))})().then((function(mt){return WebAssembly.instantiate(mt,Ze)})).then((function(mt){return mt})).then(ut,(function(mt){je("failed to asynchronously prepare wasm: "+mt),zt(mt)}))}var Ze={a:uo};if(Ce||(sn++,o.monitorRunDependencies&&o.monitorRunDependencies(sn)),o.instantiateWasm)try{return o.instantiateWasm(Ze,Ne)}catch(ut){return je("Module.instantiateWasm callback failed with error: "+ut),!1}(Xe||typeof WebAssembly.instantiateStreaming!="function"||Zn()||Ut.startsWith("file://")||Te||typeof fetch!="function"?Ue(ke):fetch(Ut,{credentials:"same-origin"}).then((function(ut){return WebAssembly.instantiateStreaming(ut,Ze).then(ke,(function(mt){return je("wasm streaming compile failed: "+mt),je("falling back to ArrayBuffer instantiation"),Ue(ke)}))}))).catch(w)})(),o.___wasm_call_ctors=function(){return(o.___wasm_call_ctors=o.asm.Va).apply(null,arguments)},o._OrtInit=function(){return(o._OrtInit=o.asm.Wa).apply(null,arguments)},o._OrtCreateSessionOptions=function(){return(o._OrtCreateSessionOptions=o.asm.Xa).apply(null,arguments)},o._OrtAppendExecutionProvider=function(){return(o._OrtAppendExecutionProvider=o.asm.Ya).apply(null,arguments)},o._OrtAddSessionConfigEntry=function(){return(o._OrtAddSessionConfigEntry=o.asm.Za).apply(null,arguments)},o._OrtReleaseSessionOptions=function(){return(o._OrtReleaseSessionOptions=o.asm._a).apply(null,arguments)},o._OrtCreateSession=function(){return(o._OrtCreateSession=o.asm.$a).apply(null,arguments)},o._OrtReleaseSession=function(){return(o._OrtReleaseSession=o.asm.ab).apply(null,arguments)},o._OrtGetInputCount=function(){return(o._OrtGetInputCount=o.asm.bb).apply(null,arguments)},o._OrtGetOutputCount=function(){return(o._OrtGetOutputCount=o.asm.cb).apply(null,arguments)},o._OrtGetInputName=function(){return(o._OrtGetInputName=o.asm.db).apply(null,arguments)},o._OrtGetOutputName=function(){return(o._OrtGetOutputName=o.asm.eb).apply(null,arguments)},o._OrtFree=function(){return(o._OrtFree=o.asm.fb).apply(null,arguments)},o._OrtCreateTensor=function(){return(o._OrtCreateTensor=o.asm.gb).apply(null,arguments)},o._OrtGetTensorData=function(){return(o._OrtGetTensorData=o.asm.hb).apply(null,arguments)},o._OrtReleaseTensor=function(){return(o._OrtReleaseTensor=o.asm.ib).apply(null,arguments)},o._OrtCreateRunOptions=function(){return(o._OrtCreateRunOptions=o.asm.jb).apply(null,arguments)},o._OrtAddRunConfigEntry=function(){return(o._OrtAddRunConfigEntry=o.asm.kb).apply(null,arguments)},o._OrtReleaseRunOptions=function(){return(o._OrtReleaseRunOptions=o.asm.lb).apply(null,arguments)},o._OrtRun=function(){return(o._OrtRun=o.asm.mb).apply(null,arguments)},o._OrtEndProfiling=function(){return(o._OrtEndProfiling=o.asm.nb).apply(null,arguments)};var rs=o._pthread_self=function(){return(rs=o._pthread_self=o.asm.ob).apply(null,arguments)},Ni=o._malloc=function(){return(Ni=o._malloc=o.asm.pb).apply(null,arguments)},ra=o._free=function(){return(ra=o._free=o.asm.qb).apply(null,arguments)},cr=o._fflush=function(){return(cr=o._fflush=o.asm.rb).apply(null,arguments)};o.__emscripten_tls_init=function(){return(o.__emscripten_tls_init=o.asm.sb).apply(null,arguments)};var Es=o.___funcs_on_exit=function(){return(Es=o.___funcs_on_exit=o.asm.tb).apply(null,arguments)},co=o.__emscripten_thread_init=function(){return(co=o.__emscripten_thread_init=o.asm.vb).apply(null,arguments)};o.__emscripten_thread_crashed=function(){return(o.__emscripten_thread_crashed=o.asm.wb).apply(null,arguments)};var Ri,ri=o._emscripten_run_in_main_runtime_thread_js=function(){return(ri=o._emscripten_run_in_main_runtime_thread_js=o.asm.xb).apply(null,arguments)},fo=o.__emscripten_proxy_execute_task_queue=function(){return(fo=o.__emscripten_proxy_execute_task_queue=o.asm.yb).apply(null,arguments)},Ss=o.__emscripten_thread_free_data=function(){return(Ss=o.__emscripten_thread_free_data=o.asm.zb).apply(null,arguments)},ii=o.__emscripten_thread_exit=function(){return(ii=o.__emscripten_thread_exit=o.asm.Ab).apply(null,arguments)},ln=o._setThrew=function(){return(ln=o._setThrew=o.asm.Bb).apply(null,arguments)},ho=o._emscripten_stack_set_limits=function(){return(ho=o._emscripten_stack_set_limits=o.asm.Cb).apply(null,arguments)},nn=o.stackSave=function(){return(nn=o.stackSave=o.asm.Db).apply(null,arguments)},Zt=o.stackRestore=function(){return(Zt=o.stackRestore=o.asm.Eb).apply(null,arguments)},po=o.stackAlloc=function(){return(po=o.stackAlloc=o.asm.Fb).apply(null,arguments)},As=o.___cxa_can_catch=function(){return(As=o.___cxa_can_catch=o.asm.Gb).apply(null,arguments)},is=o.___cxa_is_pointer_type=function(){return(is=o.___cxa_is_pointer_type=o.asm.Hb).apply(null,arguments)},Rr=o.dynCall_j=function(){return(Rr=o.dynCall_j=o.asm.Ib).apply(null,arguments)},Os=o.dynCall_iiiiij=function(){return(Os=o.dynCall_iiiiij=o.asm.Jb).apply(null,arguments)},Is=o.dynCall_jii=function(){return(Is=o.dynCall_jii=o.asm.Kb).apply(null,arguments)},si=o.dynCall_viiiiij=function(){return(si=o.dynCall_viiiiij=o.asm.Lb).apply(null,arguments)},oi=o.dynCall_vjji=function(){return(oi=o.dynCall_vjji=o.asm.Mb).apply(null,arguments)},mo=o.dynCall_viiijjjii=function(){return(mo=o.dynCall_viiijjjii=o.asm.Nb).apply(null,arguments)},Ms=o.dynCall_iij=function(){return(Ms=o.dynCall_iij=o.asm.Ob).apply(null,arguments)},go=o.dynCall_ji=function(){return(go=o.dynCall_ji=o.asm.Pb).apply(null,arguments)},Di=o.dynCall_iiiiiij=function(){return(Di=o.dynCall_iiiiiij=o.asm.Qb).apply(null,arguments)},Dr=o.dynCall_iiij=function(){return(Dr=o.dynCall_iiij=o.asm.Rb).apply(null,arguments)};function Ns(){function Ne(){if(!Ri&&(Ri=!0,o.calledRun=!0,!vt)&&(Ce||an(Yn),i(o),o.onRuntimeInitialized&&o.onRuntimeInitialized(),!Ce)){if(o.postRun)for(typeof o.postRun=="function"&&(o.postRun=[o.postRun]);o.postRun.length;){var ke=o.postRun.shift();yt.unshift(ke)}an(yt)}}if(!(0<sn))if(Ce)i(o),Ce||an(Yn),postMessage({cmd:"loaded"});else{if(o.preRun)for(typeof o.preRun=="function"&&(o.preRun=[o.preRun]);o.preRun.length;)Kt();an(qn),0<sn||(o.setStatus?(o.setStatus("Running..."),setTimeout((function(){setTimeout((function(){o.setStatus("")}),1),Ne()}),1)):Ne())}}if(o.UTF8ToString=jt,o.stringToUTF8=function(Ne,ke,Ue){return tn(Ne,A(),ke,Ue)},o.lengthBytesUTF8=Sn,o.keepRuntimeAlive=$t,o.wasmMemory=Ke,o.stackSave=nn,o.stackRestore=Zt,o.stackAlloc=po,o.ExitStatus=Oe,o.PThread=It,wn=function Ne(){Ri||Ns(),Ri||(wn=Ne)},o.preInit)for(typeof o.preInit=="function"&&(o.preInit=[o.preInit]);0<o.preInit.length;)o.preInit.pop()();return Ns(),T.ready});n.exports=u},932:(n,e,t)=>{var r,u=(r=(r=typeof document<"u"&&document.currentScript?document.currentScript.src:void 0)||"/index.js",function(T){var d,A,le;T=T||{},d||(d=T!==void 0?T:{}),d.ready=new Promise((function(Be,We){A=Be,le=We}));var G,B,o,i,w,ae,ue=Object.assign({},d),he="./this.program",pe=(Be,We)=>{throw We},ge=typeof window=="object",be=typeof importScripts=="function",ve=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string",we="";ve?(we=be?t(908).dirname(we)+"/":"//",ae=()=>{w||(i=t(1384),w=t(908))},G=function(Be,We){return ae(),Be=w.normalize(Be),i.readFileSync(Be,We?void 0:"utf8")},o=Be=>((Be=G(Be,!0)).buffer||(Be=new Uint8Array(Be)),Be),B=(Be,We,rt)=>{ae(),Be=w.normalize(Be),i.readFile(Be,(function(lt,pt){lt?rt(lt):We(pt.buffer)}))},1<process.argv.length&&(he=process.argv[1].replace(/\\/g,"/")),process.argv.slice(2),process.on("uncaughtException",(function(Be){if(!(Be instanceof Yn))throw Be})),process.on("unhandledRejection",(function(Be){throw Be})),pe=(Be,We)=>{if(Te||0<Dt)throw process.exitCode=Be,We;We instanceof Yn||Re("exiting due to exception: "+We),process.exit(Be)},d.inspect=function(){return"[Emscripten Module object]"}):(ge||be)&&(be?we=self.location.href:typeof document<"u"&&document.currentScript&&(we=document.currentScript.src),r&&(we=r),we=we.indexOf("blob:")!==0?we.substr(0,we.replace(/[?#].*/,"").lastIndexOf("/")+1):"",G=Be=>{var We=new XMLHttpRequest;return We.open("GET",Be,!1),We.send(null),We.responseText},be&&(o=Be=>{var We=new XMLHttpRequest;return We.open("GET",Be,!1),We.responseType="arraybuffer",We.send(null),new Uint8Array(We.response)}),B=(Be,We,rt)=>{var lt=new XMLHttpRequest;lt.open("GET",Be,!0),lt.responseType="arraybuffer",lt.onload=()=>{lt.status==200||lt.status==0&&lt.response?We(lt.response):rt()},lt.onerror=rt,lt.send(null)});var Se,Ae=d.print||console.log.bind(console),Re=d.printErr||console.warn.bind(console);Object.assign(d,ue),ue=null,d.thisProgram&&(he=d.thisProgram),d.quit&&(pe=d.quit),d.wasmBinary&&(Se=d.wasmBinary);var Te=d.noExitRuntime||!1;typeof WebAssembly!="object"&&fn("no native wasm support detected");var Ce,Ve,$e,He,De,Xe,Me=!1,je=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0;function it(Be,We,rt){var lt=(We>>>=0)+rt;for(rt=We;Be[rt]&&!(rt>=lt);)++rt;if(16<rt-We&&Be.buffer&&je)return je.decode(Be.subarray(We,rt));for(lt="";We<rt;){var pt=Be[We++];if(128&pt){var wt=63&Be[We++];if((224&pt)==192)lt+=String.fromCharCode((31&pt)<<6|wt);else{var Nt=63&Be[We++];65536>(pt=(240&pt)==224?(15&pt)<<12|wt<<6|Nt:(7&pt)<<18|wt<<12|Nt<<6|63&Be[We++])?lt+=String.fromCharCode(pt):(pt-=65536,lt+=String.fromCharCode(55296|pt>>10,56320|1023&pt))}}else lt+=String.fromCharCode(pt)}return lt}function Ke(Be,We){return(Be>>>=0)?it(He,Be,We):""}function qe(Be,We,rt,lt){if(!(0<lt))return 0;var pt=rt>>>=0;lt=rt+lt-1;for(var wt=0;wt<Be.length;++wt){var Nt=Be.charCodeAt(wt);if(55296<=Nt&&57343>=Nt&&(Nt=65536+((1023&Nt)<<10)|1023&Be.charCodeAt(++wt)),127>=Nt){if(rt>=lt)break;We[rt++>>>0]=Nt}else{if(2047>=Nt){if(rt+1>=lt)break;We[rt++>>>0]=192|Nt>>6}else{if(65535>=Nt){if(rt+2>=lt)break;We[rt++>>>0]=224|Nt>>12}else{if(rt+3>=lt)break;We[rt++>>>0]=240|Nt>>18,We[rt++>>>0]=128|Nt>>12&63}We[rt++>>>0]=128|Nt>>6&63}We[rt++>>>0]=128|63&Nt}}return We[rt>>>0]=0,rt-pt}function Pe(Be){for(var We=0,rt=0;rt<Be.length;++rt){var lt=Be.charCodeAt(rt);127>=lt?We++:2047>=lt?We+=2:55296<=lt&&57343>=lt?(We+=4,++rt):We+=3}return We}function et(){var Be=Ce.buffer;Ve=Be,d.HEAP8=$e=new Int8Array(Be),d.HEAP16=new Int16Array(Be),d.HEAP32=De=new Int32Array(Be),d.HEAPU8=He=new Uint8Array(Be),d.HEAPU16=new Uint16Array(Be),d.HEAPU32=Xe=new Uint32Array(Be),d.HEAPF32=new Float32Array(Be),d.HEAPF64=new Float64Array(Be)}var Je,at=[],tt=[],Tt=[],vt=[],Dt=0;function Pt(){var Be=d.preRun.shift();at.unshift(Be)}var jt,tn=0,Sn=null;function fn(Be){throw d.onAbort&&d.onAbort(Be),Re(Be="Aborted("+Be+")"),Me=!0,Be=new WebAssembly.RuntimeError(Be+". Build with -sASSERTIONS for more info."),le(Be),Be}function Jt(){return jt.startsWith("data:application/octet-stream;base64,")}if(jt="ort-wasm.wasm",!Jt()){var Vn=jt;jt=d.locateFile?d.locateFile(Vn,we):we+Vn}function qn(){var Be=jt;try{if(Be==jt&&Se)return new Uint8Array(Se);if(o)return o(Be);throw"both async and sync fetching of the wasm failed"}catch(We){fn(We)}}function Yn(Be){this.name="ExitStatus",this.message="Program terminated with exit("+Be+")",this.status=Be}function nr(Be){for(;0<Be.length;)Be.shift()(d)}var yt=[],$t=0,Kt=0;function Ut(Be){this.Db=Be,this.zb=Be-24,this.Ub=function(We){Xe[this.zb+4>>2>>>0]=We},this.Eb=function(){return Xe[this.zb+4>>2>>>0]},this.Sb=function(We){Xe[this.zb+8>>2>>>0]=We},this.Wb=function(){return Xe[this.zb+8>>2>>>0]},this.Tb=function(){De[this.zb>>2>>>0]=0},this.Ib=function(We){$e[this.zb+12>>0>>>0]=We?1:0},this.Pb=function(){return $e[this.zb+12>>0>>>0]!=0},this.Jb=function(We){$e[this.zb+13>>0>>>0]=We?1:0},this.Lb=function(){return $e[this.zb+13>>0>>>0]!=0},this.Rb=function(We,rt){this.Fb(0),this.Ub(We),this.Sb(rt),this.Tb(),this.Ib(!1),this.Jb(!1)},this.Nb=function(){De[this.zb>>2>>>0]+=1},this.Xb=function(){var We=De[this.zb>>2>>>0];return De[this.zb>>2>>>0]=We-1,We===1},this.Fb=function(We){Xe[this.zb+16>>2>>>0]=We},this.Ob=function(){return Xe[this.zb+16>>2>>>0]},this.Qb=function(){if(Jr(this.Eb()))return Xe[this.Db>>2>>>0];var We=this.Ob();return We!==0?We:this.Db}}function sn(Be){return Ir(new Ut(Be).zb)}var wn=[];function zt(Be){var We=wn[Be];return We||(Be>=wn.length&&(wn.length=Be+1),wn[Be]=We=Je.get(Be)),We}function Zn(Be){var We=Pe(Be)+1,rt=xn(We);return rt&&qe(Be,$e,rt,We),rt}var Le={};function Ee(){if(!Oe){var Be,We={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:(typeof navigator=="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:he||"./this.program"};for(Be in Le)Le[Be]===void 0?delete We[Be]:We[Be]=Le[Be];var rt=[];for(Be in We)rt.push(Be+"="+We[Be]);Oe=rt}return Oe}var Oe,ze=[null,[],[]];function st(Be,We){var rt=ze[Be];We===0||We===10?((Be===1?Ae:Re)(it(rt,0)),rt.length=0):rt.push(We)}var ct=0;function Et(Be){return Be%4==0&&(Be%100!=0||Be%400==0)}var It=[31,29,31,30,31,30,31,31,30,31,30,31],an=[31,28,31,30,31,30,31,31,30,31,30,31];function en(Be,We,rt,lt){function pt(bt,cn,vn){for(bt=typeof bt=="number"?bt.toString():bt||"";bt.length<cn;)bt=vn[0]+bt;return bt}function wt(bt,cn){return pt(bt,cn,"0")}function Nt(bt,cn){function vn(zr){return 0>zr?-1:0<zr?1:0}var Jn;return(Jn=vn(bt.getFullYear()-cn.getFullYear()))===0&&(Jn=vn(bt.getMonth()-cn.getMonth()))===0&&(Jn=vn(bt.getDate()-cn.getDate())),Jn}function kt(bt){switch(bt.getDay()){case 0:return new Date(bt.getFullYear()-1,11,29);case 1:return bt;case 2:return new Date(bt.getFullYear(),0,3);case 3:return new Date(bt.getFullYear(),0,2);case 4:return new Date(bt.getFullYear(),0,1);case 5:return new Date(bt.getFullYear()-1,11,31);case 6:return new Date(bt.getFullYear()-1,11,30)}}function Ct(bt){var cn=bt.Bb;for(bt=new Date(new Date(bt.Cb+1900,0,1).getTime());0<cn;){var vn=bt.getMonth(),Jn=(Et(bt.getFullYear())?It:an)[vn];if(!(cn>Jn-bt.getDate())){bt.setDate(bt.getDate()+cn);break}cn-=Jn-bt.getDate()+1,bt.setDate(1),11>vn?bt.setMonth(vn+1):(bt.setMonth(0),bt.setFullYear(bt.getFullYear()+1))}return vn=new Date(bt.getFullYear()+1,0,4),cn=kt(new Date(bt.getFullYear(),0,4)),vn=kt(vn),0>=Nt(cn,bt)?0>=Nt(vn,bt)?bt.getFullYear()+1:bt.getFullYear():bt.getFullYear()-1}var Xt=De[lt+40>>2>>>0];for(var _n in lt={$b:De[lt>>2>>>0],Zb:De[lt+4>>2>>>0],Gb:De[lt+8>>2>>>0],Kb:De[lt+12>>2>>>0],Hb:De[lt+16>>2>>>0],Cb:De[lt+20>>2>>>0],Ab:De[lt+24>>2>>>0],Bb:De[lt+28>>2>>>0],bc:De[lt+32>>2>>>0],Yb:De[lt+36>>2>>>0],ac:Xt?Ke(Xt):""},rt=Ke(rt),Xt={"%c":"%a %b %d %H:%M:%S %Y","%D":"%m/%d/%y","%F":"%Y-%m-%d","%h":"%b","%r":"%I:%M:%S %p","%R":"%H:%M","%T":"%H:%M:%S","%x":"%m/%d/%y","%X":"%H:%M:%S","%Ec":"%c","%EC":"%C","%Ex":"%m/%d/%y","%EX":"%H:%M:%S","%Ey":"%y","%EY":"%Y","%Od":"%d","%Oe":"%e","%OH":"%H","%OI":"%I","%Om":"%m","%OM":"%M","%OS":"%S","%Ou":"%u","%OU":"%U","%OV":"%V","%Ow":"%w","%OW":"%W","%Oy":"%y"})rt=rt.replace(new RegExp(_n,"g"),Xt[_n]);var kn="Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),hn="January February March April May June July August September October November December".split(" ");for(_n in Xt={"%a":function(bt){return kn[bt.Ab].substring(0,3)},"%A":function(bt){return kn[bt.Ab]},"%b":function(bt){return hn[bt.Hb].substring(0,3)},"%B":function(bt){return hn[bt.Hb]},"%C":function(bt){return wt((bt.Cb+1900)/100|0,2)},"%d":function(bt){return wt(bt.Kb,2)},"%e":function(bt){return pt(bt.Kb,2," ")},"%g":function(bt){return Ct(bt).toString().substring(2)},"%G":function(bt){return Ct(bt)},"%H":function(bt){return wt(bt.Gb,2)},"%I":function(bt){return(bt=bt.Gb)==0?bt=12:12<bt&&(bt-=12),wt(bt,2)},"%j":function(bt){for(var cn=0,vn=0;vn<=bt.Hb-1;cn+=(Et(bt.Cb+1900)?It:an)[vn++]);return wt(bt.Kb+cn,3)},"%m":function(bt){return wt(bt.Hb+1,2)},"%M":function(bt){return wt(bt.Zb,2)},"%n":function(){return`
`},"%p":function(bt){return 0<=bt.Gb&&12>bt.Gb?"AM":"PM"},"%S":function(bt){return wt(bt.$b,2)},"%t":function(){return"	"},"%u":function(bt){return bt.Ab||7},"%U":function(bt){return wt(Math.floor((bt.Bb+7-bt.Ab)/7),2)},"%V":function(bt){var cn=Math.floor((bt.Bb+7-(bt.Ab+6)%7)/7);if(2>=(bt.Ab+371-bt.Bb-2)%7&&cn++,cn)cn==53&&((vn=(bt.Ab+371-bt.Bb)%7)==4||vn==3&&Et(bt.Cb)||(cn=1));else{cn=52;var vn=(bt.Ab+7-bt.Bb-1)%7;(vn==4||vn==5&&Et(bt.Cb%400-1))&&cn++}return wt(cn,2)},"%w":function(bt){return bt.Ab},"%W":function(bt){return wt(Math.floor((bt.Bb+7-(bt.Ab+6)%7)/7),2)},"%y":function(bt){return(bt.Cb+1900).toString().substring(2)},"%Y":function(bt){return bt.Cb+1900},"%z":function(bt){var cn=0<=(bt=bt.Yb);return bt=Math.abs(bt)/60,(cn?"+":"-")+("0000"+(bt/60*100+bt%60)).slice(-4)},"%Z":function(bt){return bt.ac},"%%":function(){return"%"}},rt=rt.replace(/%%/g,"\0\0"),Xt)rt.includes(_n)&&(rt=rt.replace(new RegExp(_n,"g"),Xt[_n](lt)));return _n=(function(bt){var cn=Array(Pe(bt)+1);return qe(bt,cn,0,cn.length),cn})(rt=rt.replace(/\0\0/g,"%")),_n.length>We?0:($e.set(_n,Be>>>0),_n.length-1)}var On={a:function(Be){return xn(Be+24)+24},m:function(Be){return(Be=new Ut(Be)).Pb()||(Be.Ib(!0),$t--),Be.Jb(!1),yt.push(Be),Be.Nb(),Be.Qb()},ia:function(Be){throw Re("Unexpected exception thrown, this is not properly supported - aborting"),Me=!0,Be},w:function(){qt(0);var Be=yt.pop();if(Be.Xb()&&!Be.Lb()){var We=Be.Wb();We&&zt(We)(Be.Db),sn(Be.Db)}Kt=0},d:function(){var Be=Kt;if(!Be)return ct=0;var We=new Ut(Be);We.Fb(Be);var rt=We.Eb();if(!rt)return ct=0,Be;for(var lt=Array.prototype.slice.call(arguments),pt=0;pt<lt.length;pt++){var wt=lt[pt];if(wt===0||wt===rt)break;if(Yr(wt,rt,We.zb+16))return ct=wt,Be}return ct=rt,Be},k:function(){var Be=Kt;if(!Be)return ct=0;var We=new Ut(Be);We.Fb(Be);var rt=We.Eb();if(!rt)return ct=0,Be;for(var lt=Array.prototype.slice.call(arguments),pt=0;pt<lt.length;pt++){var wt=lt[pt];if(wt===0||wt===rt)break;if(Yr(wt,rt,We.zb+16))return ct=wt,Be}return ct=rt,Be},g:function(){var Be=Kt;if(!Be)return ct=0;var We=new Ut(Be);We.Fb(Be);var rt=We.Eb();if(!rt)return ct=0,Be;for(var lt=Array.prototype.slice.call(arguments),pt=0;pt<lt.length;pt++){var wt=lt[pt];if(wt===0||wt===rt)break;if(Yr(wt,rt,We.zb+16))return ct=wt,Be}return ct=rt,Be},s:sn,L:function(){var Be=yt.pop();Be||fn("no exception to throw");var We=Be.Db;throw Be.Lb()||(yt.push(Be),Be.Jb(!0),Be.Ib(!1),$t++),Kt=We,We},b:function(Be,We,rt){throw new Ut(Be).Rb(We,rt),Kt=Be,$t++,Be},la:function(){return $t},i:function(Be){throw Kt||(Kt=Be),Be},H:function(){return 0},Ba:function(){},pa:function(){},ra:function(){},ka:function(){return 0},za:function(){},ua:function(){},ya:function(){},R:function(){},qa:function(){},na:function(){},Aa:function(){},oa:function(){},Ha:function(){},Ja:function(){fn("To use dlopen, you need enable dynamic linking, see https://github.com/emscripten-core/emscripten/wiki/Linking")},Ia:function(){fn("To use dlopen, you need enable dynamic linking, see https://github.com/emscripten-core/emscripten/wiki/Linking")},S:function(){return Date.now()},Ca:function(){return!0},Da:function(Be,We){Be=new Date(1e3*(Xe[Be>>>2]+4294967296*De[Be+4>>>2])),De[We>>2>>>0]=Be.getUTCSeconds(),De[We+4>>2>>>0]=Be.getUTCMinutes(),De[We+8>>2>>>0]=Be.getUTCHours(),De[We+12>>2>>>0]=Be.getUTCDate(),De[We+16>>2>>>0]=Be.getUTCMonth(),De[We+20>>2>>>0]=Be.getUTCFullYear()-1900,De[We+24>>2>>>0]=Be.getUTCDay(),De[We+28>>2>>>0]=(Be.getTime()-Date.UTC(Be.getUTCFullYear(),0,1,0,0,0,0))/864e5|0},Ea:function(Be,We){Be=new Date(1e3*(Xe[Be>>>2]+4294967296*De[Be+4>>>2])),De[We>>2>>>0]=Be.getSeconds(),De[We+4>>2>>>0]=Be.getMinutes(),De[We+8>>2>>>0]=Be.getHours(),De[We+12>>2>>>0]=Be.getDate(),De[We+16>>2>>>0]=Be.getMonth(),De[We+20>>2>>>0]=Be.getFullYear()-1900,De[We+24>>2>>>0]=Be.getDay();var rt=new Date(Be.getFullYear(),0,1);De[We+28>>2>>>0]=(Be.getTime()-rt.getTime())/864e5|0,De[We+36>>2>>>0]=-60*Be.getTimezoneOffset();var lt=new Date(Be.getFullYear(),6,1).getTimezoneOffset();rt=rt.getTimezoneOffset(),De[We+32>>2>>>0]=0|(lt!=rt&&Be.getTimezoneOffset()==Math.min(rt,lt))},Fa:function(Be){var We=new Date(De[Be+20>>2>>>0]+1900,De[Be+16>>2>>>0],De[Be+12>>2>>>0],De[Be+8>>2>>>0],De[Be+4>>2>>>0],De[Be>>2>>>0],0),rt=De[Be+32>>2>>>0],lt=We.getTimezoneOffset(),pt=new Date(We.getFullYear(),0,1),wt=new Date(We.getFullYear(),6,1).getTimezoneOffset(),Nt=pt.getTimezoneOffset(),kt=Math.min(Nt,wt);return 0>rt?De[Be+32>>2>>>0]=+(wt!=Nt&&kt==lt):0<rt!=(kt==lt)&&(wt=Math.max(Nt,wt),We.setTime(We.getTime()+6e4*((0<rt?kt:wt)-lt))),De[Be+24>>2>>>0]=We.getDay(),De[Be+28>>2>>>0]=(We.getTime()-pt.getTime())/864e5|0,De[Be>>2>>>0]=We.getSeconds(),De[Be+4>>2>>>0]=We.getMinutes(),De[Be+8>>2>>>0]=We.getHours(),De[Be+12>>2>>>0]=We.getDate(),De[Be+16>>2>>>0]=We.getMonth(),We.getTime()/1e3|0},sa:function(){return-52},ta:function(){},Ga:function Be(We,rt,lt){Be.Vb||(Be.Vb=!0,(function(pt,wt,Nt){function kt(hn){return(hn=hn.toTimeString().match(/\(([A-Za-z ]+)\)$/))?hn[1]:"GMT"}var Ct=new Date().getFullYear(),Xt=new Date(Ct,0,1),_n=new Date(Ct,6,1);Ct=Xt.getTimezoneOffset();var kn=_n.getTimezoneOffset();De[pt>>2>>>0]=60*Math.max(Ct,kn),De[wt>>2>>>0]=+(Ct!=kn),pt=kt(Xt),wt=kt(_n),pt=Zn(pt),wt=Zn(wt),kn<Ct?(Xe[Nt>>2>>>0]=pt,Xe[Nt+4>>2>>>0]=wt):(Xe[Nt>>2>>>0]=wt,Xe[Nt+4>>2>>>0]=pt)})(We,rt,lt))},B:function(){fn("")},ma:function(){return 4294901760},I:ve?()=>{var Be=process.hrtime();return 1e3*Be[0]+Be[1]/1e6}:()=>performance.now(),xa:function(Be,We,rt){He.copyWithin(Be>>>0,We>>>0,We+rt>>>0)},G:function(Be){var We=He.length;if(4294901760<(Be>>>=0))return!1;for(var rt=1;4>=rt;rt*=2){var lt=We*(1+.2/rt);lt=Math.min(lt,Be+100663296);var pt=Math;lt=Math.max(Be,lt),pt=pt.min.call(pt,4294901760,lt+(65536-lt%65536)%65536);e:{try{Ce.grow(pt-Ve.byteLength+65535>>>16),et();var wt=1;break e}catch{}wt=void 0}if(wt)return!0}return!1},va:function(Be,We){var rt=0;return Ee().forEach((function(lt,pt){var wt=We+rt;for(pt=Xe[Be+4*pt>>2>>>0]=wt,wt=0;wt<lt.length;++wt)$e[pt++>>0>>>0]=lt.charCodeAt(wt);$e[pt>>0>>>0]=0,rt+=lt.length+1})),0},wa:function(Be,We){var rt=Ee();Xe[Be>>2>>>0]=rt.length;var lt=0;return rt.forEach((function(pt){lt+=pt.length+1})),Xe[We>>2>>>0]=lt,0},ba:function(Be){Te||0<Dt||(Mr(),nr(Tt),qr(0),ze[1].length&&st(1,10),ze[2].length&&st(2,10)),Te||0<Dt||(d.onExit&&d.onExit(Be),Me=!0),pe(Be,new Yn(Be))},E:function(){return 52},Q:function(){return 52},ca:function(){return 70},P:function(Be,We,rt,lt){for(var pt=0,wt=0;wt<rt;wt++){var Nt=Xe[We>>2>>>0],kt=Xe[We+4>>2>>>0];We+=8;for(var Ct=0;Ct<kt;Ct++)st(Be,He[Nt+Ct>>>0]);pt+=kt}return Xe[lt>>2>>>0]=pt,0},c:function(){return ct},ja:function Be(We,rt){Be.Mb||(Be.Mb=(function(){if(typeof crypto=="object"&&typeof crypto.getRandomValues=="function"){var pt=new Uint8Array(1);return()=>(crypto.getRandomValues(pt),pt[0])}if(ve)try{var wt=t(Object((function(){var Nt=new Error("Cannot find module 'crypto'");throw Nt.code="MODULE_NOT_FOUND",Nt})()));return()=>wt.randomBytes(1)[0]}catch{}return()=>fn("randomDevice")})());for(var lt=0;lt<rt;lt++)$e[We+lt>>0>>>0]=Be.Mb();return 0},ea:function(Be,We,rt){var lt=Ht();try{return zt(Be)(We,rt)}catch(pt){if(Yt(lt),pt!==pt+0)throw pt;qt(1,0)}},fa:function(Be,We,rt){var lt=Ht();try{return zt(Be)(We,rt)}catch(pt){if(Yt(lt),pt!==pt+0)throw pt;qt(1,0)}},J:function(Be){var We=Ht();try{return zt(Be)()}catch(rt){if(Yt(We),rt!==rt+0)throw rt;qt(1,0)}},e:function(Be,We){var rt=Ht();try{return zt(Be)(We)}catch(lt){if(Yt(rt),lt!==lt+0)throw lt;qt(1,0)}},N:function(Be,We,rt){var lt=Ht();try{return zt(Be)(We,rt)}catch(pt){if(Yt(lt),pt!==pt+0)throw pt;qt(1,0)}},O:function(Be,We,rt){var lt=Ht();try{return zt(Be)(We,rt)}catch(pt){if(Yt(lt),pt!==pt+0)throw pt;qt(1,0)}},j:function(Be,We,rt){var lt=Ht();try{return zt(Be)(We,rt)}catch(pt){if(Yt(lt),pt!==pt+0)throw pt;qt(1,0)}},o:function(Be,We,rt,lt){var pt=Ht();try{return zt(Be)(We,rt,lt)}catch(wt){if(Yt(pt),wt!==wt+0)throw wt;qt(1,0)}},p:function(Be,We,rt,lt,pt){var wt=Ht();try{return zt(Be)(We,rt,lt,pt)}catch(Nt){if(Yt(wt),Nt!==Nt+0)throw Nt;qt(1,0)}},M:function(Be,We,rt,lt,pt,wt){var Nt=Ht();try{return zt(Be)(We,rt,lt,pt,wt)}catch(kt){if(Yt(Nt),kt!==kt+0)throw kt;qt(1,0)}},r:function(Be,We,rt,lt,pt,wt){var Nt=Ht();try{return zt(Be)(We,rt,lt,pt,wt)}catch(kt){if(Yt(Nt),kt!==kt+0)throw kt;qt(1,0)}},v:function(Be,We,rt,lt,pt,wt,Nt){var kt=Ht();try{return zt(Be)(We,rt,lt,pt,wt,Nt)}catch(Ct){if(Yt(kt),Ct!==Ct+0)throw Ct;qt(1,0)}},K:function(Be,We,rt,lt,pt,wt,Nt,kt){var Ct=Ht();try{return zt(Be)(We,rt,lt,pt,wt,Nt,kt)}catch(Xt){if(Yt(Ct),Xt!==Xt+0)throw Xt;qt(1,0)}},D:function(Be,We,rt,lt,pt,wt,Nt,kt,Ct,Xt,_n,kn){var hn=Ht();try{return zt(Be)(We,rt,lt,pt,wt,Nt,kt,Ct,Xt,_n,kn)}catch(bt){if(Yt(hn),bt!==bt+0)throw bt;qt(1,0)}},X:function(Be,We,rt,lt,pt,wt,Nt,kt){var Ct=Ht();try{return Mi(Be,We,rt,lt,pt,wt,Nt,kt)}catch(Xt){if(Yt(Ct),Xt!==Xt+0)throw Xt;qt(1,0)}},V:function(Be,We,rt,lt,pt,wt,Nt){var kt=Ht();try{return ns(Be,We,rt,lt,pt,wt,Nt)}catch(Ct){if(Yt(kt),Ct!==Ct+0)throw Ct;qt(1,0)}},U:function(Be,We,rt,lt,pt){var wt=Ht();try{return fr(Be,We,rt,lt,pt)}catch(Nt){if(Yt(wt),Nt!==Nt+0)throw Nt;qt(1,0)}},Z:function(Be,We,rt,lt){var pt=Ht();try{return ti(Be,We,rt,lt)}catch(wt){if(Yt(pt),wt!==wt+0)throw wt;qt(1,0)}},W:function(Be){var We=Ht();try{return Ur(Be)}catch(rt){if(Yt(We),rt!==rt+0)throw rt;qt(1,0)}},Y:function(Be,We){var rt=Ht();try{return Ii(Be,We)}catch(lt){if(Yt(rt),lt!==lt+0)throw lt;qt(1,0)}},T:function(Be,We,rt){var lt=Ht();try{return Si(Be,We,rt)}catch(pt){if(Yt(lt),pt!==pt+0)throw pt;qt(1,0)}},f:function(Be){var We=Ht();try{zt(Be)()}catch(rt){if(Yt(We),rt!==rt+0)throw rt;qt(1,0)}},q:function(Be,We){var rt=Ht();try{zt(Be)(We)}catch(lt){if(Yt(rt),lt!==lt+0)throw lt;qt(1,0)}},h:function(Be,We,rt){var lt=Ht();try{zt(Be)(We,rt)}catch(pt){if(Yt(lt),pt!==pt+0)throw pt;qt(1,0)}},da:function(Be,We,rt,lt){var pt=Ht();try{zt(Be)(We,rt,lt)}catch(wt){if(Yt(pt),wt!==wt+0)throw wt;qt(1,0)}},l:function(Be,We,rt,lt){var pt=Ht();try{zt(Be)(We,rt,lt)}catch(wt){if(Yt(pt),wt!==wt+0)throw wt;qt(1,0)}},t:function(Be,We,rt,lt,pt){var wt=Ht();try{zt(Be)(We,rt,lt,pt)}catch(Nt){if(Yt(wt),Nt!==Nt+0)throw Nt;qt(1,0)}},u:function(Be,We,rt,lt,pt,wt){var Nt=Ht();try{zt(Be)(We,rt,lt,pt,wt)}catch(kt){if(Yt(Nt),kt!==kt+0)throw kt;qt(1,0)}},x:function(Be,We,rt,lt,pt,wt,Nt){var kt=Ht();try{zt(Be)(We,rt,lt,pt,wt,Nt)}catch(Ct){if(Yt(kt),Ct!==Ct+0)throw Ct;qt(1,0)}},z:function(Be,We,rt,lt,pt,wt,Nt,kt){var Ct=Ht();try{zt(Be)(We,rt,lt,pt,wt,Nt,kt)}catch(Xt){if(Yt(Ct),Xt!==Xt+0)throw Xt;qt(1,0)}},ga:function(Be,We,rt,lt,pt,wt,Nt,kt,Ct){var Xt=Ht();try{zt(Be)(We,rt,lt,pt,wt,Nt,kt,Ct)}catch(_n){if(Yt(Xt),_n!==_n+0)throw _n;qt(1,0)}},A:function(Be,We,rt,lt,pt,wt,Nt,kt,Ct,Xt,_n){var kn=Ht();try{zt(Be)(We,rt,lt,pt,wt,Nt,kt,Ct,Xt,_n)}catch(hn){if(Yt(kn),hn!==hn+0)throw hn;qt(1,0)}},C:function(Be,We,rt,lt,pt,wt,Nt,kt,Ct,Xt,_n,kn,hn,bt,cn,vn){var Jn=Ht();try{zt(Be)(We,rt,lt,pt,wt,Nt,kt,Ct,Xt,_n,kn,hn,bt,cn,vn)}catch(zr){if(Yt(Jn),zr!==zr+0)throw zr;qt(1,0)}},aa:function(Be,We,rt,lt,pt,wt,Nt,kt){var Ct=Ht();try{Ai(Be,We,rt,lt,pt,wt,Nt,kt)}catch(Xt){if(Yt(Ct),Xt!==Xt+0)throw Xt;qt(1,0)}},_:function(Be,We,rt,lt,pt,wt,Nt,kt,Ct,Xt,_n,kn){var hn=Ht();try{ei(Be,We,rt,lt,pt,wt,Nt,kt,Ct,Xt,_n,kn)}catch(bt){if(Yt(hn),bt!==bt+0)throw bt;qt(1,0)}},$:function(Be,We,rt,lt,pt,wt){var Nt=Ht();try{Oi(Be,We,rt,lt,pt,wt)}catch(kt){if(Yt(Nt),kt!==kt+0)throw kt;qt(1,0)}},n:function(Be){return Be},F:function(Be){ct=Be},ha:en,y:function(Be,We,rt,lt){return en(Be,We,rt,lt)}};(function(){function Be(pt){d.asm=pt.exports,Ce=d.asm.Ka,et(),Je=d.asm.ib,tt.unshift(d.asm.La),tn--,d.monitorRunDependencies&&d.monitorRunDependencies(tn),tn==0&&Sn&&(pt=Sn,Sn=null,pt())}function We(pt){Be(pt.instance)}function rt(pt){return(function(){if(!Se&&(ge||be)){if(typeof fetch=="function"&&!jt.startsWith("file://"))return fetch(jt,{credentials:"same-origin"}).then((function(wt){if(!wt.ok)throw"failed to load wasm binary file at '"+jt+"'";return wt.arrayBuffer()})).catch((function(){return qn()}));if(B)return new Promise((function(wt,Nt){B(jt,(function(kt){wt(new Uint8Array(kt))}),Nt)}))}return Promise.resolve().then((function(){return qn()}))})().then((function(wt){return WebAssembly.instantiate(wt,lt)})).then((function(wt){return wt})).then(pt,(function(wt){Re("failed to asynchronously prepare wasm: "+wt),fn(wt)}))}var lt={a:On};if(tn++,d.monitorRunDependencies&&d.monitorRunDependencies(tn),d.instantiateWasm)try{return d.instantiateWasm(lt,Be)}catch(pt){return Re("Module.instantiateWasm callback failed with error: "+pt),!1}(Se||typeof WebAssembly.instantiateStreaming!="function"||Jt()||jt.startsWith("file://")||ve||typeof fetch!="function"?rt(We):fetch(jt,{credentials:"same-origin"}).then((function(pt){return WebAssembly.instantiateStreaming(pt,lt).then(We,(function(wt){return Re("wasm streaming compile failed: "+wt),Re("falling back to ArrayBuffer instantiation"),rt(We)}))}))).catch(le)})(),d.___wasm_call_ctors=function(){return(d.___wasm_call_ctors=d.asm.La).apply(null,arguments)},d._OrtInit=function(){return(d._OrtInit=d.asm.Ma).apply(null,arguments)},d._OrtCreateSessionOptions=function(){return(d._OrtCreateSessionOptions=d.asm.Na).apply(null,arguments)},d._OrtAppendExecutionProvider=function(){return(d._OrtAppendExecutionProvider=d.asm.Oa).apply(null,arguments)},d._OrtAddSessionConfigEntry=function(){return(d._OrtAddSessionConfigEntry=d.asm.Pa).apply(null,arguments)},d._OrtReleaseSessionOptions=function(){return(d._OrtReleaseSessionOptions=d.asm.Qa).apply(null,arguments)},d._OrtCreateSession=function(){return(d._OrtCreateSession=d.asm.Ra).apply(null,arguments)},d._OrtReleaseSession=function(){return(d._OrtReleaseSession=d.asm.Sa).apply(null,arguments)},d._OrtGetInputCount=function(){return(d._OrtGetInputCount=d.asm.Ta).apply(null,arguments)},d._OrtGetOutputCount=function(){return(d._OrtGetOutputCount=d.asm.Ua).apply(null,arguments)},d._OrtGetInputName=function(){return(d._OrtGetInputName=d.asm.Va).apply(null,arguments)},d._OrtGetOutputName=function(){return(d._OrtGetOutputName=d.asm.Wa).apply(null,arguments)},d._OrtFree=function(){return(d._OrtFree=d.asm.Xa).apply(null,arguments)},d._OrtCreateTensor=function(){return(d._OrtCreateTensor=d.asm.Ya).apply(null,arguments)},d._OrtGetTensorData=function(){return(d._OrtGetTensorData=d.asm.Za).apply(null,arguments)},d._OrtReleaseTensor=function(){return(d._OrtReleaseTensor=d.asm._a).apply(null,arguments)},d._OrtCreateRunOptions=function(){return(d._OrtCreateRunOptions=d.asm.$a).apply(null,arguments)},d._OrtAddRunConfigEntry=function(){return(d._OrtAddRunConfigEntry=d.asm.ab).apply(null,arguments)},d._OrtReleaseRunOptions=function(){return(d._OrtReleaseRunOptions=d.asm.bb).apply(null,arguments)},d._OrtRun=function(){return(d._OrtRun=d.asm.cb).apply(null,arguments)},d._OrtEndProfiling=function(){return(d._OrtEndProfiling=d.asm.db).apply(null,arguments)};var un,xn=d._malloc=function(){return(xn=d._malloc=d.asm.eb).apply(null,arguments)},Ir=d._free=function(){return(Ir=d._free=d.asm.fb).apply(null,arguments)},qr=d._fflush=function(){return(qr=d._fflush=d.asm.gb).apply(null,arguments)},Mr=d.___funcs_on_exit=function(){return(Mr=d.___funcs_on_exit=d.asm.hb).apply(null,arguments)},qt=d._setThrew=function(){return(qt=d._setThrew=d.asm.jb).apply(null,arguments)},Ht=d.stackSave=function(){return(Ht=d.stackSave=d.asm.kb).apply(null,arguments)},Yt=d.stackRestore=function(){return(Yt=d.stackRestore=d.asm.lb).apply(null,arguments)},ts=d.stackAlloc=function(){return(ts=d.stackAlloc=d.asm.mb).apply(null,arguments)},Yr=d.___cxa_can_catch=function(){return(Yr=d.___cxa_can_catch=d.asm.nb).apply(null,arguments)},Jr=d.___cxa_is_pointer_type=function(){return(Jr=d.___cxa_is_pointer_type=d.asm.ob).apply(null,arguments)},Ur=d.dynCall_j=function(){return(Ur=d.dynCall_j=d.asm.pb).apply(null,arguments)},ns=d.dynCall_iiiiij=function(){return(ns=d.dynCall_iiiiij=d.asm.qb).apply(null,arguments)},Si=d.dynCall_jii=function(){return(Si=d.dynCall_jii=d.asm.rb).apply(null,arguments)},Ai=d.dynCall_viiiiij=function(){return(Ai=d.dynCall_viiiiij=d.asm.sb).apply(null,arguments)},Oi=d.dynCall_vjji=function(){return(Oi=d.dynCall_vjji=d.asm.tb).apply(null,arguments)},ei=d.dynCall_viiijjjii=function(){return(ei=d.dynCall_viiijjjii=d.asm.ub).apply(null,arguments)},ti=d.dynCall_iij=function(){return(ti=d.dynCall_iij=d.asm.vb).apply(null,arguments)},Ii=d.dynCall_ji=function(){return(Ii=d.dynCall_ji=d.asm.wb).apply(null,arguments)},Mi=d.dynCall_iiiiiij=function(){return(Mi=d.dynCall_iiiiiij=d.asm.xb).apply(null,arguments)},fr=d.dynCall_iiij=function(){return(fr=d.dynCall_iiij=d.asm.yb).apply(null,arguments)};function $n(){function Be(){if(!un&&(un=!0,d.calledRun=!0,!Me)){if(nr(tt),A(d),d.onRuntimeInitialized&&d.onRuntimeInitialized(),d.postRun)for(typeof d.postRun=="function"&&(d.postRun=[d.postRun]);d.postRun.length;){var We=d.postRun.shift();vt.unshift(We)}nr(vt)}}if(!(0<tn)){if(d.preRun)for(typeof d.preRun=="function"&&(d.preRun=[d.preRun]);d.preRun.length;)Pt();nr(at),0<tn||(d.setStatus?(d.setStatus("Running..."),setTimeout((function(){setTimeout((function(){d.setStatus("")}),1),Be()}),1)):Be())}}if(d.UTF8ToString=Ke,d.stringToUTF8=function(Be,We,rt){return qe(Be,He,We,rt)},d.lengthBytesUTF8=Pe,d.stackSave=Ht,d.stackRestore=Yt,d.stackAlloc=ts,Sn=function Be(){un||$n(),un||(Sn=Be)},d.preInit)for(typeof d.preInit=="function"&&(d.preInit=[d.preInit]);0<d.preInit.length;)d.preInit.pop()();return $n(),T.ready});n.exports=u},4537:n=>{n.exports=function(e,t){for(var r=new Array(arguments.length-1),u=0,T=2,d=!0;T<arguments.length;)r[u++]=arguments[T++];return new Promise((function(A,le){r[u]=function(G){if(d)if(d=!1,G)le(G);else{for(var B=new Array(arguments.length-1),o=0;o<B.length;)B[o++]=arguments[o];A.apply(null,B)}};try{e.apply(t||null,r)}catch(G){d&&(d=!1,le(G))}}))}},7419:(n,e)=>{var t=e;t.length=function(A){var le=A.length;if(!le)return 0;for(var G=0;--le%4>1&&A.charAt(le)==="=";)++G;return Math.ceil(3*A.length)/4-G};for(var r=new Array(64),u=new Array(123),T=0;T<64;)u[r[T]=T<26?T+65:T<52?T+71:T<62?T-4:T-59|43]=T++;t.encode=function(A,le,G){for(var B,o=null,i=[],w=0,ae=0;le<G;){var ue=A[le++];switch(ae){case 0:i[w++]=r[ue>>2],B=(3&ue)<<4,ae=1;break;case 1:i[w++]=r[B|ue>>4],B=(15&ue)<<2,ae=2;break;case 2:i[w++]=r[B|ue>>6],i[w++]=r[63&ue],ae=0}w>8191&&((o||(o=[])).push(String.fromCharCode.apply(String,i)),w=0)}return ae&&(i[w++]=r[B],i[w++]=61,ae===1&&(i[w++]=61)),o?(w&&o.push(String.fromCharCode.apply(String,i.slice(0,w))),o.join("")):String.fromCharCode.apply(String,i.slice(0,w))};var d="invalid encoding";t.decode=function(A,le,G){for(var B,o=G,i=0,w=0;w<A.length;){var ae=A.charCodeAt(w++);if(ae===61&&i>1)break;if((ae=u[ae])===void 0)throw Error(d);switch(i){case 0:B=ae,i=1;break;case 1:le[G++]=B<<2|(48&ae)>>4,B=ae,i=2;break;case 2:le[G++]=(15&B)<<4|(60&ae)>>2,B=ae,i=3;break;case 3:le[G++]=(3&B)<<6|ae,i=0}}if(i===1)throw Error(d);return G-o},t.test=function(A){return/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(A)}},9211:n=>{function e(){this._listeners={}}n.exports=e,e.prototype.on=function(t,r,u){return(this._listeners[t]||(this._listeners[t]=[])).push({fn:r,ctx:u||this}),this},e.prototype.off=function(t,r){if(t===void 0)this._listeners={};else if(r===void 0)this._listeners[t]=[];else for(var u=this._listeners[t],T=0;T<u.length;)u[T].fn===r?u.splice(T,1):++T;return this},e.prototype.emit=function(t){var r=this._listeners[t];if(r){for(var u=[],T=1;T<arguments.length;)u.push(arguments[T++]);for(T=0;T<r.length;)r[T].fn.apply(r[T++].ctx,u)}return this}},945:n=>{function e(d){return typeof Float32Array<"u"?(function(){var A=new Float32Array([-0]),le=new Uint8Array(A.buffer),G=le[3]===128;function B(ae,ue,he){A[0]=ae,ue[he]=le[0],ue[he+1]=le[1],ue[he+2]=le[2],ue[he+3]=le[3]}function o(ae,ue,he){A[0]=ae,ue[he]=le[3],ue[he+1]=le[2],ue[he+2]=le[1],ue[he+3]=le[0]}function i(ae,ue){return le[0]=ae[ue],le[1]=ae[ue+1],le[2]=ae[ue+2],le[3]=ae[ue+3],A[0]}function w(ae,ue){return le[3]=ae[ue],le[2]=ae[ue+1],le[1]=ae[ue+2],le[0]=ae[ue+3],A[0]}d.writeFloatLE=G?B:o,d.writeFloatBE=G?o:B,d.readFloatLE=G?i:w,d.readFloatBE=G?w:i})():(function(){function A(G,B,o,i){var w=B<0?1:0;if(w&&(B=-B),B===0)G(1/B>0?0:2147483648,o,i);else if(isNaN(B))G(2143289344,o,i);else if(B>34028234663852886e22)G((w<<31|2139095040)>>>0,o,i);else if(B<11754943508222875e-54)G((w<<31|Math.round(B/1401298464324817e-60))>>>0,o,i);else{var ae=Math.floor(Math.log(B)/Math.LN2);G((w<<31|ae+127<<23|8388607&Math.round(B*Math.pow(2,-ae)*8388608))>>>0,o,i)}}function le(G,B,o){var i=G(B,o),w=2*(i>>31)+1,ae=i>>>23&255,ue=8388607&i;return ae===255?ue?NaN:w*(1/0):ae===0?1401298464324817e-60*w*ue:w*Math.pow(2,ae-150)*(ue+8388608)}d.writeFloatLE=A.bind(null,t),d.writeFloatBE=A.bind(null,r),d.readFloatLE=le.bind(null,u),d.readFloatBE=le.bind(null,T)})(),typeof Float64Array<"u"?(function(){var A=new Float64Array([-0]),le=new Uint8Array(A.buffer),G=le[7]===128;function B(ae,ue,he){A[0]=ae,ue[he]=le[0],ue[he+1]=le[1],ue[he+2]=le[2],ue[he+3]=le[3],ue[he+4]=le[4],ue[he+5]=le[5],ue[he+6]=le[6],ue[he+7]=le[7]}function o(ae,ue,he){A[0]=ae,ue[he]=le[7],ue[he+1]=le[6],ue[he+2]=le[5],ue[he+3]=le[4],ue[he+4]=le[3],ue[he+5]=le[2],ue[he+6]=le[1],ue[he+7]=le[0]}function i(ae,ue){return le[0]=ae[ue],le[1]=ae[ue+1],le[2]=ae[ue+2],le[3]=ae[ue+3],le[4]=ae[ue+4],le[5]=ae[ue+5],le[6]=ae[ue+6],le[7]=ae[ue+7],A[0]}function w(ae,ue){return le[7]=ae[ue],le[6]=ae[ue+1],le[5]=ae[ue+2],le[4]=ae[ue+3],le[3]=ae[ue+4],le[2]=ae[ue+5],le[1]=ae[ue+6],le[0]=ae[ue+7],A[0]}d.writeDoubleLE=G?B:o,d.writeDoubleBE=G?o:B,d.readDoubleLE=G?i:w,d.readDoubleBE=G?w:i})():(function(){function A(G,B,o,i,w,ae){var ue=i<0?1:0;if(ue&&(i=-i),i===0)G(0,w,ae+B),G(1/i>0?0:2147483648,w,ae+o);else if(isNaN(i))G(0,w,ae+B),G(2146959360,w,ae+o);else if(i>17976931348623157e292)G(0,w,ae+B),G((ue<<31|2146435072)>>>0,w,ae+o);else{var he;if(i<22250738585072014e-324)G((he=i/5e-324)>>>0,w,ae+B),G((ue<<31|he/4294967296)>>>0,w,ae+o);else{var pe=Math.floor(Math.log(i)/Math.LN2);pe===1024&&(pe=1023),G(4503599627370496*(he=i*Math.pow(2,-pe))>>>0,w,ae+B),G((ue<<31|pe+1023<<20|1048576*he&1048575)>>>0,w,ae+o)}}}function le(G,B,o,i,w){var ae=G(i,w+B),ue=G(i,w+o),he=2*(ue>>31)+1,pe=ue>>>20&2047,ge=4294967296*(1048575&ue)+ae;return pe===2047?ge?NaN:he*(1/0):pe===0?5e-324*he*ge:he*Math.pow(2,pe-1075)*(ge+4503599627370496)}d.writeDoubleLE=A.bind(null,t,0,4),d.writeDoubleBE=A.bind(null,r,4,0),d.readDoubleLE=le.bind(null,u,0,4),d.readDoubleBE=le.bind(null,T,4,0)})(),d}function t(d,A,le){A[le]=255&d,A[le+1]=d>>>8&255,A[le+2]=d>>>16&255,A[le+3]=d>>>24}function r(d,A,le){A[le]=d>>>24,A[le+1]=d>>>16&255,A[le+2]=d>>>8&255,A[le+3]=255&d}function u(d,A){return(d[A]|d[A+1]<<8|d[A+2]<<16|d[A+3]<<24)>>>0}function T(d,A){return(d[A]<<24|d[A+1]<<16|d[A+2]<<8|d[A+3])>>>0}n.exports=e(e)},7199:module=>{function inquire(moduleName){try{var mod=eval("quire".replace(/^/,"re"))(moduleName);if(mod&&(mod.length||Object.keys(mod).length))return mod}catch(n){}return null}module.exports=inquire},6662:n=>{n.exports=function(e,t,r){var u=r||8192,T=u>>>1,d=null,A=u;return function(le){if(le<1||le>T)return e(le);A+le>u&&(d=e(u),A=0);var G=t.call(d,A,A+=le);return 7&A&&(A=1+(7|A)),G}}},4997:(n,e)=>{var t=e;t.length=function(r){for(var u=0,T=0,d=0;d<r.length;++d)(T=r.charCodeAt(d))<128?u+=1:T<2048?u+=2:(64512&T)==55296&&(64512&r.charCodeAt(d+1))==56320?(++d,u+=4):u+=3;return u},t.read=function(r,u,T){if(T-u<1)return"";for(var d,A=null,le=[],G=0;u<T;)(d=r[u++])<128?le[G++]=d:d>191&&d<224?le[G++]=(31&d)<<6|63&r[u++]:d>239&&d<365?(d=((7&d)<<18|(63&r[u++])<<12|(63&r[u++])<<6|63&r[u++])-65536,le[G++]=55296+(d>>10),le[G++]=56320+(1023&d)):le[G++]=(15&d)<<12|(63&r[u++])<<6|63&r[u++],G>8191&&((A||(A=[])).push(String.fromCharCode.apply(String,le)),G=0);return A?(G&&A.push(String.fromCharCode.apply(String,le.slice(0,G))),A.join("")):String.fromCharCode.apply(String,le.slice(0,G))},t.write=function(r,u,T){for(var d,A,le=T,G=0;G<r.length;++G)(d=r.charCodeAt(G))<128?u[T++]=d:d<2048?(u[T++]=d>>6|192,u[T++]=63&d|128):(64512&d)==55296&&(64512&(A=r.charCodeAt(G+1)))==56320?(d=65536+((1023&d)<<10)+(1023&A),++G,u[T++]=d>>18|240,u[T++]=d>>12&63|128,u[T++]=d>>6&63|128,u[T++]=63&d|128):(u[T++]=d>>12|224,u[T++]=d>>6&63|128,u[T++]=63&d|128);return T-le}},3442:(n,e)=>{e.__esModule=!0;var t=(function(){function r(u){if(!u)throw new TypeError("Invalid argument; `value` has no value.");this.value=r.EMPTY,u&&r.isGuid(u)&&(this.value=u)}return r.isGuid=function(u){var T=u.toString();return u&&(u instanceof r||r.validator.test(T))},r.create=function(){return new r([r.gen(2),r.gen(1),r.gen(1),r.gen(1),r.gen(3)].join("-"))},r.createEmpty=function(){return new r("emptyguid")},r.parse=function(u){return new r(u)},r.raw=function(){return[r.gen(2),r.gen(1),r.gen(1),r.gen(1),r.gen(3)].join("-")},r.gen=function(u){for(var T="",d=0;d<u;d++)T+=(65536*(1+Math.random())|0).toString(16).substring(1);return T},r.prototype.equals=function(u){return r.isGuid(u)&&this.value===u.toString()},r.prototype.isEmpty=function(){return this.value===r.EMPTY},r.prototype.toString=function(){return this.value},r.prototype.toJSON=function(){return{value:this.value}},r.validator=new RegExp("^[a-z0-9]{8}-[a-z0-9]{4}-[a-z0-9]{4}-[a-z0-9]{4}-[a-z0-9]{12}$","i"),r.EMPTY="00000000-0000-0000-0000-000000000000",r})();e.Guid=t},3720:n=>{n.exports=t;var e=null;try{e=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch{}function t(Te,Ce,Ve){this.low=0|Te,this.high=0|Ce,this.unsigned=!!Ve}function r(Te){return(Te&&Te.__isLong__)===!0}t.prototype.__isLong__,Object.defineProperty(t.prototype,"__isLong__",{value:!0}),t.isLong=r;var u={},T={};function d(Te,Ce){var Ve,$e,He;return Ce?(He=0<=(Te>>>=0)&&Te<256)&&($e=T[Te])?$e:(Ve=le(Te,(0|Te)<0?-1:0,!0),He&&(T[Te]=Ve),Ve):(He=-128<=(Te|=0)&&Te<128)&&($e=u[Te])?$e:(Ve=le(Te,Te<0?-1:0,!1),He&&(u[Te]=Ve),Ve)}function A(Te,Ce){if(isNaN(Te))return Ce?pe:he;if(Ce){if(Te<0)return pe;if(Te>=w)return Se}else{if(Te<=-ae)return Ae;if(Te+1>=ae)return we}return Te<0?A(-Te,Ce).neg():le(Te%i|0,Te/i|0,Ce)}function le(Te,Ce,Ve){return new t(Te,Ce,Ve)}t.fromInt=d,t.fromNumber=A,t.fromBits=le;var G=Math.pow;function B(Te,Ce,Ve){if(Te.length===0)throw Error("empty string");if(Te==="NaN"||Te==="Infinity"||Te==="+Infinity"||Te==="-Infinity")return he;if(typeof Ce=="number"?(Ve=Ce,Ce=!1):Ce=!!Ce,(Ve=Ve||10)<2||36<Ve)throw RangeError("radix");var $e;if(($e=Te.indexOf("-"))>0)throw Error("interior hyphen");if($e===0)return B(Te.substring(1),Ce,Ve).neg();for(var He=A(G(Ve,8)),De=he,Xe=0;Xe<Te.length;Xe+=8){var Me=Math.min(8,Te.length-Xe),je=parseInt(Te.substring(Xe,Xe+Me),Ve);if(Me<8){var it=A(G(Ve,Me));De=De.mul(it).add(A(je))}else De=(De=De.mul(He)).add(A(je))}return De.unsigned=Ce,De}function o(Te,Ce){return typeof Te=="number"?A(Te,Ce):typeof Te=="string"?B(Te,Ce):le(Te.low,Te.high,typeof Ce=="boolean"?Ce:Te.unsigned)}t.fromString=B,t.fromValue=o;var i=4294967296,w=i*i,ae=w/2,ue=d(1<<24),he=d(0);t.ZERO=he;var pe=d(0,!0);t.UZERO=pe;var ge=d(1);t.ONE=ge;var be=d(1,!0);t.UONE=be;var ve=d(-1);t.NEG_ONE=ve;var we=le(-1,2147483647,!1);t.MAX_VALUE=we;var Se=le(-1,-1,!0);t.MAX_UNSIGNED_VALUE=Se;var Ae=le(0,-2147483648,!1);t.MIN_VALUE=Ae;var Re=t.prototype;Re.toInt=function(){return this.unsigned?this.low>>>0:this.low},Re.toNumber=function(){return this.unsigned?(this.high>>>0)*i+(this.low>>>0):this.high*i+(this.low>>>0)},Re.toString=function(Te){if((Te=Te||10)<2||36<Te)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative()){if(this.eq(Ae)){var Ce=A(Te),Ve=this.div(Ce),$e=Ve.mul(Ce).sub(this);return Ve.toString(Te)+$e.toInt().toString(Te)}return"-"+this.neg().toString(Te)}for(var He=A(G(Te,6),this.unsigned),De=this,Xe="";;){var Me=De.div(He),je=(De.sub(Me.mul(He)).toInt()>>>0).toString(Te);if((De=Me).isZero())return je+Xe;for(;je.length<6;)je="0"+je;Xe=""+je+Xe}},Re.getHighBits=function(){return this.high},Re.getHighBitsUnsigned=function(){return this.high>>>0},Re.getLowBits=function(){return this.low},Re.getLowBitsUnsigned=function(){return this.low>>>0},Re.getNumBitsAbs=function(){if(this.isNegative())return this.eq(Ae)?64:this.neg().getNumBitsAbs();for(var Te=this.high!=0?this.high:this.low,Ce=31;Ce>0&&(Te&1<<Ce)==0;Ce--);return this.high!=0?Ce+33:Ce+1},Re.isZero=function(){return this.high===0&&this.low===0},Re.eqz=Re.isZero,Re.isNegative=function(){return!this.unsigned&&this.high<0},Re.isPositive=function(){return this.unsigned||this.high>=0},Re.isOdd=function(){return(1&this.low)==1},Re.isEven=function(){return(1&this.low)==0},Re.equals=function(Te){return r(Te)||(Te=o(Te)),(this.unsigned===Te.unsigned||this.high>>>31!=1||Te.high>>>31!=1)&&this.high===Te.high&&this.low===Te.low},Re.eq=Re.equals,Re.notEquals=function(Te){return!this.eq(Te)},Re.neq=Re.notEquals,Re.ne=Re.notEquals,Re.lessThan=function(Te){return this.comp(Te)<0},Re.lt=Re.lessThan,Re.lessThanOrEqual=function(Te){return this.comp(Te)<=0},Re.lte=Re.lessThanOrEqual,Re.le=Re.lessThanOrEqual,Re.greaterThan=function(Te){return this.comp(Te)>0},Re.gt=Re.greaterThan,Re.greaterThanOrEqual=function(Te){return this.comp(Te)>=0},Re.gte=Re.greaterThanOrEqual,Re.ge=Re.greaterThanOrEqual,Re.compare=function(Te){if(r(Te)||(Te=o(Te)),this.eq(Te))return 0;var Ce=this.isNegative(),Ve=Te.isNegative();return Ce&&!Ve?-1:!Ce&&Ve?1:this.unsigned?Te.high>>>0>this.high>>>0||Te.high===this.high&&Te.low>>>0>this.low>>>0?-1:1:this.sub(Te).isNegative()?-1:1},Re.comp=Re.compare,Re.negate=function(){return!this.unsigned&&this.eq(Ae)?Ae:this.not().add(ge)},Re.neg=Re.negate,Re.add=function(Te){r(Te)||(Te=o(Te));var Ce=this.high>>>16,Ve=65535&this.high,$e=this.low>>>16,He=65535&this.low,De=Te.high>>>16,Xe=65535&Te.high,Me=Te.low>>>16,je=0,it=0,Ke=0,qe=0;return Ke+=(qe+=He+(65535&Te.low))>>>16,it+=(Ke+=$e+Me)>>>16,je+=(it+=Ve+Xe)>>>16,je+=Ce+De,le((Ke&=65535)<<16|(qe&=65535),(je&=65535)<<16|(it&=65535),this.unsigned)},Re.subtract=function(Te){return r(Te)||(Te=o(Te)),this.add(Te.neg())},Re.sub=Re.subtract,Re.multiply=function(Te){if(this.isZero())return he;if(r(Te)||(Te=o(Te)),e)return le(e.mul(this.low,this.high,Te.low,Te.high),e.get_high(),this.unsigned);if(Te.isZero())return he;if(this.eq(Ae))return Te.isOdd()?Ae:he;if(Te.eq(Ae))return this.isOdd()?Ae:he;if(this.isNegative())return Te.isNegative()?this.neg().mul(Te.neg()):this.neg().mul(Te).neg();if(Te.isNegative())return this.mul(Te.neg()).neg();if(this.lt(ue)&&Te.lt(ue))return A(this.toNumber()*Te.toNumber(),this.unsigned);var Ce=this.high>>>16,Ve=65535&this.high,$e=this.low>>>16,He=65535&this.low,De=Te.high>>>16,Xe=65535&Te.high,Me=Te.low>>>16,je=65535&Te.low,it=0,Ke=0,qe=0,Pe=0;return qe+=(Pe+=He*je)>>>16,Ke+=(qe+=$e*je)>>>16,qe&=65535,Ke+=(qe+=He*Me)>>>16,it+=(Ke+=Ve*je)>>>16,Ke&=65535,it+=(Ke+=$e*Me)>>>16,Ke&=65535,it+=(Ke+=He*Xe)>>>16,it+=Ce*je+Ve*Me+$e*Xe+He*De,le((qe&=65535)<<16|(Pe&=65535),(it&=65535)<<16|(Ke&=65535),this.unsigned)},Re.mul=Re.multiply,Re.divide=function(Te){if(r(Te)||(Te=o(Te)),Te.isZero())throw Error("division by zero");var Ce,Ve,$e;if(e)return this.unsigned||this.high!==-2147483648||Te.low!==-1||Te.high!==-1?le((this.unsigned?e.div_u:e.div_s)(this.low,this.high,Te.low,Te.high),e.get_high(),this.unsigned):this;if(this.isZero())return this.unsigned?pe:he;if(this.unsigned){if(Te.unsigned||(Te=Te.toUnsigned()),Te.gt(this))return pe;if(Te.gt(this.shru(1)))return be;$e=pe}else{if(this.eq(Ae))return Te.eq(ge)||Te.eq(ve)?Ae:Te.eq(Ae)?ge:(Ce=this.shr(1).div(Te).shl(1)).eq(he)?Te.isNegative()?ge:ve:(Ve=this.sub(Te.mul(Ce)),$e=Ce.add(Ve.div(Te)));if(Te.eq(Ae))return this.unsigned?pe:he;if(this.isNegative())return Te.isNegative()?this.neg().div(Te.neg()):this.neg().div(Te).neg();if(Te.isNegative())return this.div(Te.neg()).neg();$e=he}for(Ve=this;Ve.gte(Te);){Ce=Math.max(1,Math.floor(Ve.toNumber()/Te.toNumber()));for(var He=Math.ceil(Math.log(Ce)/Math.LN2),De=He<=48?1:G(2,He-48),Xe=A(Ce),Me=Xe.mul(Te);Me.isNegative()||Me.gt(Ve);)Me=(Xe=A(Ce-=De,this.unsigned)).mul(Te);Xe.isZero()&&(Xe=ge),$e=$e.add(Xe),Ve=Ve.sub(Me)}return $e},Re.div=Re.divide,Re.modulo=function(Te){return r(Te)||(Te=o(Te)),e?le((this.unsigned?e.rem_u:e.rem_s)(this.low,this.high,Te.low,Te.high),e.get_high(),this.unsigned):this.sub(this.div(Te).mul(Te))},Re.mod=Re.modulo,Re.rem=Re.modulo,Re.not=function(){return le(~this.low,~this.high,this.unsigned)},Re.and=function(Te){return r(Te)||(Te=o(Te)),le(this.low&Te.low,this.high&Te.high,this.unsigned)},Re.or=function(Te){return r(Te)||(Te=o(Te)),le(this.low|Te.low,this.high|Te.high,this.unsigned)},Re.xor=function(Te){return r(Te)||(Te=o(Te)),le(this.low^Te.low,this.high^Te.high,this.unsigned)},Re.shiftLeft=function(Te){return r(Te)&&(Te=Te.toInt()),(Te&=63)==0?this:Te<32?le(this.low<<Te,this.high<<Te|this.low>>>32-Te,this.unsigned):le(0,this.low<<Te-32,this.unsigned)},Re.shl=Re.shiftLeft,Re.shiftRight=function(Te){return r(Te)&&(Te=Te.toInt()),(Te&=63)==0?this:Te<32?le(this.low>>>Te|this.high<<32-Te,this.high>>Te,this.unsigned):le(this.high>>Te-32,this.high>=0?0:-1,this.unsigned)},Re.shr=Re.shiftRight,Re.shiftRightUnsigned=function(Te){if(r(Te)&&(Te=Te.toInt()),(Te&=63)==0)return this;var Ce=this.high;return Te<32?le(this.low>>>Te|Ce<<32-Te,Ce>>>Te,this.unsigned):le(Te===32?Ce:Ce>>>Te-32,0,this.unsigned)},Re.shru=Re.shiftRightUnsigned,Re.shr_u=Re.shiftRightUnsigned,Re.toSigned=function(){return this.unsigned?le(this.low,this.high,!1):this},Re.toUnsigned=function(){return this.unsigned?this:le(this.low,this.high,!0)},Re.toBytes=function(Te){return Te?this.toBytesLE():this.toBytesBE()},Re.toBytesLE=function(){var Te=this.high,Ce=this.low;return[255&Ce,Ce>>>8&255,Ce>>>16&255,Ce>>>24,255&Te,Te>>>8&255,Te>>>16&255,Te>>>24]},Re.toBytesBE=function(){var Te=this.high,Ce=this.low;return[Te>>>24,Te>>>16&255,Te>>>8&255,255&Te,Ce>>>24,Ce>>>16&255,Ce>>>8&255,255&Ce]},t.fromBytes=function(Te,Ce,Ve){return Ve?t.fromBytesLE(Te,Ce):t.fromBytesBE(Te,Ce)},t.fromBytesLE=function(Te,Ce){return new t(Te[0]|Te[1]<<8|Te[2]<<16|Te[3]<<24,Te[4]|Te[5]<<8|Te[6]<<16|Te[7]<<24,Ce)},t.fromBytesBE=function(Te,Ce){return new t(Te[4]<<24|Te[5]<<16|Te[6]<<8|Te[7],Te[0]<<24|Te[1]<<16|Te[2]<<8|Te[3],Ce)}},1446:(n,e,t)=>{var r,u,T,d=t(2100),A=d.Reader,le=d.Writer,G=d.util,B=d.roots.default||(d.roots.default={});B.onnx=((T={}).Version=(r={},(u=Object.create(r))[r[0]="_START_VERSION"]=0,u[r[1]="IR_VERSION_2017_10_10"]=1,u[r[2]="IR_VERSION_2017_10_30"]=2,u[r[3]="IR_VERSION_2017_11_3"]=3,u[r[4]="IR_VERSION_2019_1_22"]=4,u[r[5]="IR_VERSION"]=5,u),T.AttributeProto=(function(){function o(i){if(this.floats=[],this.ints=[],this.strings=[],this.tensors=[],this.graphs=[],i)for(var w=Object.keys(i),ae=0;ae<w.length;++ae)i[w[ae]]!=null&&(this[w[ae]]=i[w[ae]])}return o.prototype.name="",o.prototype.refAttrName="",o.prototype.docString="",o.prototype.type=0,o.prototype.f=0,o.prototype.i=G.Long?G.Long.fromBits(0,0,!1):0,o.prototype.s=G.newBuffer([]),o.prototype.t=null,o.prototype.g=null,o.prototype.floats=G.emptyArray,o.prototype.ints=G.emptyArray,o.prototype.strings=G.emptyArray,o.prototype.tensors=G.emptyArray,o.prototype.graphs=G.emptyArray,o.create=function(i){return new o(i)},o.encode=function(i,w){if(w||(w=le.create()),i.name!=null&&i.hasOwnProperty("name")&&w.uint32(10).string(i.name),i.f!=null&&i.hasOwnProperty("f")&&w.uint32(21).float(i.f),i.i!=null&&i.hasOwnProperty("i")&&w.uint32(24).int64(i.i),i.s!=null&&i.hasOwnProperty("s")&&w.uint32(34).bytes(i.s),i.t!=null&&i.hasOwnProperty("t")&&B.onnx.TensorProto.encode(i.t,w.uint32(42).fork()).ldelim(),i.g!=null&&i.hasOwnProperty("g")&&B.onnx.GraphProto.encode(i.g,w.uint32(50).fork()).ldelim(),i.floats!=null&&i.floats.length){w.uint32(58).fork();for(var ae=0;ae<i.floats.length;++ae)w.float(i.floats[ae]);w.ldelim()}if(i.ints!=null&&i.ints.length){for(w.uint32(66).fork(),ae=0;ae<i.ints.length;++ae)w.int64(i.ints[ae]);w.ldelim()}if(i.strings!=null&&i.strings.length)for(ae=0;ae<i.strings.length;++ae)w.uint32(74).bytes(i.strings[ae]);if(i.tensors!=null&&i.tensors.length)for(ae=0;ae<i.tensors.length;++ae)B.onnx.TensorProto.encode(i.tensors[ae],w.uint32(82).fork()).ldelim();if(i.graphs!=null&&i.graphs.length)for(ae=0;ae<i.graphs.length;++ae)B.onnx.GraphProto.encode(i.graphs[ae],w.uint32(90).fork()).ldelim();return i.docString!=null&&i.hasOwnProperty("docString")&&w.uint32(106).string(i.docString),i.type!=null&&i.hasOwnProperty("type")&&w.uint32(160).int32(i.type),i.refAttrName!=null&&i.hasOwnProperty("refAttrName")&&w.uint32(170).string(i.refAttrName),w},o.encodeDelimited=function(i,w){return this.encode(i,w).ldelim()},o.decode=function(i,w){i instanceof A||(i=A.create(i));for(var ae=w===void 0?i.len:i.pos+w,ue=new B.onnx.AttributeProto;i.pos<ae;){var he=i.uint32();switch(he>>>3){case 1:ue.name=i.string();break;case 21:ue.refAttrName=i.string();break;case 13:ue.docString=i.string();break;case 20:ue.type=i.int32();break;case 2:ue.f=i.float();break;case 3:ue.i=i.int64();break;case 4:ue.s=i.bytes();break;case 5:ue.t=B.onnx.TensorProto.decode(i,i.uint32());break;case 6:ue.g=B.onnx.GraphProto.decode(i,i.uint32());break;case 7:if(ue.floats&&ue.floats.length||(ue.floats=[]),(7&he)==2)for(var pe=i.uint32()+i.pos;i.pos<pe;)ue.floats.push(i.float());else ue.floats.push(i.float());break;case 8:if(ue.ints&&ue.ints.length||(ue.ints=[]),(7&he)==2)for(pe=i.uint32()+i.pos;i.pos<pe;)ue.ints.push(i.int64());else ue.ints.push(i.int64());break;case 9:ue.strings&&ue.strings.length||(ue.strings=[]),ue.strings.push(i.bytes());break;case 10:ue.tensors&&ue.tensors.length||(ue.tensors=[]),ue.tensors.push(B.onnx.TensorProto.decode(i,i.uint32()));break;case 11:ue.graphs&&ue.graphs.length||(ue.graphs=[]),ue.graphs.push(B.onnx.GraphProto.decode(i,i.uint32()));break;default:i.skipType(7&he)}}return ue},o.decodeDelimited=function(i){return i instanceof A||(i=new A(i)),this.decode(i,i.uint32())},o.verify=function(i){if(typeof i!="object"||i===null)return"object expected";if(i.name!=null&&i.hasOwnProperty("name")&&!G.isString(i.name))return"name: string expected";if(i.refAttrName!=null&&i.hasOwnProperty("refAttrName")&&!G.isString(i.refAttrName))return"refAttrName: string expected";if(i.docString!=null&&i.hasOwnProperty("docString")&&!G.isString(i.docString))return"docString: string expected";if(i.type!=null&&i.hasOwnProperty("type"))switch(i.type){default:return"type: enum value expected";case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:case 10:}if(i.f!=null&&i.hasOwnProperty("f")&&typeof i.f!="number")return"f: number expected";if(i.i!=null&&i.hasOwnProperty("i")&&!(G.isInteger(i.i)||i.i&&G.isInteger(i.i.low)&&G.isInteger(i.i.high)))return"i: integer|Long expected";if(i.s!=null&&i.hasOwnProperty("s")&&!(i.s&&typeof i.s.length=="number"||G.isString(i.s)))return"s: buffer expected";if(i.t!=null&&i.hasOwnProperty("t")&&(ae=B.onnx.TensorProto.verify(i.t)))return"t."+ae;if(i.g!=null&&i.hasOwnProperty("g")&&(ae=B.onnx.GraphProto.verify(i.g)))return"g."+ae;if(i.floats!=null&&i.hasOwnProperty("floats")){if(!Array.isArray(i.floats))return"floats: array expected";for(var w=0;w<i.floats.length;++w)if(typeof i.floats[w]!="number")return"floats: number[] expected"}if(i.ints!=null&&i.hasOwnProperty("ints")){if(!Array.isArray(i.ints))return"ints: array expected";for(w=0;w<i.ints.length;++w)if(!(G.isInteger(i.ints[w])||i.ints[w]&&G.isInteger(i.ints[w].low)&&G.isInteger(i.ints[w].high)))return"ints: integer|Long[] expected"}if(i.strings!=null&&i.hasOwnProperty("strings")){if(!Array.isArray(i.strings))return"strings: array expected";for(w=0;w<i.strings.length;++w)if(!(i.strings[w]&&typeof i.strings[w].length=="number"||G.isString(i.strings[w])))return"strings: buffer[] expected"}if(i.tensors!=null&&i.hasOwnProperty("tensors")){if(!Array.isArray(i.tensors))return"tensors: array expected";for(w=0;w<i.tensors.length;++w)if(ae=B.onnx.TensorProto.verify(i.tensors[w]))return"tensors."+ae}if(i.graphs!=null&&i.hasOwnProperty("graphs")){if(!Array.isArray(i.graphs))return"graphs: array expected";for(w=0;w<i.graphs.length;++w){var ae;if(ae=B.onnx.GraphProto.verify(i.graphs[w]))return"graphs."+ae}}return null},o.fromObject=function(i){if(i instanceof B.onnx.AttributeProto)return i;var w=new B.onnx.AttributeProto;switch(i.name!=null&&(w.name=String(i.name)),i.refAttrName!=null&&(w.refAttrName=String(i.refAttrName)),i.docString!=null&&(w.docString=String(i.docString)),i.type){case"UNDEFINED":case 0:w.type=0;break;case"FLOAT":case 1:w.type=1;break;case"INT":case 2:w.type=2;break;case"STRING":case 3:w.type=3;break;case"TENSOR":case 4:w.type=4;break;case"GRAPH":case 5:w.type=5;break;case"FLOATS":case 6:w.type=6;break;case"INTS":case 7:w.type=7;break;case"STRINGS":case 8:w.type=8;break;case"TENSORS":case 9:w.type=9;break;case"GRAPHS":case 10:w.type=10}if(i.f!=null&&(w.f=Number(i.f)),i.i!=null&&(G.Long?(w.i=G.Long.fromValue(i.i)).unsigned=!1:typeof i.i=="string"?w.i=parseInt(i.i,10):typeof i.i=="number"?w.i=i.i:typeof i.i=="object"&&(w.i=new G.LongBits(i.i.low>>>0,i.i.high>>>0).toNumber())),i.s!=null&&(typeof i.s=="string"?G.base64.decode(i.s,w.s=G.newBuffer(G.base64.length(i.s)),0):i.s.length&&(w.s=i.s)),i.t!=null){if(typeof i.t!="object")throw TypeError(".onnx.AttributeProto.t: object expected");w.t=B.onnx.TensorProto.fromObject(i.t)}if(i.g!=null){if(typeof i.g!="object")throw TypeError(".onnx.AttributeProto.g: object expected");w.g=B.onnx.GraphProto.fromObject(i.g)}if(i.floats){if(!Array.isArray(i.floats))throw TypeError(".onnx.AttributeProto.floats: array expected");w.floats=[];for(var ae=0;ae<i.floats.length;++ae)w.floats[ae]=Number(i.floats[ae])}if(i.ints){if(!Array.isArray(i.ints))throw TypeError(".onnx.AttributeProto.ints: array expected");for(w.ints=[],ae=0;ae<i.ints.length;++ae)G.Long?(w.ints[ae]=G.Long.fromValue(i.ints[ae])).unsigned=!1:typeof i.ints[ae]=="string"?w.ints[ae]=parseInt(i.ints[ae],10):typeof i.ints[ae]=="number"?w.ints[ae]=i.ints[ae]:typeof i.ints[ae]=="object"&&(w.ints[ae]=new G.LongBits(i.ints[ae].low>>>0,i.ints[ae].high>>>0).toNumber())}if(i.strings){if(!Array.isArray(i.strings))throw TypeError(".onnx.AttributeProto.strings: array expected");for(w.strings=[],ae=0;ae<i.strings.length;++ae)typeof i.strings[ae]=="string"?G.base64.decode(i.strings[ae],w.strings[ae]=G.newBuffer(G.base64.length(i.strings[ae])),0):i.strings[ae].length&&(w.strings[ae]=i.strings[ae])}if(i.tensors){if(!Array.isArray(i.tensors))throw TypeError(".onnx.AttributeProto.tensors: array expected");for(w.tensors=[],ae=0;ae<i.tensors.length;++ae){if(typeof i.tensors[ae]!="object")throw TypeError(".onnx.AttributeProto.tensors: object expected");w.tensors[ae]=B.onnx.TensorProto.fromObject(i.tensors[ae])}}if(i.graphs){if(!Array.isArray(i.graphs))throw TypeError(".onnx.AttributeProto.graphs: array expected");for(w.graphs=[],ae=0;ae<i.graphs.length;++ae){if(typeof i.graphs[ae]!="object")throw TypeError(".onnx.AttributeProto.graphs: object expected");w.graphs[ae]=B.onnx.GraphProto.fromObject(i.graphs[ae])}}return w},o.toObject=function(i,w){w||(w={});var ae={};if((w.arrays||w.defaults)&&(ae.floats=[],ae.ints=[],ae.strings=[],ae.tensors=[],ae.graphs=[]),w.defaults){if(ae.name="",ae.f=0,G.Long){var ue=new G.Long(0,0,!1);ae.i=w.longs===String?ue.toString():w.longs===Number?ue.toNumber():ue}else ae.i=w.longs===String?"0":0;w.bytes===String?ae.s="":(ae.s=[],w.bytes!==Array&&(ae.s=G.newBuffer(ae.s))),ae.t=null,ae.g=null,ae.docString="",ae.type=w.enums===String?"UNDEFINED":0,ae.refAttrName=""}if(i.name!=null&&i.hasOwnProperty("name")&&(ae.name=i.name),i.f!=null&&i.hasOwnProperty("f")&&(ae.f=w.json&&!isFinite(i.f)?String(i.f):i.f),i.i!=null&&i.hasOwnProperty("i")&&(typeof i.i=="number"?ae.i=w.longs===String?String(i.i):i.i:ae.i=w.longs===String?G.Long.prototype.toString.call(i.i):w.longs===Number?new G.LongBits(i.i.low>>>0,i.i.high>>>0).toNumber():i.i),i.s!=null&&i.hasOwnProperty("s")&&(ae.s=w.bytes===String?G.base64.encode(i.s,0,i.s.length):w.bytes===Array?Array.prototype.slice.call(i.s):i.s),i.t!=null&&i.hasOwnProperty("t")&&(ae.t=B.onnx.TensorProto.toObject(i.t,w)),i.g!=null&&i.hasOwnProperty("g")&&(ae.g=B.onnx.GraphProto.toObject(i.g,w)),i.floats&&i.floats.length){ae.floats=[];for(var he=0;he<i.floats.length;++he)ae.floats[he]=w.json&&!isFinite(i.floats[he])?String(i.floats[he]):i.floats[he]}if(i.ints&&i.ints.length)for(ae.ints=[],he=0;he<i.ints.length;++he)typeof i.ints[he]=="number"?ae.ints[he]=w.longs===String?String(i.ints[he]):i.ints[he]:ae.ints[he]=w.longs===String?G.Long.prototype.toString.call(i.ints[he]):w.longs===Number?new G.LongBits(i.ints[he].low>>>0,i.ints[he].high>>>0).toNumber():i.ints[he];if(i.strings&&i.strings.length)for(ae.strings=[],he=0;he<i.strings.length;++he)ae.strings[he]=w.bytes===String?G.base64.encode(i.strings[he],0,i.strings[he].length):w.bytes===Array?Array.prototype.slice.call(i.strings[he]):i.strings[he];if(i.tensors&&i.tensors.length)for(ae.tensors=[],he=0;he<i.tensors.length;++he)ae.tensors[he]=B.onnx.TensorProto.toObject(i.tensors[he],w);if(i.graphs&&i.graphs.length)for(ae.graphs=[],he=0;he<i.graphs.length;++he)ae.graphs[he]=B.onnx.GraphProto.toObject(i.graphs[he],w);return i.docString!=null&&i.hasOwnProperty("docString")&&(ae.docString=i.docString),i.type!=null&&i.hasOwnProperty("type")&&(ae.type=w.enums===String?B.onnx.AttributeProto.AttributeType[i.type]:i.type),i.refAttrName!=null&&i.hasOwnProperty("refAttrName")&&(ae.refAttrName=i.refAttrName),ae},o.prototype.toJSON=function(){return this.constructor.toObject(this,d.util.toJSONOptions)},o.AttributeType=(function(){var i={},w=Object.create(i);return w[i[0]="UNDEFINED"]=0,w[i[1]="FLOAT"]=1,w[i[2]="INT"]=2,w[i[3]="STRING"]=3,w[i[4]="TENSOR"]=4,w[i[5]="GRAPH"]=5,w[i[6]="FLOATS"]=6,w[i[7]="INTS"]=7,w[i[8]="STRINGS"]=8,w[i[9]="TENSORS"]=9,w[i[10]="GRAPHS"]=10,w})(),o})(),T.ValueInfoProto=(function(){function o(i){if(i)for(var w=Object.keys(i),ae=0;ae<w.length;++ae)i[w[ae]]!=null&&(this[w[ae]]=i[w[ae]])}return o.prototype.name="",o.prototype.type=null,o.prototype.docString="",o.create=function(i){return new o(i)},o.encode=function(i,w){return w||(w=le.create()),i.name!=null&&i.hasOwnProperty("name")&&w.uint32(10).string(i.name),i.type!=null&&i.hasOwnProperty("type")&&B.onnx.TypeProto.encode(i.type,w.uint32(18).fork()).ldelim(),i.docString!=null&&i.hasOwnProperty("docString")&&w.uint32(26).string(i.docString),w},o.encodeDelimited=function(i,w){return this.encode(i,w).ldelim()},o.decode=function(i,w){i instanceof A||(i=A.create(i));for(var ae=w===void 0?i.len:i.pos+w,ue=new B.onnx.ValueInfoProto;i.pos<ae;){var he=i.uint32();switch(he>>>3){case 1:ue.name=i.string();break;case 2:ue.type=B.onnx.TypeProto.decode(i,i.uint32());break;case 3:ue.docString=i.string();break;default:i.skipType(7&he)}}return ue},o.decodeDelimited=function(i){return i instanceof A||(i=new A(i)),this.decode(i,i.uint32())},o.verify=function(i){if(typeof i!="object"||i===null)return"object expected";if(i.name!=null&&i.hasOwnProperty("name")&&!G.isString(i.name))return"name: string expected";if(i.type!=null&&i.hasOwnProperty("type")){var w=B.onnx.TypeProto.verify(i.type);if(w)return"type."+w}return i.docString!=null&&i.hasOwnProperty("docString")&&!G.isString(i.docString)?"docString: string expected":null},o.fromObject=function(i){if(i instanceof B.onnx.ValueInfoProto)return i;var w=new B.onnx.ValueInfoProto;if(i.name!=null&&(w.name=String(i.name)),i.type!=null){if(typeof i.type!="object")throw TypeError(".onnx.ValueInfoProto.type: object expected");w.type=B.onnx.TypeProto.fromObject(i.type)}return i.docString!=null&&(w.docString=String(i.docString)),w},o.toObject=function(i,w){w||(w={});var ae={};return w.defaults&&(ae.name="",ae.type=null,ae.docString=""),i.name!=null&&i.hasOwnProperty("name")&&(ae.name=i.name),i.type!=null&&i.hasOwnProperty("type")&&(ae.type=B.onnx.TypeProto.toObject(i.type,w)),i.docString!=null&&i.hasOwnProperty("docString")&&(ae.docString=i.docString),ae},o.prototype.toJSON=function(){return this.constructor.toObject(this,d.util.toJSONOptions)},o})(),T.NodeProto=(function(){function o(i){if(this.input=[],this.output=[],this.attribute=[],i)for(var w=Object.keys(i),ae=0;ae<w.length;++ae)i[w[ae]]!=null&&(this[w[ae]]=i[w[ae]])}return o.prototype.input=G.emptyArray,o.prototype.output=G.emptyArray,o.prototype.name="",o.prototype.opType="",o.prototype.domain="",o.prototype.attribute=G.emptyArray,o.prototype.docString="",o.create=function(i){return new o(i)},o.encode=function(i,w){if(w||(w=le.create()),i.input!=null&&i.input.length)for(var ae=0;ae<i.input.length;++ae)w.uint32(10).string(i.input[ae]);if(i.output!=null&&i.output.length)for(ae=0;ae<i.output.length;++ae)w.uint32(18).string(i.output[ae]);if(i.name!=null&&i.hasOwnProperty("name")&&w.uint32(26).string(i.name),i.opType!=null&&i.hasOwnProperty("opType")&&w.uint32(34).string(i.opType),i.attribute!=null&&i.attribute.length)for(ae=0;ae<i.attribute.length;++ae)B.onnx.AttributeProto.encode(i.attribute[ae],w.uint32(42).fork()).ldelim();return i.docString!=null&&i.hasOwnProperty("docString")&&w.uint32(50).string(i.docString),i.domain!=null&&i.hasOwnProperty("domain")&&w.uint32(58).string(i.domain),w},o.encodeDelimited=function(i,w){return this.encode(i,w).ldelim()},o.decode=function(i,w){i instanceof A||(i=A.create(i));for(var ae=w===void 0?i.len:i.pos+w,ue=new B.onnx.NodeProto;i.pos<ae;){var he=i.uint32();switch(he>>>3){case 1:ue.input&&ue.input.length||(ue.input=[]),ue.input.push(i.string());break;case 2:ue.output&&ue.output.length||(ue.output=[]),ue.output.push(i.string());break;case 3:ue.name=i.string();break;case 4:ue.opType=i.string();break;case 7:ue.domain=i.string();break;case 5:ue.attribute&&ue.attribute.length||(ue.attribute=[]),ue.attribute.push(B.onnx.AttributeProto.decode(i,i.uint32()));break;case 6:ue.docString=i.string();break;default:i.skipType(7&he)}}return ue},o.decodeDelimited=function(i){return i instanceof A||(i=new A(i)),this.decode(i,i.uint32())},o.verify=function(i){if(typeof i!="object"||i===null)return"object expected";if(i.input!=null&&i.hasOwnProperty("input")){if(!Array.isArray(i.input))return"input: array expected";for(var w=0;w<i.input.length;++w)if(!G.isString(i.input[w]))return"input: string[] expected"}if(i.output!=null&&i.hasOwnProperty("output")){if(!Array.isArray(i.output))return"output: array expected";for(w=0;w<i.output.length;++w)if(!G.isString(i.output[w]))return"output: string[] expected"}if(i.name!=null&&i.hasOwnProperty("name")&&!G.isString(i.name))return"name: string expected";if(i.opType!=null&&i.hasOwnProperty("opType")&&!G.isString(i.opType))return"opType: string expected";if(i.domain!=null&&i.hasOwnProperty("domain")&&!G.isString(i.domain))return"domain: string expected";if(i.attribute!=null&&i.hasOwnProperty("attribute")){if(!Array.isArray(i.attribute))return"attribute: array expected";for(w=0;w<i.attribute.length;++w){var ae=B.onnx.AttributeProto.verify(i.attribute[w]);if(ae)return"attribute."+ae}}return i.docString!=null&&i.hasOwnProperty("docString")&&!G.isString(i.docString)?"docString: string expected":null},o.fromObject=function(i){if(i instanceof B.onnx.NodeProto)return i;var w=new B.onnx.NodeProto;if(i.input){if(!Array.isArray(i.input))throw TypeError(".onnx.NodeProto.input: array expected");w.input=[];for(var ae=0;ae<i.input.length;++ae)w.input[ae]=String(i.input[ae])}if(i.output){if(!Array.isArray(i.output))throw TypeError(".onnx.NodeProto.output: array expected");for(w.output=[],ae=0;ae<i.output.length;++ae)w.output[ae]=String(i.output[ae])}if(i.name!=null&&(w.name=String(i.name)),i.opType!=null&&(w.opType=String(i.opType)),i.domain!=null&&(w.domain=String(i.domain)),i.attribute){if(!Array.isArray(i.attribute))throw TypeError(".onnx.NodeProto.attribute: array expected");for(w.attribute=[],ae=0;ae<i.attribute.length;++ae){if(typeof i.attribute[ae]!="object")throw TypeError(".onnx.NodeProto.attribute: object expected");w.attribute[ae]=B.onnx.AttributeProto.fromObject(i.attribute[ae])}}return i.docString!=null&&(w.docString=String(i.docString)),w},o.toObject=function(i,w){w||(w={});var ae={};if((w.arrays||w.defaults)&&(ae.input=[],ae.output=[],ae.attribute=[]),w.defaults&&(ae.name="",ae.opType="",ae.docString="",ae.domain=""),i.input&&i.input.length){ae.input=[];for(var ue=0;ue<i.input.length;++ue)ae.input[ue]=i.input[ue]}if(i.output&&i.output.length)for(ae.output=[],ue=0;ue<i.output.length;++ue)ae.output[ue]=i.output[ue];if(i.name!=null&&i.hasOwnProperty("name")&&(ae.name=i.name),i.opType!=null&&i.hasOwnProperty("opType")&&(ae.opType=i.opType),i.attribute&&i.attribute.length)for(ae.attribute=[],ue=0;ue<i.attribute.length;++ue)ae.attribute[ue]=B.onnx.AttributeProto.toObject(i.attribute[ue],w);return i.docString!=null&&i.hasOwnProperty("docString")&&(ae.docString=i.docString),i.domain!=null&&i.hasOwnProperty("domain")&&(ae.domain=i.domain),ae},o.prototype.toJSON=function(){return this.constructor.toObject(this,d.util.toJSONOptions)},o})(),T.ModelProto=(function(){function o(i){if(this.opsetImport=[],this.metadataProps=[],i)for(var w=Object.keys(i),ae=0;ae<w.length;++ae)i[w[ae]]!=null&&(this[w[ae]]=i[w[ae]])}return o.prototype.irVersion=G.Long?G.Long.fromBits(0,0,!1):0,o.prototype.opsetImport=G.emptyArray,o.prototype.producerName="",o.prototype.producerVersion="",o.prototype.domain="",o.prototype.modelVersion=G.Long?G.Long.fromBits(0,0,!1):0,o.prototype.docString="",o.prototype.graph=null,o.prototype.metadataProps=G.emptyArray,o.create=function(i){return new o(i)},o.encode=function(i,w){if(w||(w=le.create()),i.irVersion!=null&&i.hasOwnProperty("irVersion")&&w.uint32(8).int64(i.irVersion),i.producerName!=null&&i.hasOwnProperty("producerName")&&w.uint32(18).string(i.producerName),i.producerVersion!=null&&i.hasOwnProperty("producerVersion")&&w.uint32(26).string(i.producerVersion),i.domain!=null&&i.hasOwnProperty("domain")&&w.uint32(34).string(i.domain),i.modelVersion!=null&&i.hasOwnProperty("modelVersion")&&w.uint32(40).int64(i.modelVersion),i.docString!=null&&i.hasOwnProperty("docString")&&w.uint32(50).string(i.docString),i.graph!=null&&i.hasOwnProperty("graph")&&B.onnx.GraphProto.encode(i.graph,w.uint32(58).fork()).ldelim(),i.opsetImport!=null&&i.opsetImport.length)for(var ae=0;ae<i.opsetImport.length;++ae)B.onnx.OperatorSetIdProto.encode(i.opsetImport[ae],w.uint32(66).fork()).ldelim();if(i.metadataProps!=null&&i.metadataProps.length)for(ae=0;ae<i.metadataProps.length;++ae)B.onnx.StringStringEntryProto.encode(i.metadataProps[ae],w.uint32(114).fork()).ldelim();return w},o.encodeDelimited=function(i,w){return this.encode(i,w).ldelim()},o.decode=function(i,w){i instanceof A||(i=A.create(i));for(var ae=w===void 0?i.len:i.pos+w,ue=new B.onnx.ModelProto;i.pos<ae;){var he=i.uint32();switch(he>>>3){case 1:ue.irVersion=i.int64();break;case 8:ue.opsetImport&&ue.opsetImport.length||(ue.opsetImport=[]),ue.opsetImport.push(B.onnx.OperatorSetIdProto.decode(i,i.uint32()));break;case 2:ue.producerName=i.string();break;case 3:ue.producerVersion=i.string();break;case 4:ue.domain=i.string();break;case 5:ue.modelVersion=i.int64();break;case 6:ue.docString=i.string();break;case 7:ue.graph=B.onnx.GraphProto.decode(i,i.uint32());break;case 14:ue.metadataProps&&ue.metadataProps.length||(ue.metadataProps=[]),ue.metadataProps.push(B.onnx.StringStringEntryProto.decode(i,i.uint32()));break;default:i.skipType(7&he)}}return ue},o.decodeDelimited=function(i){return i instanceof A||(i=new A(i)),this.decode(i,i.uint32())},o.verify=function(i){if(typeof i!="object"||i===null)return"object expected";if(i.irVersion!=null&&i.hasOwnProperty("irVersion")&&!(G.isInteger(i.irVersion)||i.irVersion&&G.isInteger(i.irVersion.low)&&G.isInteger(i.irVersion.high)))return"irVersion: integer|Long expected";if(i.opsetImport!=null&&i.hasOwnProperty("opsetImport")){if(!Array.isArray(i.opsetImport))return"opsetImport: array expected";for(var w=0;w<i.opsetImport.length;++w)if(ae=B.onnx.OperatorSetIdProto.verify(i.opsetImport[w]))return"opsetImport."+ae}if(i.producerName!=null&&i.hasOwnProperty("producerName")&&!G.isString(i.producerName))return"producerName: string expected";if(i.producerVersion!=null&&i.hasOwnProperty("producerVersion")&&!G.isString(i.producerVersion))return"producerVersion: string expected";if(i.domain!=null&&i.hasOwnProperty("domain")&&!G.isString(i.domain))return"domain: string expected";if(i.modelVersion!=null&&i.hasOwnProperty("modelVersion")&&!(G.isInteger(i.modelVersion)||i.modelVersion&&G.isInteger(i.modelVersion.low)&&G.isInteger(i.modelVersion.high)))return"modelVersion: integer|Long expected";if(i.docString!=null&&i.hasOwnProperty("docString")&&!G.isString(i.docString))return"docString: string expected";if(i.graph!=null&&i.hasOwnProperty("graph")&&(ae=B.onnx.GraphProto.verify(i.graph)))return"graph."+ae;if(i.metadataProps!=null&&i.hasOwnProperty("metadataProps")){if(!Array.isArray(i.metadataProps))return"metadataProps: array expected";for(w=0;w<i.metadataProps.length;++w){var ae;if(ae=B.onnx.StringStringEntryProto.verify(i.metadataProps[w]))return"metadataProps."+ae}}return null},o.fromObject=function(i){if(i instanceof B.onnx.ModelProto)return i;var w=new B.onnx.ModelProto;if(i.irVersion!=null&&(G.Long?(w.irVersion=G.Long.fromValue(i.irVersion)).unsigned=!1:typeof i.irVersion=="string"?w.irVersion=parseInt(i.irVersion,10):typeof i.irVersion=="number"?w.irVersion=i.irVersion:typeof i.irVersion=="object"&&(w.irVersion=new G.LongBits(i.irVersion.low>>>0,i.irVersion.high>>>0).toNumber())),i.opsetImport){if(!Array.isArray(i.opsetImport))throw TypeError(".onnx.ModelProto.opsetImport: array expected");w.opsetImport=[];for(var ae=0;ae<i.opsetImport.length;++ae){if(typeof i.opsetImport[ae]!="object")throw TypeError(".onnx.ModelProto.opsetImport: object expected");w.opsetImport[ae]=B.onnx.OperatorSetIdProto.fromObject(i.opsetImport[ae])}}if(i.producerName!=null&&(w.producerName=String(i.producerName)),i.producerVersion!=null&&(w.producerVersion=String(i.producerVersion)),i.domain!=null&&(w.domain=String(i.domain)),i.modelVersion!=null&&(G.Long?(w.modelVersion=G.Long.fromValue(i.modelVersion)).unsigned=!1:typeof i.modelVersion=="string"?w.modelVersion=parseInt(i.modelVersion,10):typeof i.modelVersion=="number"?w.modelVersion=i.modelVersion:typeof i.modelVersion=="object"&&(w.modelVersion=new G.LongBits(i.modelVersion.low>>>0,i.modelVersion.high>>>0).toNumber())),i.docString!=null&&(w.docString=String(i.docString)),i.graph!=null){if(typeof i.graph!="object")throw TypeError(".onnx.ModelProto.graph: object expected");w.graph=B.onnx.GraphProto.fromObject(i.graph)}if(i.metadataProps){if(!Array.isArray(i.metadataProps))throw TypeError(".onnx.ModelProto.metadataProps: array expected");for(w.metadataProps=[],ae=0;ae<i.metadataProps.length;++ae){if(typeof i.metadataProps[ae]!="object")throw TypeError(".onnx.ModelProto.metadataProps: object expected");w.metadataProps[ae]=B.onnx.StringStringEntryProto.fromObject(i.metadataProps[ae])}}return w},o.toObject=function(i,w){w||(w={});var ae={};if((w.arrays||w.defaults)&&(ae.opsetImport=[],ae.metadataProps=[]),w.defaults){if(G.Long){var ue=new G.Long(0,0,!1);ae.irVersion=w.longs===String?ue.toString():w.longs===Number?ue.toNumber():ue}else ae.irVersion=w.longs===String?"0":0;ae.producerName="",ae.producerVersion="",ae.domain="",G.Long?(ue=new G.Long(0,0,!1),ae.modelVersion=w.longs===String?ue.toString():w.longs===Number?ue.toNumber():ue):ae.modelVersion=w.longs===String?"0":0,ae.docString="",ae.graph=null}if(i.irVersion!=null&&i.hasOwnProperty("irVersion")&&(typeof i.irVersion=="number"?ae.irVersion=w.longs===String?String(i.irVersion):i.irVersion:ae.irVersion=w.longs===String?G.Long.prototype.toString.call(i.irVersion):w.longs===Number?new G.LongBits(i.irVersion.low>>>0,i.irVersion.high>>>0).toNumber():i.irVersion),i.producerName!=null&&i.hasOwnProperty("producerName")&&(ae.producerName=i.producerName),i.producerVersion!=null&&i.hasOwnProperty("producerVersion")&&(ae.producerVersion=i.producerVersion),i.domain!=null&&i.hasOwnProperty("domain")&&(ae.domain=i.domain),i.modelVersion!=null&&i.hasOwnProperty("modelVersion")&&(typeof i.modelVersion=="number"?ae.modelVersion=w.longs===String?String(i.modelVersion):i.modelVersion:ae.modelVersion=w.longs===String?G.Long.prototype.toString.call(i.modelVersion):w.longs===Number?new G.LongBits(i.modelVersion.low>>>0,i.modelVersion.high>>>0).toNumber():i.modelVersion),i.docString!=null&&i.hasOwnProperty("docString")&&(ae.docString=i.docString),i.graph!=null&&i.hasOwnProperty("graph")&&(ae.graph=B.onnx.GraphProto.toObject(i.graph,w)),i.opsetImport&&i.opsetImport.length){ae.opsetImport=[];for(var he=0;he<i.opsetImport.length;++he)ae.opsetImport[he]=B.onnx.OperatorSetIdProto.toObject(i.opsetImport[he],w)}if(i.metadataProps&&i.metadataProps.length)for(ae.metadataProps=[],he=0;he<i.metadataProps.length;++he)ae.metadataProps[he]=B.onnx.StringStringEntryProto.toObject(i.metadataProps[he],w);return ae},o.prototype.toJSON=function(){return this.constructor.toObject(this,d.util.toJSONOptions)},o})(),T.StringStringEntryProto=(function(){function o(i){if(i)for(var w=Object.keys(i),ae=0;ae<w.length;++ae)i[w[ae]]!=null&&(this[w[ae]]=i[w[ae]])}return o.prototype.key="",o.prototype.value="",o.create=function(i){return new o(i)},o.encode=function(i,w){return w||(w=le.create()),i.key!=null&&i.hasOwnProperty("key")&&w.uint32(10).string(i.key),i.value!=null&&i.hasOwnProperty("value")&&w.uint32(18).string(i.value),w},o.encodeDelimited=function(i,w){return this.encode(i,w).ldelim()},o.decode=function(i,w){i instanceof A||(i=A.create(i));for(var ae=w===void 0?i.len:i.pos+w,ue=new B.onnx.StringStringEntryProto;i.pos<ae;){var he=i.uint32();switch(he>>>3){case 1:ue.key=i.string();break;case 2:ue.value=i.string();break;default:i.skipType(7&he)}}return ue},o.decodeDelimited=function(i){return i instanceof A||(i=new A(i)),this.decode(i,i.uint32())},o.verify=function(i){return typeof i!="object"||i===null?"object expected":i.key!=null&&i.hasOwnProperty("key")&&!G.isString(i.key)?"key: string expected":i.value!=null&&i.hasOwnProperty("value")&&!G.isString(i.value)?"value: string expected":null},o.fromObject=function(i){if(i instanceof B.onnx.StringStringEntryProto)return i;var w=new B.onnx.StringStringEntryProto;return i.key!=null&&(w.key=String(i.key)),i.value!=null&&(w.value=String(i.value)),w},o.toObject=function(i,w){w||(w={});var ae={};return w.defaults&&(ae.key="",ae.value=""),i.key!=null&&i.hasOwnProperty("key")&&(ae.key=i.key),i.value!=null&&i.hasOwnProperty("value")&&(ae.value=i.value),ae},o.prototype.toJSON=function(){return this.constructor.toObject(this,d.util.toJSONOptions)},o})(),T.TensorAnnotation=(function(){function o(i){if(this.quantParameterTensorNames=[],i)for(var w=Object.keys(i),ae=0;ae<w.length;++ae)i[w[ae]]!=null&&(this[w[ae]]=i[w[ae]])}return o.prototype.tensorName="",o.prototype.quantParameterTensorNames=G.emptyArray,o.create=function(i){return new o(i)},o.encode=function(i,w){if(w||(w=le.create()),i.tensorName!=null&&i.hasOwnProperty("tensorName")&&w.uint32(10).string(i.tensorName),i.quantParameterTensorNames!=null&&i.quantParameterTensorNames.length)for(var ae=0;ae<i.quantParameterTensorNames.length;++ae)B.onnx.StringStringEntryProto.encode(i.quantParameterTensorNames[ae],w.uint32(18).fork()).ldelim();return w},o.encodeDelimited=function(i,w){return this.encode(i,w).ldelim()},o.decode=function(i,w){i instanceof A||(i=A.create(i));for(var ae=w===void 0?i.len:i.pos+w,ue=new B.onnx.TensorAnnotation;i.pos<ae;){var he=i.uint32();switch(he>>>3){case 1:ue.tensorName=i.string();break;case 2:ue.quantParameterTensorNames&&ue.quantParameterTensorNames.length||(ue.quantParameterTensorNames=[]),ue.quantParameterTensorNames.push(B.onnx.StringStringEntryProto.decode(i,i.uint32()));break;default:i.skipType(7&he)}}return ue},o.decodeDelimited=function(i){return i instanceof A||(i=new A(i)),this.decode(i,i.uint32())},o.verify=function(i){if(typeof i!="object"||i===null)return"object expected";if(i.tensorName!=null&&i.hasOwnProperty("tensorName")&&!G.isString(i.tensorName))return"tensorName: string expected";if(i.quantParameterTensorNames!=null&&i.hasOwnProperty("quantParameterTensorNames")){if(!Array.isArray(i.quantParameterTensorNames))return"quantParameterTensorNames: array expected";for(var w=0;w<i.quantParameterTensorNames.length;++w){var ae=B.onnx.StringStringEntryProto.verify(i.quantParameterTensorNames[w]);if(ae)return"quantParameterTensorNames."+ae}}return null},o.fromObject=function(i){if(i instanceof B.onnx.TensorAnnotation)return i;var w=new B.onnx.TensorAnnotation;if(i.tensorName!=null&&(w.tensorName=String(i.tensorName)),i.quantParameterTensorNames){if(!Array.isArray(i.quantParameterTensorNames))throw TypeError(".onnx.TensorAnnotation.quantParameterTensorNames: array expected");w.quantParameterTensorNames=[];for(var ae=0;ae<i.quantParameterTensorNames.length;++ae){if(typeof i.quantParameterTensorNames[ae]!="object")throw TypeError(".onnx.TensorAnnotation.quantParameterTensorNames: object expected");w.quantParameterTensorNames[ae]=B.onnx.StringStringEntryProto.fromObject(i.quantParameterTensorNames[ae])}}return w},o.toObject=function(i,w){w||(w={});var ae={};if((w.arrays||w.defaults)&&(ae.quantParameterTensorNames=[]),w.defaults&&(ae.tensorName=""),i.tensorName!=null&&i.hasOwnProperty("tensorName")&&(ae.tensorName=i.tensorName),i.quantParameterTensorNames&&i.quantParameterTensorNames.length){ae.quantParameterTensorNames=[];for(var ue=0;ue<i.quantParameterTensorNames.length;++ue)ae.quantParameterTensorNames[ue]=B.onnx.StringStringEntryProto.toObject(i.quantParameterTensorNames[ue],w)}return ae},o.prototype.toJSON=function(){return this.constructor.toObject(this,d.util.toJSONOptions)},o})(),T.GraphProto=(function(){function o(i){if(this.node=[],this.initializer=[],this.input=[],this.output=[],this.valueInfo=[],this.quantizationAnnotation=[],i)for(var w=Object.keys(i),ae=0;ae<w.length;++ae)i[w[ae]]!=null&&(this[w[ae]]=i[w[ae]])}return o.prototype.node=G.emptyArray,o.prototype.name="",o.prototype.initializer=G.emptyArray,o.prototype.docString="",o.prototype.input=G.emptyArray,o.prototype.output=G.emptyArray,o.prototype.valueInfo=G.emptyArray,o.prototype.quantizationAnnotation=G.emptyArray,o.create=function(i){return new o(i)},o.encode=function(i,w){if(w||(w=le.create()),i.node!=null&&i.node.length)for(var ae=0;ae<i.node.length;++ae)B.onnx.NodeProto.encode(i.node[ae],w.uint32(10).fork()).ldelim();if(i.name!=null&&i.hasOwnProperty("name")&&w.uint32(18).string(i.name),i.initializer!=null&&i.initializer.length)for(ae=0;ae<i.initializer.length;++ae)B.onnx.TensorProto.encode(i.initializer[ae],w.uint32(42).fork()).ldelim();if(i.docString!=null&&i.hasOwnProperty("docString")&&w.uint32(82).string(i.docString),i.input!=null&&i.input.length)for(ae=0;ae<i.input.length;++ae)B.onnx.ValueInfoProto.encode(i.input[ae],w.uint32(90).fork()).ldelim();if(i.output!=null&&i.output.length)for(ae=0;ae<i.output.length;++ae)B.onnx.ValueInfoProto.encode(i.output[ae],w.uint32(98).fork()).ldelim();if(i.valueInfo!=null&&i.valueInfo.length)for(ae=0;ae<i.valueInfo.length;++ae)B.onnx.ValueInfoProto.encode(i.valueInfo[ae],w.uint32(106).fork()).ldelim();if(i.quantizationAnnotation!=null&&i.quantizationAnnotation.length)for(ae=0;ae<i.quantizationAnnotation.length;++ae)B.onnx.TensorAnnotation.encode(i.quantizationAnnotation[ae],w.uint32(114).fork()).ldelim();return w},o.encodeDelimited=function(i,w){return this.encode(i,w).ldelim()},o.decode=function(i,w){i instanceof A||(i=A.create(i));for(var ae=w===void 0?i.len:i.pos+w,ue=new B.onnx.GraphProto;i.pos<ae;){var he=i.uint32();switch(he>>>3){case 1:ue.node&&ue.node.length||(ue.node=[]),ue.node.push(B.onnx.NodeProto.decode(i,i.uint32()));break;case 2:ue.name=i.string();break;case 5:ue.initializer&&ue.initializer.length||(ue.initializer=[]),ue.initializer.push(B.onnx.TensorProto.decode(i,i.uint32()));break;case 10:ue.docString=i.string();break;case 11:ue.input&&ue.input.length||(ue.input=[]),ue.input.push(B.onnx.ValueInfoProto.decode(i,i.uint32()));break;case 12:ue.output&&ue.output.length||(ue.output=[]),ue.output.push(B.onnx.ValueInfoProto.decode(i,i.uint32()));break;case 13:ue.valueInfo&&ue.valueInfo.length||(ue.valueInfo=[]),ue.valueInfo.push(B.onnx.ValueInfoProto.decode(i,i.uint32()));break;case 14:ue.quantizationAnnotation&&ue.quantizationAnnotation.length||(ue.quantizationAnnotation=[]),ue.quantizationAnnotation.push(B.onnx.TensorAnnotation.decode(i,i.uint32()));break;default:i.skipType(7&he)}}return ue},o.decodeDelimited=function(i){return i instanceof A||(i=new A(i)),this.decode(i,i.uint32())},o.verify=function(i){if(typeof i!="object"||i===null)return"object expected";if(i.node!=null&&i.hasOwnProperty("node")){if(!Array.isArray(i.node))return"node: array expected";for(var w=0;w<i.node.length;++w)if(ae=B.onnx.NodeProto.verify(i.node[w]))return"node."+ae}if(i.name!=null&&i.hasOwnProperty("name")&&!G.isString(i.name))return"name: string expected";if(i.initializer!=null&&i.hasOwnProperty("initializer")){if(!Array.isArray(i.initializer))return"initializer: array expected";for(w=0;w<i.initializer.length;++w)if(ae=B.onnx.TensorProto.verify(i.initializer[w]))return"initializer."+ae}if(i.docString!=null&&i.hasOwnProperty("docString")&&!G.isString(i.docString))return"docString: string expected";if(i.input!=null&&i.hasOwnProperty("input")){if(!Array.isArray(i.input))return"input: array expected";for(w=0;w<i.input.length;++w)if(ae=B.onnx.ValueInfoProto.verify(i.input[w]))return"input."+ae}if(i.output!=null&&i.hasOwnProperty("output")){if(!Array.isArray(i.output))return"output: array expected";for(w=0;w<i.output.length;++w)if(ae=B.onnx.ValueInfoProto.verify(i.output[w]))return"output."+ae}if(i.valueInfo!=null&&i.hasOwnProperty("valueInfo")){if(!Array.isArray(i.valueInfo))return"valueInfo: array expected";for(w=0;w<i.valueInfo.length;++w)if(ae=B.onnx.ValueInfoProto.verify(i.valueInfo[w]))return"valueInfo."+ae}if(i.quantizationAnnotation!=null&&i.hasOwnProperty("quantizationAnnotation")){if(!Array.isArray(i.quantizationAnnotation))return"quantizationAnnotation: array expected";for(w=0;w<i.quantizationAnnotation.length;++w){var ae;if(ae=B.onnx.TensorAnnotation.verify(i.quantizationAnnotation[w]))return"quantizationAnnotation."+ae}}return null},o.fromObject=function(i){if(i instanceof B.onnx.GraphProto)return i;var w=new B.onnx.GraphProto;if(i.node){if(!Array.isArray(i.node))throw TypeError(".onnx.GraphProto.node: array expected");w.node=[];for(var ae=0;ae<i.node.length;++ae){if(typeof i.node[ae]!="object")throw TypeError(".onnx.GraphProto.node: object expected");w.node[ae]=B.onnx.NodeProto.fromObject(i.node[ae])}}if(i.name!=null&&(w.name=String(i.name)),i.initializer){if(!Array.isArray(i.initializer))throw TypeError(".onnx.GraphProto.initializer: array expected");for(w.initializer=[],ae=0;ae<i.initializer.length;++ae){if(typeof i.initializer[ae]!="object")throw TypeError(".onnx.GraphProto.initializer: object expected");w.initializer[ae]=B.onnx.TensorProto.fromObject(i.initializer[ae])}}if(i.docString!=null&&(w.docString=String(i.docString)),i.input){if(!Array.isArray(i.input))throw TypeError(".onnx.GraphProto.input: array expected");for(w.input=[],ae=0;ae<i.input.length;++ae){if(typeof i.input[ae]!="object")throw TypeError(".onnx.GraphProto.input: object expected");w.input[ae]=B.onnx.ValueInfoProto.fromObject(i.input[ae])}}if(i.output){if(!Array.isArray(i.output))throw TypeError(".onnx.GraphProto.output: array expected");for(w.output=[],ae=0;ae<i.output.length;++ae){if(typeof i.output[ae]!="object")throw TypeError(".onnx.GraphProto.output: object expected");w.output[ae]=B.onnx.ValueInfoProto.fromObject(i.output[ae])}}if(i.valueInfo){if(!Array.isArray(i.valueInfo))throw TypeError(".onnx.GraphProto.valueInfo: array expected");for(w.valueInfo=[],ae=0;ae<i.valueInfo.length;++ae){if(typeof i.valueInfo[ae]!="object")throw TypeError(".onnx.GraphProto.valueInfo: object expected");w.valueInfo[ae]=B.onnx.ValueInfoProto.fromObject(i.valueInfo[ae])}}if(i.quantizationAnnotation){if(!Array.isArray(i.quantizationAnnotation))throw TypeError(".onnx.GraphProto.quantizationAnnotation: array expected");for(w.quantizationAnnotation=[],ae=0;ae<i.quantizationAnnotation.length;++ae){if(typeof i.quantizationAnnotation[ae]!="object")throw TypeError(".onnx.GraphProto.quantizationAnnotation: object expected");w.quantizationAnnotation[ae]=B.onnx.TensorAnnotation.fromObject(i.quantizationAnnotation[ae])}}return w},o.toObject=function(i,w){w||(w={});var ae={};if((w.arrays||w.defaults)&&(ae.node=[],ae.initializer=[],ae.input=[],ae.output=[],ae.valueInfo=[],ae.quantizationAnnotation=[]),w.defaults&&(ae.name="",ae.docString=""),i.node&&i.node.length){ae.node=[];for(var ue=0;ue<i.node.length;++ue)ae.node[ue]=B.onnx.NodeProto.toObject(i.node[ue],w)}if(i.name!=null&&i.hasOwnProperty("name")&&(ae.name=i.name),i.initializer&&i.initializer.length)for(ae.initializer=[],ue=0;ue<i.initializer.length;++ue)ae.initializer[ue]=B.onnx.TensorProto.toObject(i.initializer[ue],w);if(i.docString!=null&&i.hasOwnProperty("docString")&&(ae.docString=i.docString),i.input&&i.input.length)for(ae.input=[],ue=0;ue<i.input.length;++ue)ae.input[ue]=B.onnx.ValueInfoProto.toObject(i.input[ue],w);if(i.output&&i.output.length)for(ae.output=[],ue=0;ue<i.output.length;++ue)ae.output[ue]=B.onnx.ValueInfoProto.toObject(i.output[ue],w);if(i.valueInfo&&i.valueInfo.length)for(ae.valueInfo=[],ue=0;ue<i.valueInfo.length;++ue)ae.valueInfo[ue]=B.onnx.ValueInfoProto.toObject(i.valueInfo[ue],w);if(i.quantizationAnnotation&&i.quantizationAnnotation.length)for(ae.quantizationAnnotation=[],ue=0;ue<i.quantizationAnnotation.length;++ue)ae.quantizationAnnotation[ue]=B.onnx.TensorAnnotation.toObject(i.quantizationAnnotation[ue],w);return ae},o.prototype.toJSON=function(){return this.constructor.toObject(this,d.util.toJSONOptions)},o})(),T.TensorProto=(function(){function o(i){if(this.dims=[],this.floatData=[],this.int32Data=[],this.stringData=[],this.int64Data=[],this.externalData=[],this.doubleData=[],this.uint64Data=[],i)for(var w=Object.keys(i),ae=0;ae<w.length;++ae)i[w[ae]]!=null&&(this[w[ae]]=i[w[ae]])}return o.prototype.dims=G.emptyArray,o.prototype.dataType=0,o.prototype.segment=null,o.prototype.floatData=G.emptyArray,o.prototype.int32Data=G.emptyArray,o.prototype.stringData=G.emptyArray,o.prototype.int64Data=G.emptyArray,o.prototype.name="",o.prototype.docString="",o.prototype.rawData=G.newBuffer([]),o.prototype.externalData=G.emptyArray,o.prototype.dataLocation=0,o.prototype.doubleData=G.emptyArray,o.prototype.uint64Data=G.emptyArray,o.create=function(i){return new o(i)},o.encode=function(i,w){if(w||(w=le.create()),i.dims!=null&&i.dims.length){w.uint32(10).fork();for(var ae=0;ae<i.dims.length;++ae)w.int64(i.dims[ae]);w.ldelim()}if(i.dataType!=null&&i.hasOwnProperty("dataType")&&w.uint32(16).int32(i.dataType),i.segment!=null&&i.hasOwnProperty("segment")&&B.onnx.TensorProto.Segment.encode(i.segment,w.uint32(26).fork()).ldelim(),i.floatData!=null&&i.floatData.length){for(w.uint32(34).fork(),ae=0;ae<i.floatData.length;++ae)w.float(i.floatData[ae]);w.ldelim()}if(i.int32Data!=null&&i.int32Data.length){for(w.uint32(42).fork(),ae=0;ae<i.int32Data.length;++ae)w.int32(i.int32Data[ae]);w.ldelim()}if(i.stringData!=null&&i.stringData.length)for(ae=0;ae<i.stringData.length;++ae)w.uint32(50).bytes(i.stringData[ae]);if(i.int64Data!=null&&i.int64Data.length){for(w.uint32(58).fork(),ae=0;ae<i.int64Data.length;++ae)w.int64(i.int64Data[ae]);w.ldelim()}if(i.name!=null&&i.hasOwnProperty("name")&&w.uint32(66).string(i.name),i.rawData!=null&&i.hasOwnProperty("rawData")&&w.uint32(74).bytes(i.rawData),i.doubleData!=null&&i.doubleData.length){for(w.uint32(82).fork(),ae=0;ae<i.doubleData.length;++ae)w.double(i.doubleData[ae]);w.ldelim()}if(i.uint64Data!=null&&i.uint64Data.length){for(w.uint32(90).fork(),ae=0;ae<i.uint64Data.length;++ae)w.uint64(i.uint64Data[ae]);w.ldelim()}if(i.docString!=null&&i.hasOwnProperty("docString")&&w.uint32(98).string(i.docString),i.externalData!=null&&i.externalData.length)for(ae=0;ae<i.externalData.length;++ae)B.onnx.StringStringEntryProto.encode(i.externalData[ae],w.uint32(106).fork()).ldelim();return i.dataLocation!=null&&i.hasOwnProperty("dataLocation")&&w.uint32(112).int32(i.dataLocation),w},o.encodeDelimited=function(i,w){return this.encode(i,w).ldelim()},o.decode=function(i,w){i instanceof A||(i=A.create(i));for(var ae=w===void 0?i.len:i.pos+w,ue=new B.onnx.TensorProto;i.pos<ae;){var he=i.uint32();switch(he>>>3){case 1:if(ue.dims&&ue.dims.length||(ue.dims=[]),(7&he)==2)for(var pe=i.uint32()+i.pos;i.pos<pe;)ue.dims.push(i.int64());else ue.dims.push(i.int64());break;case 2:ue.dataType=i.int32();break;case 3:ue.segment=B.onnx.TensorProto.Segment.decode(i,i.uint32());break;case 4:if(ue.floatData&&ue.floatData.length||(ue.floatData=[]),(7&he)==2)for(pe=i.uint32()+i.pos;i.pos<pe;)ue.floatData.push(i.float());else ue.floatData.push(i.float());break;case 5:if(ue.int32Data&&ue.int32Data.length||(ue.int32Data=[]),(7&he)==2)for(pe=i.uint32()+i.pos;i.pos<pe;)ue.int32Data.push(i.int32());else ue.int32Data.push(i.int32());break;case 6:ue.stringData&&ue.stringData.length||(ue.stringData=[]),ue.stringData.push(i.bytes());break;case 7:if(ue.int64Data&&ue.int64Data.length||(ue.int64Data=[]),(7&he)==2)for(pe=i.uint32()+i.pos;i.pos<pe;)ue.int64Data.push(i.int64());else ue.int64Data.push(i.int64());break;case 8:ue.name=i.string();break;case 12:ue.docString=i.string();break;case 9:ue.rawData=i.bytes();break;case 13:ue.externalData&&ue.externalData.length||(ue.externalData=[]),ue.externalData.push(B.onnx.StringStringEntryProto.decode(i,i.uint32()));break;case 14:ue.dataLocation=i.int32();break;case 10:if(ue.doubleData&&ue.doubleData.length||(ue.doubleData=[]),(7&he)==2)for(pe=i.uint32()+i.pos;i.pos<pe;)ue.doubleData.push(i.double());else ue.doubleData.push(i.double());break;case 11:if(ue.uint64Data&&ue.uint64Data.length||(ue.uint64Data=[]),(7&he)==2)for(pe=i.uint32()+i.pos;i.pos<pe;)ue.uint64Data.push(i.uint64());else ue.uint64Data.push(i.uint64());break;default:i.skipType(7&he)}}return ue},o.decodeDelimited=function(i){return i instanceof A||(i=new A(i)),this.decode(i,i.uint32())},o.verify=function(i){if(typeof i!="object"||i===null)return"object expected";if(i.dims!=null&&i.hasOwnProperty("dims")){if(!Array.isArray(i.dims))return"dims: array expected";for(var w=0;w<i.dims.length;++w)if(!(G.isInteger(i.dims[w])||i.dims[w]&&G.isInteger(i.dims[w].low)&&G.isInteger(i.dims[w].high)))return"dims: integer|Long[] expected"}if(i.dataType!=null&&i.hasOwnProperty("dataType")&&!G.isInteger(i.dataType))return"dataType: integer expected";if(i.segment!=null&&i.hasOwnProperty("segment")&&(ae=B.onnx.TensorProto.Segment.verify(i.segment)))return"segment."+ae;if(i.floatData!=null&&i.hasOwnProperty("floatData")){if(!Array.isArray(i.floatData))return"floatData: array expected";for(w=0;w<i.floatData.length;++w)if(typeof i.floatData[w]!="number")return"floatData: number[] expected"}if(i.int32Data!=null&&i.hasOwnProperty("int32Data")){if(!Array.isArray(i.int32Data))return"int32Data: array expected";for(w=0;w<i.int32Data.length;++w)if(!G.isInteger(i.int32Data[w]))return"int32Data: integer[] expected"}if(i.stringData!=null&&i.hasOwnProperty("stringData")){if(!Array.isArray(i.stringData))return"stringData: array expected";for(w=0;w<i.stringData.length;++w)if(!(i.stringData[w]&&typeof i.stringData[w].length=="number"||G.isString(i.stringData[w])))return"stringData: buffer[] expected"}if(i.int64Data!=null&&i.hasOwnProperty("int64Data")){if(!Array.isArray(i.int64Data))return"int64Data: array expected";for(w=0;w<i.int64Data.length;++w)if(!(G.isInteger(i.int64Data[w])||i.int64Data[w]&&G.isInteger(i.int64Data[w].low)&&G.isInteger(i.int64Data[w].high)))return"int64Data: integer|Long[] expected"}if(i.name!=null&&i.hasOwnProperty("name")&&!G.isString(i.name))return"name: string expected";if(i.docString!=null&&i.hasOwnProperty("docString")&&!G.isString(i.docString))return"docString: string expected";if(i.rawData!=null&&i.hasOwnProperty("rawData")&&!(i.rawData&&typeof i.rawData.length=="number"||G.isString(i.rawData)))return"rawData: buffer expected";if(i.externalData!=null&&i.hasOwnProperty("externalData")){if(!Array.isArray(i.externalData))return"externalData: array expected";for(w=0;w<i.externalData.length;++w){var ae;if(ae=B.onnx.StringStringEntryProto.verify(i.externalData[w]))return"externalData."+ae}}if(i.dataLocation!=null&&i.hasOwnProperty("dataLocation"))switch(i.dataLocation){default:return"dataLocation: enum value expected";case 0:case 1:}if(i.doubleData!=null&&i.hasOwnProperty("doubleData")){if(!Array.isArray(i.doubleData))return"doubleData: array expected";for(w=0;w<i.doubleData.length;++w)if(typeof i.doubleData[w]!="number")return"doubleData: number[] expected"}if(i.uint64Data!=null&&i.hasOwnProperty("uint64Data")){if(!Array.isArray(i.uint64Data))return"uint64Data: array expected";for(w=0;w<i.uint64Data.length;++w)if(!(G.isInteger(i.uint64Data[w])||i.uint64Data[w]&&G.isInteger(i.uint64Data[w].low)&&G.isInteger(i.uint64Data[w].high)))return"uint64Data: integer|Long[] expected"}return null},o.fromObject=function(i){if(i instanceof B.onnx.TensorProto)return i;var w=new B.onnx.TensorProto;if(i.dims){if(!Array.isArray(i.dims))throw TypeError(".onnx.TensorProto.dims: array expected");w.dims=[];for(var ae=0;ae<i.dims.length;++ae)G.Long?(w.dims[ae]=G.Long.fromValue(i.dims[ae])).unsigned=!1:typeof i.dims[ae]=="string"?w.dims[ae]=parseInt(i.dims[ae],10):typeof i.dims[ae]=="number"?w.dims[ae]=i.dims[ae]:typeof i.dims[ae]=="object"&&(w.dims[ae]=new G.LongBits(i.dims[ae].low>>>0,i.dims[ae].high>>>0).toNumber())}if(i.dataType!=null&&(w.dataType=0|i.dataType),i.segment!=null){if(typeof i.segment!="object")throw TypeError(".onnx.TensorProto.segment: object expected");w.segment=B.onnx.TensorProto.Segment.fromObject(i.segment)}if(i.floatData){if(!Array.isArray(i.floatData))throw TypeError(".onnx.TensorProto.floatData: array expected");for(w.floatData=[],ae=0;ae<i.floatData.length;++ae)w.floatData[ae]=Number(i.floatData[ae])}if(i.int32Data){if(!Array.isArray(i.int32Data))throw TypeError(".onnx.TensorProto.int32Data: array expected");for(w.int32Data=[],ae=0;ae<i.int32Data.length;++ae)w.int32Data[ae]=0|i.int32Data[ae]}if(i.stringData){if(!Array.isArray(i.stringData))throw TypeError(".onnx.TensorProto.stringData: array expected");for(w.stringData=[],ae=0;ae<i.stringData.length;++ae)typeof i.stringData[ae]=="string"?G.base64.decode(i.stringData[ae],w.stringData[ae]=G.newBuffer(G.base64.length(i.stringData[ae])),0):i.stringData[ae].length&&(w.stringData[ae]=i.stringData[ae])}if(i.int64Data){if(!Array.isArray(i.int64Data))throw TypeError(".onnx.TensorProto.int64Data: array expected");for(w.int64Data=[],ae=0;ae<i.int64Data.length;++ae)G.Long?(w.int64Data[ae]=G.Long.fromValue(i.int64Data[ae])).unsigned=!1:typeof i.int64Data[ae]=="string"?w.int64Data[ae]=parseInt(i.int64Data[ae],10):typeof i.int64Data[ae]=="number"?w.int64Data[ae]=i.int64Data[ae]:typeof i.int64Data[ae]=="object"&&(w.int64Data[ae]=new G.LongBits(i.int64Data[ae].low>>>0,i.int64Data[ae].high>>>0).toNumber())}if(i.name!=null&&(w.name=String(i.name)),i.docString!=null&&(w.docString=String(i.docString)),i.rawData!=null&&(typeof i.rawData=="string"?G.base64.decode(i.rawData,w.rawData=G.newBuffer(G.base64.length(i.rawData)),0):i.rawData.length&&(w.rawData=i.rawData)),i.externalData){if(!Array.isArray(i.externalData))throw TypeError(".onnx.TensorProto.externalData: array expected");for(w.externalData=[],ae=0;ae<i.externalData.length;++ae){if(typeof i.externalData[ae]!="object")throw TypeError(".onnx.TensorProto.externalData: object expected");w.externalData[ae]=B.onnx.StringStringEntryProto.fromObject(i.externalData[ae])}}switch(i.dataLocation){case"DEFAULT":case 0:w.dataLocation=0;break;case"EXTERNAL":case 1:w.dataLocation=1}if(i.doubleData){if(!Array.isArray(i.doubleData))throw TypeError(".onnx.TensorProto.doubleData: array expected");for(w.doubleData=[],ae=0;ae<i.doubleData.length;++ae)w.doubleData[ae]=Number(i.doubleData[ae])}if(i.uint64Data){if(!Array.isArray(i.uint64Data))throw TypeError(".onnx.TensorProto.uint64Data: array expected");for(w.uint64Data=[],ae=0;ae<i.uint64Data.length;++ae)G.Long?(w.uint64Data[ae]=G.Long.fromValue(i.uint64Data[ae])).unsigned=!0:typeof i.uint64Data[ae]=="string"?w.uint64Data[ae]=parseInt(i.uint64Data[ae],10):typeof i.uint64Data[ae]=="number"?w.uint64Data[ae]=i.uint64Data[ae]:typeof i.uint64Data[ae]=="object"&&(w.uint64Data[ae]=new G.LongBits(i.uint64Data[ae].low>>>0,i.uint64Data[ae].high>>>0).toNumber(!0))}return w},o.toObject=function(i,w){w||(w={});var ae={};if((w.arrays||w.defaults)&&(ae.dims=[],ae.floatData=[],ae.int32Data=[],ae.stringData=[],ae.int64Data=[],ae.doubleData=[],ae.uint64Data=[],ae.externalData=[]),w.defaults&&(ae.dataType=0,ae.segment=null,ae.name="",w.bytes===String?ae.rawData="":(ae.rawData=[],w.bytes!==Array&&(ae.rawData=G.newBuffer(ae.rawData))),ae.docString="",ae.dataLocation=w.enums===String?"DEFAULT":0),i.dims&&i.dims.length){ae.dims=[];for(var ue=0;ue<i.dims.length;++ue)typeof i.dims[ue]=="number"?ae.dims[ue]=w.longs===String?String(i.dims[ue]):i.dims[ue]:ae.dims[ue]=w.longs===String?G.Long.prototype.toString.call(i.dims[ue]):w.longs===Number?new G.LongBits(i.dims[ue].low>>>0,i.dims[ue].high>>>0).toNumber():i.dims[ue]}if(i.dataType!=null&&i.hasOwnProperty("dataType")&&(ae.dataType=i.dataType),i.segment!=null&&i.hasOwnProperty("segment")&&(ae.segment=B.onnx.TensorProto.Segment.toObject(i.segment,w)),i.floatData&&i.floatData.length)for(ae.floatData=[],ue=0;ue<i.floatData.length;++ue)ae.floatData[ue]=w.json&&!isFinite(i.floatData[ue])?String(i.floatData[ue]):i.floatData[ue];if(i.int32Data&&i.int32Data.length)for(ae.int32Data=[],ue=0;ue<i.int32Data.length;++ue)ae.int32Data[ue]=i.int32Data[ue];if(i.stringData&&i.stringData.length)for(ae.stringData=[],ue=0;ue<i.stringData.length;++ue)ae.stringData[ue]=w.bytes===String?G.base64.encode(i.stringData[ue],0,i.stringData[ue].length):w.bytes===Array?Array.prototype.slice.call(i.stringData[ue]):i.stringData[ue];if(i.int64Data&&i.int64Data.length)for(ae.int64Data=[],ue=0;ue<i.int64Data.length;++ue)typeof i.int64Data[ue]=="number"?ae.int64Data[ue]=w.longs===String?String(i.int64Data[ue]):i.int64Data[ue]:ae.int64Data[ue]=w.longs===String?G.Long.prototype.toString.call(i.int64Data[ue]):w.longs===Number?new G.LongBits(i.int64Data[ue].low>>>0,i.int64Data[ue].high>>>0).toNumber():i.int64Data[ue];if(i.name!=null&&i.hasOwnProperty("name")&&(ae.name=i.name),i.rawData!=null&&i.hasOwnProperty("rawData")&&(ae.rawData=w.bytes===String?G.base64.encode(i.rawData,0,i.rawData.length):w.bytes===Array?Array.prototype.slice.call(i.rawData):i.rawData),i.doubleData&&i.doubleData.length)for(ae.doubleData=[],ue=0;ue<i.doubleData.length;++ue)ae.doubleData[ue]=w.json&&!isFinite(i.doubleData[ue])?String(i.doubleData[ue]):i.doubleData[ue];if(i.uint64Data&&i.uint64Data.length)for(ae.uint64Data=[],ue=0;ue<i.uint64Data.length;++ue)typeof i.uint64Data[ue]=="number"?ae.uint64Data[ue]=w.longs===String?String(i.uint64Data[ue]):i.uint64Data[ue]:ae.uint64Data[ue]=w.longs===String?G.Long.prototype.toString.call(i.uint64Data[ue]):w.longs===Number?new G.LongBits(i.uint64Data[ue].low>>>0,i.uint64Data[ue].high>>>0).toNumber(!0):i.uint64Data[ue];if(i.docString!=null&&i.hasOwnProperty("docString")&&(ae.docString=i.docString),i.externalData&&i.externalData.length)for(ae.externalData=[],ue=0;ue<i.externalData.length;++ue)ae.externalData[ue]=B.onnx.StringStringEntryProto.toObject(i.externalData[ue],w);return i.dataLocation!=null&&i.hasOwnProperty("dataLocation")&&(ae.dataLocation=w.enums===String?B.onnx.TensorProto.DataLocation[i.dataLocation]:i.dataLocation),ae},o.prototype.toJSON=function(){return this.constructor.toObject(this,d.util.toJSONOptions)},o.DataType=(function(){var i={},w=Object.create(i);return w[i[0]="UNDEFINED"]=0,w[i[1]="FLOAT"]=1,w[i[2]="UINT8"]=2,w[i[3]="INT8"]=3,w[i[4]="UINT16"]=4,w[i[5]="INT16"]=5,w[i[6]="INT32"]=6,w[i[7]="INT64"]=7,w[i[8]="STRING"]=8,w[i[9]="BOOL"]=9,w[i[10]="FLOAT16"]=10,w[i[11]="DOUBLE"]=11,w[i[12]="UINT32"]=12,w[i[13]="UINT64"]=13,w[i[14]="COMPLEX64"]=14,w[i[15]="COMPLEX128"]=15,w[i[16]="BFLOAT16"]=16,w})(),o.Segment=(function(){function i(w){if(w)for(var ae=Object.keys(w),ue=0;ue<ae.length;++ue)w[ae[ue]]!=null&&(this[ae[ue]]=w[ae[ue]])}return i.prototype.begin=G.Long?G.Long.fromBits(0,0,!1):0,i.prototype.end=G.Long?G.Long.fromBits(0,0,!1):0,i.create=function(w){return new i(w)},i.encode=function(w,ae){return ae||(ae=le.create()),w.begin!=null&&w.hasOwnProperty("begin")&&ae.uint32(8).int64(w.begin),w.end!=null&&w.hasOwnProperty("end")&&ae.uint32(16).int64(w.end),ae},i.encodeDelimited=function(w,ae){return this.encode(w,ae).ldelim()},i.decode=function(w,ae){w instanceof A||(w=A.create(w));for(var ue=ae===void 0?w.len:w.pos+ae,he=new B.onnx.TensorProto.Segment;w.pos<ue;){var pe=w.uint32();switch(pe>>>3){case 1:he.begin=w.int64();break;case 2:he.end=w.int64();break;default:w.skipType(7&pe)}}return he},i.decodeDelimited=function(w){return w instanceof A||(w=new A(w)),this.decode(w,w.uint32())},i.verify=function(w){return typeof w!="object"||w===null?"object expected":w.begin!=null&&w.hasOwnProperty("begin")&&!(G.isInteger(w.begin)||w.begin&&G.isInteger(w.begin.low)&&G.isInteger(w.begin.high))?"begin: integer|Long expected":w.end!=null&&w.hasOwnProperty("end")&&!(G.isInteger(w.end)||w.end&&G.isInteger(w.end.low)&&G.isInteger(w.end.high))?"end: integer|Long expected":null},i.fromObject=function(w){if(w instanceof B.onnx.TensorProto.Segment)return w;var ae=new B.onnx.TensorProto.Segment;return w.begin!=null&&(G.Long?(ae.begin=G.Long.fromValue(w.begin)).unsigned=!1:typeof w.begin=="string"?ae.begin=parseInt(w.begin,10):typeof w.begin=="number"?ae.begin=w.begin:typeof w.begin=="object"&&(ae.begin=new G.LongBits(w.begin.low>>>0,w.begin.high>>>0).toNumber())),w.end!=null&&(G.Long?(ae.end=G.Long.fromValue(w.end)).unsigned=!1:typeof w.end=="string"?ae.end=parseInt(w.end,10):typeof w.end=="number"?ae.end=w.end:typeof w.end=="object"&&(ae.end=new G.LongBits(w.end.low>>>0,w.end.high>>>0).toNumber())),ae},i.toObject=function(w,ae){ae||(ae={});var ue={};if(ae.defaults){if(G.Long){var he=new G.Long(0,0,!1);ue.begin=ae.longs===String?he.toString():ae.longs===Number?he.toNumber():he}else ue.begin=ae.longs===String?"0":0;G.Long?(he=new G.Long(0,0,!1),ue.end=ae.longs===String?he.toString():ae.longs===Number?he.toNumber():he):ue.end=ae.longs===String?"0":0}return w.begin!=null&&w.hasOwnProperty("begin")&&(typeof w.begin=="number"?ue.begin=ae.longs===String?String(w.begin):w.begin:ue.begin=ae.longs===String?G.Long.prototype.toString.call(w.begin):ae.longs===Number?new G.LongBits(w.begin.low>>>0,w.begin.high>>>0).toNumber():w.begin),w.end!=null&&w.hasOwnProperty("end")&&(typeof w.end=="number"?ue.end=ae.longs===String?String(w.end):w.end:ue.end=ae.longs===String?G.Long.prototype.toString.call(w.end):ae.longs===Number?new G.LongBits(w.end.low>>>0,w.end.high>>>0).toNumber():w.end),ue},i.prototype.toJSON=function(){return this.constructor.toObject(this,d.util.toJSONOptions)},i})(),o.DataLocation=(function(){var i={},w=Object.create(i);return w[i[0]="DEFAULT"]=0,w[i[1]="EXTERNAL"]=1,w})(),o})(),T.TensorShapeProto=(function(){function o(i){if(this.dim=[],i)for(var w=Object.keys(i),ae=0;ae<w.length;++ae)i[w[ae]]!=null&&(this[w[ae]]=i[w[ae]])}return o.prototype.dim=G.emptyArray,o.create=function(i){return new o(i)},o.encode=function(i,w){if(w||(w=le.create()),i.dim!=null&&i.dim.length)for(var ae=0;ae<i.dim.length;++ae)B.onnx.TensorShapeProto.Dimension.encode(i.dim[ae],w.uint32(10).fork()).ldelim();return w},o.encodeDelimited=function(i,w){return this.encode(i,w).ldelim()},o.decode=function(i,w){i instanceof A||(i=A.create(i));for(var ae=w===void 0?i.len:i.pos+w,ue=new B.onnx.TensorShapeProto;i.pos<ae;){var he=i.uint32();he>>>3==1?(ue.dim&&ue.dim.length||(ue.dim=[]),ue.dim.push(B.onnx.TensorShapeProto.Dimension.decode(i,i.uint32()))):i.skipType(7&he)}return ue},o.decodeDelimited=function(i){return i instanceof A||(i=new A(i)),this.decode(i,i.uint32())},o.verify=function(i){if(typeof i!="object"||i===null)return"object expected";if(i.dim!=null&&i.hasOwnProperty("dim")){if(!Array.isArray(i.dim))return"dim: array expected";for(var w=0;w<i.dim.length;++w){var ae=B.onnx.TensorShapeProto.Dimension.verify(i.dim[w]);if(ae)return"dim."+ae}}return null},o.fromObject=function(i){if(i instanceof B.onnx.TensorShapeProto)return i;var w=new B.onnx.TensorShapeProto;if(i.dim){if(!Array.isArray(i.dim))throw TypeError(".onnx.TensorShapeProto.dim: array expected");w.dim=[];for(var ae=0;ae<i.dim.length;++ae){if(typeof i.dim[ae]!="object")throw TypeError(".onnx.TensorShapeProto.dim: object expected");w.dim[ae]=B.onnx.TensorShapeProto.Dimension.fromObject(i.dim[ae])}}return w},o.toObject=function(i,w){w||(w={});var ae={};if((w.arrays||w.defaults)&&(ae.dim=[]),i.dim&&i.dim.length){ae.dim=[];for(var ue=0;ue<i.dim.length;++ue)ae.dim[ue]=B.onnx.TensorShapeProto.Dimension.toObject(i.dim[ue],w)}return ae},o.prototype.toJSON=function(){return this.constructor.toObject(this,d.util.toJSONOptions)},o.Dimension=(function(){function i(ae){if(ae)for(var ue=Object.keys(ae),he=0;he<ue.length;++he)ae[ue[he]]!=null&&(this[ue[he]]=ae[ue[he]])}var w;return i.prototype.dimValue=G.Long?G.Long.fromBits(0,0,!1):0,i.prototype.dimParam="",i.prototype.denotation="",Object.defineProperty(i.prototype,"value",{get:G.oneOfGetter(w=["dimValue","dimParam"]),set:G.oneOfSetter(w)}),i.create=function(ae){return new i(ae)},i.encode=function(ae,ue){return ue||(ue=le.create()),ae.dimValue!=null&&ae.hasOwnProperty("dimValue")&&ue.uint32(8).int64(ae.dimValue),ae.dimParam!=null&&ae.hasOwnProperty("dimParam")&&ue.uint32(18).string(ae.dimParam),ae.denotation!=null&&ae.hasOwnProperty("denotation")&&ue.uint32(26).string(ae.denotation),ue},i.encodeDelimited=function(ae,ue){return this.encode(ae,ue).ldelim()},i.decode=function(ae,ue){ae instanceof A||(ae=A.create(ae));for(var he=ue===void 0?ae.len:ae.pos+ue,pe=new B.onnx.TensorShapeProto.Dimension;ae.pos<he;){var ge=ae.uint32();switch(ge>>>3){case 1:pe.dimValue=ae.int64();break;case 2:pe.dimParam=ae.string();break;case 3:pe.denotation=ae.string();break;default:ae.skipType(7&ge)}}return pe},i.decodeDelimited=function(ae){return ae instanceof A||(ae=new A(ae)),this.decode(ae,ae.uint32())},i.verify=function(ae){if(typeof ae!="object"||ae===null)return"object expected";var ue={};if(ae.dimValue!=null&&ae.hasOwnProperty("dimValue")&&(ue.value=1,!(G.isInteger(ae.dimValue)||ae.dimValue&&G.isInteger(ae.dimValue.low)&&G.isInteger(ae.dimValue.high))))return"dimValue: integer|Long expected";if(ae.dimParam!=null&&ae.hasOwnProperty("dimParam")){if(ue.value===1)return"value: multiple values";if(ue.value=1,!G.isString(ae.dimParam))return"dimParam: string expected"}return ae.denotation!=null&&ae.hasOwnProperty("denotation")&&!G.isString(ae.denotation)?"denotation: string expected":null},i.fromObject=function(ae){if(ae instanceof B.onnx.TensorShapeProto.Dimension)return ae;var ue=new B.onnx.TensorShapeProto.Dimension;return ae.dimValue!=null&&(G.Long?(ue.dimValue=G.Long.fromValue(ae.dimValue)).unsigned=!1:typeof ae.dimValue=="string"?ue.dimValue=parseInt(ae.dimValue,10):typeof ae.dimValue=="number"?ue.dimValue=ae.dimValue:typeof ae.dimValue=="object"&&(ue.dimValue=new G.LongBits(ae.dimValue.low>>>0,ae.dimValue.high>>>0).toNumber())),ae.dimParam!=null&&(ue.dimParam=String(ae.dimParam)),ae.denotation!=null&&(ue.denotation=String(ae.denotation)),ue},i.toObject=function(ae,ue){ue||(ue={});var he={};return ue.defaults&&(he.denotation=""),ae.dimValue!=null&&ae.hasOwnProperty("dimValue")&&(typeof ae.dimValue=="number"?he.dimValue=ue.longs===String?String(ae.dimValue):ae.dimValue:he.dimValue=ue.longs===String?G.Long.prototype.toString.call(ae.dimValue):ue.longs===Number?new G.LongBits(ae.dimValue.low>>>0,ae.dimValue.high>>>0).toNumber():ae.dimValue,ue.oneofs&&(he.value="dimValue")),ae.dimParam!=null&&ae.hasOwnProperty("dimParam")&&(he.dimParam=ae.dimParam,ue.oneofs&&(he.value="dimParam")),ae.denotation!=null&&ae.hasOwnProperty("denotation")&&(he.denotation=ae.denotation),he},i.prototype.toJSON=function(){return this.constructor.toObject(this,d.util.toJSONOptions)},i})(),o})(),T.TypeProto=(function(){function o(w){if(w)for(var ae=Object.keys(w),ue=0;ue<ae.length;++ue)w[ae[ue]]!=null&&(this[ae[ue]]=w[ae[ue]])}var i;return o.prototype.tensorType=null,o.prototype.denotation="",Object.defineProperty(o.prototype,"value",{get:G.oneOfGetter(i=["tensorType"]),set:G.oneOfSetter(i)}),o.create=function(w){return new o(w)},o.encode=function(w,ae){return ae||(ae=le.create()),w.tensorType!=null&&w.hasOwnProperty("tensorType")&&B.onnx.TypeProto.Tensor.encode(w.tensorType,ae.uint32(10).fork()).ldelim(),w.denotation!=null&&w.hasOwnProperty("denotation")&&ae.uint32(50).string(w.denotation),ae},o.encodeDelimited=function(w,ae){return this.encode(w,ae).ldelim()},o.decode=function(w,ae){w instanceof A||(w=A.create(w));for(var ue=ae===void 0?w.len:w.pos+ae,he=new B.onnx.TypeProto;w.pos<ue;){var pe=w.uint32();switch(pe>>>3){case 1:he.tensorType=B.onnx.TypeProto.Tensor.decode(w,w.uint32());break;case 6:he.denotation=w.string();break;default:w.skipType(7&pe)}}return he},o.decodeDelimited=function(w){return w instanceof A||(w=new A(w)),this.decode(w,w.uint32())},o.verify=function(w){if(typeof w!="object"||w===null)return"object expected";if(w.tensorType!=null&&w.hasOwnProperty("tensorType")){var ae=B.onnx.TypeProto.Tensor.verify(w.tensorType);if(ae)return"tensorType."+ae}return w.denotation!=null&&w.hasOwnProperty("denotation")&&!G.isString(w.denotation)?"denotation: string expected":null},o.fromObject=function(w){if(w instanceof B.onnx.TypeProto)return w;var ae=new B.onnx.TypeProto;if(w.tensorType!=null){if(typeof w.tensorType!="object")throw TypeError(".onnx.TypeProto.tensorType: object expected");ae.tensorType=B.onnx.TypeProto.Tensor.fromObject(w.tensorType)}return w.denotation!=null&&(ae.denotation=String(w.denotation)),ae},o.toObject=function(w,ae){ae||(ae={});var ue={};return ae.defaults&&(ue.denotation=""),w.tensorType!=null&&w.hasOwnProperty("tensorType")&&(ue.tensorType=B.onnx.TypeProto.Tensor.toObject(w.tensorType,ae),ae.oneofs&&(ue.value="tensorType")),w.denotation!=null&&w.hasOwnProperty("denotation")&&(ue.denotation=w.denotation),ue},o.prototype.toJSON=function(){return this.constructor.toObject(this,d.util.toJSONOptions)},o.Tensor=(function(){function w(ae){if(ae)for(var ue=Object.keys(ae),he=0;he<ue.length;++he)ae[ue[he]]!=null&&(this[ue[he]]=ae[ue[he]])}return w.prototype.elemType=0,w.prototype.shape=null,w.create=function(ae){return new w(ae)},w.encode=function(ae,ue){return ue||(ue=le.create()),ae.elemType!=null&&ae.hasOwnProperty("elemType")&&ue.uint32(8).int32(ae.elemType),ae.shape!=null&&ae.hasOwnProperty("shape")&&B.onnx.TensorShapeProto.encode(ae.shape,ue.uint32(18).fork()).ldelim(),ue},w.encodeDelimited=function(ae,ue){return this.encode(ae,ue).ldelim()},w.decode=function(ae,ue){ae instanceof A||(ae=A.create(ae));for(var he=ue===void 0?ae.len:ae.pos+ue,pe=new B.onnx.TypeProto.Tensor;ae.pos<he;){var ge=ae.uint32();switch(ge>>>3){case 1:pe.elemType=ae.int32();break;case 2:pe.shape=B.onnx.TensorShapeProto.decode(ae,ae.uint32());break;default:ae.skipType(7&ge)}}return pe},w.decodeDelimited=function(ae){return ae instanceof A||(ae=new A(ae)),this.decode(ae,ae.uint32())},w.verify=function(ae){if(typeof ae!="object"||ae===null)return"object expected";if(ae.elemType!=null&&ae.hasOwnProperty("elemType")&&!G.isInteger(ae.elemType))return"elemType: integer expected";if(ae.shape!=null&&ae.hasOwnProperty("shape")){var ue=B.onnx.TensorShapeProto.verify(ae.shape);if(ue)return"shape."+ue}return null},w.fromObject=function(ae){if(ae instanceof B.onnx.TypeProto.Tensor)return ae;var ue=new B.onnx.TypeProto.Tensor;if(ae.elemType!=null&&(ue.elemType=0|ae.elemType),ae.shape!=null){if(typeof ae.shape!="object")throw TypeError(".onnx.TypeProto.Tensor.shape: object expected");ue.shape=B.onnx.TensorShapeProto.fromObject(ae.shape)}return ue},w.toObject=function(ae,ue){ue||(ue={});var he={};return ue.defaults&&(he.elemType=0,he.shape=null),ae.elemType!=null&&ae.hasOwnProperty("elemType")&&(he.elemType=ae.elemType),ae.shape!=null&&ae.hasOwnProperty("shape")&&(he.shape=B.onnx.TensorShapeProto.toObject(ae.shape,ue)),he},w.prototype.toJSON=function(){return this.constructor.toObject(this,d.util.toJSONOptions)},w})(),o})(),T.OperatorSetIdProto=(function(){function o(i){if(i)for(var w=Object.keys(i),ae=0;ae<w.length;++ae)i[w[ae]]!=null&&(this[w[ae]]=i[w[ae]])}return o.prototype.domain="",o.prototype.version=G.Long?G.Long.fromBits(0,0,!1):0,o.create=function(i){return new o(i)},o.encode=function(i,w){return w||(w=le.create()),i.domain!=null&&i.hasOwnProperty("domain")&&w.uint32(10).string(i.domain),i.version!=null&&i.hasOwnProperty("version")&&w.uint32(16).int64(i.version),w},o.encodeDelimited=function(i,w){return this.encode(i,w).ldelim()},o.decode=function(i,w){i instanceof A||(i=A.create(i));for(var ae=w===void 0?i.len:i.pos+w,ue=new B.onnx.OperatorSetIdProto;i.pos<ae;){var he=i.uint32();switch(he>>>3){case 1:ue.domain=i.string();break;case 2:ue.version=i.int64();break;default:i.skipType(7&he)}}return ue},o.decodeDelimited=function(i){return i instanceof A||(i=new A(i)),this.decode(i,i.uint32())},o.verify=function(i){return typeof i!="object"||i===null?"object expected":i.domain!=null&&i.hasOwnProperty("domain")&&!G.isString(i.domain)?"domain: string expected":i.version!=null&&i.hasOwnProperty("version")&&!(G.isInteger(i.version)||i.version&&G.isInteger(i.version.low)&&G.isInteger(i.version.high))?"version: integer|Long expected":null},o.fromObject=function(i){if(i instanceof B.onnx.OperatorSetIdProto)return i;var w=new B.onnx.OperatorSetIdProto;return i.domain!=null&&(w.domain=String(i.domain)),i.version!=null&&(G.Long?(w.version=G.Long.fromValue(i.version)).unsigned=!1:typeof i.version=="string"?w.version=parseInt(i.version,10):typeof i.version=="number"?w.version=i.version:typeof i.version=="object"&&(w.version=new G.LongBits(i.version.low>>>0,i.version.high>>>0).toNumber())),w},o.toObject=function(i,w){w||(w={});var ae={};if(w.defaults)if(ae.domain="",G.Long){var ue=new G.Long(0,0,!1);ae.version=w.longs===String?ue.toString():w.longs===Number?ue.toNumber():ue}else ae.version=w.longs===String?"0":0;return i.domain!=null&&i.hasOwnProperty("domain")&&(ae.domain=i.domain),i.version!=null&&i.hasOwnProperty("version")&&(typeof i.version=="number"?ae.version=w.longs===String?String(i.version):i.version:ae.version=w.longs===String?G.Long.prototype.toString.call(i.version):w.longs===Number?new G.LongBits(i.version.low>>>0,i.version.high>>>0).toNumber():i.version),ae},o.prototype.toJSON=function(){return this.constructor.toObject(this,d.util.toJSONOptions)},o})(),T),n.exports=B},2100:(n,e,t)=>{n.exports=t(9482)},9482:(n,e,t)=>{var r=e;function u(){r.util._configure(),r.Writer._configure(r.BufferWriter),r.Reader._configure(r.BufferReader)}r.build="minimal",r.Writer=t(1173),r.BufferWriter=t(3155),r.Reader=t(1408),r.BufferReader=t(593),r.util=t(9693),r.rpc=t(5994),r.roots=t(5054),r.configure=u,u()},1408:(n,e,t)=>{n.exports=le;var r,u=t(9693),T=u.LongBits,d=u.utf8;function A(ue,he){return RangeError("index out of range: "+ue.pos+" + "+(he||1)+" > "+ue.len)}function le(ue){this.buf=ue,this.pos=0,this.len=ue.length}var G,B=typeof Uint8Array<"u"?function(ue){if(ue instanceof Uint8Array||Array.isArray(ue))return new le(ue);throw Error("illegal buffer")}:function(ue){if(Array.isArray(ue))return new le(ue);throw Error("illegal buffer")},o=function(){return u.Buffer?function(ue){return(le.create=function(he){return u.Buffer.isBuffer(he)?new r(he):B(he)})(ue)}:B};function i(){var ue=new T(0,0),he=0;if(!(this.len-this.pos>4)){for(;he<3;++he){if(this.pos>=this.len)throw A(this);if(ue.lo=(ue.lo|(127&this.buf[this.pos])<<7*he)>>>0,this.buf[this.pos++]<128)return ue}return ue.lo=(ue.lo|(127&this.buf[this.pos++])<<7*he)>>>0,ue}for(;he<4;++he)if(ue.lo=(ue.lo|(127&this.buf[this.pos])<<7*he)>>>0,this.buf[this.pos++]<128)return ue;if(ue.lo=(ue.lo|(127&this.buf[this.pos])<<28)>>>0,ue.hi=(ue.hi|(127&this.buf[this.pos])>>4)>>>0,this.buf[this.pos++]<128)return ue;if(he=0,this.len-this.pos>4){for(;he<5;++he)if(ue.hi=(ue.hi|(127&this.buf[this.pos])<<7*he+3)>>>0,this.buf[this.pos++]<128)return ue}else for(;he<5;++he){if(this.pos>=this.len)throw A(this);if(ue.hi=(ue.hi|(127&this.buf[this.pos])<<7*he+3)>>>0,this.buf[this.pos++]<128)return ue}throw Error("invalid varint encoding")}function w(ue,he){return(ue[he-4]|ue[he-3]<<8|ue[he-2]<<16|ue[he-1]<<24)>>>0}function ae(){if(this.pos+8>this.len)throw A(this,8);return new T(w(this.buf,this.pos+=4),w(this.buf,this.pos+=4))}le.create=o(),le.prototype._slice=u.Array.prototype.subarray||u.Array.prototype.slice,le.prototype.uint32=(G=4294967295,function(){if(G=(127&this.buf[this.pos])>>>0,this.buf[this.pos++]<128||(G=(G|(127&this.buf[this.pos])<<7)>>>0,this.buf[this.pos++]<128)||(G=(G|(127&this.buf[this.pos])<<14)>>>0,this.buf[this.pos++]<128)||(G=(G|(127&this.buf[this.pos])<<21)>>>0,this.buf[this.pos++]<128)||(G=(G|(15&this.buf[this.pos])<<28)>>>0,this.buf[this.pos++]<128))return G;if((this.pos+=5)>this.len)throw this.pos=this.len,A(this,10);return G}),le.prototype.int32=function(){return 0|this.uint32()},le.prototype.sint32=function(){var ue=this.uint32();return ue>>>1^-(1&ue)|0},le.prototype.bool=function(){return this.uint32()!==0},le.prototype.fixed32=function(){if(this.pos+4>this.len)throw A(this,4);return w(this.buf,this.pos+=4)},le.prototype.sfixed32=function(){if(this.pos+4>this.len)throw A(this,4);return 0|w(this.buf,this.pos+=4)},le.prototype.float=function(){if(this.pos+4>this.len)throw A(this,4);var ue=u.float.readFloatLE(this.buf,this.pos);return this.pos+=4,ue},le.prototype.double=function(){if(this.pos+8>this.len)throw A(this,4);var ue=u.float.readDoubleLE(this.buf,this.pos);return this.pos+=8,ue},le.prototype.bytes=function(){var ue=this.uint32(),he=this.pos,pe=this.pos+ue;if(pe>this.len)throw A(this,ue);return this.pos+=ue,Array.isArray(this.buf)?this.buf.slice(he,pe):he===pe?new this.buf.constructor(0):this._slice.call(this.buf,he,pe)},le.prototype.string=function(){var ue=this.bytes();return d.read(ue,0,ue.length)},le.prototype.skip=function(ue){if(typeof ue=="number"){if(this.pos+ue>this.len)throw A(this,ue);this.pos+=ue}else do if(this.pos>=this.len)throw A(this);while(128&this.buf[this.pos++]);return this},le.prototype.skipType=function(ue){switch(ue){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;(ue=7&this.uint32())!=4;)this.skipType(ue);break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+ue+" at offset "+this.pos)}return this},le._configure=function(ue){r=ue,le.create=o(),r._configure();var he=u.Long?"toLong":"toNumber";u.merge(le.prototype,{int64:function(){return i.call(this)[he](!1)},uint64:function(){return i.call(this)[he](!0)},sint64:function(){return i.call(this).zzDecode()[he](!1)},fixed64:function(){return ae.call(this)[he](!0)},sfixed64:function(){return ae.call(this)[he](!1)}})}},593:(n,e,t)=>{n.exports=T;var r=t(1408);(T.prototype=Object.create(r.prototype)).constructor=T;var u=t(9693);function T(d){r.call(this,d)}T._configure=function(){u.Buffer&&(T.prototype._slice=u.Buffer.prototype.slice)},T.prototype.string=function(){var d=this.uint32();return this.buf.utf8Slice?this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+d,this.len)):this.buf.toString("utf-8",this.pos,this.pos=Math.min(this.pos+d,this.len))},T._configure()},5054:n=>{n.exports={}},5994:(n,e,t)=>{e.Service=t(7948)},7948:(n,e,t)=>{n.exports=u;var r=t(9693);function u(T,d,A){if(typeof T!="function")throw TypeError("rpcImpl must be a function");r.EventEmitter.call(this),this.rpcImpl=T,this.requestDelimited=!!d,this.responseDelimited=!!A}(u.prototype=Object.create(r.EventEmitter.prototype)).constructor=u,u.prototype.rpcCall=function T(d,A,le,G,B){if(!G)throw TypeError("request must be specified");var o=this;if(!B)return r.asPromise(T,o,d,A,le,G);if(o.rpcImpl)try{return o.rpcImpl(d,A[o.requestDelimited?"encodeDelimited":"encode"](G).finish(),(function(i,w){if(i)return o.emit("error",i,d),B(i);if(w!==null){if(!(w instanceof le))try{w=le[o.responseDelimited?"decodeDelimited":"decode"](w)}catch(ae){return o.emit("error",ae,d),B(ae)}return o.emit("data",w,d),B(null,w)}o.end(!0)}))}catch(i){return o.emit("error",i,d),void setTimeout((function(){B(i)}),0)}else setTimeout((function(){B(Error("already ended"))}),0)},u.prototype.end=function(T){return this.rpcImpl&&(T||this.rpcImpl(null,null,null),this.rpcImpl=null,this.emit("end").off()),this}},1945:(n,e,t)=>{n.exports=u;var r=t(9693);function u(le,G){this.lo=le>>>0,this.hi=G>>>0}var T=u.zero=new u(0,0);T.toNumber=function(){return 0},T.zzEncode=T.zzDecode=function(){return this},T.length=function(){return 1};var d=u.zeroHash="\0\0\0\0\0\0\0\0";u.fromNumber=function(le){if(le===0)return T;var G=le<0;G&&(le=-le);var B=le>>>0,o=(le-B)/4294967296>>>0;return G&&(o=~o>>>0,B=~B>>>0,++B>4294967295&&(B=0,++o>4294967295&&(o=0))),new u(B,o)},u.from=function(le){if(typeof le=="number")return u.fromNumber(le);if(r.isString(le)){if(!r.Long)return u.fromNumber(parseInt(le,10));le=r.Long.fromString(le)}return le.low||le.high?new u(le.low>>>0,le.high>>>0):T},u.prototype.toNumber=function(le){if(!le&&this.hi>>>31){var G=1+~this.lo>>>0,B=~this.hi>>>0;return G||(B=B+1>>>0),-(G+4294967296*B)}return this.lo+4294967296*this.hi},u.prototype.toLong=function(le){return r.Long?new r.Long(0|this.lo,0|this.hi,!!le):{low:0|this.lo,high:0|this.hi,unsigned:!!le}};var A=String.prototype.charCodeAt;u.fromHash=function(le){return le===d?T:new u((A.call(le,0)|A.call(le,1)<<8|A.call(le,2)<<16|A.call(le,3)<<24)>>>0,(A.call(le,4)|A.call(le,5)<<8|A.call(le,6)<<16|A.call(le,7)<<24)>>>0)},u.prototype.toHash=function(){return String.fromCharCode(255&this.lo,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,255&this.hi,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)},u.prototype.zzEncode=function(){var le=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^le)>>>0,this.lo=(this.lo<<1^le)>>>0,this},u.prototype.zzDecode=function(){var le=-(1&this.lo);return this.lo=((this.lo>>>1|this.hi<<31)^le)>>>0,this.hi=(this.hi>>>1^le)>>>0,this},u.prototype.length=function(){var le=this.lo,G=(this.lo>>>28|this.hi<<4)>>>0,B=this.hi>>>24;return B===0?G===0?le<16384?le<128?1:2:le<2097152?3:4:G<16384?G<128?5:6:G<2097152?7:8:B<128?9:10}},9693:function(n,e,t){var r=e;function u(d,A,le){for(var G=Object.keys(A),B=0;B<G.length;++B)d[G[B]]!==void 0&&le||(d[G[B]]=A[G[B]]);return d}function T(d){function A(le,G){if(!(this instanceof A))return new A(le,G);Object.defineProperty(this,"message",{get:function(){return le}}),Error.captureStackTrace?Error.captureStackTrace(this,A):Object.defineProperty(this,"stack",{value:new Error().stack||""}),G&&u(this,G)}return(A.prototype=Object.create(Error.prototype)).constructor=A,Object.defineProperty(A.prototype,"name",{get:function(){return d}}),A.prototype.toString=function(){return this.name+": "+this.message},A}r.asPromise=t(4537),r.base64=t(7419),r.EventEmitter=t(9211),r.float=t(945),r.inquire=t(7199),r.utf8=t(4997),r.pool=t(6662),r.LongBits=t(1945),r.isNode=!!(t.g!==void 0&&t.g&&t.g.process&&t.g.process.versions&&t.g.process.versions.node),r.global=r.isNode&&t.g||typeof window<"u"&&window||typeof self<"u"&&self||this,r.emptyArray=Object.freeze?Object.freeze([]):[],r.emptyObject=Object.freeze?Object.freeze({}):{},r.isInteger=Number.isInteger||function(d){return typeof d=="number"&&isFinite(d)&&Math.floor(d)===d},r.isString=function(d){return typeof d=="string"||d instanceof String},r.isObject=function(d){return d&&typeof d=="object"},r.isset=r.isSet=function(d,A){var le=d[A];return!(le==null||!d.hasOwnProperty(A))&&(typeof le!="object"||(Array.isArray(le)?le.length:Object.keys(le).length)>0)},r.Buffer=(function(){try{var d=r.inquire("buffer").Buffer;return d.prototype.utf8Write?d:null}catch{return null}})(),r._Buffer_from=null,r._Buffer_allocUnsafe=null,r.newBuffer=function(d){return typeof d=="number"?r.Buffer?r._Buffer_allocUnsafe(d):new r.Array(d):r.Buffer?r._Buffer_from(d):typeof Uint8Array>"u"?d:new Uint8Array(d)},r.Array=typeof Uint8Array<"u"?Uint8Array:Array,r.Long=r.global.dcodeIO&&r.global.dcodeIO.Long||r.global.Long||r.inquire("long"),r.key2Re=/^true|false|0|1$/,r.key32Re=/^-?(?:0|[1-9][0-9]*)$/,r.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/,r.longToHash=function(d){return d?r.LongBits.from(d).toHash():r.LongBits.zeroHash},r.longFromHash=function(d,A){var le=r.LongBits.fromHash(d);return r.Long?r.Long.fromBits(le.lo,le.hi,A):le.toNumber(!!A)},r.merge=u,r.lcFirst=function(d){return d.charAt(0).toLowerCase()+d.substring(1)},r.newError=T,r.ProtocolError=T("ProtocolError"),r.oneOfGetter=function(d){for(var A={},le=0;le<d.length;++le)A[d[le]]=1;return function(){for(var G=Object.keys(this),B=G.length-1;B>-1;--B)if(A[G[B]]===1&&this[G[B]]!==void 0&&this[G[B]]!==null)return G[B]}},r.oneOfSetter=function(d){return function(A){for(var le=0;le<d.length;++le)d[le]!==A&&delete this[d[le]]}},r.toJSONOptions={longs:String,enums:String,bytes:String,json:!0},r._configure=function(){var d=r.Buffer;d?(r._Buffer_from=d.from!==Uint8Array.from&&d.from||function(A,le){return new d(A,le)},r._Buffer_allocUnsafe=d.allocUnsafe||function(A){return new d(A)}):r._Buffer_from=r._Buffer_allocUnsafe=null}},1173:(n,e,t)=>{n.exports=o;var r,u=t(9693),T=u.LongBits,d=u.base64,A=u.utf8;function le(ge,be,ve){this.fn=ge,this.len=be,this.next=void 0,this.val=ve}function G(){}function B(ge){this.head=ge.head,this.tail=ge.tail,this.len=ge.len,this.next=ge.states}function o(){this.len=0,this.head=new le(G,0,0),this.tail=this.head,this.states=null}var i=function(){return u.Buffer?function(){return(o.create=function(){return new r})()}:function(){return new o}};function w(ge,be,ve){be[ve]=255&ge}function ae(ge,be){this.len=ge,this.next=void 0,this.val=be}function ue(ge,be,ve){for(;ge.hi;)be[ve++]=127&ge.lo|128,ge.lo=(ge.lo>>>7|ge.hi<<25)>>>0,ge.hi>>>=7;for(;ge.lo>127;)be[ve++]=127&ge.lo|128,ge.lo=ge.lo>>>7;be[ve++]=ge.lo}function he(ge,be,ve){be[ve]=255&ge,be[ve+1]=ge>>>8&255,be[ve+2]=ge>>>16&255,be[ve+3]=ge>>>24}o.create=i(),o.alloc=function(ge){return new u.Array(ge)},u.Array!==Array&&(o.alloc=u.pool(o.alloc,u.Array.prototype.subarray)),o.prototype._push=function(ge,be,ve){return this.tail=this.tail.next=new le(ge,be,ve),this.len+=be,this},ae.prototype=Object.create(le.prototype),ae.prototype.fn=function(ge,be,ve){for(;ge>127;)be[ve++]=127&ge|128,ge>>>=7;be[ve]=ge},o.prototype.uint32=function(ge){return this.len+=(this.tail=this.tail.next=new ae((ge>>>=0)<128?1:ge<16384?2:ge<2097152?3:ge<268435456?4:5,ge)).len,this},o.prototype.int32=function(ge){return ge<0?this._push(ue,10,T.fromNumber(ge)):this.uint32(ge)},o.prototype.sint32=function(ge){return this.uint32((ge<<1^ge>>31)>>>0)},o.prototype.uint64=function(ge){var be=T.from(ge);return this._push(ue,be.length(),be)},o.prototype.int64=o.prototype.uint64,o.prototype.sint64=function(ge){var be=T.from(ge).zzEncode();return this._push(ue,be.length(),be)},o.prototype.bool=function(ge){return this._push(w,1,ge?1:0)},o.prototype.fixed32=function(ge){return this._push(he,4,ge>>>0)},o.prototype.sfixed32=o.prototype.fixed32,o.prototype.fixed64=function(ge){var be=T.from(ge);return this._push(he,4,be.lo)._push(he,4,be.hi)},o.prototype.sfixed64=o.prototype.fixed64,o.prototype.float=function(ge){return this._push(u.float.writeFloatLE,4,ge)},o.prototype.double=function(ge){return this._push(u.float.writeDoubleLE,8,ge)};var pe=u.Array.prototype.set?function(ge,be,ve){be.set(ge,ve)}:function(ge,be,ve){for(var we=0;we<ge.length;++we)be[ve+we]=ge[we]};o.prototype.bytes=function(ge){var be=ge.length>>>0;if(!be)return this._push(w,1,0);if(u.isString(ge)){var ve=o.alloc(be=d.length(ge));d.decode(ge,ve,0),ge=ve}return this.uint32(be)._push(pe,be,ge)},o.prototype.string=function(ge){var be=A.length(ge);return be?this.uint32(be)._push(A.write,be,ge):this._push(w,1,0)},o.prototype.fork=function(){return this.states=new B(this),this.head=this.tail=new le(G,0,0),this.len=0,this},o.prototype.reset=function(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new le(G,0,0),this.len=0),this},o.prototype.ldelim=function(){var ge=this.head,be=this.tail,ve=this.len;return this.reset().uint32(ve),ve&&(this.tail.next=ge.next,this.tail=be,this.len+=ve),this},o.prototype.finish=function(){for(var ge=this.head.next,be=this.constructor.alloc(this.len),ve=0;ge;)ge.fn(ge.val,be,ve),ve+=ge.len,ge=ge.next;return be},o._configure=function(ge){r=ge,o.create=i(),r._configure()}},3155:(n,e,t)=>{n.exports=T;var r=t(1173);(T.prototype=Object.create(r.prototype)).constructor=T;var u=t(9693);function T(){r.call(this)}function d(A,le,G){A.length<40?u.utf8.write(A,le,G):le.utf8Write?le.utf8Write(A,G):le.write(A,G)}T._configure=function(){T.alloc=u._Buffer_allocUnsafe,T.writeBytesBuffer=u.Buffer&&u.Buffer.prototype instanceof Uint8Array&&u.Buffer.prototype.set.name==="set"?function(A,le,G){le.set(A,G)}:function(A,le,G){if(A.copy)A.copy(le,G,0,A.length);else for(var B=0;B<A.length;)le[G++]=A[B++]}},T.prototype.bytes=function(A){u.isString(A)&&(A=u._Buffer_from(A,"base64"));var le=A.length>>>0;return this.uint32(le),le&&this._push(T.writeBytesBuffer,le,A),this},T.prototype.string=function(A){var le=u.Buffer.byteLength(A);return this.uint32(le),le&&this._push(d,le,A),this},T._configure()},7714:(n,e,t)=>{e.R=void 0;const r=t(6919),u=t(7448);e.R=new class{async init(){}async createSessionHandler(T,d){const A=new r.Session(d);return await A.loadModel(T),new u.OnnxjsSessionHandler(A)}}},4200:(n,e,t)=>{e.c8=e.rX=void 0;const r=t(1670),u=t(5381),T=t(2157),d=t(2306);e.rX=()=>{if((typeof r.env.wasm.initTimeout!="number"||r.env.wasm.initTimeout<0)&&(r.env.wasm.initTimeout=0),typeof r.env.wasm.simd!="boolean"&&(r.env.wasm.simd=!0),typeof r.env.wasm.proxy!="boolean"&&(r.env.wasm.proxy=!1),typeof r.env.wasm.numThreads!="number"||!Number.isInteger(r.env.wasm.numThreads)||r.env.wasm.numThreads<=0){const A=typeof navigator>"u"?(0,u.cpus)().length:navigator.hardwareConcurrency;r.env.wasm.numThreads=Math.min(4,Math.ceil((A||1)/2))}},e.c8=new class{async init(){(0,e.rX)(),await(0,T.initWasm)()}async createSessionHandler(A,le){const G=new d.OnnxruntimeWebAssemblySessionHandler;return await G.loadModel(A,le),Promise.resolve(G)}}},6018:function(n,e,t){var r=this&&this.__createBinding||(Object.create?function(d,A,le,G){G===void 0&&(G=le);var B=Object.getOwnPropertyDescriptor(A,le);B&&!("get"in B?!A.__esModule:B.writable||B.configurable)||(B={enumerable:!0,get:function(){return A[le]}}),Object.defineProperty(d,G,B)}:function(d,A,le,G){G===void 0&&(G=le),d[G]=A[le]}),u=this&&this.__exportStar||function(d,A){for(var le in d)le==="default"||Object.prototype.hasOwnProperty.call(A,le)||r(A,d,le)};Object.defineProperty(e,"__esModule",{value:!0}),u(t(1670),e);const T=t(1670);{const d=t(7714).R;(0,T.registerBackend)("webgl",d,-10)}{const d=t(4200).c8;(0,T.registerBackend)("cpu",d,10),(0,T.registerBackend)("wasm",d,10),(0,T.registerBackend)("xnnpack",d,9)}},246:(n,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.createAttributeWithCacheKey=void 0;class t{constructor(u){Object.assign(this,u)}get cacheKey(){return this._cacheKey||(this._cacheKey=Object.getOwnPropertyNames(this).sort().map((u=>`${this[u]}`)).join(";")),this._cacheKey}}e.createAttributeWithCacheKey=r=>new t(r)},7778:(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Attribute=void 0;const r=t(1446),u=t(9395),T=t(9162),d=t(2517);var A=u.onnxruntime.experimental.fbs;class le{constructor(B){if(this._attributes=new Map,B!=null){for(const o of B)o instanceof r.onnx.AttributeProto?this._attributes.set(o.name,[le.getValue(o),le.getType(o)]):o instanceof A.Attribute&&this._attributes.set(o.name(),[le.getValue(o),le.getType(o)]);if(this._attributes.size<B.length)throw new Error("duplicated attribute names")}}set(B,o,i){this._attributes.set(B,[i,o])}delete(B){this._attributes.delete(B)}getFloat(B,o){return this.get(B,"float",o)}getInt(B,o){return this.get(B,"int",o)}getString(B,o){return this.get(B,"string",o)}getTensor(B,o){return this.get(B,"tensor",o)}getFloats(B,o){return this.get(B,"floats",o)}getInts(B,o){return this.get(B,"ints",o)}getStrings(B,o){return this.get(B,"strings",o)}getTensors(B,o){return this.get(B,"tensors",o)}get(B,o,i){const w=this._attributes.get(B);if(w===void 0){if(i!==void 0)return i;throw new Error(`required attribute not found: ${B}`)}if(w[1]!==o)throw new Error(`type mismatch: expected ${o} but got ${w[1]}`);return w[0]}static getType(B){const o=B instanceof r.onnx.AttributeProto?B.type:B.type();switch(o){case r.onnx.AttributeProto.AttributeType.FLOAT:return"float";case r.onnx.AttributeProto.AttributeType.INT:return"int";case r.onnx.AttributeProto.AttributeType.STRING:return"string";case r.onnx.AttributeProto.AttributeType.TENSOR:return"tensor";case r.onnx.AttributeProto.AttributeType.FLOATS:return"floats";case r.onnx.AttributeProto.AttributeType.INTS:return"ints";case r.onnx.AttributeProto.AttributeType.STRINGS:return"strings";case r.onnx.AttributeProto.AttributeType.TENSORS:return"tensors";default:throw new Error(`attribute type is not supported yet: ${r.onnx.AttributeProto.AttributeType[o]}`)}}static getValue(B){const o=B instanceof r.onnx.AttributeProto?B.type:B.type();if(o===r.onnx.AttributeProto.AttributeType.GRAPH||o===r.onnx.AttributeProto.AttributeType.GRAPHS)throw new Error("graph attribute is not supported yet");const i=this.getValueNoCheck(B);if(o===r.onnx.AttributeProto.AttributeType.INT&&d.LongUtil.isLong(i))return d.LongUtil.longToNumber(i);if(o===r.onnx.AttributeProto.AttributeType.INTS){const w=i,ae=new Array(w.length);for(let ue=0;ue<w.length;ue++){const he=w[ue];ae[ue]=d.LongUtil.longToNumber(he)}return ae}if(o===r.onnx.AttributeProto.AttributeType.TENSOR)return B instanceof r.onnx.AttributeProto?T.Tensor.fromProto(i):T.Tensor.fromOrtTensor(i);if(o===r.onnx.AttributeProto.AttributeType.TENSORS){if(B instanceof r.onnx.AttributeProto)return i.map((w=>T.Tensor.fromProto(w)));if(B instanceof A.Attribute)return i.map((w=>T.Tensor.fromOrtTensor(w)))}if(o===r.onnx.AttributeProto.AttributeType.STRING&&B instanceof r.onnx.AttributeProto){const w=i;return(0,d.decodeUtf8String)(w)}return o===r.onnx.AttributeProto.AttributeType.STRINGS&&B instanceof r.onnx.AttributeProto?i.map(d.decodeUtf8String):i}static getValueNoCheck(B){return B instanceof r.onnx.AttributeProto?this.getValueNoCheckFromOnnxFormat(B):this.getValueNoCheckFromOrtFormat(B)}static getValueNoCheckFromOnnxFormat(B){switch(B.type){case r.onnx.AttributeProto.AttributeType.FLOAT:return B.f;case r.onnx.AttributeProto.AttributeType.INT:return B.i;case r.onnx.AttributeProto.AttributeType.STRING:return B.s;case r.onnx.AttributeProto.AttributeType.TENSOR:return B.t;case r.onnx.AttributeProto.AttributeType.GRAPH:return B.g;case r.onnx.AttributeProto.AttributeType.FLOATS:return B.floats;case r.onnx.AttributeProto.AttributeType.INTS:return B.ints;case r.onnx.AttributeProto.AttributeType.STRINGS:return B.strings;case r.onnx.AttributeProto.AttributeType.TENSORS:return B.tensors;case r.onnx.AttributeProto.AttributeType.GRAPHS:return B.graphs;default:throw new Error(`unsupported attribute type: ${r.onnx.AttributeProto.AttributeType[B.type]}`)}}static getValueNoCheckFromOrtFormat(B){switch(B.type()){case A.AttributeType.FLOAT:return B.f();case A.AttributeType.INT:return B.i();case A.AttributeType.STRING:return B.s();case A.AttributeType.TENSOR:return B.t();case A.AttributeType.GRAPH:return B.g();case A.AttributeType.FLOATS:return B.floatsArray();case A.AttributeType.INTS:{const o=[];for(let i=0;i<B.intsLength();i++)o.push(B.ints(i));return o}case A.AttributeType.STRINGS:{const o=[];for(let i=0;i<B.stringsLength();i++)o.push(B.strings(i));return o}case A.AttributeType.TENSORS:{const o=[];for(let i=0;i<B.tensorsLength();i++)o.push(B.tensors(i));return o}default:throw new Error(`unsupported attribute type: ${A.AttributeType[B.type()]}`)}}}e.Attribute=le},7091:(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.resolveBackend=e.backend=void 0;const r=t(5038),u=new Map;async function T(d){const A=e.backend;if(A[d]!==void 0&&(function(le){const G=le;return"initialize"in G&&typeof G.initialize=="function"&&"createSessionHandler"in G&&typeof G.createSessionHandler=="function"&&"dispose"in G&&typeof G.dispose=="function"})(A[d])){const le=A[d];let G=le.initialize();if(typeof G=="object"&&"then"in G&&(G=await G),G)return u.set(d,le),le}}e.backend={webgl:new r.WebGLBackend},e.resolveBackend=async function d(A){if(!A)return d(["webgl"]);{const le=typeof A=="string"?[A]:A;for(const G of le){const B=u.get(G);if(B)return B;const o=await T(G);if(o)return o}}throw new Error("no available backend to use")}},5038:(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.WebGLBackend=void 0;const r=t(1670),u=t(6231),T=t(6416),d=t(7305);e.WebGLBackend=class{get contextId(){return r.env.webgl.contextId}set contextId(A){r.env.webgl.contextId=A}get matmulMaxBatchSize(){return r.env.webgl.matmulMaxBatchSize}set matmulMaxBatchSize(A){r.env.webgl.matmulMaxBatchSize=A}get textureCacheMode(){return r.env.webgl.textureCacheMode}set textureCacheMode(A){r.env.webgl.textureCacheMode=A}get pack(){return r.env.webgl.pack}set pack(A){r.env.webgl.pack=A}get async(){return r.env.webgl.async}set async(A){r.env.webgl.async=A}initialize(){try{return this.glContext=(0,d.createWebGLContext)(this.contextId),typeof this.matmulMaxBatchSize!="number"&&(this.matmulMaxBatchSize=16),typeof this.textureCacheMode!="string"&&(this.textureCacheMode="full"),typeof this.pack!="boolean"&&(this.pack=!1),typeof this.async!="boolean"&&(this.async=!1),u.Logger.setWithEnv(r.env),u.Logger.verbose("WebGLBackend",`Created WebGLContext: ${typeof this.glContext} with matmulMaxBatchSize: ${this.matmulMaxBatchSize}; textureCacheMode: ${this.textureCacheMode}; pack: ${this.pack}; async: ${this.async}.`),!0}catch(A){return u.Logger.warning("WebGLBackend",`Unable to initialize WebGLBackend. ${A}`),!1}}createSessionHandler(A){return new T.WebGLSessionHandler(this,A)}dispose(){this.glContext.dispose()}}},5107:(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.CoordsGlslLib=void 0;const r=t(2517),u=t(8520),T=t(5060),d=t(7859),A=t(9390);class le extends u.GlslLib{constructor(B){super(B)}getFunctions(){return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},this.offsetToCoords()),this.coordsToOffset()),this.toVec()),this.valueFrom()),this.getCommonUtilFuncs()),this.getInputsSamplingSnippets()),this.getOutputSamplingSnippet())}getCustomTypes(){return{}}offsetToCoords(){return{offsetToCoords:new u.GlslLibRoutine(`
      vec2 offsetToCoords(int offset, int width, int height) {
        int t = offset / width;
        int s = offset - t*width;
        vec2 coords = (vec2(s,t) + vec2(0.5,0.5)) / vec2(width, height);
        return coords;
      }
      `)}}coordsToOffset(){return{coordsToOffset:new u.GlslLibRoutine(`
      int coordsToOffset(vec2 coords, int width, int height) {
        float s = coords.s * float(width);
        float t = coords.t * float(height);
        int offset = int(t) * width + int(s);
        return offset;
      }
      `)}}getOutputSamplingSnippet(){const B=this.context.outputTextureLayout;return B.isPacked?this.getPackedOutputSamplingSnippet(B):this.getUnpackedOutputSamplingSnippet(B)}getPackedOutputSamplingSnippet(B){const o=B.unpackedShape,i=[B.width,B.height],w={},ae="getOutputCoords";switch(o.length){case 0:w[ae]=this.getOutputScalarCoords();break;case 1:w[ae]=this.getOutputPacked1DCoords(o,i);break;case 2:w[ae]=this.getOutputPacked2DCoords(o,i);break;case 3:w[ae]=this.getOutputPacked3DCoords(o,i);break;default:w[ae]=this.getOutputPackedNDCoords(o,i)}const ue=`
      void setOutput(vec4 val) {
        ${(0,T.getGlsl)(this.context.glContext.version).output} = val;
      }
    `;return w.floatTextureSetRGBA=new u.GlslLibRoutine(ue),w}getUnpackedOutputSamplingSnippet(B){const o=B.unpackedShape,i=[B.width,B.height],w={},ae="getOutputCoords";switch(o.length){case 0:w[ae]=this.getOutputScalarCoords();break;case 1:w[ae]=this.getOutputUnpacked1DCoords(o,i);break;case 2:w[ae]=this.getOutputUnpacked2DCoords(o,i);break;case 3:w[ae]=this.getOutputUnpacked3DCoords(o,i);break;case 4:w[ae]=this.getOutputUnpacked4DCoords(o,i);break;case 5:w[ae]=this.getOutputUnpacked5DCoords(o,i);break;case 6:w[ae]=this.getOutputUnpacked6DCoords(o,i);break;default:throw new Error(`Unsupported output dimensionality: ${o.length}`)}const ue=`
        void setOutput(float val) {
          ${(0,T.getGlsl)(this.context.glContext.version).output} = vec4(val, 0, 0, 0);
        }
    `;return w.floatTextureSetR=new u.GlslLibRoutine(ue),w}getOutputScalarCoords(){return new u.GlslLibRoutine(`
      int getOutputCoords() {
        return 0;
      }
    `)}getOutputPacked1DCoords(B,o){const i=o;let w="";return i[0]===1?(w=`
          int getOutputCoords() {
            return 2 * int(TexCoords.y * ${i[1]}.0);
          }
        `,new u.GlslLibRoutine(w)):i[1]===1?(w=`
          int getOutputCoords() {
            return 2 * int(TexCoords.x * ${i[0]}.0);
          }
        `,new u.GlslLibRoutine(w)):(w=`
        int getOutputCoords() {
          ivec2 resTexRC = ivec2(TexCoords.xy *
                                 vec2(${i[0]}, ${i[1]}));
          return 2 * (resTexRC.y * ${i[0]} + resTexRC.x);
        }
      `,new u.GlslLibRoutine(w))}getOutputPacked2DCoords(B,o){let i="";if(r.ArrayUtil.arraysEqual(B,o))return i=`
        ivec2 getOutputCoords() {
          return 2 * ivec2(TexCoords.xy * vec2(${o[0]}, ${o[1]}));
        }
      `,new u.GlslLibRoutine(i);const w=o,ae=Math.ceil(B[1]/2);return i=`
        ivec2 getOutputCoords() {
          ivec2 resTexRC = ivec2(TexCoords.xy *
                                vec2(${w[0]}, ${w[1]}));

          int index = resTexRC.y * ${w[0]} + resTexRC.x;

          // reverse r and c order for packed texture
          int r = imod(index, ${ae}) * 2;
          int c = 2 * (index / ${ae});

          return ivec2(r, c);
        }
      `,new u.GlslLibRoutine(i)}getOutputPacked3DCoords(B,o){const i=[o[0],o[1]],w=Math.ceil(B[2]/2),ae=w*Math.ceil(B[1]/2),ue=`
        ivec3 getOutputCoords() {
          ivec2 resTexRC = ivec2(TexCoords.xy *
                                vec2(${i[0]}, ${i[1]}));
          int index = resTexRC.y * ${i[0]} + resTexRC.x;

          int b = index / ${ae};
          index -= b * ${ae};

          // reverse r and c order for packed texture
          int r = imod(index, ${w}) * 2;
          int c = 2 * (index / ${w});

          return ivec3(b, r, c);
        }
      `;return new u.GlslLibRoutine(ue)}getOutputPackedNDCoords(B,o){const i=[o[0],o[1]],w=Math.ceil(B[B.length-1]/2),ae=w*Math.ceil(B[B.length-2]/2);let ue=ae,he="",pe="b, r, c";for(let be=2;be<B.length-1;be++)ue*=B[B.length-be-1],he=`
      int b${be} = index / ${ue};
      index -= b${be} * ${ue};
    `+he,pe=`b${be}, `+pe;const ge=`
      ivec${B.length} getOutputCoords() {
        ivec2 resTexRC = ivec2(TexCoords.xy *
                              vec2(${i[0]}, ${i[1]}));
        int index = resTexRC.y * ${i[0]} + resTexRC.x;

        ${he}

        int b = index / ${ae};
        index -= b * ${ae};

        // reverse r and c order for packed texture
        int r = imod(index, ${w}) * 2;
        int c = 2 * (index / ${w});

        return ivec${B.length}(${pe});
      }
    `;return new u.GlslLibRoutine(ge)}getOutputUnpacked1DCoords(B,o){const i=`
        int getOutputCoords() {
          ivec2 resTexRC = ivec2(TexCoords.xy *
                                vec2(${o[0]}, ${o[1]}));
          return resTexRC.y * ${o[0]} + resTexRC.x;
        }
      `;return new u.GlslLibRoutine(i)}getOutputUnpacked2DCoords(B,o){const i=`
        ivec2 getOutputCoords() {
          ivec2 resTexRC = ivec2(TexCoords.xy *
                                vec2(${o[0]}, ${o[1]}));
          int index = resTexRC.y * ${o[0]} + resTexRC.x;
          int r = index / ${B[1]};
          int c = index - r * ${B[1]};
          return ivec2(r, c);
        }
      `;return new u.GlslLibRoutine(i)}getOutputUnpacked3DCoords(B,o){let i="";const w=B.length;let ae=null;w<2&&(ae=[]),ae=new Array(w-1),ae[w-2]=B[w-1];for(let pe=w-3;pe>=0;--pe)ae[pe]=ae[pe+1]*B[pe+1];const ue=["r","c","d"],he=ae.map(((pe,ge)=>`int ${ue[ge]} = index / ${pe}; ${ge===ae.length-1?`int ${ue[ge+1]} = index - ${ue[ge]} * ${pe}`:`index -= ${ue[ge]} * ${pe}`};`)).join("");return i=`
        ivec3 getOutputCoords() {
          ivec2 resTexRC = ivec2(TexCoords.xy *
                                vec2(${o[0]}, ${o[1]}));
          int index = resTexRC.y * ${o[0]} + resTexRC.x;
          ${he}
          return ivec3(r, c, d);
        }
      `,new u.GlslLibRoutine(i)}getOutputUnpacked4DCoords(B,o){let i="";const w=B.length;let ae=null;w<2&&(ae=[]),ae=new Array(w-1),ae[w-2]=B[w-1];for(let pe=w-3;pe>=0;--pe)ae[pe]=ae[pe+1]*B[pe+1];const ue=["r","c","d","d2"],he=ae.map(((pe,ge)=>`int ${ue[ge]} = index / ${pe}; ${ge===ae.length-1?`int ${ue[ge+1]} = index - ${ue[ge]} * ${pe}`:`index -= ${ue[ge]} * ${pe}`};`)).join("");return i=`
      ivec4 getOutputCoords() {
          ivec2 resTexRC = ivec2(TexCoords.xy *
                                vec2(${o[0]}, ${o[1]}));
          int index = resTexRC.y * ${o[0]} + resTexRC.x;
          ${he}
          return ivec4(r, c, d, d2);
        }
      `,new u.GlslLibRoutine(i)}getOutputUnpacked5DCoords(B,o){let i="";const w=B.length;let ae=null;w<2&&(ae=[]),ae=new Array(w-1),ae[w-2]=B[w-1];for(let pe=w-3;pe>=0;--pe)ae[pe]=ae[pe+1]*B[pe+1];const ue=["r","c","d","d2","d3"],he=ae.map(((pe,ge)=>`int ${ue[ge]} = index / ${pe}; ${ge===ae.length-1?`int ${ue[ge+1]} = index - ${ue[ge]} * ${pe}`:`index -= ${ue[ge]} * ${pe}`};`)).join("");return i=`
      ivec5 getOutputCoords() {
          ivec2 resTexRC = ivec2(TexCoords.xy *
                                vec2(${o[0]}, ${o[1]}));
          int index = resTexRC.y * ${o[0]} + resTexRC.x;
          ${he}
          return ivec5(r, c, d, d2, d3);
        }
      `,new u.GlslLibRoutine(i)}getOutputUnpacked6DCoords(B,o){let i="";const w=B.length;let ae=null;w<2&&(ae=[]),ae=new Array(w-1),ae[w-2]=B[w-1];for(let pe=w-3;pe>=0;--pe)ae[pe]=ae[pe+1]*B[pe+1];const ue=["r","c","d","d2","d3","d4"],he=ae.map(((pe,ge)=>`int ${ue[ge]} = index / ${pe}; ${ge===ae.length-1?`int ${ue[ge+1]} = index - ${ue[ge]} * ${pe}`:`index -= ${ue[ge]} * ${pe}`};`)).join("");return i=`
     ivec6 getOutputCoords() {
         ivec2 resTexRC = ivec2(TexCoords.xy *
                               vec2(${o[0]}, ${o[1]}));
         int index = resTexRC.y * ${o[0]} + resTexRC.x;
         ${he}
         return ivec6(r, c, d, d2, d3, d4);
       }
     `,new u.GlslLibRoutine(i)}getCommonUtilFuncs(){const B={};let o="uvFromFlat";B[o]=new u.GlslLibRoutine(`
    vec2 uvFromFlat(int texNumR, int texNumC, int index) {
      int texC = index / texNumR;
      int texR = index - texC * texNumR;
      // TODO: swap texR, texC order in following function so row is corresponding to u and column is corresponding to
      //       v.
      return (vec2(texR, texC) + halfCR) / vec2(texNumR, texNumC);
    }
    `),o="packedUVfrom1D",B[o]=new u.GlslLibRoutine(`
      vec2 packedUVfrom1D(int texNumR, int texNumC, int index) {
        int texelIndex = index / 2;
        int texR = texelIndex / texNumC;
        int texC = texelIndex - texR * texNumC;
        return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
      }
      `),o="packedUVfrom2D",B[o]=new u.GlslLibRoutine(`
      vec2 packedUVfrom2D(int texNumR, int texNumC, int texelsInLogicalRow, int row, int col) {
        int texelIndex = (row / 2) * texelsInLogicalRow + (col / 2);
        int texR = texelIndex / texNumC;
        int texC = texelIndex - texR * texNumC;
        return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
      }
      `),o="packedUVfrom3D",B[o]=new u.GlslLibRoutine(`
      vec2 packedUVfrom3D(int texNumR, int texNumC,
          int texelsInBatch, int texelsInLogicalRow, int b,
          int row, int col) {
        int index = b * texelsInBatch + (row / 2) * texelsInLogicalRow + (col / 2);
        int texR = index / texNumC;
        int texC = index - texR * texNumC;
        return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
      }
      `),o="sampleTexture";const i=(0,T.getGlsl)(this.context.glContext.version);return B[o]=new u.GlslLibRoutine(`
        float sampleTexture(sampler2D textureSampler, vec2 uv) {
            return ${i.texture2D}(textureSampler, uv).r;
        }`),B}getInputsSamplingSnippets(){const B={},o=this.context.outputTextureLayout;return this.context.programInfo.inputNames.forEach(((i,w)=>{const ae=this.context.inputTextureLayouts[w],ue=(0,A.generateShaderFuncNameFromInputSamplerName)(i);ae.isPacked?B[ue]=this.getPackedSamplerFromInput(ue,i,ae):B[ue]=this.getUnpackedSamplerFromInput(ue,i,ae);const he=(0,A.generateShaderFuncNameFromInputSamplerNameAtOutCoords)(i);ae.unpackedShape.length<=o.unpackedShape.length&&(ae.isPacked?B[he]=this.getPackedSamplerAtOutputCoords(he,ae,o,i):B[he]=this.getUnpackedSamplerAtOutputCoords(he,ae,o,i))})),B}getPackedSamplerAtOutputCoords(B,o,i,w){const ae=o.unpackedShape,ue=i.unpackedShape,he=w,pe=(0,A.generateShaderFuncNameFromInputSamplerName)(he),ge=ae.length,be=ue.length,ve=r.BroadcastUtil.getBroadcastDims(ae,ue),we=(0,A.getCoordsDataType)(be),Se=be-ge;let Ae;const Re=(0,A.getGlChannels)();Ae=ge===0?"":be<2&&ve.length>=1?"coords = 0;":ve.map((De=>`coords.${Re[De+Se]} = 0;`)).join(`
`);let Te="";Te=be<2&&ge>0?"coords":ae.map(((De,Xe)=>`coords.${Re[Xe+Se]}`)).join(", ");let Ce="return outputValue;";const Ve=r.ShapeUtil.size(ae)===1,$e=r.ShapeUtil.size(ue)===1;if(ge!==1||Ve||$e){if(Ve&&!$e)Ce=be===1?`
          return vec4(outputValue.x, outputValue.x, 0., 0.);
        `:`
          return vec4(outputValue.x);
        `;else if(ve.length){const De=ge-2,Xe=ge-1;ve.indexOf(De)>-1&&ve.indexOf(Xe)>-1?Ce="return vec4(outputValue.x);":ve.indexOf(De)>-1?Ce="return vec4(outputValue.x, outputValue.y, outputValue.x, outputValue.y);":ve.indexOf(Xe)>-1&&(Ce="return vec4(outputValue.xx, outputValue.zz);")}}else Ce=`
        return vec4(outputValue.xy, outputValue.xy);
      `;const He=`
      vec4 ${B}() {
        ${we} coords = getOutputCoords();
        
        int lastDim = coords.${Re[be-1]};
        coords.${Re[be-1]} = coords.${Re[be-2]};
        coords.${Re[be-2]} = lastDim;
      
        ${Ae}
        vec4 outputValue = ${pe}(${Te});
        ${Ce}
      }
    `;return new u.GlslLibRoutine(He,["coordinates.getOutputCoords"])}getUnpackedSamplerAtOutputCoords(B,o,i,w){const ae=[i.width,i.height],ue=[o.width,o.height],he=o.unpackedShape.length,pe=i.unpackedShape.length,ge=o.unpackedShape,be=i.unpackedShape,ve=(0,A.generateShaderFuncNameFromInputSamplerName)(w);if(he===pe&&r.ArrayUtil.arraysEqual(ue,ae)){const $e=`
          float ${B}() {
            return sampleTexture(${w}, TexCoords);
          }
        `;return new u.GlslLibRoutine($e,["coordinates.sampleTexture"])}const we=(0,A.getCoordsDataType)(pe),Se=r.BroadcastUtil.getBroadcastDims(ge,be),Ae=pe-he;let Re;const Te=(0,A.getGlChannels)();Re=he===0?"":pe<2&&Se.length>=1?"coords = 0;":Se.map(($e=>`coords.${Te[$e+Ae]} = 0;`)).join(`
`);let Ce="";Ce=pe<2&&he>0?"coords":o.unpackedShape.map((($e,He)=>`coords.${Te[He+Ae]}`)).join(", ");const Ve=`
        float ${B}() {
          ${we} coords = getOutputCoords();
          ${Re}
          return ${ve}(${Ce});
        }
      `;return new u.GlslLibRoutine(Ve,["coordinates.getOutputCoords"])}getPackedSamplerFromInput(B,o,i){switch(i.unpackedShape.length){case 0:return this.getPackedSamplerScalar(B,o);case 1:return this.getPackedSampler1D(B,o,i);case 2:return this.getPackedSampler2D(B,o,i);case 3:return this.getPackedSampler3D(B,o,i);default:return this.getPackedSamplerND(B,o,i)}}getUnpackedSamplerFromInput(B,o,i){const w=i.unpackedShape;switch(w.length){case 0:return this.getUnpackedSamplerScalar(B,o,i);case 1:return this.getUnpackedSampler1D(B,o,i);case 2:return this.getUnpackedSampler2D(B,o,i);case 3:return this.getUnpackedSampler3D(B,o,i);case 4:return this.getUnpackedSampler4D(B,o,i);case 5:return this.getUnpackedSampler5D(B,o,i);case 6:return this.getUnpackedSampler6D(B,o,i);default:throw new Error(`Unsupported dimension ${w.length}-D`)}}getPackedSamplerScalar(B,o){const i=`
          vec4 ${B}() {
            return ${(0,T.getGlsl)(this.context.glContext.version).texture2D}(${o}, halfCR);
          }
        `;return new u.GlslLibRoutine(i)}getPackedSampler1D(B,o,i){const w=[i.width,i.height],ae=[w[1],w[0]],ue=(0,T.getGlsl)(this.context.glContext.version),he=`vec4 ${B}(int index) {
      vec2 uv = packedUVfrom1D(
      ${ae[0]}, ${ae[1]}, index);
      return ${ue.texture2D}(${o}, uv);
    }`;return new u.GlslLibRoutine(he,["coordinates.packedUVfrom1D"])}getPackedSampler2D(B,o,i){const w=i.unpackedShape,ae=[i.width,i.height],ue=(0,T.getGlsl)(this.context.glContext.version),he=ae[0],pe=ae[1];if(ae!=null&&r.ArrayUtil.arraysEqual(w,ae)){const we=`vec4 ${B}(int row, int col) {
        vec2 uv = (vec2(col, row) + halfCR) / vec2(${pe}.0, ${he}.0);
        return ${ue.texture2D}(${o}, uv);
      }`;return new u.GlslLibRoutine(we)}const ge=ae,be=Math.ceil(w[1]/2),ve=`vec4 ${B}(int row, int col) {
      vec2 uv = packedUVfrom2D(${ge[1]}, ${ge[0]}, ${be}, row, col);
      return ${ue.texture2D}(${o}, uv);
    }`;return new u.GlslLibRoutine(ve,["coordinates.packedUVfrom2D"])}getPackedSampler3D(B,o,i){const w=i.unpackedShape,ae=[i.width,i.height],ue=[ae[0],ae[1]],he=(0,T.getGlsl)(this.context.glContext.version);if(w[0]===1){const we=w.slice(1),Se=[1,2],Ae=(0,A.squeezeInputShape)(w,we),Re=["b","row","col"],Te=JSON.parse(JSON.stringify(i));Te.unpackedShape=Ae;const Ce=this.getPackedSamplerFromInput(B,o,Te),Ve=`${Ce.routineBody}
      vec4 ${B}(int b, int row, int col) {
        return ${B}(${(0,A.getSqueezedParams)(Re,Se)});
      } `;return new u.GlslLibRoutine(Ve,Ce.dependencies)}const pe=ue[0],ge=ue[1],be=Math.ceil(w[2]/2),ve=`vec4 ${B}(int b, int row, int col) {
      vec2 uv = packedUVfrom3D(
        ${ge}, ${pe}, ${be*Math.ceil(w[1]/2)}, ${be}, b, row, col);
      return ${he.texture2D}(${o}, uv);}`;return new u.GlslLibRoutine(ve,["coordinates.packedUVfrom3D"])}getPackedSamplerND(B,o,i){const w=i.unpackedShape,ae=w.length,ue=[i.width,i.height],he=(0,T.getGlsl)(this.context.glContext.version),pe=[ue[0],ue[1]],ge=pe[1],be=pe[0],ve=Math.ceil(w[ae-1]/2);let we=ve*Math.ceil(w[ae-2]/2),Se="int b, int row, int col",Ae=`b * ${we} + (row / 2) * ${ve} + (col / 2)`;for(let Te=2;Te<ae-1;Te++)Se=`int b${Te}, `+Se,we*=w[ae-Te-1],Ae=`b${Te} * ${we} + `+Ae;const Re=`vec4 ${B}(${Se}) {
      int index = ${Ae};
      int texR = index / ${be};
      int texC = index - texR * ${be};
      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${be}, ${ge});
      return ${he.texture2D}(${o}, uv);
    }`;return new u.GlslLibRoutine(Re)}getUnpackedSamplerScalar(B,o,i){const[w,ae]=[i.width,i.height];if(w===1&&ae===1){const he=`
          float ${B}() {
            return sampleTexture(${o}, halfCR);
          }
        `;return new u.GlslLibRoutine(he,["coordinates.sampleTexture"])}const ue=`
        float ${B}() {
          int offset_${o} = coordsToOffset(TexCoords, ${w}, ${ae});
          vec2 uv = uvFromFlat(${w}, ${ae}, offset_${o});
          return sampleTexture(${o}, uv);
        }
      `;return new u.GlslLibRoutine(ue,["coordinates.uvFromFlat","coordinates.sampleTexture","coordinates.coordsToOffset"])}getUnpackedSampler1D(B,o,i){const w=i.width,ae=i.height;if(ae===1&&w===1){const he=`
        float ${B}(int index) {
          return sampleTexture(${o}, halfCR);
        }
      `;return new u.GlslLibRoutine(he,["coordinates.sampleTexture"])}if(ae===1){const he=`
          float ${B}(int index) {
            vec2 uv = vec2((float(index) + 0.5) / ${w}.0, 0.5);
            return sampleTexture(${o}, uv);
          }
        `;return new u.GlslLibRoutine(he,["coordinates.sampleTexture"])}if(w===1){const he=`
          float ${B}(int index) {
            vec2 uv = vec2(0.5, (float(index) + 0.5) / ${ae}.0);
            return sampleTexture(${o}, uv);
          }
        `;return new u.GlslLibRoutine(he,["coordinates.sampleTexture"])}const ue=`
        float ${B}(int index) {
          vec2 uv = uvFromFlat(${w}, ${ae}, index);
          return sampleTexture(${o}, uv);
        }
      `;return new u.GlslLibRoutine(ue,["coordinates.uvFromFlat","coordinates.sampleTexture"])}getUnpackedSampler2D(B,o,i){const w=i.unpackedShape,ae=[i.height,i.width];if(ae!=null&&r.ArrayUtil.arraysEqual(w,ae)){const we=`
          float ${B}(int row, int col) {
            vec2 uv = (vec2(row, col) + halfCR) / vec2(${ae[1]}.0, ${ae[0]}.0);
            return sampleTexture(${o}, uv);
          }
        `;return new u.GlslLibRoutine(we,["coordinates.sampleTexture"])}const{newShape:ue,keptDims:he}=(0,d.squeezeShape)(w),pe=ue;if(pe.length<w.length){const we=(0,A.squeezeInputShape)(w,pe),Se=JSON.parse(JSON.stringify(i));Se.unpackedShape=we;const Ae=["col","row"],Re=`
          ${this.getUnpackedSamplerFromInput(B,o,Se).routineBody}
          float ${B}(int row, int col) {
            return ${B}(${(0,A.getSqueezedParams)(Ae,he)});
          }
        `;return new u.GlslLibRoutine(Re,["coordinates.sampleTexture"])}const ge=ae[1],be=ae[0];if(be===1){const we=`
          float ${B}(int row, int col) {
            int offset_${o} = coordsToOffset(TexCoords, ${ge}, ${be});
            float index = dot(vec3(row, col, offset_${o}), vec3(${w[1]}, 1, 1));
            vec2 uv = vec2(0.5, (index + 0.5) / ${ge}.0);
            return sampleTexture(${o}, uv);
          }
        `;return new u.GlslLibRoutine(we,["coordinates.sampleTexture","coordinates.coordsToOffset"])}if(ge===1){const we=`
          float ${B}(int row, int col) {
            int offset_${o} = coordsToOffset(TexCoords, ${ge}, ${be});
            float index = dot(vec3(row, col, offset_${o}), vec3(${w[1]}, 1, 1));
            vec2 uv = vec2((index + 0.5) / ${be}.0, 0.5);
            return sampleTexture(${o}, uv);
          }
        `;return new u.GlslLibRoutine(we,["coordinates.sampleTexture","coordinates.coordsToOffset"])}const ve=`
        float ${B}(int row, int col) {
          int index = col * ${w[1]} + row;
          vec2 uv = uvFromFlat(${ge}, ${be}, index);
          return sampleTexture(${o}, uv);
        }
      `;return new u.GlslLibRoutine(ve,["coordinates.uvFromFlat","coordinates.sampleTexture","coordinates.coordsToOffset"])}getUnpackedSampler3D(B,o,i){const w=i.unpackedShape,ae=w[1]*w[2],ue=w[2],{newShape:he,keptDims:pe}=(0,d.squeezeShape)(w),ge=he;if(ge.length<w.length){const ve=(0,A.squeezeInputShape)(w,ge),we=["batch","col","row"],Se=JSON.parse(JSON.stringify(i));Se.unpackedShape=ve;const Ae=this.getUnpackedSamplerFromInput(B,o,Se),Re=pe.reverse(),Te=`
          ${Ae.routineBody}
          float ${B}(int batch, int row, int col) {
            return ${B}(${(0,A.getSqueezedParams)(we,Re)});
          }
        `;return new u.GlslLibRoutine(Te,Ae.dependencies)}const be=`
          float ${B}(int depth, int row, int col) {
            // Explicitly use integer operations as dot() only works on floats.
            int index = depth * ${ae} + col * ${ue} + row;
            vec2 uv = uvFromFlat(${i.width}, ${i.height}, index);
            return sampleTexture(${o}, uv);
          }
      `;return new u.GlslLibRoutine(be,["coordinates.uvFromFlat","coordinates.sampleTexture","coordinates.coordsToOffset"])}getUnpackedSampler4D(B,o,i){const w=i.unpackedShape,ae=w[3],ue=w[2]*ae,he=`
        float ${B}(int row, int col, int depth, int depth2) {
          int index = row * ${w[1]*ue} + col * ${ue} +
              depth2 * ${ae} + depth;
          vec2 uv = uvFromFlat(${i.width}, ${i.height}, index);
          return sampleTexture(${o}, uv);
        }
      `;return new u.GlslLibRoutine(he,["coordinates.uvFromFlat","coordinates.sampleTexture"])}getUnpackedSampler5D(B,o,i){const w=i.unpackedShape,ae=w[4],ue=w[3]*ae,he=w[2]*ue,pe=w[1]*he,{newShape:ge,keptDims:be}=(0,d.squeezeShape)(w);if(ge.length<w.length){const we=(0,A.squeezeInputShape)(w,ge),Se=["row","col","depth","depth2","depth3"],Ae=JSON.parse(JSON.stringify(i));Ae.unpackedShape=we;const Re=`
          ${this.getUnpackedSamplerFromInput(B,o,Ae).routineBody}
          float ${B}(int row, int col, int depth, int depth2, int depth3) {
            return ${B}(${(0,A.getSqueezedParams)(Se,be)});
          }
        `;return new u.GlslLibRoutine(Re,["coordinates.sampleTexture","coordinates.uvFromFlat"])}const ve=`
        float ${B}(int row, int col, int depth, int depth2, int depth3) {
          int index = row * ${pe} + col * ${he} + depth * ${ue} +
          depth3 * ${ae} + depth2;
          vec2 uv = uvFromFlat(${i.width}, ${i.height}, index);
          return sampleTexture(${o}, uv);
        }
      `;return new u.GlslLibRoutine(ve,["coordinates.sampleTexture","coordinates.uvFromFlat"])}getUnpackedSampler6D(B,o,i){const w=i.unpackedShape,ae=w[5],ue=w[4]*ae,he=w[3]*ue,pe=w[2]*he,ge=w[1]*pe,{newShape:be,keptDims:ve}=(0,d.squeezeShape)(w);if(be.length<w.length){const Se=(0,A.squeezeInputShape)(w,be),Ae=["row","col","depth","depth2","depth3","depth4"],Re=JSON.parse(JSON.stringify(i));Re.unpackedShape=Se;const Te=`
            ${this.getUnpackedSamplerFromInput(B,o,Re).routineBody}
            float ${B}(int row, int col, int depth,
              int depth2, int depth3, int depth4) {
              return ${B}(${(0,A.getSqueezedParams)(Ae,ve)});
            }
          `;return new u.GlslLibRoutine(Te,["coordinates.sampleTexture","coordinates.uvFromFlat"])}const we=`
          float ${B}(int row, int col, int depth,
            int depth2, int depth3, int depth4) {
            int index = row * ${ge} + col * ${pe} + depth * ${he} +
            depth2 * ${ue} + depth3 * ${ae} + depth4;
            vec2 uv = uvFromFlat(${i.width}, ${i.height}, index);
            return sampleTexture(${o}, uv);
          }
        `;return new u.GlslLibRoutine(we,["coordinates.uvFromFlat","coordinates.sampleTexture","coordinates.coordsToOffset"])}toVec(){const B=this.context.outputTextureLayout,o=B.shape.length,i=B.strides,w=B.width,ae=B.height,ue=[];for(let pe=0;pe<o-1;++pe)ue.push(`
        c[${pe}] = offset / ${i[pe]};`),ue.push(`
        offset -= c[${pe}] * ${i[pe]};`);ue.push(`
        c[${o-1}] = offset;`);const he=`
      void toVec(vec2 texCoords, out int c[${o}]) {
        int offset = coordsToOffset(texCoords, ${w}, ${ae});
        ${ue.join("")}
      }
      void toVec(int offset, out int c[${o}]) {
        ${ue.join("")}
      }
    `;return{toVec:new u.GlslLibRoutine(he,["coordinates.coordsToOffset"])}}valueFrom(){const B={};return this.context.programInfo.inputNames.forEach(((o,i)=>{const w=this.context.inputTextureLayouts[i],ae=(w.unpackedShape.length>0?w.unpackedShape:w.shape).length;let ue=`_${o}`;B[ue]=new u.GlslLibRoutine(this.getValueFromSingle(o,ae,w.width,w.height,!1),[`shapeUtils.indicesToOffset${ue}`,"coordinates.offsetToCoords","fragcolor.getColorAsFloat"]),ue+="_T",B[ue]=new u.GlslLibRoutine(this.getValueFromSingle(o,ae,w.width,w.height,!0),[`shapeUtils.indicesToOffset${ue}`,"coordinates.offsetToCoords","fragcolor.getColorAsFloat"])})),B}getValueFromSingle(B,o,i,w,ae){let ue=`_${B}`;return ae&&(ue+="_T"),`
        float ${ue}(int m[${o}]) {
          int offset = indicesToOffset${ue}(m);
          vec2 coords = offsetToCoords(offset, ${i}, ${w});
          float value = getColorAsFloat(${(0,T.getGlsl)(this.context.glContext.version).texture2D}(${B}, coords));
          return value;
        }
        `}getPackedValueFrom(B,o,i,w,ae){let ue=`_${B}_Pack`;return ae&&(ue+="_T"),`
        vec4 ${ue}(int m[${o}]) {
          int offset = indicesToOffset_${B}(m);
          vec2 coords = offsetToCoords(offset, ${i}, ${w});
          return ${(0,T.getGlsl)(this.context.glContext.version).texture2D}(${B}, coords);
        }
        `}}e.CoordsGlslLib=le},8520:(n,e)=>{var t;Object.defineProperty(e,"__esModule",{value:!0}),e.TopologicalSortGlslRoutines=e.GlslLibRoutineNode=e.GlslLibRoutine=e.GlslLib=e.GlslContext=e.FunctionType=void 0,(t=e.FunctionType||(e.FunctionType={}))[t.ValueBased=0]="ValueBased",t[t.Positional=1]="Positional",e.GlslContext=class{constructor(r,u,T,d){this.glContext=r,this.programInfo=u,this.inputTextureLayouts=T,this.outputTextureLayout=d}},e.GlslLib=class{constructor(r){this.context=r}},e.GlslLibRoutine=class{constructor(r,u){this.routineBody=r,this.dependencies=u}},e.GlslLibRoutineNode=class{constructor(r,u,T){this.name=r,this.dependencies=T||[],u&&(this.routineBody=u)}addDependency(r){r&&this.dependencies.push(r)}},e.TopologicalSortGlslRoutines=class{static returnOrderedNodes(r){if(!r||r.length===0)return[];if(r.length===1)return r;const u=new Set,T=new Set,d=new Array;return this.createOrderedNodes(r,u,T,d),d}static createOrderedNodes(r,u,T,d){for(let A=0;A<r.length;++A)this.dfsTraverse(r[A],u,T,d)}static dfsTraverse(r,u,T,d){if(!r||T.has(r.name))return;if(u.has(r.name))throw new Error("Cyclic dependency detected. Can't topologically sort routines needed for shader.");u.add(r.name);const A=r.dependencies;if(A&&A.length>0)for(let le=0;le<A.length;++le)this.dfsTraverse(A[le],u,T,d);d.push(r),T.add(r.name),u.delete(r.name)}}},7341:(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.EncodingGlslLib=void 0;const r=t(8520);class u extends r.GlslLib{constructor(d){super(d)}getFunctions(){return Object.assign(Object.assign({},this.encodeFloat32()),this.decodeFloat32())}getCustomTypes(){return{}}encodeFloat32(){return{encode:new r.GlslLibRoutine(`highp vec4 encode(highp float f) {
        return vec4(f, 0.0, 0.0, 0.0);
      }
        `)}}decodeFloat32(){return{decode:new r.GlslLibRoutine(`highp float decode(highp vec4 rgba) {
        return rgba.r;
      }
        `)}}encodeUint8(){const d=u.isLittleEndian()?"rgba.rgba=rgba.abgr;":"";return{encode:new r.GlslLibRoutine(`
      highp vec4 encode(highp float f) {
        highp float F = abs(f);
        highp float Sign = step(0.0,-f);
        highp float Exponent = floor(log2(F));
        highp float Mantissa = (exp2(- Exponent) * F);
        Exponent = floor(log2(F) + 127.0) + floor(log2(Mantissa));
        highp vec4 rgba;
        rgba[0] = 128.0 * Sign  + floor(Exponent*exp2(-1.0));
        rgba[1] = 128.0 * mod(Exponent,2.0) + mod(floor(Mantissa*128.0),128.0);
        rgba[2] = floor(mod(floor(Mantissa*exp2(23.0 -8.0)),exp2(8.0)));
        rgba[3] = floor(exp2(23.0)*mod(Mantissa,exp2(-15.0)));
        ${d}
        rgba = rgba / 255.0; // values need to be normalized to [0,1]
        return rgba;
    }
        `)}}decodeUint8(){const d=u.isLittleEndian()?"rgba.rgba=rgba.abgr;":"";return{decode:new r.GlslLibRoutine(`
        highp float decode(highp vec4 rgba) {
          rgba = rgba * 255.0; // values need to be de-normalized from [0,1] to [0,255]
          ${d}
          highp float Sign = 1.0 - step(128.0,rgba[0])*2.0;
          highp float Exponent = 2.0 * mod(rgba[0],128.0) + step(128.0,rgba[1]) - 127.0;
          highp float Mantissa = mod(rgba[1],128.0)*65536.0 + rgba[2]*256.0 +rgba[3] + float(0x800000);
          highp float Result =  Sign * exp2(Exponent) * (Mantissa * exp2(-23.0 ));
          return Result;
      }
        `)}}static isLittleEndian(){const d=new ArrayBuffer(4),A=new Uint32Array(d),le=new Uint8Array(d);if(A[0]=3735928559,le[0]===239)return!0;if(le[0]===222)return!1;throw new Error("unknown endianness")}}e.EncodingGlslLib=u},9894:(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.FragColorGlslLib=void 0;const r=t(8520),u=t(5060);class T extends r.GlslLib{constructor(A){super(A)}getFunctions(){return Object.assign(Object.assign({},this.setFragColor()),this.getColorAsFloat())}getCustomTypes(){return{}}setFragColor(){const A=(0,u.getGlsl)(this.context.glContext.version);return{setFragColor:new r.GlslLibRoutine(`
        void setFragColor(float value) {
            ${A.output} = encode(value);
        }
        `,["encoding.encode"])}}getColorAsFloat(){return{getColorAsFloat:new r.GlslLibRoutine(`
        float getColorAsFloat(vec4 color) {
            return decode(color);
        }
        `,["encoding.decode"])}}}e.FragColorGlslLib=T},2848:(n,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.replaceInlines=void 0;const t=/@inline[\s\n\r]+(\w+)[\s\n\r]+([0-9a-zA-Z_]+)\s*\(([^)]*)\)\s*{(([^}]|[\n\r])*)}/gm;e.replaceInlines=function(r){const u={};let T;for(;(T=t.exec(r))!==null;){const d=T[3].split(",").map((A=>{const le=A.trim().split(" ");return le&&le.length===2?{type:le[0],name:le[1]}:null})).filter((A=>A!==null));u[T[2]]={params:d,body:T[4]}}for(const d in u){const A="(\\w+)?\\s+([_0-9a-zA-Z]+)\\s+=\\s+__FUNC__\\((.*)\\)\\s*;".replace("__FUNC__",d),le=new RegExp(A,"gm");for(;(T=le.exec(r))!==null;){const G=T[1],B=T[2],o=T[3].split(","),i=G?`${G} ${B};`:"";let w=u[d].body,ae="";u[d].params.forEach(((he,pe)=>{he&&(ae+=`${he.type} ${he.name} = ${o[pe]};
`)})),w=`${ae}
 ${w}`,w=w.replace("return",`${B} = `);const ue=`
      ${i}
      {
        ${w}
      }
      `;r=r.replace(T[0],ue)}}return r.replace(t,"")}},8879:(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.GlslPreprocessor=void 0;const r=t(8520),u=t(2848),T=t(5483),d=t(5060);e.GlslPreprocessor=class{constructor(A,le,G,B){this.libs={},this.glslLibRoutineDependencyGraph={},this.context=new r.GlslContext(A,le,G,B),Object.keys(T.glslRegistry).forEach((i=>{const w=new T.glslRegistry[i](this.context);this.libs[i]=w}));const o=this.glslLibRoutineDependencyGraph;for(const i in this.libs){const w=this.libs[i].getFunctions();for(const ae in w){const ue=i+"."+ae;let he;o[ue]?(he=o[ue],he.routineBody=w[ae].routineBody):(he=new r.GlslLibRoutineNode(ue,w[ae].routineBody),o[ue]=he);const pe=w[ae].dependencies;if(pe)for(let ge=0;ge<pe.length;++ge)if(o[pe[ge]])he.addDependency(o[pe[ge]]);else{const be=new r.GlslLibRoutineNode(pe[ge]);o[pe[ge]]=be,he.addDependency(be)}}}}preprocess(){const A=this.context.programInfo;let le=A.shaderSource;return this.context.programInfo.hasMain||(le=`${le}
      ${(0,d.getDefaultFragShaderMain)(this.context.glContext.version,this.context.outputTextureLayout.shape.length)}`),le=(0,u.replaceInlines)(le),`${(0,d.getFragShaderPreamble)(this.context.glContext.version)}
    ${this.getUniforms(A.inputNames,A.variables)}
    ${this.getImports(le)}
    ${le}`}getImports(A){const le=this.selectGlslLibRoutinesToBeIncluded(A);if(le.length===0)return"";let G="";for(let B=0;B<le.length;++B){if(!le[B].routineBody)throw new Error(`Missing body for the Glsl Library routine: ${le[B].name}`);G+=le[B].routineBody+`
`}return G}selectGlslLibRoutinesToBeIncluded(A){const le=[];return Object.keys(this.glslLibRoutineDependencyGraph).forEach((G=>{const B=G.split(".")[1];A.indexOf(B)!==-1&&le.push(this.glslLibRoutineDependencyGraph[G])})),r.TopologicalSortGlslRoutines.returnOrderedNodes(le)}getUniforms(A,le){const G=[];if(A)for(const B of A)G.push(`uniform sampler2D ${B};`);if(le)for(const B of le)G.push(`uniform ${B.type} ${B.name}${B.arrayLength?`[${B.arrayLength}]`:""};`);return G.join(`
`)}}},5483:(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.glslRegistry=void 0;const r=t(5107),u=t(7341),T=t(9894),d=t(2655),A=t(3891);e.glslRegistry={encoding:u.EncodingGlslLib,fragcolor:T.FragColorGlslLib,vec:A.VecGlslLib,shapeUtils:d.ShapeUtilsGlslLib,coordinates:r.CoordsGlslLib}},2655:(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ShapeUtilsGlslLib=void 0;const r=t(8520);class u extends r.GlslLib{constructor(d){super(d)}getFunctions(){return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},this.bcastIndex()),this.bcastMatmulIndex()),this.offsetToIndices()),this.indicesToOffset()),this.incrementIndices())}getCustomTypes(){return{}}bcastIndex(){const d=this.context.outputTextureLayout.shape.length,A={};return this.context.programInfo.inputNames.forEach(((le,G)=>{const B=this.context.inputTextureLayouts[G].unpackedShape;if(B.length<=d){const o=B.length,i=d-o,w=`bcastIndices_${le}`;let ae="";for(let he=0;he<o;++he)ae+=`
          realIndices[${he}] = int( mod(float(bcastedIndices[${i+he}]), ${B[he]}.0) );
          `;const ue=`
        void ${w} (int bcastedIndices[${d}], out int realIndices[${o}]) {
          ${ae}
        }
        `;A[w]=new r.GlslLibRoutine(ue)}})),A}bcastMatmulIndex(){const d=this.context.outputTextureLayout.shape.length,A={};return this.context.programInfo.inputNames.forEach(((le,G)=>{const B=this.context.inputTextureLayouts[G].shape;if(!(B.length<2||B.length>d)){const o=B.length,i=d-o,w=`bcastMatmulIndices_${le}`;let ae="";for(let he=0;he<o-2;++he)ae+=`
          realIndices[${he}] = int( mod(float(bcastedIndices[${i+he}]), ${B[he]}.0) );
          `;const ue=`
        void ${w}(int bcastedIndices[${d}], out int realIndices[${o}]) {
          ${ae}
          realIndices[${o-1}] = bcastedIndices[${d-1}];
          realIndices[${o-2}] = bcastedIndices[${d-2}];
        }
        `;A[w]=new r.GlslLibRoutine(ue)}})),A}indicesToOffset(){const d={};return this.context.programInfo.inputNames.forEach(((A,le)=>{const G=this.context.inputTextureLayouts[le].shape,B=this.context.inputTextureLayouts[le].strides,o=G.length;let i=`indicesToOffset_${A}`;d[i]=new r.GlslLibRoutine(u.indexToOffsetSingle(i,o,B)),i=`indicesToOffset_${A}_T`,d[i]=new r.GlslLibRoutine(u.indexToOffsetSingle(i,o,B.slice().reverse()))})),d}static indexToOffsetSingle(d,A,le){let G="";for(let B=A-1;B>=0;--B)G+=`
        offset += indices[${B}] * ${le[B]};
        `;return`
      int ${d}(int indices[${A}]) {
        int offset = 0;
        ${G}
        return offset;
      }
      `}offsetToIndices(){const d={};return this.context.programInfo.inputNames.forEach(((A,le)=>{const G=this.context.inputTextureLayouts[le].shape,B=this.context.inputTextureLayouts[le].strides,o=G.length;let i=`offsetToIndices_${A}`;d[i]=new r.GlslLibRoutine(u.offsetToIndicesSingle(i,o,B)),i=`offsetToIndices_${A}_T`,d[i]=new r.GlslLibRoutine(u.offsetToIndicesSingle(i,o,B.slice().reverse()))})),d}static offsetToIndicesSingle(d,A,le){const G=[];for(let B=0;B<A-1;++B)G.push(`
      indices[${B}] = offset / ${le[B]};`),G.push(`
        offset -= indices[${B}] * ${le[B]};`);return G.push(`
      indices[${A-1}] = offset;`),`
      void ${d}(int offset, out int indices[${A}]) {
        ${G.join("")}
      }
      `}incrementIndices(){const d={};return this.context.programInfo.inputNames.forEach(((A,le)=>{const G=this.context.inputTextureLayouts[le].shape,B=G.length,o=`incrementIndices_${A}`;let i="";for(let ae=0;ae<B;++ae)i+=`
        shape[${ae}] = ${G[ae]};`;const w=`
        void ${o}(int axis, out int indices[${B}]) {
          int shape[${B}];
          ${i};
          for(int i = ${B} -1 ; i >= 0; --i) {
            if(i > axis) continue;
            indices[i] += 1;
            if(indices[i] < shape[i]) {
              break;
            }
            indices[i] = 0;
          }
        }
        `;d[o]=new r.GlslLibRoutine(w)})),d}}e.ShapeUtilsGlslLib=u},5060:(n,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.getDefaultFragShaderMain=e.getFragShaderPreamble=e.getVertexShaderSource=e.getGlsl=void 0;const t={version:"",attribute:"attribute",varyingVertex:"varying",varyingFrag:"varying",texture2D:"texture2D",output:"gl_FragColor",outputDeclaration:""},r={version:"#version 300 es",attribute:"in",varyingVertex:"out",varyingFrag:"in",texture2D:"texture",output:"outputColor",outputDeclaration:"out vec4 outputColor;"};function u(T){return T===1?t:r}e.getGlsl=u,e.getVertexShaderSource=function(T){const d=u(T);return`${d.version}
      precision highp float;
      ${d.attribute} vec3 position;
      ${d.attribute} vec2 textureCoord;

      ${d.varyingVertex} vec2 TexCoords;

      void main()
      {
          gl_Position = vec4(position, 1.0);
          TexCoords = textureCoord;
      }`},e.getFragShaderPreamble=function(T){const d=u(T);return`${d.version}
    precision highp float;
    precision highp int;
    precision highp sampler2D;
    ${d.varyingFrag} vec2 TexCoords;
    ${d.outputDeclaration}
    const vec2 halfCR = vec2(0.5, 0.5);

    // Custom vector types to handle higher dimenalities.
    struct ivec5
    {
      int x;
      int y;
      int z;
      int w;
      int u;
    };

    struct ivec6
    {
      int x;
      int y;
      int z;
      int w;
      int u;
      int v;
    };

    int imod(int x, int y) {
      return x - y * (x / y);
    }

    `},e.getDefaultFragShaderMain=function(T,d){return`
  void main() {
    int indices[${d}];
    toVec(TexCoords, indices);
    vec4 result = vec4(process(indices));
    ${u(T).output} = result;
  }
  `}},3891:(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.VecGlslLib=void 0;const r=t(8520);class u extends r.GlslLib{constructor(d){super(d)}getCustomTypes(){return{}}getFunctions(){return Object.assign(Object.assign(Object.assign(Object.assign({},this.binaryVecFunctions()),this.copyVec()),this.setVecItem()),this.getVecItem())}binaryVecFunctions(){const d=this.context.outputTextureLayout.shape.length,A={add:"+=",sub:"-=",mul:"*=",div:"/="},le={};for(const G in A){const B=`${G}Vec`;let o="";for(let w=0;w<d;++w)o+=`
          dest[${w}] ${A[G]} src[${w}];
          `;const i=`
        void ${B}(int src[${d}], out int dest[${d}]) {
          ${o}
        }
        `;le[B]=new r.GlslLibRoutine(i)}return le}copyVec(){const d=this.context.outputTextureLayout.shape.length;let A="";for(let G=0;G<d;++G)A+=`
        dest[${G}] = src[${G}];
        `;const le=`
      void copyVec(int src[${d}], out int dest[${d}]) {
        ${A}
      }
      `;return{copyVec:new r.GlslLibRoutine(le)}}setVecItem(){const d=this.context.outputTextureLayout.shape.length;let A=`
        if(index < 0)
            index =${d} + index;
        if (index == 0)
            m[0] = value;
        `;for(let G=1;G<d-1;++G)A+=`
        else if (index == ${G})
            m[${G}] = value;
            `;A+=`
        else
            m[${d-1}] = value;
        `;const le=`
      void setVecItem(out int m[${d}], int index, int value) {
        ${A}
      }
        `;return{setVecItem:new r.GlslLibRoutine(le)}}getVecItem(){const d=this.context.outputTextureLayout.shape.length;let A=`
        if(index < 0)
            index = ${d} + index;
        if (index == 0)
            return m[0];
      `;for(let G=1;G<d-1;++G)A+=`
        else if (index == ${G})
            return m[${G}];
      `;A+=`
        else
            return m[${d-1}];
        `;const le=`
      int getVecItem(int m[${d}], int index) {
        ${A}
      }
    `;return{getVecItem:new r.GlslLibRoutine(le)}}}e.VecGlslLib=u},8316:(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.WebGLInferenceHandler=void 0;const r=t(6231),u=t(9162),T=t(2517),d=t(2403),A=t(7019),le=t(8710),G=t(5611),B=t(4057),o=t(2039);e.WebGLInferenceHandler=class{constructor(i){this.session=i,this.packedTextureDataCache=new Map,this.unpackedTextureDataCache=new Map}calculateTextureWidthAndHeight(i,w){return(0,B.calculateTextureWidthAndHeight)(this.session.layoutStrategy,i,w)}executeProgram(i,w){if(w.length<i.inputNames.length)throw new Error(`Input size mustn't be less than ${i.inputNames.length}.`);if(i.inputNames.length!==i.inputTypes.length)throw new Error("input names size does not match input types");const ae=[];for(let ve=0;ve<i.inputNames.length;++ve)ae[ve]=this.getOrCreateTextureData(w[ve],i.inputTypes[ve]);const ue=((ve,we)=>{const Se=we.map((Re=>`${Re.unpackedShape.join(",")};${Re.width}x${Re.height}`)).join("_");let Ae=ve.name;return ve.cacheHint&&(Ae+="["+ve.cacheHint+"]"),Ae+=":"+Se,Ae})(i,ae);let he=this.session.programManager.getArtifact(ue);const pe=he?he.programInfo:typeof i.get=="function"?i.get():i,ge=(0,B.createTextureLayoutFromTextureType)(this.session.layoutStrategy,pe.output.dims,pe.output.textureType),be=this.createTextureData(ge,pe.output.type);return he||(he=this.session.programManager.build(pe,ae,be),this.session.programManager.setArtifact(ue,he)),this.runProgram(he,ae,be),be}run(i,w){return this.executeProgram(i,w).tensor}runProgram(i,w,ae){for(let ue=0;ue<w.length;++ue)if(!!w[ue].isPacked!=(i.programInfo.inputTypes[ue]===o.TextureType.packed))throw new Error(`input[${ue}] property packed inconsistent`);if(!!ae.isPacked!=(i.programInfo.output.textureType===o.TextureType.packed))throw new Error("output property packed inconsistent");this.session.programManager.run(i,w,ae)}getOrCreateTextureData(i,w){let ae=this.getTextureData(i.dataId,w===o.TextureType.packed);if(!ae&&(ae=this.getTextureData(i.dataId,w!==o.TextureType.packed),ae))return w===o.TextureType.packed?this.pack(ae):this.unpack(ae);if(!ae){const ue=(0,B.createTextureLayoutFromTextureType)(this.session.layoutStrategy,i.dims,w);if(w===o.TextureType.packedLastDimension){const ge=i.dims;if(ge.length===4){const be=[ge[0],Math.ceil(ge[1]*ge[2]*ge[3]/4)],ve=(0,B.createTextureLayoutFromTextureType)(this.session.layoutStrategy,be,w);let we=i.numberData;if(ge[1]*ge[2]*ge[3]%4!=0){const Se=ge[0],Ae=ge[1]*ge[2]*ge[3],Re=Math.ceil(Ae*1/4)*4;we=new Float32Array(Se*Re);for(let Te=0;Te<Se;++Te){const Ce=Te*Ae,Ve=Te*Re+Te%1*Ae;we.set(i.numberData.subarray(Ce,Ce+Ae),Ve)}}return this.createTextureData(ve,i.type,we,i,1)}}if(w===o.TextureType.packed){const he=(0,B.createTextureLayoutFromShape)(this.session.layoutStrategy,i.dims,1,[],{reverseWH:!0}),pe=this.createTextureData(he,i.type,i.numberData,i,1);ae=this.pack(pe)}else ae=this.createTextureData(ue,i.type,i.numberData,i,1)}return ae}createTextureDataFromLayoutBindTensor(i,w,ae,ue){return this.createTextureData(i,w,ae,ue,1)}createTextureData(i,w,ae,ue,he){r.Logger.verbose("InferenceHandler",`Creating TextureData: layout:[${JSON.stringify(i)}]`);const pe=this.session.textureManager.createTextureFromLayout(w,i,ae,he);return this.createTextureDataFromTexture(i,w,pe,ue)}reshapeUnpacked(i,w){const ae=this.getOrCreateTextureData(i,o.TextureType.unpacked),ue={channels:ae.channels,height:ae.height,width:ae.width,shape:w.length!==0?w:[1],strides:T.ShapeUtil.computeStrides(w),unpackedShape:w};return this.createTextureDataFromTexture(ue,i.type,ae.texture).tensor}reshapePacked(i,w){const ae=this.getOrCreateTextureData(i,o.TextureType.packed);if((0,A.isReshapeCheap)(i.dims,w)){const be={channels:ae.channels,height:ae.height,width:ae.width,shape:w.length!==0?w:[1],strides:T.ShapeUtil.computeStrides(w),unpackedShape:w,isPacked:!0};return this.createTextureDataFromTexture(be,i.type,ae.texture).tensor}const ue=(0,A.processDims3D)(i.dims),he=(0,A.processDims3D)(w),pe=this.reshapePacked(i,ue),ge=this.run((0,A.createPackedReshape3DProgramInfoLoader)(this,pe,he),[pe]);return this.reshapePacked(ge,w)}cast(i,w){const ae=this.getOrCreateTextureData(i,o.TextureType.unpacked);return this.createTextureDataFromTexture(ae,w,ae.texture).tensor}createTextureDataFromTexture(i,w,ae,ue,he){const pe=Object.assign(Object.assign({},i),{tensor:ue||new u.Tensor(i.unpackedShape,w,(ge=>this.readTexture(pe)),(async ge=>this.readTextureAsync(pe)),void 0,he),texture:ae});return this.setTextureData(pe.tensor.dataId,pe,i.isPacked),pe}getTextureData(i,w=!1){return this.session.isInitializer(i)?this.session.getTextureData(i,w):w?this.packedTextureDataCache.get(i):this.unpackedTextureDataCache.get(i)}setTextureData(i,w,ae=!1){this.session.isInitializer(i)?this.session.setTextureData(i,w,ae):(ae?this.packedTextureDataCache:this.unpackedTextureDataCache).set(i,w)}isTextureLayoutCached(i,w=!1){return!!this.getTextureData(i.dataId,w)}dispose(){this.session.textureManager.clearActiveTextures(),this.packedTextureDataCache.forEach((i=>this.session.textureManager.releaseTexture(i))),this.packedTextureDataCache=new Map,this.unpackedTextureDataCache.forEach((i=>this.session.textureManager.releaseTexture(i))),this.unpackedTextureDataCache=new Map}readTexture(i){return i.isPacked?this.readTexture(this.unpack(i)):this.session.backend.glContext.isFloat32DownloadSupported?this.session.textureManager.readTexture(i,i.tensor.type,i.channels):this.session.textureManager.readUint8TextureAsFloat((0,le.encodeAsUint8)(this,i))}async readTextureAsync(i){return i.isPacked?this.readTextureAsync(this.unpack(i)):this.session.backend.glContext.isFloat32DownloadSupported?this.session.textureManager.readTextureAsync(i,i.tensor.type,i.channels):this.session.textureManager.readUint8TextureAsFloat((0,le.encodeAsUint8)(this,i))}pack(i){return this.executeProgram((0,d.createPackProgramInfoLoader)(this,i.tensor),[i.tensor])}unpack(i){return this.executeProgram((0,G.createUnpackProgramInfoLoader)(this,i.tensor),[i.tensor])}}},1640:function(n,e,t){var r=this&&this.__createBinding||(Object.create?function(Ke,qe,Pe,et){et===void 0&&(et=Pe);var Je=Object.getOwnPropertyDescriptor(qe,Pe);Je&&!("get"in Je?!qe.__esModule:Je.writable||Je.configurable)||(Je={enumerable:!0,get:function(){return qe[Pe]}}),Object.defineProperty(Ke,et,Je)}:function(Ke,qe,Pe,et){et===void 0&&(et=Pe),Ke[et]=qe[Pe]}),u=this&&this.__setModuleDefault||(Object.create?function(Ke,qe){Object.defineProperty(Ke,"default",{enumerable:!0,value:qe})}:function(Ke,qe){Ke.default=qe}),T=this&&this.__importStar||function(Ke){if(Ke&&Ke.__esModule)return Ke;var qe={};if(Ke!=null)for(var Pe in Ke)Pe!=="default"&&Object.prototype.hasOwnProperty.call(Ke,Pe)&&r(qe,Ke,Pe);return u(qe,Ke),qe};Object.defineProperty(e,"__esModule",{value:!0}),e.WEBGL_OP_RESOLVE_RULES=void 0;const d=t(2898),A=T(t(7839)),le=t(4196),G=t(2069),B=t(8138),o=t(9663),i=t(5193),w=t(7992),ae=t(1253),ue=t(4776),he=t(6572),pe=t(3346),ge=t(5623),be=t(2870),ve=t(2143),we=t(4939),Se=t(718),Ae=t(2268),Re=t(8117),Te=t(2278),Ce=t(5524),Ve=t(5975),$e=t(3933),He=t(6558),De=t(5723),Xe=t(3738),Me=T(t(4909)),je=t(8428),it=t(9793);e.WEBGL_OP_RESOLVE_RULES=[["Abs","","6+",Me.abs],["Acos","","7+",Me.acos],["Add","","7+",A.add],["And","","7+",A.and],["Asin","","7+",Me.asin],["Atan","","7+",Me.atan],["AveragePool","","7+",ve.averagePool,ve.parseAveragePoolAttributes],["BatchNormalization","","7+",d.batchNormalization,d.parseBatchNormalizationAttributes],["Cast","","6+",le.cast,le.parseCastAttributes],["Ceil","","6+",Me.ceil],["Clip","","6-10",Me.clip,Me.parseClipAttributes],["Clip","","11+",Me.clipV11],["Concat","","4+",G.concat,G.parseConcatAttributes],["Conv","","1+",B.conv,B.parseConvAttributes],["ConvTranspose","","1+",o.convTranspose,o.parseConvTransposeAttributes],["Cos","","7+",Me.cos],["Div","","7+",A.div],["Dropout","","7+",Me.identity],["DepthToSpace","","1+",i.depthToSpace,i.parseDepthToSpaceAttributes],["Equal","","7+",A.equal],["Elu","","6+",Me.elu,Me.parseEluAttributes],["Exp","","6+",Me.exp],["Flatten","","1+",w.flatten,w.parseFlattenAttributes],["Floor","","6+",Me.floor],["FusedConv","com.microsoft","1+",B.conv,B.parseConvAttributes],["Gather","","1+",ae.gather,ae.parseGatherAttributes],["Gemm","","7-10",ue.gemm,ue.parseGemmAttributesV7],["Gemm","","11+",ue.gemm,ue.parseGemmAttributesV11],["GlobalAveragePool","","1+",ve.globalAveragePool,ve.parseGlobalAveragePoolAttributes],["GlobalMaxPool","","1+",ve.globalMaxPool],["Greater","","7+",A.greater],["Identity","","1+",Me.identity],["ImageScaler","","1+",he.imageScaler,he.parseImageScalerAttributes],["InstanceNormalization","","6+",pe.instanceNormalization,pe.parseInstanceNormalizationAttributes],["LeakyRelu","","6+",Me.leakyRelu,Me.parseLeakyReluAttributes],["Less","","7+",A.less],["Log","","6+",Me.log],["MatMul","","1+",ge.matMul,ge.parseMatMulAttributes],["MaxPool","","1+",ve.maxPool,ve.parseMaxPoolAttributes],["Mul","","7+",A.mul],["Neg","","6+",Me.neg],["Not","","1+",Me.not],["Or","","7+",A.or],["Pad","","2-10",be.padV2,be.parsePadAttributesV2],["Pad","","11+",be.padV11,be.parsePadAttributesV11],["Pow","","7+",A.pow],["PRelu","","7+",A.pRelu],["ReduceLogSum","","1+",we.reduceLogSum,we.parseReduceAttributes],["ReduceMax","","1+",we.reduceMax,we.parseReduceAttributes],["ReduceMean","","1+",we.reduceMean,we.parseReduceAttributes],["ReduceMin","","1+",we.reduceMin,we.parseReduceAttributes],["ReduceProd","","1+",we.reduceProd,we.parseReduceAttributes],["ReduceSum","","1-12",we.reduceSum,we.parseReduceAttributes],["ReduceSumSquare","","1+",we.reduceLogSumSquare,we.parseReduceAttributes],["Relu","","6+",Me.relu],["Reshape","","5+",Se.reshape],["Resize","","10",Ae.resize,Ae.parseResizeAttributesV10],["Resize","","11+",Ae.resize,Ae.parseResizeAttributesV11],["Shape","","1+",Re.shape],["Sigmoid","","6+",Me.sigmoid],["Sin","","7+",Me.sin],["Slice","","10+",Te.sliceV10],["Slice","","1-9",Te.slice,Te.parseSliceAttributes],["Softmax","","1-12",Ce.softmax,Ce.parseSoftmaxAttributes],["Softmax","","13+",Ce.softmaxV13,Ce.parseSoftmaxAttributesV13],["Split","","2-12",Ve.split,Ve.parseSplitAttributes],["Sqrt","","6+",Me.sqrt],["Squeeze","","1-12",$e.squeeze,$e.parseSqueezeAttributes],["Squeeze","","13+",$e.squeezeV13],["Sub","","7+",A.sub],["Sum","","6+",He.sum],["Tan","","7+",Me.tan],["Tanh","","6+",Me.tanh],["Tile","","6+",De.tile],["Transpose","","1+",Xe.transpose,Xe.parseTransposeAttributes],["Upsample","","7-8",it.upsample,it.parseUpsampleAttributesV7],["Upsample","","9",it.upsample,it.parseUpsampleAttributesV9],["Unsqueeze","","1-12",je.unsqueeze,je.parseUnsqueezeAttributes],["Unsqueeze","","13+",je.unsqueezeV13],["Xor","","7+",A.xor]]},2898:(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.parseBatchNormalizationAttributes=e.batchNormalization=void 0;const r=t(246),u=t(5060),T=t(2039),d={name:"BatchNormalization",inputNames:["A","Scale","B","Mean","Variance"],inputTypes:[T.TextureType.unpacked,T.TextureType.unpacked,T.TextureType.unpacked,T.TextureType.unpacked,T.TextureType.unpacked]};e.batchNormalization=(G,B,o)=>(le(B),[G.run(Object.assign(Object.assign({},d),{cacheHint:o.cacheKey,get:()=>A(G,B,o)}),B)]),e.parseBatchNormalizationAttributes=G=>{const B=G.attributes.getFloat("epsilon",1e-5),o=G.attributes.getFloat("momentum",.9),i=G.attributes.getInt("spatial",1);return(0,r.createAttributeWithCacheKey)({epsilon:B,momentum:o,spatial:i})};const A=(G,B,o)=>{const i=(0,u.getGlsl)(G.session.backend.glContext.version),w=B[0].dims.length,[ae,ue]=G.calculateTextureWidthAndHeight(B[1].dims,T.TextureType.unpacked),he=`
  float process(int[${w}] indices) {
    vec2 position = offsetToCoords(indices[1], ${ae}, ${ue});
    float scale = getColorAsFloat(${i.texture2D}(Scale, position));
    float mean = getColorAsFloat(${i.texture2D}(Mean, position));
    float variance = getColorAsFloat(${i.texture2D}(Variance, position));
    float b = getColorAsFloat(${i.texture2D}(B, position));

    return scale * ( (_A(indices) - mean) / sqrt(variance + float(${o.epsilon})) ) + b;
  }`;return Object.assign(Object.assign({},d),{output:{dims:B[0].dims,type:B[0].type,textureType:T.TextureType.unpacked},shaderSource:he})},le=G=>{if(!G||G.length!==5)throw new Error("BatchNormalization requires 5 inputs.");const B=G[0],o=G[1],i=G[2],w=G[3],ae=G[4];if(B.dims.length<3||o.dims.length!==1||i.dims.length!==1||w.dims.length!==1||ae.dims.length!==1)throw new Error("invalid input shape.");if(o.dims[0]!==B.dims[1]||i.dims[0]!==B.dims[1]||w.dims[0]!==B.dims[1]||ae.dims[0]!==B.dims[1])throw new Error("invalid input shape.");if(B.type!=="float32"&&B.type!=="float64"||o.type!=="float32"&&o.type!=="float64"||i.type!=="float32"&&i.type!=="float64"||w.type!=="float32"&&w.type!=="float64"||ae.type!=="float32"&&ae.type!=="float64")throw new Error("invalid input tensor types.")}},7839:(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.xor=e.sub=e.pRelu=e.pow=e.or=e.mul=e.less=e.greater=e.equal=e.div=e.and=e.add=e.glslPRelu=e.glslPow=e.glslXor=e.glslOr=e.glslAnd=e.glslLess=e.glslGreater=e.glslEqual=e.glslSub=e.glslMul=e.glslDiv=e.glslAdd=void 0;const r=t(2517),u=t(8520),T=t(5060),d=t(2039);function A(){const we="add_";return{body:`
  float ${we}(float a, float b) {
    return a + b;
  }
  vec4 ${we}(vec4 v1, vec4 v2) {
    return v1 + v2;
  }
  `,name:we,type:u.FunctionType.ValueBased}}function le(){const we="div_";return{body:`
  float ${we}(float a, float b) {
    return a / b;
  }
  vec4 ${we}(vec4 v1, vec4 v2) {
    return v1 / v2;
  }
  `,name:we,type:u.FunctionType.ValueBased}}function G(){const we="mul_";return{body:`
  float ${we}(float a, float b) {
    return a * b;
  }
  vec4 ${we}(vec4 v1, vec4 v2) {
    return v1 * v2;
  }
  `,name:we,type:u.FunctionType.ValueBased}}function B(){const we="sub_";return{body:`
  float ${we}(float a, float b) {
    return a - b;
  }
  vec4 ${we}(vec4 v1, vec4 v2) {
    return v1 - v2;
  }
  `,name:we,type:u.FunctionType.ValueBased}}function o(){const we="equal_";return{body:`
  float ${we}(float a, float b) {
    return float(a == b);
  }
  vec4 ${we}(vec4 v1, vec4 v2) {
    return vec4(equal(v1, v2));
  }
  `,name:we,type:u.FunctionType.ValueBased}}function i(){const we="greater_";return{body:`
  float ${we}(float a, float b) {
    return float(a > b);
  }
  vec4 ${we}(vec4 v1, vec4 v2) {
    return vec4( v1.r > v2.r ,
      v1.g > v2.g,
      v1.b > v2.b,
      v1.a > v2.a );
  }
  `,name:we,type:u.FunctionType.ValueBased}}function w(){const we="less_";return{body:`
  float ${we}(float a, float b) {
    return float(a < b);
  }
  vec4 ${we}(vec4 v1, vec4 v2) {
    return vec4( v1.r < v2.r ,
                v1.g < v2.g,
                v1.b < v2.b,
                v1.a < v2.a );
  }
  `,name:we,type:u.FunctionType.ValueBased}}function ae(){const we="and_";return{body:`
  float ${we}(float a, float b) {
    return float( bool(a) && bool(b) );
  }
  vec4 ${we}(vec4 v1, vec4 v2) {
    bvec4 b1 = bvec4(v1);
    bvec4 b2 = bvec4(v2);
    return vec4( b1.r && b2.r ,
                b1.g && b2.g,
                b1.b && b2.b,
                b1.a && b2.a );
  }
  `,name:we,type:u.FunctionType.ValueBased}}function ue(){return{body:`
  float or_(float a, float b) {
    return float( bool(a) || bool(b) );
  }
  vec4 or_(vec4 v1, vec4 v2) {
    bvec4 b1 = bvec4(v1);
    bvec4 b2 = bvec4(v2);
    return vec4( b1.r || b2.r ,
                b1.g || b2.g,
                b1.b || b2.b,
                b1.a || b2.a );
  }
  `,name:"or_",type:u.FunctionType.ValueBased}}function he(){const we="xor_";return{body:`
  float ${we}(float a, float b) {
    return float( bool(a) ^^ bool(b) );
  }
  vec4 ${we}(vec4 v1, vec4 v2) {
    bvec4 b1 = bvec4(v1);
    bvec4 b2 = bvec4(v2);
    return vec4( b1.r ^^ b2.r ,
                b1.g ^^ b2.g,
                b1.b ^^ b2.b,
                b1.a ^^ b2.a );
  }
  `,name:we,type:u.FunctionType.ValueBased}}function pe(){return(function(we){const Se=`${we}_`;return{body:`
  float ${Se}(float a, float b) {
    return ${we}(a, b);
  }
  vec4 ${Se}(vec4 v1, vec4 v2) {
    return ${we}(v1, v2);
  }
  `,name:Se,type:u.FunctionType.ValueBased}})("pow")}function ge(){const we="prelu_";return{body:`
  float ${we}(float a, float b) {
    return a < 0.0 ? a * b: a;
  }
  vec4 ${we}(vec4 v1, vec4 v2) {
    return vec4(
      v1.r < 0.0 ? v1.r * v2.r: v1.r,
      v1.g < 0.0 ? v1.g * v2.g: v1.g,
      v1.b < 0.0 ? v1.b * v2.b: v1.b,
      v1.a < 0.0 ? v1.a * v2.a: v1.a
      );
  }
  `,name:we,type:u.FunctionType.ValueBased}}e.glslAdd=A,e.glslDiv=le,e.glslMul=G,e.glslSub=B,e.glslEqual=o,e.glslGreater=i,e.glslLess=w,e.glslAnd=ae,e.glslOr=ue,e.glslXor=he,e.glslPow=pe,e.glslPRelu=ge;const be=(we,Se,Ae,Re=Se[0].type,Te)=>{const Ce=we.session.pack?d.TextureType.packed:d.TextureType.unpacked;return{name:Ae.name,inputNames:["A","B"],inputTypes:[Ce,Ce],cacheHint:Te,get:()=>ve(we,Se,Ae,Re)}},ve=(we,Se,Ae,Re=Se[0].type)=>{const Te=we.session.pack?d.TextureType.packed:d.TextureType.unpacked,Ce=!r.ShapeUtil.areEqual(Se[0].dims,Se[1].dims);let Ve=Se[0].dims;const $e=we.session.pack;if(Ce){const Xe=r.BroadcastUtil.calcShape(Se[0].dims,Se[1].dims,!1);if(!Xe)throw new Error("Can't perform binary op on the given tensors");Ve=Xe;const Me=Ve.length,je=Se[0].dims.length!==0?Se[0].dims.length:1,it=Se[1].dims.length!==0?Se[1].dims.length:1,Ke=Se[0].dims.length!==0?"bcastIndices_A(indices, aindices);":"aindices[0] = 0;",qe=Se[1].dims.length!==0?"bcastIndices_B(indices, bindices);":"bindices[0] = 0;",Pe=(0,T.getGlsl)(we.session.backend.glContext.version),et=$e?`
      ${Ae.body}
      void main() {
        vec4 a = getAAtOutCoords();
        vec4 b = getBAtOutCoords();
        vec4 result = ${Ae.name}(a, b);
        ${Pe.output} = result;
      }`:`
      ${Ae.body}
      float process(int indices[${Me}]) {
        int aindices[${je}];
        int bindices[${it}];
        ${Ke}
        ${qe}
        return ${Ae.name}(_A(aindices), _B(bindices));
      }`;return{name:Ae.name,inputNames:["A","B"],inputTypes:[Te,Te],output:{dims:Ve,type:Re,textureType:Te},shaderSource:et,hasMain:$e}}const He=(0,T.getGlsl)(we.session.backend.glContext.version),De=`
    ${Ae.body}
    void main() {
      vec4 v1 = ${He.texture2D}(A, TexCoords);
      vec4 v2 = ${He.texture2D}(B, TexCoords);
      vec4 result = ${Ae.name}(v1, v2);
      ${He.output} = result;
    }
    `;return{name:Ae.name,inputNames:["A","B"],inputTypes:[Te,Te],output:{dims:Se[0].dims,type:Re,textureType:Te},shaderSource:De,hasMain:!0}};e.add=(we,Se)=>[we.run(be(we,Se,A()),Se)],e.and=(we,Se)=>[we.run(be(we,Se,ae(),"bool"),Se)],e.div=(we,Se)=>[we.run(be(we,Se,le()),Se)],e.equal=(we,Se)=>[we.run(be(we,Se,o(),"bool"),Se)],e.greater=(we,Se)=>[we.run(be(we,Se,i(),"bool"),Se)],e.less=(we,Se)=>[we.run(be(we,Se,w(),"bool"),Se)],e.mul=(we,Se)=>[we.run(be(we,Se,G()),Se)],e.or=(we,Se)=>[we.run(be(we,Se,ue(),"bool"),Se)],e.pow=(we,Se)=>[we.run(be(we,Se,pe()),Se)],e.pRelu=(we,Se)=>[we.run(be(we,Se,ge()),Se)],e.sub=(we,Se)=>[we.run(be(we,Se,B()),Se)],e.xor=(we,Se)=>[we.run(be(we,Se,he(),"bool"),Se)]},4196:(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.parseCastAttributes=e.cast=void 0;const r=t(2517);e.cast=(T,d,A)=>(u(d),[T.cast(d[0],A)]),e.parseCastAttributes=T=>r.ProtoUtil.tensorDataTypeFromProto(T.attributes.getInt("to"));const u=T=>{if(!T||T.length!==1)throw new Error("Cast requires 1 input.");if(T[0].type==="string")throw new Error("Invalid input type.")}},1163:(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.createPackedConcatProgramInfoLoader=void 0;const r=t(5060),u=t(2039),T=t(9390),d=t(2827);e.createPackedConcatProgramInfoLoader=(le,G,B)=>{const o=(i=G.length,w=B.cacheKey,{name:"Concat (packed)",inputNames:Array.from({length:i},((ae,ue)=>`X${ue}`)),inputTypes:Array(i).fill(u.TextureType.packed),cacheHint:w});var i,w;return Object.assign(Object.assign({},o),{get:()=>((ae,ue,he,pe)=>{const ge=he[0].dims.slice();if(pe>=ge.length||pe<-1*ge.length)throw new Error("axis specified for concat doesn't match input dimensionality");pe<0&&(pe=ge.length+pe);const be=ge.slice(0);for(let Ke=1;Ke<he.length;Ke++){const qe=he[Ke].dims.slice();for(let Pe=0;Pe<ge.length;Pe++)if(Pe===pe)be[pe]+=qe[Pe];else if(ge[Pe]!==qe[Pe])throw new Error("non concat dimensions must match")}const ve=be.length,we=(0,d.getChannels)("coords",ve),Se=(0,T.getCoordsDataType)(ve),Ae=(0,d.unpackFromChannel)(),Re=he.map((Ke=>Ke.dims)),Te=(0,T.getGlChannels)(ve),Ce=new Array(Re.length-1);Ce[0]=Re[0][pe];for(let Ke=1;Ke<Ce.length;Ke++)Ce[Ke]=Ce[Ke-1]+Re[Ke][pe];const Ve=Te[pe],$e=Te.slice(-2),He=Te.join();let De=`if (${Ve} < ${Ce[0]}) {
        return getChannel(
            getX0(${He}), vec2(${$e.join()}));
        }`;for(let Ke=1;Ke<Ce.length;Ke++){const qe=Ce[Ke-1];De+=`
            if (${Ve} < ${Ce[Ke]}  && ${Ve} >= ${Ce[Ke-1]}) {
              return getChannel(
                getX${Ke}(${A(Te,Ve,qe)}),
                vec2(${A($e,Ve,qe)}));
            }`}const Xe=Ce.length,Me=Ce[Ce.length-1];De+=`
            return getChannel(
              getX${Xe}(${A(Te,Ve,Me)}),
              vec2(${A($e,Ve,Me)}));`;const je=(0,r.getGlsl)(ae.session.backend.glContext.version),it=`
          ${Ae}
          float getValue(${Te.map((Ke=>"int "+Ke))}) {
            ${De}
          }

          void main() {
            ${Se} coords = getOutputCoords();
            int lastDim = coords.${Te[ve-1]};
            coords.${Te[ve-1]} = coords.${Te[ve-2]};
            coords.${Te[ve-2]} = lastDim;

            vec4 result = vec4(getValue(${we}), 0., 0., 0.);

            ${we[ve-1]} = ${we[ve-1]} + 1;
            if (${we[ve-1]} < ${be[ve-1]}) {
              result.g = getValue(${we});
            }

            ${we[ve-2]} = ${we[ve-2]} + 1;
            if (${we[ve-2]} < ${be[ve-2]}) {
              result.a = getValue(${we});
            }

            ${we[ve-1]} = ${we[ve-1]} - 1;
            if (${we[ve-2]} < ${be[ve-2]} &&
                ${we[ve-1]} < ${be[ve-1]}) {
              result.b = getValue(${we});
            }
            ${je.output} = result;
          }
        `;return Object.assign(Object.assign({},ue),{output:{dims:be,type:he[0].type,textureType:u.TextureType.packed},shaderSource:it,hasMain:!0})})(le,o,G,B.axis)})};const A=(le,G,B)=>{const o=le.indexOf(G);return le.map(((i,w)=>w===o?`${i} - ${B}`:i)).join()}},2069:(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.parseConcatAttributes=e.concat=void 0;const r=t(246),u=t(2039),T=t(1163);e.concat=(i,w,ae)=>(o(w),i.session.pack&&w[0].dims.length>1?[i.run((0,T.createPackedConcatProgramInfoLoader)(i,w,ae),w)]:[i.run(d(i,w,ae),w)]);const d=(i,w,ae)=>{const ue=(he=w.length,pe=ae.cacheKey,{name:"Concat",inputNames:Array.from({length:he},((ge,be)=>`X${be}`)),inputTypes:Array(he).fill(u.TextureType.unpacked),cacheHint:pe});var he,pe;return Object.assign(Object.assign({},ue),{get:()=>((ge,be,ve,we)=>{const Se=ve[0].dims.slice();if(we>=Se.length||we<-1*Se.length)throw new Error("axis specified for concat doesn't match input dimensionality");we<0&&(we=Se.length+we);const Ae=Se.slice(0);for(let He=1;He<ve.length;He++){const De=ve[He].dims.slice();for(let Xe=0;Xe<Se.length;Xe++)if(Xe===we)Ae[we]+=De[Xe];else if(Se[Xe]!==De[Xe])throw new Error("non concat dimensions must match")}const Re=Ae.length,Te=new Array(ve.length);let Ce=0;for(let He=0;He<Te.length;++He)Ce+=ve[He].dims[we],Te[He]=Ce;let Ve="";Ve=ve.length<5?A(Te):le(Te);const $e=`
        ${G(ve.length,Re)}
        ${B(Te)}
        ${Ve}
        float process(int indices[${Re}]) {
          int textureIndex = getTextureWhereDataResides (indices[${we}]);

          if(textureIndex != 0) {
            indices[${we}] = indices[${we}] - int(getSizeInConcatAxisValueFromIndex(textureIndex-int(1)));
          }

          return fetchDataFromCorrectTexture(textureIndex, indices);
        }`;return Object.assign(Object.assign({},be),{output:{dims:Ae,type:ve[0].type,textureType:u.TextureType.unpacked},shaderSource:$e})})(0,ue,w,ae.axis)})},A=i=>`int getTextureWhereDataResides(int index) {
      ${i.map(((w,ae)=>`if(index<${w}) {return ${ae};}
`)).join("")}
    }`,le=i=>A(i),G=(i,w)=>{const ae=[`float fetchDataFromCorrectTexture(int textureIndex, int indices[${w}]) {`];for(let ue=0;ue<i;++ue)ue===0?ae.push(`	if (textureIndex == ${ue}) { return _X${ue}(indices); }`):ue===i-1?ae.push(`	else { return _X${ue}(indices); }`):ae.push(`	else if (textureIndex == ${ue}) { return _X${ue}(indices); }`);return ae.push("	}"),ae.join(`
`)},B=i=>{const w=["int getSizeInConcatAxisValueFromIndex(int index) {"];for(let ae=0;ae<i.length;++ae)ae===0?w.push(`	if (index == ${ae}) { return ${i[ae]}; }`):ae===i.length-1?w.push(`	else { return ${i[ae]}; }`):w.push(`	else if (index == ${ae}) { return ${i[ae]}; }`);return w.push("	}"),w.join(`
`)};e.parseConcatAttributes=i=>(0,r.createAttributeWithCacheKey)({axis:i.attributes.getInt("axis")});const o=i=>{if(!i||i.length<1)throw new Error("too few inputs");const w=i[0].type,ae=i[0].dims.length;if(w==="string")throw new Error("string tensor is not supported yet");for(const ue of i){if(ue.type!==w)throw new Error("input tensors should be one type");if(ue.dims.length!==ae)throw new Error("input tensors should have the same shape")}}},4770:(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.createUnpackedGroupedConvProgramInfoLoader=void 0;const r=t(6231),u=t(5060),T=t(2039),d=t(8138),A=t(2823);e.createUnpackedGroupedConvProgramInfoLoader=(le,G,B)=>{const o=(i=G.length>2,w=B.cacheKey,{name:"GroupedConv",inputNames:i?["X","W","Bias"]:["X","W"],inputTypes:i?[T.TextureType.unpacked,T.TextureType.unpacked,T.TextureType.unpacked]:[T.TextureType.unpacked,T.TextureType.unpacked],cacheHint:w});var i,w;return Object.assign(Object.assign({},o),{get:()=>((ae,ue,he,pe)=>{const ge=ue.length>2?"value += getBias(output_channel);":"",be=ue[0].dims.slice(),ve=ue[1].dims.slice(),we=ve[0]/pe.group;r.Logger.verbose("GroupedConv",`autpPad:${pe.autoPad}, dilations:${pe.dilations}, group:${pe.group}, kernelShape:${pe.kernelShape}, pads:${pe.pads}, strides:${pe.strides}`);const Se=(0,d.calculateOutputShape)(be,ve,pe.dilations,pe.pads,pe.strides),Ae=(0,u.getGlsl)(ae.session.backend.glContext.version),{activationFunction:Re,applyActivation:Te}=(0,A.getActivationSnippet)(pe),Ce=`
  const ivec2 strides = ivec2(${pe.strides[0]}, ${pe.strides[1]});
  const ivec2 pads = ivec2(${pe.pads[0]}, ${pe.pads[1]});
  ${Re}
  void main() {
    ivec4 coords = getOutputCoords();
    int batch = coords.x;
    int output_channel = coords.y;
    ivec2 xRCCorner = coords.zw * strides - pads;
    int group_id = output_channel / ${we};

    float value = 0.0;
    for (int wInChannel = 0; wInChannel < ${ve[1]}; wInChannel++) {
      int input_channel = group_id * ${ve[1]} + wInChannel;
      for (int wHeight = 0; wHeight < ${ve[2]}; wHeight++) {
        int xHeight = xRCCorner.x + wHeight * ${pe.dilations[0]};

        if (xHeight < 0 || xHeight >= ${be[2]}) {
          continue;
        }

        for (int wWidth = 0; wWidth < ${ve[3]}; wWidth++) {
          int xWidth = xRCCorner.y + wWidth * ${pe.dilations[1]};
          if (xWidth < 0 || xWidth >= ${be[3]}) {
            continue;
          }

          float xVal = getX(batch, input_channel, xWidth, xHeight);
          float wVal = getW(output_channel, wInChannel, wWidth, wHeight);
          value += xVal*wVal;
        }
      }
    }
    ${ge}
    ${Te}
    ${Ae.output} = vec4(value, .0, .0, .0);
  }
`;return Object.assign(Object.assign({},he),{output:{dims:Se,type:ue[0].type,textureType:T.TextureType.unpacked},shaderSource:Ce,hasMain:!0})})(le,G,o,B)})}},1386:(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.conv2DPacked=e.conv2DPackedPointwise=void 0;const r=t(8138),u=t(8555),T=t(708);e.conv2DPackedPointwise=(d,A,le)=>{const G=A[0].dims,B=A[1].dims,o=(0,r.calculateOutputShape)(G,B,le.dilations,le.pads,le.strides),i=d.reshapePacked(A[0],[G[1],G[2]*G[3]]),w=d.reshapePacked(A[1],[B[0],B[1]]),ae=A.length>2?[w,i,A[2]]:[w,i],ue=d.run((0,T.createPackedMatmulProgramInfoLoader)(d,ae,le),ae);return d.reshapePacked(ue,o)},e.conv2DPacked=(d,A,le)=>{const G=A[0].dims,B=A[1].dims,o=(0,r.calculateOutputShape)(G,B,le.dilations,le.pads,le.strides),i=d.run((0,u.createPackedIm2ColProgramInfoLoader)(d,A[0],A[1],o,le),[A[0]]),w=d.reshapePacked(A[1],[B[0],B[1]*B[2]*B[3]]),ae=A.length===3?[w,i,A[2]]:[w,i],ue=d.run((0,T.createPackedMatmulProgramInfoLoader)(d,ae,le),ae);return d.reshapePacked(ue,o)}},9663:(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.parseConvTransposeAttributes=e.convTranspose=void 0;const r=t(246),u=t(5060),T=t(2039),d=t(2823),A=(w,ae,ue,he,pe,ge)=>(w-1)*ae+ue+(he-1)*pe+1-ge,le=(w,ae,ue,he,pe)=>{const ge=Math.floor(w/2);ae==="SAME_UPPER"?(ue[he]=ge,ue[pe]=w-ge):ae==="SAME_LOWER"&&(ue[he]=w-ge,ue[pe]=ge)};e.convTranspose=(w,ae,ue)=>(i(ae,ue),G(w,ae,ue));const G=(w,ae,ue)=>{const he=o(ue,ae);return[B(w,ae,he)]},B=(w,ae,ue)=>w.run(((he,pe,ge)=>{const be=(ve=pe.length>2,we=ge.cacheKey,{name:"ConvTranspose",inputNames:ve?["X","W","B"]:["X","W"],inputTypes:ve?[T.TextureType.unpacked,T.TextureType.unpacked,T.TextureType.unpacked]:[T.TextureType.unpacked,T.TextureType.unpacked],cacheHint:we});var ve,we;return Object.assign(Object.assign({},be),{get:()=>((Se,Ae,Re,Te)=>{const Ce=Ae.length>2?"getB(output_channel)":"0.0",Ve=Ae[0].dims,$e=Ae[1].dims,He=$e[1],De=$e[0]/Te.group,Xe=[Ae[0].dims[0],Ae[1].dims[1]*Te.group,...Te.outputShape],Me=(0,u.getGlsl)(Se.session.backend.glContext.version),{activationFunction:je,applyActivation:it}=(0,d.getActivationSnippet)(Te),Ke=`
  const ivec2 strides = ivec2(${Te.strides[0]}, ${Te.strides[1]});
  const ivec2 pads = ivec2(${Te.pads[0]}, ${Te.pads[1]});
  ${je}
  void main() {
    ivec4 coords = getOutputCoords();
    int batch = coords.x;
    int output_channel = coords.y;

    ivec2 loc = coords.zw + pads;

    int group_id = output_channel / ${He};
    int wOutChannel = output_channel - group_id * ${He};

    float value = ${Ce};
    for (int inChannelOffset = 0; inChannelOffset < ${De}; inChannelOffset++) {
      int input_channel = group_id * ${De} + inChannelOffset;
      for (int wWOff = 0; wWOff < ${$e[2]}; wWOff++) {
        for (int wHOff = 0; wHOff < ${$e[3]}; wHOff++) {
          ivec2 wOff = ivec2(wWOff * ${Te.dilations[0]}, wHOff * ${Te.dilations[1]});
          ivec2 wLoc = loc - wOff;
          ivec2 wLocIn = wLoc / strides;
          if (
            wLocIn * strides == wLoc &&
            wLocIn.x >= 0 && wLocIn.x < ${Ve[2]} &&
            wLocIn.y >= 0 && wLocIn.y < ${Ve[3]}
          ) {
            float xVal = getX(batch, input_channel, wLocIn.y, wLocIn.x);
            float wVal = getW(input_channel, wOutChannel, wHOff, wWOff);
            value += xVal * wVal;
          }
        }
      }
    }
    ${it}
    ${Me.output} = vec4(value, .0, .0, .0);
  }
`;return Object.assign(Object.assign({},Re),{output:{dims:Xe,type:Ae[0].type,textureType:T.TextureType.unpacked},shaderSource:Ke,hasMain:!0})})(he,pe,be,ge)})})(w,ae,ue),ae),o=(w,ae)=>{const ue=w.kernelShape.slice();if(w.kernelShape.length===0)for(let be=2;be<ae[1].dims.length;++be)ue.push(ae[1].dims[be]);const he=w.pads.slice(),pe=w.outputShape.slice();((be,ve,we,Se,Ae,Re,Te,Ce)=>{const Ve=be.length-2,$e=Ce.length===0;for(let He=0;He<Ve;++He){const De=$e?be[He+2]*Re[He]:Ce[He],Xe=A(be[He+2],Re[He],Ae[He],ve[He],we[He],De);le(Xe,Se,Ae,He,He+Ve),$e&&Ce.push(Re[He]*(be[He+2]-1)+Te[He]+(ve[He]-1)*we[He]+1-Ae[He]-Ae[He+Ve])}})(ae[0].dims,ue,w.dilations,w.autoPad,he,w.strides,w.outputPadding,pe);const ge=Object.assign({},w);return Object.assign(ge,{kernelShape:ue,pads:he,outputShape:pe,cacheKey:w.cacheKey}),ge};e.parseConvTransposeAttributes=w=>{const ae=w.attributes,ue=(0,d.parseInternalActivationAttributes)(ae),he=ae.getString("auto_pad","NOTSET"),pe=ae.getInts("dilations",[1,1]),ge=ae.getInt("group",1),be=ae.getInts("kernel_shape",[]),ve=ae.getInts("output_padding",[0,0]),we=ae.getInts("output_shape",[]),Se=ae.getInts("pads",[0,0,0,0]),Ae=ae.getInts("strides",[1,1]);return(0,r.createAttributeWithCacheKey)(Object.assign({autoPad:he,dilations:pe,group:ge,kernelShape:be,outputPadding:ve,outputShape:we,pads:Se,strides:Ae},ue))};const i=(w,ae)=>{if(!w||w.length!==2&&w.length!==3)throw new Error("Conv requires 2 or 3 inputs");if(w[0].dims.length!==4||w[1].dims.length!==4)throw new Error("currently only support 2-dimensional conv");if(w[0].dims[1]!==w[1].dims[0])throw new Error("FILTER_IN_CHANNEL should be equal to DATA_CHANNEL");const ue=w[1].dims[1]*ae.group;if(w.length===3&&(w[2].dims.length!==1||w[2].dims[0]!==ue))throw new Error("invalid bias");const he=w[0].dims.length-2;if(ae.dilations.length!==he)throw new Error(`dilations should be ${he}D`);if(ae.strides.length!==he)throw new Error(`strides should be ${he}D`);if(ae.pads.length!==2*he)throw new Error(`pads should be ${2*he}D`);if(ae.outputPadding.length!==he)throw new Error(`output_padding should be ${he}D`);if(ae.kernelShape.length!==0&&ae.kernelShape.length!==w[1].dims.length-2)throw new Error("invalid kernel shape");if(ae.outputShape.length!==0&&ae.outputShape.length!==w[0].dims.length-2)throw new Error("invalid output shape");if(w[0].type!=="float32"||w[1].type!=="float32")throw new Error("ConvTranspose input(X,W) should be float tensor");if(w.length===3&&w[2].type!=="float32")throw new Error("ConvTranspose input(bias) should be float tensor")}},8138:(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.parseConvAttributes=e.conv=e.calculateOutputShape=void 0;const r=t(246),u=t(2517),T=t(4770),d=t(1386),A=t(9828),le=t(2823),G=t(3248),B=t(5623);e.calculateOutputShape=(he,pe,ge,be,ve)=>{const we=he[0],Se=he.slice(2),Ae=Se.length,Re=pe[0],Te=pe.slice(2).map(((Ve,$e)=>Ve+(Ve-1)*(ge[$e]-1))),Ce=Se.map(((Ve,$e)=>Ve+be[$e]+be[$e+Ae])).map(((Ve,$e)=>Math.floor((Ve-Te[$e]+ve[$e])/ve[$e])));return[we,Re].concat(...Ce)},e.conv=(he,pe,ge)=>(ue(pe,ge),o(he,pe,ge));const o=(he,pe,ge)=>{const be=ae(ge,pe),ve=he.session.pack,we=be.kernelShape[0]===1&&be.kernelShape[1]===1;return be.group>1?[he.run((0,T.createUnpackedGroupedConvProgramInfoLoader)(he,pe,be),pe)]:we&&ve?[i(he,pe,be)]:ve&&pe[0].dims.length===4&&pe[0].dims[0]===1&&!we?[(0,d.conv2DPacked)(he,pe,be)]:[w(he,pe,be)]},i=(he,pe,ge)=>{const be=pe[0].dims,ve=pe[1].dims,we=(0,e.calculateOutputShape)(be,ve,ge.dilations,ge.pads,ge.strides),Se=he.reshapeUnpacked(pe[0],[be[1],be[2]*be[3]]),Ae=he.reshapeUnpacked(pe[1],[ve[0],ve[1]]),Re=pe.length>2?[Ae,Se,pe[2]]:[Ae,Se],Te=he.run((0,B.createMatmulProgramInfoLoader)(Re,ge),Re);return he.reshapeUnpacked(Te,we)},w=(he,pe,ge)=>{const be=pe[0].dims,ve=pe[1].dims,we=(0,e.calculateOutputShape)(be,ve,ge.dilations,ge.pads,ge.strides),Se=he.run((0,G.createIm2ColProgramInfoLoader)(he,pe[0],pe[1],we,ge),[pe[0]]),Ae=pe.length===3?[Se,pe[1],pe[2]]:[Se,pe[1]];return he.run((0,A.createDotProductProgramInfoLoader)(he,pe,we,ge),Ae)},ae=(he,pe)=>{const ge=he.kernelShape.slice();if(he.kernelShape.length===0)for(let we=2;we<pe[1].dims.length;++we)ge.push(pe[1].dims[we]);const be=he.pads.slice();u.PoolConvUtil.adjustPadsBasedOnAutoPad(pe[0].dims,he.strides,he.dilations,ge,be,he.autoPad);const ve=Object.assign({},he);return Object.assign(ve,{kernelShape:ge,pads:be,cacheKey:he.cacheKey}),ve};e.parseConvAttributes=he=>{const pe=he.attributes,ge=(0,le.parseInternalActivationAttributes)(pe),be=pe.getString("auto_pad","NOTSET"),ve=pe.getInts("dilations",[1,1]),we=pe.getInt("group",1),Se=pe.getInts("kernel_shape",[]),Ae=pe.getInts("pads",[0,0,0,0]),Re=pe.getInts("strides",[1,1]);return(0,r.createAttributeWithCacheKey)(Object.assign({autoPad:be,dilations:ve,group:we,kernelShape:Se,pads:Ae,strides:Re},ge))};const ue=(he,pe)=>{if(!he||he.length!==2&&he.length!==3)throw new Error("Conv requires 2 or 3 inputs");if(he[0].dims.length!==4||he[1].dims.length!==4)throw new Error("currently only support 2-dimensional conv");if(he[0].dims[1]!==he[1].dims[1]*pe.group)throw new Error("FILTER_IN_CHANNEL should be equal to DATA_CHANNEL");if(he.length===3&&(he[2].dims.length!==1||he[1].dims[0]!==he[2].dims[0]))throw new Error("invalid bias");const ge=he[0].dims.length-2;if(pe.dilations.length!==ge)throw new Error(`dilations should be ${ge}D`);if(pe.strides.length!==ge)throw new Error(`strides should be ${ge}D`);if(pe.pads.length!==2*ge)throw new Error(`pads should be ${2*ge}D`);if(pe.kernelShape.length!==0&&pe.kernelShape.length!==he[1].dims.length-2)throw new Error("invalid kernel shape");if(he[0].type!=="float32"||he[1].type!=="float32")throw new Error("Conv input(X,W) should be float tensor");if(he.length===3&&he[2].type!=="float32")throw new Error("Conv input(bias) should be float tensor")}},5193:(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.parseDepthToSpaceAttributes=e.depthToSpace=void 0;const r=t(3738);e.depthToSpace=(T,d,A)=>{u(d);const le=A.blocksize,G=le*le,B=A.mode==="DCR"?[0,3,4,1,5,2]:[0,1,4,2,5,3],o=A.mode==="DCR"?[d[0].dims[0],le,le,d[0].dims[1]/G,d[0].dims[2],d[0].dims[3]]:[d[0].dims[0],d[0].dims[1]/G,le,le,d[0].dims[2],d[0].dims[3]],i=T.reshapeUnpacked(d[0],o),w={perm:B,cacheKey:`${B}`},[ae]=(0,r.transpose)(T,[i],w),ue=[d[0].dims[0],d[0].dims[1]/G,d[0].dims[2]*le,d[0].dims[3]*le];return[T.reshapeUnpacked(ae,ue)]},e.parseDepthToSpaceAttributes=T=>{const d=T.attributes.getInt("blocksize");if(d<1)throw new Error(`blocksize must be >= 1, but got : ${d} for DepthToSpace`);const A=T.attributes.getString("mode","DCR");if(A!=="DCR"&&A!=="CRD")throw new Error(`unrecognized mode: ${A} for DepthToSpace`);return{mode:A,blocksize:d}};const u=T=>{if(T.length!==1)throw new Error(`DepthToSpace expect 1 inputs, but got ${T.length}`);if(T[0].type==="string"||T[0].dims.length!==4)throw new TypeError("DepthToSpace input should be a 4-D numeric tensor")}},9828:(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.createDotProductProgramInfoLoader=void 0;const r=t(2517),u=t(5060),T=t(2039),d=t(2823),A=t(3248);e.createDotProductProgramInfoLoader=(le,G,B,o)=>{const i=((w,ae)=>({name:"ConvDotProduct",inputNames:w?["Im2Col","K","B"]:["Im2Col","K"],inputTypes:w?[T.TextureType.unpacked,T.TextureType.packedLastDimension,T.TextureType.unpacked]:[T.TextureType.unpacked,T.TextureType.packedLastDimension],cacheKey:ae.activationCacheKey}))(G.length>2,o);return Object.assign(Object.assign({},i),{get:()=>((w,ae,ue,he,pe)=>{const ge=ue[0].dims,be=ue[1].dims,ve=[be[0],Math.ceil(ge[1]*be[2]*be[3]/4)],we=(0,A.calculateIm2ColDims)(ge,be,he),[Se,Ae]=w.calculateTextureWidthAndHeight(ve,T.TextureType.packedLastDimension),Re=r.ShapeUtil.computeStrides(we),[Te,Ce]=w.calculateTextureWidthAndHeight(we,T.TextureType.packedLastDimension),Ve=he.length,$e=ue.length<3?"0.0":"_B(b)",He=Math.ceil(ge[1]*be[2]*be[3]/4),{activationFunction:De,applyActivation:Xe}=(0,d.getActivationSnippet)(pe),Me=(0,u.getGlsl)(w.session.backend.glContext.version),je=`
${De}
float process(int indices[${Ve}]) {
  int b[1];
  b[0] = indices[1];
  int im2col[4];
  im2col[0] = indices[0];
  im2col[1] = indices[2];
  im2col[2] = indices[3];
  int im2colOffset = im2col[0] * ${Re[0]} + im2col[1] * ${Re[1]} + im2col[2] * ${Re[2]};
  int kernelOffset = indices[1] * ${ve[1]};
  float value = ${$e};
  for (int i = 0; i < ${He}; ++i) {
    vec2 im2colCoords = offsetToCoords(im2colOffset, ${Te}, ${Ce});
    vec2 kernelCoords = offsetToCoords(kernelOffset, ${Se}, ${Ae});
    value += dot(${Me.texture2D}(Im2Col, im2colCoords), ${Me.texture2D}(K, kernelCoords));
    ++im2colOffset;
    ++kernelOffset;
  }
  ${Xe}
  return value;
}`;return Object.assign(Object.assign({},ae),{output:{dims:he,type:ue[0].type,textureType:T.TextureType.unpacked},shaderSource:je})})(le,i,G,B,o)})}},7992:(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.parseFlattenAttributes=e.flatten=void 0;const r=t(2517);e.flatten=(T,d,A)=>{u(d,A);const le=r.ShapeUtil.flattenShape(d[0].dims,A);return[T.reshapeUnpacked(d[0],le)]},e.parseFlattenAttributes=T=>T.attributes.getInt("axis",1);const u=(T,d)=>{if(!T||T.length!==1)throw new Error("Flatten requires 1 input.");const A=T[0].dims.length;if(A===0)throw new Error("scalar tensor is not supported.");if(d<-A||d>A)throw new Error("Invalid axis");if(T[0].type==="string")throw new Error("string tensor is not supported.")}},2823:(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.parseInternalActivationAttributes=e.getActivationSnippet=void 0;const r=t(2517),u=t(4909);e.getActivationSnippet=function(T){let d;switch(T.activation){case"Relu":d=(0,u.glslRelu)();break;case"Sigmoid":d=(0,u.glslSigmoid)();break;case"Clip":d=(0,u.glslClip)(T.clipMin,T.clipMax);break;default:return{activationFunction:"",applyActivation:""}}const A=d.name;return{activationFunction:d.body,applyActivation:`value = ${A}_(value);`}},e.parseInternalActivationAttributes=T=>{const d=T.getString("activation","");if(d==="Clip"){const[A,le]=T.getFloats("activation_params",[r.MIN_CLIP,r.MAX_CLIP]);return{activation:d,clipMax:le,clipMin:A,activationCacheKey:`${d}:${A},${le}`}}return{activation:d,activationCacheKey:d}}},1253:(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.parseGatherAttributes=e.gather=void 0;const r=t(246),u=t(782),T=t(2517),d=t(2039);e.gather=(B,o,i)=>(G(o,i.axis),[B.run(le(B,o,i),o)]),e.parseGatherAttributes=B=>(0,r.createAttributeWithCacheKey)({axis:B.attributes.getInt("axis",0)});const A={name:"Gather",inputNames:["A","B"],inputTypes:[d.TextureType.unpacked,d.TextureType.unpacked]},le=(B,o,i)=>{const w=Object.assign(Object.assign({},A),{cacheHint:i.cacheKey});return Object.assign(Object.assign({},w),{get:()=>((ae,ue,he,pe)=>{const ge=he[0].dims.slice(),be=he[1].dims.slice(),ve=new Array(ge.length+be.length-1);pe=T.ShapeUtil.normalizeAxis(pe,ge.length);const we=[];for(let Ae=0;Ae<ve.length;Ae++)Ae<pe?(ve[Ae]=ge[Ae],we.push(`inputIdx[${Ae}] = outputIdx[${Ae}];`)):Ae<pe+be.length?(ve[Ae]=be[Ae-pe],we.push(`indexDataIdx[${Ae-pe}] = outputIdx[${Ae}];`)):(ve[Ae]=ge[Ae-be.length+1],we.push(`inputIdx[${Ae-be.length+1}] = outputIdx[${Ae}];`));const Se=`
      float process(int outputIdx[${ve.length||1}]) {
        int inputIdx[${ge.length}];
        int indexDataIdx[${be.length||1}];
        indexDataIdx[0] = 0;
        ${we.join(`
        `)}
        int idx = int(_B(indexDataIdx));
        inputIdx[${pe}] = idx < 0 ? idx + ${ge[pe]} : idx;
        return _A(inputIdx);
      }`;return Object.assign(Object.assign({},ue),{output:{dims:ve,type:he[0].type,textureType:d.TextureType.unpacked},shaderSource:Se})})(0,w,o,i.axis)})},G=(B,o)=>{if(!B||B.length!==2)throw new Error("Gather requires 2 inputs.");const i=B[0].dims.length;if(i<1)throw new Error("Invalid input shape.");if(o<-i||o>i-1)throw new Error("Invalid axis.");if(u.NUMBER_TYPES.indexOf(B[0].type)===-1)throw new Error("Invaid input type.");if(B[1].type!=="int32"&&B[1].type!=="int16")throw new Error("Invaid input type.")}},4776:(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.parseGemmAttributesV11=e.parseGemmAttributesV7=e.gemm=void 0;const r=t(246),u=t(2517),T=t(2039);e.gemm=(B,o,i)=>(G(o,i),[B.run(A(o,i),o)]);const d=(B,o)=>{const i=B.attributes.getInt("transA",0)!==0,w=B.attributes.getInt("transB",0)!==0,ae=B.attributes.getFloat("alpha",1),ue=B.attributes.getFloat("beta",1);return(0,r.createAttributeWithCacheKey)({transA:i,transB:w,alpha:ae,beta:ue,isOptionalC:o})};e.parseGemmAttributesV7=B=>d(B,!1),e.parseGemmAttributesV11=B=>d(B,!0);const A=(B,o)=>{const i={name:"Gemm",inputNames:B.length===3?["A","B","C"]:["A","B"],inputTypes:B.length===3?[T.TextureType.unpacked,T.TextureType.unpacked,T.TextureType.unpacked]:[T.TextureType.unpacked,T.TextureType.unpacked],key:o.cacheKey};return Object.assign(Object.assign({},i),{get:()=>le(i,B,o)})},le=(B,o,i)=>{const w=o[0].dims.slice(),ae=o[1].dims.slice(),[ue,he]=u.GemmUtil.getShapeOfGemmResult(w,i.transA,ae,i.transB,o.length===3?o[2].dims:void 0),pe=[ue,he];if(!pe)throw new Error("Can't use gemm on the given tensors");let ge=w[w.length-1],be="";i.transA&&(ge=w[0]),i.transA&&i.transB?be="value += _A_T(a) * _B_T(b);":i.transA&&!i.transB?be="value += _A_T(a) * _B(b);":!i.transA&&i.transB?be="value += _A(a) * _B_T(b);":i.transA||i.transB||(be="value += _A(a) * _B(b);");const ve=pe.length,we=`
      float process(int indices[${ve}]) {
          int a[${ve}];
          int b[${ve}];
          ${o.length===3?`int c[${o[2].dims.length}];`:""}

          copyVec(indices, a);
          copyVec(indices, b);
          ${o.length===3?"bcastIndices_C(indices, c);":""}

          float value = 0.0;
          for (int k=0; k<${ge}; ++k) {
              a[${ve-1}] = k;
              b[${ve-2}] = k;
              ${be}
          }

          value = value * alpha;
          ${o.length===3?"value += beta * _C(c);":""}
          return value;
      }`;return Object.assign(Object.assign({},B),{output:{dims:pe,type:o[0].type,textureType:T.TextureType.unpacked},variables:[{name:"alpha",type:"float",data:i.alpha},{name:"beta",type:"float",data:i.beta}],shaderSource:we})},G=(B,o)=>{if(!B)throw new Error("Input is missing");if(o.isOptionalC&&(B.length<2||B.length>3))throw new Error("Invaid input shape.");if(!o.isOptionalC&&B.length!==3)throw new Error("Gemm requires 3 inputs");if(B.length===3&&B[2].dims.length!==1&&B[2].dims.length!==2)throw new Error("Invalid input shape of C");if(B[0].type!=="float32"&&B[0].type!=="float64"||B[1].type!=="float32"&&B[1].type!=="float64"||B.length===3&&B[2].type!=="float32"&&B[2].type!=="float64")throw new Error("Invalid input type.");if(B[0].type!==B[1].type||B.length===3&&B[0].type!==B[2].type)throw new Error("Input types are mismatched")}},8555:(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.createPackedIm2ColProgramInfoLoader=void 0;const r=t(5060),u=t(2039),T=t(2827);e.createPackedIm2ColProgramInfoLoader=(d,A,le,G,B)=>{const o=(i=B.cacheKey,{name:"Im2Col (packed)",inputNames:["A"],inputTypes:[u.TextureType.packed],cacheHint:i});var i;return Object.assign(Object.assign({},o),{get:()=>((w,ae,ue,he,pe,ge)=>{const be=ue.dims,ve=he.dims,we=pe.length,Se=[ve[1]*ve[2]*ve[3],pe[2]*pe[3]],Ae=ve[2]*ve[3],Re=(0,T.unpackFromChannel)(),Te=(0,r.getGlsl)(w.session.backend.glContext.version);let Ce="";for(let $e=0;$e<=1;$e++)for(let He=0;He<=1;He++)Ce+=`
            blockIndex = rc.x + ${He};
            pos = rc.y + ${$e};

            if(blockIndex < ${Se[1]} && pos < ${Se[0]}) {
              offsetY = int(blockIndex / (${pe[we-1]})) * ${ge.strides[0]} -
                ${ge.pads[0]};
              d0 = offsetY + ${ge.dilations[0]} * (imod(pos, ${Ae}) / ${ve[2]});

              if(d0 < ${be[2]} && d0 >= 0) {
                offsetX = imod(blockIndex, ${pe[we-1]}) * ${ge.strides[1]} -
                  ${ge.pads[1]};
                d1 = offsetX + ${ge.dilations[1]} * imod(imod(pos, ${Ae}), ${ve[2]});

                if(d1 < ${be[3]} && d1 >= 0) {

                  ch = int(float(pos)/ ${Ae}.);
                    innerDims = vec2(d0, d1);
                    result[${2*$e+He}] = getChannel(
                      getA(0, ch, int(innerDims.x),
                      int(innerDims.y)), innerDims);
                }
              }
            }

          `;const Ve=`
      ${Re}

      void main() {
        ivec2 rc = getOutputCoords();
          vec4 result = vec4(0.0);
          int blockIndex, pos, offsetY, d0, offsetX, d1, ch;
          vec2 innerDims;
          ${Ce}
          ${Te.output} = result;
      }
            `;return Object.assign(Object.assign({},ae),{output:{dims:Se,type:ue.type,textureType:u.TextureType.packed},shaderSource:Ve,hasMain:!0})})(d,o,A,le,G,B)})}},3248:(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.calculateIm2ColDims=e.createIm2ColProgramInfoLoader=void 0;const r=t(2039);e.createIm2ColProgramInfoLoader=(u,T,d,A,le)=>{const G=(B=le.cacheKey,{name:"Im2Col",inputNames:["X"],inputTypes:[r.TextureType.unpacked],cacheHint:B});var B;return Object.assign(Object.assign({},G),{get:()=>((o,i,w,ae,ue,he)=>{const pe=w.dims,ge=ae.dims,be=ue.length,ve=(0,e.calculateIm2ColDims)(pe,ge,ue,4),we=`
        const int XC = ${pe[1]};
        const int XH = ${pe[2]};
        const int XW = ${pe[3]};
        const int KH = ${he.kernelShape[0]};
        const int KW = ${he.kernelShape[1]};
        const int dilationH = ${he.dilations[0]};
        const int dilationW = ${he.dilations[1]};
        const int strideH = ${he.strides[0]};
        const int strideW = ${he.strides[1]};
        const int padH = ${he.pads[0]};
        const int padW = ${he.pads[1]};
        const int KHKW = KH*KW;
        const int XCKHKW = XC * KHKW;
        const int outputChannels = 4;
        vec4 process(int indices[${be}]) {
          int b  = indices[0]; // batch size
          int oh = indices[1] * strideH - padH; //output height
          int ow = indices[2] * strideW - padW; //output width
          int p = indices[3] * outputChannels; //patch
          vec4 value = vec4(0.0);
          for(int i=0; i < outputChannels; ++i) {
            if(p < XCKHKW) {
              int patchC = p / KHKW;
              int patchH = (p - patchC*KHKW) / KW;
              int patchW = (p - patchC*KHKW) - patchH * KW;
              int xh2 = oh + patchH * dilationH;
              int xw2 = ow + patchW * dilationW;
              int x[${pe.length}];
              x[0] = b;
              x[1] = patchC;
              x[2] = xh2;
              x[3] = xw2;
              if(xh2 >= 0 &&
                  xh2 < XH &&
                  xw2 >= 0 &&
                  xw2 < XW) {
                value[i] = _X(x);
              }
            }
            ++p;
          }
          return value;
        }
        `;return Object.assign(Object.assign({},i),{output:{dims:ve,type:w.type,textureType:r.TextureType.packedLastDimension},shaderSource:we})})(0,G,T,d,A,le)})},e.calculateIm2ColDims=(u,T,d,A=4)=>[d[0],d[2],d[3],Math.ceil(u[1]*T[2]*T[3]/A)]},6572:(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.parseImageScalerAttributes=e.imageScaler=void 0;const r=t(246),u=t(2039);e.imageScaler=(G,B,o)=>(le(B),[G.run(d(G,B,o),B)]),e.parseImageScalerAttributes=G=>{const B=G.attributes.getFloat("scale"),o=G.attributes.getFloats("bias");return(0,r.createAttributeWithCacheKey)({scale:B,bias:o})};const T={name:"ImageScaler",inputNames:["X"],inputTypes:[u.TextureType.unpacked]},d=(G,B,o)=>{const i=Object.assign(Object.assign({},T),{cacheHint:o.cacheKey});return Object.assign(Object.assign({},i),{get:()=>((w,ae,ue,he)=>{const pe=ue[0].dims.slice(),ge=pe.length,be=`
      ${A(he.bias.length)}
      float process(int indices[${ge}]) {
        return _X(indices) * scale + getBias(bias, indices[1]);
      }`;return Object.assign(Object.assign({},ae),{output:{dims:pe,type:ue[0].type,textureType:u.TextureType.unpacked},variables:[{name:"bias",type:"float",arrayLength:he.bias.length,data:he.bias},{name:"scale",type:"float",data:he.scale}],shaderSource:be})})(0,i,B,o)})},A=G=>{const B=[`float getBias(float bias[${G}], int channel) {`];for(let o=0;o<G;++o)o===0?B.push(`	if (channel == ${o}) { return bias[${o}]; }`):o===G-1?B.push(`	else { return bias[${o}]; }`):B.push(`	else if (channel == ${o}) { return bias[${o}]; }`);return B.push("	}"),B.join(`
`)},le=G=>{if(!G||G.length!==1)throw new Error("ImageScaler requires 1 input.");if(G[0].dims.length!==4)throw new Error("Invalid input shape.");if(G[0].type!=="float32"&&G[0].type!=="float64")throw new Error("Invalid input type.")}},3346:(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.parseInstanceNormalizationAttributes=e.instanceNormalization=void 0;const r=t(5060),u=t(2039);e.instanceNormalization=(B,o,i)=>{G(o);const w=B.run(d(o[0]),o);return[B.run(le(B,o[0],i,w.dims),[o[0],w,o[1],o[2]])]},e.parseInstanceNormalizationAttributes=B=>B.attributes.getFloat("epsilon",1e-5);const T={name:"InstanceNormalization_MeanAndVariance",inputNames:["X"],inputTypes:[u.TextureType.unpacked]},d=B=>Object.assign(Object.assign({},T),{get:()=>((o,i)=>{const w=i.dims.slice(),ae=w[1],ue=w[2]*w[3],he=[w[0],ae],pe=`
      vec4 process(int[2] indices) {
        vec4 v = vec4(0.0);
        int a[4];
        a[0] = indices[0];
        a[1] = indices[1];
        float temp = 0.0;
        for(int a2=0; a2<${w[2]}; a2++) {
          a[2] = a2;
          for(int a3=0; a3<${w[3]}; a3++) {
            a[3] = a3;
            float x = _X(a);
            temp += x;
          }
        }
        float mean = temp / float(${ue});
        temp = 0.0;
        for(int a2=0; a2<${w[2]}; a2++) {
          a[2] = a2;
          for(int a3=0; a3<${w[3]}; a3++) {
            a[3] = a3;
            float x = _X(a);
            temp += (x - mean) * (x - mean);
          }
        }
        v.r = mean;
        v.g = temp / float(${ue});

        return v;
      }`;return Object.assign(Object.assign({},o),{output:{dims:he,type:i.type,textureType:u.TextureType.packedLastDimension},shaderSource:pe})})(T,B)}),A={name:"InstanceNormalization_ComputeOutput",inputNames:["X","MeanAndVariance","Scale","B"],inputTypes:[u.TextureType.unpacked,u.TextureType.packedLastDimension,u.TextureType.unpacked,u.TextureType.unpacked]},le=(B,o,i,w)=>{const ae=Object.assign(Object.assign({},A),{cacheHint:`${i}`});return Object.assign(Object.assign({},ae),{get:()=>((ue,he,pe,ge,be)=>{const ve=(0,r.getGlsl)(ue.session.backend.glContext.version),[we,Se]=ue.calculateTextureWidthAndHeight(be,u.TextureType.packedLastDimension),[Ae,Re]=[we/4,Se],Te=`
      vec4 get_MeanAndVariance(int[2] mv) {
        int offset = indicesToOffset_MeanAndVariance(mv);
        vec2 coords = offsetToCoords(offset, ${Ae}, ${Re});
        return ${ve.texture2D}(MeanAndVariance, coords);
      }

      float process(int[4] indices) {
        int mv[2];
        mv[0] = indices[0];
        mv[1] = indices[1];
        vec4 mean_and_variance = get_MeanAndVariance(mv);
        float mean = mean_and_variance.r;
        float variance = mean_and_variance.g;

        int sb[1];
        sb[0] = indices[1];
        float scale = _Scale(sb);
        float b = _B(sb);

        return scale * (_X(indices) - mean) / sqrt(variance + epsilon) + b;
      }`;return Object.assign(Object.assign({},he),{output:{dims:pe.dims,type:pe.type,textureType:u.TextureType.unpacked},variables:[{name:"epsilon",type:"float",data:ge}],shaderSource:Te})})(B,ae,o,i,w)})},G=B=>{if(!B||B.length!==3)throw new Error("InstanceNormalization requires 3 inputs.");const o=B[0],i=B[1],w=B[2];if(o.dims.length<3||i.dims.length!==1||w.dims.length!==1)throw new Error("Invalid input shape.");if(i.dims[0]!==o.dims[1]||w.dims[0]!==o.dims[1])throw new Error("Input shapes are mismatched.");if(o.type!=="float32"&&o.type!=="float64"||i.type!=="float32"&&i.type!=="float64"||w.type!=="float32"&&w.type!=="float64")throw new Error("Invalid input type.");if(B[0].dims.length!==4)throw new Error("Only support 4-D input shape.")}},708:(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.createPackedMatmulProgramInfoLoader=void 0;const r=t(2517),u=t(5060),T=t(2039),d=t(9390),A=t(2823),le=t(5623);e.createPackedMatmulProgramInfoLoader=(G,B,o)=>{const i=(w=B.length>2,ae=o.activationCacheKey,{name:"MatMul (packed)",inputNames:w?["A","B","Bias"]:["A","B"],inputTypes:w?[T.TextureType.packed,T.TextureType.packed,T.TextureType.packed]:[T.TextureType.packed,T.TextureType.packed],cacheHint:ae});var w,ae;return Object.assign(Object.assign({},i),{get:()=>((ue,he,pe,ge)=>{const be=pe.length>2,ve=be?"value += getBiasForMatmul();":"",we=pe[0].dims,Se=pe[1].dims,Ae=r.BroadcastUtil.calcShape(we,Se,!0),Re=!r.ShapeUtil.areEqual(pe[0].dims,pe[1].dims);if(!Ae)throw new Error("Can't use matmul on the given tensors");const Te=we[we.length-1],Ce=Math.ceil(Te/2),Ve=we.length,$e=Se.length,He=(0,u.getGlsl)(ue.session.backend.glContext.version),De=(0,d.getCoordsDataType)(Ae.length),Xe=Ae.length,Me=(0,d.getGlChannels)(),{activationFunction:je,applyActivation:it}=(0,A.getActivationSnippet)(ge),Ke=be?`${(0,le.getBiasForMatmul)(De,Me,pe[2].dims,Ae,!0)}`:"",qe=Re?`${(function(at,tt,Tt,vt){let Dt=[],Pt=[];const jt=Tt[0].dims,tn=Tt[1].dims,Sn=jt.length,fn=tn.length,Jt=vt.length,Vn=Jt-Sn,qn=Jt-fn;Dt=jt.map(((Ut,sn)=>`coords.${tt[sn+Vn]}`)),Dt[Sn-1]="i*2",Dt.join(", "),Pt=tn.map(((Ut,sn)=>`coords.${tt[sn+qn]}`)),Pt[fn-2]="i*2",Pt.join(", ");const Yn=r.BroadcastUtil.getBroadcastDims(jt,vt),nr=r.BroadcastUtil.getBroadcastDims(tn,vt),yt=Yn.map((Ut=>`coords.${tt[Ut+Vn]} = 0;`)).join(`
`),$t=nr.map((Ut=>`coords.${tt[Ut+qn]} = 0;`)).join(`
`),Kt=`int lastDim = coords.${tt[Jt-1]};
  coords.${tt[Jt-1]} = coords.${tt[Jt-2]};
  coords.${tt[Jt-2]} = lastDim;`;return`
vec4 getAAtOutCoordsMatmul(int i) {
  ${at} coords = getOutputCoords();
  ${Kt}
  ${yt}
  vec4 outputValue = getA(${Dt});
  return outputValue;
}

vec4 getBAtOutCoordsMatmul(int i) {
  ${at} coords = getOutputCoords();
  ${Kt}
  ${$t}
  vec4 outputValue = getB(${Pt});
  return outputValue;
}`})(De,Me,pe,Ae)}`:"",Pe=Re?"getAAtOutCoordsMatmul(i)":`getA(${(function(at,tt){let Tt="";for(let vt=0;vt<tt-2;vt++)Tt+=`rc.${at[vt]}, `;return Tt+=`rc.${at[tt-2]}, i*2`,Tt})(Me,Ve)})`,et=Re?"getBAtOutCoordsMatmul(i)":`getB(${(function(at,tt){let Tt="";for(let vt=0;vt<tt-2;vt++)Tt+=`rc.${at[vt]}, `;return Tt+=`i*2, rc.${at[tt-1]}`,Tt})(Me,$e)})`,Je=`
            ${qe}
            ${Ke}
            ${je}
            void main() {
              ${Re?"":`${De} rc =
          getOutputCoords(); int lastDim = rc.${Me[Xe-1]}; rc.${Me[Xe-1]} =
          rc.${Me[Xe-2]}; rc.${Me[Xe-2]} = lastDim;
      `}

              vec4 value = vec4(0);
              for (int i = 0; i < ${Ce}; i++) {
                vec4 a = ${Pe};
                vec4 b = ${et};

                value += (a.rrbb * b.rgrg);
                value += (a.ggaa * b.baba);
              }
              ${ve}
              ${it}
              ${He.output} = value;
            }`;return Object.assign(Object.assign({},he),{output:{dims:Ae,type:pe[0].type,textureType:T.TextureType.packed},shaderSource:Je,hasMain:!0})})(G,i,B,o)})}},5623:(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.getBiasForMatmul=e.createMatmulProgramInfoLoader=e.parseMatMulAttributes=e.matMul=void 0;const r=t(2517),u=t(2039),T=t(9390),d=t(2823),A=t(708);function le(o,i){const w=(ae=o.length>2,ue=i.activationCacheKey,{name:"MatMul",inputNames:ae?["A","B","Bias"]:["A","B"],inputTypes:ae?[u.TextureType.unpacked,u.TextureType.unpacked,u.TextureType.unpacked]:[u.TextureType.unpacked,u.TextureType.unpacked],cacheHint:ue});var ae,ue;return Object.assign(Object.assign({},w),{get:()=>(function(he,pe,ge){const be=pe[0].dims,ve=pe[1].dims,we=r.BroadcastUtil.calcShape(be,ve,!0);if(!we)throw new Error("Can't use matmul on the given tensors");const Se=(0,T.getCoordsDataType)(we.length),Ae=(0,T.getGlChannels)(),{activationFunction:Re,applyActivation:Te}=(0,d.getActivationSnippet)(ge),Ce=pe.length>2,Ve=Ce?"value += getBiasForMatmul();":"",$e=Ce?`${B(Se,Ae,pe[2].dims,we,!1)}`:"",He=we.length,De=be.length,Xe=ve.length,Me=`
    ${Re}
    ${$e}
    float process(int indices[${He}]) {
        int a[${De}];
        int b[${Xe}];
        bcastMatmulIndices_A(indices, a);
        bcastMatmulIndices_B(indices, b);

        float value;
        for (int k=0; k<${be[be.length-1]}; ++k) {
            a[${De-1}] = k;
            b[${Xe-2}] = k;
            value += _A(a) * _B(b);
        }
        ${Ve}
        ${Te}
        return value;
    }`;return Object.assign(Object.assign({},he),{output:{dims:we,type:pe[0].type,textureType:u.TextureType.unpacked},shaderSource:Me})})(w,o,i)})}e.matMul=(o,i,w)=>(G(i),o.session.pack?[o.run((0,A.createPackedMatmulProgramInfoLoader)(o,i,w),i)]:[o.run(le(i,w),i)]),e.parseMatMulAttributes=o=>(0,d.parseInternalActivationAttributes)(o.attributes),e.createMatmulProgramInfoLoader=le;const G=o=>{if(!o||o.length!==2)throw new Error("MatMul requires 2 inputs.");if(o[0].dims[o[0].dims.length-1]!==o[1].dims[o[1].dims.length-2])throw new Error("shared dimension does not match.");if(o[0].type!=="float32"&&o[0].type!=="float64"||o[1].type!=="float32"&&o[1].type!=="float64")throw new Error("inputs should be float type");if(o[0].type!==o[1].type)throw new Error("inputs types should match")};function B(o,i,w,ae,ue){let he="";const pe=w.length,ge=ae.length,be=ge-pe;he=ge<2&&pe>0?"coords":w.map(((Se,Ae)=>`coords.${i[Ae+be]}`)).join(", ");const ve=r.BroadcastUtil.getBroadcastDims(w,ae).map((Se=>`coords.${i[Se+be]} = 0;`)).join(`
`);let we="vec4(outputValue.xx, outputValue.yy)";return r.ShapeUtil.size(w)===1&&(we="vec4(outputValue.x)"),ue?`
vec4 getBiasForMatmul() {
  ${o} coords = getOutputCoords();
  ${ve}
  vec4 outputValue = getBias(${he});
  return ${we};
}`:`
float getBiasForMatmul() {
  ${o} coords = getOutputCoords();
  ${ve}
  return getBias(coords.x);
}`}e.getBiasForMatmul=B},2403:(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.createPackProgramInfoLoader=void 0;const r=t(5060),u=t(2039),T=t(9390),d=t(2827),A={name:"pack",inputNames:["A"],inputTypes:[u.TextureType.unpackedReversed]};e.createPackProgramInfoLoader=(le,G)=>Object.assign(Object.assign({},A),{get:()=>((B,o)=>{const i=(0,r.getGlsl)(B.session.backend.glContext.version),w=o.dims,ae=w.length,ue=o.dims.length,he=(0,T.getCoordsDataType)(ue),pe=(0,d.getChannels)("rc",ue),ge=(be=ue,ve=pe,we=w[w.length-2],Se=w[w.length-1],be===0||be===1?"":`
    int r = ${ve[be-2]};
    int c = ${ve[be-1]};
    int rp1 = ${ve[be-2]} + 1;
    int cp1 = ${ve[be-1]} + 1;
    bool rEdge = rp1 >= ${Se};
    bool cEdge = cp1 >= ${we};
    `);var be,ve,we,Se;let Ae;Ae=ae===0?[1,1]:ae===1?[w[0],1]:[w[ue-1],w[ue-2]];const Re=(function(Ve,$e,He){if(Ve===0)return"false";if(Ve===1)return`rc > ${$e[0]}`;let De="";for(let Xe=Ve-2;Xe<Ve;Xe++)De+=`${He[Xe]} >= ${$e[Xe-Ve+2]}`,Xe<Ve-1&&(De+="||");return De})(ue,Ae,pe),Te=(function(Ve,$e){const He=Ve.length;if(He===0)return"getA(), 0, 0, 0";if(He===1)return`getA(rc),
            rc + 1 >= ${Ve[0]} ? 0. : getA(rc + 1),
            0, 0`;let De="";if(He>2)for(let Xe=0;Xe<He-2;++Xe)De+=`${$e[Xe]},`;return`getA(${De}r, c),
          rEdge ? 0. : getA(${De}rp1, c),
          cEdge ? 0. : getA(${De}r, cp1),
          rEdge || cEdge ? 0. : getA(${De}rp1, cp1)`})(w,pe),Ce=`
        void main() {
          ${he} rc = getOutputCoords();

          if(${Re}) {
            ${i.output} = vec4(0);
          } else {
            ${ge}

            ${i.output} = vec4(${Te});
          }
        }
      `;return Object.assign(Object.assign({},A),{hasMain:!0,output:{dims:o.dims,type:o.type,textureType:u.TextureType.packed},shaderSource:Ce})})(le,G)})},2827:(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.unpackFromChannel=e.getChannels=e.getVecChannels=void 0;const r=t(9390);function u(T,d){return(0,r.getGlChannels)(d).map((A=>`${T}.${A}`))}e.getVecChannels=u,e.getChannels=function(T,d){return d===1?[T]:u(T,d)},e.unpackFromChannel=function(){return`
    float getChannel(vec4 frag, int dim) {
      int modCoord = imod(dim, 2);
      return modCoord == 0 ? frag.r : frag.g;
    }

    float getChannel(vec4 frag, vec2 innerDims) {
      vec2 modCoord = mod(innerDims, 2.);
      return modCoord.x == 0. ?
        (modCoord.y == 0. ? frag.r : frag.g) :
        (modCoord.y == 0. ? frag.b : frag.a);
    }
  `}},2870:(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.parsePadAttributesV11=e.padV11=e.parsePadAttributesV2=e.padV2=void 0;const r=t(246),u=t(2517),T=t(5060),d=t(2039),A={name:"Pad",inputNames:["A"],inputTypes:[d.TextureType.unpacked]};e.padV2=(he,pe,ge)=>(B(pe),[he.run(Object.assign(Object.assign({},A),{cacheHint:ge.cacheKey,get:()=>G(he,pe[0],ge)}),pe)]),e.parsePadAttributesV2=he=>{const pe=he.attributes.getString("mode","constant"),ge=he.attributes.getFloat("value",0),be=he.attributes.getInts("pads");return(0,r.createAttributeWithCacheKey)({mode:pe,value:ge,pads:be})},e.padV11=(he,pe,ge)=>{o(pe);const be=le(he,pe,ge);return(0,e.padV2)(he,[pe[0]],be)},e.parsePadAttributesV11=he=>he.attributes.getString("mode","constant");const le=(he,pe,ge)=>{if(!he.session.isInitializer(pe[1].dataId)||pe.length>=3&&!he.session.isInitializer(pe[2].dataId))throw new Error("dynamic pad attributes are not allowed");const be=Array.from(pe[1].integerData),ve=pe.length>=3?pe[2].floatData[0]:0;return(0,r.createAttributeWithCacheKey)({mode:ge,pads:be,value:ve})},G=(he,pe,ge)=>{const be=u.ShapeUtil.padShape(pe.dims.slice(),ge.pads),ve=be.length,we=`
      ${i(he,pe,ge)}
      float process(int[${ve}] indices) {
          return padA(indices);
      }`;return{name:"Pad",inputNames:["A"],inputTypes:[d.TextureType.unpacked],output:{dims:be,type:pe.type,textureType:d.TextureType.unpacked},shaderSource:we}},B=he=>{if(!he||he.length!==1)throw new Error("Pad requires 1 input");if(he[0].type!=="float32"&&he[0].type!=="float64")throw new Error("Invalid input type.")},o=he=>{if(!he||he.length!==2&&he.length!==3)throw new Error("Pad requires 2 or 3 inputs");if(he[1].type!=="int32")throw new Error("Invalid input type.");if(he.length>=3&&he[2].type==="string")throw new Error("Invalid input type.")},i=(he,pe,ge)=>{const be=(0,T.getGlsl)(he.session.backend.glContext.version),[ve,we]=he.calculateTextureWidthAndHeight(pe.dims,d.TextureType.unpacked),Se=u.ShapeUtil.computeStrides(pe.dims);switch(ge.mode){case"constant":return w(be,pe.dims,Se,ve,we,ge.pads,ge.value);case"reflect":return ae(be,pe.dims,Se,ve,we,ge.pads);case"edge":return ue(be,pe.dims,Se,ve,we,ge.pads);default:throw new Error("Invalid mode")}},w=(he,pe,ge,be,ve,we,Se)=>{const Ae=pe.length;let Re="";for(let Te=Ae-1;Te>=0;--Te)Re+=`
        k = m[${Te}] - ${we[Te]};
        if (k < 0)  return constant;
        if (k >= ${pe[Te]}) return constant;
        offset += k * ${ge[Te]};
        `;return`
      float padA(int m[${Ae}]) {
        const float constant = float(${Se});
        int offset = 0;
        int k = 0;
        ${Re}
        vec2 coords = offsetToCoords(offset, ${be}, ${ve});
        float value = getColorAsFloat(${he.texture2D}(A, coords));
        return value;
      }
      `},ae=(he,pe,ge,be,ve,we)=>{const Se=pe.length;let Ae="";for(let Re=Se-1;Re>=0;--Re)Ae+=`
        k = m[${Re}] - ${we[Re]};
        if (k < 0) { k = -k; }
        {
          const int _2n_1 = ${2*(pe[Re]-1)};
          k = int( mod( float(k), float(_2n_1) ) ) ;
          if(k >= ${pe[Re]}) { k = _2n_1 - k; }
        }
        offset += k * ${ge[Re]};
        `;return`
      float padA(int m[${Se}]) {
        int offset = 0;
        int k = 0;
        ${Ae}
        vec2 coords = offsetToCoords(offset, ${be}, ${ve});
        float value = getColorAsFloat(${he.texture2D}(A, coords));
        return value;
      }
      `},ue=(he,pe,ge,be,ve,we)=>{const Se=pe.length;let Ae="";for(let Re=Se-1;Re>=0;--Re)Ae+=`
        k = m[${Re}] - ${we[Re]};
        if (k < 0)  k = 0;
        if (k >= ${pe[Re]}) k = ${pe[Re]-1};
        offset += k * ${ge[Re]};
      `;return`
      float padA(int m[${Se}]) {
        int offset = 0;
        int k = 0;
        ${Ae}
        vec2 coords = offsetToCoords(offset, ${be}, ${ve});
        float value = getColorAsFloat(${he.texture2D}(A, coords));
        return value;
      }
      `}},2143:(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.globalMaxPool=e.parseMaxPoolAttributes=e.maxPool=e.parseGlobalAveragePoolAttributes=e.globalAveragePool=e.parseAveragePoolAttributes=e.averagePool=void 0;const r=t(246),u=t(2517),T=t(2039);e.averagePool=(ue,he,pe)=>{o(he);const ge={name:"AveragePool",inputNames:["X"],inputTypes:[T.TextureType.unpacked],cacheHint:pe.cacheKey};return[ue.run(Object.assign(Object.assign({},ge),{get:()=>d(he,ge,!1,pe)}),he)]},e.parseAveragePoolAttributes=ue=>{const he=ue.attributes.getString("auto_pad","NOTSET"),pe=ue.attributes.getInt("ceil_mode",0),ge=ue.attributes.getInt("count_include_pad",0)!==0,be=ue.attributes.getInts("kernel_shape"),ve=ue.attributes.getInts("strides",[]),we=ue.attributes.getInts("pads",[]);if(pe!==0)throw new Error("using ceil() in shape computation is not yet supported for AveragePool");return(0,r.createAttributeWithCacheKey)({autoPad:he,ceilMode:pe,countIncludePad:ge,kernelShape:be,strides:ve,pads:we})};const d=(ue,he,pe,ge)=>{const[be,ve]=le(ue,ge,pe),we=u.ShapeUtil.size(be.kernelShape);let Se="";be.countIncludePad?Se+=`value /= float(${we});`:Se+=`value /= float(${we} - pad);`;const Ae=`
        ${i(ue[0].dims,be,"value += _X(x);",Se,"0.0")}
      `;return Object.assign(Object.assign({},he),{output:{dims:ve,type:ue[0].type,textureType:T.TextureType.unpacked},shaderSource:Ae})};e.globalAveragePool=(ue,he,pe)=>{o(he);const ge={name:"GlobalAveragePool",inputNames:["X"],inputTypes:[T.TextureType.unpacked],cacheHint:`${pe.countIncludePad}`};return[ue.run(Object.assign(Object.assign({},ge),{get:()=>d(he,ge,!0,pe)}),he)]},e.parseGlobalAveragePoolAttributes=ue=>{const he=ue.attributes.getInt("count_include_pad",0)!==0;return(0,r.createAttributeWithCacheKey)({autoPad:"",ceilMode:0,countIncludePad:he,kernelShape:[],strides:[],pads:[]})},e.maxPool=(ue,he,pe)=>{o(he);const ge={name:"MaxPool",inputNames:["X"],inputTypes:[T.TextureType.unpacked],cacheHint:pe.cacheKey};return[ue.run(Object.assign(Object.assign({},ge),{get:()=>A(he,ge,!1,pe)}),he)]},e.parseMaxPoolAttributes=ue=>{const he=ue.attributes.getString("auto_pad","NOTSET"),pe=ue.attributes.getInt("ceil_mode",0),ge=ue.attributes.getInts("kernel_shape"),be=ue.attributes.getInts("strides",[]),ve=ue.attributes.getInts("pads",[]),we=ue.attributes.getInt("storage_order",0),Se=ue.attributes.getInts("dilations",[]);if(we!==0)throw new Error("column major storage order is not yet supported for MaxPool");if(pe!==0)throw new Error("using ceil() in shape computation is not yet supported for MaxPool");return(0,r.createAttributeWithCacheKey)({autoPad:he,ceilMode:pe,countIncludePad:!1,kernelShape:ge,strides:be,pads:ve,storageOrder:we,dilations:Se})};const A=(ue,he,pe,ge)=>{const[be,ve]=le(ue,ge,pe),we=`
      ${i(ue[0].dims,be,`
      value = max(_X(x), value);
    `,"","-1e5")}
    `;return Object.assign(Object.assign({},he),{output:{dims:ve,type:ue[0].type,textureType:T.TextureType.unpacked},shaderSource:we})},le=(ue,he,pe)=>{const ge=ue[0].dims.slice(),be=Object.hasOwnProperty.call(he,"dilations"),ve=he.kernelShape.slice(),we=he.strides.slice(),Se=be?he.dilations.slice():[],Ae=he.pads.slice();u.PoolConvUtil.adjustPoolAttributes(pe,ge,ve,we,Se,Ae);const Re=u.PoolConvUtil.computePoolOutputShape(pe,ge,we,Se,ve,Ae,he.autoPad),Te=Object.assign({},he);return be?Object.assign(Te,{kernelShape:ve,strides:we,pads:Ae,dilations:Se,cacheKey:he.cacheKey}):Object.assign(Te,{kernelShape:ve,strides:we,pads:Ae,cacheKey:he.cacheKey}),[Te,Re]},G={autoPad:"",ceilMode:0,countIncludePad:!1,kernelShape:[],strides:[],pads:[],storageOrder:0,dilations:[],cacheKey:""},B={name:"GlobalMaxPool",inputNames:["X"],inputTypes:[T.TextureType.unpacked]};e.globalMaxPool=(ue,he)=>(o(he),[ue.run(Object.assign(Object.assign({},B),{get:()=>A(he,B,!0,G)}),he)]);const o=ue=>{if(!ue||ue.length!==1)throw new Error("Pool ops requires 1 input.");if(ue[0].type!=="float32"&&ue[0].type!=="float64")throw new Error("Invalid input type.")},i=(ue,he,pe,ge,be)=>{const ve=ue.length;if(he.kernelShape.length<=2){const we=he.kernelShape[he.kernelShape.length-1],Se=he.strides[he.strides.length-1],Ae=he.pads[he.pads.length/2-1],Re=he.pads[he.pads.length-1],Te=ue[ve-1];let Ce="",Ve="",$e="";if(Ce=Ae+Re!==0?`
          for (int i = 0; i < ${we}; i++) {
            x[${ve} - 1] = indices[${ve} - 1] * ${Se} - ${Ae} + i;
            if (x[${ve} - 1] < 0 || x[${ve} - 1] >= ${Te}) {
              pad++;
              continue;
            }
            ${pe}
          }`:`
          for (int i = 0; i < ${we}; i++) {
            x[${ve} - 1] = indices[${ve} - 1] * ${Se} - ${Ae} + i;
            ${pe}
          }`,he.kernelShape.length===2){const He=he.kernelShape[he.kernelShape.length-2],De=he.strides[he.strides.length-2],Xe=he.pads[he.pads.length/2-2],Me=he.pads[he.pads.length-2],je=ue[ve-2];Ve=Xe+Me!==0?`
            for (int j = 0; j < ${He}; j++) {
              x[${ve} - 2] = indices[${ve} - 2] * ${De} - ${Xe} + j;
              if (x[${ve} - 2] < 0 || x[${ve} - 2] >= ${je}) {
                pad+= ${we};
                continue;
              }
          `:`
            for (int j = 0; j < ${He}; j++) {
              x[${ve} - 2] = indices[${ve} - 2] * ${De} - ${Xe} + j;
            `,$e=`
          }
        `}return`
        float process(int indices[${ve}]) {
          int x[${ve}];
          copyVec(indices, x);

          float value = ${be};
          int pad = 0;
          ${Ve}
          ${Ce}
          ${$e}
          ${ge}
          return value;
        }
      `}{const we=u.ShapeUtil.size(he.kernelShape),Se=u.ShapeUtil.computeStrides(he.kernelShape),Ae=Se.length,Re=he.pads.length,Te=ae(Ae),Ce=w(ue,"inputDims"),Ve=w(he.pads,"pads"),$e=w(Se,"kernelStrides"),He=w(he.strides,"strides");let De="";return De=he.pads.reduce(((Xe,Me)=>Xe+Me))?`
            if (x[j] >= inputDims[j] || x[j] < 0) {
              pad++;
              isPad = true;
              break;
            }
          }
          if (!isPad) {
            ${pe}
          }`:`
          }
          ${pe}
        `,`
        ${Te}
        float process(int indices[${ve}]) {
          int x[${ve}];
          copyVec(indices, x);
          int offset[${Ae}];
          int pads[${Re}];
          int inputDims[${ve}];
          int kernelStrides[${Ae}];
          int strides[${Ae}];
          ${Ve}
          ${Ce}
          ${He}
          ${$e}

          float value = ${be};
          int pad = 0;
          bool isPad = false;
          for (int i = 0; i < ${we}; i++) {
            offsetToIndices(i, kernelStrides, offset);
            isPad = false;
            for (int j = ${ve} - ${Ae}; j < ${ve}; j++) {
              x[j] = indices[j] * strides[j - ${ve} + ${Ae}]
                + offset[j - ${ve} + ${Ae}] - pads[j - 2];
              ${De}
          }
          ${ge}

          return value;
        }
      `}},w=(ue,he)=>{let pe="";for(let ge=0;ge<ue.length;ge++)pe+=`
      ${he}[${ge}] = ${ue[ge]};
    `;return pe},ae=ue=>`
  void offsetToIndices(int offset, int[${ue}] strides, out int[${ue}] indices) {
    if (${ue} == 0) {
      return;
    }
    for (int i = 0; i < ${ue} - 1; ++i) {
      indices[i] = offset / strides[i];
      offset -= indices[i] * strides[i];
    }
    indices[${ue} - 1] = offset;
  }`},4939:(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.reduceLogSumSquare=e.reduceLogSum=e.reduceProd=e.reduceMin=e.reduceMax=e.reduceMean=e.reduceSum=e.parseReduceAttributes=void 0;const r=t(246),u=t(782),T=t(2517),d=t(2039),A=(B,o,i,w,ae)=>{G(o);const ue={name:w,inputNames:["A"],inputTypes:[d.TextureType.unpacked]};return[B.run(Object.assign(Object.assign({},ue),{cacheHint:i.cacheKey,get:()=>le(B,o,i,w,ae,ue)}),o)]};e.parseReduceAttributes=B=>{const o=B.attributes.getInts("axes",[]),i=B.attributes.getInt("keepdims",1)===1;return(0,r.createAttributeWithCacheKey)({axes:o,keepDims:i})};const le=(B,o,i,w,ae,ue)=>{const he=[],pe=o[0].dims.length||1,ge=[],be=T.ShapeUtil.normalizeAxes(i.axes,o[0].dims.length),ve=ae(o,be);let we=ve[1];for(let Ae=0;Ae<o[0].dims.length;Ae++)be.indexOf(Ae)>=0||be.length===0?(i.keepDims&&he.push(1),we=`
          for(int j${Ae} = 0; j${Ae} < ${o[0].dims[Ae]}; j${Ae}++) {
            inputIdx[${Ae}] = j${Ae};
            ${we}
          }`):(ge.push(`inputIdx[${Ae}] = outputIdx[${he.length}];`),he.push(o[0].dims[Ae]));const Se=`
      float process(int outputIdx[${he.length||1}]) {
        float value;                 // final result
        int inputIdx[${pe}];      // addressing input data
        ${ge.join(`
`)}
        ${ve[0]}       // init ops for reduce max/min
        ${we}
        ${ve[2]}       // final computation for reduce mean
        return value;
      }`;return Object.assign(Object.assign({},ue),{output:{dims:he,type:o[0].type,textureType:d.TextureType.unpacked},shaderSource:Se})},G=B=>{if(!B||B.length!==1)throw new Error("Reduce op requires 1 input.");if(u.NUMBER_TYPES.indexOf(B[0].type)===-1)throw new Error("Invalid input type.")};e.reduceSum=(B,o,i)=>A(B,o,i,"ReduceSum",(()=>["value = 0.0;","value += _A(inputIdx);",""])),e.reduceMean=(B,o,i)=>A(B,o,i,"ReduceMean",((w,ae)=>{let ue=1;for(let he=0;he<w[0].dims.length;he++)(ae.indexOf(he)>=0||ae.length===0)&&(ue*=w[0].dims[he]);return["value = 0.0;","value += _A(inputIdx);",`value /= ${ue}.;`]})),e.reduceMax=(B,o,i)=>A(B,o,i,"ReduceMax",((w,ae)=>{const ue=[];for(let he=0;he<w[0].dims.length;he++)(ae.indexOf(he)>=0||ae.length===0)&&ue.push(`inputIdx[${he}] = 0;`);return[`${ue.join(`
`)}
value = _A(inputIdx);`,"value = max(value, _A(inputIdx));",""]})),e.reduceMin=(B,o,i)=>A(B,o,i,"ReduceMin",((w,ae)=>{const ue=[];for(let he=0;he<w[0].dims.length;he++)(ae.indexOf(he)>=0||ae.length===0)&&ue.push(`inputIdx[${he}] = 0;`);return[`${ue.join(`
`)}
value = _A(inputIdx);`,"value = min(value, _A(inputIdx));",""]})),e.reduceProd=(B,o,i)=>A(B,o,i,"ReduceProd",(()=>["value = 1.0;","value *= _A(inputIdx);",""])),e.reduceLogSum=(B,o,i)=>A(B,o,i,"ReduceLogSum",(()=>["value = 0.0;","value += _A(inputIdx);","value = log(value);"])),e.reduceLogSumSquare=(B,o,i)=>A(B,o,i,"ReduceLogSumSquare",(()=>["float t; value = 0.0;","t = _A(inputIdx); value += t * t;",""]))},7019:(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.isReshapeCheap=e.processDims3D=e.createPackedReshape3DProgramInfoLoader=void 0;const r=t(2517),u=t(5060),T=t(2039),d=t(2827);e.createPackedReshape3DProgramInfoLoader=(A,le,G)=>{const B=(o=>({name:"Reshape (packed)",inputTypes:[T.TextureType.packed],inputNames:["A"],cacheHint:`${o}`}))(G);return Object.assign(Object.assign({},B),{get:()=>((o,i,w,ae)=>{const ue=i.dims,he=ae;let pe="";for(let ve=0;ve<4;ve++){let we="";switch(ve){case 0:we="outputCoords = rc;";break;case 1:we="outputCoords = ivec3(rc.x, rc.y+1, rc.z);";break;case 2:we="outputCoords = ivec3(rc.x, rc.y, rc.z+1);";break;case 3:we="outputCoords = ivec3(rc.x, rc.y+1, rc.z+1);";break;default:throw new Error}pe+=`
        ${we}
        ${ve>0?"if(outputCoords.y < rows && outputCoords.z < cols){":""}
          int flattenedIndex = getFlattenedIndex(outputCoords);

          ivec3 inputRC = inputCoordsFromReshapedOutCoords(flattenedIndex);
          vec2 innerDims = vec2(float(inputRC.y),float(inputRC.z));

          result[${ve}] = getChannel(getA(inputRC.x, inputRC.y, inputRC.z), innerDims);

        ${ve>0?"}":""}
      `}const ge=(0,u.getGlsl)(o.session.backend.glContext.version),be=`
      ${(function(ve){const we=r.ShapeUtil.computeStrides(ve),Se=["b","r","c"],Ae="index";return`
    ivec3 inputCoordsFromReshapedOutCoords(int index) {
      ${we.map(((Re,Te)=>`int ${Se[Te]} = ${Ae} / ${Re}; ${Te===we.length-1?`int ${Se[Te+1]} = ${Ae} - ${Se[Te]} * ${Re}`:`index -= ${Se[Te]} * ${Re}`};`)).join("")}
      return ivec3(b, r, c);
    }
  `})(ue)}
      ${(function(ve){const we=r.ShapeUtil.computeStrides(ve);return`
  int getFlattenedIndex(ivec3 coords) {
    // reverse y, z order
    return coords.x * ${we[0]} + coords.z * ${we[1]} + coords.y;
  }
`})(he)}
      ${(0,d.unpackFromChannel)()}

      void main() {
        ivec3 rc = getOutputCoords();

        vec4 result = vec4(0.0);

        ivec3 outputCoords;
        int rows = ${he[2]};
        int cols = ${he[1]};

        ${pe}
        ${ge.output} = result;
      }
    `;return Object.assign(Object.assign({},w),{output:{dims:he,type:i.type,textureType:T.TextureType.packed},shaderSource:be,hasMain:!0})})(A,le,B,G)})},e.processDims3D=function(A){if(A.length===0)return[1,1,1];let le=1;for(let G=0;G<A.length-2;++G)le*=A[G];return[le,A.length>1?A[A.length-2]:1,A[A.length-1]]},e.isReshapeCheap=function(A,le){let G=!1;return G=A.length===0||le.length===0||(A.length<2||le.length<2?A[A.length-1]===le[le.length-1]:A[A.length-1]===le[le.length-1]&&A[A.length-2]===le[le.length-2]),G}},718:(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.reshape=void 0;const r=t(2517);e.reshape=(u,T)=>{const d=r.ShapeUtil.calculateReshapedDims(T[0].dims,T[1].integerData);return u.session.pack?[u.reshapePacked(T[0],d)]:[u.reshapeUnpacked(T[0],d)]}},2268:(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.parseResizeAttributesV11=e.parseResizeAttributesV10=e.resize=void 0;const r=t(5060),u=t(2039),T=t(9390),d=t(2827),A=t(9793),le={name:"Resize",inputNames:["A"],inputTypes:[u.TextureType.packed]};e.resize=(w,ae,ue)=>((0,A.validateInputs)(ae,ue),[w.run(Object.assign(Object.assign({},le),{cacheHint:ue.cacheKey,get:()=>G(w,ae,ue)}),ae)]),e.parseResizeAttributesV10=w=>(0,A.parseUpsampleAttributes)(w,10),e.parseResizeAttributesV11=w=>(0,A.parseUpsampleAttributes)(w,11);const G=(w,ae,ue)=>{const he=(0,r.getGlsl)(w.session.backend.glContext.version),[pe,ge]=B(ae,ue);if(pe.every((De=>De===1))&&ue.coordinateTransformMode!=="tf_crop_and_resize")return Object.assign(Object.assign({},le),{output:{dims:ge,type:ae[0].type,textureType:u.TextureType.packed},hasMain:!0,shaderSource:`void main() {
                    vec4 v = ${he.texture2D}(X, TexCoords);
                    ${he.output} = v;
                }`});const be=ge.length;if(be<2)throw new Error(`output dimension should be at least 2, but got ${be}`);const ve=ge[be-2],we=ge[be-1],Se=ae[0].dims;if(be!==Se.length)throw new Error(`output dimension should match input ${Se.length}, but got ${be}`);const Ae=Se[be-2],Re=Se[be-1],Te=pe[be-2],Ce=pe[be-1];let Ve="";if(ue.mode!=="linear")throw new Error(`resize (packed) does not support mode: '${ue.mode}'`);switch(ue.coordinateTransformMode){case"asymmetric":Ve=`
                    vec4 getSourceFracIndex(ivec4 coords) {
                        return vec4(coords) / scaleWHWH;
                    }
                `;break;case"half_pixel":Ve=`
                    vec4 getSourceFracIndex(ivec4 coords) {
                        return (vec4(coords) + 0.5) / scaleWHWH - 0.5;
                    }
                `;break;case"pytorch_half_pixel":Ve=`
                    vec4 getSourceFracIndex(ivec4 coords) {
                        vec4 fcoords = vec4(coords);
                        return vec4(
                            ${we}.0 > 1.0 ? (fcoords.x + 0.5) / scaleWHWH.x - 0.5 : 0.0,
                            ${ve}.0 > 1.0 ? (fcoords.y + 0.5) / scaleWHWH.y - 0.5 : 0.0,
                            ${we}.0 > 1.0 ? (fcoords.z + 0.5) / scaleWHWH.z - 0.5 : 0.0,
                            ${ve}.0 > 1.0 ? (fcoords.w + 0.5) / scaleWHWH.w - 0.5 : 0.0
                          );
                    }
                `;break;case"align_corners":Ve=`
                    vec4 getSourceFracIndex(ivec4 coords) {
                        vec4 resized = vec4(${we}.0 - 1.0, ${ve}.0 - 1.0, ${we}.0 - 1.0,
                            ${ve}.0 - 1.0);
                        vec4 original = vec4(${Re}.0 - 1.0, ${Ae}.0 - 1.0, ${Re}.0 - 1.0,
                            ${Ae}.0 - 1.0);
                        vec4 new_scale = original / resized;
                        return vec4(coords) * new_scale;
                    }
                `;break;default:throw new Error(`resize (packed) does not support coordinateTransformMode:                                 '${ue.coordinateTransformMode}'`)}const $e=(0,T.getCoordsDataType)(be),He=`
            const vec2 inputWH = vec2(${Ae}.0, ${Re}.0);
            const vec4 scaleWHWH = vec4(float(${Te}), float(${Ce}), float(${Te}), float(${Ce}));
            ${(0,d.unpackFromChannel)()}
            ${Ve}
            float getAValue(int x10, int r, int c, int d) {
                return getChannel(getA(x10, r, c, d), vec2(c, d));
            }
            void main() {
                ${$e} rc = getOutputCoords();

                int batch = rc[0];
                int depth = rc[1];

                // retrieve the 4 coordinates that is used in the 4 packed output values.
                ivec4 coords = ivec4(rc.wz, rc.w + 1, rc.z + 1);

                // calculate the source index in fraction
                vec4 sourceFrac = getSourceFracIndex(coords);

                // get the lower and upper bound of the 4 values that will be packed into one texel.
                ivec4 x00 = ivec4(max(sourceFrac.xy, vec2(0.0)), min(inputWH - 1.0, ceil(sourceFrac.xy)));
                ivec4 x01 = ivec4(max(sourceFrac.xw, vec2(0.0)), min(inputWH - 1.0, ceil(sourceFrac.xw)));
                ivec4 x10 = ivec4(max(sourceFrac.zy, vec2(0.0)), min(inputWH - 1.0, ceil(sourceFrac.zy)));
                ivec4 x11 = ivec4(max(sourceFrac.zw, vec2(0.0)), min(inputWH - 1.0, ceil(sourceFrac.zw)));

                bool hasNextRow = rc.w < ${ve-1};
                bool hasNextCol = rc.z < ${we-1};

                // pack x00, x01, x10, x11's top-left corner into one vec4 structure
                vec4 topLeft = vec4(
                    getAValue(batch, depth, x00.x, x00.y),
                    hasNextCol ? getAValue(batch, depth, x01.x, x01.y) : 0.0,
                    hasNextRow ? getAValue(batch, depth, x10.x, x10.y) : 0.0,
                    (hasNextRow && hasNextCol) ? getAValue(batch, depth, x11.x, x11.y) : 0.0);

                // pack x00, x01, x10, x11's top-right corner into one vec4 structure
                vec4 topRight = vec4(
                    getAValue(batch, depth, x00.x, x00.w),
                    hasNextCol ? getAValue(batch, depth, x01.x, x01.w) : 0.0,
                    hasNextRow ? getAValue(batch, depth, x10.x, x10.w) : 0.0,
                    (hasNextRow && hasNextCol) ? getAValue(batch, depth, x11.x, x11.w) : 0.0);

                // pack x00, x01, x10, x11's bottom-left corner into one vec4 structure
                vec4 bottomLeft = vec4(
                    getAValue(batch, depth, x00.z, x00.y),
                    hasNextCol ? getAValue(batch, depth, x01.z, x01.y) : 0.0,
                    hasNextRow ? getAValue(batch, depth, x10.z, x10.y) : 0.0,
                    (hasNextRow && hasNextCol) ? getAValue(batch, depth, x11.z, x11.y) : 0.0);

                // pack x00, x01, x10, x11's bottom-right corner into one vec4 structure
                vec4 bottomRight = vec4(
                    getAValue(batch, depth, x00.z, x00.w),
                    hasNextCol ? getAValue(batch, depth, x01.z, x01.w) : 0.0,
                    hasNextRow ? getAValue(batch, depth, x10.z, x10.w) : 0.0,
                    (hasNextRow && hasNextCol) ? getAValue(batch, depth, x11.z, x11.w) : 0.0);

                // calculate the interpolation fraction on u and v direction
                vec4 frac = vec4(sourceFrac) - floor(sourceFrac);
                vec4 clampFrac = clamp(frac, vec4(0.0), vec4(1.0));

                vec4 top = mix(topLeft, topRight, clampFrac.ywyw);
                vec4 bottom = mix(bottomLeft, bottomRight, clampFrac.ywyw);
                vec4 newValue = mix(top, bottom, clampFrac.xxzz);

                ${he.output} = vec4(newValue);
            }
        `;return Object.assign(Object.assign({},le),{output:{dims:ge,type:ae[0].type,textureType:u.TextureType.packed},hasMain:!0,shaderSource:He})},B=(w,ae)=>{const ue=w[0].dims;let he,pe=ae.scales;if(pe.length===0){const be=w[ae.scalesInputIdx];if(be&&be.size!==0){if(w[ae.sizesInputIdx])throw new Error("Only one of scales or sizes must be provided as input.");pe=o(be,ae.mode,ae.isResize)}else{const ve=w[ae.sizesInputIdx];if(!ve||ve.size===0)throw new Error("Either scales or sizes MUST be provided as input.");he=Array.from(ve.integerData),pe=i(he,ue,ae.mode,ae.isResize)}}else if(w[ae.sizesInputIdx])throw new Error("Only one of scales or sizes must be provided as input.");const ge=he||ue.map(((be,ve)=>Math.floor(be*pe[ve])));return[pe,ge]},o=(w,ae,ue)=>{const he=Array.from(w.floatData);return(0,A.scalesValidation)(he,ae,ue),he},i=(w,ae,ue,he)=>{const pe=ae.length,ge=new Array(pe);for(let be=0,ve=pe;be<ve;be++)if(ae[be]===0){if(w[be]!==0)throw new Error("Input dim is zero but required output dim is non-zero.");ge[be]=1}else ge[be]=w[be]/ae[be];return(0,A.scalesValidation)(ge,ue,he),ge}},8117:(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.shape=void 0;const r=t(9162);e.shape=(T,d)=>(u(d),[new r.Tensor([d[0].dims.length],"int32",void 0,void 0,new Int32Array(d[0].dims))]);const u=T=>{if(!T||T.length!==1)throw new Error("Shape requires 1 input.")}},2278:(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.sliceV10=e.parseSliceAttributes=e.slice=void 0;const r=t(246),u=t(782),T=t(2517),d=t(2039),A={name:"Slice",inputNames:["A"],inputTypes:[d.TextureType.unpacked]};e.slice=(i,w,ae)=>(G(w),[i.run(Object.assign(Object.assign({},A),{cacheHint:ae.cacheKey,get:()=>le(i,w[0],ae)}),w)]),e.parseSliceAttributes=i=>{const w=i.attributes.getInts("starts"),ae=i.attributes.getInts("ends"),ue=i.attributes.getInts("axes",[]);return(0,r.createAttributeWithCacheKey)({starts:w,ends:ae,axes:ue})};const le=(i,w,ae)=>{const ue=ae.axes.length===0?w.dims.slice(0).map(((Se,Ae)=>Ae)):ae.axes,he=T.ShapeUtil.normalizeAxes(ue,w.dims.length),pe=ae.starts.map(((Se,Ae)=>Se>w.dims[he[Ae]]-1?w.dims[he[Ae]]:T.ShapeUtil.normalizeAxis(Se,w.dims[he[Ae]]))),ge=ae.ends.map(((Se,Ae)=>Se>w.dims[he[Ae]]-1?w.dims[he[Ae]]:T.ShapeUtil.normalizeAxis(Se,w.dims[he[Ae]]))),be=w.dims.slice(),ve=[];for(let Se=0;Se<he.length;Se++)be[he[Se]]=ge[Se]-pe[Se],pe[Se]>0&&ve.push(`outputIdx[${he[Se]}] += ${pe[Se]};`);const we=`
      float process(int outputIdx[${be.length}]) {
        ${ve.join(`
      `)}
        return _A(outputIdx);
      }`;return Object.assign(Object.assign({},A),{output:{dims:be,type:w.type,textureType:d.TextureType.unpacked},shaderSource:we})},G=i=>{if(!i||i.length!==1)throw new Error("Slice requires 1 input.");if(u.NUMBER_TYPES.indexOf(i[0].type)===-1)throw new Error("Invalid input type.")};e.sliceV10=(i,w)=>{o(w);const ae=B(i,w);return[i.run(Object.assign(Object.assign({},A),{cacheHint:ae.cacheKey,get:()=>le(i,w[0],ae)}),[w[0]])]};const B=(i,w)=>{if(!i.session.isInitializer(w[1].dataId)||!i.session.isInitializer(w[2].dataId)||w.length>=4&&!i.session.isInitializer(w[3].dataId)||w.length>=5&&!i.session.isInitializer(w[4].dataId))throw new Error("dynamic slice attributes are not allowed");if(w.length>=5&&w[4].integerData.some((pe=>pe!==1)))throw new Error("currently non-1 steps is not supported for Slice");const ae=Array.from(w[1].integerData),ue=Array.from(w[2].integerData),he=w.length>=4?Array.from(w[3].integerData):[];return{starts:ae,ends:ue,axes:he,cacheKey:`${he};${ae};${ue}`}},o=i=>{if(!i||i.length<3||i.length>5)throw new Error("Invalid input number.");if(i[1].type!=="int32"||i[1].dims.length!==1)throw new Error("Invalid input type.");if(i[2].type!=="int32"||i[2].dims.length!==1)throw new Error("Invalid input type.");if(i.length>=4&&(i[3].type!=="int32"||i[3].dims.length!==1))throw new Error("Invalid input type.");if(i.length>=5&&(i[4].type!=="int32"||i[4].dims.length!==1))throw new Error("Invalid input type.")}},5524:(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.softmaxV13=e.parseSoftmaxAttributesV13=e.parseSoftmaxAttributes=e.softmax=void 0;const r=t(246),u=t(2517),T=t(5060),d=t(2039),A=t(3738),le={name:"SoftmaxComputeMax",inputNames:["A"],inputTypes:[d.TextureType.unpacked]},G={name:"SoftmaxComputeScale",inputNames:["A","Max"],inputTypes:[d.TextureType.unpacked,d.TextureType.unpacked]},B={name:"SoftMax",inputNames:["A","Max","Norm"],inputTypes:[d.TextureType.unpacked,d.TextureType.unpacked,d.TextureType.unpacked]};e.softmax=(he,pe,ge)=>{ue(pe);const be=pe[0].dims.slice(),ve=u.ShapeUtil.normalizeAxis(ge.axis,be.length),we=u.ShapeUtil.sizeToDimension(be,ve),Se=u.ShapeUtil.sizeFromDimension(be,ve);return o(he,pe,ge,we,Se)},e.parseSoftmaxAttributes=he=>(0,r.createAttributeWithCacheKey)({axis:he.attributes.getInt("axis",1)}),e.parseSoftmaxAttributesV13=he=>(0,r.createAttributeWithCacheKey)({axis:he.attributes.getInt("axis",-1)}),e.softmaxV13=(he,pe,ge)=>{ue(pe);const be=pe[0].dims.slice(),ve=u.ShapeUtil.normalizeAxis(ge.axis,be.length),we=be.length,Se=ve!==we-1,Ae=[];let Re,Te=[],Ce=[];Se&&(Te=Array.from({length:we}).map(((De,Xe)=>Xe)),Te[ve]=we-1,Te[we-1]=ve,Te.map((De=>Ae.push(be[De]))),Re=(0,r.createAttributeWithCacheKey)({perm:Te}),Ce=(0,A.transpose)(he,pe,Re));const Ve=Se?u.ShapeUtil.sizeToDimension(Ae,we-1):u.ShapeUtil.sizeToDimension(be,we-1),$e=Se?u.ShapeUtil.sizeFromDimension(Ae,we-1):u.ShapeUtil.sizeFromDimension(be,we-1),He=o(he,Se?Ce:pe,ge,Ve,$e);return Se?(0,A.transpose)(he,He,Re):He};const o=(he,pe,ge,be,ve)=>{const we=i(he,pe[0],be,ve,[be]),Se=he.run(Object.assign(Object.assign({},le),{cacheHint:ge.cacheKey,get:()=>we}),pe),Ae=w(he,pe[0],be,ve,we.output.dims,[be]),Re=he.run(Object.assign(Object.assign({},G),{cacheHint:ge.cacheKey,get:()=>Ae}),[pe[0],Se]),Te=ae(he,pe[0],be,ve,we.output.dims,Ae.output.dims);return[he.run(Object.assign(Object.assign({},B),{cacheHint:ge.cacheKey,get:()=>Te}),[pe[0],Se,Re])]},i=(he,pe,ge,be,ve)=>{const[we,Se]=he.calculateTextureWidthAndHeight(pe.dims,d.TextureType.unpacked),Ae=ve.length;if(ge<1||be<1)throw new Error("Logical row count N and feature count D must be greater than or equal to 1");if(ve.length!==1)throw new Error("Dimensionality of the output should be 1");if(ve[0]!==ge)throw new Error("Shape of the output should be equal to logical row count");const Re=(0,T.getGlsl)(he.session.backend.glContext.version),Te=`
      float process(int[${Ae}] indices) {
        int logical_row_start_offset = indices[0] * ${be};

        float max = getColorAsFloat(${Re.texture2D}(A, offsetToCoords(logical_row_start_offset, ${we},
        ${Se} )));
        for(int i=1; i<${be}; ++i)
        {
          float current = getColorAsFloat(${Re.texture2D}(A, offsetToCoords(logical_row_start_offset + i,
            ${we}, ${Se})));
          if(current > max)
          max = current;
        }

        return max;
      }`;return Object.assign(Object.assign({},le),{output:{dims:ve,type:pe.type,textureType:d.TextureType.unpacked},shaderSource:Te})},w=(he,pe,ge,be,ve,we)=>{const[Se,Ae]=he.calculateTextureWidthAndHeight(pe.dims,d.TextureType.unpacked),Re=we.length;if(ge<1||be<1)throw new Error("Logical row count N and feature count D must be greater than or equal to 1");if(we.length!==1)throw new Error("Dimensionality of the output should be 1");if(we[0]!==ge)throw new Error("Shape of the output should be equal to logical row count");if(ve.length!==1)throw new Error("Dimensionality of the intermediate results should be 1");if(ve[0]!==ge)throw new Error("Shape of the intermediate results should be equal to logical row count");const Te=`
      float process(int[${Re}] indices) {
        int logical_row_start_offset = indices[0] * ${be};

        float norm_factor = 0.0;
        float max = _Max(indices);
        for(int i=0; i<${be}; ++i)
        {
          norm_factor += exp(getColorAsFloat(${(0,T.getGlsl)(he.session.backend.glContext.version).texture2D}(A, offsetToCoords(logical_row_start_offset + i,
            ${Se}, ${Ae}))) - max);
        }

        return norm_factor;
      }`;return Object.assign(Object.assign({},G),{output:{dims:we,type:pe.type,textureType:d.TextureType.unpacked},shaderSource:Te})},ae=(he,pe,ge,be,ve,we)=>{const[Se,Ae]=he.calculateTextureWidthAndHeight(pe.dims,d.TextureType.unpacked),Re=pe.dims.length;if(ge<1||be<1)throw new Error("Logical row count N and feature count D must be greater than or equal to 1");if(ve.length!==1||we.length!==1)throw new Error("Dimensionality of the intermediate results should be 1");if(ve[0]!==ge||we[0]!==ge)throw new Error("Shape of the intermediate results should be equal to logical row count");const Te=`
      float process(int[${Re}] indices) {

      // get offset of current logical tensor index from the 2-D texture coordinates (TexCoords)
      int offset = coordsToOffset(TexCoords, ${Se}, ${Ae});

      //determine the logical row for this index
      int logical_row_index[1];
      logical_row_index[0] = offset / ${be};

      float norm_factor = _Norm(logical_row_index);

      // avoid possible division by 0
      // if norm_facor is 0, all elements are zero
      // if so, return 0
      if(norm_factor == 0.0)
        return 0.0;

      return exp(_A(indices) - _Max(logical_row_index)) / norm_factor;
    }`;return Object.assign(Object.assign({},B),{output:{dims:pe.dims,type:pe.type,textureType:d.TextureType.unpacked},shaderSource:Te})},ue=he=>{if(!he||he.length!==1)throw new Error("Softmax requires 1 input.");if(he[0].type!=="float32"&&he[0].type!=="float64")throw new Error("Invalid input type")}},5975:(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.parseSplitAttributes=e.split=void 0;const r=t(246),u=t(2517),T=t(2039),d={name:"Split",inputNames:["A"],inputTypes:[T.TextureType.unpacked]};e.split=(B,o,i)=>{G(o);const w=u.ShapeUtil.normalizeAxis(i.axis,o[0].dims.length),ae=A(B,o,w,i),ue=[];for(let he=0;he<ae;++he)ue.push(B.run(Object.assign(Object.assign({},d),{cacheHint:`${i.cacheKey};${he}`,get:()=>le(B,o[0],i,w,he)}),o));return ue},e.parseSplitAttributes=B=>{const o=B.attributes.getInt("axis",0),i=B.attributes.getInts("split",[]),w=B.outputs.length;return(0,r.createAttributeWithCacheKey)({axis:o,split:i,numOutputs:w})};const A=(B,o,i,w)=>{const[,ae]=u.SplitUtil.splitShape(o[0].dims,i,w.split,w.numOutputs);return ae.length},le=(B,o,i,w,ae)=>{const[ue,he]=u.SplitUtil.splitShape(o.dims,w,i.split,i.numOutputs),pe=he[ae],ge=ue[ae],be=`
      float process(int indices[${ge.length}]) {
        indices[${w}] += ${pe};
        return _A(indices);
      }
    `;return Object.assign(Object.assign({},d),{cacheHint:`${i.cacheKey}:${ae}`,output:{dims:ge,type:o.type,textureType:T.TextureType.unpacked},shaderSource:be})},G=B=>{if(!B||B.length!==1)throw new Error("Split requires one input.");if(B[0].type!=="int8"&&B[0].type!=="uint8"&&B[0].type!=="int16"&&B[0].type!=="uint16"&&B[0].type!=="int32"&&B[0].type!=="uint32"&&B[0].type!=="float32"&&B[0].type!=="float64"&&B[0].type!=="bool")throw new Error("Invalid input type.")}},3933:(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.parseSqueezeAttributes=e.squeezeV13=e.squeeze=void 0;const r=t(2517);e.squeeze=(d,A,le)=>{u(A);const G=r.ShapeUtil.squeezeShape(A[0].dims,le);return[d.reshapeUnpacked(A[0],G)]},e.squeezeV13=(d,A)=>(T(A),(0,e.squeeze)(d,[A[0]],Array.from(A[1].integerData))),e.parseSqueezeAttributes=d=>d.attributes.getInts("axes");const u=d=>{if(!d||d.length!==1)throw new Error("Squeeze requires 1 input.");if(d[0].type==="string")throw new Error("invalid input tensor types.")},T=d=>{if(!d||d.length!==2)throw new Error("Squeeze requires 2 inputs.");if(d[1].type!=="int32")throw new Error("Invalid input type.")}},6558:(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.sum=void 0;const r=t(5060),u=t(2039);e.sum=(A,le)=>{d(le);const G={name:"Sum",inputNames:le.map(((B,o)=>`X${o}`)),inputTypes:new Array(le.length).fill(u.TextureType.unpacked)};return[A.run(Object.assign(Object.assign({},G),{get:()=>T(A,le,G)}),le)]};const T=(A,le,G)=>{const B=(0,r.getGlsl)(A.session.backend.glContext.version),o=le[0].dims.slice(),i=`
      void main() {
        vec4 result = ${le.map(((w,ae)=>`${B.texture2D}(X${ae},TexCoords)`)).join(" + ")};
        ${B.output} = result;
      }
    `;return Object.assign(Object.assign({},G),{output:{dims:o,type:le[0].type,textureType:u.TextureType.unpacked},hasMain:!0,shaderSource:i})},d=A=>{if(!A||A.length===0)throw new Error("Sum requires inputs.");const le=A[0].dims.length;for(let G=1;G<A.length;G++){if(le!==A[G].dims.length)throw new Error("Input shapes are mismatched.");for(let B=0;B<le;B++)if(A[0].dims[B]!==A[G].dims[B])throw new Error("Input shapes are not matched.")}if(A[0].type!=="float32"&&A[0].type!=="float64")throw new Error("Invalid input type.");for(let G=1;G<A.length;G++)if(A[0].type!==A[G].type)throw new Error("Input types are not matched.")}},5723:(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.tile=void 0;const r=t(782),u=t(2039);e.tile=(A,le)=>{d(le);const G={name:"Tile",inputNames:["A"],inputTypes:[u.TextureType.unpacked]};return[A.run(Object.assign(Object.assign({},G),{get:()=>T(A,le,G)}),le)]};const T=(A,le,G)=>{const B=le[0].dims.slice(),o=new Array(B.length),i=[];for(let ue=0;ue<B.length;ue++)o[ue]=B[ue]*le[1].numberData[ue],i.push(`inputIdx[${ue}] = int(mod(float(outputIdx[${ue}]), ${B[ue]}.));`);const w=o.length,ae=`
      float process(int outputIdx[${w}]) {
        int inputIdx[${w}];
        ${i.join(`
`)}
        return _A(inputIdx);
      }
    `;return Object.assign(Object.assign({},G),{output:{dims:o,type:le[0].type,textureType:u.TextureType.unpacked},shaderSource:ae})},d=A=>{if(!A||A.length!==2)throw new Error("Tile requires 2 input.");if(A[1].dims.length!==1)throw new Error("The second input shape must 1 dimension.");if(A[1].dims[0]!==A[0].dims.length)throw new Error("Invalid input shape.");if(r.NUMBER_TYPES.indexOf(A[0].type)===-1)throw new Error("Invalid input type.");if(A[1].type!=="int32"&&A[1].type!=="int16")throw new Error("Invalid repeat type.")}},3738:(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.parseTransposeAttributes=e.transpose=void 0;const r=t(246),u=t(2517),T=t(2039),d={name:"Transpose",inputNames:["A"],inputTypes:[T.TextureType.unpacked]};e.transpose=(i,w,ae)=>(o(w),[i.run(Object.assign(Object.assign({},d),{cacheHint:ae.cacheKey,get:()=>A(i,w[0],ae.perm)}),w)]),e.parseTransposeAttributes=i=>(0,r.createAttributeWithCacheKey)({perm:i.attributes.getInts("perm",[])});const A=(i,w,ae)=>{const ue=w.dims;ae=le(ue,ae);const he=G(ue,ae),pe=ue.length,ge=`
      ${B("perm",ae,pe)}
      float process(int indices[${pe}]) {
        int a[${pe}];
        perm(a, indices);
        return _A(a);
      }`;return Object.assign(Object.assign({},d),{output:{dims:he,type:w.type,textureType:T.TextureType.unpacked},shaderSource:ge})},le=(i,w)=>(w&&w.length!==i.length&&(w=[...i.keys()].reverse()),w),G=(i,w)=>(w=le(i,w),u.ShapeUtil.sortBasedOnPerm(i,w)),B=(i,w,ae)=>{const ue=[];ue.push(`void ${i}(out int a[${ae}], int src[${ae}]) {`);for(let he=0;he<ae;++he)ue.push(`	a[${w[he]}]=src[${he}];`);return ue.push("	}"),ue.join(`
`)},o=i=>{if(!i||i.length!==1)throw new Error("Transpose requires 1 input.");if(i[0].type!=="float32"&&i[0].type!=="float64")throw new Error("input should be float tensor")}},8710:(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.encodeAsUint8=void 0;const r=t(5060),u=t(2039);e.encodeAsUint8=(T,d)=>{const A=d.shape,le=(0,r.getGlsl)(T.session.backend.glContext.version),G=`
    const float FLOAT_MAX = 1.70141184e38;
    const float FLOAT_MIN = 1.17549435e-38;

    bool isNaN(float val) {
      return (val < 1.0 || 0.0 < val || val == 0.0) ? false : true;
    }

    highp vec4 encodeAsUint8(highp float v) {
      if (isNaN(v)) {
        return vec4(255, 255, 255, 255);
      }

      highp float av = abs(v);

      if(av < FLOAT_MIN) {
        return vec4(0.0, 0.0, 0.0, 0.0);
      } else if(v > FLOAT_MAX) {
        return vec4(0.0, 0.0, 128.0, 127.0) / 255.0;
      } else if(v < -FLOAT_MAX) {
        return vec4(0.0, 0.0,  128.0, 255.0) / 255.0;
      }

      highp vec4 c = vec4(0,0,0,0);

      highp float e = floor(log2(av));
      highp float m = exp2(fract(log2(av))) - 1.0;

      c[2] = floor(128.0 * m);
      m -= c[2] / 128.0;
      c[1] = floor(32768.0 * m);
      m -= c[1] / 32768.0;
      c[0] = floor(8388608.0 * m);

      highp float ebias = e + 127.0;
      c[3] = floor(ebias / 2.0);
      ebias -= c[3] * 2.0;
      c[2] += floor(ebias) * 128.0;

      c[3] += 128.0 * step(0.0, -v);

      return c / 255.0;
    }

    void main() {
      float value = ${le.texture2D}(X,TexCoords).r;
      ${le.output} = encodeAsUint8(value);
    }`,B={name:"Uint8Encode",inputTypes:[u.TextureType.unpacked],inputNames:["X"],output:{dims:A,type:d.tensor.type,textureType:u.TextureType.downloadUint8AsFloat},shaderSource:G,hasMain:!0};return T.executeProgram(B,[d.tensor])}},4909:(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.tanh=e.tan=e.sqrt=e.sin=e.sigmoid=e.relu=e.not=e.neg=e.log=e.parseLeakyReluAttributes=e.leakyRelu=e.identity=e.floor=e.exp=e.parseEluAttributes=e.elu=e.cos=e.ceil=e.clipV11=e.parseClipAttributes=e.clip=e.atan=e.asin=e.acos=e.abs=e.glslTanh=e.glslTan=e.glslSqrt=e.glslSigmoid=e.glslRelu=e.glslSin=e.glslNot=e.glslNeg=e.glslLog=e.glslLeakyRelu=e.glslIdentity=e.glslClip=e.glslFloor=e.glslExp=e.glslElu=e.glslCos=e.glslCeil=e.glslAtan=e.glslAsin=e.glslAcos=e.glslAbs=void 0;const r=t(246),u=t(2517),T=t(8520),d=t(5060),A=t(2039);function le(){return He("abs")}function G(){return He("acos")}function B(){return He("asin")}function o(){return He("atan")}function i(){return He("ceil")}function w(){return He("cos")}function ae(Me){return{body:`
  const float alpha = float(${Me});

  float elu_(float a) {
    return a >= 0.0 ? a: (exp(a) - 1.0) * alpha;
  }
  vec4 elu_(vec4 v) {
    return vec4(elu_(v.x), elu_(v.y), elu_(v.z), elu_(v.w));
  }
  `,name:"elu",type:T.FunctionType.ValueBased}}function ue(){return He("exp")}function he(){return He("floor")}function pe(Me,je){const it="clip";return{body:`
  const float min = float(${Me});
  const float max = float(${je});

  float ${it}_(float a) {
    return clamp(a, min, max);
  }
  vec4 ${it}_(vec4 v) {
    return clamp(v, min, max);
  }
  `,name:it,type:T.FunctionType.ValueBased}}function ge(){const Me="indentity";return{body:`
  float ${Me}_(float a) {
    return a;
  }
  vec4 ${Me}_(vec4 v) {
    return v;
  }
  `,name:Me,type:T.FunctionType.ValueBased}}function be(Me){const je="leakyRelu";return{body:`
  const float alpha = float(${Me});

  float ${je}_(float a) {
    return a < 0.0 ? a * alpha : a;
  }
  vec4 ${je}_(vec4 v) {
    return vec4(${je}_(v.x), ${je}_(v.y), ${je}_(v.z), ${je}_(v.w));
  }
  `,name:je,type:T.FunctionType.ValueBased}}function ve(){return He("log")}function we(){return{body:`
  float neg_(float a) {
    return -a;
  }
  vec4 neg_(vec4 v) {
    return -v;
  }
  `,name:"neg",type:T.FunctionType.ValueBased}}function Se(){return{body:`
  float not_(float a) {
    return float( ! bool(a) );
  }
  bool not_(bool a) {
    return !a;
  }
  vec4 not_(vec4 v) {
    return vec4(!bool(v.x), !bool(v.y), !bool(v.z), !bool(v.w));
  }
  bvec4 not_(bvec4 v) {
    return bvec4(!v.x, !v.y, !v.z, !v.w);
  }
  `,name:"not",type:T.FunctionType.ValueBased}}function Ae(){return He("sin")}function Re(){const Me="relu";return{body:`
  float ${Me}_(float a) {
    return max( a, 0.0 );
  }
  vec4 ${Me}_(vec4 v) {
    return max( v, 0.0 );
  }
  `,name:Me,type:T.FunctionType.ValueBased}}function Te(){const Me="sigmoid";return{body:`
  float ${Me}_(float a) {
    return 1.0 / (1.0 + exp(-a));
  }
  vec4 ${Me}_(vec4 v) {
    return 1.0 / (1.0 + exp(-v));
  }
  `,name:Me,type:T.FunctionType.ValueBased}}function Ce(){return He("sqrt")}function Ve(){return He("tan")}function $e(){const Me="tanh";return{body:`
  float ${Me}_(float a) {
    a = clamp(a, -10., 10.);
    a = exp(2.*a);
    return (a - 1.) / (a + 1.);
  }
  vec4 ${Me}_(vec4 v) {
    v = clamp(v, -10., 10.);
    v = exp(2.*v);
    return (v - 1.) / (v + 1.);
  }
  `,name:Me,type:T.FunctionType.ValueBased}}function He(Me){return{body:`
  float ${Me}_(float a) {
    return ${Me}(a);
  }
  vec4 ${Me}_(vec4 v) {
    return ${Me}(v);
  }
  `,name:Me,type:T.FunctionType.ValueBased}}e.glslAbs=le,e.glslAcos=G,e.glslAsin=B,e.glslAtan=o,e.glslCeil=i,e.glslCos=w,e.glslElu=ae,e.glslExp=ue,e.glslFloor=he,e.glslClip=pe,e.glslIdentity=ge,e.glslLeakyRelu=be,e.glslLog=ve,e.glslNeg=we,e.glslNot=Se,e.glslSin=Ae,e.glslRelu=Re,e.glslSigmoid=Te,e.glslSqrt=Ce,e.glslTan=Ve,e.glslTanh=$e;const De=(Me,je,it,Ke)=>{const qe=Me.session.pack?A.TextureType.packed:A.TextureType.unpacked,Pe={name:it.name,inputTypes:[qe],inputNames:["A"],cacheHint:Ke};return Object.assign(Object.assign({},Pe),{get:()=>((et,Je,at,tt)=>{const Tt=et.session.pack?A.TextureType.packed:A.TextureType.unpacked,vt=(0,d.getGlsl)(et.session.backend.glContext.version);return Object.assign(Object.assign({},Je),{output:{dims:at.dims,type:at.type,textureType:Tt},shaderSource:`
     ${tt.body}
     void main() {
       vec4 v = ${vt.texture2D}(A, TexCoords);
       v = ${tt.name}_(v);
       ${vt.output} = v;
     }
     `,hasMain:!0})})(Me,Pe,je,it)})};e.abs=(Me,je)=>[Me.run(De(Me,je[0],le()),je)],e.acos=(Me,je)=>[Me.run(De(Me,je[0],G()),je)],e.asin=(Me,je)=>[Me.run(De(Me,je[0],B()),je)],e.atan=(Me,je)=>[Me.run(De(Me,je[0],o()),je)],e.clip=(Me,je,it)=>[Me.run(De(Me,je[0],pe(it.min,it.max),it.cacheKey),je)],e.parseClipAttributes=Me=>(0,r.createAttributeWithCacheKey)({min:Me.attributes.getFloat("min",u.MIN_CLIP),max:Me.attributes.getFloat("max",u.MAX_CLIP)}),e.clipV11=(Me,je)=>{const it=Xe(Me,je);return(0,e.clip)(Me,[je[0]],it)};const Xe=(Me,je)=>{if(je.length>=3&&(!Me.session.isInitializer(je[1].dataId)||!Me.session.isInitializer(je[2].dataId)))throw new Error("dynamic clip attributes are not allowed");const it=je.length>=3?je[1].numberData[0]:u.MIN_CLIP,Ke=je.length>=3?je[2].numberData[0]:u.MAX_CLIP;return(0,r.createAttributeWithCacheKey)({min:it,max:Ke})};e.ceil=(Me,je)=>[Me.run(De(Me,je[0],i()),je)],e.cos=(Me,je)=>[Me.run(De(Me,je[0],w()),je)],e.elu=(Me,je,it)=>[Me.run(De(Me,je[0],ae(it.alpha),it.cacheKey),je)],e.parseEluAttributes=Me=>(0,r.createAttributeWithCacheKey)({alpha:Me.attributes.getFloat("alpha",1)}),e.exp=(Me,je)=>[Me.run(De(Me,je[0],ue()),je)],e.floor=(Me,je)=>[Me.run(De(Me,je[0],he()),je)],e.identity=(Me,je)=>[Me.run(De(Me,je[0],ge()),je)],e.leakyRelu=(Me,je,it)=>[Me.run(De(Me,je[0],be(it.alpha),it.cacheKey),je)],e.parseLeakyReluAttributes=Me=>(0,r.createAttributeWithCacheKey)({alpha:Me.attributes.getFloat("alpha",.01)}),e.log=(Me,je)=>[Me.run(De(Me,je[0],ve()),je)],e.neg=(Me,je)=>[Me.run(De(Me,je[0],we()),je)],e.not=(Me,je)=>[Me.run(De(Me,je[0],Se()),je)],e.relu=(Me,je)=>[Me.run(De(Me,je[0],Re()),je)],e.sigmoid=(Me,je)=>[Me.run(De(Me,je[0],Te()),je)],e.sin=(Me,je)=>[Me.run(De(Me,je[0],Ae()),je)],e.sqrt=(Me,je)=>[Me.run(De(Me,je[0],Ce()),je)],e.tan=(Me,je)=>[Me.run(De(Me,je[0],Ve()),je)],e.tanh=(Me,je)=>[Me.run(De(Me,je[0],$e()),je)]},5611:(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.createUnpackProgramInfoLoader=e.createUnpackProgramInfo=void 0;const r=t(5060),u=t(2039),T=t(9390),d=t(2827),A={name:"unpack",inputNames:["A"],inputTypes:[u.TextureType.packed]};e.createUnpackProgramInfo=(le,G)=>{const B=G.dims.length,o=(0,d.getChannels)("rc",B),i=o.slice(-2),w=(0,T.getCoordsDataType)(B),ae=(0,d.unpackFromChannel)(),ue=G.dims.length===0?"":(function(ge,be){if(ge===1)return"rc";let ve="";for(let we=0;we<ge;we++)ve+=be[we],we<ge-1&&(ve+=",");return ve})(B,o),he=B<=1?"rc":`vec2(${i.join(",")})`,pe=`
    ${ae}
    void main() {
      ${w} rc = getOutputCoords();

       // Sample the texture with the coords to get the rgba channel value.
       vec4 packedInput = getA(${ue});

       ${(0,r.getGlsl)(le.session.backend.glContext.version).output} = vec4(getChannel(packedInput, ${he}), 0, 0, 0);
     }
   `;return Object.assign(Object.assign({},A),{hasMain:!0,output:{dims:G.dims,type:G.type,textureType:u.TextureType.unpacked},shaderSource:pe})},e.createUnpackProgramInfoLoader=(le,G)=>Object.assign(Object.assign({},A),{get:()=>(0,e.createUnpackProgramInfo)(le,G)})},8428:(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.parseUnsqueezeAttributes=e.unsqueezeV13=e.unsqueeze=void 0;const r=t(2517);e.unsqueeze=(d,A,le)=>{u(A);const G=r.ShapeUtil.unsqueezeShape(A[0].dims,le);return[d.reshapeUnpacked(A[0],G)]},e.unsqueezeV13=(d,A)=>(T(A),(0,e.unsqueeze)(d,[A[0]],Array.from(A[1].integerData))),e.parseUnsqueezeAttributes=d=>d.attributes.getInts("axes");const u=d=>{if(!d||d.length!==1)throw new Error("Unsqueeze requires 1 input.");if(d[0].type==="string")throw new Error("invalid input tensor types.")},T=d=>{if(!d||d.length!==2)throw new Error("Unsqueeze requires 2 inputs.");if(d[1].type!=="int32")throw new Error("Invalid input type.")}},9793:(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.scalesValidation=e.validateInputs=e.parseUpsampleAttributes=e.parseUpsampleAttributesV9=e.parseUpsampleAttributesV7=e.upsample=void 0;const r=t(246),u=t(5060),T=t(2039),d={name:"Upsample",inputNames:["X"],inputTypes:[T.TextureType.unpacked]};e.upsample=(le,G,B)=>((0,e.validateInputs)(G,B),[le.run(Object.assign(Object.assign({},d),{cacheHint:B.cacheKey,get:()=>A(le,G,B)}),G)]),e.parseUpsampleAttributesV7=le=>(0,e.parseUpsampleAttributes)(le,7),e.parseUpsampleAttributesV9=le=>(0,e.parseUpsampleAttributes)(le,9),e.parseUpsampleAttributes=(le,G)=>{const B=G>=10,o=le.attributes.getString("mode","nearest");if(o!=="nearest"&&o!=="linear"&&(G<11||o!=="cubic"))throw new Error(`unrecognized mode: ${o}`);let i=[];G<9&&(i=le.attributes.getFloats("scales"),(0,e.scalesValidation)(i,o,B));const w=le.attributes.getFloat("extrapolation_value",0),ae=G>10?le.attributes.getString("coordinate_transformation_mode","half_pixel"):"asymmetric";if(["asymmetric","pytorch_half_pixel","tf_half_pixel_for_nn","align_corners","tf_crop_and_resize","half_pixel"].indexOf(ae)===-1)throw new Error(`coordinate_transform_mode '${ae}' is not supported`);const ue=ae==="tf_crop_and_resize",he=ue,pe=o==="nearest"&&G>=11?le.attributes.getString("nearest_mode","round_prefer_floor"):"";if(["round_prefer_floor","round_prefer_ceil","floor","ceil",""].indexOf(pe)===-1)throw new Error(`nearest_mode '${pe}' is not supported`);const ge=le.attributes.getFloat("cubic_coeff_a",-.75),be=le.attributes.getInt("exclude_outside",0)!==0;if(be&&o!=="cubic")throw new Error("exclude_outside can be set to 1 only when mode is CUBIC.");const ve=G<11||o==="nearest"&&ae==="asymmetric"&&pe==="floor";let we=0,Se=0,Ae=0;return G>10?le.inputs.length>2?(we=1,Se=2,Ae=3):(Se=1,Ae=2):G===9&&(Se=1),(0,r.createAttributeWithCacheKey)({opset:G,isResize:B,mode:o,scales:i,extrapolationValue:w,coordinateTransformMode:ae,useExtrapolation:he,needRoiInput:ue,nearestMode:pe,cubicCoefficientA:ge,excludeOutside:be,useNearest2xOptimization:ve,roiInputIdx:we,scalesInputIdx:Se,sizesInputIdx:Ae})};const A=(le,G,B)=>{const o=(0,u.getGlsl)(le.session.backend.glContext.version),[i,w]=le.calculateTextureWidthAndHeight(G[0].dims,T.TextureType.unpacked),ae=G[0].dims.map(((Ae,Re)=>Math.floor(Ae*B.scales[Re]))),[ue,he]=le.calculateTextureWidthAndHeight(ae,T.TextureType.unpacked),pe=ae.length,ge=new Array(pe),be=new Array(pe);let ve=`
      int output_pitches[${pe}];
      int input_pitches[${pe}];
      `;for(let Ae=pe-1;Ae>=0;Ae--)ge[Ae]=Ae===pe-1?1:ge[Ae+1]*ae[Ae+1],be[Ae]=Ae===pe-1?1:be[Ae+1]*G[0].dims[Ae+1],ve+=`
        output_pitches[${Ae}] = ${ge[Ae]};
        input_pitches[${Ae}] = ${be[Ae]};
        `;const we=`
      float getInputFloat(int index) {
        vec2 coords = offsetToCoords(index, ${i}, ${w});
        float value = getColorAsFloat(${o.texture2D}(X, coords));
        return value;
      }
      `,Se=B.mode==="nearest"?`
    ${we}
    float process(int indices[${pe}]) {
      int input_index = 0;
      int output_index = coordsToOffset(TexCoords, ${ue}, ${he});

      ${ve}

      int d, m;
      for (int dim = 0; dim < ${pe}; ++dim) {
        d = output_index / output_pitches[dim];
        m = output_index - d * output_pitches[dim];
        output_index = m;

        if (scales[dim] != 1 && d > 0) {
          int d2 = d / scales[dim];
          m = d - d2 * scales[dim];
          d = d2;
        }
        input_index += input_pitches[dim] * d;
      }

      return getInputFloat(input_index);
    }`:pe===4?`
    ${we}
    float process(int indices[4]) {
      int input_index = 0;
      int output_index = coordsToOffset(TexCoords, ${ue}, ${he});

      ${ve}

      int m;
      int index_of_dim0, index_of_dim1, index_of_dim2, index_of_dim3;
      index_of_dim0 = output_index / output_pitches[0];
      m = output_index - index_of_dim0 * output_pitches[0];
      index_of_dim1 = m / output_pitches[1];
      m = m - index_of_dim1 * output_pitches[1];
      index_of_dim2 = m / output_pitches[2];
      m = m - index_of_dim2 * output_pitches[2];
      index_of_dim3 = m;

      int index_of_input_dim2, index_of_input_dim3, x_offset, y_offset;
      index_of_input_dim2 = index_of_dim2 / scales[2];
      y_offset = index_of_dim2 - index_of_input_dim2 * scales[2];
      index_of_input_dim3 = index_of_dim3 / scales[3];
      x_offset = index_of_dim3 - index_of_input_dim3 * scales[3];

      input_index = index_of_dim0 * input_pitches[0] +
            index_of_dim1 * input_pitches[1] +
            index_of_input_dim2 * input_pitches[2] +
            index_of_input_dim3;

      float x00 = getInputFloat(input_index);
      float x10, x01, x11;

      bool end_of_dim2 = false;
      if (index_of_input_dim2 == (${G[0].dims[2]} - 1)) {
        // It's the end in dimension 2
        x01 = x00;
        end_of_dim2 = true;
      } else {
        x01 = getInputFloat(input_index + input_pitches[2]);
      }

      if (index_of_input_dim3 == (input_pitches[2] - 1)) {
        // It's the end in dimension 3
        x10 = x00;
        x11 = x01;
      }
      else {
        x10 = getInputFloat(input_index + 1);
        x11 = end_of_dim2 ? x10 : getInputFloat(input_index + input_pitches[2] + 1);
      }

      float y0 = x00 + float(y_offset) * (x01 - x00) / float(scales[2]);
      float y1 = x10 + float(y_offset) * (x11 - x10) / float(scales[2]);
      return y0 + float(x_offset) * (y1 - y0) / float(scales[3]);
    }`:`
    ${we}
    float process(int indices[2]) {
      int input_index = 0;
      int output_index = coordsToOffset(TexCoords, ${ue}, ${he});

      ${ve}

      int m;
      int index_of_dim0, index_of_dim1;
      index_of_dim0 = output_index / output_pitches[0];
      m = output_index - index_of_dim0 * output_pitches[0];
      index_of_dim1 = m;

      int index_of_input_dim0, index_of_input_dim1, x_offset, y_offset;
      index_of_input_dim0 = index_of_dim0 / scales[0];
      y_offset = index_of_dim0 - index_of_input_dim0 * scales[0];
      index_of_input_dim1 = index_of_dim1 / scales[1];
      x_offset = index_of_dim1 - index_of_input_dim1 * scales[1];

      input_index = index_of_input_dim0 * input_pitches[0] + index_of_input_dim1;

      float x00 = getInputFloat(input_index);
      float x10, x01, x11;

      bool end_of_dim0 = false;
      if (index_of_input_dim0 == (${G[0].dims[0]} - 1)) {
        // It's the end in dimension 0
        x01 = x00;
        end_of_dim0 = true;
      } else {
        x01 = getInputFloat(input_index + input_pitches[0]);
      }

      if (index_of_input_dim1 == (input_pitches[0] - 1)) {
        // It's the end in dimension 1
        x10 = x00;
        x11 = x01;
      }
      else {
        x10 = getInputFloat(input_index + 1);
        x11 = end_of_dim0 ? x10 : getInputFloat(input_index + input_pitches[0] + 1);
      }

      float y0 = x00 + float(y_offset) * (x01 - x00) / float(scales[0]);
      float y1 = x10 + float(y_offset) * (x11 - x10) / float(scales[0]);
      return y0 + float(x_offset) * (y1 - y0) / float(scales[1]);
    }`;return Object.assign(Object.assign({},d),{output:{dims:ae,type:G[0].type,textureType:T.TextureType.unpacked},shaderSource:Se,variables:[{name:"scales",type:"int",arrayLength:B.scales.length,data:B.scales.map((Ae=>Math.ceil(Ae)))}]})};e.validateInputs=(le,G)=>{if(!le||G.opset<9&&le.length!==1||G.opset>=9&&G.opset<11&&le.length!==2||G.opset>=11&&le.length<2)throw new Error("invalid inputs.");if(G.scales.length>0&&le[0].dims.length!==G.scales.length)throw new Error("Invalid input shape.");if(le[0].type==="string")throw new Error("Invalid input tensor types.")},e.scalesValidation=(le,G,B)=>{if(B){for(const o of le)if(o<=0)throw new Error("Scale value should be greater than 0.")}else for(const o of le)if(o<1)throw new Error("Scale value should be greater than or equal to 1.");if(!(G!=="linear"&&G!=="cubic"||le.length===2||le.length===4&&le[0]===1&&le[1]===1))throw new Error(`'Linear' mode and 'Cubic' mode only support 2-D inputs ('Bilinear', 'Bicubic')         or 4-D inputs with the corresponding outermost 2 scale values being 1         in the ${B?"Resize":"Upsample"} opeartor.`)}},1958:(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ProgramManager=void 0;const r=t(1670),u=t(6231),T=t(8879),d=t(5060);e.ProgramManager=class{constructor(A,le,G){this.profiler=A,this.glContext=le,this.textureLayoutStrategy=G,this.repo=new Map,this.attributesBound=!1}getArtifact(A){return this.repo.get(A)}setArtifact(A,le){this.repo.set(A,le)}run(A,le,G){var B;this.profiler.event("op",`ProgramManager.run ${(B=A.programInfo.name)!==null&&B!==void 0?B:"unknown kernel"}`,(()=>{var o;const i=this.glContext.gl,w=A.program;i.useProgram(w);try{this.bindOutput(G),this.attributesBound||this.bindAttributes(A.attribLocations),this.bindUniforms(A.uniformLocations,(o=A.programInfo.variables)!==null&&o!==void 0?o:[],le)}catch(ae){throw u.Logger.error("ProgramManager",A.programInfo.shaderSource),ae}this.profiler.event("backend","GlContext.draw()",(()=>{this.glContext.draw()}))}),this.glContext)}dispose(){this.vertexShader&&this.glContext.deleteShader(this.vertexShader),this.repo.forEach((A=>this.glContext.deleteProgram(A.program)))}build(A,le,G){return this.profiler.event("backend","ProgramManager.build",(()=>{const B=new T.GlslPreprocessor(this.glContext,A,le,G),o=B.preprocess(),i=this.compile(o);return{programInfo:A,program:i,uniformLocations:this.getUniformLocations(i,B.context.programInfo.inputNames,B.context.programInfo.variables),attribLocations:this.getAttribLocations(i)}}))}compile(A){if(!this.vertexShader){u.Logger.verbose("ProrgramManager","Compiling and caching Vertex shader for the first time");const B=(0,d.getVertexShaderSource)(this.glContext.version);this.vertexShader=this.glContext.compileShader(B,this.glContext.gl.VERTEX_SHADER)}r.env.debug&&u.Logger.verbose("ProrgramManager",`FragShader:
${A}
`);const le=this.glContext.compileShader(A,this.glContext.gl.FRAGMENT_SHADER),G=this.glContext.createProgram(this.vertexShader,le);return this.glContext.deleteShader(le),G}bindOutput(A){const le=A.width,G=A.height;u.Logger.verbose("ProrgramManager",`Binding output texture to Framebuffer: w/h=${le}/${G}, shape=${A.shape}, type=${A.tensor.type}`),this.glContext.attachFramebuffer(A.texture,le,G)}bindAttributes(A){const le=A.position,G=A.textureCoord;this.glContext.setVertexAttributes(le,G),this.attributesBound=!0}bindUniforms(A,le,G){var B;const o=this.glContext.gl;let i=0;for(const{name:w,type:ae,location:ue,arrayLength:he}of A){const pe=(B=le.find((ge=>ge.name===w)))===null||B===void 0?void 0:B.data;if(ae!=="sampler2D"&&!pe)throw new Error(`variable '${w}' does not have data defined in program info`);switch(ae){case"sampler2D":this.bindTexture(G[i],ue,i),i++;break;case"float":he?o.uniform1fv(ue,pe):o.uniform1f(ue,pe);break;case"int":he?o.uniform1iv(ue,pe):o.uniform1i(ue,pe);break;default:throw new Error(`Uniform not implemented: ${ae}`)}}}bindTexture(A,le,G){this.glContext.bindTextureToUniform(A.texture,G,le)}getAttribLocations(A){return{position:this.getAttribLocation(A,"position"),textureCoord:this.getAttribLocation(A,"textureCoord")}}getUniformLocations(A,le,G){const B=[];if(le)for(const o of le)B.push({name:o,type:"sampler2D",location:this.getUniformLocation(A,o)});if(G)for(const o of G)B.push(Object.assign(Object.assign({},o),{location:this.getUniformLocation(A,o.name)}));return B}getUniformLocation(A,le){const G=this.glContext.gl.getUniformLocation(A,le);if(G===null)throw new Error(`Uniform ${le} not found.`);return G}getAttribLocation(A,le){return this.glContext.gl.getAttribLocation(A,le)}}},6416:(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.WebGLSessionHandler=void 0;const r=t(6231),u=t(1047),T=t(8316),d=t(1640),A=t(1958),le=t(7859),G=t(5702);e.WebGLSessionHandler=class{constructor(B,o){this.backend=B,this.context=o,this.layoutStrategy=new le.PreferLogicalStrategy(B.glContext.maxTextureSize),this.programManager=new A.ProgramManager(this.context.profiler,B.glContext,this.layoutStrategy),this.textureManager=new G.TextureManager(B.glContext,this.layoutStrategy,this.context.profiler,{reuseTextures:B.textureCacheMode==="full"}),this.packedTextureDataCache=new Map,this.unpackedTextureDataCache=new Map,this.pack=B.pack,this.pack2unpackMap=new Map,this.unpack2packMap=new Map}createInferenceHandler(){return new T.WebGLInferenceHandler(this)}onGraphInitialized(B){const o=B.getValues().filter((i=>i.from===-1&&i.tensor)).map((i=>i.tensor.dataId));this.initializers=new Set(o)}isInitializer(B){return!!this.initializers&&this.initializers.has(B)}addInitializer(B){this.initializers.add(B)}getTextureData(B,o){return o?this.packedTextureDataCache.get(B):this.unpackedTextureDataCache.get(B)}setTextureData(B,o,i=!1){r.Logger.verbose("WebGLSessionHandler","Storing Texture data in cache"),i?this.packedTextureDataCache.set(B,o):this.unpackedTextureDataCache.set(B,o)}dispose(){this.programManager.dispose(),this.textureManager.clearActiveTextures(),this.packedTextureDataCache.forEach((B=>this.textureManager.releaseTexture(B,!0))),this.packedTextureDataCache=new Map,this.unpackedTextureDataCache.forEach((B=>this.textureManager.releaseTexture(B,!0))),this.unpackedTextureDataCache=new Map}resolve(B,o,i){const w=(0,u.resolveOperator)(B,o,d.WEBGL_OP_RESOLVE_RULES);return{impl:w.opImpl,context:w.opInit?w.opInit(B,i):B}}}},7769:(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Uint8DataEncoder=e.RGBAFloatDataEncoder=e.RedFloat32DataEncoder=void 0;const r=t(6231);e.RedFloat32DataEncoder=class{constructor(u,T=1){if(T===1)this.internalFormat=u.R32F,this.format=u.RED,this.textureType=u.FLOAT,this.channelSize=T;else{if(T!==4)throw new Error(`Invalid number of channels: ${T}`);this.internalFormat=u.RGBA32F,this.format=u.RGBA,this.textureType=u.FLOAT,this.channelSize=T}}encode(u,T){let d,A;return u.constructor!==Float32Array&&(r.Logger.warning("Encoder","data was not of type Float32; creating new Float32Array"),A=new Float32Array(u)),T*this.channelSize>u.length?(r.Logger.warning("Encoder","Source data too small. Allocating larger array"),A=u,d=this.allocate(T*this.channelSize),A.forEach(((le,G)=>d[G]=le))):(A=u,d=A),d}allocate(u){return new Float32Array(4*u)}decode(u,T){return this.channelSize===1?u.filter(((d,A)=>A%4==0)).subarray(0,T):u.subarray(0,T)}},e.RGBAFloatDataEncoder=class{constructor(u,T=1,d){if(T!==1&&T!==4)throw new Error(`Invalid number of channels: ${T}`);this.internalFormat=u.RGBA,this.format=u.RGBA,this.channelSize=T,this.textureType=d||u.FLOAT}encode(u,T){let d=u;return this.channelSize===1&&(r.Logger.verbose("Encoder","Exploding into a larger array"),d=this.allocate(T),u.forEach(((A,le)=>d[4*le]=A))),d}allocate(u){return new Float32Array(4*u)}decode(u,T){return this.channelSize===1?u.filter(((d,A)=>A%4==0)).subarray(0,T):u.subarray(0,T)}},e.Uint8DataEncoder=class{constructor(u,T=1){if(this.channelSize=4,T===1)this.internalFormat=u.ALPHA,this.format=u.ALPHA,this.textureType=u.UNSIGNED_BYTE,this.channelSize=T;else{if(T!==4)throw new Error(`Invalid number of channels: ${T}`);this.internalFormat=u.RGBA,this.format=u.RGBA,this.textureType=u.UNSIGNED_BYTE,this.channelSize=T}}encode(u,T){return new Uint8Array(u.buffer,u.byteOffset,u.byteLength)}allocate(u){return new Uint8Array(u*this.channelSize)}decode(u,T){if(u instanceof Uint8Array)return u.subarray(0,T);throw new Error(`Invalid array type: ${u.constructor}`)}}},7859:(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.getBatchDim=e.sizeToSquarishShape=e.getRowsCols=e.sizeFromShape=e.isInt=e.parseAxisParam=e.squeezeShape=e.PreferLogicalStrategy=e.AlwaysKeepOriginalSizeStrategy=void 0;const r=t(6231),u=t(2517);function T(B,o){const i=[],w=[],ae=o!=null&&Array.isArray(o)&&o.length===0,ue=o==null||ae?null:d(o,B).sort();let he=0;for(let pe=0;pe<B.length;++pe){if(ue!=null){if(ue[he]===pe&&B[pe]!==1)throw new Error(`Can't squeeze axis ${pe} since its dim '${B[pe]}' is not 1`);(ue[he]==null||ue[he]>pe)&&B[pe]===1&&(i.push(B[pe]),w.push(pe)),ue[he]<=pe&&he++}B[pe]!==1&&(i.push(B[pe]),w.push(pe))}return{newShape:i,keptDims:w}}function d(B,o){const i=o.length;return B=B==null?o.map(((w,ae)=>ae)):[].concat(B),(0,u.assert)(B.every((w=>w>=-i&&w<i)),(()=>`All values in axis param must be in range [-${i}, ${i}) but got axis ${B}`)),(0,u.assert)(B.every(A),(()=>`All values in axis param must be integers but got axis ${B}`)),B.map((w=>w<0?i+w:w))}function A(B){return B%1==0}function le(B){if(B.length===0)return 1;let o=B[0];for(let i=1;i<B.length;i++)o*=B[i];return o}function G(B){const o=Math.ceil(Math.sqrt(B));return[o,Math.ceil(B/o)]}e.AlwaysKeepOriginalSizeStrategy=class{constructor(B){this.maxTextureSize=B}computeTextureWH(B,o){if(B.length===0)return[1,1];const i=this.maxTextureSize;if(o&&o.breakAxis!==void 0){const ue=o.breakAxis>=B.length?1:B.slice(o.breakAxis).reduce(((pe,ge)=>pe*ge)),he=o.breakAxis<=0?1:B.slice(0,o.breakAxis).reduce(((pe,ge)=>pe*ge));if(!(ue>i||he>i))return[ue,he];r.Logger.verbose("TextureLayout",`Given width/height preferences were unattainable: shape:${B}, breakAxis:${o.breakAxis}`)}const w=B.reduce(((ue,he)=>ue*he));let ae=Math.floor(Math.sqrt(w));for(;ae<i&&ae<w&&w%ae!=0;ae++);if(ae>=i||w%ae!=0)throw new Error(`The given dimensions are outside this GPU's boundaries: ${B}`);return[ae,w/ae]}},e.PreferLogicalStrategy=class{constructor(B){this.maxTextureSize=B}computeTextureWH(B,o){const i=this.computeTexture(B,o);return o&&o.isPacked&&(i[0]/=2,i[1]/=2),o&&o.reverseWH?[i[1],i[0]]:i}computeTexture(B,o){const i=o&&o.isPacked;if(B.length===0)return i?[2,2]:[1,1];let w=this.maxTextureSize;if(o&&o.breakAxis!==void 0){const he=o.breakAxis>=B.length?1:B.slice(o.breakAxis).reduce(((ge,be)=>ge*be)),pe=o.breakAxis<=0?1:B.slice(0,o.breakAxis).reduce(((ge,be)=>ge*be));if(!(he>w||pe>w))return[he,pe];r.Logger.verbose("TextureLayout",`Given width/height preferences were unattainable: shape:${B}, breakAxis:${o.breakAxis}`)}let ae=B.slice(0);i&&(w*=2,ae=ae.map(((he,pe)=>pe>=ae.length-2?ae[pe]%2==0?ae[pe]:ae[pe]+1:ae[pe])),ae.length===1&&(ae=[2,ae[0]])),ae.length!==2&&(ae=T(ae).newShape);const ue=le(ae);return ae.length<=1&&ue<=w?[1,ue]:ae.length===2&&ae[0]<=w&&ae[1]<=w?ae:ae.length===3&&ae[0]*ae[1]<=w&&ae[2]<=w?[ae[0]*ae[1],ae[2]]:ae.length===3&&ae[0]<=w&&ae[1]*ae[2]<=w?[ae[0],ae[1]*ae[2]]:ae.length===4&&ae[0]*ae[1]*ae[2]<=w&&ae[3]<=w?[ae[0]*ae[1]*ae[2],ae[3]]:ae.length===4&&ae[0]<=w&&ae[1]*ae[2]*ae[3]<=w?[ae[0],ae[1]*ae[2]*ae[3]]:i?G(ue/4).map((he=>2*he)):G(ue)}},e.squeezeShape=T,e.parseAxisParam=d,e.isInt=A,e.sizeFromShape=le,e.getRowsCols=function(B){if(B.length===0)throw Error("Cannot get rows and columns of an empty shape array.");return[B.length>1?B[B.length-2]:1,B[B.length-1]]},e.sizeToSquarishShape=G,e.getBatchDim=function(B,o=2){return le(B.slice(0,B.length-o))}},4057:(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.createTextureLayoutFromShape=e.calculateTextureWidthAndHeight=e.createTextureLayoutFromTextureType=void 0;const r=t(2517),u=t(2039);e.createTextureLayoutFromTextureType=(T,d,A)=>{const le=A===u.TextureType.unpacked||A===u.TextureType.unpackedReversed?1:4,G=A===u.TextureType.packed,B=A===u.TextureType.unpackedReversed||A===u.TextureType.packed,o=A===u.TextureType.packedLastDimension?d.length-1:void 0,i=A===u.TextureType.packedLastDimension?d.map(((w,ae)=>ae===d.length-1?4*w:w)):void 0;return(0,e.createTextureLayoutFromShape)(T,d,le,i,{isPacked:G,reverseWH:B,breakAxis:o})},e.calculateTextureWidthAndHeight=(T,d,A)=>{const le=(0,e.createTextureLayoutFromTextureType)(T,d,A);return[le.width,le.height]},e.createTextureLayoutFromShape=(T,d,A=1,le,G)=>{const B=!(!G||!G.isPacked),[o,i]=T.computeTextureWH(B&&le||d,G),w=d.length;let ae=d.slice(0);if(w===0&&(ae=[1]),A===1)le=d;else if(B){if(A!==4)throw new Error("a packed texture must be 4-channel");le=d,w>0&&(ae[w-1]=Math.ceil(ae[w-1]/2)),w>1&&(ae[w-2]=Math.ceil(ae[w-2]/2))}else if(!le)throw new Error("Unpacked shape is needed when using channels > 1");return{width:o,height:i,channels:A,isPacked:B,shape:ae,strides:r.ShapeUtil.computeStrides(ae),unpackedShape:le,reversedWH:G&&G.reverseWH}}},5702:(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.TextureManager=void 0;const r=t(6231);e.TextureManager=class{constructor(u,T,d,A){this.glContext=u,this.layoutStrategy=T,this.profiler=d,this.config=A,this.pendingRead=new Map,A.reuseTextures&&(this.inUseTextures=new Map,this.idleTextures=new Map,this.textureLookup=new Map)}createTextureFromLayout(u,T,d,A){const le=this.toEncoderType(u),G=this.glContext.getEncoder(le,T.channels||1,A);if(T.isPacked&&A===1)throw new Error("not implemented");const B=T.width,o=T.height;let i,w;if(this.config.reuseTextures){i=`${B}x${o}_${G.format}_${G.internalFormat}_${G.textureType}`,w=this.inUseTextures.get(i),w||(w=[],this.inUseTextures.set(i,w));const ue=this.idleTextures.get(i);if(ue&&ue.length>0){const he=ue.pop();return w.push(he),A===1&&this.glContext.updateTexture(he,B,o,G,this.toTextureData(u,d)),he}}r.Logger.verbose("TextureManager",`Creating new texture of size ${T.width}x${T.height}`);const ae=this.glContext.allocateTexture(B,o,G,this.toTextureData(u,d));return this.config.reuseTextures&&(w.push(ae),this.textureLookup.set(ae,i)),ae}readTexture(u,T,d){return d||(d=1),this.profiler.event("backend","TextureManager.readTexture",(()=>{const A=u.shape.reduce(((G,B)=>G*B))*d,le=this.glContext.readTexture(u.texture,u.width,u.height,A,this.toEncoderType(T),d);return this.toTensorData(T,le)}))}async readTextureAsync(u,T,d){const A=u.tensor.dataId;if(d||(d=1),this.pendingRead.has(A)){const le=this.pendingRead.get(A);return new Promise((G=>le==null?void 0:le.push(G)))}return this.profiler.event("backend","TextureManager.readTextureAsync",(async()=>{this.pendingRead.set(A,[]);const le=u.shape.reduce(((i,w)=>i*w))*d;await this.glContext.createAndWaitForFence();const G=this.glContext.readTexture(u.texture,u.width,u.height,le,this.toEncoderType(T),d),B=this.toTensorData(T,G),o=this.pendingRead.get(A);return this.pendingRead.delete(A),o==null||o.forEach((i=>i(B))),B}))}readUint8TextureAsFloat(u){return this.profiler.event("backend","TextureManager.readUint8TextureAsFloat",(()=>{const T=u.shape.reduce(((A,le)=>A*le)),d=this.glContext.readTexture(u.texture,u.width,u.height,4*T,"byte",4);return new Float32Array(d.buffer,d.byteOffset,T)}))}releaseTexture(u,T){let d;if(this.config.reuseTextures&&(d=this.textureLookup.get(u.texture),d)){T&&this.textureLookup.delete(d);const A=this.inUseTextures.get(d);if(A){const le=A.indexOf(u.texture);if(le!==-1){A.splice(le,1);let G=this.idleTextures.get(d);G||(G=[],this.idleTextures.set(d,G)),G.push(u.texture)}}}d&&!T||(r.Logger.verbose("TextureManager",`Deleting texture of size ${u.width}x${u.height}`),this.glContext.deleteTexture(u.texture))}toTensorData(u,T){switch(u){case"int16":return T instanceof Int16Array?T:Int16Array.from(T);case"int32":return T instanceof Int32Array?T:Int32Array.from(T);case"int8":return T instanceof Int8Array?T:Int8Array.from(T);case"uint16":return T instanceof Uint16Array?T:Uint16Array.from(T);case"uint32":return T instanceof Uint32Array?T:Uint32Array.from(T);case"uint8":case"bool":return T instanceof Uint8Array?T:Uint8Array.from(T);case"float32":return T instanceof Float32Array?T:Float32Array.from(T);case"float64":return T instanceof Float64Array?T:Float64Array.from(T);default:throw new Error(`TensorData type ${u} is not supported`)}}toTextureData(u,T){if(T)return T instanceof Float32Array?T:new Float32Array(T)}toEncoderType(u){return"float"}clearActiveTextures(){this.glContext.clearActiveTextures()}}},2039:(n,e)=>{var t;Object.defineProperty(e,"__esModule",{value:!0}),e.TextureType=void 0,(t=e.TextureType||(e.TextureType={}))[t.unpacked=0]="unpacked",t[t.unpackedReversed=1]="unpackedReversed",t[t.packed=2]="packed",t[t.downloadUint8AsFloat=3]="downloadUint8AsFloat",t[t.packedLastDimension=4]="packedLastDimension"},9390:(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.getGlChannels=e.getCoordsDataType=e.getSqueezedParams=e.squeezeInputShape=e.generateShaderFuncNameFromInputSamplerNameAtOutCoords=e.generateShaderFuncNameFromInputSamplerName=e.repeatedTry=e.getPackedShape=void 0;const r=t(2517);e.getPackedShape=function(u){const T=u.length;return u.slice(0,T-1).concat(u[T-1]/4)},e.repeatedTry=async function(u,T=(A=>0),d){return new Promise(((A,le)=>{let G=0;const B=()=>{if(u())return void A();G++;const o=T(G);d!=null&&G>=d?le():setTimeout(B,o)};B()}))},e.generateShaderFuncNameFromInputSamplerName=function(u){return(0,r.assert)(u!==void 0&&u.length!==0,(()=>"empty string found for sampler name")),"get"+u.charAt(0).toUpperCase()+u.slice(1)},e.generateShaderFuncNameFromInputSamplerNameAtOutCoords=function(u){return(0,r.assert)(u!==void 0&&u.length!==0,(()=>"empty string found for sampler name")),"get"+u.charAt(0).toUpperCase()+u.slice(1)+"AtOutCoords"},e.squeezeInputShape=function(u,T){let d=JSON.parse(JSON.stringify(u));return d=T,d},e.getSqueezedParams=function(u,T){return T.map((d=>u[d])).join(", ")},e.getCoordsDataType=function(u){if(u<=1)return"int";if(u===2)return"ivec2";if(u===3)return"ivec3";if(u===4)return"ivec4";if(u===5)return"ivec5";if(u===6)return"ivec6";throw Error(`GPU for rank ${u} is not yet supported`)},e.getGlChannels=function(u=6){return["x","y","z","w","u","v"].slice(0,u)}},7305:(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.createNewWebGLContext=e.createWebGLContext=void 0;const r=t(6231),u=t(1713),T={};function d(A){const le=(function(){if(typeof document>"u"){if(typeof OffscreenCanvas>"u")throw new TypeError("failed to create canvas: OffscreenCanvas is not supported");return new OffscreenCanvas(1,1)}const o=document.createElement("canvas");return o.width=1,o.height=1,o})();let G;const B={alpha:!1,depth:!1,antialias:!1,stencil:!1,preserveDrawingBuffer:!1,premultipliedAlpha:!1,failIfMajorPerformanceCaveat:!1};if((!A||A==="webgl2")&&(G=le.getContext("webgl2",B),G))try{return new u.WebGLContext(G,2)}catch(o){r.Logger.warning("GlContextFactory",`failed to create WebGLContext using contextId 'webgl2'. Error: ${o}`)}if((!A||A==="webgl")&&(G=le.getContext("webgl",B)||le.getContext("experimental-webgl",B),G))try{return new u.WebGLContext(G,1)}catch(o){r.Logger.warning("GlContextFactory",`failed to create WebGLContext using contextId 'webgl' or 'experimental-webgl'. Error: ${o}`)}throw new Error("WebGL is not supported")}e.createWebGLContext=function A(le){let G;le&&le!=="webgl2"||!("webgl2"in T)?le&&le!=="webgl"||!("webgl"in T)||(G=T.webgl):G=T.webgl2,G=G||d(le),le=le||G.version===1?"webgl":"webgl2";const B=G.gl;return T[le]=G,B.isContextLost()?(delete T[le],A(le)):(B.disable(B.DEPTH_TEST),B.disable(B.STENCIL_TEST),B.disable(B.BLEND),B.disable(B.DITHER),B.disable(B.POLYGON_OFFSET_FILL),B.disable(B.SAMPLE_COVERAGE),B.enable(B.SCISSOR_TEST),B.enable(B.CULL_FACE),B.cullFace(B.BACK),G)},e.createNewWebGLContext=d},1713:function(n,e,t){var r=this&&this.__createBinding||(Object.create?function(B,o,i,w){w===void 0&&(w=i);var ae=Object.getOwnPropertyDescriptor(o,i);ae&&!("get"in ae?!o.__esModule:ae.writable||ae.configurable)||(ae={enumerable:!0,get:function(){return o[i]}}),Object.defineProperty(B,w,ae)}:function(B,o,i,w){w===void 0&&(w=i),B[w]=o[i]}),u=this&&this.__setModuleDefault||(Object.create?function(B,o){Object.defineProperty(B,"default",{enumerable:!0,value:o})}:function(B,o){B.default=o}),T=this&&this.__importStar||function(B){if(B&&B.__esModule)return B;var o={};if(B!=null)for(var i in B)i!=="default"&&Object.prototype.hasOwnProperty.call(B,i)&&r(o,B,i);return u(o,B),o};Object.defineProperty(e,"__esModule",{value:!0}),e.WebGLContext=e.linearSearchLastTrue=void 0;const d=t(1670),A=T(t(7769)),le=t(9390);function G(B){let o=0;for(;o<B.length&&B[o]();++o);return o-1}e.linearSearchLastTrue=G,e.WebGLContext=class{constructor(B,o){this.frameBufferBound=!1,this.itemsToPoll=[],this.gl=B,this.version=o,this.getExtensions(),this.vertexbuffer=this.createVertexbuffer(),this.framebuffer=this.createFramebuffer(),this.queryVitalParameters()}allocateTexture(B,o,i,w){const ae=this.gl,ue=ae.createTexture();ae.bindTexture(ae.TEXTURE_2D,ue),ae.texParameteri(ae.TEXTURE_2D,ae.TEXTURE_MIN_FILTER,ae.NEAREST),ae.texParameteri(ae.TEXTURE_2D,ae.TEXTURE_MAG_FILTER,ae.NEAREST),ae.texParameteri(ae.TEXTURE_2D,ae.TEXTURE_WRAP_S,ae.CLAMP_TO_EDGE),ae.texParameteri(ae.TEXTURE_2D,ae.TEXTURE_WRAP_T,ae.CLAMP_TO_EDGE);const he=w?i.encode(w,B*o):null;return ae.texImage2D(ae.TEXTURE_2D,0,i.internalFormat,B,o,0,i.format,i.textureType,he),this.checkError(),ue}updateTexture(B,o,i,w,ae){const ue=this.gl;ue.bindTexture(ue.TEXTURE_2D,B);const he=w.encode(ae,o*i);ue.texSubImage2D(ue.TEXTURE_2D,0,0,0,o,i,w.format,w.textureType,he),this.checkError()}attachFramebuffer(B,o,i){const w=this.gl;w.bindTexture(w.TEXTURE_2D,B),w.bindFramebuffer(w.FRAMEBUFFER,this.framebuffer),w.framebufferTexture2D(w.FRAMEBUFFER,w.COLOR_ATTACHMENT0,w.TEXTURE_2D,B,0),this.checkError(),w.viewport(0,0,o,i),w.scissor(0,0,o,i)}readTexture(B,o,i,w,ae,ue){const he=this.gl;ue||(ue=1),this.frameBufferBound||this.attachFramebuffer(B,o,i);const pe=this.getEncoder(ae,ue),ge=pe.allocate(o*i);return he.bindTexture(he.TEXTURE_2D,B),he.framebufferTexture2D(he.FRAMEBUFFER,he.COLOR_ATTACHMENT0,he.TEXTURE_2D,B,0),he.readPixels(0,0,o,i,he.RGBA,pe.textureType,ge),this.checkError(),pe.decode(ge,w)}isFramebufferReady(){return!0}getActiveTexture(){const B=this.gl;return"TEXTURE"+(B.getParameter(this.gl.ACTIVE_TEXTURE)-B.TEXTURE0)}getTextureBinding(){return this.gl.getParameter(this.gl.TEXTURE_BINDING_2D)}getFramebufferBinding(){return this.gl.getParameter(this.gl.FRAMEBUFFER_BINDING)}setVertexAttributes(B,o){const i=this.gl;i.vertexAttribPointer(B,3,i.FLOAT,!1,20,0),i.enableVertexAttribArray(B),o!==-1&&(i.vertexAttribPointer(o,2,i.FLOAT,!1,20,12),i.enableVertexAttribArray(o)),this.checkError()}createProgram(B,o){const i=this.gl,w=i.createProgram();return i.attachShader(w,B),i.attachShader(w,o),i.linkProgram(w),w}compileShader(B,o){const i=this.gl,w=i.createShader(o);if(!w)throw new Error(`createShader() returned null with type ${o}`);if(i.shaderSource(w,B),i.compileShader(w),i.getShaderParameter(w,i.COMPILE_STATUS)===!1)throw new Error(`Failed to compile shader: ${i.getShaderInfoLog(w)}
Shader source:
${B}`);return w}deleteShader(B){this.gl.deleteShader(B)}bindTextureToUniform(B,o,i){const w=this.gl;w.activeTexture(w.TEXTURE0+o),this.checkError(),w.bindTexture(w.TEXTURE_2D,B),this.checkError(),w.uniform1i(i,o),this.checkError()}draw(){this.gl.drawArrays(this.gl.TRIANGLE_STRIP,0,4),this.checkError()}checkError(){if(d.env.debug){const B=this.gl,o=B.getError();let i="";switch(o){case B.NO_ERROR:return;case B.INVALID_ENUM:i="INVALID_ENUM";break;case B.INVALID_VALUE:i="INVALID_VALUE";break;case B.INVALID_OPERATION:i="INVALID_OPERATION";break;case B.INVALID_FRAMEBUFFER_OPERATION:i="INVALID_FRAMEBUFFER_OPERATION";break;case B.OUT_OF_MEMORY:i="OUT_OF_MEMORY";break;case B.CONTEXT_LOST_WEBGL:i="CONTEXT_LOST_WEBGL";break;default:i=`Unknown WebGL Error: ${o.toString(16)}`}throw new Error(i)}}deleteTexture(B){this.gl.deleteTexture(B)}deleteProgram(B){this.gl.deleteProgram(B)}getEncoder(B,o,i=0){if(this.version===2)return new A.RedFloat32DataEncoder(this.gl,o);switch(B){case"float":return i===1||this.isRenderFloat32Supported?new A.RGBAFloatDataEncoder(this.gl,o):new A.RGBAFloatDataEncoder(this.gl,o,this.textureHalfFloatExtension.HALF_FLOAT_OES);case"int":throw new Error("not implemented");case"byte":return new A.Uint8DataEncoder(this.gl,o);default:throw new Error(`Invalid dataType: ${B}`)}}clearActiveTextures(){const B=this.gl;for(let o=0;o<this.maxTextureImageUnits;++o)B.activeTexture(B.TEXTURE0+o),B.bindTexture(B.TEXTURE_2D,null)}dispose(){if(this.disposed)return;const B=this.gl;B.bindFramebuffer(B.FRAMEBUFFER,null),B.deleteFramebuffer(this.framebuffer),B.bindBuffer(B.ARRAY_BUFFER,null),B.deleteBuffer(this.vertexbuffer),B.bindBuffer(B.ELEMENT_ARRAY_BUFFER,null),B.finish(),this.disposed=!0}createDefaultGeometry(){return new Float32Array([-1,1,0,0,1,-1,-1,0,0,0,1,1,0,1,1,1,-1,0,1,0])}createVertexbuffer(){const B=this.gl,o=B.createBuffer();if(!o)throw new Error("createBuffer() returned null");const i=this.createDefaultGeometry();return B.bindBuffer(B.ARRAY_BUFFER,o),B.bufferData(B.ARRAY_BUFFER,i,B.STATIC_DRAW),this.checkError(),o}createFramebuffer(){const B=this.gl.createFramebuffer();if(!B)throw new Error("createFramebuffer returned null");return B}queryVitalParameters(){const B=this.gl;if(this.isFloatTextureAttachableToFrameBuffer=this.checkFloatTextureAttachableToFrameBuffer(),this.isRenderFloat32Supported=this.checkRenderFloat32(),this.isFloat32DownloadSupported=this.checkFloat32Download(),this.version===1&&!this.textureHalfFloatExtension&&!this.isRenderFloat32Supported)throw new Error("both float32 and float16 TextureType are not supported");this.isBlendSupported=!this.isRenderFloat32Supported||this.checkFloat32Blend(),this.maxTextureSize=B.getParameter(B.MAX_TEXTURE_SIZE),this.maxTextureImageUnits=B.getParameter(B.MAX_TEXTURE_IMAGE_UNITS),this.version}getExtensions(){this.version===2?(this.colorBufferFloatExtension=this.gl.getExtension("EXT_color_buffer_float"),this.disjointTimerQueryWebgl2Extension=this.gl.getExtension("EXT_disjoint_timer_query_webgl2")):(this.textureFloatExtension=this.gl.getExtension("OES_texture_float"),this.textureHalfFloatExtension=this.gl.getExtension("OES_texture_half_float"))}checkFloatTextureAttachableToFrameBuffer(){const B=this.gl,o=B.createTexture();B.bindTexture(B.TEXTURE_2D,o);const i=this.version===2?B.RGBA32F:B.RGBA;B.texImage2D(B.TEXTURE_2D,0,i,1,1,0,B.RGBA,B.FLOAT,null);const w=B.createFramebuffer();B.bindFramebuffer(B.FRAMEBUFFER,w),B.framebufferTexture2D(B.FRAMEBUFFER,B.COLOR_ATTACHMENT0,B.TEXTURE_2D,o,0);const ae=B.checkFramebufferStatus(B.FRAMEBUFFER)===B.FRAMEBUFFER_COMPLETE;return B.bindTexture(B.TEXTURE_2D,null),B.bindFramebuffer(B.FRAMEBUFFER,null),B.deleteTexture(o),B.deleteFramebuffer(w),ae}checkRenderFloat32(){if(this.version===2){if(!this.colorBufferFloatExtension)return!1}else if(!this.textureFloatExtension)return!1;return this.isFloatTextureAttachableToFrameBuffer}checkFloat32Download(){if(this.version===2){if(!this.colorBufferFloatExtension)return!1}else if(!this.textureFloatExtension||!this.gl.getExtension("WEBGL_color_buffer_float"))return!1;return this.isFloatTextureAttachableToFrameBuffer}checkFloat32Blend(){const B=this.gl;let o,i,w,ae,ue;try{o=B.createTexture(),i=B.createFramebuffer(),B.bindTexture(B.TEXTURE_2D,o);const he=this.version===2?B.RGBA32F:B.RGBA;return B.texImage2D(B.TEXTURE_2D,0,he,1,1,0,B.RGBA,B.FLOAT,null),B.bindFramebuffer(B.FRAMEBUFFER,i),B.framebufferTexture2D(B.FRAMEBUFFER,B.COLOR_ATTACHMENT0,B.TEXTURE_2D,o,0),B.enable(B.BLEND),w=B.createShader(B.VERTEX_SHADER),!!w&&(B.shaderSource(w,"void main(){}"),B.compileShader(w),ae=B.createShader(B.FRAGMENT_SHADER),!!ae&&(B.shaderSource(ae,"precision highp float;void main(){gl_FragColor=vec4(0.5);}"),B.compileShader(ae),ue=B.createProgram(),!!ue&&(B.attachShader(ue,w),B.attachShader(ue,ae),B.linkProgram(ue),B.useProgram(ue),B.drawArrays(B.POINTS,0,1),B.getError()===B.NO_ERROR)))}finally{B.disable(B.BLEND),ue&&B.deleteProgram(ue),w&&B.deleteShader(w),ae&&B.deleteShader(ae),i&&(B.bindFramebuffer(B.FRAMEBUFFER,null),B.deleteFramebuffer(i)),o&&(B.bindTexture(B.TEXTURE_2D,null),B.deleteTexture(o))}}beginTimer(){if(this.version===2&&this.disjointTimerQueryWebgl2Extension){const B=this.gl,o=this.disjointTimerQueryWebgl2Extension,i=B.createQuery();return B.beginQuery(o.TIME_ELAPSED_EXT,i),i}throw new Error("WebGL1 profiling currently not supported.")}endTimer(){if(this.version!==2||!this.disjointTimerQueryWebgl2Extension)throw new Error("WebGL1 profiling currently not supported");{const B=this.gl,o=this.disjointTimerQueryWebgl2Extension;B.endQuery(o.TIME_ELAPSED_EXT)}}isTimerResultAvailable(B){let o=!1,i=!1;if(this.version!==2||!this.disjointTimerQueryWebgl2Extension)throw new Error("WebGL1 profiling currently not supported");{const w=this.gl,ae=this.disjointTimerQueryWebgl2Extension;o=w.getQueryParameter(B,w.QUERY_RESULT_AVAILABLE),i=w.getParameter(ae.GPU_DISJOINT_EXT)}return o&&!i}getTimerResult(B){let o=0;if(this.version!==2)throw new Error("WebGL1 profiling currently not supported");{const i=this.gl;o=i.getQueryParameter(B,i.QUERY_RESULT),i.deleteQuery(B)}return o/1e6}async waitForQueryAndGetTime(B){return await(0,le.repeatedTry)((()=>this.isTimerResultAvailable(B))),this.getTimerResult(B)}async createAndWaitForFence(){const B=this.createFence(this.gl);return this.pollFence(B)}createFence(B){let o;const i=B,w=i.fenceSync(i.SYNC_GPU_COMMANDS_COMPLETE,0);return B.flush(),o=w===null?()=>!0:()=>{const ae=i.clientWaitSync(w,0,0);return ae===i.ALREADY_SIGNALED||ae===i.CONDITION_SATISFIED},{query:w,isFencePassed:o}}async pollFence(B){return new Promise((o=>{this.addItemToPoll((()=>B.isFencePassed()),(()=>o()))}))}pollItems(){const B=G(this.itemsToPoll.map((o=>o.isDoneFn)));for(let o=0;o<=B;++o){const{resolveFn:i}=this.itemsToPoll[o];i()}this.itemsToPoll=this.itemsToPoll.slice(B+1)}async addItemToPoll(B,o){this.itemsToPoll.push({isDoneFn:B,resolveFn:o}),this.itemsToPoll.length>1||await(0,le.repeatedTry)((()=>(this.pollItems(),this.itemsToPoll.length===0)))}}},1036:(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ExecutionPlan=void 0;const r=t(6231);class u{constructor(d,A){this.op=d,this.node=A}}e.ExecutionPlan=class{constructor(T,d,A){this.graph=T,this.profiler=A,this.initialize(d)}initialize(T){this.profiler.event("session","ExecutionPlan.initialize",(()=>{const d=this.graph.getNodes();if(d.length!==T.length)throw new Error("The size of nodes and OPs do not match.");this._ops=T.map(((A,le)=>new u(A,d[le]))),this.reset(),this._starter=[],this._ops.forEach(((A,le)=>{let G=!0;for(const B of A.node.inputs)if(!this._values[B]&&this.graph.getInputIndices().indexOf(B)===-1){G=!1;break}G&&this._starter.push(le)}))}))}reset(){this._values=this.graph.getValues().map((T=>T.tensor))}async execute(T,d){return this.profiler.event("session","ExecutionPlan.execute",(async()=>{this.reset();const A=T.createInferenceHandler(),le=this.graph.getInputIndices();if(d.length!==le.length)throw new Error(`number of input tensors don't match the number of inputs to the model: actual: ${d.length} expected: ${le.length}`);d.forEach(((ae,ue)=>{const he=le[ue];this._values[he]=ae}));const G=this._starter.slice(0),B=this.graph.getValues(),o=this.graph.getNodes();let i=0;for(;i<G.length;){const ae=G[i++],ue=this._ops[ae],he=ue.node.inputs.map((ve=>this._values[ve]));if(he.indexOf(void 0)!==-1)throw new Error(`unresolved input detected: op: ${ue.node}`);const pe=he;r.Logger.verbose("ExecPlan",`Runing op:${ue.node.name} (${pe.map(((ve,we)=>`'${ue.node.inputs[we]}': ${ve.type}[${ve.dims.join(",")}]`)).join(", ")})`);const ge=await this.profiler.event("node",ue.node.name,(async()=>ue.op.impl(A,pe,ue.op.context)));if(ge.length!==ue.node.outputs.length)throw new Error("the size of output does not match model definition.");ge.forEach(((ve,we)=>{const Se=ue.node.outputs[we];if(this._values[Se])throw new Error(`output [${Se}] already has value: op:${ue.node.name}`);this._values[Se]=ve}));const be=new Set;ge.forEach(((ve,we)=>{const Se=ue.node.outputs[we];for(const Ae of B[Se].to){const Re=o[Ae];let Te=!0;for(const Ce of Re.inputs)if(!this._values[Ce]){Te=!1;break}Te&&be.add(Ae)}})),G.push(...be)}const w=[];for(let ae=0;ae<this.graph.getOutputIndices().length;ae++){const ue=this.graph.getOutputIndices()[ae],he=this._values[ue];if(he===void 0)throw new Error(`required output [${ue}] does not have value`);ue===0?await he.getData():he.data,w.push(he)}return r.Logger.verbose("ExecPlan","disposing of inferenceHandler"),A.dispose(),w}))}}},7070:(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Graph=void 0;const r=t(1446),u=t(7778),T=t(9395),d=t(9162),A=t(2517);var le=T.onnxruntime.experimental.fbs;e.Graph={from:(i,w)=>new o(i,w)};class G{constructor(w){this._from=void 0,this._to=[],this.tensor=void 0,this.type=void 0,w&&(this.type=A.ProtoUtil.tensorValueTypeFromProto(w.type.tensorType))}get from(){return this._from}get to(){return this._to}}class B{constructor(w,ae){w instanceof r.onnx.NodeProto?(this.name=w.name,this.opType=w.opType,this.attributes=new u.Attribute(w.attribute)):w instanceof le.Node&&(this.name=ae??w.name(),this.opType=w.opType(),this.attributes=new u.Attribute(A.ProtoUtil.tensorAttributesFromORTFormat(w))),this.inputs=[],this.outputs=[],this.executeNode=!0}}class o{constructor(w,ae){if(!w)throw new TypeError("graph is empty");this.buildGraph(w),this.transformGraph(ae),this.checkIsAcyclic()}getInputIndices(){return this._allInputIndices}getInputNames(){return this._allInputNames}getOutputIndices(){return this._allOutputIndices}getOutputNames(){return this._allOutputNames}getValues(){return this._allData}getNodes(){return this._nodes}buildGraph(w){if(w instanceof r.onnx.GraphProto)this.buildGraphFromOnnxFormat(w);else{if(!(w instanceof le.Graph))throw new TypeError("Graph type is not supported.");this.buildGraphFromOrtFormat(w)}}buildGraphFromOnnxFormat(w){const ae=new Map;this._allData=[],this._allInputIndices=[],this._allInputNames=[],this._allOutputIndices=[],this._allOutputNames=[],this._nodes=[];const ue=new Map;if(!w.input)throw new Error("missing information in graph: input");const he=[];for(const pe of w.input){if(ae.has(pe.name))throw new Error(`duplicated input name: ${pe.name}`);const ge=this._allData.push(new G(pe))-1;ae.set(pe.name,ge),he.push(pe.name)}if(!w.initializer)throw new Error("missing information in graph: initializer");for(const pe of w.initializer){let ge=ae.get(pe.name);if(ge===void 0){const be=new G;be.type={shape:{dims:A.ProtoUtil.tensorDimsFromProto(pe.dims)},tensorType:A.ProtoUtil.tensorDataTypeFromProto(pe.dataType)},ge=this._allData.push(be)-1,ae.set(pe.name,ge)}this._allData[ge]._from=-1,this._allData[ge].tensor=d.Tensor.fromProto(pe)}for(let pe=0;pe<this._allData.length;pe++)this._allData[pe].tensor||(this._allInputIndices.push(pe),this._allInputNames.push(he[pe]));if(!w.output)throw new Error("missing information in graph: output");for(const pe of w.output){if(ae.has(pe.name))throw new Error(`duplicated output name: ${pe.name}`);const ge=this._allData.push(new G(pe))-1;ae.set(pe.name,ge),this._allOutputIndices.push(ge),this._allOutputNames.push(pe.name)}if(!w.node)throw new Error("missing information in graph: node");for(const pe of w.node){if(!pe.name)for(let be=0;;be++){const ve=`unnamed_${pe.opType}_${be}`;if(!ue.has(ve)){pe.name=ve;break}}if(ue.has(pe.name))throw new Error(`duplicated node name: ${pe.name}`);const ge=this._nodes.push(new B(pe))-1;ue.set(pe.name,ge)}for(let pe=0;pe<this._nodes.length;pe++){const ge=this._nodes[pe],be=w.node[pe];if(!be.output)throw new Error(`missing output for node: ${be.name}`);for(const ve of be.output){let we=ae.get(ve);if(we===void 0&&(we=this._allData.push(new G)-1,ae.set(ve,we)),ge.outputs.push(we),this._allData[we]._from!==void 0)throw new Error(`multiple nodes output to one data value: ${we}`);if(this._allData[we]._from=pe,be.opType==="Constant"){if(!be.attribute||be.attribute.length!==1||!be.attribute[0].t)throw new Error("missing attributes or missing tensor value in attributes for this Constant operator");if(!be.output||be.output.length!==1)throw new Error("missing output or incorrect number of outputs for this Constant operator");ge.outputs.pop(),ge.executeNode=!1,this._allData[we]._from=-1,this._allData[we].tensor=d.Tensor.fromProto(be.attribute[0].t)}}}for(let pe=0;pe<this._nodes.length;pe++){const ge=this._nodes[pe],be=w.node[pe];if(!be.input)throw new Error(`missing input for node: ${be.name}`);for(const ve of be.input){const we=ae.get(ve);if(we===void 0){if(ve===""&&be.input.length===3&&be.opType==="Resize")continue;throw new Error(`unrecognized input '${ve}' for node: ${be.name}`)}ge.inputs.push(we),this._allData[we]._to.push(pe)}}return!0}buildGraphFromOrtFormat(w){var ae,ue,he;const pe=new Map;this._allData=[],this._allInputIndices=[],this._allInputNames=[],this._allOutputIndices=[],this._allOutputNames=[],this._nodes=[];const ge=new Map,be=[];for(let ve=0;ve<w.inputsLength();ve++){const we=w.inputs(ve);if(pe.has(we))throw new Error(`duplicated input name: ${we}`);for(let Se=0;Se<w.nodeArgsLength();Se++)if(((ae=w.nodeArgs(Se))===null||ae===void 0?void 0:ae.name())===we){const Ae=new G;if(((he=(ue=w.nodeArgs(Se))===null||ue===void 0?void 0:ue.type())===null||he===void 0?void 0:he.valueType())!==le.TypeInfoValue.tensor_type)throw new Error("Unexpected value type for the nodeArg.");const Re=w.nodeArgs(Se).type().value(new le.TensorTypeAndShape),Te=A.ProtoUtil.tensorDataTypeFromProto(Re.elemType()),Ce=Re.shape(),Ve=[];for(let He=0;He<Ce.dimLength();He++)Ve.push(A.LongUtil.longToNumber(Ce.dim(He).value().dimValue()));Ae.type={shape:{dims:Ve},tensorType:Te};const $e=this._allData.push(Ae)-1;pe.set(we,$e),be.push(we)}}for(let ve=0;ve<w.initializersLength();ve++){const we=w.initializers(ve);let Se=pe.get(we.name());if(Se===void 0){const Ae=new G,Re=A.ProtoUtil.tensorDimsFromORTFormat(we),Te=A.ProtoUtil.tensorDataTypeFromProto(we.dataType());Ae.type={shape:{dims:Re},tensorType:Te},Se=this._allData.push(Ae)-1,pe.set(we.name(),Se)}this._allData[Se]._from=-1,this._allData[Se].tensor=d.Tensor.fromOrtTensor(we)}for(let ve=0;ve<this._allData.length;ve++)this._allData[ve].tensor||(this._allInputIndices.push(ve),this._allInputNames.push(be[ve]));for(let ve=0;ve<w.outputsLength();ve++){const we=w.outputs(ve);if(pe.has(we))throw new Error(`duplicated output name: ${we}`);const Se=this._allData.push(new G)-1;pe.set(we,Se),this._allOutputIndices.push(Se),this._allOutputNames.push(we)}if(!w.nodes)throw new Error("missing information in graph: node");for(let ve=0;ve<w.nodesLength();ve++){const we=w.nodes(ve);let Se=we.name();if(!Se)for(let Re=0;Se=`unnamed_${we.opType()}_${Re}`,ge.has(Se);Re++);if(ge.has(Se))throw new Error(`duplicated node name: ${Se}`);const Ae=this._nodes.push(new B(we,Se))-1;ge.set(Se,Ae)}for(let ve=0;ve<this._nodes.length;ve++){const we=this._nodes[ve],Se=w.nodes(ve);if(Se==null)throw new Error(`No node exists at index ${ve}`);if((Se==null?void 0:Se.outputsLength())===0)throw new Error(`missing output for node: ${Se.name}`);for(let Ae=0;Ae<(Se==null?void 0:Se.outputsLength());Ae++){const Re=Se==null?void 0:Se.outputs(Ae);let Te=pe.get(Re);if(Te===void 0&&(Te=this._allData.push(new G)-1,pe.set(Re,Te)),we.outputs.push(Te),this._allData[Te]._from!==void 0)throw new Error(`multiple nodes output to one data value: ${Te}`);if(this._allData[Te]._from=ve,Se.opType()==="Constant"){if(Se.attributesLength()!==1||!Se.attributes(0).t())throw new Error("missing attributes or missing tensor value in attributes for this Constant operator");if(Se.outputsLength()!==1)throw new Error("missing output or incorrect number of outputs for this Constant operator");we.outputs.pop(),we.executeNode=!1,this._allData[Te]._from=-1,this._allData[Te].tensor=d.Tensor.fromOrtTensor(Se.attributes(0).t())}}}for(let ve=0;ve<this._nodes.length;ve++){const we=this._nodes[ve],Se=w.nodes(ve);if(Se.inputsLength()===0)throw new Error(`missing input for node: ${Se.name}`);for(let Ae=0;Ae<Se.inputsLength();Ae++){const Re=Se.inputs(Ae),Te=pe.get(Re);if(Te===void 0)throw new Error(`unrecognized input '${Re}' for node: ${Se.name()}`);we.inputs.push(Te),this._allData[Te]._to.push(ve)}}}checkIsAcyclic(){const w=new Set;this._allInputIndices.forEach((he=>{this._allData[he]._to.forEach((pe=>{w.add(pe)}))}));const ae=Array.from(w),ue=new Array(this._nodes.length).fill("white");for(;ae.length>0;){const he=ae.pop();ue[he]==="gray"?ue[he]="black":(ae.push(he),ue[he]="gray",this._nodes[he].outputs.forEach((pe=>{const ge=this._allData[pe];if(ge.tensor!==void 0)throw new Error("node outputs should not be initialized");if(ge._from!==he)throw new Error("from property of the Value object doesn't match index of Node being processed");ge._to.forEach((be=>{if(ue[be]==="gray")throw new Error("model graph is cyclic");ue[be]==="white"&&ae.push(be)}))})))}}transformGraph(w){this.removeAllIdentityNodes(),this.removeAllDropoutNodes(),this.fuseConvActivationNodes(),w&&w.transformGraph(this),this.finalizeGraph()}finalizeGraph(){let w=0;for(let ae=0;ae<this._nodes.length;ae++)this._nodes[ae].executeNode?w>0&&(this._nodes[ae].inputs.forEach((ue=>{const he=this._allData[ue]._to.indexOf(ae+w);he!==-1&&(this._allData[ue]._to[he]=ae)})),this._nodes[ae].outputs.forEach((ue=>{this._allData[ue]._from&&this._allData[ue]._from===ae+w&&(this._allData[ue]._from=ae)}))):(w++,this._nodes[ae].outputs.forEach((ue=>{this._allData[ue]._from=-2})),this._nodes.splice(ae,1),ae--);w=0;for(let ae=0;ae<this._allData.length;ae++)if(this._allData[ae].from!==-2||this._allOutputIndices.indexOf(ae+w)!==-1){if(w>0){let ue=-1;this._allData[ae].from!==void 0&&this._allData[ae].from!==-1?(ue=this._nodes[this._allData[ae].from].outputs.indexOf(ae+w),ue!==-1&&(this._nodes[this._allData[ae].from].outputs[ue]=ae)):(ue=this._allInputIndices.indexOf(ae+w),ue!==-1&&(this._allInputIndices[ue]=ae)),this._allData[ae].to.forEach((he=>{ue=this._nodes[he].inputs.indexOf(ae+w),ue!==-1&&(this._nodes[he].inputs[ue]=ae)})),this._allData[ae].to.length===0&&(ue=this._allOutputIndices.indexOf(ae+w),ue!==-1&&(this._allOutputIndices[ue]=ae))}}else w++,this._allData.splice(ae,1),ae--}deleteNode(w){const ae=this._nodes[w];if(ae.outputs.length>1){for(let ve=1;ve<ae.outputs.length;ve++)if(this._allData[ae.outputs[ve]].to.length>0)throw new Error("Node deletion with more than one output connected to other nodes is not supported. ")}ae.executeNode=!1;const ue=ae.inputs[0],he=ae.outputs[0],pe=this._allData[he].to,ge=this._allData[ue].to.indexOf(w);if(ge===-1)throw new Error("The Value object doesn't have the current Node in it's 'to' property ");this._allData[ue].to.splice(ge,1),this._allData[he]._to=[];const be=this._allOutputIndices.indexOf(he);if(be!==-1&&(this._allOutputIndices[be]=ue),pe&&pe.length>0)for(const ve of pe){const we=this._nodes[ve].inputs.indexOf(he);if(we===-1)throw new Error("The Node object doesn't have the output Value in it's 'inputs' property ");this._nodes[ve].inputs[we]=ue,this._allData[ue].to.push(ve)}}removeAllDropoutNodes(){let w=0;for(const ae of this._nodes){if(ae.opType==="Dropout"){if(ae.inputs.length!==1)throw new Error("Dropout nodes should only contain one input. ");if(ae.outputs.length!==1&&ae.outputs.length!==2)throw new Error("Dropout nodes should contain either 1 or 2 output(s)");if(ae.outputs.length===2&&this._allData[ae.outputs[1]]._to.length!==0)throw new Error("Dropout nodes's second output should not be referenced by other nodes");this.deleteNode(w)}w++}}removeAllIdentityNodes(){let w=0;for(const ae of this._nodes)ae.opType==="Identity"&&this.deleteNode(w),w++}isActivation(w){switch(w.opType){case"Relu":case"Sigmoid":case"Clip":return!0;default:return!1}}fuseConvActivationNodes(){for(const w of this._nodes)if(w.opType==="Conv"){const ae=this._allData[w.outputs[0]]._to;if(ae.length===1&&this.isActivation(this._nodes[ae[0]])){const ue=this._nodes[ae[0]];if(ue.opType==="Clip")if(ue.inputs.length===1)try{w.attributes.set("activation_params","floats",[ue.attributes.getFloat("min"),ue.attributes.getFloat("max")])}catch{w.attributes.set("activation_params","floats",[A.MIN_CLIP,A.MAX_CLIP])}else{if(!(ue.inputs.length>=3&&this._allData[ue.inputs[1]].tensor!==void 0&&this._allData[ue.inputs[2]].tensor!==void 0))continue;w.attributes.set("activation_params","floats",[this._allData[ue.inputs[1]].tensor.floatData[0],this._allData[ue.inputs[2]].tensor.floatData[0]])}w.attributes.set("activation","string",ue.opType),this.deleteNode(ae[0])}}}}},6231:(n,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.now=e.Profiler=e.Logger=void 0;const t={verbose:1e3,info:2e3,warning:4e3,error:5e3,fatal:6e3},r={none:new class{log(B,o,i){}},console:new class{log(B,o,i){console.log(`${this.color(B)} ${i?"\x1B[35m"+i+"\x1B[0m ":""}${o}`)}color(B){switch(B){case"verbose":return"\x1B[34;40mv\x1B[0m";case"info":return"\x1B[32mi\x1B[0m";case"warning":return"\x1B[30;43mw\x1B[0m";case"error":return"\x1B[31;40me\x1B[0m";case"fatal":return"\x1B[101mf\x1B[0m";default:throw new Error(`unsupported severity: ${B}`)}}}},u={provider:"console",minimalSeverity:"warning",logDateTime:!0,logSourceLocation:!1};let T={"":u};function d(B,o,i,w){if(o===void 0)return ae=B,{verbose:d.verbose.bind(null,ae),info:d.info.bind(null,ae),warning:d.warning.bind(null,ae),error:d.error.bind(null,ae),fatal:d.fatal.bind(null,ae)};if(i===void 0)A(B,o);else if(typeof i=="number"&&w===void 0)A(B,o);else if(typeof i=="string"&&w===void 0)A(B,i,0,o);else{if(typeof i!="string"||typeof w!="number")throw new TypeError("input is valid");A(B,i,0,o)}var ae}function A(B,o,i,w){const ae=T[w||""]||T[""];t[B]<t[ae.minimalSeverity]||(ae.logDateTime&&(o=`${new Date().toISOString()}|${o}`),ae.logSourceLocation,r[ae.provider].log(B,o,w))}(function(B){function o(w){T={},i("",w||{})}function i(w,ae){if(w==="*")o(ae);else{const ue=T[w]||u;T[w]={provider:ae.provider||ue.provider,minimalSeverity:ae.minimalSeverity||ue.minimalSeverity,logDateTime:ae.logDateTime===void 0?ue.logDateTime:ae.logDateTime,logSourceLocation:ae.logSourceLocation===void 0?ue.logSourceLocation:ae.logSourceLocation}}}B.verbose=function(w,ae){B("verbose",w,ae)},B.info=function(w,ae){B("info",w,ae)},B.warning=function(w,ae){B("warning",w,ae)},B.error=function(w,ae){B("error",w,ae)},B.fatal=function(w,ae){B("fatal",w,ae)},B.reset=o,B.set=i,B.setWithEnv=function(w){const ae={};w.logLevel&&(ae.minimalSeverity=w.logLevel),i("",ae)}})(d||(d={})),e.Logger=d;class le{constructor(o,i,w,ae,ue,he){this.category=o,this.name=i,this.startTime=w,this.endCallback=ae,this.timer=ue,this.ctx=he}end(){return this.endCallback(this)}async checkTimer(){if(this.ctx===void 0||this.timer===void 0)throw new Error("No webgl timer found");return this.ctx.endTimer(),this.ctx.waitForQueryAndGetTime(this.timer)}}class G{constructor(o,i,w,ae){this.category=o,this.name=i,this.startTime=w,this.endTime=ae}}e.Profiler=class{static create(B){return B===void 0?new this:new this(B.maxNumberEvents,B.flushBatchSize,B.flushIntervalInMilliseconds)}constructor(B,o,i){this._started=!1,this._flushPointer=0,this._started=!1,this._maxNumberEvents=B===void 0?1e4:B,this._flushBatchSize=o===void 0?10:o,this._flushIntervalInMilliseconds=i===void 0?5e3:i}start(){this._started=!0,this._timingEvents=[],this._flushTime=(0,e.now)(),this._flushPointer=0}stop(){for(this._started=!1;this._flushPointer<this._timingEvents.length;this._flushPointer++)this.logOneEvent(this._timingEvents[this._flushPointer])}event(B,o,i,w){const ae=this._started?this.begin(B,o,w):void 0;let ue=!1;const he=i();if(he&&typeof he.then=="function")return ue=!0,new Promise(((pe,ge)=>{he.then((async be=>{ae&&await ae.end(),pe(be)}),(async be=>{ae&&await ae.end(),ge(be)}))}));if(!ue&&ae){const pe=ae.end();if(pe&&typeof pe.then=="function")return new Promise(((ge,be)=>{pe.then((()=>{ge(he)}),(ve=>{be(ve)}))}))}return he}begin(B,o,i){if(!this._started)throw new Error("profiler is not started yet");if(i===void 0){const w=(0,e.now)();return this.flush(w),new le(B,o,w,(ae=>this.endSync(ae)))}{const w=i.beginTimer();return new le(B,o,0,(async ae=>this.end(ae)),w,i)}}async end(B){const o=await B.checkTimer();this._timingEvents.length<this._maxNumberEvents&&(this._timingEvents.push(new G(B.category,B.name,B.startTime,o)),this.flush(o))}endSync(B){const o=(0,e.now)();this._timingEvents.length<this._maxNumberEvents&&(this._timingEvents.push(new G(B.category,B.name,B.startTime,o)),this.flush(o))}logOneEvent(B){e.Logger.verbose(`Profiler.${B.category}`,`${(B.endTime-B.startTime).toFixed(2)}ms on event '${B.name}' at ${B.endTime.toFixed(2)}`)}flush(B){if(this._timingEvents.length-this._flushPointer>=this._flushBatchSize||B-this._flushTime>=this._flushIntervalInMilliseconds){for(const o=this._flushPointer;this._flushPointer<o+this._flushBatchSize&&this._flushPointer<this._timingEvents.length;this._flushPointer++)this.logOneEvent(this._timingEvents[this._flushPointer]);this._flushTime=(0,e.now)()}}get started(){return this._started}},e.now=typeof performance<"u"&&performance.now?()=>performance.now():Date.now},2644:(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Model=void 0;const r=t(5686),u=t(1446),T=t(7070),d=t(9395),A=t(2517);var le=d.onnxruntime.experimental.fbs;e.Model=class{constructor(){}load(G,B,o){if(!o)try{return void this.loadFromOnnxFormat(G,B)}catch(i){if(o!==void 0)throw i}this.loadFromOrtFormat(G,B)}loadFromOnnxFormat(G,B){const o=u.onnx.ModelProto.decode(G);if(A.LongUtil.longToNumber(o.irVersion)<3)throw new Error("only support ONNX model with IR_VERSION>=3");this._opsets=o.opsetImport.map((i=>({domain:i.domain,version:A.LongUtil.longToNumber(i.version)}))),this._graph=T.Graph.from(o.graph,B)}loadFromOrtFormat(G,B){const o=new r.flatbuffers.ByteBuffer(G),i=le.InferenceSession.getRootAsInferenceSession(o).model();if(A.LongUtil.longToNumber(i.irVersion())<3)throw new Error("only support ONNX model with IR_VERSION>=3");this._opsets=[];for(let w=0;w<i.opsetImportLength();w++){const ae=i.opsetImport(w);this._opsets.push({domain:ae==null?void 0:ae.domain(),version:A.LongUtil.longToNumber(ae.version())})}this._graph=T.Graph.from(i.graph(),B)}get graph(){return this._graph}get opsets(){return this._opsets}}},782:(n,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.FLOAT_TYPES=e.INT_TYPES=e.NUMBER_TYPES=void 0,e.NUMBER_TYPES=["float32","float64","int32","int16","int8","uint16","uint32","uint8"],e.INT_TYPES=["int32","int16","int8","uint16","uint32","uint8"],e.FLOAT_TYPES=["float32","float64"]},1047:(n,e)=>{function t(r,u){if(u.endsWith("+")){const T=Number.parseInt(u.substring(0,u.length-1),10);return!isNaN(T)&&T<=r}if(u.split("-").length===2){const T=u.split("-"),d=Number.parseInt(T[0],10),A=Number.parseInt(T[1],10);return!isNaN(d)&&!isNaN(A)&&d<=r&&r<=A}return Number.parseInt(u,10)===r}Object.defineProperty(e,"__esModule",{value:!0}),e.resolveOperator=void 0,e.resolveOperator=function(r,u,T){for(const d of T){const A=d[0],le=d[1],G=d[2],B=d[3],o=d[4];if(r.opType===A){for(const i of u)if((i.domain===le||i.domain==="ai.onnx"&&le==="")&&t(i.version,G))return{opImpl:B,opInit:o}}}throw new TypeError(`cannot resolve operator '${r.opType}' with opsets: ${u.map((d=>`${d.domain||"ai.onnx"} v${d.version}`)).join(", ")}`)}},9395:(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.onnxruntime=void 0;const r=t(5686);var u,T;u=e.onnxruntime||(e.onnxruntime={}),(function(d){(function(A){A[A.UNDEFINED=0]="UNDEFINED",A[A.FLOAT=1]="FLOAT",A[A.INT=2]="INT",A[A.STRING=3]="STRING",A[A.TENSOR=4]="TENSOR",A[A.GRAPH=5]="GRAPH",A[A.FLOATS=6]="FLOATS",A[A.INTS=7]="INTS",A[A.STRINGS=8]="STRINGS",A[A.TENSORS=9]="TENSORS",A[A.GRAPHS=10]="GRAPHS",A[A.SPARSE_TENSOR=11]="SPARSE_TENSOR",A[A.SPARSE_TENSORS=12]="SPARSE_TENSORS"})(d.AttributeType||(d.AttributeType={}))})((T=u.experimental||(u.experimental={})).fbs||(T.fbs={})),(function(d){(function(A){(function(le){(function(G){G[G.UNKNOWN=0]="UNKNOWN",G[G.VALUE=1]="VALUE",G[G.PARAM=2]="PARAM"})(le.DimensionValueType||(le.DimensionValueType={}))})(A.fbs||(A.fbs={}))})(d.experimental||(d.experimental={}))})(e.onnxruntime||(e.onnxruntime={})),(function(d){(function(A){(function(le){(function(G){G[G.UNDEFINED=0]="UNDEFINED",G[G.FLOAT=1]="FLOAT",G[G.UINT8=2]="UINT8",G[G.INT8=3]="INT8",G[G.UINT16=4]="UINT16",G[G.INT16=5]="INT16",G[G.INT32=6]="INT32",G[G.INT64=7]="INT64",G[G.STRING=8]="STRING",G[G.BOOL=9]="BOOL",G[G.FLOAT16=10]="FLOAT16",G[G.DOUBLE=11]="DOUBLE",G[G.UINT32=12]="UINT32",G[G.UINT64=13]="UINT64",G[G.COMPLEX64=14]="COMPLEX64",G[G.COMPLEX128=15]="COMPLEX128",G[G.BFLOAT16=16]="BFLOAT16"})(le.TensorDataType||(le.TensorDataType={}))})(A.fbs||(A.fbs={}))})(d.experimental||(d.experimental={}))})(e.onnxruntime||(e.onnxruntime={})),(function(d){(function(A){(function(le){(function(G){G[G.Primitive=0]="Primitive",G[G.Fused=1]="Fused"})(le.NodeType||(le.NodeType={}))})(A.fbs||(A.fbs={}))})(d.experimental||(d.experimental={}))})(e.onnxruntime||(e.onnxruntime={})),(function(d){(function(A){(function(le){(function(G){G[G.NONE=0]="NONE",G[G.tensor_type=1]="tensor_type",G[G.sequence_type=2]="sequence_type",G[G.map_type=3]="map_type"})(le.TypeInfoValue||(le.TypeInfoValue={}))})(A.fbs||(A.fbs={}))})(d.experimental||(d.experimental={}))})(e.onnxruntime||(e.onnxruntime={})),(function(d){(function(A){(function(le){class G{constructor(){this.bb=null,this.bb_pos=0}__init(o,i){return this.bb_pos=o,this.bb=i,this}static getRootAsShape(o,i){return(i||new G).__init(o.readInt32(o.position())+o.position(),o)}static getSizePrefixedRootAsShape(o,i){return o.setPosition(o.position()+r.flatbuffers.SIZE_PREFIX_LENGTH),(i||new G).__init(o.readInt32(o.position())+o.position(),o)}dim(o,i){let w=this.bb.__offset(this.bb_pos,4);return w?(i||new d.experimental.fbs.Dimension).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+w)+4*o),this.bb):null}dimLength(){let o=this.bb.__offset(this.bb_pos,4);return o?this.bb.__vector_len(this.bb_pos+o):0}static startShape(o){o.startObject(1)}static addDim(o,i){o.addFieldOffset(0,i,0)}static createDimVector(o,i){o.startVector(4,i.length,4);for(let w=i.length-1;w>=0;w--)o.addOffset(i[w]);return o.endVector()}static startDimVector(o,i){o.startVector(4,i,4)}static endShape(o){return o.endObject()}static createShape(o,i){return G.startShape(o),G.addDim(o,i),G.endShape(o)}}le.Shape=G})(A.fbs||(A.fbs={}))})(d.experimental||(d.experimental={}))})(e.onnxruntime||(e.onnxruntime={})),(function(d){(function(A){(function(le){class G{constructor(){this.bb=null,this.bb_pos=0}__init(o,i){return this.bb_pos=o,this.bb=i,this}static getRootAsDimension(o,i){return(i||new G).__init(o.readInt32(o.position())+o.position(),o)}static getSizePrefixedRootAsDimension(o,i){return o.setPosition(o.position()+r.flatbuffers.SIZE_PREFIX_LENGTH),(i||new G).__init(o.readInt32(o.position())+o.position(),o)}value(o){let i=this.bb.__offset(this.bb_pos,4);return i?(o||new d.experimental.fbs.DimensionValue).__init(this.bb.__indirect(this.bb_pos+i),this.bb):null}denotation(o){let i=this.bb.__offset(this.bb_pos,6);return i?this.bb.__string(this.bb_pos+i,o):null}static startDimension(o){o.startObject(2)}static addValue(o,i){o.addFieldOffset(0,i,0)}static addDenotation(o,i){o.addFieldOffset(1,i,0)}static endDimension(o){return o.endObject()}static createDimension(o,i,w){return G.startDimension(o),G.addValue(o,i),G.addDenotation(o,w),G.endDimension(o)}}le.Dimension=G})(A.fbs||(A.fbs={}))})(d.experimental||(d.experimental={}))})(e.onnxruntime||(e.onnxruntime={})),(function(d){(function(A){(function(le){class G{constructor(){this.bb=null,this.bb_pos=0}__init(o,i){return this.bb_pos=o,this.bb=i,this}static getRootAsDimensionValue(o,i){return(i||new G).__init(o.readInt32(o.position())+o.position(),o)}static getSizePrefixedRootAsDimensionValue(o,i){return o.setPosition(o.position()+r.flatbuffers.SIZE_PREFIX_LENGTH),(i||new G).__init(o.readInt32(o.position())+o.position(),o)}dimType(){let o=this.bb.__offset(this.bb_pos,4);return o?this.bb.readInt8(this.bb_pos+o):d.experimental.fbs.DimensionValueType.UNKNOWN}dimValue(){let o=this.bb.__offset(this.bb_pos,6);return o?this.bb.readInt64(this.bb_pos+o):this.bb.createLong(0,0)}dimParam(o){let i=this.bb.__offset(this.bb_pos,8);return i?this.bb.__string(this.bb_pos+i,o):null}static startDimensionValue(o){o.startObject(3)}static addDimType(o,i){o.addFieldInt8(0,i,d.experimental.fbs.DimensionValueType.UNKNOWN)}static addDimValue(o,i){o.addFieldInt64(1,i,o.createLong(0,0))}static addDimParam(o,i){o.addFieldOffset(2,i,0)}static endDimensionValue(o){return o.endObject()}static createDimensionValue(o,i,w,ae){return G.startDimensionValue(o),G.addDimType(o,i),G.addDimValue(o,w),G.addDimParam(o,ae),G.endDimensionValue(o)}}le.DimensionValue=G})(A.fbs||(A.fbs={}))})(d.experimental||(d.experimental={}))})(e.onnxruntime||(e.onnxruntime={})),(function(d){(function(A){(function(le){class G{constructor(){this.bb=null,this.bb_pos=0}__init(o,i){return this.bb_pos=o,this.bb=i,this}static getRootAsTensorTypeAndShape(o,i){return(i||new G).__init(o.readInt32(o.position())+o.position(),o)}static getSizePrefixedRootAsTensorTypeAndShape(o,i){return o.setPosition(o.position()+r.flatbuffers.SIZE_PREFIX_LENGTH),(i||new G).__init(o.readInt32(o.position())+o.position(),o)}elemType(){let o=this.bb.__offset(this.bb_pos,4);return o?this.bb.readInt32(this.bb_pos+o):d.experimental.fbs.TensorDataType.UNDEFINED}shape(o){let i=this.bb.__offset(this.bb_pos,6);return i?(o||new d.experimental.fbs.Shape).__init(this.bb.__indirect(this.bb_pos+i),this.bb):null}static startTensorTypeAndShape(o){o.startObject(2)}static addElemType(o,i){o.addFieldInt32(0,i,d.experimental.fbs.TensorDataType.UNDEFINED)}static addShape(o,i){o.addFieldOffset(1,i,0)}static endTensorTypeAndShape(o){return o.endObject()}static createTensorTypeAndShape(o,i,w){return G.startTensorTypeAndShape(o),G.addElemType(o,i),G.addShape(o,w),G.endTensorTypeAndShape(o)}}le.TensorTypeAndShape=G})(A.fbs||(A.fbs={}))})(d.experimental||(d.experimental={}))})(e.onnxruntime||(e.onnxruntime={})),(function(d){(function(A){(function(le){class G{constructor(){this.bb=null,this.bb_pos=0}__init(o,i){return this.bb_pos=o,this.bb=i,this}static getRootAsMapType(o,i){return(i||new G).__init(o.readInt32(o.position())+o.position(),o)}static getSizePrefixedRootAsMapType(o,i){return o.setPosition(o.position()+r.flatbuffers.SIZE_PREFIX_LENGTH),(i||new G).__init(o.readInt32(o.position())+o.position(),o)}keyType(){let o=this.bb.__offset(this.bb_pos,4);return o?this.bb.readInt32(this.bb_pos+o):d.experimental.fbs.TensorDataType.UNDEFINED}valueType(o){let i=this.bb.__offset(this.bb_pos,6);return i?(o||new d.experimental.fbs.TypeInfo).__init(this.bb.__indirect(this.bb_pos+i),this.bb):null}static startMapType(o){o.startObject(2)}static addKeyType(o,i){o.addFieldInt32(0,i,d.experimental.fbs.TensorDataType.UNDEFINED)}static addValueType(o,i){o.addFieldOffset(1,i,0)}static endMapType(o){return o.endObject()}static createMapType(o,i,w){return G.startMapType(o),G.addKeyType(o,i),G.addValueType(o,w),G.endMapType(o)}}le.MapType=G})(A.fbs||(A.fbs={}))})(d.experimental||(d.experimental={}))})(e.onnxruntime||(e.onnxruntime={})),(function(d){(function(A){(function(le){class G{constructor(){this.bb=null,this.bb_pos=0}__init(o,i){return this.bb_pos=o,this.bb=i,this}static getRootAsSequenceType(o,i){return(i||new G).__init(o.readInt32(o.position())+o.position(),o)}static getSizePrefixedRootAsSequenceType(o,i){return o.setPosition(o.position()+r.flatbuffers.SIZE_PREFIX_LENGTH),(i||new G).__init(o.readInt32(o.position())+o.position(),o)}elemType(o){let i=this.bb.__offset(this.bb_pos,4);return i?(o||new d.experimental.fbs.TypeInfo).__init(this.bb.__indirect(this.bb_pos+i),this.bb):null}static startSequenceType(o){o.startObject(1)}static addElemType(o,i){o.addFieldOffset(0,i,0)}static endSequenceType(o){return o.endObject()}static createSequenceType(o,i){return G.startSequenceType(o),G.addElemType(o,i),G.endSequenceType(o)}}le.SequenceType=G})(A.fbs||(A.fbs={}))})(d.experimental||(d.experimental={}))})(e.onnxruntime||(e.onnxruntime={})),(function(d){(function(A){(A.fbs||(A.fbs={})).EdgeEnd=class{constructor(){this.bb=null,this.bb_pos=0}__init(le,G){return this.bb_pos=le,this.bb=G,this}nodeIndex(){return this.bb.readUint32(this.bb_pos)}srcArgIndex(){return this.bb.readInt32(this.bb_pos+4)}dstArgIndex(){return this.bb.readInt32(this.bb_pos+8)}static createEdgeEnd(le,G,B,o){return le.prep(4,12),le.writeInt32(o),le.writeInt32(B),le.writeInt32(G),le.offset()}}})(d.experimental||(d.experimental={}))})(e.onnxruntime||(e.onnxruntime={})),(function(d){(function(A){(function(le){class G{constructor(){this.bb=null,this.bb_pos=0}__init(o,i){return this.bb_pos=o,this.bb=i,this}static getRootAsNodeEdge(o,i){return(i||new G).__init(o.readInt32(o.position())+o.position(),o)}static getSizePrefixedRootAsNodeEdge(o,i){return o.setPosition(o.position()+r.flatbuffers.SIZE_PREFIX_LENGTH),(i||new G).__init(o.readInt32(o.position())+o.position(),o)}nodeIndex(){let o=this.bb.__offset(this.bb_pos,4);return o?this.bb.readUint32(this.bb_pos+o):0}inputEdges(o,i){let w=this.bb.__offset(this.bb_pos,6);return w?(i||new d.experimental.fbs.EdgeEnd).__init(this.bb.__vector(this.bb_pos+w)+12*o,this.bb):null}inputEdgesLength(){let o=this.bb.__offset(this.bb_pos,6);return o?this.bb.__vector_len(this.bb_pos+o):0}outputEdges(o,i){let w=this.bb.__offset(this.bb_pos,8);return w?(i||new d.experimental.fbs.EdgeEnd).__init(this.bb.__vector(this.bb_pos+w)+12*o,this.bb):null}outputEdgesLength(){let o=this.bb.__offset(this.bb_pos,8);return o?this.bb.__vector_len(this.bb_pos+o):0}static startNodeEdge(o){o.startObject(3)}static addNodeIndex(o,i){o.addFieldInt32(0,i,0)}static addInputEdges(o,i){o.addFieldOffset(1,i,0)}static startInputEdgesVector(o,i){o.startVector(12,i,4)}static addOutputEdges(o,i){o.addFieldOffset(2,i,0)}static startOutputEdgesVector(o,i){o.startVector(12,i,4)}static endNodeEdge(o){return o.endObject()}static createNodeEdge(o,i,w,ae){return G.startNodeEdge(o),G.addNodeIndex(o,i),G.addInputEdges(o,w),G.addOutputEdges(o,ae),G.endNodeEdge(o)}}le.NodeEdge=G})(A.fbs||(A.fbs={}))})(d.experimental||(d.experimental={}))})(e.onnxruntime||(e.onnxruntime={})),(function(d){(function(A){(function(le){class G{constructor(){this.bb=null,this.bb_pos=0}__init(o,i){return this.bb_pos=o,this.bb=i,this}static getRootAsNode(o,i){return(i||new G).__init(o.readInt32(o.position())+o.position(),o)}static getSizePrefixedRootAsNode(o,i){return o.setPosition(o.position()+r.flatbuffers.SIZE_PREFIX_LENGTH),(i||new G).__init(o.readInt32(o.position())+o.position(),o)}name(o){let i=this.bb.__offset(this.bb_pos,4);return i?this.bb.__string(this.bb_pos+i,o):null}docString(o){let i=this.bb.__offset(this.bb_pos,6);return i?this.bb.__string(this.bb_pos+i,o):null}domain(o){let i=this.bb.__offset(this.bb_pos,8);return i?this.bb.__string(this.bb_pos+i,o):null}sinceVersion(){let o=this.bb.__offset(this.bb_pos,10);return o?this.bb.readInt32(this.bb_pos+o):0}index(){let o=this.bb.__offset(this.bb_pos,12);return o?this.bb.readUint32(this.bb_pos+o):0}opType(o){let i=this.bb.__offset(this.bb_pos,14);return i?this.bb.__string(this.bb_pos+i,o):null}type(){let o=this.bb.__offset(this.bb_pos,16);return o?this.bb.readInt32(this.bb_pos+o):d.experimental.fbs.NodeType.Primitive}executionProviderType(o){let i=this.bb.__offset(this.bb_pos,18);return i?this.bb.__string(this.bb_pos+i,o):null}inputs(o,i){let w=this.bb.__offset(this.bb_pos,20);return w?this.bb.__string(this.bb.__vector(this.bb_pos+w)+4*o,i):null}inputsLength(){let o=this.bb.__offset(this.bb_pos,20);return o?this.bb.__vector_len(this.bb_pos+o):0}outputs(o,i){let w=this.bb.__offset(this.bb_pos,22);return w?this.bb.__string(this.bb.__vector(this.bb_pos+w)+4*o,i):null}outputsLength(){let o=this.bb.__offset(this.bb_pos,22);return o?this.bb.__vector_len(this.bb_pos+o):0}attributes(o,i){let w=this.bb.__offset(this.bb_pos,24);return w?(i||new d.experimental.fbs.Attribute).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+w)+4*o),this.bb):null}attributesLength(){let o=this.bb.__offset(this.bb_pos,24);return o?this.bb.__vector_len(this.bb_pos+o):0}inputArgCounts(o){let i=this.bb.__offset(this.bb_pos,26);return i?this.bb.readInt32(this.bb.__vector(this.bb_pos+i)+4*o):0}inputArgCountsLength(){let o=this.bb.__offset(this.bb_pos,26);return o?this.bb.__vector_len(this.bb_pos+o):0}inputArgCountsArray(){let o=this.bb.__offset(this.bb_pos,26);return o?new Int32Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+o),this.bb.__vector_len(this.bb_pos+o)):null}implicitInputs(o,i){let w=this.bb.__offset(this.bb_pos,28);return w?this.bb.__string(this.bb.__vector(this.bb_pos+w)+4*o,i):null}implicitInputsLength(){let o=this.bb.__offset(this.bb_pos,28);return o?this.bb.__vector_len(this.bb_pos+o):0}static startNode(o){o.startObject(13)}static addName(o,i){o.addFieldOffset(0,i,0)}static addDocString(o,i){o.addFieldOffset(1,i,0)}static addDomain(o,i){o.addFieldOffset(2,i,0)}static addSinceVersion(o,i){o.addFieldInt32(3,i,0)}static addIndex(o,i){o.addFieldInt32(4,i,0)}static addOpType(o,i){o.addFieldOffset(5,i,0)}static addType(o,i){o.addFieldInt32(6,i,d.experimental.fbs.NodeType.Primitive)}static addExecutionProviderType(o,i){o.addFieldOffset(7,i,0)}static addInputs(o,i){o.addFieldOffset(8,i,0)}static createInputsVector(o,i){o.startVector(4,i.length,4);for(let w=i.length-1;w>=0;w--)o.addOffset(i[w]);return o.endVector()}static startInputsVector(o,i){o.startVector(4,i,4)}static addOutputs(o,i){o.addFieldOffset(9,i,0)}static createOutputsVector(o,i){o.startVector(4,i.length,4);for(let w=i.length-1;w>=0;w--)o.addOffset(i[w]);return o.endVector()}static startOutputsVector(o,i){o.startVector(4,i,4)}static addAttributes(o,i){o.addFieldOffset(10,i,0)}static createAttributesVector(o,i){o.startVector(4,i.length,4);for(let w=i.length-1;w>=0;w--)o.addOffset(i[w]);return o.endVector()}static startAttributesVector(o,i){o.startVector(4,i,4)}static addInputArgCounts(o,i){o.addFieldOffset(11,i,0)}static createInputArgCountsVector(o,i){o.startVector(4,i.length,4);for(let w=i.length-1;w>=0;w--)o.addInt32(i[w]);return o.endVector()}static startInputArgCountsVector(o,i){o.startVector(4,i,4)}static addImplicitInputs(o,i){o.addFieldOffset(12,i,0)}static createImplicitInputsVector(o,i){o.startVector(4,i.length,4);for(let w=i.length-1;w>=0;w--)o.addOffset(i[w]);return o.endVector()}static startImplicitInputsVector(o,i){o.startVector(4,i,4)}static endNode(o){return o.endObject()}static createNode(o,i,w,ae,ue,he,pe,ge,be,ve,we,Se,Ae,Re){return G.startNode(o),G.addName(o,i),G.addDocString(o,w),G.addDomain(o,ae),G.addSinceVersion(o,ue),G.addIndex(o,he),G.addOpType(o,pe),G.addType(o,ge),G.addExecutionProviderType(o,be),G.addInputs(o,ve),G.addOutputs(o,we),G.addAttributes(o,Se),G.addInputArgCounts(o,Ae),G.addImplicitInputs(o,Re),G.endNode(o)}}le.Node=G})(A.fbs||(A.fbs={}))})(d.experimental||(d.experimental={}))})(e.onnxruntime||(e.onnxruntime={})),(function(d){(function(A){(function(le){class G{constructor(){this.bb=null,this.bb_pos=0}__init(o,i){return this.bb_pos=o,this.bb=i,this}static getRootAsValueInfo(o,i){return(i||new G).__init(o.readInt32(o.position())+o.position(),o)}static getSizePrefixedRootAsValueInfo(o,i){return o.setPosition(o.position()+r.flatbuffers.SIZE_PREFIX_LENGTH),(i||new G).__init(o.readInt32(o.position())+o.position(),o)}name(o){let i=this.bb.__offset(this.bb_pos,4);return i?this.bb.__string(this.bb_pos+i,o):null}docString(o){let i=this.bb.__offset(this.bb_pos,6);return i?this.bb.__string(this.bb_pos+i,o):null}type(o){let i=this.bb.__offset(this.bb_pos,8);return i?(o||new d.experimental.fbs.TypeInfo).__init(this.bb.__indirect(this.bb_pos+i),this.bb):null}static startValueInfo(o){o.startObject(3)}static addName(o,i){o.addFieldOffset(0,i,0)}static addDocString(o,i){o.addFieldOffset(1,i,0)}static addType(o,i){o.addFieldOffset(2,i,0)}static endValueInfo(o){return o.endObject()}static createValueInfo(o,i,w,ae){return G.startValueInfo(o),G.addName(o,i),G.addDocString(o,w),G.addType(o,ae),G.endValueInfo(o)}}le.ValueInfo=G})(A.fbs||(A.fbs={}))})(d.experimental||(d.experimental={}))})(e.onnxruntime||(e.onnxruntime={})),(function(d){(function(A){(function(le){class G{constructor(){this.bb=null,this.bb_pos=0}__init(o,i){return this.bb_pos=o,this.bb=i,this}static getRootAsTypeInfo(o,i){return(i||new G).__init(o.readInt32(o.position())+o.position(),o)}static getSizePrefixedRootAsTypeInfo(o,i){return o.setPosition(o.position()+r.flatbuffers.SIZE_PREFIX_LENGTH),(i||new G).__init(o.readInt32(o.position())+o.position(),o)}denotation(o){let i=this.bb.__offset(this.bb_pos,4);return i?this.bb.__string(this.bb_pos+i,o):null}valueType(){let o=this.bb.__offset(this.bb_pos,6);return o?this.bb.readUint8(this.bb_pos+o):d.experimental.fbs.TypeInfoValue.NONE}value(o){let i=this.bb.__offset(this.bb_pos,8);return i?this.bb.__union(o,this.bb_pos+i):null}static startTypeInfo(o){o.startObject(3)}static addDenotation(o,i){o.addFieldOffset(0,i,0)}static addValueType(o,i){o.addFieldInt8(1,i,d.experimental.fbs.TypeInfoValue.NONE)}static addValue(o,i){o.addFieldOffset(2,i,0)}static endTypeInfo(o){return o.endObject()}static createTypeInfo(o,i,w,ae){return G.startTypeInfo(o),G.addDenotation(o,i),G.addValueType(o,w),G.addValue(o,ae),G.endTypeInfo(o)}}le.TypeInfo=G})(A.fbs||(A.fbs={}))})(d.experimental||(d.experimental={}))})(e.onnxruntime||(e.onnxruntime={})),(function(d){(function(A){(function(le){class G{constructor(){this.bb=null,this.bb_pos=0}__init(o,i){return this.bb_pos=o,this.bb=i,this}static getRootAsOperatorSetId(o,i){return(i||new G).__init(o.readInt32(o.position())+o.position(),o)}static getSizePrefixedRootAsOperatorSetId(o,i){return o.setPosition(o.position()+r.flatbuffers.SIZE_PREFIX_LENGTH),(i||new G).__init(o.readInt32(o.position())+o.position(),o)}domain(o){let i=this.bb.__offset(this.bb_pos,4);return i?this.bb.__string(this.bb_pos+i,o):null}version(){let o=this.bb.__offset(this.bb_pos,6);return o?this.bb.readInt64(this.bb_pos+o):this.bb.createLong(0,0)}static startOperatorSetId(o){o.startObject(2)}static addDomain(o,i){o.addFieldOffset(0,i,0)}static addVersion(o,i){o.addFieldInt64(1,i,o.createLong(0,0))}static endOperatorSetId(o){return o.endObject()}static createOperatorSetId(o,i,w){return G.startOperatorSetId(o),G.addDomain(o,i),G.addVersion(o,w),G.endOperatorSetId(o)}}le.OperatorSetId=G})(A.fbs||(A.fbs={}))})(d.experimental||(d.experimental={}))})(e.onnxruntime||(e.onnxruntime={})),(function(d){(function(A){(function(le){class G{constructor(){this.bb=null,this.bb_pos=0}__init(o,i){return this.bb_pos=o,this.bb=i,this}static getRootAsTensor(o,i){return(i||new G).__init(o.readInt32(o.position())+o.position(),o)}static getSizePrefixedRootAsTensor(o,i){return o.setPosition(o.position()+r.flatbuffers.SIZE_PREFIX_LENGTH),(i||new G).__init(o.readInt32(o.position())+o.position(),o)}name(o){let i=this.bb.__offset(this.bb_pos,4);return i?this.bb.__string(this.bb_pos+i,o):null}docString(o){let i=this.bb.__offset(this.bb_pos,6);return i?this.bb.__string(this.bb_pos+i,o):null}dims(o){let i=this.bb.__offset(this.bb_pos,8);return i?this.bb.readInt64(this.bb.__vector(this.bb_pos+i)+8*o):this.bb.createLong(0,0)}dimsLength(){let o=this.bb.__offset(this.bb_pos,8);return o?this.bb.__vector_len(this.bb_pos+o):0}dataType(){let o=this.bb.__offset(this.bb_pos,10);return o?this.bb.readInt32(this.bb_pos+o):d.experimental.fbs.TensorDataType.UNDEFINED}rawData(o){let i=this.bb.__offset(this.bb_pos,12);return i?this.bb.readUint8(this.bb.__vector(this.bb_pos+i)+o):0}rawDataLength(){let o=this.bb.__offset(this.bb_pos,12);return o?this.bb.__vector_len(this.bb_pos+o):0}rawDataArray(){let o=this.bb.__offset(this.bb_pos,12);return o?new Uint8Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+o),this.bb.__vector_len(this.bb_pos+o)):null}stringData(o,i){let w=this.bb.__offset(this.bb_pos,14);return w?this.bb.__string(this.bb.__vector(this.bb_pos+w)+4*o,i):null}stringDataLength(){let o=this.bb.__offset(this.bb_pos,14);return o?this.bb.__vector_len(this.bb_pos+o):0}static startTensor(o){o.startObject(6)}static addName(o,i){o.addFieldOffset(0,i,0)}static addDocString(o,i){o.addFieldOffset(1,i,0)}static addDims(o,i){o.addFieldOffset(2,i,0)}static createDimsVector(o,i){o.startVector(8,i.length,8);for(let w=i.length-1;w>=0;w--)o.addInt64(i[w]);return o.endVector()}static startDimsVector(o,i){o.startVector(8,i,8)}static addDataType(o,i){o.addFieldInt32(3,i,d.experimental.fbs.TensorDataType.UNDEFINED)}static addRawData(o,i){o.addFieldOffset(4,i,0)}static createRawDataVector(o,i){o.startVector(1,i.length,1);for(let w=i.length-1;w>=0;w--)o.addInt8(i[w]);return o.endVector()}static startRawDataVector(o,i){o.startVector(1,i,1)}static addStringData(o,i){o.addFieldOffset(5,i,0)}static createStringDataVector(o,i){o.startVector(4,i.length,4);for(let w=i.length-1;w>=0;w--)o.addOffset(i[w]);return o.endVector()}static startStringDataVector(o,i){o.startVector(4,i,4)}static endTensor(o){return o.endObject()}static createTensor(o,i,w,ae,ue,he,pe){return G.startTensor(o),G.addName(o,i),G.addDocString(o,w),G.addDims(o,ae),G.addDataType(o,ue),G.addRawData(o,he),G.addStringData(o,pe),G.endTensor(o)}}le.Tensor=G})(A.fbs||(A.fbs={}))})(d.experimental||(d.experimental={}))})(e.onnxruntime||(e.onnxruntime={})),(function(d){(function(A){(function(le){class G{constructor(){this.bb=null,this.bb_pos=0}__init(o,i){return this.bb_pos=o,this.bb=i,this}static getRootAsSparseTensor(o,i){return(i||new G).__init(o.readInt32(o.position())+o.position(),o)}static getSizePrefixedRootAsSparseTensor(o,i){return o.setPosition(o.position()+r.flatbuffers.SIZE_PREFIX_LENGTH),(i||new G).__init(o.readInt32(o.position())+o.position(),o)}values(o){let i=this.bb.__offset(this.bb_pos,4);return i?(o||new d.experimental.fbs.Tensor).__init(this.bb.__indirect(this.bb_pos+i),this.bb):null}indices(o){let i=this.bb.__offset(this.bb_pos,6);return i?(o||new d.experimental.fbs.Tensor).__init(this.bb.__indirect(this.bb_pos+i),this.bb):null}dims(o){let i=this.bb.__offset(this.bb_pos,8);return i?this.bb.readInt64(this.bb.__vector(this.bb_pos+i)+8*o):this.bb.createLong(0,0)}dimsLength(){let o=this.bb.__offset(this.bb_pos,8);return o?this.bb.__vector_len(this.bb_pos+o):0}static startSparseTensor(o){o.startObject(3)}static addValues(o,i){o.addFieldOffset(0,i,0)}static addIndices(o,i){o.addFieldOffset(1,i,0)}static addDims(o,i){o.addFieldOffset(2,i,0)}static createDimsVector(o,i){o.startVector(8,i.length,8);for(let w=i.length-1;w>=0;w--)o.addInt64(i[w]);return o.endVector()}static startDimsVector(o,i){o.startVector(8,i,8)}static endSparseTensor(o){return o.endObject()}static createSparseTensor(o,i,w,ae){return G.startSparseTensor(o),G.addValues(o,i),G.addIndices(o,w),G.addDims(o,ae),G.endSparseTensor(o)}}le.SparseTensor=G})(A.fbs||(A.fbs={}))})(d.experimental||(d.experimental={}))})(e.onnxruntime||(e.onnxruntime={})),(function(d){(function(A){(function(le){class G{constructor(){this.bb=null,this.bb_pos=0}__init(o,i){return this.bb_pos=o,this.bb=i,this}static getRootAsAttribute(o,i){return(i||new G).__init(o.readInt32(o.position())+o.position(),o)}static getSizePrefixedRootAsAttribute(o,i){return o.setPosition(o.position()+r.flatbuffers.SIZE_PREFIX_LENGTH),(i||new G).__init(o.readInt32(o.position())+o.position(),o)}name(o){let i=this.bb.__offset(this.bb_pos,4);return i?this.bb.__string(this.bb_pos+i,o):null}docString(o){let i=this.bb.__offset(this.bb_pos,6);return i?this.bb.__string(this.bb_pos+i,o):null}type(){let o=this.bb.__offset(this.bb_pos,8);return o?this.bb.readInt32(this.bb_pos+o):d.experimental.fbs.AttributeType.UNDEFINED}f(){let o=this.bb.__offset(this.bb_pos,10);return o?this.bb.readFloat32(this.bb_pos+o):0}i(){let o=this.bb.__offset(this.bb_pos,12);return o?this.bb.readInt64(this.bb_pos+o):this.bb.createLong(0,0)}s(o){let i=this.bb.__offset(this.bb_pos,14);return i?this.bb.__string(this.bb_pos+i,o):null}t(o){let i=this.bb.__offset(this.bb_pos,16);return i?(o||new d.experimental.fbs.Tensor).__init(this.bb.__indirect(this.bb_pos+i),this.bb):null}g(o){let i=this.bb.__offset(this.bb_pos,18);return i?(o||new d.experimental.fbs.Graph).__init(this.bb.__indirect(this.bb_pos+i),this.bb):null}floats(o){let i=this.bb.__offset(this.bb_pos,20);return i?this.bb.readFloat32(this.bb.__vector(this.bb_pos+i)+4*o):0}floatsLength(){let o=this.bb.__offset(this.bb_pos,20);return o?this.bb.__vector_len(this.bb_pos+o):0}floatsArray(){let o=this.bb.__offset(this.bb_pos,20);return o?new Float32Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+o),this.bb.__vector_len(this.bb_pos+o)):null}ints(o){let i=this.bb.__offset(this.bb_pos,22);return i?this.bb.readInt64(this.bb.__vector(this.bb_pos+i)+8*o):this.bb.createLong(0,0)}intsLength(){let o=this.bb.__offset(this.bb_pos,22);return o?this.bb.__vector_len(this.bb_pos+o):0}strings(o,i){let w=this.bb.__offset(this.bb_pos,24);return w?this.bb.__string(this.bb.__vector(this.bb_pos+w)+4*o,i):null}stringsLength(){let o=this.bb.__offset(this.bb_pos,24);return o?this.bb.__vector_len(this.bb_pos+o):0}tensors(o,i){let w=this.bb.__offset(this.bb_pos,26);return w?(i||new d.experimental.fbs.Tensor).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+w)+4*o),this.bb):null}tensorsLength(){let o=this.bb.__offset(this.bb_pos,26);return o?this.bb.__vector_len(this.bb_pos+o):0}graphs(o,i){let w=this.bb.__offset(this.bb_pos,28);return w?(i||new d.experimental.fbs.Graph).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+w)+4*o),this.bb):null}graphsLength(){let o=this.bb.__offset(this.bb_pos,28);return o?this.bb.__vector_len(this.bb_pos+o):0}static startAttribute(o){o.startObject(13)}static addName(o,i){o.addFieldOffset(0,i,0)}static addDocString(o,i){o.addFieldOffset(1,i,0)}static addType(o,i){o.addFieldInt32(2,i,d.experimental.fbs.AttributeType.UNDEFINED)}static addF(o,i){o.addFieldFloat32(3,i,0)}static addI(o,i){o.addFieldInt64(4,i,o.createLong(0,0))}static addS(o,i){o.addFieldOffset(5,i,0)}static addT(o,i){o.addFieldOffset(6,i,0)}static addG(o,i){o.addFieldOffset(7,i,0)}static addFloats(o,i){o.addFieldOffset(8,i,0)}static createFloatsVector(o,i){o.startVector(4,i.length,4);for(let w=i.length-1;w>=0;w--)o.addFloat32(i[w]);return o.endVector()}static startFloatsVector(o,i){o.startVector(4,i,4)}static addInts(o,i){o.addFieldOffset(9,i,0)}static createIntsVector(o,i){o.startVector(8,i.length,8);for(let w=i.length-1;w>=0;w--)o.addInt64(i[w]);return o.endVector()}static startIntsVector(o,i){o.startVector(8,i,8)}static addStrings(o,i){o.addFieldOffset(10,i,0)}static createStringsVector(o,i){o.startVector(4,i.length,4);for(let w=i.length-1;w>=0;w--)o.addOffset(i[w]);return o.endVector()}static startStringsVector(o,i){o.startVector(4,i,4)}static addTensors(o,i){o.addFieldOffset(11,i,0)}static createTensorsVector(o,i){o.startVector(4,i.length,4);for(let w=i.length-1;w>=0;w--)o.addOffset(i[w]);return o.endVector()}static startTensorsVector(o,i){o.startVector(4,i,4)}static addGraphs(o,i){o.addFieldOffset(12,i,0)}static createGraphsVector(o,i){o.startVector(4,i.length,4);for(let w=i.length-1;w>=0;w--)o.addOffset(i[w]);return o.endVector()}static startGraphsVector(o,i){o.startVector(4,i,4)}static endAttribute(o){return o.endObject()}static createAttribute(o,i,w,ae,ue,he,pe,ge,be,ve,we,Se,Ae,Re){return G.startAttribute(o),G.addName(o,i),G.addDocString(o,w),G.addType(o,ae),G.addF(o,ue),G.addI(o,he),G.addS(o,pe),G.addT(o,ge),G.addG(o,be),G.addFloats(o,ve),G.addInts(o,we),G.addStrings(o,Se),G.addTensors(o,Ae),G.addGraphs(o,Re),G.endAttribute(o)}}le.Attribute=G})(A.fbs||(A.fbs={}))})(d.experimental||(d.experimental={}))})(e.onnxruntime||(e.onnxruntime={})),(function(d){(function(A){(function(le){class G{constructor(){this.bb=null,this.bb_pos=0}__init(o,i){return this.bb_pos=o,this.bb=i,this}static getRootAsGraph(o,i){return(i||new G).__init(o.readInt32(o.position())+o.position(),o)}static getSizePrefixedRootAsGraph(o,i){return o.setPosition(o.position()+r.flatbuffers.SIZE_PREFIX_LENGTH),(i||new G).__init(o.readInt32(o.position())+o.position(),o)}initializers(o,i){let w=this.bb.__offset(this.bb_pos,4);return w?(i||new d.experimental.fbs.Tensor).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+w)+4*o),this.bb):null}initializersLength(){let o=this.bb.__offset(this.bb_pos,4);return o?this.bb.__vector_len(this.bb_pos+o):0}nodeArgs(o,i){let w=this.bb.__offset(this.bb_pos,6);return w?(i||new d.experimental.fbs.ValueInfo).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+w)+4*o),this.bb):null}nodeArgsLength(){let o=this.bb.__offset(this.bb_pos,6);return o?this.bb.__vector_len(this.bb_pos+o):0}nodes(o,i){let w=this.bb.__offset(this.bb_pos,8);return w?(i||new d.experimental.fbs.Node).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+w)+4*o),this.bb):null}nodesLength(){let o=this.bb.__offset(this.bb_pos,8);return o?this.bb.__vector_len(this.bb_pos+o):0}maxNodeIndex(){let o=this.bb.__offset(this.bb_pos,10);return o?this.bb.readUint32(this.bb_pos+o):0}nodeEdges(o,i){let w=this.bb.__offset(this.bb_pos,12);return w?(i||new d.experimental.fbs.NodeEdge).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+w)+4*o),this.bb):null}nodeEdgesLength(){let o=this.bb.__offset(this.bb_pos,12);return o?this.bb.__vector_len(this.bb_pos+o):0}inputs(o,i){let w=this.bb.__offset(this.bb_pos,14);return w?this.bb.__string(this.bb.__vector(this.bb_pos+w)+4*o,i):null}inputsLength(){let o=this.bb.__offset(this.bb_pos,14);return o?this.bb.__vector_len(this.bb_pos+o):0}outputs(o,i){let w=this.bb.__offset(this.bb_pos,16);return w?this.bb.__string(this.bb.__vector(this.bb_pos+w)+4*o,i):null}outputsLength(){let o=this.bb.__offset(this.bb_pos,16);return o?this.bb.__vector_len(this.bb_pos+o):0}sparseInitializers(o,i){let w=this.bb.__offset(this.bb_pos,18);return w?(i||new d.experimental.fbs.SparseTensor).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+w)+4*o),this.bb):null}sparseInitializersLength(){let o=this.bb.__offset(this.bb_pos,18);return o?this.bb.__vector_len(this.bb_pos+o):0}static startGraph(o){o.startObject(8)}static addInitializers(o,i){o.addFieldOffset(0,i,0)}static createInitializersVector(o,i){o.startVector(4,i.length,4);for(let w=i.length-1;w>=0;w--)o.addOffset(i[w]);return o.endVector()}static startInitializersVector(o,i){o.startVector(4,i,4)}static addNodeArgs(o,i){o.addFieldOffset(1,i,0)}static createNodeArgsVector(o,i){o.startVector(4,i.length,4);for(let w=i.length-1;w>=0;w--)o.addOffset(i[w]);return o.endVector()}static startNodeArgsVector(o,i){o.startVector(4,i,4)}static addNodes(o,i){o.addFieldOffset(2,i,0)}static createNodesVector(o,i){o.startVector(4,i.length,4);for(let w=i.length-1;w>=0;w--)o.addOffset(i[w]);return o.endVector()}static startNodesVector(o,i){o.startVector(4,i,4)}static addMaxNodeIndex(o,i){o.addFieldInt32(3,i,0)}static addNodeEdges(o,i){o.addFieldOffset(4,i,0)}static createNodeEdgesVector(o,i){o.startVector(4,i.length,4);for(let w=i.length-1;w>=0;w--)o.addOffset(i[w]);return o.endVector()}static startNodeEdgesVector(o,i){o.startVector(4,i,4)}static addInputs(o,i){o.addFieldOffset(5,i,0)}static createInputsVector(o,i){o.startVector(4,i.length,4);for(let w=i.length-1;w>=0;w--)o.addOffset(i[w]);return o.endVector()}static startInputsVector(o,i){o.startVector(4,i,4)}static addOutputs(o,i){o.addFieldOffset(6,i,0)}static createOutputsVector(o,i){o.startVector(4,i.length,4);for(let w=i.length-1;w>=0;w--)o.addOffset(i[w]);return o.endVector()}static startOutputsVector(o,i){o.startVector(4,i,4)}static addSparseInitializers(o,i){o.addFieldOffset(7,i,0)}static createSparseInitializersVector(o,i){o.startVector(4,i.length,4);for(let w=i.length-1;w>=0;w--)o.addOffset(i[w]);return o.endVector()}static startSparseInitializersVector(o,i){o.startVector(4,i,4)}static endGraph(o){return o.endObject()}static createGraph(o,i,w,ae,ue,he,pe,ge,be){return G.startGraph(o),G.addInitializers(o,i),G.addNodeArgs(o,w),G.addNodes(o,ae),G.addMaxNodeIndex(o,ue),G.addNodeEdges(o,he),G.addInputs(o,pe),G.addOutputs(o,ge),G.addSparseInitializers(o,be),G.endGraph(o)}}le.Graph=G})(A.fbs||(A.fbs={}))})(d.experimental||(d.experimental={}))})(e.onnxruntime||(e.onnxruntime={})),(function(d){(function(A){(function(le){class G{constructor(){this.bb=null,this.bb_pos=0}__init(o,i){return this.bb_pos=o,this.bb=i,this}static getRootAsModel(o,i){return(i||new G).__init(o.readInt32(o.position())+o.position(),o)}static getSizePrefixedRootAsModel(o,i){return o.setPosition(o.position()+r.flatbuffers.SIZE_PREFIX_LENGTH),(i||new G).__init(o.readInt32(o.position())+o.position(),o)}irVersion(){let o=this.bb.__offset(this.bb_pos,4);return o?this.bb.readInt64(this.bb_pos+o):this.bb.createLong(0,0)}opsetImport(o,i){let w=this.bb.__offset(this.bb_pos,6);return w?(i||new d.experimental.fbs.OperatorSetId).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+w)+4*o),this.bb):null}opsetImportLength(){let o=this.bb.__offset(this.bb_pos,6);return o?this.bb.__vector_len(this.bb_pos+o):0}producerName(o){let i=this.bb.__offset(this.bb_pos,8);return i?this.bb.__string(this.bb_pos+i,o):null}producerVersion(o){let i=this.bb.__offset(this.bb_pos,10);return i?this.bb.__string(this.bb_pos+i,o):null}domain(o){let i=this.bb.__offset(this.bb_pos,12);return i?this.bb.__string(this.bb_pos+i,o):null}modelVersion(){let o=this.bb.__offset(this.bb_pos,14);return o?this.bb.readInt64(this.bb_pos+o):this.bb.createLong(0,0)}docString(o){let i=this.bb.__offset(this.bb_pos,16);return i?this.bb.__string(this.bb_pos+i,o):null}graph(o){let i=this.bb.__offset(this.bb_pos,18);return i?(o||new d.experimental.fbs.Graph).__init(this.bb.__indirect(this.bb_pos+i),this.bb):null}graphDocString(o){let i=this.bb.__offset(this.bb_pos,20);return i?this.bb.__string(this.bb_pos+i,o):null}static startModel(o){o.startObject(9)}static addIrVersion(o,i){o.addFieldInt64(0,i,o.createLong(0,0))}static addOpsetImport(o,i){o.addFieldOffset(1,i,0)}static createOpsetImportVector(o,i){o.startVector(4,i.length,4);for(let w=i.length-1;w>=0;w--)o.addOffset(i[w]);return o.endVector()}static startOpsetImportVector(o,i){o.startVector(4,i,4)}static addProducerName(o,i){o.addFieldOffset(2,i,0)}static addProducerVersion(o,i){o.addFieldOffset(3,i,0)}static addDomain(o,i){o.addFieldOffset(4,i,0)}static addModelVersion(o,i){o.addFieldInt64(5,i,o.createLong(0,0))}static addDocString(o,i){o.addFieldOffset(6,i,0)}static addGraph(o,i){o.addFieldOffset(7,i,0)}static addGraphDocString(o,i){o.addFieldOffset(8,i,0)}static endModel(o){return o.endObject()}static createModel(o,i,w,ae,ue,he,pe,ge,be,ve){return G.startModel(o),G.addIrVersion(o,i),G.addOpsetImport(o,w),G.addProducerName(o,ae),G.addProducerVersion(o,ue),G.addDomain(o,he),G.addModelVersion(o,pe),G.addDocString(o,ge),G.addGraph(o,be),G.addGraphDocString(o,ve),G.endModel(o)}}le.Model=G})(A.fbs||(A.fbs={}))})(d.experimental||(d.experimental={}))})(e.onnxruntime||(e.onnxruntime={})),(function(d){(function(A){(function(le){class G{constructor(){this.bb=null,this.bb_pos=0}__init(o,i){return this.bb_pos=o,this.bb=i,this}static getRootAsKernelCreateInfos(o,i){return(i||new G).__init(o.readInt32(o.position())+o.position(),o)}static getSizePrefixedRootAsKernelCreateInfos(o,i){return o.setPosition(o.position()+r.flatbuffers.SIZE_PREFIX_LENGTH),(i||new G).__init(o.readInt32(o.position())+o.position(),o)}nodeIndices(o){let i=this.bb.__offset(this.bb_pos,4);return i?this.bb.readUint32(this.bb.__vector(this.bb_pos+i)+4*o):0}nodeIndicesLength(){let o=this.bb.__offset(this.bb_pos,4);return o?this.bb.__vector_len(this.bb_pos+o):0}nodeIndicesArray(){let o=this.bb.__offset(this.bb_pos,4);return o?new Uint32Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+o),this.bb.__vector_len(this.bb_pos+o)):null}kernelDefHashes(o){let i=this.bb.__offset(this.bb_pos,6);return i?this.bb.readUint64(this.bb.__vector(this.bb_pos+i)+8*o):this.bb.createLong(0,0)}kernelDefHashesLength(){let o=this.bb.__offset(this.bb_pos,6);return o?this.bb.__vector_len(this.bb_pos+o):0}static startKernelCreateInfos(o){o.startObject(2)}static addNodeIndices(o,i){o.addFieldOffset(0,i,0)}static createNodeIndicesVector(o,i){o.startVector(4,i.length,4);for(let w=i.length-1;w>=0;w--)o.addInt32(i[w]);return o.endVector()}static startNodeIndicesVector(o,i){o.startVector(4,i,4)}static addKernelDefHashes(o,i){o.addFieldOffset(1,i,0)}static createKernelDefHashesVector(o,i){o.startVector(8,i.length,8);for(let w=i.length-1;w>=0;w--)o.addInt64(i[w]);return o.endVector()}static startKernelDefHashesVector(o,i){o.startVector(8,i,8)}static endKernelCreateInfos(o){return o.endObject()}static createKernelCreateInfos(o,i,w){return G.startKernelCreateInfos(o),G.addNodeIndices(o,i),G.addKernelDefHashes(o,w),G.endKernelCreateInfos(o)}}le.KernelCreateInfos=G})(A.fbs||(A.fbs={}))})(d.experimental||(d.experimental={}))})(e.onnxruntime||(e.onnxruntime={})),(function(d){(function(A){(function(le){class G{constructor(){this.bb=null,this.bb_pos=0}__init(o,i){return this.bb_pos=o,this.bb=i,this}static getRootAsSubGraphSessionState(o,i){return(i||new G).__init(o.readInt32(o.position())+o.position(),o)}static getSizePrefixedRootAsSubGraphSessionState(o,i){return o.setPosition(o.position()+r.flatbuffers.SIZE_PREFIX_LENGTH),(i||new G).__init(o.readInt32(o.position())+o.position(),o)}graphId(o){let i=this.bb.__offset(this.bb_pos,4);return i?this.bb.__string(this.bb_pos+i,o):null}sessionState(o){let i=this.bb.__offset(this.bb_pos,6);return i?(o||new d.experimental.fbs.SessionState).__init(this.bb.__indirect(this.bb_pos+i),this.bb):null}static startSubGraphSessionState(o){o.startObject(2)}static addGraphId(o,i){o.addFieldOffset(0,i,0)}static addSessionState(o,i){o.addFieldOffset(1,i,0)}static endSubGraphSessionState(o){let i=o.endObject();return o.requiredField(i,4),i}static createSubGraphSessionState(o,i,w){return G.startSubGraphSessionState(o),G.addGraphId(o,i),G.addSessionState(o,w),G.endSubGraphSessionState(o)}}le.SubGraphSessionState=G})(A.fbs||(A.fbs={}))})(d.experimental||(d.experimental={}))})(e.onnxruntime||(e.onnxruntime={})),(function(d){(function(A){(function(le){class G{constructor(){this.bb=null,this.bb_pos=0}__init(o,i){return this.bb_pos=o,this.bb=i,this}static getRootAsSessionState(o,i){return(i||new G).__init(o.readInt32(o.position())+o.position(),o)}static getSizePrefixedRootAsSessionState(o,i){return o.setPosition(o.position()+r.flatbuffers.SIZE_PREFIX_LENGTH),(i||new G).__init(o.readInt32(o.position())+o.position(),o)}kernels(o){let i=this.bb.__offset(this.bb_pos,4);return i?(o||new d.experimental.fbs.KernelCreateInfos).__init(this.bb.__indirect(this.bb_pos+i),this.bb):null}subGraphSessionStates(o,i){let w=this.bb.__offset(this.bb_pos,6);return w?(i||new d.experimental.fbs.SubGraphSessionState).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+w)+4*o),this.bb):null}subGraphSessionStatesLength(){let o=this.bb.__offset(this.bb_pos,6);return o?this.bb.__vector_len(this.bb_pos+o):0}static startSessionState(o){o.startObject(2)}static addKernels(o,i){o.addFieldOffset(0,i,0)}static addSubGraphSessionStates(o,i){o.addFieldOffset(1,i,0)}static createSubGraphSessionStatesVector(o,i){o.startVector(4,i.length,4);for(let w=i.length-1;w>=0;w--)o.addOffset(i[w]);return o.endVector()}static startSubGraphSessionStatesVector(o,i){o.startVector(4,i,4)}static endSessionState(o){return o.endObject()}static createSessionState(o,i,w){return G.startSessionState(o),G.addKernels(o,i),G.addSubGraphSessionStates(o,w),G.endSessionState(o)}}le.SessionState=G})(A.fbs||(A.fbs={}))})(d.experimental||(d.experimental={}))})(e.onnxruntime||(e.onnxruntime={})),(function(d){(function(A){(function(le){class G{constructor(){this.bb=null,this.bb_pos=0}__init(o,i){return this.bb_pos=o,this.bb=i,this}static getRootAsInferenceSession(o,i){return(i||new G).__init(o.readInt32(o.position())+o.position(),o)}static getSizePrefixedRootAsInferenceSession(o,i){return o.setPosition(o.position()+r.flatbuffers.SIZE_PREFIX_LENGTH),(i||new G).__init(o.readInt32(o.position())+o.position(),o)}static bufferHasIdentifier(o){return o.__has_identifier("ORTM")}ortVersion(o){let i=this.bb.__offset(this.bb_pos,4);return i?this.bb.__string(this.bb_pos+i,o):null}model(o){let i=this.bb.__offset(this.bb_pos,6);return i?(o||new d.experimental.fbs.Model).__init(this.bb.__indirect(this.bb_pos+i),this.bb):null}sessionState(o){let i=this.bb.__offset(this.bb_pos,8);return i?(o||new d.experimental.fbs.SessionState).__init(this.bb.__indirect(this.bb_pos+i),this.bb):null}static startInferenceSession(o){o.startObject(3)}static addOrtVersion(o,i){o.addFieldOffset(0,i,0)}static addModel(o,i){o.addFieldOffset(1,i,0)}static addSessionState(o,i){o.addFieldOffset(2,i,0)}static endInferenceSession(o){return o.endObject()}static finishInferenceSessionBuffer(o,i){o.finish(i,"ORTM")}static finishSizePrefixedInferenceSessionBuffer(o,i){o.finish(i,"ORTM",!0)}static createInferenceSession(o,i,w,ae){return G.startInferenceSession(o),G.addOrtVersion(o,i),G.addModel(o,w),G.addSessionState(o,ae),G.endInferenceSession(o)}}le.InferenceSession=G})(A.fbs||(A.fbs={}))})(d.experimental||(d.experimental={}))})(e.onnxruntime||(e.onnxruntime={}))},7448:(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.OnnxjsSessionHandler=void 0;const r=t(1670),u=t(9162);e.OnnxjsSessionHandler=class{constructor(T){this.session=T,this.inputNames=this.session.inputNames,this.outputNames=this.session.outputNames}async dispose(){}async run(T,d,A){const le=new Map;for(const o in T)if(Object.hasOwnProperty.call(T,o)){const i=T[o];le.set(o,new u.Tensor(i.dims,i.type,void 0,void 0,i.data))}const G=await this.session.run(le),B={};return G.forEach(((o,i)=>{B[i]=new r.Tensor(o.type,o.data,o.dims)})),B}startProfiling(){this.session.startProfiling()}endProfiling(){this.session.endProfiling()}}},6919:(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Session=void 0;const r=t(7067),u=t(1296),T=t(7091),d=t(1036),A=t(6231),le=t(2644);e.Session=class{constructor(G={}){this._initialized=!1,this.backendHint=G.backendHint,this.profiler=A.Profiler.create(G.profiler),this.context={profiler:this.profiler,graphInputTypes:[],graphInputDims:[]}}get inputNames(){return this._model.graph.getInputNames()}get outputNames(){return this._model.graph.getOutputNames()}startProfiling(){this.profiler.start()}endProfiling(){this.profiler.stop()}async loadModel(G,B,o){await this.profiler.event("session","Session.loadModel",(async()=>{const i=await(0,T.resolveBackend)(this.backendHint);if(this.sessionHandler=i.createSessionHandler(this.context),this._model=new le.Model,typeof G=="string"){const w=G.endsWith(".ort");if(typeof fetch>"u"){const ae=await(0,u.promisify)(r.readFile)(G);this.initialize(ae,w)}else{const ae=await fetch(G),ue=await ae.arrayBuffer();this.initialize(new Uint8Array(ue),w)}}else if(ArrayBuffer.isView(G))this.initialize(G);else{const w=new Uint8Array(G,B||0,o||G.byteLength);this.initialize(w)}}))}initialize(G,B){if(this._initialized)throw new Error("already initialized");this.profiler.event("session","Session.initialize",(()=>{const o=this.sessionHandler.transformGraph?this.sessionHandler:void 0;this._model.load(G,o,B),this.sessionHandler.onGraphInitialized&&this.sessionHandler.onGraphInitialized(this._model.graph),this.initializeOps(this._model.graph),this._executionPlan=new d.ExecutionPlan(this._model.graph,this._ops,this.profiler)})),this._initialized=!0}async run(G){if(!this._initialized)throw new Error("session not initialized yet");return this.profiler.event("session","Session.run",(async()=>{const B=this.normalizeAndValidateInputs(G),o=await this._executionPlan.execute(this.sessionHandler,B);return this.createOutput(o)}))}normalizeAndValidateInputs(G){const B=this._model.graph.getInputNames();if(Array.isArray(G)){if(G.length!==B.length)throw new Error(`incorrect input array length: expected ${B.length} but got ${G.length}`)}else{if(G.size!==B.length)throw new Error(`incorrect input map size: expected ${B.length} but got ${G.size}`);const o=new Array(G.size);let i=0;for(let w=0;w<B.length;++w){const ae=G.get(B[w]);if(!ae)throw new Error(`missing input tensor for: '${name}'`);o[i++]=ae}G=o}if(this.context.graphInputTypes&&this.context.graphInputTypes.length!==0&&this.context.graphInputDims&&this.context.graphInputDims.length!==0)this.validateInputTensorDims(this.context.graphInputDims,G,!1);else{const o=this._model.graph.getInputIndices(),i=this._model.graph.getValues(),w=new Array(o.length);for(let ae=0;ae<o.length;++ae){const ue=i[o[ae]];w[ae]=ue.type.shape.dims,this.context.graphInputTypes.push(ue.type.tensorType),this.context.graphInputDims.push(G[ae].dims)}this.validateInputTensorDims(w,G,!0)}return this.validateInputTensorTypes(this.context.graphInputTypes,G),G}validateInputTensorTypes(G,B){for(let o=0;o<B.length;o++){const i=G[o],w=B[o].type;if(i!==w)throw new Error(`input tensor[${o}] check failed: expected type '${i}' but got ${w}`)}}validateInputTensorDims(G,B,o){for(let i=0;i<B.length;i++){const w=G[i],ae=B[i].dims;if(!this.compareTensorDims(w,ae,o))throw new Error(`input tensor[${i}] check failed: expected shape '[${w.join(",")}]' but got [${ae.join(",")}]`)}}compareTensorDims(G,B,o){if(G.length!==B.length)return!1;for(let i=0;i<G.length;++i)if(G[i]!==B[i]&&(!o||G[i]!==0))return!1;return!0}createOutput(G){const B=this._model.graph.getOutputNames();if(G.length!==B.length)throw new Error("expected number of outputs do not match number of generated outputs");const o=new Map;for(let i=0;i<B.length;++i)o.set(B[i],G[i]);return o}initializeOps(G){const B=G.getNodes();this._ops=new Array(B.length);for(let o=0;o<B.length;o++)this._ops[o]=this.sessionHandler.resolve(B[o],this._model.opsets,G)}}},9162:function(n,e,t){var r=this&&this.__importDefault||function(ue){return ue&&ue.__esModule?ue:{default:ue}};Object.defineProperty(e,"__esModule",{value:!0}),e.Tensor=void 0;const u=t(3442),T=r(t(3720)),d=t(1446),A=t(9395),le=t(2517);var G=A.onnxruntime.experimental.fbs;class B{get data(){if(this.cache===void 0){const he=this.dataProvider(this.dataId);if(he.length!==this.size)throw new Error("Length of data provided by the Data Provider is inconsistent with the dims of this Tensor.");this.cache=he}return this.cache}get stringData(){if(this.type!=="string")throw new TypeError("data type is not string");return this.data}get integerData(){switch(this.type){case"uint8":case"int8":case"uint16":case"int16":case"int32":case"uint32":case"bool":return this.data;default:throw new TypeError("data type is not integer (uint8, int8, uint16, int16, int32, uint32, bool)")}}get floatData(){switch(this.type){case"float32":case"float64":return this.data;default:throw new TypeError("data type is not float (float32, float64)")}}get numberData(){if(this.type!=="string")return this.data;throw new TypeError("type cannot be non-number (string)")}get(he){return this.data[le.ShapeUtil.indicesToOffset(he,this.strides)]}set(he,pe){this.data[le.ShapeUtil.indicesToOffset(he,this.strides)]=pe}async getData(){return this.cache===void 0&&(this.cache=await this.asyncDataProvider(this.dataId)),this.cache}get strides(){return this._strides||(this._strides=le.ShapeUtil.computeStrides(this.dims)),this._strides}constructor(he,pe,ge,be,ve,we=u.Guid.create()){this.dims=he,this.type=pe,this.dataProvider=ge,this.asyncDataProvider=be,this.cache=ve,this.dataId=we,this.size=le.ShapeUtil.validateDimsAndCalcSize(he);const Se=this.size,Ae=ge===void 0&&be===void 0&&ve===void 0;if(ve!==void 0&&ve.length!==Se)throw new RangeError("Input dims doesn't match data length.");if(pe==="string"){if(!(ve===void 0||Array.isArray(ve)&&ve.every((Re=>typeof Re=="string"))))throw new TypeError("cache should be a string array");Ae&&(this.cache=new Array(Se))}else{if(ve!==void 0){const Re=i(pe);if(!(ve instanceof Re))throw new TypeError(`cache should be type ${Re.name}`)}if(Ae){const Re=new ArrayBuffer(Se*(function(Te){switch(Te){case"bool":case"int8":case"uint8":return 1;case"int16":case"uint16":return 2;case"int32":case"uint32":case"float32":return 4;case"float64":return 8;default:throw new Error(`cannot calculate sizeof() on type ${Te}`)}})(pe));this.cache=(function(Te,Ce){return new(i(Ce))(Te)})(Re,pe)}}}static fromProto(he){if(!he)throw new Error("cannot construct Value from an empty tensor");const pe=le.ProtoUtil.tensorDataTypeFromProto(he.dataType),ge=le.ProtoUtil.tensorDimsFromProto(he.dims),be=new B(ge,pe);if(pe==="string")he.stringData.forEach(((ve,we)=>{be.data[we]=(0,le.decodeUtf8String)(ve)}));else if(he.rawData&&typeof he.rawData.byteLength=="number"&&he.rawData.byteLength>0){const ve=be.data,we=new DataView(he.rawData.buffer,he.rawData.byteOffset,he.rawData.byteLength),Se=o(he.dataType),Ae=he.rawData.byteLength/Se;if(he.rawData.byteLength%Se!=0)throw new Error("invalid buffer length");if(ve.length!==Ae)throw new Error("buffer length mismatch");for(let Re=0;Re<Ae;Re++){const Te=ae(we,he.dataType,Re*Se);ve[Re]=Te}}else{let ve;switch(he.dataType){case d.onnx.TensorProto.DataType.FLOAT:ve=he.floatData;break;case d.onnx.TensorProto.DataType.INT32:case d.onnx.TensorProto.DataType.INT16:case d.onnx.TensorProto.DataType.UINT16:case d.onnx.TensorProto.DataType.INT8:case d.onnx.TensorProto.DataType.UINT8:case d.onnx.TensorProto.DataType.BOOL:ve=he.int32Data;break;case d.onnx.TensorProto.DataType.INT64:ve=he.int64Data;break;case d.onnx.TensorProto.DataType.DOUBLE:ve=he.doubleData;break;case d.onnx.TensorProto.DataType.UINT32:case d.onnx.TensorProto.DataType.UINT64:ve=he.uint64Data;break;default:throw new Error("unspecific error")}if(ve==null)throw new Error("failed to populate data from a tensorproto value");const we=be.data;if(we.length!==ve.length)throw new Error("array length mismatch");for(let Se=0;Se<ve.length;Se++){const Ae=ve[Se];T.default.isLong(Ae)?we[Se]=w(Ae,he.dataType):we[Se]=Ae}}return be}static fromData(he,pe,ge){return new B(pe,ge,void 0,void 0,he)}static fromOrtTensor(he){if(!he)throw new Error("cannot construct Value from an empty tensor");const pe=le.ProtoUtil.tensorDimsFromORTFormat(he),ge=le.ProtoUtil.tensorDataTypeFromProto(he.dataType()),be=new B(pe,ge);if(ge==="string")for(let ve=0;ve<he.stringDataLength();ve++)be.data[ve]=he.stringData(ve);else if(he.rawDataArray()&&typeof he.rawDataLength()=="number"&&he.rawDataLength()>0){const ve=be.data,we=new DataView(he.rawDataArray().buffer,he.rawDataArray().byteOffset,he.rawDataLength()),Se=o(he.dataType()),Ae=he.rawDataLength()/Se;if(he.rawDataLength()%Se!=0)throw new Error("invalid buffer length");if(ve.length!==Ae)throw new Error("buffer length mismatch");for(let Re=0;Re<Ae;Re++){const Te=ae(we,he.dataType(),Re*Se);ve[Re]=Te}}return be}}function o(ue){switch(ue){case d.onnx.TensorProto.DataType.UINT8:case d.onnx.TensorProto.DataType.INT8:case d.onnx.TensorProto.DataType.BOOL:return 1;case d.onnx.TensorProto.DataType.UINT16:case d.onnx.TensorProto.DataType.INT16:return 2;case d.onnx.TensorProto.DataType.FLOAT:case d.onnx.TensorProto.DataType.INT32:case d.onnx.TensorProto.DataType.UINT32:return 4;case d.onnx.TensorProto.DataType.INT64:case d.onnx.TensorProto.DataType.DOUBLE:case d.onnx.TensorProto.DataType.UINT64:return 8;default:throw new Error(`cannot calculate sizeof() on type ${d.onnx.TensorProto.DataType[ue]}`)}}function i(ue){switch(ue){case"bool":case"uint8":return Uint8Array;case"int8":return Int8Array;case"int16":return Int16Array;case"uint16":return Uint16Array;case"int32":return Int32Array;case"uint32":return Uint32Array;case"float32":return Float32Array;case"float64":return Float64Array;default:throw new Error("unspecified error")}}function w(ue,he){if(he===d.onnx.TensorProto.DataType.INT64||he===G.TensorDataType.INT64){if(ue.greaterThanOrEqual(2147483648)||ue.lessThan(-2147483648))throw new TypeError("int64 is not supported")}else{if(he!==d.onnx.TensorProto.DataType.UINT32&&he!==G.TensorDataType.UINT32&&he!==d.onnx.TensorProto.DataType.UINT64&&he!==G.TensorDataType.UINT64)throw new TypeError(`not a LONG type: ${d.onnx.TensorProto.DataType[he]}`);if(ue.greaterThanOrEqual(4294967296)||ue.lessThan(0))throw new TypeError("uint64 is not supported")}return ue.toNumber()}function ae(ue,he,pe){switch(he){case d.onnx.TensorProto.DataType.BOOL:case d.onnx.TensorProto.DataType.UINT8:return ue.getUint8(pe);case d.onnx.TensorProto.DataType.INT8:return ue.getInt8(pe);case d.onnx.TensorProto.DataType.UINT16:return ue.getUint16(pe,!0);case d.onnx.TensorProto.DataType.INT16:return ue.getInt16(pe,!0);case d.onnx.TensorProto.DataType.FLOAT:return ue.getFloat32(pe,!0);case d.onnx.TensorProto.DataType.INT32:return ue.getInt32(pe,!0);case d.onnx.TensorProto.DataType.UINT32:return ue.getUint32(pe,!0);case d.onnx.TensorProto.DataType.INT64:return w(T.default.fromBits(ue.getUint32(pe,!0),ue.getUint32(pe+4,!0),!1),he);case d.onnx.TensorProto.DataType.DOUBLE:return ue.getFloat64(pe,!0);case d.onnx.TensorProto.DataType.UINT64:return w(T.default.fromBits(ue.getUint32(pe,!0),ue.getUint32(pe+4,!0),!0),he);default:throw new Error(`cannot read from DataView for type ${d.onnx.TensorProto.DataType[he]}`)}}e.Tensor=B},2517:function(n,e,t){var r=this&&this.__importDefault||function(he){return he&&he.__esModule?he:{default:he}};Object.defineProperty(e,"__esModule",{value:!0}),e.decodeUtf8String=e.MAX_CLIP=e.MIN_CLIP=e.PoolConvUtil=e.ReduceUtil=e.SplitUtil=e.MathUtil=e.ShapeUtil=e.LongUtil=e.ProtoUtil=e.GemmUtil=e.arrayCopyHelper=e.BroadcastUtil=e.MatMulUtil=e.ArrayUtil=e.assert=e.checkInputsShape=void 0;const u=t(5686),T=r(t(3720)),d=t(1446),A=t(9162);e.checkInputsShape=function(he,...pe){if(!he||he.length!==pe.length)return!1;for(let ge=0;ge<he.length;ge++)if(!he[ge].dims||he[ge].dims.length!==pe[ge])return!1;return!0},e.assert=function(he,pe){if(!he)throw new Error(typeof pe=="string"?pe:pe())},e.ArrayUtil=class{static arraysEqual(he,pe){if(he.length!==pe.length)return!1;for(let ge=0;ge<he.length;ge++)if(he[ge]!==pe[ge])return!1;return!0}};class le{static preprocessInputShapes(pe,ge){return[pe.length===1?[1,pe[0]]:pe,ge.length===1?[ge[0],1]:ge]}static postprocessOutputShape(pe,ge,be){ge===1&&pe.splice(pe.length-2,1),be===1&&pe.pop()}static calcMatMulShape(pe,ge){return pe[1]!==ge[0]?void 0:[pe[0],ge[1]]}}e.MatMulUtil=le;class G{static calcShape(pe,ge,be=!1){const ve=pe.length,we=ge.length;if(ve===0)return ge;if(we===0)return pe;const Se=Math.max(pe.length,ge.length),Ae=new Array(Se);if(be){if(ve<2||we<2)return;const Re=le.calcMatMulShape([pe[ve-2],pe[ve-1]],[ge[we-2],ge[we-1]]);if(Re===void 0)return;[Ae[Se-2],Ae[Se-1]]=Re}for(let Re=be?3:1;Re<=Se;Re++){const Te=ve-Re<0?1:pe[ve-Re],Ce=we-Re<0?1:ge[we-Re];if(Te!==Ce&&Te>1&&Ce>1)return;Ae[Se-Re]=Math.max(Te,Ce)}return Ae}static index(pe,ge){const be=new Array(ge.length);return G.fillIndex(pe,ge,be),be}static fillIndex(pe,ge,be){const ve=pe.length-ge.length;for(let we=0;we<ge.length;we++)be[we]=pe[ve+we]%ge[we]}static calc(pe,ge,be,ve,we){const Se=G.calcShape(pe.dims,ge.dims);if(Se){if(ve&&!i.areEqual(Se,pe.dims))return;const Ae=i.size(Se),Re=ve?pe:new A.Tensor(Se,we||pe.type);if(Se.length===0)Re.set([],be(pe.get([]),ge.get([])));else{const Te=new Array(Se.length),Ce=new Array(pe.dims.length),Ve=new Array(ge.dims.length);let $e,He=0,De=0,Xe=!1,Me=!1;pe.dims.length===0&&(He=pe.get([]),Xe=!0),ge.dims.length===0&&(De=ge.get([]),Me=!0);for(let je=0;je<Ae;je++){$e=je;for(let it=Se.length-1;it>=0;it--)Te[it]=$e%Se[it],$e=Math.floor($e/Se[it]);Xe||(G.fillIndex(Te,pe.dims,Ce),He=pe.get(Ce)),Me||(G.fillIndex(Te,ge.dims,Ve),De=ge.get(Ve)),Re.set(Te,be(He,De))}}return Re}}static isValidBroadcast(pe,ge){const be=pe.length,ve=ge.length;if(be>ve)return!1;for(let we=1;we<=be;we++)if(pe[be-we]!==1&&pe[be-we]!==ge[ve-we])return!1;return!0}static getBroadcastDims(pe,ge){const be=pe.length,ve=[];for(let we=0;we<be;we++){const Se=be-1-we,Ae=pe[Se]||1;(ge[ge.length-1-we]||1)>1&&Ae===1&&ve.unshift(Se)}return ve}}e.BroadcastUtil=G,e.arrayCopyHelper=function(he,pe,ge,be,ve){if(be<0||be>=pe.length)throw new Error("sourceIndex out of bounds");if(ge<0||ge>=he.length)throw new Error("targetIndex out of bounds");if(be+ve>pe.length)throw new Error("source indices to be copied are outside bounds");if(ge+ve>he.length)throw new Error("target array is too small to hold result");for(let we=0;we<ve;we++)he[ge+we]=pe[be+we]},e.GemmUtil=class{static getShapeOfGemmResult(he,pe,ge,be,ve){if(he.length!==2||ge.length!==2)throw new Error("shape need to be of size 2");let we,Se,Ae;pe?(we=he[1],Se=he[0]):(we=he[0],Se=he[1]);let Re=-1;if(be?(Ae=ge[0],Re=1):(Ae=ge[1],Re=0),ge[Re]!==Se)throw new Error("dimension mismatch");if(we<=0||Ae<=0||Se<=0)throw new Error("invalid shape specified");if(ve&&!G.isValidBroadcast(ve,[we,Ae]))throw new Error("gemm: invalid bias shape for broadcast");return[we,Ae,Se]}};class B{static tensorDataTypeFromProto(pe){switch(pe){case d.onnx.TensorProto.DataType.INT8:return"int8";case d.onnx.TensorProto.DataType.UINT8:return"uint8";case d.onnx.TensorProto.DataType.BOOL:return"bool";case d.onnx.TensorProto.DataType.INT16:return"int16";case d.onnx.TensorProto.DataType.UINT16:return"uint16";case d.onnx.TensorProto.DataType.INT32:return"int32";case d.onnx.TensorProto.DataType.UINT32:return"uint32";case d.onnx.TensorProto.DataType.FLOAT:return"float32";case d.onnx.TensorProto.DataType.DOUBLE:return"float64";case d.onnx.TensorProto.DataType.STRING:return"string";case d.onnx.TensorProto.DataType.INT64:return"int32";case d.onnx.TensorProto.DataType.UINT64:return"uint32";default:throw new Error(`unsupported data type: ${d.onnx.TensorProto.DataType[pe]}`)}}static tensorDataTypeStringToEnum(pe){switch(pe){case"int8":return d.onnx.TensorProto.DataType.INT8;case"uint8":return d.onnx.TensorProto.DataType.UINT8;case"bool":return d.onnx.TensorProto.DataType.BOOL;case"int16":return d.onnx.TensorProto.DataType.INT16;case"uint16":return d.onnx.TensorProto.DataType.UINT16;case"int32":return d.onnx.TensorProto.DataType.INT32;case"uint32":return d.onnx.TensorProto.DataType.UINT32;case"float32":return d.onnx.TensorProto.DataType.FLOAT;case"float64":return d.onnx.TensorProto.DataType.DOUBLE;case"string":return d.onnx.TensorProto.DataType.STRING;case"int64":return d.onnx.TensorProto.DataType.INT64;case"uint64":return d.onnx.TensorProto.DataType.UINT64;default:throw new Error(`unsupported data type: ${pe}`)}}static tensorDimsFromProto(pe){return pe.map((ge=>T.default.isLong(ge)?ge.toNumber():ge))}static tensorValueTypeFromProto(pe){return{tensorType:B.tensorDataTypeFromProto(pe.elemType),shape:{dims:B.tensorDimsFromProto(pe.shape.dim.map((ge=>ge.dimValue)))}}}static tensorDimsFromORTFormat(pe){const ge=[];for(let be=0;be<pe.dimsLength();be++)ge.push(o.longToNumber(pe.dims(be)));return ge}static tensorAttributesFromORTFormat(pe){const ge=[];for(let be=0;be<pe.attributesLength();be++)ge.push(pe.attributes(be));return ge}}e.ProtoUtil=B;class o{static longToNumber(pe,ge){return T.default.isLong(pe)?pe.toNumber():pe instanceof u.flatbuffers.Long?T.default.fromValue({low:pe.low,high:pe.high,unsigned:ge!=null&&ge}).toNumber():pe}static isLong(pe){return T.default.isLong(pe)||pe instanceof u.flatbuffers.Long}}e.LongUtil=o;class i{static size(pe){return i.getSizeFromDimensionRange(pe,0,pe.length)}static sizeFromDimension(pe,ge){if(ge<0||ge>pe.length)throw new Error(`invalid dimension of ${ge} for sizeFromDimension as Tensor has ${pe.length} dimensions.`);return i.getSizeFromDimensionRange(pe,ge,pe.length)}static sizeToDimension(pe,ge){if(ge<0||ge>pe.length)throw new Error(`invalid dimension of ${ge} for sizeToDimension as Tensor has ${pe.length} dimensions.`);return i.getSizeFromDimensionRange(pe,0,ge)}static getSizeFromDimensionRange(pe,ge,be){let ve=1;for(let we=ge;we<be;we++){if(pe[we]<=0)throw new Error("cannot get valid size from specified dimension range. Most likely the range contains 0 or negative values in them.");ve*=pe[we]}return ve}static computeStrides(pe){const ge=pe.length;if(ge===0)return[];if(ge===1)return[1];const be=new Array(ge);be[ge-1]=1,be[ge-2]=pe[ge-1];for(let ve=ge-3;ve>=0;--ve)be[ve]=be[ve+1]*pe[ve+1];return be}static transpose(pe){return pe.slice().reverse()}static indicesToOffset(pe,ge,be){be===void 0&&(be=pe.length);let ve=0;for(let we=0;we<be;++we)ve+=ge[we]*pe[we];return ve}static offsetToIndices(pe,ge){const be=ge.length;if(be===0)return[];if(be===1)return[pe*ge[0]];const ve=new Array(ge.length);for(let we=0;we<ve.length-1;++we)ve[we]=Math.floor(pe/ge[we]),pe-=ve[we]*ge[we];return ve[ve.length-1]=pe,ve}static normalizeAxis(pe,ge){if(pe<-ge&&pe>=ge)throw new Error("unsupported axis for this operation.");return pe<0?pe+ge:pe}static normalizeAxes(pe,ge){return pe.map((be=>this.normalizeAxis(be,ge)))}static incrementIndex(pe,ge,be){if(ge.length===0||pe.length===0)throw new Error("Index incrementing unsupported for scalar Tensor");if(be===void 0)be=ge.length;else if(be<=0||be>ge.length)throw new Error("Incorrect axis to increment on");for(let ve=be-1;ve>=0&&(pe[ve]++,!(pe[ve]<ge[ve]));--ve)pe[ve]=0}static calculateReshapedDims(pe,ge){if(ge.length===0){if(pe.length===0||i.size(pe)===1)return[];throw new Error("cannot reshape to a scalar Tensor")}const be=ge.length,ve=new Array(be);let we=-1,Se=1;for(let Re=0;Re<be;Re++){if(ge[Re]<-1)throw new Error("a dimension in shape hints cannot be less than -1");if(ge[Re]===-1){if(we!==-1)throw new Error("at most one dimension in shape hints can be -1");we=Re}else{if(ge[Re]===0){if(Re>=pe.length)throw new Error("the dimension with value zero exceeds the dimension size of the input tensor");ve[Re]=pe[Re]}else ve[Re]=ge[Re];Se*=ve[Re]}}const Ae=i.size(pe);if(we!==-1){if(Ae%Se!=0)throw new Error(`the input tensor cannot be reshaped to the requested shape. Input shape: [${pe}] Output shape: [${ge}]`);ve[we]=Ae/Se}else if(Se!==Ae)throw new Error("reshapedDims and originalDims don't have matching sizes");return ve}static sortBasedOnPerm(pe,ge){return ge?ge.map((be=>pe[be])):pe.slice().reverse()}static padShape(pe,ge){const be=pe.length;return pe.map(((ve,we)=>ve+ge[we]+ge[we+be]))}static areEqual(pe,ge){return pe.length===ge.length&&pe.every(((be,ve)=>be===ge[ve]))}static validateDimsAndCalcSize(pe){if(pe.length>6)throw new TypeError("Only rank 0 to 6 is supported for tensor shape.");let ge=1;for(const be of pe){if(!Number.isInteger(be))throw new TypeError(`Invalid shape: ${be} is not an integer`);if(be<0||be>2147483647)throw new TypeError(`Invalid shape: length ${be} is not allowed`);ge*=be}return ge}static flattenShape(pe,ge){ge<0&&(ge+=pe.length);const be=pe.reduce(((we,Se)=>we*Se),1),ve=pe.slice(ge).reduce(((we,Se)=>we*Se),1);return[be/ve,ve]}static squeezeShape(pe,ge){const be=new Array;ge=i.normalizeAxes(ge,pe.length);for(let ve=0;ve<pe.length;ve++){const we=ge.indexOf(ve)>=0;if(we&&pe[ve]!==1)throw new Error("squeeze an axis of size different than 1");(ge.length===0&&pe[ve]>1||ge.length>0&&!we)&&be.push(pe[ve])}return be}static unsqueezeShape(pe,ge){const be=new Array(pe.length+ge.length);be.fill(0);for(let we=0;we<ge.length;we++){const Se=i.normalizeAxis(ge[we],be.length);if(Se>=be.length)throw new Error("'axes' has an out of range axis");if(be[Se]!==0)throw new Error("'axes' has a duplicate axis");be[Se]=1}let ve=0;for(let we=0;we<be.length;we++)be[we]===0&&(be[we]=pe[ve++]);if(ve!==pe.length)throw new Error("the unsqueezed dimension could not be established");return be}}e.ShapeUtil=i,e.MathUtil=class{static sqr(he,pe,ge,be,ve){if(be<0||be>=pe.length)throw new Error("sourceIndex out of bounds");if(ge<0||ge>=he.length)throw new Error("targetIndex out of bounds");if(be+ve>pe.length)throw new Error("source indices to be copied are outside bounds");if(ge+ve>he.length)throw new Error("target array is too small to hold result");for(let we=0;we<ve;we++)he[ge+we]+=Math.pow(pe[be+we],2)}static axpy(he,pe,ge,be,ve,we){if(be<0||be>=pe.length)throw new Error("sourceIndex out of bounds");if(ge<0||ge>=he.length)throw new Error("targetIndex out of bounds");if(be+ve>pe.length)throw new Error("source indices to be copied are outside bounds");if(ge+ve>he.length)throw new Error("target array is too small to hold result");for(let Se=0;Se<ve;Se++)he[ge+Se]+=we*pe[be+Se]}static powx(he,pe,ge,be,ve,we){if(be<0||be>=pe.length)throw new Error("sourceIndex out of bounds");if(ge<0||ge>=he.length)throw new Error("targetIndex out of bounds");if(be+ve>pe.length)throw new Error("source indices to be copied are outside bounds");if(ge+ve>he.length)throw new Error("target array is too small to hold result");for(let Se=0;Se<ve;Se++)he[ge+Se]=Math.pow(pe[be+Se],we)}static mul(he,pe,ge,be,ve){if(be<0||be>=pe.length)throw new Error("sourceIndex out of bounds");if(ge<0||ge>=he.length)throw new Error("targetIndex out of bounds");if(be+ve>pe.length)throw new Error("source indices to be copied are outside bounds");if(ge+ve>he.length)throw new Error("target array is too small to hold result");for(let we=0;we<ve;we++)he[ge+we]=pe[be+we]*he[ge+we]}};class w{static splitShape(pe,ge,be,ve){if(be.length===0){if(!ve)throw new Error("need to know number of outputs when the 'split' attribute is not specified");w.determineSplit(pe[ge],ve,be)}const we=[],Se=[0];for(let Ae=0;Ae<be.length;++Ae){Ae!==0&&Se.push(Se[Ae-1]+be[Ae-1]);const Re=pe.slice();Re[ge]=be[Ae],we.push(Re)}return[we,Se]}static determineSplit(pe,ge,be){if(pe%ge!=0)throw new Error("cannot split tensor to equal sized parts");for(let ve=0;ve<ge;++ve)be.push(pe/ge)}}e.SplitUtil=w;class ae{static calcReduce(pe,ge,be,ve,we){const Se=pe.dims.slice(0);ge.length===0&&Se.forEach(((He,De)=>ge.push(De)));const Ae=ae.calcReduceShape(Se,ge,!0),Re=i.size(Ae),Te=new A.Tensor(Ae,pe.type),Ce=i.computeStrides(Ae),Ve=i.computeStrides(Se),$e=new Array(Se.length);for(let He=0;He<Re;He++){const De=i.offsetToIndices(He,Ce);G.fillIndex(De,Se,$e),Te.set(De,ae.calcReduceByAxis(pe.numberData,ge,Se,0,i.indicesToOffset($e,Ve),ve,we))}return be?Te:new A.Tensor(ae.calcReduceShape(Se,ge,be),Te.type,void 0,void 0,Te.data,Te.dataId)}static calcReduceByAxis(pe,ge,be,ve,we,Se,Ae){let Re=0;if(ve>=ge.length)return Se(pe[we]);const Te=ge[ve],Ce=Te>=be.length?1:i.size(be.slice(Te+1));for(let Ve=0;Ve<be[Te];Ve++)Re=Ve===0?ae.calcReduceByAxis(pe,ge,be,ve+1,we,Se,Ae):Ae(Re,ae.calcReduceByAxis(pe,ge,be,ve+1,we,Se,Ae)),we+=Ce;return Re}static calcReduceShape(pe,ge,be){const ve=pe.slice();for(let we=0;we<ge.length;we++)ve[ge[we]]=be?1:0;return ve.filter((we=>we!==0))}}e.ReduceUtil=ae;class ue{static adjustPoolAttributes(pe,ge,be,ve,we,Se){if(!pe&&be.length!==ge.length-2)throw new Error("length of specified kernel shapes should be 2 less than length of input dimensions");if(pe)for(let Ae=0;Ae<ge.length-2;Ae++)Ae>=be.length?be.push(ge[Ae+2]):be[Ae]=ge[Ae+2];for(let Ae=0;Ae<be.length;Ae++)if(Ae<ve.length){if(ve[Ae]<0)throw new Error("strides should be greater than or equal to 1")}else ve.push(1);for(let Ae=0;Ae<be.length;Ae++)if(Ae<we.length){if(we[Ae]<0)throw new Error("dilations should be greater than or equal to 1")}else we.push(1);for(let Ae=0;Ae<2*be.length;Ae++)if(Ae<Se.length){if(Se[Ae]<0)throw new Error("pad should be greater than or equal to 1")}else Se.push(0);for(let Ae=0;Ae<be.length;Ae++){if(be[Ae]<=0)throw new Error("kernel shapes need to be greater than 0");if(Se[Ae]>=be[Ae]||Se[Ae+be.length]>=be[Ae])throw new Error("pads should be smaller than kernel")}}static adjustPadsBasedOnAutoPad(pe,ge,be,ve,we,Se){if(Se){if(we.length!==2*(pe.length-2))throw new Error("length of pads should be twice the length of data dimensions");if(ge.length!==pe.length-2)throw new Error("length of strides should be the length of data dimensions");if(ve.length!==pe.length-2)throw new Error("length of kernel shapes should be the length of data dimensions");for(let Ae=0;Ae<pe.length-2;Ae++)ue.adjustPadAndReturnShape(pe[Ae+2],ge[Ae],be[Ae],ve[Ae],we,Ae,Ae+pe.length-2,Se)}}static computePoolOutputShape(pe,ge,be,ve,we,Se,Ae){if(ge.length<=0)throw new Error("input shape must be of size greater than 0");const Re=[ge[0],ge[1]];return ue.computeShapeHelper(pe,ge,Re,be,ve,we,Se,Ae),Re}static computeConvOutputShape(pe,ge,be,ve,we,Se,Ae){if(pe.length<=0||ge.length<=0)throw new Error("invalid input tensor dims or invalid filter tensor dims");const Re=[pe[0],ge[0]];return ue.computeShapeHelper(!1,pe,Re,be,ve,we,Se,Ae),Re}static computeShapeHelper(pe,ge,be,ve,we,Se,Ae,Re){if(pe)for(let Te=0;Te<ge.length-2;Te++)be.push(1);else for(let Te=0;Te<ge.length-2;Te++)be.push(ue.adjustPadAndReturnShape(ge[Te+2],ve[Te],we[Te],Se[Te],Ae,Te,Te+ge.length-2,Re))}static adjustPadAndReturnShape(pe,ge,be,ve,we,Se,Ae,Re){const Te=be*(ve-1)+1;if(!Re||Re==="NOTSET")return Math.floor((pe+we[Se]+we[Ae]-Te)/ge+1);switch(Re){case"VALID":return we[Se]=0,we[Ae]=0,Math.floor((pe-Te)/ge+1);case"SAME_LOWER":case"SAME_UPPER":if(be!==1)throw new Error("Dilation not supported for SAME_UPPER or SAME_LOWER");{const Ce=((pe+ge-1)/ge-1)*ge+ve-pe;return we[Se]=Math.floor(Re==="SAME_LOWER"?(Ce+1)/2:Ce/2),we[Ae]=Ce-we[Se],Math.floor((pe+Ce-ve)/ge+1)}default:throw new Error("Unsupported AutoPad type")}}}e.PoolConvUtil=ue,e.MIN_CLIP=-34028234663852886e22,e.MAX_CLIP=34028234663852886e22,e.decodeUtf8String=function(he){return new TextDecoder().decode(he)}},7967:(n,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.iterateExtraOptions=void 0,e.iterateExtraOptions=(t,r,u,T)=>{if(typeof t=="object"&&t!==null){if(u.has(t))throw new Error("Circular reference in options");u.add(t)}Object.entries(t).forEach((([d,A])=>{const le=r?r+d:d;if(typeof A=="object")(0,e.iterateExtraOptions)(A,le+".",u,T);else if(typeof A=="string"||typeof A=="number")T(le,A.toString());else{if(typeof A!="boolean")throw new Error("Can't handle extra config type: "+typeof A);T(le,A?"1":"0")}}))}},2157:function(n,e,t){var r,u=this&&this.__createBinding||(Object.create?function(Ce,Ve,$e,He){He===void 0&&(He=$e);var De=Object.getOwnPropertyDescriptor(Ve,$e);De&&!("get"in De?!Ve.__esModule:De.writable||De.configurable)||(De={enumerable:!0,get:function(){return Ve[$e]}}),Object.defineProperty(Ce,He,De)}:function(Ce,Ve,$e,He){He===void 0&&(He=$e),Ce[He]=Ve[$e]}),T=this&&this.__setModuleDefault||(Object.create?function(Ce,Ve){Object.defineProperty(Ce,"default",{enumerable:!0,value:Ve})}:function(Ce,Ve){Ce.default=Ve}),d=this&&this.__importStar||function(Ce){if(Ce&&Ce.__esModule)return Ce;var Ve={};if(Ce!=null)for(var $e in Ce)$e!=="default"&&Object.prototype.hasOwnProperty.call(Ce,$e)&&u(Ve,Ce,$e);return T(Ve,Ce),Ve};Object.defineProperty(e,"__esModule",{value:!0}),e.endProfiling=e.run=e.releaseSession=e.createSession=e.createSessionFinalize=e.createSessionAllocate=e.initOrt=e.initWasm=void 0;const A=t(1670),le=d(t(349)),G=t(6361),B=()=>!!A.env.wasm.proxy&&typeof document<"u";let o,i,w,ae=!1,ue=!1,he=!1;const pe=[],ge=[],be=[],ve=[],we=[],Se=[],Ae=()=>{if(ae||!ue||he||!o)throw new Error("worker not ready")},Re=Ce=>{switch(Ce.data.type){case"init-wasm":ae=!1,Ce.data.err?(he=!0,i[1](Ce.data.err)):(ue=!0,i[0]());break;case"init-ort":Ce.data.err?w[1](Ce.data.err):w[0]();break;case"create_allocate":Ce.data.err?pe.shift()[1](Ce.data.err):pe.shift()[0](Ce.data.out);break;case"create_finalize":Ce.data.err?ge.shift()[1](Ce.data.err):ge.shift()[0](Ce.data.out);break;case"create":Ce.data.err?be.shift()[1](Ce.data.err):be.shift()[0](Ce.data.out);break;case"release":Ce.data.err?ve.shift()[1](Ce.data.err):ve.shift()[0]();break;case"run":Ce.data.err?we.shift()[1](Ce.data.err):we.shift()[0](Ce.data.out);break;case"end-profiling":Ce.data.err?Se.shift()[1](Ce.data.err):Se.shift()[0]()}},Te=typeof document<"u"?(r=document==null?void 0:document.currentScript)===null||r===void 0?void 0:r.src:void 0;e.initWasm=async()=>{if(B()){if(ue)return;if(ae)throw new Error("multiple calls to 'initWasm()' detected.");if(he)throw new Error("previous call to 'initWasm()' failed.");return ae=!0,A.env.wasm.wasmPaths===void 0&&Te&&Te.indexOf("blob:")!==0&&(A.env.wasm.wasmPaths=Te.substr(0,+Te.lastIndexOf("/")+1)),new Promise(((Ce,Ve)=>{o==null||o.terminate(),o=t(9710).Z(),o.onmessage=Re,i=[Ce,Ve];const $e={type:"init-wasm",in:A.env.wasm};o.postMessage($e)}))}return(0,G.initializeWebAssembly)(A.env.wasm)},e.initOrt=async(Ce,Ve)=>{if(B())return Ae(),new Promise((($e,He)=>{w=[$e,He];const De={type:"init-ort",in:{numThreads:Ce,loggingLevel:Ve}};o.postMessage(De)}));le.initOrt(Ce,Ve)},e.createSessionAllocate=async Ce=>B()?(Ae(),new Promise(((Ve,$e)=>{pe.push([Ve,$e]);const He={type:"create_allocate",in:{model:Ce}};o.postMessage(He,[Ce.buffer])}))):le.createSessionAllocate(Ce),e.createSessionFinalize=async(Ce,Ve)=>B()?(Ae(),new Promise((($e,He)=>{ge.push([$e,He]);const De={type:"create_finalize",in:{modeldata:Ce,options:Ve}};o.postMessage(De)}))):le.createSessionFinalize(Ce,Ve),e.createSession=async(Ce,Ve)=>B()?(Ae(),new Promise((($e,He)=>{be.push([$e,He]);const De={type:"create",in:{model:Ce,options:Ve}};o.postMessage(De,[Ce.buffer])}))):le.createSession(Ce,Ve),e.releaseSession=async Ce=>{if(B())return Ae(),new Promise(((Ve,$e)=>{ve.push([Ve,$e]);const He={type:"release",in:Ce};o.postMessage(He)}));le.releaseSession(Ce)},e.run=async(Ce,Ve,$e,He,De)=>B()?(Ae(),new Promise(((Xe,Me)=>{we.push([Xe,Me]);const je={type:"run",in:{sessionId:Ce,inputIndices:Ve,inputs:$e,outputIndices:He,options:De}};o.postMessage(je,le.extractTransferableBuffers($e))}))):le.run(Ce,Ve,$e,He,De),e.endProfiling=async Ce=>{if(B())return Ae(),new Promise(((Ve,$e)=>{Se.push([Ve,$e]);const He={type:"end-profiling",in:Ce};o.postMessage(He)}));le.endProfiling(Ce)}},586:(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.setRunOptions=void 0;const r=t(7967),u=t(4983),T=t(6361);e.setRunOptions=d=>{const A=(0,T.getInstance)();let le=0;const G=[],B=d||{};try{if((d==null?void 0:d.logSeverityLevel)===void 0)B.logSeverityLevel=2;else if(typeof d.logSeverityLevel!="number"||!Number.isInteger(d.logSeverityLevel)||d.logSeverityLevel<0||d.logSeverityLevel>4)throw new Error(`log serverity level is not valid: ${d.logSeverityLevel}`);if((d==null?void 0:d.logVerbosityLevel)===void 0)B.logVerbosityLevel=0;else if(typeof d.logVerbosityLevel!="number"||!Number.isInteger(d.logVerbosityLevel))throw new Error(`log verbosity level is not valid: ${d.logVerbosityLevel}`);(d==null?void 0:d.terminate)===void 0&&(B.terminate=!1);let o=0;if((d==null?void 0:d.tag)!==void 0&&(o=(0,u.allocWasmString)(d.tag,G)),le=A._OrtCreateRunOptions(B.logSeverityLevel,B.logVerbosityLevel,!!B.terminate,o),le===0)throw new Error("Can't create run options");return(d==null?void 0:d.extra)!==void 0&&(0,r.iterateExtraOptions)(d.extra,"",new WeakSet,((i,w)=>{const ae=(0,u.allocWasmString)(i,G),ue=(0,u.allocWasmString)(w,G);if(A._OrtAddRunConfigEntry(le,ae,ue)!==0)throw new Error(`Can't set a run config entry: ${i} - ${w}`)})),[le,G]}catch(o){throw le!==0&&A._OrtReleaseRunOptions(le),G.forEach(A._free),o}}},2306:(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.OnnxruntimeWebAssemblySessionHandler=void 0;const r=t(2806),u=t(1670),T=t(2850),d=t(2157);let A;e.OnnxruntimeWebAssemblySessionHandler=class{async createSessionAllocate(le){const G=await fetch(le),B=await G.arrayBuffer();return(0,d.createSessionAllocate)(new Uint8Array(B))}async loadModel(le,G){if(A||(await(0,d.initOrt)(u.env.wasm.numThreads,(B=>{switch(B){case"verbose":return 0;case"info":return 1;case"warning":return 2;case"error":return 3;case"fatal":return 4;default:throw new Error(`unsupported logging level: ${B}`)}})(u.env.logLevel)),A=!0),typeof le=="string")if(typeof fetch>"u"){const B=await(0,T.promisify)(r.readFile)(le);[this.sessionId,this.inputNames,this.outputNames]=await(0,d.createSession)(B,G)}else{const B=await this.createSessionAllocate(le);[this.sessionId,this.inputNames,this.outputNames]=await(0,d.createSessionFinalize)(B,G)}else[this.sessionId,this.inputNames,this.outputNames]=await(0,d.createSession)(le,G)}async dispose(){return(0,d.releaseSession)(this.sessionId)}async run(le,G,B){const o=[],i=[];Object.entries(le).forEach((he=>{const pe=he[0],ge=he[1],be=this.inputNames.indexOf(pe);if(be===-1)throw new Error(`invalid input '${pe}'`);o.push(ge),i.push(be)}));const w=[];Object.entries(G).forEach((he=>{const pe=he[0],ge=this.outputNames.indexOf(pe);if(ge===-1)throw new Error(`invalid output '${pe}'`);w.push(ge)}));const ae=await(0,d.run)(this.sessionId,i,o.map((he=>[he.type,he.dims,he.data])),w,B),ue={};for(let he=0;he<ae.length;he++)ue[this.outputNames[w[he]]]=new u.Tensor(ae[he][0],ae[he][2],ae[he][1]);return ue}startProfiling(){}endProfiling(){(0,d.endProfiling)(this.sessionId)}}},4919:(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.setSessionOptions=void 0;const r=t(7967),u=t(4983),T=t(6361);e.setSessionOptions=d=>{const A=(0,T.getInstance)();let le=0;const G=[],B=d||{};(o=>{o.extra||(o.extra={}),o.extra.session||(o.extra.session={});const i=o.extra.session;i.use_ort_model_bytes_directly||(i.use_ort_model_bytes_directly="1")})(B);try{(d==null?void 0:d.graphOptimizationLevel)===void 0&&(B.graphOptimizationLevel="all");const o=(ae=>{switch(ae){case"disabled":return 0;case"basic":return 1;case"extended":return 2;case"all":return 99;default:throw new Error(`unsupported graph optimization level: ${ae}`)}})(B.graphOptimizationLevel);(d==null?void 0:d.enableCpuMemArena)===void 0&&(B.enableCpuMemArena=!0),(d==null?void 0:d.enableMemPattern)===void 0&&(B.enableMemPattern=!0),(d==null?void 0:d.executionMode)===void 0&&(B.executionMode="sequential");const i=(ae=>{switch(ae){case"sequential":return 0;case"parallel":return 1;default:throw new Error(`unsupported execution mode: ${ae}`)}})(B.executionMode);let w=0;if((d==null?void 0:d.logId)!==void 0&&(w=(0,u.allocWasmString)(d.logId,G)),(d==null?void 0:d.logSeverityLevel)===void 0)B.logSeverityLevel=2;else if(typeof d.logSeverityLevel!="number"||!Number.isInteger(d.logSeverityLevel)||d.logSeverityLevel<0||d.logSeverityLevel>4)throw new Error(`log serverity level is not valid: ${d.logSeverityLevel}`);if((d==null?void 0:d.logVerbosityLevel)===void 0)B.logVerbosityLevel=0;else if(typeof d.logVerbosityLevel!="number"||!Number.isInteger(d.logVerbosityLevel))throw new Error(`log verbosity level is not valid: ${d.logVerbosityLevel}`);if((d==null?void 0:d.enableProfiling)===void 0&&(B.enableProfiling=!1),le=A._OrtCreateSessionOptions(o,!!B.enableCpuMemArena,!!B.enableMemPattern,i,!!B.enableProfiling,0,w,B.logSeverityLevel,B.logVerbosityLevel),le===0)throw new Error("Can't create session options");return d!=null&&d.executionProviders&&((ae,ue,he)=>{for(const pe of ue){let ge=typeof pe=="string"?pe:pe.name;switch(ge){case"xnnpack":ge="XNNPACK";break;case"wasm":case"cpu":continue;default:throw new Error(`not supported EP: ${ge}`)}const be=(0,u.allocWasmString)(ge,he);if((0,T.getInstance)()._OrtAppendExecutionProvider(ae,be)!==0)throw new Error(`Can't append execution provider: ${ge}`)}})(le,d.executionProviders,G),(d==null?void 0:d.extra)!==void 0&&(0,r.iterateExtraOptions)(d.extra,"",new WeakSet,((ae,ue)=>{const he=(0,u.allocWasmString)(ae,G),pe=(0,u.allocWasmString)(ue,G);if(A._OrtAddSessionConfigEntry(le,he,pe)!==0)throw new Error(`Can't set a session config entry: ${ae} - ${ue}`)})),[le,G]}catch(o){throw le!==0&&A._OrtReleaseSessionOptions(le),G.forEach(A._free),o}}},4983:(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.allocWasmString=void 0;const r=t(6361);e.allocWasmString=(u,T)=>{const d=(0,r.getInstance)(),A=d.lengthBytesUTF8(u)+1,le=d._malloc(A);return d.stringToUTF8(u,le,A),T.push(le),le}},349:(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.extractTransferableBuffers=e.endProfiling=e.run=e.releaseSession=e.createSession=e.createSessionFinalize=e.createSessionAllocate=e.initOrt=void 0;const r=t(586),u=t(4919),T=t(4983),d=t(6361);e.initOrt=(o,i)=>{const w=(0,d.getInstance)()._OrtInit(o,i);if(w!==0)throw new Error(`Can't initialize onnxruntime. error code = ${w}`)};const A=new Map;e.createSessionAllocate=o=>{const i=(0,d.getInstance)(),w=i._malloc(o.byteLength);return i.HEAPU8.set(o,w),[w,o.byteLength]},e.createSessionFinalize=(o,i)=>{const w=(0,d.getInstance)();let ae=0,ue=0,he=[];try{if([ue,he]=(0,u.setSessionOptions)(i),ae=w._OrtCreateSession(o[0],o[1],ue),ae===0)throw new Error("Can't create a session")}finally{w._free(o[0]),w._OrtReleaseSessionOptions(ue),he.forEach(w._free)}const pe=w._OrtGetInputCount(ae),ge=w._OrtGetOutputCount(ae),be=[],ve=[],we=[],Se=[];for(let Ae=0;Ae<pe;Ae++){const Re=w._OrtGetInputName(ae,Ae);if(Re===0)throw new Error("Can't get an input name");ve.push(Re),be.push(w.UTF8ToString(Re))}for(let Ae=0;Ae<ge;Ae++){const Re=w._OrtGetOutputName(ae,Ae);if(Re===0)throw new Error("Can't get an output name");Se.push(Re),we.push(w.UTF8ToString(Re))}return A.set(ae,[ae,ve,Se]),[ae,be,we]},e.createSession=(o,i)=>{const w=(0,e.createSessionAllocate)(o);return(0,e.createSessionFinalize)(w,i)},e.releaseSession=o=>{const i=(0,d.getInstance)(),w=A.get(o);if(!w)throw new Error("invalid session id");const ae=w[0],ue=w[1],he=w[2];ue.forEach(i._OrtFree),he.forEach(i._OrtFree),i._OrtReleaseSession(ae),A.delete(o)};const le=o=>{switch(o){case"int8":return 3;case"uint8":return 2;case"bool":return 9;case"int16":return 5;case"uint16":return 4;case"int32":return 6;case"uint32":return 12;case"float32":return 1;case"float64":return 11;case"string":return 8;case"int64":return 7;case"uint64":return 13;default:throw new Error(`unsupported data type: ${o}`)}},G=o=>{switch(o){case 3:return"int8";case 2:return"uint8";case 9:return"bool";case 5:return"int16";case 4:return"uint16";case 6:return"int32";case 12:return"uint32";case 1:return"float32";case 11:return"float64";case 8:return"string";case 7:return"int64";case 13:return"uint64";default:throw new Error(`unsupported data type: ${o}`)}},B=o=>{switch(o){case"float32":return Float32Array;case"uint8":case"bool":return Uint8Array;case"int8":return Int8Array;case"uint16":return Uint16Array;case"int16":return Int16Array;case"int32":return Int32Array;case"float64":return Float64Array;case"uint32":return Uint32Array;case"int64":return BigInt64Array;case"uint64":return BigUint64Array;default:throw new Error(`unsupported type: ${o}`)}};e.run=(o,i,w,ae,ue)=>{const he=(0,d.getInstance)(),pe=A.get(o);if(!pe)throw new Error("invalid session id");const ge=pe[0],be=pe[1],ve=pe[2],we=i.length,Se=ae.length;let Ae=0,Re=[];const Te=[],Ce=[];try{[Ae,Re]=(0,r.setRunOptions)(ue);for(let Me=0;Me<we;Me++){const je=w[Me][0],it=w[Me][1],Ke=w[Me][2];let qe,Pe;if(Array.isArray(Ke)){Pe=4*Ke.length,qe=he._malloc(Pe),Ce.push(qe);let at=qe/4;for(let tt=0;tt<Ke.length;tt++){if(typeof Ke[tt]!="string")throw new TypeError(`tensor data at index ${tt} is not a string`);he.HEAPU32[at++]=(0,T.allocWasmString)(Ke[tt],Ce)}}else Pe=Ke.byteLength,qe=he._malloc(Pe),Ce.push(qe),he.HEAPU8.set(new Uint8Array(Ke.buffer,Ke.byteOffset,Pe),qe);const et=he.stackSave(),Je=he.stackAlloc(4*it.length);try{let at=Je/4;it.forEach((Tt=>he.HEAP32[at++]=Tt));const tt=he._OrtCreateTensor(le(je),qe,Pe,Je,it.length);if(tt===0)throw new Error("Can't create a tensor");Te.push(tt)}finally{he.stackRestore(et)}}const Ve=he.stackSave(),$e=he.stackAlloc(4*we),He=he.stackAlloc(4*we),De=he.stackAlloc(4*Se),Xe=he.stackAlloc(4*Se);try{let Me=$e/4,je=He/4,it=De/4,Ke=Xe/4;for(let et=0;et<we;et++)he.HEAPU32[Me++]=Te[et],he.HEAPU32[je++]=be[i[et]];for(let et=0;et<Se;et++)he.HEAPU32[it++]=0,he.HEAPU32[Ke++]=ve[ae[et]];let qe=he._OrtRun(ge,He,$e,we,Xe,Se,De,Ae);const Pe=[];if(qe===0)for(let et=0;et<Se;et++){const Je=he.HEAPU32[De/4+et],at=he.stackSave(),tt=he.stackAlloc(16);let Tt,vt=0;try{if(qe=he._OrtGetTensorData(Je,tt,tt+4,tt+8,tt+12),qe!==0)throw new Error(`Can't access output tensor data. error code = ${qe}`);let Dt=tt/4;const Pt=he.HEAPU32[Dt++];vt=he.HEAPU32[Dt++];const jt=he.HEAPU32[Dt++],tn=he.HEAPU32[Dt++],Sn=[];for(let Jt=0;Jt<tn;Jt++)Sn.push(he.HEAPU32[jt/4+Jt]);he._OrtFree(jt);const fn=Sn.length===0?1:Sn.reduce(((Jt,Vn)=>Jt*Vn));if(Tt=G(Pt),Tt==="string"){const Jt=[];let Vn=vt/4;for(let qn=0;qn<fn;qn++){const Yn=he.HEAPU32[Vn++],nr=qn===fn-1?void 0:he.HEAPU32[Vn]-Yn;Jt.push(he.UTF8ToString(Yn,nr))}Pe.push([Tt,Sn,Jt])}else{const Jt=new(B(Tt))(fn);new Uint8Array(Jt.buffer,Jt.byteOffset,Jt.byteLength).set(he.HEAPU8.subarray(vt,vt+Jt.byteLength)),Pe.push([Tt,Sn,Jt])}}finally{he.stackRestore(at),Tt==="string"&&vt&&he._free(vt),he._OrtReleaseTensor(Je)}}if(qe===0)return Pe;throw new Error(`failed to call OrtRun(). error code = ${qe}.`)}finally{he.stackRestore(Ve)}}finally{Te.forEach(he._OrtReleaseTensor),Ce.forEach(he._free),he._OrtReleaseRunOptions(Ae),Re.forEach(he._free)}},e.endProfiling=o=>{const i=(0,d.getInstance)(),w=A.get(o);if(!w)throw new Error("invalid session id");const ae=w[0],ue=i._OrtEndProfiling(ae);if(ue===0)throw new Error("Can't get an profile file name");i._OrtFree(ue)},e.extractTransferableBuffers=o=>{const i=[];for(const w of o){const ae=w[2];!Array.isArray(ae)&&ae.buffer&&i.push(ae.buffer)}return i}},6361:function(n,e,t){var r=this&&this.__createBinding||(Object.create?function(ue,he,pe,ge){ge===void 0&&(ge=pe);var be=Object.getOwnPropertyDescriptor(he,pe);be&&!("get"in be?!he.__esModule:be.writable||be.configurable)||(be={enumerable:!0,get:function(){return he[pe]}}),Object.defineProperty(ue,ge,be)}:function(ue,he,pe,ge){ge===void 0&&(ge=pe),ue[ge]=he[pe]}),u=this&&this.__setModuleDefault||(Object.create?function(ue,he){Object.defineProperty(ue,"default",{enumerable:!0,value:he})}:function(ue,he){ue.default=he}),T=this&&this.__importStar||function(ue){if(ue&&ue.__esModule)return ue;var he={};if(ue!=null)for(var pe in ue)pe!=="default"&&Object.prototype.hasOwnProperty.call(ue,pe)&&r(he,ue,pe);return u(he,ue),he},d=this&&this.__importDefault||function(ue){return ue&&ue.__esModule?ue:{default:ue}};Object.defineProperty(e,"__esModule",{value:!0}),e.dispose=e.getInstance=e.initializeWebAssembly=void 0;const A=T(t(6449)),le=d(t(932)),G=t(3474);let B,o=!1,i=!1,w=!1;const ae=(ue,he)=>he?ue?"ort-wasm-simd-threaded.wasm":"ort-wasm-threaded.wasm":ue?"ort-wasm-simd.wasm":"ort-wasm.wasm";e.initializeWebAssembly=async ue=>{if(o)return Promise.resolve();if(i)throw new Error("multiple calls to 'initializeWebAssembly()' detected.");if(w)throw new Error("previous call to 'initializeWebAssembly()' failed.");i=!0;const he=ue.initTimeout,pe=ue.numThreads,ge=ue.simd,be=pe>1&&(()=>{try{return typeof SharedArrayBuffer<"u"&&(typeof MessageChannel<"u"&&new MessageChannel().port1.postMessage(new SharedArrayBuffer(1)),WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,5,4,1,3,1,1,10,11,1,9,0,65,0,254,16,2,0,26,11])))}catch{return!1}})(),ve=ge&&(()=>{try{return WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,10,30,1,28,0,65,0,253,15,253,12,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,253,186,1,26,11]))}catch{return!1}})(),we=typeof ue.wasmPaths=="string"?ue.wasmPaths:void 0,Se=ae(!1,be),Ae=ae(ve,be),Re=typeof ue.wasmPaths=="object"?ue.wasmPaths[Ae]:void 0;let Te=!1;const Ce=[];if(he>0&&Ce.push(new Promise((Ve=>{setTimeout((()=>{Te=!0,Ve()}),he)}))),Ce.push(new Promise(((Ve,$e)=>{const He=be?G:le.default,De={locateFile:(Xe,Me)=>be&&Xe.endsWith(".worker.js")&&typeof Blob<"u"?URL.createObjectURL(new Blob([t(4154)],{type:"text/javascript"})):Xe===Se?Re??(we??Me)+Ae:Me+Xe};if(be)if(typeof Blob>"u")De.mainScriptUrlOrBlob=A.join("/","ort-wasm-threaded.js");else{const Xe=`var ortWasmThreaded=(function(){var _scriptDir;return ${He.toString()}})();`;De.mainScriptUrlOrBlob=new Blob([Xe],{type:"text/javascript"})}He(De).then((Xe=>{i=!1,o=!0,B=Xe,Ve()}),(Xe=>{i=!1,w=!0,$e(Xe)}))}))),await Promise.race(Ce),Te)throw new Error(`WebAssembly backend initializing failed due to timeout: ${he}ms`)},e.getInstance=()=>{if(o&&B)return B;throw new Error("WebAssembly is not initialized yet.")},e.dispose=()=>{var ue;!o||i||w||(i=!0,(ue=B.PThread)===null||ue===void 0||ue.terminateAllThreads(),B=void 0,i=!1,o=!1,w=!0)}},9710:(n,e,t)=>{t.d(e,{Z:()=>T});var r=t(477),u=t.n(r);function T(){return u()('/*!\n* ONNX Runtime Web v1.14.0\n* Copyright (c) Microsoft Corporation. All rights reserved.\n* Licensed under the MIT License.\n*/\n(()=>{var t={474:(t,e,n)=>{var _scriptDir,r=(_scriptDir=(_scriptDir="undefined"!=typeof document&&document.currentScript?document.currentScript.src:void 0)||"/index.js",function(t){function e(){return j.buffer!=D&&N(j.buffer),P}function r(){return j.buffer!=D&&N(j.buffer),U}function a(){return j.buffer!=D&&N(j.buffer),F}function i(){return j.buffer!=D&&N(j.buffer),I}function o(){return j.buffer!=D&&N(j.buffer),W}var u,c,s;t=t||{},u||(u=void 0!==t?t:{}),u.ready=new Promise((function(t,e){c=t,s=e}));var l,f,p,h,d,y,b=Object.assign({},u),m="./this.program",g=(t,e)=>{throw e},v="object"==typeof window,w="function"==typeof importScripts,_="object"==typeof process&&"object"==typeof process.versions&&"string"==typeof process.versions.node,O=u.ENVIRONMENT_IS_PTHREAD||!1,A="";function S(t){return u.locateFile?u.locateFile(t,A):A+t}if(_){let e;A=w?n(908).dirname(A)+"/":"//",y=()=>{d||(h=n(384),d=n(908))},l=function(t,e){return y(),t=d.normalize(t),h.readFileSync(t,e?void 0:"utf8")},p=t=>((t=l(t,!0)).buffer||(t=new Uint8Array(t)),t),f=(t,e,n)=>{y(),t=d.normalize(t),h.readFile(t,(function(t,r){t?n(t):e(r.buffer)}))},1<process.argv.length&&(m=process.argv[1].replace(/\\\\/g,"/")),process.argv.slice(2),process.on("uncaughtException",(function(t){if(!(t instanceof ct))throw t})),process.on("unhandledRejection",(function(t){throw t})),g=(t,e)=>{if(Q())throw process.exitCode=t,e;e instanceof ct||x("exiting due to exception: "+e),process.exit(t)},u.inspect=function(){return"[Emscripten Module object]"};try{e=n(925)}catch(t){throw console.error(\'The "worker_threads" module is not supported in this node.js build - perhaps a newer version is needed?\'),t}n.g.Worker=e.Worker}else(v||w)&&(w?A=self.location.href:"undefined"!=typeof document&&document.currentScript&&(A=document.currentScript.src),_scriptDir&&(A=_scriptDir),A=0!==A.indexOf("blob:")?A.substr(0,A.replace(/[?#].*/,"").lastIndexOf("/")+1):"",_||(l=t=>{var e=new XMLHttpRequest;return e.open("GET",t,!1),e.send(null),e.responseText},w&&(p=t=>{var e=new XMLHttpRequest;return e.open("GET",t,!1),e.responseType="arraybuffer",e.send(null),new Uint8Array(e.response)}),f=(t,e,n)=>{var r=new XMLHttpRequest;r.open("GET",t,!0),r.responseType="arraybuffer",r.onload=()=>{200==r.status||0==r.status&&r.response?e(r.response):n()},r.onerror=n,r.send(null)}));_&&"undefined"==typeof performance&&(n.g.performance=n(953).performance);var T=console.log.bind(console),E=console.warn.bind(console);_&&(y(),T=t=>h.writeSync(1,t+"\\n"),E=t=>h.writeSync(2,t+"\\n"));var M,C=u.print||T,x=u.printErr||E;Object.assign(u,b),b=null,u.thisProgram&&(m=u.thisProgram),u.quit&&(g=u.quit),u.wasmBinary&&(M=u.wasmBinary);var R=u.noExitRuntime||!1;"object"!=typeof WebAssembly&&at("no native wasm support detected");var j,k,D,P,U,F,I,W,H=!1,L="undefined"!=typeof TextDecoder?new TextDecoder("utf8"):void 0;function z(t,e,n){var r=(e>>>=0)+n;for(n=e;t[n]&&!(n>=r);)++n;if(16<n-e&&t.buffer&&L)return L.decode(t.buffer instanceof SharedArrayBuffer?t.slice(e,n):t.subarray(e,n));for(r="";e<n;){var a=t[e++];if(128&a){var i=63&t[e++];if(192==(224&a))r+=String.fromCharCode((31&a)<<6|i);else{var o=63&t[e++];65536>(a=224==(240&a)?(15&a)<<12|i<<6|o:(7&a)<<18|i<<12|o<<6|63&t[e++])?r+=String.fromCharCode(a):(a-=65536,r+=String.fromCharCode(55296|a>>10,56320|1023&a))}}else r+=String.fromCharCode(a)}return r}function Y(t,e){return(t>>>=0)?z(r(),t,e):""}function B(t,e,n,r){if(!(0<r))return 0;var a=n>>>=0;r=n+r-1;for(var i=0;i<t.length;++i){var o=t.charCodeAt(i);if(55296<=o&&57343>=o&&(o=65536+((1023&o)<<10)|1023&t.charCodeAt(++i)),127>=o){if(n>=r)break;e[n++>>>0]=o}else{if(2047>=o){if(n+1>=r)break;e[n++>>>0]=192|o>>6}else{if(65535>=o){if(n+2>=r)break;e[n++>>>0]=224|o>>12}else{if(n+3>=r)break;e[n++>>>0]=240|o>>18,e[n++>>>0]=128|o>>12&63}e[n++>>>0]=128|o>>6&63}e[n++>>>0]=128|63&o}}return e[n>>>0]=0,n-a}function G(t){for(var e=0,n=0;n<t.length;++n){var r=t.charCodeAt(n);127>=r?e++:2047>=r?e+=2:55296<=r&&57343>=r?(e+=4,++n):e+=3}return e}function N(t){D=t,u.HEAP8=P=new Int8Array(t),u.HEAP16=new Int16Array(t),u.HEAP32=F=new Int32Array(t),u.HEAPU8=U=new Uint8Array(t),u.HEAPU16=new Uint16Array(t),u.HEAPU32=I=new Uint32Array(t),u.HEAPF32=new Float32Array(t),u.HEAPF64=W=new Float64Array(t)}O&&(D=u.buffer);var V=u.INITIAL_MEMORY||16777216;if(O)j=u.wasmMemory,D=u.buffer;else if(u.wasmMemory)j=u.wasmMemory;else if(!((j=new WebAssembly.Memory({initial:V/65536,maximum:65536,shared:!0})).buffer instanceof SharedArrayBuffer))throw x("requested a shared WebAssembly.Memory but the returned buffer is not a SharedArrayBuffer, indicating that while the browser has SharedArrayBuffer it does not have WebAssembly threads support - you may need to set a flag"),_&&console.log("(on node you may need: --experimental-wasm-threads --experimental-wasm-bulk-memory and also use a recent version)"),Error("bad memory");j&&(D=j.buffer),V=D.byteLength,N(D);var $,q=[],X=[],J=[],Z=[];function Q(){return R||!1}function K(){var t=u.preRun.shift();q.unshift(t)}var tt,et=0,nt=null,rt=null;function at(t){throw O?postMessage({cmd:"onAbort",arg:t}):u.onAbort&&u.onAbort(t),x(t="Aborted("+t+")"),H=!0,t=new WebAssembly.RuntimeError(t+". Build with -sASSERTIONS for more info."),s(t),t}function it(){return tt.startsWith("data:application/octet-stream;base64,")}function ot(){var t=tt;try{if(t==tt&&M)return new Uint8Array(M);if(p)return p(t);throw"both async and sync fetching of the wasm failed"}catch(t){at(t)}}tt="ort-wasm-threaded.wasm",it()||(tt=S(tt));var ut={};function ct(t){this.name="ExitStatus",this.message="Program terminated with exit("+t+")",this.status=t}function st(t){(t=ht.Vb[t])||at(),ht.mc(t)}function lt(t){var e=ht.Cc();if(!e)return 6;ht.ac.push(e),ht.Vb[t.Ub]=e,e.Ub=t.Ub;var n={cmd:"run",start_routine:t.Ic,arg:t.zc,pthread_ptr:t.Ub};return e.$b=()=>{n.time=performance.now(),e.postMessage(n,t.Nc)},e.loaded&&(e.$b(),delete e.$b),0}function ft(t){if(O)return $t(1,1,t);Q()||(ht.oc(),u.onExit&&u.onExit(t),H=!0),g(t,new ct(t))}function pt(t,e){if(!e&&O)throw bt(t),"unwind";Q()||O||(me(),dt(J),be(0),re[1].length&&ae(1,10),re[2].length&&ae(2,10),ht.oc()),ft(t)}var ht={Yb:[],ac:[],qc:[],Vb:{},fc:function(){O&&ht.Ec()},Pc:function(){},Ec:function(){ht.receiveObjectTransfer=ht.Gc,ht.threadInitTLS=ht.pc,ht.setExitStatus=ht.nc,R=!1},nc:function(){},oc:function(){for(var t of Object.values(ht.Vb))ht.mc(t);for(t of ht.Yb)t.terminate();ht.Yb=[]},mc:function(t){var e=t.Ub;delete ht.Vb[e],ht.Yb.push(t),ht.ac.splice(ht.ac.indexOf(t),1),t.Ub=0,Oe(e)},Gc:function(){},pc:function(){ht.qc.forEach((t=>t()))},Fc:function(t,e){t.onmessage=n=>{var r=(n=n.data).cmd;if(t.Ub&&(ht.Bc=t.Ub),n.targetThread&&n.targetThread!=he()){var a=ht.Vb[n.Qc];a?a.postMessage(n,n.transferList):x(\'Internal error! Worker sent a message "\'+r+\'" to target pthread \'+n.targetThread+", but that thread no longer exists!")}else"processProxyingQueue"===r?zt(n.queue):"spawnThread"===r?lt(n):"cleanupThread"===r?st(n.thread):"killThread"===r?(n=n.thread,r=ht.Vb[n],delete ht.Vb[n],r.terminate(),Oe(n),ht.ac.splice(ht.ac.indexOf(r),1),r.Ub=0):"cancelThread"===r?ht.Vb[n.thread].postMessage({cmd:"cancel"}):"loaded"===r?(t.loaded=!0,e&&e(t),t.$b&&(t.$b(),delete t.$b)):"print"===r?C("Thread "+n.threadId+": "+n.text):"printErr"===r?x("Thread "+n.threadId+": "+n.text):"alert"===r?alert("Thread "+n.threadId+": "+n.text):"setimmediate"===n.target?t.postMessage(n):"onAbort"===r?u.onAbort&&u.onAbort(n.arg):r&&x("worker sent an unknown command "+r);ht.Bc=void 0},t.onerror=t=>{throw x("worker sent an error! "+t.filename+":"+t.lineno+": "+t.message),t},_&&(t.on("message",(function(e){t.onmessage({data:e})})),t.on("error",(function(e){t.onerror(e)})),t.on("detachedExit",(function(){}))),t.postMessage({cmd:"load",urlOrBlob:u.mainScriptUrlOrBlob||_scriptDir,wasmMemory:j,wasmModule:k})},yc:function(){var t=S("ort-wasm-threaded.worker.js");ht.Yb.push(new Worker(t))},Cc:function(){return 0==ht.Yb.length&&(ht.yc(),ht.Fc(ht.Yb[0])),ht.Yb.pop()}};function dt(t){for(;0<t.length;)t.shift()(u)}function yt(t){var e=Ee();return t=t(),Me(e),t}function bt(t){if(O)return $t(2,0,t);try{pt(t)}catch(t){t instanceof ct||"unwind"==t||g(1,t)}}u.PThread=ht,u.establishStackSpace=function(){var t=he(),e=a()[t+44>>2>>>0];t=a()[t+48>>2>>>0],Te(e,e-t),Me(e)};var mt=[];function gt(t){var e=mt[t];return e||(t>=mt.length&&(mt.length=t+1),mt[t]=e=$.get(t)),e}u.invokeEntryPoint=function(t,e){t=gt(t)(e),Q()?ht.nc(t):Ae(t)};var vt,wt,_t=[],Ot=0,At=0;function St(t){this.Zb=t,this.Sb=t-24,this.xc=function(t){i()[this.Sb+4>>2>>>0]=t},this.bc=function(){return i()[this.Sb+4>>2>>>0]},this.wc=function(t){i()[this.Sb+8>>2>>>0]=t},this.Dc=function(){return i()[this.Sb+8>>2>>>0]},this.rc=function(){a()[this.Sb>>2>>>0]=0},this.hc=function(t){t=t?1:0,e()[this.Sb+12>>0>>>0]=t},this.uc=function(){return 0!=e()[this.Sb+12>>0>>>0]},this.ic=function(t){t=t?1:0,e()[this.Sb+13>>0>>>0]=t},this.kc=function(){return 0!=e()[this.Sb+13>>0>>>0]},this.fc=function(t,e){this.cc(0),this.xc(t),this.wc(e),this.rc(),this.hc(!1),this.ic(!1)},this.sc=function(){Atomics.add(a(),this.Sb>>2,1)},this.Hc=function(){return 1===Atomics.sub(a(),this.Sb>>2,1)},this.cc=function(t){i()[this.Sb+16>>2>>>0]=t},this.tc=function(){return i()[this.Sb+16>>2>>>0]},this.vc=function(){if(Re(this.bc()))return i()[this.Zb>>2>>>0];var t=this.tc();return 0!==t?t:this.Zb}}function Tt(t){return ye(new St(t).Sb)}function Et(t,e,n,r){return O?$t(3,1,t,e,n,r):Mt(t,e,n,r)}function Mt(t,e,n,r){if("undefined"==typeof SharedArrayBuffer)return x("Current environment does not support SharedArrayBuffer, pthreads are not available!"),6;var a=[];return O&&0===a.length?Et(t,e,n,r):(t={Ic:n,Ub:t,zc:r,Nc:a},O?(t.Oc="spawnThread",postMessage(t,a),0):lt(t))}function Ct(t,e,n){return O?$t(4,1,t,e,n):0}function xt(t,e){if(O)return $t(5,1,t,e)}function Rt(t,e){if(O)return $t(6,1,t,e)}function jt(t,e,n){if(O)return $t(7,1,t,e,n)}function kt(t,e,n){return O?$t(8,1,t,e,n):0}function Dt(t,e){if(O)return $t(9,1,t,e)}function Pt(t,e,n){if(O)return $t(10,1,t,e,n)}function Ut(t,e,n,r){if(O)return $t(11,1,t,e,n,r)}function Ft(t,e,n,r){if(O)return $t(12,1,t,e,n,r)}function It(t,e,n,r){if(O)return $t(13,1,t,e,n,r)}function Wt(t){if(O)return $t(14,1,t)}function Ht(t,e){if(O)return $t(15,1,t,e)}function Lt(t,e,n){if(O)return $t(16,1,t,e,n)}function zt(t){Atomics.store(a(),t>>2,1),he()&&_e(t),Atomics.compareExchange(a(),t>>2,1,0)}function Yt(t){return i()[t>>>2]+4294967296*a()[t+4>>>2]}function Bt(t,e,n,r,a,i){return O?$t(17,1,t,e,n,r,a,i):-52}function Gt(t,e,n,r,a,i){if(O)return $t(18,1,t,e,n,r,a,i)}function Nt(t){var n=G(t)+1,r=de(n);return r&&B(t,e(),r,n),r}function Vt(t,e,n){function r(t){return(t=t.toTimeString().match(/\\(([A-Za-z ]+)\\)$/))?t[1]:"GMT"}if(O)return $t(19,1,t,e,n);var o=(new Date).getFullYear(),u=new Date(o,0,1),c=new Date(o,6,1);o=u.getTimezoneOffset();var s=c.getTimezoneOffset(),l=Math.max(o,s);a()[t>>2>>>0]=60*l,a()[e>>2>>>0]=Number(o!=s),t=r(u),e=r(c),t=Nt(t),e=Nt(e),s<o?(i()[n>>2>>>0]=t,i()[n+4>>2>>>0]=e):(i()[n>>2>>>0]=e,i()[n+4>>2>>>0]=t)}function $t(t,e){var n=arguments.length-2,r=arguments;return yt((()=>{for(var a=Ce(8*n),i=a>>3,u=0;u<n;u++){var c=r[2+u];o()[i+u>>>0]=c}return we(t,n,a,e)}))}u.executeNotifiedProxyingQueue=zt,wt=_?()=>{var t=process.hrtime();return 1e3*t[0]+t[1]/1e6}:O?()=>performance.now()-u.__performance_now_clock_drift:()=>performance.now();var qt,Xt=[],Jt={};function Zt(){if(!qt){var t,e={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:("object"==typeof navigator&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:m||"./this.program"};for(t in Jt)void 0===Jt[t]?delete e[t]:e[t]=Jt[t];var n=[];for(t in e)n.push(t+"="+e[t]);qt=n}return qt}function Qt(t,n){if(O)return $t(20,1,t,n);var r=0;return Zt().forEach((function(a,o){var u=n+r;for(o=i()[t+4*o>>2>>>0]=u,u=0;u<a.length;++u)e()[o++>>0>>>0]=a.charCodeAt(u);e()[o>>0>>>0]=0,r+=a.length+1})),0}function Kt(t,e){if(O)return $t(21,1,t,e);var n=Zt();i()[t>>2>>>0]=n.length;var r=0;return n.forEach((function(t){r+=t.length+1})),i()[e>>2>>>0]=r,0}function te(t){return O?$t(22,1,t):52}function ee(t,e,n,r){return O?$t(23,1,t,e,n,r):52}function ne(t,e,n,r,a){return O?$t(24,1,t,e,n,r,a):70}var re=[null,[],[]];function ae(t,e){var n=re[t];0===e||10===e?((1===t?C:x)(z(n,0)),n.length=0):n.push(e)}function ie(t,e,n,a){if(O)return $t(25,1,t,e,n,a);for(var o=0,u=0;u<n;u++){var c=i()[e>>2>>>0],s=i()[e+4>>2>>>0];e+=8;for(var l=0;l<s;l++)ae(t,r()[c+l>>>0]);o+=s}return i()[a>>2>>>0]=o,0}var oe=0;function ue(t){return 0==t%4&&(0!=t%100||0==t%400)}var ce=[31,29,31,30,31,30,31,31,30,31,30,31],se=[31,28,31,30,31,30,31,31,30,31,30,31];function le(t,n,r,i){function o(t,e,n){for(t="number"==typeof t?t.toString():t||"";t.length<e;)t=n[0]+t;return t}function u(t,e){return o(t,e,"0")}function c(t,e){function n(t){return 0>t?-1:0<t?1:0}var r;return 0===(r=n(t.getFullYear()-e.getFullYear()))&&0===(r=n(t.getMonth()-e.getMonth()))&&(r=n(t.getDate()-e.getDate())),r}function s(t){switch(t.getDay()){case 0:return new Date(t.getFullYear()-1,11,29);case 1:return t;case 2:return new Date(t.getFullYear(),0,3);case 3:return new Date(t.getFullYear(),0,2);case 4:return new Date(t.getFullYear(),0,1);case 5:return new Date(t.getFullYear()-1,11,31);case 6:return new Date(t.getFullYear()-1,11,30)}}function l(t){var e=t.Wb;for(t=new Date(new Date(t.Xb+1900,0,1).getTime());0<e;){var n=t.getMonth(),r=(ue(t.getFullYear())?ce:se)[n];if(!(e>r-t.getDate())){t.setDate(t.getDate()+e);break}e-=r-t.getDate()+1,t.setDate(1),11>n?t.setMonth(n+1):(t.setMonth(0),t.setFullYear(t.getFullYear()+1))}return n=new Date(t.getFullYear()+1,0,4),e=s(new Date(t.getFullYear(),0,4)),n=s(n),0>=c(e,t)?0>=c(n,t)?t.getFullYear()+1:t.getFullYear():t.getFullYear()-1}var f=a()[i+40>>2>>>0];for(var p in i={Lc:a()[i>>2>>>0],Kc:a()[i+4>>2>>>0],dc:a()[i+8>>2>>>0],jc:a()[i+12>>2>>>0],ec:a()[i+16>>2>>>0],Xb:a()[i+20>>2>>>0],Tb:a()[i+24>>2>>>0],Wb:a()[i+28>>2>>>0],Rc:a()[i+32>>2>>>0],Jc:a()[i+36>>2>>>0],Mc:f?Y(f):""},r=Y(r),f={"%c":"%a %b %d %H:%M:%S %Y","%D":"%m/%d/%y","%F":"%Y-%m-%d","%h":"%b","%r":"%I:%M:%S %p","%R":"%H:%M","%T":"%H:%M:%S","%x":"%m/%d/%y","%X":"%H:%M:%S","%Ec":"%c","%EC":"%C","%Ex":"%m/%d/%y","%EX":"%H:%M:%S","%Ey":"%y","%EY":"%Y","%Od":"%d","%Oe":"%e","%OH":"%H","%OI":"%I","%Om":"%m","%OM":"%M","%OS":"%S","%Ou":"%u","%OU":"%U","%OV":"%V","%Ow":"%w","%OW":"%W","%Oy":"%y"})r=r.replace(new RegExp(p,"g"),f[p]);var h="Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),d="January February March April May June July August September October November December".split(" ");for(p in f={"%a":function(t){return h[t.Tb].substring(0,3)},"%A":function(t){return h[t.Tb]},"%b":function(t){return d[t.ec].substring(0,3)},"%B":function(t){return d[t.ec]},"%C":function(t){return u((t.Xb+1900)/100|0,2)},"%d":function(t){return u(t.jc,2)},"%e":function(t){return o(t.jc,2," ")},"%g":function(t){return l(t).toString().substring(2)},"%G":function(t){return l(t)},"%H":function(t){return u(t.dc,2)},"%I":function(t){return 0==(t=t.dc)?t=12:12<t&&(t-=12),u(t,2)},"%j":function(t){for(var e=0,n=0;n<=t.ec-1;e+=(ue(t.Xb+1900)?ce:se)[n++]);return u(t.jc+e,3)},"%m":function(t){return u(t.ec+1,2)},"%M":function(t){return u(t.Kc,2)},"%n":function(){return"\\n"},"%p":function(t){return 0<=t.dc&&12>t.dc?"AM":"PM"},"%S":function(t){return u(t.Lc,2)},"%t":function(){return"\\t"},"%u":function(t){return t.Tb||7},"%U":function(t){return u(Math.floor((t.Wb+7-t.Tb)/7),2)},"%V":function(t){var e=Math.floor((t.Wb+7-(t.Tb+6)%7)/7);if(2>=(t.Tb+371-t.Wb-2)%7&&e++,e)53==e&&(4==(n=(t.Tb+371-t.Wb)%7)||3==n&&ue(t.Xb)||(e=1));else{e=52;var n=(t.Tb+7-t.Wb-1)%7;(4==n||5==n&&ue(t.Xb%400-1))&&e++}return u(e,2)},"%w":function(t){return t.Tb},"%W":function(t){return u(Math.floor((t.Wb+7-(t.Tb+6)%7)/7),2)},"%y":function(t){return(t.Xb+1900).toString().substring(2)},"%Y":function(t){return t.Xb+1900},"%z":function(t){var e=0<=(t=t.Jc);return t=Math.abs(t)/60,(e?"+":"-")+String("0000"+(t/60*100+t%60)).slice(-4)},"%Z":function(t){return t.Mc},"%%":function(){return"%"}},r=r.replace(/%%/g,"\\0\\0"),f)r.includes(p)&&(r=r.replace(new RegExp(p,"g"),f[p](i)));return p=function(t){var e=Array(G(t)+1);return B(t,e,0,e.length),e}(r=r.replace(/\\0\\0/g,"%")),p.length>n?0:(function(t,n){e().set(t,n>>>0)}(p,t),p.length-1)}ht.fc();var fe=[null,ft,bt,Et,Ct,xt,Rt,jt,kt,Dt,Pt,Ut,Ft,It,Wt,Ht,Lt,Bt,Gt,Vt,Qt,Kt,te,ee,ne,ie],pe={b:function(t){return de(t+24)+24},n:function(t){return(t=new St(t)).uc()||(t.hc(!0),Ot--),t.ic(!1),_t.push(t),t.sc(),t.vc()},ma:function(t){throw x("Unexpected exception thrown, this is not properly supported - aborting"),H=!0,t},x:function(){Se(0);var t=_t.pop();if(t.Hc()&&!t.kc()){var e=t.Dc();e&&gt(e)(t.Zb),Tt(t.Zb)}At=0},e:function(){var t=At;if(!t)return oe=0;var e=new St(t);e.cc(t);var n=e.bc();if(!n)return oe=0,t;for(var r=Array.prototype.slice.call(arguments),a=0;a<r.length;a++){var i=r[a];if(0===i||i===n)break;if(xe(i,n,e.Sb+16))return oe=i,t}return oe=n,t},l:function(){var t=At;if(!t)return oe=0;var e=new St(t);e.cc(t);var n=e.bc();if(!n)return oe=0,t;for(var r=Array.prototype.slice.call(arguments),a=0;a<r.length;a++){var i=r[a];if(0===i||i===n)break;if(xe(i,n,e.Sb+16))return oe=i,t}return oe=n,t},h:function(){var t=At;if(!t)return oe=0;var e=new St(t);e.cc(t);var n=e.bc();if(!n)return oe=0,t;for(var r=Array.prototype.slice.call(arguments),a=0;a<r.length;a++){var i=r[a];if(0===i||i===n)break;if(xe(i,n,e.Sb+16))return oe=i,t}return oe=n,t},t:Tt,M:function(){var t=_t.pop();t||at("no exception to throw");var e=t.Zb;throw t.kc()||(_t.push(t),t.ic(!0),t.hc(!1),Ot++),At=e,e},c:function(t,e,n){throw new St(t).fc(e,n),At=t,Ot++,t},pa:function(){return Ot},Fa:function(t){ge(t,!w,1,!v),ht.pc()},T:function(t){O?postMessage({cmd:"cleanupThread",thread:t}):st(t)},xa:Mt,j:function(t){throw At||(At=t),t},H:Ct,Ma:xt,ua:Rt,wa:jt,oa:kt,Ka:Dt,Ca:Pt,Ja:Ut,V:Ft,va:It,sa:Wt,La:Ht,ta:Lt,Ta:function(){},X:function(){at("To use dlopen, you need enable dynamic linking, see https://github.com/emscripten-core/emscripten/wiki/Linking")},Ua:function(){at("To use dlopen, you need enable dynamic linking, see https://github.com/emscripten-core/emscripten/wiki/Linking")},W:function(){return Date.now()},ya:function(){return 2097152},Oa:function(){return!0},za:function(t,e,n,r){if(t==e)setTimeout((()=>zt(r)));else if(O)postMessage({targetThread:t,cmd:"processProxyingQueue",queue:r});else{if(!(t=ht.Vb[t]))return;t.postMessage({cmd:"processProxyingQueue",queue:r})}return 1},Ea:function(){return-1},Pa:function(t,e){t=new Date(1e3*Yt(t)),a()[e>>2>>>0]=t.getUTCSeconds(),a()[e+4>>2>>>0]=t.getUTCMinutes(),a()[e+8>>2>>>0]=t.getUTCHours(),a()[e+12>>2>>>0]=t.getUTCDate(),a()[e+16>>2>>>0]=t.getUTCMonth(),a()[e+20>>2>>>0]=t.getUTCFullYear()-1900,a()[e+24>>2>>>0]=t.getUTCDay(),t=(t.getTime()-Date.UTC(t.getUTCFullYear(),0,1,0,0,0,0))/864e5|0,a()[e+28>>2>>>0]=t},Qa:function(t,e){t=new Date(1e3*Yt(t)),a()[e>>2>>>0]=t.getSeconds(),a()[e+4>>2>>>0]=t.getMinutes(),a()[e+8>>2>>>0]=t.getHours(),a()[e+12>>2>>>0]=t.getDate(),a()[e+16>>2>>>0]=t.getMonth(),a()[e+20>>2>>>0]=t.getFullYear()-1900,a()[e+24>>2>>>0]=t.getDay();var n=new Date(t.getFullYear(),0,1),r=(t.getTime()-n.getTime())/864e5|0;a()[e+28>>2>>>0]=r,a()[e+36>>2>>>0]=-60*t.getTimezoneOffset(),r=new Date(t.getFullYear(),6,1).getTimezoneOffset(),t=0|(r!=(n=n.getTimezoneOffset())&&t.getTimezoneOffset()==Math.min(n,r)),a()[e+32>>2>>>0]=t},Ra:function(t){var e=new Date(a()[t+20>>2>>>0]+1900,a()[t+16>>2>>>0],a()[t+12>>2>>>0],a()[t+8>>2>>>0],a()[t+4>>2>>>0],a()[t>>2>>>0],0),n=a()[t+32>>2>>>0],r=e.getTimezoneOffset(),i=new Date(e.getFullYear(),0,1),o=new Date(e.getFullYear(),6,1).getTimezoneOffset(),u=i.getTimezoneOffset(),c=Math.min(u,o);return 0>n?a()[t+32>>2>>>0]=Number(o!=u&&c==r):0<n!=(c==r)&&(o=Math.max(u,o),e.setTime(e.getTime()+6e4*((0<n?c:o)-r))),a()[t+24>>2>>>0]=e.getDay(),n=(e.getTime()-i.getTime())/864e5|0,a()[t+28>>2>>>0]=n,a()[t>>2>>>0]=e.getSeconds(),a()[t+4>>2>>>0]=e.getMinutes(),a()[t+8>>2>>>0]=e.getHours(),a()[t+12>>2>>>0]=e.getDate(),a()[t+16>>2>>>0]=e.getMonth(),e.getTime()/1e3|0},Aa:Bt,Ba:Gt,Sa:function t(e,n,r){t.Ac||(t.Ac=!0,Vt(e,n,r))},y:function(){at("")},U:function(){if(!_&&!w){var t="Blocking on the main thread is very dangerous, see https://emscripten.org/docs/porting/pthreads.html#blocking-on-the-main-browser-thread";vt||(vt={}),vt[t]||(vt[t]=1,_&&(t="warning: "+t),x(t))}},ra:function(){return 4294901760},B:wt,Ia:function(t,e,n){r().copyWithin(t>>>0,e>>>0,e+n>>>0)},F:function(){return _?n(993).cpus().length:navigator.hardwareConcurrency},Da:function(t,e,n){Xt.length=e,n>>=3;for(var r=0;r<e;r++)Xt[r]=o()[n+r>>>0];return(0>t?ut[-t-1]:fe[t]).apply(null,Xt)},qa:function(t){var e=r().length;if((t>>>=0)<=e||4294901760<t)return!1;for(var n=1;4>=n;n*=2){var a=e*(1+.2/n);a=Math.min(a,t+100663296);var i=Math;a=Math.max(t,a),i=i.min.call(i,4294901760,a+(65536-a%65536)%65536);t:{try{j.grow(i-D.byteLength+65535>>>16),N(j.buffer);var o=1;break t}catch(t){}o=void 0}if(o)return!0}return!1},Na:function(){throw"unwind"},Ga:Qt,Ha:Kt,J:pt,I:te,S:ee,ga:ne,R:ie,d:function(){return oe},na:function t(r,a){t.lc||(t.lc=function(){if("object"==typeof crypto&&"function"==typeof crypto.getRandomValues){var t=new Uint8Array(1);return()=>(crypto.getRandomValues(t),t[0])}if(_)try{var e=n(Object(function(){var t=new Error("Cannot find module \'crypto\'");throw t.code="MODULE_NOT_FOUND",t}()));return()=>e.randomBytes(1)[0]}catch(t){}return()=>at("randomDevice")}());for(var i=0;i<a;i++)e()[r+i>>0>>>0]=t.lc();return 0},ia:function(t,e,n){var r=Ee();try{return gt(t)(e,n)}catch(t){if(Me(r),t!==t+0)throw t;Se(1,0)}},ja:function(t,e,n){var r=Ee();try{return gt(t)(e,n)}catch(t){if(Me(r),t!==t+0)throw t;Se(1,0)}},K:function(t){var e=Ee();try{return gt(t)()}catch(t){if(Me(e),t!==t+0)throw t;Se(1,0)}},f:function(t,e){var n=Ee();try{return gt(t)(e)}catch(t){if(Me(n),t!==t+0)throw t;Se(1,0)}},P:function(t,e,n){var r=Ee();try{return gt(t)(e,n)}catch(t){if(Me(r),t!==t+0)throw t;Se(1,0)}},Q:function(t,e,n){var r=Ee();try{return gt(t)(e,n)}catch(t){if(Me(r),t!==t+0)throw t;Se(1,0)}},k:function(t,e,n){var r=Ee();try{return gt(t)(e,n)}catch(t){if(Me(r),t!==t+0)throw t;Se(1,0)}},p:function(t,e,n,r){var a=Ee();try{return gt(t)(e,n,r)}catch(t){if(Me(a),t!==t+0)throw t;Se(1,0)}},q:function(t,e,n,r,a){var i=Ee();try{return gt(t)(e,n,r,a)}catch(t){if(Me(i),t!==t+0)throw t;Se(1,0)}},N:function(t,e,n,r,a,i){var o=Ee();try{return gt(t)(e,n,r,a,i)}catch(t){if(Me(o),t!==t+0)throw t;Se(1,0)}},s:function(t,e,n,r,a,i){var o=Ee();try{return gt(t)(e,n,r,a,i)}catch(t){if(Me(o),t!==t+0)throw t;Se(1,0)}},w:function(t,e,n,r,a,i,o){var u=Ee();try{return gt(t)(e,n,r,a,i,o)}catch(t){if(Me(u),t!==t+0)throw t;Se(1,0)}},L:function(t,e,n,r,a,i,o,u){var c=Ee();try{return gt(t)(e,n,r,a,i,o,u)}catch(t){if(Me(c),t!==t+0)throw t;Se(1,0)}},E:function(t,e,n,r,a,i,o,u,c,s,l,f){var p=Ee();try{return gt(t)(e,n,r,a,i,o,u,c,s,l,f)}catch(t){if(Me(p),t!==t+0)throw t;Se(1,0)}},aa:function(t,e,n,r,a,i,o,u){var c=Ee();try{return He(t,e,n,r,a,i,o,u)}catch(t){if(Me(c),t!==t+0)throw t;Se(1,0)}},_:function(t,e,n,r,a,i,o){var u=Ee();try{return ke(t,e,n,r,a,i,o)}catch(t){if(Me(u),t!==t+0)throw t;Se(1,0)}},Z:function(t,e,n,r,a){var i=Ee();try{return Le(t,e,n,r,a)}catch(t){if(Me(i),t!==t+0)throw t;Se(1,0)}},ca:function(t,e,n,r){var a=Ee();try{return Ie(t,e,n,r)}catch(t){if(Me(a),t!==t+0)throw t;Se(1,0)}},$:function(t){var e=Ee();try{return je(t)}catch(t){if(Me(e),t!==t+0)throw t;Se(1,0)}},ba:function(t,e){var n=Ee();try{return We(t,e)}catch(t){if(Me(n),t!==t+0)throw t;Se(1,0)}},Y:function(t,e,n){var r=Ee();try{return De(t,e,n)}catch(t){if(Me(r),t!==t+0)throw t;Se(1,0)}},g:function(t){var e=Ee();try{gt(t)()}catch(t){if(Me(e),t!==t+0)throw t;Se(1,0)}},r:function(t,e){var n=Ee();try{gt(t)(e)}catch(t){if(Me(n),t!==t+0)throw t;Se(1,0)}},i:function(t,e,n){var r=Ee();try{gt(t)(e,n)}catch(t){if(Me(r),t!==t+0)throw t;Se(1,0)}},ha:function(t,e,n,r){var a=Ee();try{gt(t)(e,n,r)}catch(t){if(Me(a),t!==t+0)throw t;Se(1,0)}},m:function(t,e,n,r){var a=Ee();try{gt(t)(e,n,r)}catch(t){if(Me(a),t!==t+0)throw t;Se(1,0)}},v:function(t,e,n,r,a){var i=Ee();try{gt(t)(e,n,r,a)}catch(t){if(Me(i),t!==t+0)throw t;Se(1,0)}},u:function(t,e,n,r,a,i){var o=Ee();try{gt(t)(e,n,r,a,i)}catch(t){if(Me(o),t!==t+0)throw t;Se(1,0)}},O:function(t,e,n,r,a,i,o){var u=Ee();try{gt(t)(e,n,r,a,i,o)}catch(t){if(Me(u),t!==t+0)throw t;Se(1,0)}},A:function(t,e,n,r,a,i,o,u){var c=Ee();try{gt(t)(e,n,r,a,i,o,u)}catch(t){if(Me(c),t!==t+0)throw t;Se(1,0)}},ka:function(t,e,n,r,a,i,o,u,c){var s=Ee();try{gt(t)(e,n,r,a,i,o,u,c)}catch(t){if(Me(s),t!==t+0)throw t;Se(1,0)}},C:function(t,e,n,r,a,i,o,u,c,s,l){var f=Ee();try{gt(t)(e,n,r,a,i,o,u,c,s,l)}catch(t){if(Me(f),t!==t+0)throw t;Se(1,0)}},D:function(t,e,n,r,a,i,o,u,c,s,l,f,p,h,d,y){var b=Ee();try{gt(t)(e,n,r,a,i,o,u,c,s,l,f,p,h,d,y)}catch(t){if(Me(b),t!==t+0)throw t;Se(1,0)}},fa:function(t,e,n,r,a,i,o,u){var c=Ee();try{Pe(t,e,n,r,a,i,o,u)}catch(t){if(Me(c),t!==t+0)throw t;Se(1,0)}},da:function(t,e,n,r,a,i,o,u,c,s,l,f){var p=Ee();try{Fe(t,e,n,r,a,i,o,u,c,s,l,f)}catch(t){if(Me(p),t!==t+0)throw t;Se(1,0)}},ea:function(t,e,n,r,a,i){var o=Ee();try{Ue(t,e,n,r,a,i)}catch(t){if(Me(o),t!==t+0)throw t;Se(1,0)}},o:function(t){return t},a:j||u.wasmMemory,G:function(t){oe=t},la:le,z:function(t,e,n,r){return le(t,e,n,r)}};!function(){function t(t,e){u.asm=t.exports,ht.qc.push(u.asm.sb),$=u.asm.ub,X.unshift(u.asm.Va),k=e,O||(et--,u.monitorRunDependencies&&u.monitorRunDependencies(et),0==et&&(null!==nt&&(clearInterval(nt),nt=null),rt&&(t=rt,rt=null,t())))}function e(e){t(e.instance,e.module)}function n(t){return function(){if(!M&&(v||w)){if("function"==typeof fetch&&!tt.startsWith("file://"))return fetch(tt,{credentials:"same-origin"}).then((function(t){if(!t.ok)throw"failed to load wasm binary file at \'"+tt+"\'";return t.arrayBuffer()})).catch((function(){return ot()}));if(f)return new Promise((function(t,e){f(tt,(function(e){t(new Uint8Array(e))}),e)}))}return Promise.resolve().then((function(){return ot()}))}().then((function(t){return WebAssembly.instantiate(t,r)})).then((function(t){return t})).then(t,(function(t){x("failed to asynchronously prepare wasm: "+t),at(t)}))}var r={a:pe};if(O||(et++,u.monitorRunDependencies&&u.monitorRunDependencies(et)),u.instantiateWasm)try{return u.instantiateWasm(r,t)}catch(t){return x("Module.instantiateWasm callback failed with error: "+t),!1}(M||"function"!=typeof WebAssembly.instantiateStreaming||it()||tt.startsWith("file://")||_||"function"!=typeof fetch?n(e):fetch(tt,{credentials:"same-origin"}).then((function(t){return WebAssembly.instantiateStreaming(t,r).then(e,(function(t){return x("wasm streaming compile failed: "+t),x("falling back to ArrayBuffer instantiation"),n(e)}))}))).catch(s)}(),u.___wasm_call_ctors=function(){return(u.___wasm_call_ctors=u.asm.Va).apply(null,arguments)},u._OrtInit=function(){return(u._OrtInit=u.asm.Wa).apply(null,arguments)},u._OrtCreateSessionOptions=function(){return(u._OrtCreateSessionOptions=u.asm.Xa).apply(null,arguments)},u._OrtAppendExecutionProvider=function(){return(u._OrtAppendExecutionProvider=u.asm.Ya).apply(null,arguments)},u._OrtAddSessionConfigEntry=function(){return(u._OrtAddSessionConfigEntry=u.asm.Za).apply(null,arguments)},u._OrtReleaseSessionOptions=function(){return(u._OrtReleaseSessionOptions=u.asm._a).apply(null,arguments)},u._OrtCreateSession=function(){return(u._OrtCreateSession=u.asm.$a).apply(null,arguments)},u._OrtReleaseSession=function(){return(u._OrtReleaseSession=u.asm.ab).apply(null,arguments)},u._OrtGetInputCount=function(){return(u._OrtGetInputCount=u.asm.bb).apply(null,arguments)},u._OrtGetOutputCount=function(){return(u._OrtGetOutputCount=u.asm.cb).apply(null,arguments)},u._OrtGetInputName=function(){return(u._OrtGetInputName=u.asm.db).apply(null,arguments)},u._OrtGetOutputName=function(){return(u._OrtGetOutputName=u.asm.eb).apply(null,arguments)},u._OrtFree=function(){return(u._OrtFree=u.asm.fb).apply(null,arguments)},u._OrtCreateTensor=function(){return(u._OrtCreateTensor=u.asm.gb).apply(null,arguments)},u._OrtGetTensorData=function(){return(u._OrtGetTensorData=u.asm.hb).apply(null,arguments)},u._OrtReleaseTensor=function(){return(u._OrtReleaseTensor=u.asm.ib).apply(null,arguments)},u._OrtCreateRunOptions=function(){return(u._OrtCreateRunOptions=u.asm.jb).apply(null,arguments)},u._OrtAddRunConfigEntry=function(){return(u._OrtAddRunConfigEntry=u.asm.kb).apply(null,arguments)},u._OrtReleaseRunOptions=function(){return(u._OrtReleaseRunOptions=u.asm.lb).apply(null,arguments)},u._OrtRun=function(){return(u._OrtRun=u.asm.mb).apply(null,arguments)},u._OrtEndProfiling=function(){return(u._OrtEndProfiling=u.asm.nb).apply(null,arguments)};var he=u._pthread_self=function(){return(he=u._pthread_self=u.asm.ob).apply(null,arguments)},de=u._malloc=function(){return(de=u._malloc=u.asm.pb).apply(null,arguments)},ye=u._free=function(){return(ye=u._free=u.asm.qb).apply(null,arguments)},be=u._fflush=function(){return(be=u._fflush=u.asm.rb).apply(null,arguments)};u.__emscripten_tls_init=function(){return(u.__emscripten_tls_init=u.asm.sb).apply(null,arguments)};var me=u.___funcs_on_exit=function(){return(me=u.___funcs_on_exit=u.asm.tb).apply(null,arguments)},ge=u.__emscripten_thread_init=function(){return(ge=u.__emscripten_thread_init=u.asm.vb).apply(null,arguments)};u.__emscripten_thread_crashed=function(){return(u.__emscripten_thread_crashed=u.asm.wb).apply(null,arguments)};var ve,we=u._emscripten_run_in_main_runtime_thread_js=function(){return(we=u._emscripten_run_in_main_runtime_thread_js=u.asm.xb).apply(null,arguments)},_e=u.__emscripten_proxy_execute_task_queue=function(){return(_e=u.__emscripten_proxy_execute_task_queue=u.asm.yb).apply(null,arguments)},Oe=u.__emscripten_thread_free_data=function(){return(Oe=u.__emscripten_thread_free_data=u.asm.zb).apply(null,arguments)},Ae=u.__emscripten_thread_exit=function(){return(Ae=u.__emscripten_thread_exit=u.asm.Ab).apply(null,arguments)},Se=u._setThrew=function(){return(Se=u._setThrew=u.asm.Bb).apply(null,arguments)},Te=u._emscripten_stack_set_limits=function(){return(Te=u._emscripten_stack_set_limits=u.asm.Cb).apply(null,arguments)},Ee=u.stackSave=function(){return(Ee=u.stackSave=u.asm.Db).apply(null,arguments)},Me=u.stackRestore=function(){return(Me=u.stackRestore=u.asm.Eb).apply(null,arguments)},Ce=u.stackAlloc=function(){return(Ce=u.stackAlloc=u.asm.Fb).apply(null,arguments)},xe=u.___cxa_can_catch=function(){return(xe=u.___cxa_can_catch=u.asm.Gb).apply(null,arguments)},Re=u.___cxa_is_pointer_type=function(){return(Re=u.___cxa_is_pointer_type=u.asm.Hb).apply(null,arguments)},je=u.dynCall_j=function(){return(je=u.dynCall_j=u.asm.Ib).apply(null,arguments)},ke=u.dynCall_iiiiij=function(){return(ke=u.dynCall_iiiiij=u.asm.Jb).apply(null,arguments)},De=u.dynCall_jii=function(){return(De=u.dynCall_jii=u.asm.Kb).apply(null,arguments)},Pe=u.dynCall_viiiiij=function(){return(Pe=u.dynCall_viiiiij=u.asm.Lb).apply(null,arguments)},Ue=u.dynCall_vjji=function(){return(Ue=u.dynCall_vjji=u.asm.Mb).apply(null,arguments)},Fe=u.dynCall_viiijjjii=function(){return(Fe=u.dynCall_viiijjjii=u.asm.Nb).apply(null,arguments)},Ie=u.dynCall_iij=function(){return(Ie=u.dynCall_iij=u.asm.Ob).apply(null,arguments)},We=u.dynCall_ji=function(){return(We=u.dynCall_ji=u.asm.Pb).apply(null,arguments)},He=u.dynCall_iiiiiij=function(){return(He=u.dynCall_iiiiiij=u.asm.Qb).apply(null,arguments)},Le=u.dynCall_iiij=function(){return(Le=u.dynCall_iiij=u.asm.Rb).apply(null,arguments)};function ze(){function t(){if(!ve&&(ve=!0,u.calledRun=!0,!H)&&(O||dt(X),c(u),u.onRuntimeInitialized&&u.onRuntimeInitialized(),!O)){if(u.postRun)for("function"==typeof u.postRun&&(u.postRun=[u.postRun]);u.postRun.length;){var t=u.postRun.shift();Z.unshift(t)}dt(Z)}}if(!(0<et))if(O)c(u),O||dt(X),postMessage({cmd:"loaded"});else{if(u.preRun)for("function"==typeof u.preRun&&(u.preRun=[u.preRun]);u.preRun.length;)K();dt(q),0<et||(u.setStatus?(u.setStatus("Running..."),setTimeout((function(){setTimeout((function(){u.setStatus("")}),1),t()}),1)):t())}}if(u.UTF8ToString=Y,u.stringToUTF8=function(t,e,n){return B(t,r(),e,n)},u.lengthBytesUTF8=G,u.keepRuntimeAlive=Q,u.wasmMemory=j,u.stackSave=Ee,u.stackRestore=Me,u.stackAlloc=Ce,u.ExitStatus=ct,u.PThread=ht,rt=function t(){ve||ze(),ve||(rt=t)},u.preInit)for("function"==typeof u.preInit&&(u.preInit=[u.preInit]);0<u.preInit.length;)u.preInit.pop()();return ze(),t.ready});t.exports=r},932:(t,e,n)=>{var _scriptDir,r=(_scriptDir=(_scriptDir="undefined"!=typeof document&&document.currentScript?document.currentScript.src:void 0)||"/index.js",function(t){var e,r,a;t=t||{},e||(e=void 0!==t?t:{}),e.ready=new Promise((function(t,e){r=t,a=e}));var i,o,u,c,s,l,f=Object.assign({},e),p="./this.program",h=(t,e)=>{throw e},d="object"==typeof window,y="function"==typeof importScripts,b="object"==typeof process&&"object"==typeof process.versions&&"string"==typeof process.versions.node,m="";b?(m=y?n(908).dirname(m)+"/":"//",l=()=>{s||(c=n(384),s=n(908))},i=function(t,e){return l(),t=s.normalize(t),c.readFileSync(t,e?void 0:"utf8")},u=t=>((t=i(t,!0)).buffer||(t=new Uint8Array(t)),t),o=(t,e,n)=>{l(),t=s.normalize(t),c.readFile(t,(function(t,r){t?n(t):e(r.buffer)}))},1<process.argv.length&&(p=process.argv[1].replace(/\\\\/g,"/")),process.argv.slice(2),process.on("uncaughtException",(function(t){if(!(t instanceof J))throw t})),process.on("unhandledRejection",(function(t){throw t})),h=(t,e)=>{if(_||0<L)throw process.exitCode=t,e;e instanceof J||w("exiting due to exception: "+e),process.exit(t)},e.inspect=function(){return"[Emscripten Module object]"}):(d||y)&&(y?m=self.location.href:"undefined"!=typeof document&&document.currentScript&&(m=document.currentScript.src),_scriptDir&&(m=_scriptDir),m=0!==m.indexOf("blob:")?m.substr(0,m.replace(/[?#].*/,"").lastIndexOf("/")+1):"",i=t=>{var e=new XMLHttpRequest;return e.open("GET",t,!1),e.send(null),e.responseText},y&&(u=t=>{var e=new XMLHttpRequest;return e.open("GET",t,!1),e.responseType="arraybuffer",e.send(null),new Uint8Array(e.response)}),o=(t,e,n)=>{var r=new XMLHttpRequest;r.open("GET",t,!0),r.responseType="arraybuffer",r.onload=()=>{200==r.status||0==r.status&&r.response?e(r.response):n()},r.onerror=n,r.send(null)});var g,v=e.print||console.log.bind(console),w=e.printErr||console.warn.bind(console);Object.assign(e,f),f=null,e.thisProgram&&(p=e.thisProgram),e.quit&&(h=e.quit),e.wasmBinary&&(g=e.wasmBinary);var _=e.noExitRuntime||!1;"object"!=typeof WebAssembly&&V("no native wasm support detected");var O,A,S,T,E,M,C=!1,x="undefined"!=typeof TextDecoder?new TextDecoder("utf8"):void 0;function R(t,e,n){var r=(e>>>=0)+n;for(n=e;t[n]&&!(n>=r);)++n;if(16<n-e&&t.buffer&&x)return x.decode(t.subarray(e,n));for(r="";e<n;){var a=t[e++];if(128&a){var i=63&t[e++];if(192==(224&a))r+=String.fromCharCode((31&a)<<6|i);else{var o=63&t[e++];65536>(a=224==(240&a)?(15&a)<<12|i<<6|o:(7&a)<<18|i<<12|o<<6|63&t[e++])?r+=String.fromCharCode(a):(a-=65536,r+=String.fromCharCode(55296|a>>10,56320|1023&a))}}else r+=String.fromCharCode(a)}return r}function j(t,e){return(t>>>=0)?R(T,t,e):""}function k(t,e,n,r){if(!(0<r))return 0;var a=n>>>=0;r=n+r-1;for(var i=0;i<t.length;++i){var o=t.charCodeAt(i);if(55296<=o&&57343>=o&&(o=65536+((1023&o)<<10)|1023&t.charCodeAt(++i)),127>=o){if(n>=r)break;e[n++>>>0]=o}else{if(2047>=o){if(n+1>=r)break;e[n++>>>0]=192|o>>6}else{if(65535>=o){if(n+2>=r)break;e[n++>>>0]=224|o>>12}else{if(n+3>=r)break;e[n++>>>0]=240|o>>18,e[n++>>>0]=128|o>>12&63}e[n++>>>0]=128|o>>6&63}e[n++>>>0]=128|63&o}}return e[n>>>0]=0,n-a}function D(t){for(var e=0,n=0;n<t.length;++n){var r=t.charCodeAt(n);127>=r?e++:2047>=r?e+=2:55296<=r&&57343>=r?(e+=4,++n):e+=3}return e}function P(){var t=O.buffer;A=t,e.HEAP8=S=new Int8Array(t),e.HEAP16=new Int16Array(t),e.HEAP32=E=new Int32Array(t),e.HEAPU8=T=new Uint8Array(t),e.HEAPU16=new Uint16Array(t),e.HEAPU32=M=new Uint32Array(t),e.HEAPF32=new Float32Array(t),e.HEAPF64=new Float64Array(t)}var U,F=[],I=[],W=[],H=[],L=0;function z(){var t=e.preRun.shift();F.unshift(t)}var Y,B=0,G=null,N=null;function V(t){throw e.onAbort&&e.onAbort(t),w(t="Aborted("+t+")"),C=!0,t=new WebAssembly.RuntimeError(t+". Build with -sASSERTIONS for more info."),a(t),t}function $(){return Y.startsWith("data:application/octet-stream;base64,")}if(Y="ort-wasm.wasm",!$()){var q=Y;Y=e.locateFile?e.locateFile(q,m):m+q}function X(){var t=Y;try{if(t==Y&&g)return new Uint8Array(g);if(u)return u(t);throw"both async and sync fetching of the wasm failed"}catch(t){V(t)}}function J(t){this.name="ExitStatus",this.message="Program terminated with exit("+t+")",this.status=t}function Z(t){for(;0<t.length;)t.shift()(e)}var Q=[],K=0,tt=0;function et(t){this.Db=t,this.zb=t-24,this.Ub=function(t){M[this.zb+4>>2>>>0]=t},this.Eb=function(){return M[this.zb+4>>2>>>0]},this.Sb=function(t){M[this.zb+8>>2>>>0]=t},this.Wb=function(){return M[this.zb+8>>2>>>0]},this.Tb=function(){E[this.zb>>2>>>0]=0},this.Ib=function(t){S[this.zb+12>>0>>>0]=t?1:0},this.Pb=function(){return 0!=S[this.zb+12>>0>>>0]},this.Jb=function(t){S[this.zb+13>>0>>>0]=t?1:0},this.Lb=function(){return 0!=S[this.zb+13>>0>>>0]},this.Rb=function(t,e){this.Fb(0),this.Ub(t),this.Sb(e),this.Tb(),this.Ib(!1),this.Jb(!1)},this.Nb=function(){E[this.zb>>2>>>0]+=1},this.Xb=function(){var t=E[this.zb>>2>>>0];return E[this.zb>>2>>>0]=t-1,1===t},this.Fb=function(t){M[this.zb+16>>2>>>0]=t},this.Ob=function(){return M[this.zb+16>>2>>>0]},this.Qb=function(){if(Mt(this.Eb()))return M[this.Db>>2>>>0];var t=this.Ob();return 0!==t?t:this.Db}}function nt(t){return vt(new et(t).zb)}var rt=[];function at(t){var e=rt[t];return e||(t>=rt.length&&(rt.length=t+1),rt[t]=e=U.get(t)),e}function it(t){var e=D(t)+1,n=gt(e);return n&&k(t,S,n,e),n}var ot={};function ut(){if(!ct){var t,e={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:("object"==typeof navigator&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:p||"./this.program"};for(t in ot)void 0===ot[t]?delete e[t]:e[t]=ot[t];var n=[];for(t in e)n.push(t+"="+e[t]);ct=n}return ct}var ct,st=[null,[],[]];function lt(t,e){var n=st[t];0===e||10===e?((1===t?v:w)(R(n,0)),n.length=0):n.push(e)}var ft=0;function pt(t){return 0==t%4&&(0!=t%100||0==t%400)}var ht=[31,29,31,30,31,30,31,31,30,31,30,31],dt=[31,28,31,30,31,30,31,31,30,31,30,31];function yt(t,e,n,r){function a(t,e,n){for(t="number"==typeof t?t.toString():t||"";t.length<e;)t=n[0]+t;return t}function i(t,e){return a(t,e,"0")}function o(t,e){function n(t){return 0>t?-1:0<t?1:0}var r;return 0===(r=n(t.getFullYear()-e.getFullYear()))&&0===(r=n(t.getMonth()-e.getMonth()))&&(r=n(t.getDate()-e.getDate())),r}function u(t){switch(t.getDay()){case 0:return new Date(t.getFullYear()-1,11,29);case 1:return t;case 2:return new Date(t.getFullYear(),0,3);case 3:return new Date(t.getFullYear(),0,2);case 4:return new Date(t.getFullYear(),0,1);case 5:return new Date(t.getFullYear()-1,11,31);case 6:return new Date(t.getFullYear()-1,11,30)}}function c(t){var e=t.Bb;for(t=new Date(new Date(t.Cb+1900,0,1).getTime());0<e;){var n=t.getMonth(),r=(pt(t.getFullYear())?ht:dt)[n];if(!(e>r-t.getDate())){t.setDate(t.getDate()+e);break}e-=r-t.getDate()+1,t.setDate(1),11>n?t.setMonth(n+1):(t.setMonth(0),t.setFullYear(t.getFullYear()+1))}return n=new Date(t.getFullYear()+1,0,4),e=u(new Date(t.getFullYear(),0,4)),n=u(n),0>=o(e,t)?0>=o(n,t)?t.getFullYear()+1:t.getFullYear():t.getFullYear()-1}var s=E[r+40>>2>>>0];for(var l in r={$b:E[r>>2>>>0],Zb:E[r+4>>2>>>0],Gb:E[r+8>>2>>>0],Kb:E[r+12>>2>>>0],Hb:E[r+16>>2>>>0],Cb:E[r+20>>2>>>0],Ab:E[r+24>>2>>>0],Bb:E[r+28>>2>>>0],bc:E[r+32>>2>>>0],Yb:E[r+36>>2>>>0],ac:s?j(s):""},n=j(n),s={"%c":"%a %b %d %H:%M:%S %Y","%D":"%m/%d/%y","%F":"%Y-%m-%d","%h":"%b","%r":"%I:%M:%S %p","%R":"%H:%M","%T":"%H:%M:%S","%x":"%m/%d/%y","%X":"%H:%M:%S","%Ec":"%c","%EC":"%C","%Ex":"%m/%d/%y","%EX":"%H:%M:%S","%Ey":"%y","%EY":"%Y","%Od":"%d","%Oe":"%e","%OH":"%H","%OI":"%I","%Om":"%m","%OM":"%M","%OS":"%S","%Ou":"%u","%OU":"%U","%OV":"%V","%Ow":"%w","%OW":"%W","%Oy":"%y"})n=n.replace(new RegExp(l,"g"),s[l]);var f="Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),p="January February March April May June July August September October November December".split(" ");for(l in s={"%a":function(t){return f[t.Ab].substring(0,3)},"%A":function(t){return f[t.Ab]},"%b":function(t){return p[t.Hb].substring(0,3)},"%B":function(t){return p[t.Hb]},"%C":function(t){return i((t.Cb+1900)/100|0,2)},"%d":function(t){return i(t.Kb,2)},"%e":function(t){return a(t.Kb,2," ")},"%g":function(t){return c(t).toString().substring(2)},"%G":function(t){return c(t)},"%H":function(t){return i(t.Gb,2)},"%I":function(t){return 0==(t=t.Gb)?t=12:12<t&&(t-=12),i(t,2)},"%j":function(t){for(var e=0,n=0;n<=t.Hb-1;e+=(pt(t.Cb+1900)?ht:dt)[n++]);return i(t.Kb+e,3)},"%m":function(t){return i(t.Hb+1,2)},"%M":function(t){return i(t.Zb,2)},"%n":function(){return"\\n"},"%p":function(t){return 0<=t.Gb&&12>t.Gb?"AM":"PM"},"%S":function(t){return i(t.$b,2)},"%t":function(){return"\\t"},"%u":function(t){return t.Ab||7},"%U":function(t){return i(Math.floor((t.Bb+7-t.Ab)/7),2)},"%V":function(t){var e=Math.floor((t.Bb+7-(t.Ab+6)%7)/7);if(2>=(t.Ab+371-t.Bb-2)%7&&e++,e)53==e&&(4==(n=(t.Ab+371-t.Bb)%7)||3==n&&pt(t.Cb)||(e=1));else{e=52;var n=(t.Ab+7-t.Bb-1)%7;(4==n||5==n&&pt(t.Cb%400-1))&&e++}return i(e,2)},"%w":function(t){return t.Ab},"%W":function(t){return i(Math.floor((t.Bb+7-(t.Ab+6)%7)/7),2)},"%y":function(t){return(t.Cb+1900).toString().substring(2)},"%Y":function(t){return t.Cb+1900},"%z":function(t){var e=0<=(t=t.Yb);return t=Math.abs(t)/60,(e?"+":"-")+String("0000"+(t/60*100+t%60)).slice(-4)},"%Z":function(t){return t.ac},"%%":function(){return"%"}},n=n.replace(/%%/g,"\\0\\0"),s)n.includes(l)&&(n=n.replace(new RegExp(l,"g"),s[l](r)));return l=function(t){var e=Array(D(t)+1);return k(t,e,0,e.length),e}(n=n.replace(/\\0\\0/g,"%")),l.length>e?0:(S.set(l,t>>>0),l.length-1)}var bt={a:function(t){return gt(t+24)+24},m:function(t){return(t=new et(t)).Pb()||(t.Ib(!0),K--),t.Jb(!1),Q.push(t),t.Nb(),t.Qb()},ia:function(t){throw w("Unexpected exception thrown, this is not properly supported - aborting"),C=!0,t},w:function(){Ot(0);var t=Q.pop();if(t.Xb()&&!t.Lb()){var e=t.Wb();e&&at(e)(t.Db),nt(t.Db)}tt=0},d:function(){var t=tt;if(!t)return ft=0;var e=new et(t);e.Fb(t);var n=e.Eb();if(!n)return ft=0,t;for(var r=Array.prototype.slice.call(arguments),a=0;a<r.length;a++){var i=r[a];if(0===i||i===n)break;if(Et(i,n,e.zb+16))return ft=i,t}return ft=n,t},k:function(){var t=tt;if(!t)return ft=0;var e=new et(t);e.Fb(t);var n=e.Eb();if(!n)return ft=0,t;for(var r=Array.prototype.slice.call(arguments),a=0;a<r.length;a++){var i=r[a];if(0===i||i===n)break;if(Et(i,n,e.zb+16))return ft=i,t}return ft=n,t},g:function(){var t=tt;if(!t)return ft=0;var e=new et(t);e.Fb(t);var n=e.Eb();if(!n)return ft=0,t;for(var r=Array.prototype.slice.call(arguments),a=0;a<r.length;a++){var i=r[a];if(0===i||i===n)break;if(Et(i,n,e.zb+16))return ft=i,t}return ft=n,t},s:nt,L:function(){var t=Q.pop();t||V("no exception to throw");var e=t.Db;throw t.Lb()||(Q.push(t),t.Jb(!0),t.Ib(!1),K++),tt=e,e},b:function(t,e,n){throw new et(t).Rb(e,n),tt=t,K++,t},la:function(){return K},i:function(t){throw tt||(tt=t),t},H:function(){return 0},Ba:function(){},pa:function(){},ra:function(){},ka:function(){return 0},za:function(){},ua:function(){},ya:function(){},R:function(){},qa:function(){},na:function(){},Aa:function(){},oa:function(){},Ha:function(){},Ja:function(){V("To use dlopen, you need enable dynamic linking, see https://github.com/emscripten-core/emscripten/wiki/Linking")},Ia:function(){V("To use dlopen, you need enable dynamic linking, see https://github.com/emscripten-core/emscripten/wiki/Linking")},S:function(){return Date.now()},Ca:function(){return!0},Da:function(t,e){t=new Date(1e3*(M[t>>>2]+4294967296*E[t+4>>>2])),E[e>>2>>>0]=t.getUTCSeconds(),E[e+4>>2>>>0]=t.getUTCMinutes(),E[e+8>>2>>>0]=t.getUTCHours(),E[e+12>>2>>>0]=t.getUTCDate(),E[e+16>>2>>>0]=t.getUTCMonth(),E[e+20>>2>>>0]=t.getUTCFullYear()-1900,E[e+24>>2>>>0]=t.getUTCDay(),E[e+28>>2>>>0]=(t.getTime()-Date.UTC(t.getUTCFullYear(),0,1,0,0,0,0))/864e5|0},Ea:function(t,e){t=new Date(1e3*(M[t>>>2]+4294967296*E[t+4>>>2])),E[e>>2>>>0]=t.getSeconds(),E[e+4>>2>>>0]=t.getMinutes(),E[e+8>>2>>>0]=t.getHours(),E[e+12>>2>>>0]=t.getDate(),E[e+16>>2>>>0]=t.getMonth(),E[e+20>>2>>>0]=t.getFullYear()-1900,E[e+24>>2>>>0]=t.getDay();var n=new Date(t.getFullYear(),0,1);E[e+28>>2>>>0]=(t.getTime()-n.getTime())/864e5|0,E[e+36>>2>>>0]=-60*t.getTimezoneOffset();var r=new Date(t.getFullYear(),6,1).getTimezoneOffset();n=n.getTimezoneOffset(),E[e+32>>2>>>0]=0|(r!=n&&t.getTimezoneOffset()==Math.min(n,r))},Fa:function(t){var e=new Date(E[t+20>>2>>>0]+1900,E[t+16>>2>>>0],E[t+12>>2>>>0],E[t+8>>2>>>0],E[t+4>>2>>>0],E[t>>2>>>0],0),n=E[t+32>>2>>>0],r=e.getTimezoneOffset(),a=new Date(e.getFullYear(),0,1),i=new Date(e.getFullYear(),6,1).getTimezoneOffset(),o=a.getTimezoneOffset(),u=Math.min(o,i);return 0>n?E[t+32>>2>>>0]=Number(i!=o&&u==r):0<n!=(u==r)&&(i=Math.max(o,i),e.setTime(e.getTime()+6e4*((0<n?u:i)-r))),E[t+24>>2>>>0]=e.getDay(),E[t+28>>2>>>0]=(e.getTime()-a.getTime())/864e5|0,E[t>>2>>>0]=e.getSeconds(),E[t+4>>2>>>0]=e.getMinutes(),E[t+8>>2>>>0]=e.getHours(),E[t+12>>2>>>0]=e.getDate(),E[t+16>>2>>>0]=e.getMonth(),e.getTime()/1e3|0},sa:function(){return-52},ta:function(){},Ga:function t(e,n,r){t.Vb||(t.Vb=!0,function(t,e,n){function r(t){return(t=t.toTimeString().match(/\\(([A-Za-z ]+)\\)$/))?t[1]:"GMT"}var a=(new Date).getFullYear(),i=new Date(a,0,1),o=new Date(a,6,1);a=i.getTimezoneOffset();var u=o.getTimezoneOffset();E[t>>2>>>0]=60*Math.max(a,u),E[e>>2>>>0]=Number(a!=u),t=r(i),e=r(o),t=it(t),e=it(e),u<a?(M[n>>2>>>0]=t,M[n+4>>2>>>0]=e):(M[n>>2>>>0]=e,M[n+4>>2>>>0]=t)}(e,n,r))},B:function(){V("")},ma:function(){return 4294901760},I:b?()=>{var t=process.hrtime();return 1e3*t[0]+t[1]/1e6}:()=>performance.now(),xa:function(t,e,n){T.copyWithin(t>>>0,e>>>0,e+n>>>0)},G:function(t){var e=T.length;if(4294901760<(t>>>=0))return!1;for(var n=1;4>=n;n*=2){var r=e*(1+.2/n);r=Math.min(r,t+100663296);var a=Math;r=Math.max(t,r),a=a.min.call(a,4294901760,r+(65536-r%65536)%65536);t:{try{O.grow(a-A.byteLength+65535>>>16),P();var i=1;break t}catch(t){}i=void 0}if(i)return!0}return!1},va:function(t,e){var n=0;return ut().forEach((function(r,a){var i=e+n;for(a=M[t+4*a>>2>>>0]=i,i=0;i<r.length;++i)S[a++>>0>>>0]=r.charCodeAt(i);S[a>>0>>>0]=0,n+=r.length+1})),0},wa:function(t,e){var n=ut();M[t>>2>>>0]=n.length;var r=0;return n.forEach((function(t){r+=t.length+1})),M[e>>2>>>0]=r,0},ba:function(t){_||0<L||(_t(),Z(W),wt(0),st[1].length&&lt(1,10),st[2].length&&lt(2,10)),_||0<L||(e.onExit&&e.onExit(t),C=!0),h(t,new J(t))},E:function(){return 52},Q:function(){return 52},ca:function(){return 70},P:function(t,e,n,r){for(var a=0,i=0;i<n;i++){var o=M[e>>2>>>0],u=M[e+4>>2>>>0];e+=8;for(var c=0;c<u;c++)lt(t,T[o+c>>>0]);a+=u}return M[r>>2>>>0]=a,0},c:function(){return ft},ja:function t(e,r){t.Mb||(t.Mb=function(){if("object"==typeof crypto&&"function"==typeof crypto.getRandomValues){var t=new Uint8Array(1);return()=>(crypto.getRandomValues(t),t[0])}if(b)try{var e=n(Object(function(){var t=new Error("Cannot find module \'crypto\'");throw t.code="MODULE_NOT_FOUND",t}()));return()=>e.randomBytes(1)[0]}catch(t){}return()=>V("randomDevice")}());for(var a=0;a<r;a++)S[e+a>>0>>>0]=t.Mb();return 0},ea:function(t,e,n){var r=At();try{return at(t)(e,n)}catch(t){if(St(r),t!==t+0)throw t;Ot(1,0)}},fa:function(t,e,n){var r=At();try{return at(t)(e,n)}catch(t){if(St(r),t!==t+0)throw t;Ot(1,0)}},J:function(t){var e=At();try{return at(t)()}catch(t){if(St(e),t!==t+0)throw t;Ot(1,0)}},e:function(t,e){var n=At();try{return at(t)(e)}catch(t){if(St(n),t!==t+0)throw t;Ot(1,0)}},N:function(t,e,n){var r=At();try{return at(t)(e,n)}catch(t){if(St(r),t!==t+0)throw t;Ot(1,0)}},O:function(t,e,n){var r=At();try{return at(t)(e,n)}catch(t){if(St(r),t!==t+0)throw t;Ot(1,0)}},j:function(t,e,n){var r=At();try{return at(t)(e,n)}catch(t){if(St(r),t!==t+0)throw t;Ot(1,0)}},o:function(t,e,n,r){var a=At();try{return at(t)(e,n,r)}catch(t){if(St(a),t!==t+0)throw t;Ot(1,0)}},p:function(t,e,n,r,a){var i=At();try{return at(t)(e,n,r,a)}catch(t){if(St(i),t!==t+0)throw t;Ot(1,0)}},M:function(t,e,n,r,a,i){var o=At();try{return at(t)(e,n,r,a,i)}catch(t){if(St(o),t!==t+0)throw t;Ot(1,0)}},r:function(t,e,n,r,a,i){var o=At();try{return at(t)(e,n,r,a,i)}catch(t){if(St(o),t!==t+0)throw t;Ot(1,0)}},v:function(t,e,n,r,a,i,o){var u=At();try{return at(t)(e,n,r,a,i,o)}catch(t){if(St(u),t!==t+0)throw t;Ot(1,0)}},K:function(t,e,n,r,a,i,o,u){var c=At();try{return at(t)(e,n,r,a,i,o,u)}catch(t){if(St(c),t!==t+0)throw t;Ot(1,0)}},D:function(t,e,n,r,a,i,o,u,c,s,l,f){var p=At();try{return at(t)(e,n,r,a,i,o,u,c,s,l,f)}catch(t){if(St(p),t!==t+0)throw t;Ot(1,0)}},X:function(t,e,n,r,a,i,o,u){var c=At();try{return Ft(t,e,n,r,a,i,o,u)}catch(t){if(St(c),t!==t+0)throw t;Ot(1,0)}},V:function(t,e,n,r,a,i,o){var u=At();try{return xt(t,e,n,r,a,i,o)}catch(t){if(St(u),t!==t+0)throw t;Ot(1,0)}},U:function(t,e,n,r,a){var i=At();try{return It(t,e,n,r,a)}catch(t){if(St(i),t!==t+0)throw t;Ot(1,0)}},Z:function(t,e,n,r){var a=At();try{return Pt(t,e,n,r)}catch(t){if(St(a),t!==t+0)throw t;Ot(1,0)}},W:function(t){var e=At();try{return Ct(t)}catch(t){if(St(e),t!==t+0)throw t;Ot(1,0)}},Y:function(t,e){var n=At();try{return Ut(t,e)}catch(t){if(St(n),t!==t+0)throw t;Ot(1,0)}},T:function(t,e,n){var r=At();try{return Rt(t,e,n)}catch(t){if(St(r),t!==t+0)throw t;Ot(1,0)}},f:function(t){var e=At();try{at(t)()}catch(t){if(St(e),t!==t+0)throw t;Ot(1,0)}},q:function(t,e){var n=At();try{at(t)(e)}catch(t){if(St(n),t!==t+0)throw t;Ot(1,0)}},h:function(t,e,n){var r=At();try{at(t)(e,n)}catch(t){if(St(r),t!==t+0)throw t;Ot(1,0)}},da:function(t,e,n,r){var a=At();try{at(t)(e,n,r)}catch(t){if(St(a),t!==t+0)throw t;Ot(1,0)}},l:function(t,e,n,r){var a=At();try{at(t)(e,n,r)}catch(t){if(St(a),t!==t+0)throw t;Ot(1,0)}},t:function(t,e,n,r,a){var i=At();try{at(t)(e,n,r,a)}catch(t){if(St(i),t!==t+0)throw t;Ot(1,0)}},u:function(t,e,n,r,a,i){var o=At();try{at(t)(e,n,r,a,i)}catch(t){if(St(o),t!==t+0)throw t;Ot(1,0)}},x:function(t,e,n,r,a,i,o){var u=At();try{at(t)(e,n,r,a,i,o)}catch(t){if(St(u),t!==t+0)throw t;Ot(1,0)}},z:function(t,e,n,r,a,i,o,u){var c=At();try{at(t)(e,n,r,a,i,o,u)}catch(t){if(St(c),t!==t+0)throw t;Ot(1,0)}},ga:function(t,e,n,r,a,i,o,u,c){var s=At();try{at(t)(e,n,r,a,i,o,u,c)}catch(t){if(St(s),t!==t+0)throw t;Ot(1,0)}},A:function(t,e,n,r,a,i,o,u,c,s,l){var f=At();try{at(t)(e,n,r,a,i,o,u,c,s,l)}catch(t){if(St(f),t!==t+0)throw t;Ot(1,0)}},C:function(t,e,n,r,a,i,o,u,c,s,l,f,p,h,d,y){var b=At();try{at(t)(e,n,r,a,i,o,u,c,s,l,f,p,h,d,y)}catch(t){if(St(b),t!==t+0)throw t;Ot(1,0)}},aa:function(t,e,n,r,a,i,o,u){var c=At();try{jt(t,e,n,r,a,i,o,u)}catch(t){if(St(c),t!==t+0)throw t;Ot(1,0)}},_:function(t,e,n,r,a,i,o,u,c,s,l,f){var p=At();try{Dt(t,e,n,r,a,i,o,u,c,s,l,f)}catch(t){if(St(p),t!==t+0)throw t;Ot(1,0)}},$:function(t,e,n,r,a,i){var o=At();try{kt(t,e,n,r,a,i)}catch(t){if(St(o),t!==t+0)throw t;Ot(1,0)}},n:function(t){return t},F:function(t){ft=t},ha:yt,y:function(t,e,n,r){return yt(t,e,n,r)}};!function(){function t(t){e.asm=t.exports,O=e.asm.Ka,P(),U=e.asm.ib,I.unshift(e.asm.La),B--,e.monitorRunDependencies&&e.monitorRunDependencies(B),0==B&&(null!==G&&(clearInterval(G),G=null),N&&(t=N,N=null,t()))}function n(e){t(e.instance)}function r(t){return function(){if(!g&&(d||y)){if("function"==typeof fetch&&!Y.startsWith("file://"))return fetch(Y,{credentials:"same-origin"}).then((function(t){if(!t.ok)throw"failed to load wasm binary file at \'"+Y+"\'";return t.arrayBuffer()})).catch((function(){return X()}));if(o)return new Promise((function(t,e){o(Y,(function(e){t(new Uint8Array(e))}),e)}))}return Promise.resolve().then((function(){return X()}))}().then((function(t){return WebAssembly.instantiate(t,i)})).then((function(t){return t})).then(t,(function(t){w("failed to asynchronously prepare wasm: "+t),V(t)}))}var i={a:bt};if(B++,e.monitorRunDependencies&&e.monitorRunDependencies(B),e.instantiateWasm)try{return e.instantiateWasm(i,t)}catch(t){return w("Module.instantiateWasm callback failed with error: "+t),!1}(g||"function"!=typeof WebAssembly.instantiateStreaming||$()||Y.startsWith("file://")||b||"function"!=typeof fetch?r(n):fetch(Y,{credentials:"same-origin"}).then((function(t){return WebAssembly.instantiateStreaming(t,i).then(n,(function(t){return w("wasm streaming compile failed: "+t),w("falling back to ArrayBuffer instantiation"),r(n)}))}))).catch(a)}(),e.___wasm_call_ctors=function(){return(e.___wasm_call_ctors=e.asm.La).apply(null,arguments)},e._OrtInit=function(){return(e._OrtInit=e.asm.Ma).apply(null,arguments)},e._OrtCreateSessionOptions=function(){return(e._OrtCreateSessionOptions=e.asm.Na).apply(null,arguments)},e._OrtAppendExecutionProvider=function(){return(e._OrtAppendExecutionProvider=e.asm.Oa).apply(null,arguments)},e._OrtAddSessionConfigEntry=function(){return(e._OrtAddSessionConfigEntry=e.asm.Pa).apply(null,arguments)},e._OrtReleaseSessionOptions=function(){return(e._OrtReleaseSessionOptions=e.asm.Qa).apply(null,arguments)},e._OrtCreateSession=function(){return(e._OrtCreateSession=e.asm.Ra).apply(null,arguments)},e._OrtReleaseSession=function(){return(e._OrtReleaseSession=e.asm.Sa).apply(null,arguments)},e._OrtGetInputCount=function(){return(e._OrtGetInputCount=e.asm.Ta).apply(null,arguments)},e._OrtGetOutputCount=function(){return(e._OrtGetOutputCount=e.asm.Ua).apply(null,arguments)},e._OrtGetInputName=function(){return(e._OrtGetInputName=e.asm.Va).apply(null,arguments)},e._OrtGetOutputName=function(){return(e._OrtGetOutputName=e.asm.Wa).apply(null,arguments)},e._OrtFree=function(){return(e._OrtFree=e.asm.Xa).apply(null,arguments)},e._OrtCreateTensor=function(){return(e._OrtCreateTensor=e.asm.Ya).apply(null,arguments)},e._OrtGetTensorData=function(){return(e._OrtGetTensorData=e.asm.Za).apply(null,arguments)},e._OrtReleaseTensor=function(){return(e._OrtReleaseTensor=e.asm._a).apply(null,arguments)},e._OrtCreateRunOptions=function(){return(e._OrtCreateRunOptions=e.asm.$a).apply(null,arguments)},e._OrtAddRunConfigEntry=function(){return(e._OrtAddRunConfigEntry=e.asm.ab).apply(null,arguments)},e._OrtReleaseRunOptions=function(){return(e._OrtReleaseRunOptions=e.asm.bb).apply(null,arguments)},e._OrtRun=function(){return(e._OrtRun=e.asm.cb).apply(null,arguments)},e._OrtEndProfiling=function(){return(e._OrtEndProfiling=e.asm.db).apply(null,arguments)};var mt,gt=e._malloc=function(){return(gt=e._malloc=e.asm.eb).apply(null,arguments)},vt=e._free=function(){return(vt=e._free=e.asm.fb).apply(null,arguments)},wt=e._fflush=function(){return(wt=e._fflush=e.asm.gb).apply(null,arguments)},_t=e.___funcs_on_exit=function(){return(_t=e.___funcs_on_exit=e.asm.hb).apply(null,arguments)},Ot=e._setThrew=function(){return(Ot=e._setThrew=e.asm.jb).apply(null,arguments)},At=e.stackSave=function(){return(At=e.stackSave=e.asm.kb).apply(null,arguments)},St=e.stackRestore=function(){return(St=e.stackRestore=e.asm.lb).apply(null,arguments)},Tt=e.stackAlloc=function(){return(Tt=e.stackAlloc=e.asm.mb).apply(null,arguments)},Et=e.___cxa_can_catch=function(){return(Et=e.___cxa_can_catch=e.asm.nb).apply(null,arguments)},Mt=e.___cxa_is_pointer_type=function(){return(Mt=e.___cxa_is_pointer_type=e.asm.ob).apply(null,arguments)},Ct=e.dynCall_j=function(){return(Ct=e.dynCall_j=e.asm.pb).apply(null,arguments)},xt=e.dynCall_iiiiij=function(){return(xt=e.dynCall_iiiiij=e.asm.qb).apply(null,arguments)},Rt=e.dynCall_jii=function(){return(Rt=e.dynCall_jii=e.asm.rb).apply(null,arguments)},jt=e.dynCall_viiiiij=function(){return(jt=e.dynCall_viiiiij=e.asm.sb).apply(null,arguments)},kt=e.dynCall_vjji=function(){return(kt=e.dynCall_vjji=e.asm.tb).apply(null,arguments)},Dt=e.dynCall_viiijjjii=function(){return(Dt=e.dynCall_viiijjjii=e.asm.ub).apply(null,arguments)},Pt=e.dynCall_iij=function(){return(Pt=e.dynCall_iij=e.asm.vb).apply(null,arguments)},Ut=e.dynCall_ji=function(){return(Ut=e.dynCall_ji=e.asm.wb).apply(null,arguments)},Ft=e.dynCall_iiiiiij=function(){return(Ft=e.dynCall_iiiiiij=e.asm.xb).apply(null,arguments)},It=e.dynCall_iiij=function(){return(It=e.dynCall_iiij=e.asm.yb).apply(null,arguments)};function Wt(){function t(){if(!mt&&(mt=!0,e.calledRun=!0,!C)){if(Z(I),r(e),e.onRuntimeInitialized&&e.onRuntimeInitialized(),e.postRun)for("function"==typeof e.postRun&&(e.postRun=[e.postRun]);e.postRun.length;){var t=e.postRun.shift();H.unshift(t)}Z(H)}}if(!(0<B)){if(e.preRun)for("function"==typeof e.preRun&&(e.preRun=[e.preRun]);e.preRun.length;)z();Z(F),0<B||(e.setStatus?(e.setStatus("Running..."),setTimeout((function(){setTimeout((function(){e.setStatus("")}),1),t()}),1)):t())}}if(e.UTF8ToString=j,e.stringToUTF8=function(t,e,n){return k(t,T,e,n)},e.lengthBytesUTF8=D,e.stackSave=At,e.stackRestore=St,e.stackAlloc=Tt,N=function t(){mt||Wt(),mt||(N=t)},e.preInit)for("function"==typeof e.preInit&&(e.preInit=[e.preInit]);0<e.preInit.length;)e.preInit.pop()();return Wt(),t.ready});t.exports=r},967:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.iterateExtraOptions=void 0,e.iterateExtraOptions=(t,n,r,a)=>{if("object"==typeof t&&null!==t){if(r.has(t))throw new Error("Circular reference in options");r.add(t)}Object.entries(t).forEach((([t,i])=>{const o=n?n+t:t;if("object"==typeof i)(0,e.iterateExtraOptions)(i,o+".",r,a);else if("string"==typeof i||"number"==typeof i)a(o,i.toString());else{if("boolean"!=typeof i)throw new Error("Can\'t handle extra config type: "+typeof i);a(o,i?"1":"0")}}))}},586:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.setRunOptions=void 0;const r=n(967),a=n(983),i=n(361);e.setRunOptions=t=>{const e=(0,i.getInstance)();let n=0;const o=[],u=t||{};try{if(void 0===(null==t?void 0:t.logSeverityLevel))u.logSeverityLevel=2;else if("number"!=typeof t.logSeverityLevel||!Number.isInteger(t.logSeverityLevel)||t.logSeverityLevel<0||t.logSeverityLevel>4)throw new Error(`log serverity level is not valid: ${t.logSeverityLevel}`);if(void 0===(null==t?void 0:t.logVerbosityLevel))u.logVerbosityLevel=0;else if("number"!=typeof t.logVerbosityLevel||!Number.isInteger(t.logVerbosityLevel))throw new Error(`log verbosity level is not valid: ${t.logVerbosityLevel}`);void 0===(null==t?void 0:t.terminate)&&(u.terminate=!1);let i=0;if(void 0!==(null==t?void 0:t.tag)&&(i=(0,a.allocWasmString)(t.tag,o)),n=e._OrtCreateRunOptions(u.logSeverityLevel,u.logVerbosityLevel,!!u.terminate,i),0===n)throw new Error("Can\'t create run options");return void 0!==(null==t?void 0:t.extra)&&(0,r.iterateExtraOptions)(t.extra,"",new WeakSet,((t,r)=>{const i=(0,a.allocWasmString)(t,o),u=(0,a.allocWasmString)(r,o);if(0!==e._OrtAddRunConfigEntry(n,i,u))throw new Error(`Can\'t set a run config entry: ${t} - ${r}`)})),[n,o]}catch(t){throw 0!==n&&e._OrtReleaseRunOptions(n),o.forEach(e._free),t}}},919:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.setSessionOptions=void 0;const r=n(967),a=n(983),i=n(361);e.setSessionOptions=t=>{const e=(0,i.getInstance)();let n=0;const o=[],u=t||{};(t=>{t.extra||(t.extra={}),t.extra.session||(t.extra.session={});const e=t.extra.session;e.use_ort_model_bytes_directly||(e.use_ort_model_bytes_directly="1")})(u);try{void 0===(null==t?void 0:t.graphOptimizationLevel)&&(u.graphOptimizationLevel="all");const c=(t=>{switch(t){case"disabled":return 0;case"basic":return 1;case"extended":return 2;case"all":return 99;default:throw new Error(`unsupported graph optimization level: ${t}`)}})(u.graphOptimizationLevel);void 0===(null==t?void 0:t.enableCpuMemArena)&&(u.enableCpuMemArena=!0),void 0===(null==t?void 0:t.enableMemPattern)&&(u.enableMemPattern=!0),void 0===(null==t?void 0:t.executionMode)&&(u.executionMode="sequential");const s=(t=>{switch(t){case"sequential":return 0;case"parallel":return 1;default:throw new Error(`unsupported execution mode: ${t}`)}})(u.executionMode);let l=0;if(void 0!==(null==t?void 0:t.logId)&&(l=(0,a.allocWasmString)(t.logId,o)),void 0===(null==t?void 0:t.logSeverityLevel))u.logSeverityLevel=2;else if("number"!=typeof t.logSeverityLevel||!Number.isInteger(t.logSeverityLevel)||t.logSeverityLevel<0||t.logSeverityLevel>4)throw new Error(`log serverity level is not valid: ${t.logSeverityLevel}`);if(void 0===(null==t?void 0:t.logVerbosityLevel))u.logVerbosityLevel=0;else if("number"!=typeof t.logVerbosityLevel||!Number.isInteger(t.logVerbosityLevel))throw new Error(`log verbosity level is not valid: ${t.logVerbosityLevel}`);if(void 0===(null==t?void 0:t.enableProfiling)&&(u.enableProfiling=!1),n=e._OrtCreateSessionOptions(c,!!u.enableCpuMemArena,!!u.enableMemPattern,s,!!u.enableProfiling,0,l,u.logSeverityLevel,u.logVerbosityLevel),0===n)throw new Error("Can\'t create session options");return(null==t?void 0:t.executionProviders)&&((t,e,n)=>{for(const r of e){let e="string"==typeof r?r:r.name;switch(e){case"xnnpack":e="XNNPACK";break;case"wasm":case"cpu":continue;default:throw new Error(`not supported EP: ${e}`)}const o=(0,a.allocWasmString)(e,n);if(0!==(0,i.getInstance)()._OrtAppendExecutionProvider(t,o))throw new Error(`Can\'t append execution provider: ${e}`)}})(n,t.executionProviders,o),void 0!==(null==t?void 0:t.extra)&&(0,r.iterateExtraOptions)(t.extra,"",new WeakSet,((t,r)=>{const i=(0,a.allocWasmString)(t,o),u=(0,a.allocWasmString)(r,o);if(0!==e._OrtAddSessionConfigEntry(n,i,u))throw new Error(`Can\'t set a session config entry: ${t} - ${r}`)})),[n,o]}catch(t){throw 0!==n&&e._OrtReleaseSessionOptions(n),o.forEach(e._free),t}}},983:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.allocWasmString=void 0;const r=n(361);e.allocWasmString=(t,e)=>{const n=(0,r.getInstance)(),a=n.lengthBytesUTF8(t)+1,i=n._malloc(a);return n.stringToUTF8(t,i,a),e.push(i),i}},349:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.extractTransferableBuffers=e.endProfiling=e.run=e.releaseSession=e.createSession=e.createSessionFinalize=e.createSessionAllocate=e.initOrt=void 0;const r=n(586),a=n(919),i=n(983),o=n(361);e.initOrt=(t,e)=>{const n=(0,o.getInstance)()._OrtInit(t,e);if(0!==n)throw new Error(`Can\'t initialize onnxruntime. error code = ${n}`)};const u=new Map;e.createSessionAllocate=t=>{const e=(0,o.getInstance)(),n=e._malloc(t.byteLength);return e.HEAPU8.set(t,n),[n,t.byteLength]},e.createSessionFinalize=(t,e)=>{const n=(0,o.getInstance)();let r=0,i=0,c=[];try{if([i,c]=(0,a.setSessionOptions)(e),r=n._OrtCreateSession(t[0],t[1],i),0===r)throw new Error("Can\'t create a session")}finally{n._free(t[0]),n._OrtReleaseSessionOptions(i),c.forEach(n._free)}const s=n._OrtGetInputCount(r),l=n._OrtGetOutputCount(r),f=[],p=[],h=[],d=[];for(let t=0;t<s;t++){const e=n._OrtGetInputName(r,t);if(0===e)throw new Error("Can\'t get an input name");p.push(e),f.push(n.UTF8ToString(e))}for(let t=0;t<l;t++){const e=n._OrtGetOutputName(r,t);if(0===e)throw new Error("Can\'t get an output name");d.push(e),h.push(n.UTF8ToString(e))}return u.set(r,[r,p,d]),[r,f,h]},e.createSession=(t,n)=>{const r=(0,e.createSessionAllocate)(t);return(0,e.createSessionFinalize)(r,n)},e.releaseSession=t=>{const e=(0,o.getInstance)(),n=u.get(t);if(!n)throw new Error("invalid session id");const r=n[0],a=n[1],i=n[2];a.forEach(e._OrtFree),i.forEach(e._OrtFree),e._OrtReleaseSession(r),u.delete(t)};const c=t=>{switch(t){case"int8":return 3;case"uint8":return 2;case"bool":return 9;case"int16":return 5;case"uint16":return 4;case"int32":return 6;case"uint32":return 12;case"float32":return 1;case"float64":return 11;case"string":return 8;case"int64":return 7;case"uint64":return 13;default:throw new Error(`unsupported data type: ${t}`)}},s=t=>{switch(t){case 3:return"int8";case 2:return"uint8";case 9:return"bool";case 5:return"int16";case 4:return"uint16";case 6:return"int32";case 12:return"uint32";case 1:return"float32";case 11:return"float64";case 8:return"string";case 7:return"int64";case 13:return"uint64";default:throw new Error(`unsupported data type: ${t}`)}},l=t=>{switch(t){case"float32":return Float32Array;case"uint8":case"bool":return Uint8Array;case"int8":return Int8Array;case"uint16":return Uint16Array;case"int16":return Int16Array;case"int32":return Int32Array;case"float64":return Float64Array;case"uint32":return Uint32Array;case"int64":return BigInt64Array;case"uint64":return BigUint64Array;default:throw new Error(`unsupported type: ${t}`)}};e.run=(t,e,n,a,f)=>{const p=(0,o.getInstance)(),h=u.get(t);if(!h)throw new Error("invalid session id");const d=h[0],y=h[1],b=h[2],m=e.length,g=a.length;let v=0,w=[];const _=[],O=[];try{[v,w]=(0,r.setRunOptions)(f);for(let t=0;t<m;t++){const e=n[t][0],r=n[t][1],a=n[t][2];let o,u;if(Array.isArray(a)){u=4*a.length,o=p._malloc(u),O.push(o);let t=o/4;for(let e=0;e<a.length;e++){if("string"!=typeof a[e])throw new TypeError(`tensor data at index ${e} is not a string`);p.HEAPU32[t++]=(0,i.allocWasmString)(a[e],O)}}else u=a.byteLength,o=p._malloc(u),O.push(o),p.HEAPU8.set(new Uint8Array(a.buffer,a.byteOffset,u),o);const s=p.stackSave(),l=p.stackAlloc(4*r.length);try{let t=l/4;r.forEach((e=>p.HEAP32[t++]=e));const n=p._OrtCreateTensor(c(e),o,u,l,r.length);if(0===n)throw new Error("Can\'t create a tensor");_.push(n)}finally{p.stackRestore(s)}}const t=p.stackSave(),o=p.stackAlloc(4*m),u=p.stackAlloc(4*m),h=p.stackAlloc(4*g),A=p.stackAlloc(4*g);try{let n=o/4,r=u/4,i=h/4,c=A/4;for(let t=0;t<m;t++)p.HEAPU32[n++]=_[t],p.HEAPU32[r++]=y[e[t]];for(let t=0;t<g;t++)p.HEAPU32[i++]=0,p.HEAPU32[c++]=b[a[t]];let f=p._OrtRun(d,u,o,m,A,g,h,v);const w=[];if(0===f)for(let t=0;t<g;t++){const e=p.HEAPU32[h/4+t],n=p.stackSave(),r=p.stackAlloc(16);let a,i=0;try{if(f=p._OrtGetTensorData(e,r,r+4,r+8,r+12),0!==f)throw new Error(`Can\'t access output tensor data. error code = ${f}`);let t=r/4;const o=p.HEAPU32[t++];i=p.HEAPU32[t++];const u=p.HEAPU32[t++],c=p.HEAPU32[t++],h=[];for(let t=0;t<c;t++)h.push(p.HEAPU32[u/4+t]);p._OrtFree(u);const d=0===h.length?1:h.reduce(((t,e)=>t*e));if(a=s(o),"string"===a){const t=[];let e=i/4;for(let n=0;n<d;n++){const r=p.HEAPU32[e++],a=n===d-1?void 0:p.HEAPU32[e]-r;t.push(p.UTF8ToString(r,a))}w.push([a,h,t])}else{const t=new(l(a))(d);new Uint8Array(t.buffer,t.byteOffset,t.byteLength).set(p.HEAPU8.subarray(i,i+t.byteLength)),w.push([a,h,t])}}finally{p.stackRestore(n),"string"===a&&i&&p._free(i),p._OrtReleaseTensor(e)}}if(0===f)return w;throw new Error(`failed to call OrtRun(). error code = ${f}.`)}finally{p.stackRestore(t)}}finally{_.forEach(p._OrtReleaseTensor),O.forEach(p._free),p._OrtReleaseRunOptions(v),w.forEach(p._free)}},e.endProfiling=t=>{const e=(0,o.getInstance)(),n=u.get(t);if(!n)throw new Error("invalid session id");const r=n[0],a=e._OrtEndProfiling(r);if(0===a)throw new Error("Can\'t get an profile file name");e._OrtFree(a)},e.extractTransferableBuffers=t=>{const e=[];for(const n of t){const t=n[2];!Array.isArray(t)&&t.buffer&&e.push(t.buffer)}return e}},361:function(t,e,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(t,e,n,r){void 0===r&&(r=n);var a=Object.getOwnPropertyDescriptor(e,n);a&&!("get"in a?!e.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,r,a)}:function(t,e,n,r){void 0===r&&(r=n),t[r]=e[n]}),a=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),i=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.prototype.hasOwnProperty.call(t,n)&&r(e,t,n);return a(e,t),e},o=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.dispose=e.getInstance=e.initializeWebAssembly=void 0;const u=i(n(449)),c=o(n(932)),s=n(474);let l,f=!1,p=!1,h=!1;const d=(t,e)=>e?t?"ort-wasm-simd-threaded.wasm":"ort-wasm-threaded.wasm":t?"ort-wasm-simd.wasm":"ort-wasm.wasm";e.initializeWebAssembly=async t=>{if(f)return Promise.resolve();if(p)throw new Error("multiple calls to \'initializeWebAssembly()\' detected.");if(h)throw new Error("previous call to \'initializeWebAssembly()\' failed.");p=!0;const e=t.initTimeout,r=t.numThreads,a=t.simd,i=r>1&&(()=>{try{return"undefined"!=typeof SharedArrayBuffer&&("undefined"!=typeof MessageChannel&&(new MessageChannel).port1.postMessage(new SharedArrayBuffer(1)),WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,5,4,1,3,1,1,10,11,1,9,0,65,0,254,16,2,0,26,11])))}catch(t){return!1}})(),o=a&&(()=>{try{return WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,10,30,1,28,0,65,0,253,15,253,12,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,253,186,1,26,11]))}catch(t){return!1}})(),y="string"==typeof t.wasmPaths?t.wasmPaths:void 0,b=d(!1,i),m=d(o,i),g="object"==typeof t.wasmPaths?t.wasmPaths[m]:void 0;let v=!1;const w=[];if(e>0&&w.push(new Promise((t=>{setTimeout((()=>{v=!0,t()}),e)}))),w.push(new Promise(((t,e)=>{const r=i?s:c.default,a={locateFile:(t,e)=>i&&t.endsWith(".worker.js")&&"undefined"!=typeof Blob?URL.createObjectURL(new Blob([n(154)],{type:"text/javascript"})):t===b?null!=g?g:(null!=y?y:e)+m:e+t};if(i)if("undefined"==typeof Blob)a.mainScriptUrlOrBlob=u.join("/","ort-wasm-threaded.js");else{const t=`var ortWasmThreaded=(function(){var _scriptDir;return ${r.toString()}})();`;a.mainScriptUrlOrBlob=new Blob([t],{type:"text/javascript"})}r(a).then((e=>{p=!1,f=!0,l=e,t()}),(t=>{p=!1,h=!0,e(t)}))}))),await Promise.race(w),v)throw new Error(`WebAssembly backend initializing failed due to timeout: ${e}ms`)},e.getInstance=()=>{if(f&&l)return l;throw new Error("WebAssembly is not initialized yet.")},e.dispose=()=>{var t;!f||p||h||(p=!0,null===(t=l.PThread)||void 0===t||t.terminateAllThreads(),l=void 0,p=!1,f=!1,h=!0)}},154:t=>{"use strict";t.exports=\'"use strict";var e={},t="object"==typeof process&&"object"==typeof process.versions&&"string"==typeof process.versions.node;if(t){var r=require("worker_threads"),a=r.parentPort;a.on("message",(e=>onmessage({data:e})));var o=require("fs");Object.assign(global,{self:global,require:require,Module:e,location:{href:__filename},Worker:r.Worker,importScripts:function(e){(0,eval)(o.readFileSync(e,"utf8"))},postMessage:function(e){a.postMessage(e)},performance:global.performance||{now:function(){return Date.now()}}})}var s=!1,n=[],i=function(){var e=Array.prototype.slice.call(arguments).join(" ");t?o.writeSync(2,e+"\\\\n"):console.error(e)};self.alert=function(){var t=Array.prototype.slice.call(arguments).join(" ");postMessage({cmd:"alert",text:t,threadId:e._pthread_self()})},e.instantiateWasm=(t,r)=>{var a=new WebAssembly.Instance(e.wasmModule,t);return r(a),e.wasmModule=null,a.exports},self.onunhandledrejection=e=>{throw e.reason??e},self.onmessage=t=>{try{if("load"===t.data.cmd){if(e.wasmModule=t.data.wasmModule,e.wasmMemory=t.data.wasmMemory,e.buffer=e.wasmMemory.buffer,e.ENVIRONMENT_IS_PTHREAD=!0,"string"==typeof t.data.urlOrBlob)importScripts(t.data.urlOrBlob);else{var r=URL.createObjectURL(t.data.urlOrBlob);importScripts(r),URL.revokeObjectURL(r)}ortWasmThreaded(e).then((function(t){e=t}))}else if("run"===t.data.cmd){e.__performance_now_clock_drift=performance.now()-t.data.time,e.__emscripten_thread_init(t.data.pthread_ptr,0,0,1),e.establishStackSpace(),e.PThread.receiveObjectTransfer(t.data),e.PThread.threadInitTLS(),s||(n.forEach((t=>{e.executeNotifiedProxyingQueue(t)})),n=[],s=!0);try{e.invokeEntryPoint(t.data.start_routine,t.data.arg)}catch(t){if("unwind"!=t){if(!(t instanceof e.ExitStatus))throw t;e.keepRuntimeAlive()||e.__emscripten_thread_exit(t.status)}}}else"cancel"===t.data.cmd?e._pthread_self()&&e.__emscripten_thread_exit(-1):"setimmediate"===t.data.target||("processProxyingQueue"===t.data.cmd?s?e.executeNotifiedProxyingQueue(t.data.queue):n.push(t.data.queue):(i("worker.js received unknown command "+t.data.cmd),i(t.data)))}catch(t){throw i("worker.js onmessage() captured an uncaught exception: "+t),t&&t.stack&&i(t.stack),e.__emscripten_thread_crashed&&e.__emscripten_thread_crashed(),t}};\\n\'},384:()=>{},993:()=>{},908:()=>{},953:()=>{},925:()=>{},449:()=>{}},e={};function n(r){var a=e[r];if(void 0!==a)return a.exports;var i=e[r]={exports:{}};return t[r].call(i.exports,i,i.exports,n),i.exports}n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),(()=>{"use strict";const t=n(349),e=n(361);self.onmessage=n=>{switch(n.data.type){case"init-wasm":(0,e.initializeWebAssembly)(n.data.in).then((()=>postMessage({type:"init-wasm"})),(t=>postMessage({type:"init-wasm",err:t})));break;case"init-ort":try{const{numThreads:e,loggingLevel:r}=n.data.in;(0,t.initOrt)(e,r),postMessage({type:"init-ort"})}catch(t){postMessage({type:"init-ort",err:t})}break;case"create_allocate":try{const{model:e}=n.data.in,r=(0,t.createSessionAllocate)(e);postMessage({type:"create_allocate",out:r})}catch(t){postMessage({type:"create_allocate",err:t})}break;case"create_finalize":try{const{modeldata:e,options:r}=n.data.in,a=(0,t.createSessionFinalize)(e,r);postMessage({type:"create_finalize",out:a})}catch(t){postMessage({type:"create_finalize",err:t})}break;case"create":try{const{model:e,options:r}=n.data.in,a=(0,t.createSession)(e,r);postMessage({type:"create",out:a})}catch(t){postMessage({type:"create",err:t})}break;case"release":try{const e=n.data.in;(0,t.releaseSession)(e),postMessage({type:"release"})}catch(t){postMessage({type:"release",err:t})}break;case"run":try{const{sessionId:e,inputIndices:r,inputs:a,outputIndices:i,options:o}=n.data.in,u=(0,t.run)(e,r,a,i,o);postMessage({type:"run",out:u},(0,t.extractTransferableBuffers)(u))}catch(t){postMessage({type:"run",err:t})}break;case"end-profiling":try{const e=n.data.in;(0,t.endProfiling)(e),postMessage({type:"end-profiling"})}catch(t){postMessage({type:"end-profiling",err:t})}}}})()})();\n',"Worker",void 0,void 0)}},477:n=>{n.exports=function(e,t,r,u){var T=self||window;try{try{var d;try{d=new T.Blob([e])}catch{(d=new(T.BlobBuilder||T.WebKitBlobBuilder||T.MozBlobBuilder||T.MSBlobBuilder)).append(e),d=d.getBlob()}var A=T.URL||T.webkitURL,le=A.createObjectURL(d),G=new T[t](le,r);return A.revokeObjectURL(le),G}catch{return new T[t]("data:application/javascript,".concat(encodeURIComponent(e)),r)}}catch{if(!u)throw Error("Inline worker is not supported");return new T[t](u,r)}}},4154:n=>{n.exports=`"use strict";var e={},t="object"==typeof process&&"object"==typeof process.versions&&"string"==typeof process.versions.node;if(t){var r=require("worker_threads"),a=r.parentPort;a.on("message",(e=>onmessage({data:e})));var o=require("fs");Object.assign(global,{self:global,require:require,Module:e,location:{href:__filename},Worker:r.Worker,importScripts:function(e){(0,eval)(o.readFileSync(e,"utf8"))},postMessage:function(e){a.postMessage(e)},performance:global.performance||{now:function(){return Date.now()}}})}var s=!1,n=[],i=function(){var e=Array.prototype.slice.call(arguments).join(" ");t?o.writeSync(2,e+"\\n"):console.error(e)};self.alert=function(){var t=Array.prototype.slice.call(arguments).join(" ");postMessage({cmd:"alert",text:t,threadId:e._pthread_self()})},e.instantiateWasm=(t,r)=>{var a=new WebAssembly.Instance(e.wasmModule,t);return r(a),e.wasmModule=null,a.exports},self.onunhandledrejection=e=>{throw e.reason??e},self.onmessage=t=>{try{if("load"===t.data.cmd){if(e.wasmModule=t.data.wasmModule,e.wasmMemory=t.data.wasmMemory,e.buffer=e.wasmMemory.buffer,e.ENVIRONMENT_IS_PTHREAD=!0,"string"==typeof t.data.urlOrBlob)importScripts(t.data.urlOrBlob);else{var r=URL.createObjectURL(t.data.urlOrBlob);importScripts(r),URL.revokeObjectURL(r)}ortWasmThreaded(e).then((function(t){e=t}))}else if("run"===t.data.cmd){e.__performance_now_clock_drift=performance.now()-t.data.time,e.__emscripten_thread_init(t.data.pthread_ptr,0,0,1),e.establishStackSpace(),e.PThread.receiveObjectTransfer(t.data),e.PThread.threadInitTLS(),s||(n.forEach((t=>{e.executeNotifiedProxyingQueue(t)})),n=[],s=!0);try{e.invokeEntryPoint(t.data.start_routine,t.data.arg)}catch(t){if("unwind"!=t){if(!(t instanceof e.ExitStatus))throw t;e.keepRuntimeAlive()||e.__emscripten_thread_exit(t.status)}}}else"cancel"===t.data.cmd?e._pthread_self()&&e.__emscripten_thread_exit(-1):"setimmediate"===t.data.target||("processProxyingQueue"===t.data.cmd?s?e.executeNotifiedProxyingQueue(t.data.queue):n.push(t.data.queue):(i("worker.js received unknown command "+t.data.cmd),i(t.data)))}catch(t){throw i("worker.js onmessage() captured an uncaught exception: "+t),t&&t.stack&&i(t.stack),e.__emscripten_thread_crashed&&e.__emscripten_thread_crashed(),t}};
`},1670:n=>{n.exports=__WEBPACK_EXTERNAL_MODULE__1670__},7067:()=>{},1296:()=>{},1384:()=>{},3993:()=>{},908:()=>{},6953:()=>{},9925:()=>{},2806:()=>{},6449:()=>{},2850:()=>{},5381:()=>{},5686:(n,e,t)=>{t.r(e),t.d(e,{flatbuffers:()=>r});var r={};r.Offset,r.Table,r.SIZEOF_SHORT=2,r.SIZEOF_INT=4,r.FILE_IDENTIFIER_LENGTH=4,r.SIZE_PREFIX_LENGTH=4,r.Encoding={UTF8_BYTES:1,UTF16_STRING:2},r.int32=new Int32Array(2),r.float32=new Float32Array(r.int32.buffer),r.float64=new Float64Array(r.int32.buffer),r.isLittleEndian=new Uint16Array(new Uint8Array([1,0]).buffer)[0]===1,r.Long=function(u,T){this.low=0|u,this.high=0|T},r.Long.create=function(u,T){return u==0&&T==0?r.Long.ZERO:new r.Long(u,T)},r.Long.prototype.toFloat64=function(){return(this.low>>>0)+4294967296*this.high},r.Long.prototype.equals=function(u){return this.low==u.low&&this.high==u.high},r.Long.ZERO=new r.Long(0,0),r.Builder=function(u){if(u)T=u;else var T=1024;this.bb=r.ByteBuffer.allocate(T),this.space=T,this.minalign=1,this.vtable=null,this.vtable_in_use=0,this.isNested=!1,this.object_start=0,this.vtables=[],this.vector_num_elems=0,this.force_defaults=!1},r.Builder.prototype.clear=function(){this.bb.clear(),this.space=this.bb.capacity(),this.minalign=1,this.vtable=null,this.vtable_in_use=0,this.isNested=!1,this.object_start=0,this.vtables=[],this.vector_num_elems=0,this.force_defaults=!1},r.Builder.prototype.forceDefaults=function(u){this.force_defaults=u},r.Builder.prototype.dataBuffer=function(){return this.bb},r.Builder.prototype.asUint8Array=function(){return this.bb.bytes().subarray(this.bb.position(),this.bb.position()+this.offset())},r.Builder.prototype.prep=function(u,T){u>this.minalign&&(this.minalign=u);for(var d=1+~(this.bb.capacity()-this.space+T)&u-1;this.space<d+u+T;){var A=this.bb.capacity();this.bb=r.Builder.growByteBuffer(this.bb),this.space+=this.bb.capacity()-A}this.pad(d)},r.Builder.prototype.pad=function(u){for(var T=0;T<u;T++)this.bb.writeInt8(--this.space,0)},r.Builder.prototype.writeInt8=function(u){this.bb.writeInt8(this.space-=1,u)},r.Builder.prototype.writeInt16=function(u){this.bb.writeInt16(this.space-=2,u)},r.Builder.prototype.writeInt32=function(u){this.bb.writeInt32(this.space-=4,u)},r.Builder.prototype.writeInt64=function(u){this.bb.writeInt64(this.space-=8,u)},r.Builder.prototype.writeFloat32=function(u){this.bb.writeFloat32(this.space-=4,u)},r.Builder.prototype.writeFloat64=function(u){this.bb.writeFloat64(this.space-=8,u)},r.Builder.prototype.addInt8=function(u){this.prep(1,0),this.writeInt8(u)},r.Builder.prototype.addInt16=function(u){this.prep(2,0),this.writeInt16(u)},r.Builder.prototype.addInt32=function(u){this.prep(4,0),this.writeInt32(u)},r.Builder.prototype.addInt64=function(u){this.prep(8,0),this.writeInt64(u)},r.Builder.prototype.addFloat32=function(u){this.prep(4,0),this.writeFloat32(u)},r.Builder.prototype.addFloat64=function(u){this.prep(8,0),this.writeFloat64(u)},r.Builder.prototype.addFieldInt8=function(u,T,d){(this.force_defaults||T!=d)&&(this.addInt8(T),this.slot(u))},r.Builder.prototype.addFieldInt16=function(u,T,d){(this.force_defaults||T!=d)&&(this.addInt16(T),this.slot(u))},r.Builder.prototype.addFieldInt32=function(u,T,d){(this.force_defaults||T!=d)&&(this.addInt32(T),this.slot(u))},r.Builder.prototype.addFieldInt64=function(u,T,d){!this.force_defaults&&T.equals(d)||(this.addInt64(T),this.slot(u))},r.Builder.prototype.addFieldFloat32=function(u,T,d){(this.force_defaults||T!=d)&&(this.addFloat32(T),this.slot(u))},r.Builder.prototype.addFieldFloat64=function(u,T,d){(this.force_defaults||T!=d)&&(this.addFloat64(T),this.slot(u))},r.Builder.prototype.addFieldOffset=function(u,T,d){(this.force_defaults||T!=d)&&(this.addOffset(T),this.slot(u))},r.Builder.prototype.addFieldStruct=function(u,T,d){T!=d&&(this.nested(T),this.slot(u))},r.Builder.prototype.nested=function(u){if(u!=this.offset())throw new Error("FlatBuffers: struct must be serialized inline.")},r.Builder.prototype.notNested=function(){if(this.isNested)throw new Error("FlatBuffers: object serialization must not be nested.")},r.Builder.prototype.slot=function(u){this.vtable[u]=this.offset()},r.Builder.prototype.offset=function(){return this.bb.capacity()-this.space},r.Builder.growByteBuffer=function(u){var T=u.capacity();if(3221225472&T)throw new Error("FlatBuffers: cannot grow buffer beyond 2 gigabytes.");var d=T<<1,A=r.ByteBuffer.allocate(d);return A.setPosition(d-T),A.bytes().set(u.bytes(),d-T),A},r.Builder.prototype.addOffset=function(u){this.prep(r.SIZEOF_INT,0),this.writeInt32(this.offset()-u+r.SIZEOF_INT)},r.Builder.prototype.startObject=function(u){this.notNested(),this.vtable==null&&(this.vtable=[]),this.vtable_in_use=u;for(var T=0;T<u;T++)this.vtable[T]=0;this.isNested=!0,this.object_start=this.offset()},r.Builder.prototype.endObject=function(){if(this.vtable==null||!this.isNested)throw new Error("FlatBuffers: endObject called without startObject");this.addInt32(0);for(var u=this.offset(),T=this.vtable_in_use-1;T>=0&&this.vtable[T]==0;T--);for(var d=T+1;T>=0;T--)this.addInt16(this.vtable[T]!=0?u-this.vtable[T]:0);this.addInt16(u-this.object_start);var A=(d+2)*r.SIZEOF_SHORT;this.addInt16(A);var le=0,G=this.space;e:for(T=0;T<this.vtables.length;T++){var B=this.bb.capacity()-this.vtables[T];if(A==this.bb.readInt16(B)){for(var o=r.SIZEOF_SHORT;o<A;o+=r.SIZEOF_SHORT)if(this.bb.readInt16(G+o)!=this.bb.readInt16(B+o))continue e;le=this.vtables[T];break}}return le?(this.space=this.bb.capacity()-u,this.bb.writeInt32(this.space,le-u)):(this.vtables.push(this.offset()),this.bb.writeInt32(this.bb.capacity()-u,this.offset()-u)),this.isNested=!1,u},r.Builder.prototype.finish=function(u,T,d){var A=d?r.SIZE_PREFIX_LENGTH:0;if(T){var le=T;if(this.prep(this.minalign,r.SIZEOF_INT+r.FILE_IDENTIFIER_LENGTH+A),le.length!=r.FILE_IDENTIFIER_LENGTH)throw new Error("FlatBuffers: file identifier must be length "+r.FILE_IDENTIFIER_LENGTH);for(var G=r.FILE_IDENTIFIER_LENGTH-1;G>=0;G--)this.writeInt8(le.charCodeAt(G))}this.prep(this.minalign,r.SIZEOF_INT+A),this.addOffset(u),A&&this.addInt32(this.bb.capacity()-this.space),this.bb.setPosition(this.space)},r.Builder.prototype.finishSizePrefixed=function(u,T){this.finish(u,T,!0)},r.Builder.prototype.requiredField=function(u,T){var d=this.bb.capacity()-u,A=d-this.bb.readInt32(d);if(this.bb.readInt16(A+T)==0)throw new Error("FlatBuffers: field "+T+" must be set")},r.Builder.prototype.startVector=function(u,T,d){this.notNested(),this.vector_num_elems=T,this.prep(r.SIZEOF_INT,u*T),this.prep(d,u*T)},r.Builder.prototype.endVector=function(){return this.writeInt32(this.vector_num_elems),this.offset()},r.Builder.prototype.createString=function(u){if(u instanceof Uint8Array)var T=u;else{T=[];for(var d=0;d<u.length;){var A,le=u.charCodeAt(d++);(A=le<55296||le>=56320?le:(le<<10)+u.charCodeAt(d++)+-56613888)<128?T.push(A):(A<2048?T.push(A>>6&31|192):(A<65536?T.push(A>>12&15|224):T.push(A>>18&7|240,A>>12&63|128),T.push(A>>6&63|128)),T.push(63&A|128))}}this.addInt8(0),this.startVector(1,T.length,1),this.bb.setPosition(this.space-=T.length),d=0;for(var G=this.space,B=this.bb.bytes();d<T.length;d++)B[G++]=T[d];return this.endVector()},r.Builder.prototype.createLong=function(u,T){return r.Long.create(u,T)},r.ByteBuffer=function(u){this.bytes_=u,this.position_=0},r.ByteBuffer.allocate=function(u){return new r.ByteBuffer(new Uint8Array(u))},r.ByteBuffer.prototype.clear=function(){this.position_=0},r.ByteBuffer.prototype.bytes=function(){return this.bytes_},r.ByteBuffer.prototype.position=function(){return this.position_},r.ByteBuffer.prototype.setPosition=function(u){this.position_=u},r.ByteBuffer.prototype.capacity=function(){return this.bytes_.length},r.ByteBuffer.prototype.readInt8=function(u){return this.readUint8(u)<<24>>24},r.ByteBuffer.prototype.readUint8=function(u){return this.bytes_[u]},r.ByteBuffer.prototype.readInt16=function(u){return this.readUint16(u)<<16>>16},r.ByteBuffer.prototype.readUint16=function(u){return this.bytes_[u]|this.bytes_[u+1]<<8},r.ByteBuffer.prototype.readInt32=function(u){return this.bytes_[u]|this.bytes_[u+1]<<8|this.bytes_[u+2]<<16|this.bytes_[u+3]<<24},r.ByteBuffer.prototype.readUint32=function(u){return this.readInt32(u)>>>0},r.ByteBuffer.prototype.readInt64=function(u){return new r.Long(this.readInt32(u),this.readInt32(u+4))},r.ByteBuffer.prototype.readUint64=function(u){return new r.Long(this.readUint32(u),this.readUint32(u+4))},r.ByteBuffer.prototype.readFloat32=function(u){return r.int32[0]=this.readInt32(u),r.float32[0]},r.ByteBuffer.prototype.readFloat64=function(u){return r.int32[r.isLittleEndian?0:1]=this.readInt32(u),r.int32[r.isLittleEndian?1:0]=this.readInt32(u+4),r.float64[0]},r.ByteBuffer.prototype.writeInt8=function(u,T){this.bytes_[u]=T},r.ByteBuffer.prototype.writeUint8=function(u,T){this.bytes_[u]=T},r.ByteBuffer.prototype.writeInt16=function(u,T){this.bytes_[u]=T,this.bytes_[u+1]=T>>8},r.ByteBuffer.prototype.writeUint16=function(u,T){this.bytes_[u]=T,this.bytes_[u+1]=T>>8},r.ByteBuffer.prototype.writeInt32=function(u,T){this.bytes_[u]=T,this.bytes_[u+1]=T>>8,this.bytes_[u+2]=T>>16,this.bytes_[u+3]=T>>24},r.ByteBuffer.prototype.writeUint32=function(u,T){this.bytes_[u]=T,this.bytes_[u+1]=T>>8,this.bytes_[u+2]=T>>16,this.bytes_[u+3]=T>>24},r.ByteBuffer.prototype.writeInt64=function(u,T){this.writeInt32(u,T.low),this.writeInt32(u+4,T.high)},r.ByteBuffer.prototype.writeUint64=function(u,T){this.writeUint32(u,T.low),this.writeUint32(u+4,T.high)},r.ByteBuffer.prototype.writeFloat32=function(u,T){r.float32[0]=T,this.writeInt32(u,r.int32[0])},r.ByteBuffer.prototype.writeFloat64=function(u,T){r.float64[0]=T,this.writeInt32(u,r.int32[r.isLittleEndian?0:1]),this.writeInt32(u+4,r.int32[r.isLittleEndian?1:0])},r.ByteBuffer.prototype.getBufferIdentifier=function(){if(this.bytes_.length<this.position_+r.SIZEOF_INT+r.FILE_IDENTIFIER_LENGTH)throw new Error("FlatBuffers: ByteBuffer is too short to contain an identifier.");for(var u="",T=0;T<r.FILE_IDENTIFIER_LENGTH;T++)u+=String.fromCharCode(this.readInt8(this.position_+r.SIZEOF_INT+T));return u},r.ByteBuffer.prototype.__offset=function(u,T){var d=u-this.readInt32(u);return T<this.readInt16(d)?this.readInt16(d+T):0},r.ByteBuffer.prototype.__union=function(u,T){return u.bb_pos=T+this.readInt32(T),u.bb=this,u},r.ByteBuffer.prototype.__string=function(u,T){u+=this.readInt32(u);var d=this.readInt32(u),A="",le=0;if(u+=r.SIZEOF_INT,T===r.Encoding.UTF8_BYTES)return this.bytes_.subarray(u,u+d);for(;le<d;){var G,B=this.readUint8(u+le++);if(B<192)G=B;else{var o=this.readUint8(u+le++);if(B<224)G=(31&B)<<6|63&o;else{var i=this.readUint8(u+le++);G=B<240?(15&B)<<12|(63&o)<<6|63&i:(7&B)<<18|(63&o)<<12|(63&i)<<6|63&this.readUint8(u+le++)}}G<65536?A+=String.fromCharCode(G):(G-=65536,A+=String.fromCharCode(55296+(G>>10),56320+(1023&G)))}return A},r.ByteBuffer.prototype.__indirect=function(u){return u+this.readInt32(u)},r.ByteBuffer.prototype.__vector=function(u){return u+this.readInt32(u)+r.SIZEOF_INT},r.ByteBuffer.prototype.__vector_len=function(u){return this.readInt32(u+this.readInt32(u))},r.ByteBuffer.prototype.__has_identifier=function(u){if(u.length!=r.FILE_IDENTIFIER_LENGTH)throw new Error("FlatBuffers: file identifier must be length "+r.FILE_IDENTIFIER_LENGTH);for(var T=0;T<r.FILE_IDENTIFIER_LENGTH;T++)if(u.charCodeAt(T)!=this.readInt8(this.position_+r.SIZEOF_INT+T))return!1;return!0},r.ByteBuffer.prototype.createLong=function(u,T){return r.Long.create(u,T)}}},__webpack_module_cache__={};function __webpack_require__(n){var e=__webpack_module_cache__[n];if(e!==void 0)return e.exports;var t=__webpack_module_cache__[n]={exports:{}};return __webpack_modules__[n].call(t.exports,t,t.exports,__webpack_require__),t.exports}__webpack_require__.n=n=>{var e=n&&n.__esModule?()=>n.default:()=>n;return __webpack_require__.d(e,{a:e}),e},__webpack_require__.d=(n,e)=>{for(var t in e)__webpack_require__.o(e,t)&&!__webpack_require__.o(n,t)&&Object.defineProperty(n,t,{enumerable:!0,get:e[t]})},__webpack_require__.g=(function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch{if(typeof window=="object")return window}})(),__webpack_require__.o=(n,e)=>Object.prototype.hasOwnProperty.call(n,e),__webpack_require__.r=n=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(n,"__esModule",{value:!0})};var __webpack_exports__=__webpack_require__(6018);return __webpack_exports__})()))})(ortWeb_min$1)),ortWeb_min$1.exports}var ortWeb_minExports=requireOrtWeb_min();const ortWeb_min=getDefaultExportFromCjs(ortWeb_minExports),ONNX_WEB=_mergeNamespaces({__proto__:null,default:ortWeb_min},[ortWeb_minExports]);let ONNX;const executionProviders=["wasm"];var Gh;typeof process<"u"&&((Gh=process==null?void 0:process.release)==null?void 0:Gh.name)==="node"?(ONNX=sharp??ONNX_NODE,executionProviders.unshift("cpu")):(ONNX=ortWeb_min??ONNX_WEB,typeof navigator<"u"&&/iP(hone|od|ad).+16_4.+AppleWebKit/.test(navigator.userAgent)&&(ONNX.env.wasm.simd=!1));const{env:onnx_env}=ONNX,VERSION="2.14.0",WEB_CACHE_AVAILABLE=typeof self<"u"&&"caches"in self,FS_AVAILABLE=!isEmpty(sharp),PATH_AVAILABLE=!isEmpty(sharp),RUNNING_LOCALLY=FS_AVAILABLE&&PATH_AVAILABLE,__dirname$1=RUNNING_LOCALLY?sharp.dirname(sharp.dirname(sharp.fileURLToPath(import.meta.url))):"./",DEFAULT_CACHE_DIR=RUNNING_LOCALLY?sharp.join(__dirname$1,"/.cache/"):null,DEFAULT_LOCAL_MODEL_PATH="/models/",localModelPath=RUNNING_LOCALLY?sharp.join(__dirname$1,DEFAULT_LOCAL_MODEL_PATH):DEFAULT_LOCAL_MODEL_PATH;onnx_env.wasm.wasmPaths=RUNNING_LOCALLY?sharp.join(__dirname$1,"/dist/"):`https://cdn.jsdelivr.net/npm/@xenova/transformers@${VERSION}/dist/`;const env$1={version:VERSION,remoteHost:"https://huggingface.co/",remotePathTemplate:"{model}/resolve/{revision}/",allowLocalModels:!0,localModelPath,useFS:FS_AVAILABLE,useBrowserCache:WEB_CACHE_AVAILABLE,useFSCache:FS_AVAILABLE,cacheDir:DEFAULT_CACHE_DIR};function isEmpty(n){return Object.keys(n).length===0}var define_process_env_default={};globalThis.ReadableStream||(globalThis.ReadableStream=sharp.ReadableStream);class FileResponse{constructor(e){Mt(this,"_CONTENT_TYPE_MAP",{txt:"text/plain",html:"text/html",css:"text/css",js:"text/javascript",json:"application/json",png:"image/png",jpg:"image/jpeg",jpeg:"image/jpeg",gif:"image/gif"});if(this.filePath=e,this.headers=new Headers,this.exists=sharp.existsSync(e),this.exists){this.status=200,this.statusText="OK";let t=sharp.statSync(e);this.headers.set("content-length",t.size.toString()),this.updateContentType();let r=this;this.body=new ReadableStream({start(u){r.arrayBuffer().then(T=>{u.enqueue(new Uint8Array(T)),u.close()})}})}else this.status=404,this.statusText="Not Found",this.body=null}updateContentType(){const e=this.filePath.toString().split(".").pop().toLowerCase();this.headers.set("content-type",this._CONTENT_TYPE_MAP[e]??"application/octet-stream")}clone(){let e=new FileResponse(this.filePath);return e.exists=this.exists,e.status=this.status,e.statusText=this.statusText,e.headers=new Headers(this.headers),e}async arrayBuffer(){return(await sharp.promises.readFile(this.filePath)).buffer}async blob(){const e=await sharp.promises.readFile(this.filePath);return new Blob([e],{type:this.headers.get("content-type")})}async text(){return await sharp.promises.readFile(this.filePath,"utf8")}async json(){return JSON.parse(await this.text())}}function isValidHttpUrl(n,e=null){let t;try{t=new URL(n)}catch{return!1}return e&&!e.includes(t.hostname)?!1:t.protocol==="http:"||t.protocol==="https:"}async function getFile(n){var e;if(env$1.useFS&&!isValidHttpUrl(n))return new FileResponse(n);if(typeof process<"u"&&((e=process==null?void 0:process.release)==null?void 0:e.name)==="node"){const t=!!(define_process_env_default!=null&&define_process_env_default.TESTING_REMOTELY),r=env$1.version,u=new Headers;if(u.set("User-Agent",`transformers.js/${r}; is_ci/${t};`),isValidHttpUrl(n,["huggingface.co","hf.co"])){const d=(define_process_env_default==null?void 0:define_process_env_default.HF_TOKEN)??(define_process_env_default==null?void 0:define_process_env_default.HF_ACCESS_TOKEN);d&&u.set("Authorization",`Bearer ${d}`)}return fetch(n,{headers:u})}else return fetch(n)}const ERROR_MAPPING={400:"Bad request error occurred while trying to load file",401:"Unauthorized access to file",403:"Forbidden access to file",404:"Could not locate file",408:"Request timeout error occurred while trying to load file",500:"Internal server error error occurred while trying to load file",502:"Bad gateway error occurred while trying to load file",503:"Service unavailable error occurred while trying to load file",504:"Gateway timeout error occurred while trying to load file"};function handleError(n,e,t){if(!t)return null;const r=ERROR_MAPPING[n]??`Error (${n}) occurred while trying to load file`;throw Error(`${r}: "${e}".`)}class FileCache{constructor(e){this.path=e}async match(e){let t=sharp.join(this.path,e),r=new FileResponse(t);if(r.exists)return r}async put(e,t){const r=Buffer.from(await t.arrayBuffer());let u=sharp.join(this.path,e);try{await sharp.promises.mkdir(sharp.dirname(u),{recursive:!0}),await sharp.promises.writeFile(u,r)}catch(T){console.warn("An error occurred while writing the file to cache:",T)}}}async function tryCache(n,...e){for(let t of e)try{let r=await n.match(t);if(r)return r}catch{continue}}async function getModelFile(n,e,t=!0,r={}){if(!env$1.allowLocalModels&&r.local_files_only)throw Error("Invalid configuration detected: local models are disabled (`env.allowLocalModels=false`) but you have requested to only use local models (`local_files_only=true`).");dispatchCallback(r.progress_callback,{status:"initiate",name:n,file:e});let u;if(!u&&env$1.useBrowserCache){if(typeof caches>"u")throw Error("Browser cache is not available in this environment.");try{u=await caches.open("transformers-cache")}catch(pe){console.warn("An error occurred while opening the browser cache:",pe)}}!u&&env$1.useFSCache&&(u=new FileCache(r.cache_dir??env$1.cacheDir));const T=r.revision??"main";let d=pathJoin(n,e),A=pathJoin(env$1.localModelPath,d),le=pathJoin(env$1.remoteHost,env$1.remotePathTemplate.replaceAll("{model}",n).replaceAll("{revision}",encodeURIComponent(T)),e),G=T==="main"?d:pathJoin(n,T,e),B,o=u instanceof FileCache?G:le,i=!1,w;u&&(w=await tryCache(u,A,o));const ae=w!==void 0;if(w===void 0){if(env$1.allowLocalModels)if(isValidHttpUrl(d)){if(r.local_files_only)throw new Error(`\`local_files_only=true\`, but attempted to load a remote file from: ${d}.`)}else try{w=await getFile(A),B=A}catch(ge){console.warn(`Unable to load from local path "${A}": "${ge}"`)}if(w===void 0||w.status===404){if(r.local_files_only){if(t)throw Error(`\`local_files_only=true\` or \`env.allowRemoteModels=false\` and file was not found locally at "${A}".`);return null}if(w=await getFile(le),w.status!==200)return handleError(w.status,le,t);B=o}i=u&&typeof Response<"u"&&w instanceof Response&&w.status===200}dispatchCallback(r.progress_callback,{status:"download",name:n,file:e});const ue={status:"progress",name:n,file:e};let he;return r.progress_callback?ae&&typeof navigator<"u"&&/firefox/i.test(navigator.userAgent)?(he=new Uint8Array(await w.arrayBuffer()),dispatchCallback(r.progress_callback,{...ue,progress:100,loaded:he.length,total:he.length})):he=await readResponse(w,pe=>{dispatchCallback(r.progress_callback,{...ue,...pe})}):he=new Uint8Array(await w.arrayBuffer()),i&&B&&await u.match(B)===void 0&&await u.put(B,new Response(he,{headers:w.headers})).catch(pe=>{console.warn(`Unable to add response to browser cache: ${pe}.`)}),dispatchCallback(r.progress_callback,{status:"done",name:n,file:e}),he}async function getModelJSON(n,e,t=!0,r={}){let u=await getModelFile(n,e,t,r);if(u===null)return{};let d=new TextDecoder("utf-8").decode(u);return JSON.parse(d)}async function readResponse(n,e){const t=n.headers.get("Content-Length");t===null&&console.warn("Unable to determine content-length from response headers. Will expand buffer when needed.");let r=parseInt(t??"0"),u=new Uint8Array(r),T=0;const d=n.body.getReader();async function A(){const{done:le,value:G}=await d.read();if(le)return;let B=T+G.length;if(B>r){r=B;let i=new Uint8Array(r);i.set(u),u=i}u.set(G,T),T=B;const o=T/r*100;return e({progress:o,loaded:T,total:r}),A()}return await A(),u}function pathJoin(...n){return n=n.map((e,t)=>(t&&(e=e.replace(new RegExp("^/"),"")),t!==n.length-1&&(e=e.replace(new RegExp("/$"),"")),e)),n.join("/")}function interpolate_data(n,[e,t,r],[u,T],d="bilinear",A=!1){const le=T/r,G=u/t,B=new n.constructor(u*T*e),o=t*r,i=u*T;for(let w=0;w<u;++w)for(let ae=0;ae<T;++ae){const ue=w*T+ae,he=(ae+.5)/le-.5,pe=(w+.5)/G-.5;let ge=Math.floor(he),be=Math.floor(pe);const ve=Math.min(ge+1,r-1),we=Math.min(be+1,t-1);ge=Math.max(ge,0),be=Math.max(be,0);const Se=he-ge,Ae=pe-be,Re=(1-Se)*(1-Ae),Te=Se*(1-Ae),Ce=(1-Se)*Ae,Ve=Se*Ae,$e=be*r,He=we*r,De=$e+ge,Xe=$e+ve,Me=He+ge,je=He+ve;for(let it=0;it<e;++it){const Ke=it*o;B[it*i+ue]=Re*n[Ke+De]+Te*n[Ke+Xe]+Ce*n[Ke+Me]+Ve*n[Ke+je]}}return B}function transpose_data(n,e,t){const r=new Array(t.length),u=new Array(t.length);for(let A=t.length-1,le=1;A>=0;--A)u[A]=le,r[A]=e[t[A]],le*=r[A];const T=t.map((A,le)=>u[t.indexOf(le)]),d=new n.constructor(n.length);for(let A=0;A<n.length;++A){let le=0;for(let G=e.length-1,B=A;G>=0;--G)le+=B%e[G]*T[G],B=Math.floor(B/e[G]);d[le]=n[A]}return[d,r]}function softmax(n){const e=max(n)[0],t=n.map(T=>Math.exp(T-e)),r=t.reduce((T,d)=>T+d,0);return t.map(T=>T/r)}function log_softmax(n){return softmax(n).map(r=>Math.log(r))}function getTopItems(n,e=0){return n=Array.from(n).map((t,r)=>[r,t]).sort((t,r)=>r[1]-t[1]),e!==null&&e>0&&(n=n.slice(0,e)),n}function min(n){if(n.length===0)throw Error("Array must not be empty");let e=n[0],t=0;for(let r=1;r<n.length;++r)n[r]<e&&(e=n[r],t=r);return[e,t]}function max(n){if(n.length===0)throw Error("Array must not be empty");let e=n[0],t=0;for(let r=1;r<n.length;++r)n[r]>e&&(e=n[r],t=r);return[Number(e),t]}function isPowerOfTwo(n){return n>0&&(n&n-1)===0}class P2FFT{constructor(e){if(this.size=e|0,this.size<=1||!isPowerOfTwo(this.size))throw new Error("FFT size must be a power of two larger than 1");this._csize=e<<1,this.table=new Float64Array(this.size*2);for(let r=0;r<this.table.length;r+=2){const u=Math.PI*r/this.size;this.table[r]=Math.cos(u),this.table[r+1]=-Math.sin(u)}let t=0;for(let r=1;this.size>r;r<<=1)++t;this._width=t%2===0?t-1:t,this._bitrev=new Int32Array(1<<this._width);for(let r=0;r<this._bitrev.length;++r){this._bitrev[r]=0;for(let u=0;u<this._width;u+=2){const T=this._width-u-2;this._bitrev[r]|=(r>>>u&3)<<T}}}createComplexArray(){return new Float64Array(this._csize)}fromComplexArray(e,t){const r=t||new Array(e.length>>>1);for(let u=0;u<e.length;u+=2)r[u>>>1]=e[u];return r}toComplexArray(e,t){const r=t||this.createComplexArray();for(let u=0;u<r.length;u+=2)r[u]=e[u>>>1],r[u+1]=0;return r}completeSpectrum(e){const t=this._csize,r=t>>>1;for(let u=2;u<r;u+=2)e[t-u]=e[u],e[t-u+1]=-e[u+1]}transform(e,t){if(e===t)throw new Error("Input and output buffers must be different");this._transform4(e,t,1)}realTransform(e,t){if(e===t)throw new Error("Input and output buffers must be different");this._realTransform4(e,t,1)}inverseTransform(e,t){if(e===t)throw new Error("Input and output buffers must be different");this._transform4(e,t,-1);for(let r=0;r<e.length;++r)e[r]/=this.size}_transform4(e,t,r){const u=this._csize;let d=1<<this._width,A=u/d<<1,le,G;const B=this._bitrev;if(A===4)for(le=0,G=0;le<u;le+=A,++G){const o=B[G];this._singleTransform2(t,e,le,o,d)}else for(le=0,G=0;le<u;le+=A,++G){const o=B[G];this._singleTransform4(t,e,le,o,d,r)}for(d>>=2;d>=2;d>>=2){A=u/d<<1;const o=A>>>2;for(le=0;le<u;le+=A){const i=le+o-1;for(let w=le,ae=0;w<i;w+=2,ae+=d){const ue=w,he=ue+o,pe=he+o,ge=pe+o,be=e[ue],ve=e[ue+1],we=e[he],Se=e[he+1],Ae=e[pe],Re=e[pe+1],Te=e[ge],Ce=e[ge+1],Ve=this.table[ae],$e=r*this.table[ae+1],He=we*Ve-Se*$e,De=we*$e+Se*Ve,Xe=this.table[2*ae],Me=r*this.table[2*ae+1],je=Ae*Xe-Re*Me,it=Ae*Me+Re*Xe,Ke=this.table[3*ae],qe=r*this.table[3*ae+1],Pe=Te*Ke-Ce*qe,et=Te*qe+Ce*Ke,Je=be+je,at=ve+it,tt=be-je,Tt=ve-it,vt=He+Pe,Dt=De+et,Pt=r*(He-Pe),jt=r*(De-et);e[ue]=Je+vt,e[ue+1]=at+Dt,e[he]=tt+jt,e[he+1]=Tt-Pt,e[pe]=Je-vt,e[pe+1]=at-Dt,e[ge]=tt-jt,e[ge+1]=Tt+Pt}}}}_singleTransform2(e,t,r,u,T){const d=e[u],A=e[u+1],le=e[u+T],G=e[u+T+1];t[r]=d+le,t[r+1]=A+G,t[r+2]=d-le,t[r+3]=A-G}_singleTransform4(e,t,r,u,T,d){const A=T*2,le=T*3,G=e[u],B=e[u+1],o=e[u+T],i=e[u+T+1],w=e[u+A],ae=e[u+A+1],ue=e[u+le],he=e[u+le+1],pe=G+w,ge=B+ae,be=G-w,ve=B-ae,we=o+ue,Se=i+he,Ae=d*(o-ue),Re=d*(i-he);t[r]=pe+we,t[r+1]=ge+Se,t[r+2]=be+Re,t[r+3]=ve-Ae,t[r+4]=pe-we,t[r+5]=ge-Se,t[r+6]=be-Re,t[r+7]=ve+Ae}_realTransform4(e,t,r){const u=this._csize;let d=1<<this._width,A=u/d<<1,le,G;const B=this._bitrev;if(A===4)for(le=0,G=0;le<u;le+=A,++G){const o=B[G];this._singleRealTransform2(t,e,le,o>>>1,d>>>1)}else for(le=0,G=0;le<u;le+=A,++G){const o=B[G];this._singleRealTransform4(t,e,le,o>>>1,d>>>1,r)}for(d>>=2;d>=2;d>>=2){A=u/d<<1;const o=A>>>2;for(le=0;le<u;le+=A){const i=le+o-1;for(let w=le,ae=0;w<i;w+=2,ae+=d){const ue=w,he=ue+o,pe=he+o,ge=pe+o,be=e[ue],ve=e[ue+1],we=e[he],Se=e[he+1],Ae=e[pe],Re=e[pe+1],Te=e[ge],Ce=e[ge+1],Ve=this.table[ae],$e=r*this.table[ae+1],He=we*Ve-Se*$e,De=we*$e+Se*Ve,Xe=this.table[2*ae],Me=r*this.table[2*ae+1],je=Ae*Xe-Re*Me,it=Ae*Me+Re*Xe,Ke=this.table[3*ae],qe=r*this.table[3*ae+1],Pe=Te*Ke-Ce*qe,et=Te*qe+Ce*Ke,Je=be+je,at=ve+it,tt=be-je,Tt=ve-it,vt=He+Pe,Dt=De+et,Pt=r*(He-Pe),jt=r*(De-et);e[ue]=Je+vt,e[ue+1]=at+Dt,e[he]=tt+jt,e[he+1]=Tt-Pt,e[pe]=Je-vt,e[pe+1]=at-Dt,e[ge]=tt-jt,e[ge+1]=Tt+Pt}}}}_singleRealTransform2(e,t,r,u,T){const d=e[u],A=e[u+T];t[r]=d+A,t[r+1]=0,t[r+2]=d-A,t[r+3]=0}_singleRealTransform4(e,t,r,u,T,d){const A=T*2,le=T*3,G=e[u],B=e[u+T],o=e[u+A],i=e[u+le],w=G+o,ae=G-o,ue=B+i,he=d*(B-i);t[r]=w+ue,t[r+1]=0,t[r+2]=ae,t[r+3]=-he,t[r+4]=w-ue,t[r+5]=0,t[r+6]=ae,t[r+7]=he}}class NP2FFT{constructor(e){const t=2*(e-1),r=2*(2*e-1),u=2**Math.ceil(Math.log2(r));this.bufferSize=u,this._a=t;const T=new Float64Array(r),d=new Float64Array(u);this._chirpBuffer=new Float64Array(u),this._buffer1=new Float64Array(u),this._buffer2=new Float64Array(u),this._outBuffer1=new Float64Array(u),this._outBuffer2=new Float64Array(u);const A=-2*Math.PI/e,le=Math.cos(A),G=Math.sin(A);for(let B=0;B<r>>1;++B){const o=(B+1-e)**2/2,i=Math.sqrt(le**2+G**2)**o,w=o*Math.atan2(G,le),ae=2*B;T[ae]=i*Math.cos(w),T[ae+1]=i*Math.sin(w),d[ae]=T[ae],d[ae+1]=-T[ae+1]}this._slicedChirpBuffer=T.subarray(t,r),this._f=new P2FFT(u>>1),this._f.transform(this._chirpBuffer,d)}_transform(e,t,r){const u=this._buffer1,T=this._buffer2,d=this._outBuffer1,A=this._outBuffer2,le=this._chirpBuffer,G=this._slicedChirpBuffer,B=this._a;if(r)for(let o=0;o<G.length;o+=2){const i=o+1,w=o>>1,ae=t[w];u[o]=ae*G[o],u[i]=ae*G[i]}else for(let o=0;o<G.length;o+=2){const i=o+1;u[o]=t[o]*G[o]-t[i]*G[i],u[i]=t[o]*G[i]+t[i]*G[o]}this._f.transform(d,u);for(let o=0;o<le.length;o+=2){const i=o+1;T[o]=d[o]*le[o]-d[i]*le[i],T[i]=d[o]*le[i]+d[i]*le[o]}this._f.inverseTransform(A,T);for(let o=0;o<A.length;o+=2){const i=A[o+B],w=A[o+B+1],ae=G[o],ue=G[o+1];e[o]=i*ae-w*ue,e[o+1]=i*ue+w*ae}}transform(e,t){this._transform(e,t,!1)}realTransform(e,t){this._transform(e,t,!0)}}class FFT{constructor(e){this.fft_length=e,this.isPowerOfTwo=isPowerOfTwo(e),this.isPowerOfTwo?(this.fft=new P2FFT(e),this.outputBufferSize=2*e):(this.fft=new NP2FFT(e),this.outputBufferSize=this.fft.bufferSize)}realTransform(e,t){this.fft.realTransform(e,t)}transform(e,t){this.fft.transform(e,t)}}function medianFilter(n,e){if(e%2===0||e<=0)throw new Error("Window size must be a positive odd number");const t=new n.constructor(n.length),r=new n.constructor(e),u=Math.floor(e/2);for(let T=0;T<n.length;++T){let d=0;for(let A=-u;A<=u;++A){let le=T+A;le<0?le=Math.abs(le):le>=n.length&&(le=2*(n.length-1)-le),r[d++]=n[le]}r.sort(),t[T]=r[u]}return t}function round(n,e){const t=Math.pow(10,e);return Math.round(n*t)/t}const DataTypeMap=Object.freeze({float32:Float32Array,float64:Float64Array,string:Array,int8:Int8Array,uint8:Uint8Array,int16:Int16Array,uint16:Uint16Array,int32:Int32Array,uint32:Uint32Array,int64:BigInt64Array,uint64:BigUint64Array,bool:Uint8Array}),ONNXTensor$1=ONNX.Tensor;class Tensor{constructor(...e){Mt(this,"dims");Mt(this,"type");Mt(this,"data");Mt(this,"size");return e[0]instanceof ONNXTensor$1?Object.assign(this,e[0]):Object.assign(this,new ONNXTensor$1(e[0],e[1],e[2])),new Proxy(this,{get:(t,r)=>{if(typeof r=="string"){let u=Number(r);if(Number.isInteger(u))return t._getitem(u)}return t[r]},set:(t,r,u)=>t[r]=u})}*[Symbol.iterator](){const[e,...t]=this.dims;if(t.length>0){const r=t.reduce((u,T)=>u*T);for(let u=0;u<e;++u)yield this._subarray(u,r,t)}else yield*this.data}_getitem(e){const[t,...r]=this.dims;if(e=safeIndex(e,t),r.length>0){const u=r.reduce((T,d)=>T*d);return this._subarray(e,u,r)}else return new Tensor(this.type,[this.data[e]],r)}indexOf(e){for(let t=0;t<this.data.length;++t)if(this.data[t]==e)return t;return-1}_subarray(e,t,r){const u=e*t,T=(e+1)*t,d="subarray"in this.data?this.data.subarray(u,T):this.data.slice(u,T);return new Tensor(this.type,d,r)}item(){if(this.data.length!==1)throw new Error(`a Tensor with ${this.data.length} elements cannot be converted to Scalar`);return this.data[0]}tolist(){return reshape(this.data,this.dims)}sigmoid(){return this.clone().sigmoid_()}sigmoid_(){for(let e=0;e<this.data.length;++e)this.data[e]=1/(1+Math.exp(-this.data[e]));return this}mul(e){return this.clone().mul_(e)}mul_(e){for(let t=0;t<this.data.length;++t)this.data[t]*=e;return this}add(e){return this.clone().add_(e)}add_(e){for(let t=0;t<this.data.length;++t)this.data[t]+=e;return this}clone(){return new Tensor(this.type,this.data.slice(),this.dims.slice())}slice(...e){let t=[],r=[];for(let le=0;le<this.dims.length;++le){let G=e[le];if(G==null)r.push([0,this.dims[le]]),t.push(this.dims[le]);else if(typeof G=="number")G=safeIndex(G,this.dims[le],le),r.push([G,G+1]);else if(Array.isArray(G)&&G.length===2){if(G[0]>G[1])throw new Error(`Invalid slice: ${G}`);let B=[Math.max(G[0],0),Math.min(G[1],this.dims[le])];r.push(B),t.push(B[1]-B[0])}else throw new Error(`Invalid slice: ${G}`)}let u=r.map(([le,G])=>G-le),T=u.reduce((le,G)=>le*G),d=new this.data.constructor(T);const A=this.stride();for(let le=0;le<T;++le){let G=0;for(let B=u.length-1,o=le;B>=0;--B){const i=u[B];G+=(o%i+r[B][0])*A[B],o=Math.floor(o/i)}d[le]=this.data[G]}return new Tensor(this.type,d,t)}transpose(...e){return transpose(this,e)}sum(e=null,t=!1){return this.norm(1,e,t)}norm(e="fro",t=null,r=!1){if(e==="fro")e=2;else if(typeof e=="string")throw Error(`Unsupported norm: ${e}`);if(t===null){let d=this.data.reduce((A,le)=>A+le**e,0)**(1/e);return new Tensor(this.type,[d],[])}t=safeIndex(t,this.dims.length);const u=this.dims.slice();u[t]=1;const T=new this.data.constructor(this.data.length/this.dims[t]);for(let d=0;d<this.data.length;++d){let A=0;for(let le=this.dims.length-1,G=d,B=1;le>=0;--le){const o=this.dims[le];if(le!==t){const i=G%o;A+=i*B,B*=u[le]}G=Math.floor(G/o)}T[A]+=this.data[d]**e}if(e!==1)for(let d=0;d<T.length;++d)T[d]=T[d]**(1/e);return r||u.splice(t,1),new Tensor(this.type,T,u)}normalize_(e=2,t=1){t=safeIndex(t,this.dims.length);const r=this.norm(e,t,!0);for(let u=0;u<this.data.length;++u){let T=0;for(let d=this.dims.length-1,A=u,le=1;d>=0;--d){const G=this.dims[d];if(d!==t){const B=A%G;T+=B*le,le*=this.dims[d]}A=Math.floor(A/G)}this.data[u]/=r.data[T]}return this}normalize(e=2,t=1){return this.clone().normalize_(e,t)}stride(){return dimsToStride(this.dims)}squeeze(e=null){return new Tensor(this.type,this.data,calc_squeeze_dims(this.dims,e))}squeeze_(e=null){return this.dims=calc_squeeze_dims(this.dims,e),this}unsqueeze(e=null){return new Tensor(this.type,this.data,calc_unsqueeze_dims(this.dims,e))}unsqueeze_(e=null){return this.dims=calc_unsqueeze_dims(this.dims,e),this}flatten_(e=0,t=-1){t=(t+this.dims.length)%this.dims.length;let r=this.dims.slice(0,e),u=this.dims.slice(e,t+1),T=this.dims.slice(t+1);return this.dims=[...r,u.reduce((d,A)=>d*A,1),...T],this}flatten(e=0,t=-1){return this.clone().flatten_(e,t)}view(...e){let t=-1;for(let r=0;r<e.length;++r)if(e[r]===-1){if(t!==-1)throw new Error("Only one dimension can be inferred");t=r}if(t!==-1){const r=e.reduce((u,T,d)=>d!==t?u*T:u,1);e[t]=this.data.length/r}return new Tensor(this.type,this.data,e)}neg_(){for(let e=0;e<this.data.length;++e)this.data[e]=-this.data[e];return this}neg(){return this.clone().neg_()}clamp_(e,t){for(let r=0;r<this.data.length;++r)this.data[r]=Math.min(Math.max(this.data[r],e),t);return this}clamp(e,t){return this.clone().clamp_(e,t)}round_(){for(let e=0;e<this.data.length;++e)this.data[e]=Math.round(this.data[e]);return this}round(){return this.clone().round_()}to(e){if(this.type===e)return this;if(!DataTypeMap.hasOwnProperty(e))throw new Error(`Unsupported type: ${e}`);return new Tensor(e,DataTypeMap[e].from(this.data),this.dims)}}function reshape(n,e){const t=n.length,r=e.reduce((T,d)=>T*d);if(t!==r)throw Error(`cannot reshape array of size ${t} into shape (${e})`);let u=n;for(let T=e.length-1;T>=0;T--)u=u.reduce((d,A)=>{let le=d[d.length-1];return le.length<e[T]?le.push(A):d.push([A]),d},[[]]);return u[0]}function transpose(n,e){const[t,r]=transpose_data(n.data,n.dims,e);return new Tensor(n.type,t,r)}function interpolate(n,[e,t],r="bilinear",u=!1){const T=n.dims.at(-3)??1,d=n.dims.at(-2),A=n.dims.at(-1);let le=interpolate_data(n.data,[T,d,A],[e,t],r,u);return new Tensor(n.type,le,[T,e,t])}function mean_pooling(n,e){let t=[n.dims[0],n.dims[2]],r=new n.data.constructor(t[0]*t[1]),[u,T,d]=n.dims,A=0;for(let le=0;le<u;++le){let G=le*d*T;for(let B=0;B<d;++B){let o=0,i=0,w=le*T,ae=G+B;for(let he=0;he<T;++he){let pe=Number(e.data[w+he]);i+=pe,o+=n.data[ae+he*d]*pe}let ue=o/i;r[A++]=ue}}return new Tensor(n.type,r,t)}function calc_squeeze_dims(n,e){return n=n.slice(),e===null?n=n.filter(t=>t!==1):typeof e=="number"?n[e]===1&&n.splice(e,1):Array.isArray(e)&&(n=n.filter((t,r)=>t!==1||!e.includes(r))),n}function calc_unsqueeze_dims(n,e){return e=safeIndex(e,n.length+1),n=n.slice(),n.splice(e,0,1),n}function safeIndex(n,e,t=null){if(n<-e||n>=e)throw new Error(`IndexError: index ${n} is out of bounds for dimension${t===null?"":" "+t} with size ${e}`);return n<0&&(n=(n%e+e)%e),n}function cat(n,e=0){e=safeIndex(e,n[0].dims.length);const t=n[0].dims.slice();t[e]=n.reduce((d,A)=>d+A.dims[e],0);const r=t.reduce((d,A)=>d*A,1),u=new n[0].data.constructor(r),T=n[0].type;if(e===0){let d=0;for(let A of n)u.set(A.data,d),d+=A.data.length}else{let d=0;for(let A=0;A<n.length;++A){let le=n[A];for(let G=0;G<le.data.length;++G){let B=0;for(let o=le.dims.length-1,i=G,w=1;o>=0;--o){const ae=le.dims[o];let ue=i%ae;o===e&&(ue+=d),B+=ue*w,w*=t[o],i=Math.floor(i/ae)}u[B]=le.data[G]}d+=le.dims[e]}}return new Tensor(T,u,t)}function stack(n,e=0){return cat(n.map(t=>t.unsqueeze(e)),e)}function std_mean(n,e=null,t=1,r=!1){if(e===null){const G=n.data.reduce((w,ae)=>w+ae,0)/n.data.length,B=Math.sqrt(n.data.reduce((w,ae)=>w+(ae-G)**2,0)/(n.data.length-t)),o=new Tensor(n.type,[G],[]);return[new Tensor(n.type,[B],[]),o]}e=safeIndex(e,n.dims.length);const u=mean(n,e,r),T=n.dims.slice();T[e]=1;const d=new n.data.constructor(n.data.length/n.dims[e]);for(let le=0;le<n.data.length;++le){let G=0;for(let B=n.dims.length-1,o=le,i=1;B>=0;--B){const w=n.dims[B];if(B!==e){const ae=o%w;G+=ae*i,i*=T[B]}o=Math.floor(o/w)}d[G]+=(n.data[le]-u.data[G])**2}for(let le=0;le<d.length;++le)d[le]=Math.sqrt(d[le]/(n.dims[e]-t));return r||T.splice(e,1),[new Tensor(n.type,d,T),u]}function mean(n,e=null,t=!1){if(e===null){let T=n.data.reduce((d,A)=>d+A,0);return new Tensor(n.type,[T/n.data.length],[])}e=safeIndex(e,n.dims.length);const r=n.dims.slice();r[e]=1;const u=new n.data.constructor(n.data.length/n.dims[e]);for(let T=0;T<n.data.length;++T){let d=0;for(let A=n.dims.length-1,le=T,G=1;A>=0;--A){const B=n.dims[A];if(A!==e){const o=le%B;d+=o*G,G*=r[A]}le=Math.floor(le/B)}u[d]+=n.data[T]}if(n.dims[e]!==1)for(let T=0;T<u.length;++T)u[T]=u[T]/n.dims[e];return t||r.splice(e,1),new Tensor(n.type,u,r)}function dynamicTimeWarping(n){const[e,t]=n.dims,r=[e+1,t+1],u=new Tensor("float32",new Float32Array(r[0]*r[1]).fill(1/0),r),T=new Tensor("float32",new Float32Array(r[0]*r[1]).fill(-1),r);u[0].data[0]=0;for(let B=1;B<t+1;++B)for(let o=1;o<e+1;++o){const i=u[o-1][B-1].item(),w=u[o-1][B].item(),ae=u[o][B-1].item();let ue,he;i<w&&i<ae?(ue=i,he=0):w<i&&w<ae?(ue=w,he=1):(ue=ae,he=2),u[o].data[B]=n[o-1][B-1].item()+ue,T[o].data[B]=he}let d=e,A=t;T.data.fill(2,0,r[1]);for(let B=0;B<r[0];++B)T[B].data[0]=1;let le=[],G=[];for(;d>0||A>0;)switch(le.push(d-1),G.push(A-1),T[d][A].item()){case 0:--d,--A;break;case 1:--d;break;case 2:--A;break;default:throw new Error(`Internal error in dynamic time warping. Unexpected trace[${d}, ${A}]. Please file a bug report.`)}return le.reverse(),G.reverse(),[le,G]}function dimsToStride(n){const e=new Array(n.length);for(let t=n.length-1,r=1;t>=0;--t)e[t]=r,r*=n[t];return e}function ones(n){const e=n.reduce((t,r)=>t*r,1);return new Tensor("int64",new BigInt64Array(e).fill(1n),n)}function ones_like(n){return ones(n.dims)}class PriorityQueue{constructor(e=(t,r)=>t>r){this._heap=[],this._comparator=e}get size(){return this._heap.length}isEmpty(){return this.size===0}peek(){return this._heap[0]}push(...e){return this.extend(e)}extend(e){for(const t of e)this._heap.push(t),this._siftUp();return this.size}pop(){const e=this.peek(),t=this.size-1;return t>0&&this._swap(0,t),this._heap.pop(),this._siftDown(),e}replace(e){const t=this.peek();return this._heap[0]=e,this._siftDown(),t}_parent(e){return(e+1>>>1)-1}_left(e){return(e<<1)+1}_right(e){return e+1<<1}_greater(e,t){return this._comparator(this._heap[e],this._heap[t])}_swap(e,t){const r=this._heap[e];this._heap[e]=this._heap[t],this._heap[t]=r}_siftUp(){let e=this.size-1;for(;e>0&&this._greater(e,this._parent(e));)this._swap(e,this._parent(e)),e=this._parent(e)}_siftDown(){let e=0;for(;this._left(e)<this.size&&this._greater(this._left(e),e)||this._right(e)<this.size&&this._greater(this._right(e),e);){const t=this._right(e)<this.size&&this._greater(this._right(e),this._left(e))?this._right(e):this._left(e);this._swap(e,t),e=t}}}class CharTrie{constructor(){this.root=CharTrieNode.default()}extend(e){for(let t of e)this.push(t)}push(e){let t=this.root;for(let r of e){let u=t.children.get(r);u===void 0&&(u=CharTrieNode.default(),t.children.set(r,u)),t=u}t.isLeaf=!0}*commonPrefixSearch(e){let t=this.root,r="";for(let u=0;u<e.length&&t!==void 0;++u){const T=e[u];r+=T,t=t.children.get(T),t!==void 0&&t.isLeaf&&(yield r)}}}class CharTrieNode{constructor(e,t){this.isLeaf=e,this.children=t}static default(){return new CharTrieNode(!1,new Map)}}class TokenLattice{constructor(e,t,r){this.sentence=e,this.len=e.length,this.bosTokenId=t,this.eosTokenId=r,this.nodes=[],this.beginNodes=Array.from({length:this.len+1},()=>[]),this.endNodes=Array.from({length:this.len+1},()=>[]);const u=new TokenLatticeNode(this.bosTokenId,0,0,0,0),T=new TokenLatticeNode(this.eosTokenId,1,this.len,0,0);this.nodes.push(u.clone()),this.nodes.push(T.clone()),this.beginNodes[this.len].push(T),this.endNodes[0].push(u)}insert(e,t,r,u){const T=this.nodes.length,d=new TokenLatticeNode(u,T,e,t,r);this.beginNodes[e].push(d),this.endNodes[e+t].push(d),this.nodes.push(d)}viterbi(){const e=this.len;let t=0;for(;t<=e;){if(this.beginNodes[t].length==0)return[];for(let A of this.beginNodes[t]){A.prev=null;let le=0,G=null;for(let B of this.endNodes[t]){const o=B.backtraceScore+A.score;(G===null||o>le)&&(G=B.clone(),le=o)}if(G!==null)A.prev=G,A.backtraceScore=le;else return[]}++t}const r=[],T=this.beginNodes[e][0].prev;if(T===null)return[];let d=T.clone();for(;d.prev!==null;)r.push(d.clone()),d=d.clone().prev.clone();return r.reverse(),r}piece(e){return this.sentence.slice(e.pos,e.pos+e.length)}tokens(){return this.viterbi().map(t=>this.piece(t))}tokenIds(){return this.viterbi().map(t=>t.tokenId)}}class TokenLatticeNode{constructor(e,t,r,u,T){this.tokenId=e,this.nodeId=t,this.pos=r,this.length=u,this.score=T,this.prev=null,this.backtraceScore=0}clone(){const e=new TokenLatticeNode(this.tokenId,this.nodeId,this.pos,this.length,this.score);return e.prev=this.prev,e.backtraceScore=this.backtraceScore,e}}var TOKEN_TYPES=Object.freeze({Text:"Text",NumericLiteral:"NumericLiteral",BooleanLiteral:"BooleanLiteral",StringLiteral:"StringLiteral",Identifier:"Identifier",Equals:"Equals",OpenParen:"OpenParen",CloseParen:"CloseParen",OpenStatement:"OpenStatement",CloseStatement:"CloseStatement",OpenExpression:"OpenExpression",CloseExpression:"CloseExpression",OpenSquareBracket:"OpenSquareBracket",CloseSquareBracket:"CloseSquareBracket",Comma:"Comma",Dot:"Dot",Colon:"Colon",Pipe:"Pipe",CallOperator:"CallOperator",AdditiveBinaryOperator:"AdditiveBinaryOperator",MultiplicativeBinaryOperator:"MultiplicativeBinaryOperator",ComparisonBinaryOperator:"ComparisonBinaryOperator",UnaryOperator:"UnaryOperator",Set:"Set",If:"If",For:"For",In:"In",NotIn:"NotIn",Else:"Else",EndIf:"EndIf",ElseIf:"ElseIf",EndFor:"EndFor",And:"And",Or:"Or",Not:"UnaryOperator"}),KEYWORDS=Object.freeze({set:TOKEN_TYPES.Set,for:TOKEN_TYPES.For,in:TOKEN_TYPES.In,if:TOKEN_TYPES.If,else:TOKEN_TYPES.Else,endif:TOKEN_TYPES.EndIf,elif:TOKEN_TYPES.ElseIf,endfor:TOKEN_TYPES.EndFor,and:TOKEN_TYPES.And,or:TOKEN_TYPES.Or,not:TOKEN_TYPES.Not,"not in":TOKEN_TYPES.NotIn,true:TOKEN_TYPES.BooleanLiteral,false:TOKEN_TYPES.BooleanLiteral}),Token=class{constructor(n,e){this.value=n,this.type=e}};function isWord(n){return/\w/.test(n)}function isInteger(n){return/[0-9]/.test(n)}var ORDERED_MAPPING_TABLE=[["{%",TOKEN_TYPES.OpenStatement],["%}",TOKEN_TYPES.CloseStatement],["{{",TOKEN_TYPES.OpenExpression],["}}",TOKEN_TYPES.CloseExpression],["(",TOKEN_TYPES.OpenParen],[")",TOKEN_TYPES.CloseParen],["[",TOKEN_TYPES.OpenSquareBracket],["]",TOKEN_TYPES.CloseSquareBracket],[",",TOKEN_TYPES.Comma],[".",TOKEN_TYPES.Dot],[":",TOKEN_TYPES.Colon],["|",TOKEN_TYPES.Pipe],["<=",TOKEN_TYPES.ComparisonBinaryOperator],[">=",TOKEN_TYPES.ComparisonBinaryOperator],["==",TOKEN_TYPES.ComparisonBinaryOperator],["!=",TOKEN_TYPES.ComparisonBinaryOperator],["<",TOKEN_TYPES.ComparisonBinaryOperator],[">",TOKEN_TYPES.ComparisonBinaryOperator],["+",TOKEN_TYPES.AdditiveBinaryOperator],["-",TOKEN_TYPES.AdditiveBinaryOperator],["*",TOKEN_TYPES.MultiplicativeBinaryOperator],["/",TOKEN_TYPES.MultiplicativeBinaryOperator],["%",TOKEN_TYPES.MultiplicativeBinaryOperator],["=",TOKEN_TYPES.Equals]],ESCAPE_CHARACTERS=new Map([["n",`
`],["t","	"],["r","\r"],["b","\b"],["f","\f"],["v","\v"],["'","'"],['"','"'],["\\","\\"]]);function tokenize(n){var T,d,A;const e=[],t=n;let r=0;const u=le=>{let G="";for(;le(t[r]);){if(t[r]==="\\"){if(++r,r>=t.length)throw new SyntaxError("Unexpected end of input");const B=t[r++],o=ESCAPE_CHARACTERS.get(B);if(o===void 0)throw new SyntaxError(`Unexpected escaped character: ${B}`);G+=o;continue}if(G+=t[r++],r>=t.length)throw new SyntaxError("Unexpected end of input")}return G};e:for(;r<t.length;){const le=(T=e.at(-1))==null?void 0:T.type;if(le===void 0||le===TOKEN_TYPES.CloseStatement||le===TOKEN_TYPES.CloseExpression){let B="";for(;r<t.length&&!(t[r]==="{"&&(t[r+1]==="%"||t[r+1]==="{"));)B+=t[r++];if(B.length>0){e.push(new Token(B,TOKEN_TYPES.Text));continue}}u(B=>/\s/.test(B));const G=t[r];if(G==="-"||G==="+"){const B=(d=e.at(-1))==null?void 0:d.type;if(B===TOKEN_TYPES.Text||B===void 0)throw new SyntaxError(`Unexpected character: ${G}`);switch(B){case TOKEN_TYPES.Identifier:case TOKEN_TYPES.NumericLiteral:case TOKEN_TYPES.BooleanLiteral:case TOKEN_TYPES.StringLiteral:case TOKEN_TYPES.CloseParen:case TOKEN_TYPES.CloseSquareBracket:break;default:{++r;const o=u(isInteger);e.push(new Token(`${G}${o}`,o.length>0?TOKEN_TYPES.NumericLiteral:TOKEN_TYPES.UnaryOperator));continue}}}for(const[B,o]of ORDERED_MAPPING_TABLE)if(t.slice(r,r+B.length)===B){e.push(new Token(B,o)),r+=B.length;continue e}if(G==="'"){++r;const B=u(o=>o!=="'");e.push(new Token(B,TOKEN_TYPES.StringLiteral)),++r;continue}if(isInteger(G)){const B=u(isInteger);e.push(new Token(B,TOKEN_TYPES.NumericLiteral));continue}if(isWord(G)){const B=u(isWord),o=Object.hasOwn(KEYWORDS,B)?KEYWORDS[B]:TOKEN_TYPES.Identifier;o===TOKEN_TYPES.In&&((A=e.at(-1))==null?void 0:A.type)===TOKEN_TYPES.Not?(e.pop(),e.push(new Token("not in",TOKEN_TYPES.NotIn))):e.push(new Token(B,o));continue}throw new SyntaxError(`Unexpected character: ${G}`)}return e}var Statement=class{constructor(){Mt(this,"type","Statement")}},Program=class extends Statement{constructor(e){super();Mt(this,"type","Program");this.body=e}},If=class extends Statement{constructor(e,t,r){super();Mt(this,"type","If");this.test=e,this.body=t,this.alternate=r}},For=class extends Statement{constructor(e,t,r){super();Mt(this,"type","For");this.loopvar=e,this.iterable=t,this.body=r}},SetStatement=class extends Statement{constructor(e,t){super();Mt(this,"type","Set");this.assignee=e,this.value=t}},Expression=class extends Statement{constructor(){super(...arguments);Mt(this,"type","Expression")}},MemberExpression=class extends Expression{constructor(e,t,r){super();Mt(this,"type","MemberExpression");this.object=e,this.property=t,this.computed=r}},CallExpression=class extends Expression{constructor(e,t){super();Mt(this,"type","CallExpression");this.callee=e,this.args=t}},Identifier=class extends Expression{constructor(e){super();Mt(this,"type","Identifier");this.value=e}},Literal=class extends Expression{constructor(e){super();Mt(this,"type","Literal");this.value=e}},NumericLiteral=class extends Literal{constructor(){super(...arguments);Mt(this,"type","NumericLiteral")}},StringLiteral=class extends Literal{constructor(e){super(e);Mt(this,"type","StringLiteral")}},BooleanLiteral=class extends Literal{constructor(){super(...arguments);Mt(this,"type","BooleanLiteral")}},BinaryExpression=class extends Expression{constructor(e,t,r){super();Mt(this,"type","BinaryExpression");this.operator=e,this.left=t,this.right=r}},FilterExpression=class extends Expression{constructor(e,t){super();Mt(this,"type","FilterExpression");this.operand=e,this.filter=t}},UnaryExpression=class extends Expression{constructor(e,t){super();Mt(this,"type","UnaryExpression");this.operator=e,this.argument=t}},SliceExpression=class extends Expression{constructor(e=void 0,t=void 0,r=void 0){super();Mt(this,"type","SliceExpression");this.start=e,this.stop=t,this.step=r}};function parse(n){const e=new Program([]);let t=0;function r($e,He){const De=n[t++];if(!De||De.type!==$e)throw new Error(`Parser Error: ${He}. ${De.type} !== ${$e}.`);return De}function u(){switch(n[t].type){case TOKEN_TYPES.Text:return A();case TOKEN_TYPES.OpenStatement:return le();case TOKEN_TYPES.OpenExpression:return G();default:throw new SyntaxError(`Unexpected token type: ${n[t].type}`)}}function T(...$e){return t+$e.length<=n.length&&$e.some((He,De)=>He!==n[t+De].type)}function d(...$e){return t+$e.length<=n.length&&$e.every((He,De)=>He===n[t+De].type)}function A(){return new StringLiteral(r(TOKEN_TYPES.Text,"Expected text token").value)}function le(){r(TOKEN_TYPES.OpenStatement,"Expected opening statement token");let $e;switch(n[t].type){case TOKEN_TYPES.Set:++t,$e=B(),r(TOKEN_TYPES.CloseStatement,"Expected closing statement token");break;case TOKEN_TYPES.If:++t,$e=o(),r(TOKEN_TYPES.OpenStatement,"Expected {% token"),r(TOKEN_TYPES.EndIf,"Expected endif token"),r(TOKEN_TYPES.CloseStatement,"Expected %} token");break;case TOKEN_TYPES.For:++t,$e=i(),r(TOKEN_TYPES.OpenStatement,"Expected {% token"),r(TOKEN_TYPES.EndFor,"Expected endfor token"),r(TOKEN_TYPES.CloseStatement,"Expected %} token");break;default:throw new SyntaxError(`Unknown statement type: ${n[t].type}`)}return $e}function G(){r(TOKEN_TYPES.OpenExpression,"Expected opening expression token");const $e=w();return r(TOKEN_TYPES.CloseExpression,"Expected closing expression token"),$e}function B(){const $e=w();if(d(TOKEN_TYPES.Equals)){++t;const He=B();return new SetStatement($e,He)}return $e}function o(){var Xe,Me,je,it,Ke,qe,Pe,et;const $e=w();r(TOKEN_TYPES.CloseStatement,"Expected closing statement token");const He=[],De=[];for(;!(((Xe=n[t])==null?void 0:Xe.type)===TOKEN_TYPES.OpenStatement&&(((Me=n[t+1])==null?void 0:Me.type)===TOKEN_TYPES.ElseIf||((je=n[t+1])==null?void 0:je.type)===TOKEN_TYPES.Else||((it=n[t+1])==null?void 0:it.type)===TOKEN_TYPES.EndIf));)He.push(u());if(((Ke=n[t])==null?void 0:Ke.type)===TOKEN_TYPES.OpenStatement&&((qe=n[t+1])==null?void 0:qe.type)!==TOKEN_TYPES.EndIf)if(++t,d(TOKEN_TYPES.ElseIf))r(TOKEN_TYPES.ElseIf,"Expected elseif token"),De.push(o());else for(r(TOKEN_TYPES.Else,"Expected else token"),r(TOKEN_TYPES.CloseStatement,"Expected closing statement token");!(((Pe=n[t])==null?void 0:Pe.type)===TOKEN_TYPES.OpenStatement&&((et=n[t+1])==null?void 0:et.type)===TOKEN_TYPES.EndIf);)De.push(u());return new If($e,He,De)}function i(){const $e=Ve();if(!($e instanceof Identifier))throw new SyntaxError("Expected identifier for the loop variable");r(TOKEN_TYPES.In,"Expected `in` keyword following loop variable");const He=w();r(TOKEN_TYPES.CloseStatement,"Expected closing statement token");const De=[];for(;T(TOKEN_TYPES.OpenStatement,TOKEN_TYPES.EndFor);)De.push(u());return new For($e,He,De)}function w(){return ae()}function ae(){let $e=ue();for(;d(TOKEN_TYPES.Or);){const He=n[t];++t;const De=ue();$e=new BinaryExpression(He,$e,De)}return $e}function ue(){let $e=he();for(;d(TOKEN_TYPES.And);){const He=n[t];++t;const De=he();$e=new BinaryExpression(He,$e,De)}return $e}function he(){let $e;for(;d(TOKEN_TYPES.Not);){const He=n[t];++t;const De=he();$e=new UnaryExpression(He,De)}return $e??pe()}function pe(){let $e=ge();for(;d(TOKEN_TYPES.ComparisonBinaryOperator)||d(TOKEN_TYPES.In)||d(TOKEN_TYPES.NotIn);){const He=n[t];++t;const De=ge();$e=new BinaryExpression(He,$e,De)}return $e}function ge(){let $e=Te();for(;d(TOKEN_TYPES.AdditiveBinaryOperator);){const He=n[t];++t;const De=Te();$e=new BinaryExpression(He,$e,De)}return $e}function be(){const $e=Re();return d(TOKEN_TYPES.OpenParen)?ve($e):$e}function ve($e){let He=new CallExpression($e,we());return d(TOKEN_TYPES.OpenParen)&&(He=ve(He)),He}function we(){r(TOKEN_TYPES.OpenParen,"Expected opening parenthesis for arguments list");const $e=d(TOKEN_TYPES.CloseParen)?[]:Se();return r(TOKEN_TYPES.CloseParen,"Expected closing parenthesis for arguments list"),$e}function Se(){const $e=[w()];for(;d(TOKEN_TYPES.Comma);)++t,$e.push(w());return $e}function Ae(){const $e=[];let He=!1;for(;!d(TOKEN_TYPES.CloseSquareBracket);)d(TOKEN_TYPES.Colon)?($e.push(void 0),++t,He=!0):($e.push(w()),d(TOKEN_TYPES.Colon)&&(++t,He=!0));if($e.length===0)throw new SyntaxError("Expected at least one argument for member/slice expression");if(He){if($e.length>3)throw new SyntaxError("Expected 0-3 arguments for slice expression");return new SliceExpression(...$e)}return $e[0]}function Re(){let $e=Ve();for(;d(TOKEN_TYPES.Dot)||d(TOKEN_TYPES.OpenSquareBracket);){const He=n[t];++t;let De;const Xe=He.type!==TOKEN_TYPES.Dot;if(Xe)De=Ae(),r(TOKEN_TYPES.CloseSquareBracket,"Expected closing square bracket");else if(De=Ve(),De.type!=="Identifier")throw new SyntaxError("Expected identifier following dot operator");$e=new MemberExpression($e,De,Xe)}return $e}function Te(){let $e=Ce();for(;d(TOKEN_TYPES.MultiplicativeBinaryOperator);){const He=n[t];++t;const De=Ce();$e=new BinaryExpression(He,$e,De)}return $e}function Ce(){let $e=be();for(;d(TOKEN_TYPES.Pipe);){++t;const He=Ve();if(!(He instanceof Identifier))throw new SyntaxError("Expected identifier for the filter");$e=new FilterExpression($e,He)}return $e}function Ve(){const $e=n[t];switch($e.type){case TOKEN_TYPES.NumericLiteral:return++t,new NumericLiteral(Number($e.value));case TOKEN_TYPES.StringLiteral:return++t,new StringLiteral($e.value);case TOKEN_TYPES.BooleanLiteral:return++t,new BooleanLiteral($e.value==="true");case TOKEN_TYPES.Identifier:return++t,new Identifier($e.value);case TOKEN_TYPES.OpenParen:{++t;const He=w();if(n[t].type!==TOKEN_TYPES.CloseParen)throw new SyntaxError("Expected closing parenthesis");return++t,He}default:throw new SyntaxError(`Unexpected token: ${$e.type}`)}}for(;t<n.length;)e.body.push(u());return e}function slice(n,e,t,r=1){const u=Math.sign(r);u>=0?(e=(e??(e=0))<0?Math.max(n.length+e,0):Math.min(e,n.length),t=(t??(t=n.length))<0?Math.max(n.length+t,0):Math.min(t,n.length)):(e=(e??(e=n.length-1))<0?Math.max(n.length+e,-1):Math.min(e,n.length-1),t=(t??(t=-1))<-1?Math.max(n.length+t,-1):Math.min(t,n.length-1));const T=[];for(let d=e;u*d<u*t;d+=r)T.push(n[d]);return T}var RuntimeValue=class{constructor(n=void 0){Mt(this,"type","RuntimeValue");Mt(this,"value");Mt(this,"builtins",new Map);this.value=n}__bool__(){return new BooleanValue(!!this.value)}},NumericValue=class extends RuntimeValue{constructor(){super(...arguments);Mt(this,"type","NumericValue")}},StringValue=class extends RuntimeValue{constructor(){super(...arguments);Mt(this,"type","StringValue");Mt(this,"builtins",new Map([["upper",new FunctionValue(()=>new StringValue(this.value.toUpperCase()))],["lower",new FunctionValue(()=>new StringValue(this.value.toLowerCase()))],["strip",new FunctionValue(()=>new StringValue(this.value.trim()))],["length",new NumericValue(this.value.length)]]))}},BooleanValue=class extends RuntimeValue{constructor(){super(...arguments);Mt(this,"type","BooleanValue")}},ObjectValue=class extends RuntimeValue{constructor(){super(...arguments);Mt(this,"type","ObjectValue")}__bool__(){return new BooleanValue(this.value.size>0)}},ArrayValue=class extends RuntimeValue{constructor(){super(...arguments);Mt(this,"type","ArrayValue");Mt(this,"builtins",new Map([["length",new NumericValue(this.value.length)]]))}__bool__(){return new BooleanValue(this.value.length>0)}},FunctionValue=class extends RuntimeValue{constructor(){super(...arguments);Mt(this,"type","FunctionValue")}},NullValue=class extends RuntimeValue{constructor(){super(...arguments);Mt(this,"type","NullValue")}},UndefinedValue=class extends RuntimeValue{constructor(){super(...arguments);Mt(this,"type","UndefinedValue")}},Environment=class{constructor(n){Mt(this,"variables",new Map);this.parent=n}set(n,e){return this.declareVariable(n,convertToRuntimeValues(e))}declareVariable(n,e){if(this.variables.has(n))throw new SyntaxError(`Variable already declared: ${n}`);return this.variables.set(n,e),e}setVariable(n,e){let t;try{t=this.resolve(n)}catch{}return(t??this).variables.set(n,e),e}resolve(n){if(this.variables.has(n))return this;if(this.parent)return this.parent.resolve(n);throw new Error(`Unknown variable: ${n}`)}lookupVariable(n){return this.resolve(n).variables.get(n)??new NullValue}},Interpreter=class{constructor(n){Mt(this,"global");this.global=n??new Environment}run(n){return this.evaluate(n,this.global)}evaluateBinaryExpression(n,e){const t=this.evaluate(n.left,e),r=this.evaluate(n.right,e);switch(n.operator.value){case"==":return new BooleanValue(t.value==r.value);case"!=":return new BooleanValue(t.value!=r.value);case"and":return t.__bool__().value?r:t;case"or":return t.__bool__().value?t:r}if(t instanceof UndefinedValue||r instanceof UndefinedValue)throw new Error("Cannot perform operation on undefined values");if(t instanceof NullValue||r instanceof NullValue)throw new Error("Cannot perform operation on null values");if(t instanceof NumericValue&&r instanceof NumericValue)switch(n.operator.value){case"+":return new NumericValue(t.value+r.value);case"-":return new NumericValue(t.value-r.value);case"*":return new NumericValue(t.value*r.value);case"/":return new NumericValue(t.value/r.value);case"%":return new NumericValue(t.value%r.value);case"<":return new BooleanValue(t.value<r.value);case">":return new BooleanValue(t.value>r.value);case">=":return new BooleanValue(t.value>=r.value);case"<=":return new BooleanValue(t.value<=r.value)}else if(r instanceof ArrayValue){const u=r.value.find(T=>T.value===t.value)!==void 0;switch(n.operator.value){case"in":return new BooleanValue(u);case"not in":return new BooleanValue(!u)}}if(t instanceof StringValue||r instanceof StringValue)switch(n.operator.value){case"+":return new StringValue(t.value.toString()+r.value.toString())}if(t instanceof StringValue&&r instanceof StringValue)switch(n.operator.value){case"in":return new BooleanValue(r.value.includes(t.value));case"not in":return new BooleanValue(!r.value.includes(t.value))}throw new SyntaxError(`Unknown operator "${n.operator.value}" between ${t.type} and ${r.type}`)}evaluateFilterExpression(n,e){const t=this.evaluate(n.operand,e);if(t instanceof ArrayValue)switch(n.filter.value){case"first":return t.value[0];case"last":return t.value[t.value.length-1];case"length":return new NumericValue(t.value.length);case"reverse":return new ArrayValue(t.value.reverse());case"sort":return new ArrayValue(t.value.sort((r,u)=>{if(r.type!==u.type)throw new Error(`Cannot compare different types: ${r.type} and ${u.type}`);switch(r.type){case"NumericValue":return r.value-u.value;case"StringValue":return r.value.localeCompare(u.value);default:throw new Error(`Cannot compare type: ${r.type}`)}}));default:throw new Error(`Unknown ArrayValue filter: ${n.filter.value}`)}else if(t instanceof StringValue)switch(n.filter.value){case"length":return new NumericValue(t.value.length);case"upper":return new StringValue(t.value.toUpperCase());case"lower":return new StringValue(t.value.toLowerCase());case"title":return new StringValue(t.value.replace(/\b\w/g,r=>r.toUpperCase()));case"capitalize":return new StringValue(t.value.charAt(0).toUpperCase()+t.value.slice(1));case"trim":return new StringValue(t.value.trim());default:throw new Error(`Unknown StringValue filter: ${n.filter.value}`)}else if(t instanceof NumericValue)switch(n.filter.value){case"abs":return new NumericValue(Math.abs(t.value));default:throw new Error(`Unknown NumericValue filter: ${n.filter.value}`)}throw new Error(`Cannot apply filter "${n.filter.value}" to type: ${t.type}`)}evaluateUnaryExpression(n,e){const t=this.evaluate(n.argument,e);switch(n.operator.value){case"not":return new BooleanValue(!t.value);default:throw new SyntaxError(`Unknown operator: ${n.operator.value}`)}}evalProgram(n,e){return this.evaluateBlock(n.body,e)}evaluateBlock(n,e){let t="";for(const r of n){const u=this.evaluate(r,e);u.type!=="NullValue"&&(t+=u.value)}return t=t.replace(/^\n/,""),new StringValue(t)}evaluateIdentifier(n,e){return e.lookupVariable(n.value)}evaluateCallExpression(n,e){const t=n.args.map(u=>this.evaluate(u,e)),r=this.evaluate(n.callee,e);if(r.type!=="FunctionValue")throw new Error(`Cannot call something that is not a function: got ${r.type}`);return r.value(t,e)}evaluateSliceExpression(n,e,t){if(!(n instanceof ArrayValue||n instanceof StringValue))throw new Error("Slice object must be an array or string");const r=this.evaluate(e.start,t),u=this.evaluate(e.stop,t),T=this.evaluate(e.step,t);if(!(r instanceof NumericValue||r instanceof UndefinedValue))throw new Error("Slice start must be numeric or undefined");if(!(u instanceof NumericValue||u instanceof UndefinedValue))throw new Error("Slice stop must be numeric or undefined");if(!(T instanceof NumericValue||T instanceof UndefinedValue))throw new Error("Slice step must be numeric or undefined");return n instanceof ArrayValue?new ArrayValue(slice(n.value,r.value,u.value,T.value)):new StringValue(slice(Array.from(n.value),r.value,u.value,T.value).join(""))}evaluateMemberExpression(n,e){const t=this.evaluate(n.object,e);let r;if(n.computed){if(n.property.type==="SliceExpression")return this.evaluateSliceExpression(t,n.property,e);r=this.evaluate(n.property,e)}else r=new StringValue(n.property.value);let u;if(t instanceof ObjectValue){if(!(r instanceof StringValue))throw new Error(`Cannot access property with non-string: got ${r.type}`);u=t.value.get(r.value)??t.builtins.get(r.value)}else if(t instanceof ArrayValue||t instanceof StringValue)if(r instanceof NumericValue)u=t.value.at(r.value),t instanceof StringValue&&(u=new StringValue(t.value.at(r.value)));else if(r instanceof StringValue)u=t.builtins.get(r.value);else throw new Error(`Cannot access property with non-string/non-number: got ${r.type}`);else{if(!(r instanceof StringValue))throw new Error(`Cannot access property with non-string: got ${r.type}`);u=t.builtins.get(r.value)}if(!(u instanceof RuntimeValue))throw new Error(`${t.type} has no property '${r.value}'`);return u}evaluateSet(n,e){if(n.assignee.type!=="Identifier")throw new Error(`Invalid LHS inside assignment expression: ${JSON.stringify(n.assignee)}`);const t=n.assignee.value;return e.setVariable(t,this.evaluate(n.value,e)),new NullValue}evaluateIf(n,e){const t=this.evaluate(n.test,e);return this.evaluateBlock(t.__bool__().value?n.body:n.alternate,e)}evaluateFor(n,e){const t=new Environment(e),r=this.evaluate(n.iterable,t);if(!(r instanceof ArrayValue))throw new Error(`Expected iterable type in for loop: got ${r.type}`);let u="";for(let T=0;T<r.value.length;++T){t.setVariable("loop",new ObjectValue(new Map([["index",new NumericValue(T+1)],["index0",new NumericValue(T)],["first",new BooleanValue(T===0)],["last",new BooleanValue(T===r.value.length-1)],["length",new NumericValue(r.value.length)]].map(([A,le])=>[A,le])))),t.setVariable(n.loopvar.value,r.value[T]);const d=this.evaluateBlock(n.body,t);u+=d.value}return new StringValue(u)}evaluate(n,e){if(n===void 0)return new UndefinedValue;switch(n.type){case"Program":return this.evalProgram(n,e);case"Set":return this.evaluateSet(n,e);case"If":return this.evaluateIf(n,e);case"For":return this.evaluateFor(n,e);case"NumericLiteral":return new NumericValue(Number(n.value));case"StringLiteral":return new StringValue(n.value);case"BooleanLiteral":return new BooleanValue(n.value);case"Identifier":return this.evaluateIdentifier(n,e);case"CallExpression":return this.evaluateCallExpression(n,e);case"MemberExpression":return this.evaluateMemberExpression(n,e);case"UnaryExpression":return this.evaluateUnaryExpression(n,e);case"BinaryExpression":return this.evaluateBinaryExpression(n,e);case"FilterExpression":return this.evaluateFilterExpression(n,e);default:throw new SyntaxError(`Unknown node type: ${n.type}`)}}};function convertToRuntimeValues(n){switch(typeof n){case"number":return new NumericValue(n);case"string":return new StringValue(n);case"boolean":return new BooleanValue(n);case"object":return n===null?new NullValue:Array.isArray(n)?new ArrayValue(n.map(convertToRuntimeValues)):new ObjectValue(new Map(Object.entries(n).map(([e,t])=>[e,convertToRuntimeValues(t)])));case"function":return new FunctionValue((e,t)=>{const r=n(...e.map(u=>u.value))??null;return convertToRuntimeValues(r)});default:throw new Error(`Cannot convert to runtime value: ${n}`)}}var Template=class{constructor(n){Mt(this,"parsed");n=n.replace(/%}\s+{%/g,"%}{%");const e=tokenize(n);this.parsed=parse(e)}render(n){const e=new Environment;e.set("false",!1),e.set("true",!0),e.set("raise_exception",u=>{throw new Error(u)});for(const[u,T]of Object.entries(n))e.set(u,T);return new Interpreter(e).run(this.parsed).value}};async function loadTokenizer(n,e){const t=await Promise.all([getModelJSON(n,"tokenizer.json",!0,e),getModelJSON(n,"tokenizer_config.json",!0,e)]);return e.legacy!==null&&(t[1].legacy=e.legacy),t}function regexSplit(n,e){const t=[];let r=0;for(const u of n.matchAll(e)){const T=u[0];r<u.index&&t.push(n.slice(r,u.index)),T.length>0&&t.push(T),r=u.index+T.length}return r<n.length&&t.push(n.slice(r)),t}function createPattern(n,e=!0){if(n.Regex!==void 0){const t=n.Regex.replace(/\\([#&~])/g,"$1");return new RegExp(t,"gu")}else if(n.String!==void 0){const t=escapeRegExp(n.String);return new RegExp(e?t:`(${t})`,"gu")}else return console.warn("Unknown pattern type:",n),null}function objectToMap(n){return new Map(Object.entries(n))}function prepareTensorForDecode(n){const e=n.dims;switch(e.length){case 1:return n.tolist();case 2:if(e[0]!==1)throw new Error("Unable to decode tensor with `batch size !== 1`. Use `tokenizer.batch_decode(...)` for batched inputs.");return n.tolist()[0];default:throw new Error(`Expected tensor to have 1-2 dimensions, got ${e.length}.`)}}function clean_up_tokenization(n){return n.replace(/ \./g,".").replace(/ \?/g,"?").replace(/ \!/g,"!").replace(/ ,/g,",").replace(/ \' /g,"'").replace(/ n\'t/g,"n't").replace(/ \'m/g,"'m").replace(/ \'s/g,"'s").replace(/ \'ve/g,"'ve").replace(/ \'re/g,"'re")}function remove_accents(n){return n.replace(/[\u0300-\u036f]/g,"")}function lowercase_and_remove_accent(n){return remove_accents(n.toLowerCase())}function fuse(n,e,t){const r=[];let u=0;for(;u<n.length;){if(r.push(n[u]),(t.get(n[u])??e)!==e){++u;continue}for(;u<n.length&&(t.get(n[u])??e)===e;)++u}return r}function whitespace_split(n){return n.match(/\S+/g)||[]}const PUNCTUATION_REGEX="\\p{P}\\u0021-\\u002F\\u003A-\\u0040\\u005B-\\u0060\\u007B-\\u007E";class AddedToken{constructor(e){this.content=e.content,this.id=e.id,this.single_word=e.single_word??!1,this.lstrip=e.lstrip??!1,this.rstrip=e.rstrip??!1,this.special=e.special??!1,this.normalized=e.normalized??null}}class TokenizerModel extends Callable{constructor(e){super(),this.config=e,this.vocab=[],this.tokens_to_ids=new Map,this.unk_token_id=void 0,this.unk_token=void 0,this.end_of_word_suffix=void 0,this.fuse_unk=this.config.fuse_unk??!1}static fromConfig(e,...t){switch(e.type){case"WordPiece":return new WordPieceTokenizer(e);case"Unigram":return new Unigram(e,...t);case"BPE":return new BPE(e);default:if(e.vocab)return new LegacyTokenizerModel(e,...t);throw new Error(`Unknown TokenizerModel type: ${e.type}`)}}_call(e){let t=this.encode(e);return this.fuse_unk&&(t=fuse(t,this.unk_token_id,this.tokens_to_ids)),t}encode(e){throw Error("encode should be implemented in subclass.")}convert_tokens_to_ids(e){return e.map(t=>this.tokens_to_ids.get(t)??this.unk_token_id)}convert_ids_to_tokens(e){return e.map(t=>this.vocab[t]??this.unk_token)}}class WordPieceTokenizer extends TokenizerModel{constructor(e){super(e),this.tokens_to_ids=objectToMap(e.vocab),this.unk_token_id=this.tokens_to_ids.get(e.unk_token),this.unk_token=e.unk_token,this.max_input_chars_per_word=e.max_input_chars_per_word??100,this.vocab=new Array(this.tokens_to_ids.size);for(const[t,r]of this.tokens_to_ids)this.vocab[r]=t}encode(e){const t=[];for(const r of e){const u=[...r];if(u.length>this.max_input_chars_per_word){t.push(this.unk_token);continue}let T=!1,d=0;const A=[];for(;d<u.length;){let le=u.length,G=null;for(;d<le;){let B=u.slice(d,le).join("");if(d>0&&(B=this.config.continuing_subword_prefix+B),this.tokens_to_ids.has(B)){G=B;break}--le}if(G===null){T=!0;break}A.push(G),d=le}T?t.push(this.unk_token):t.push(...A)}return t}}class Unigram extends TokenizerModel{constructor(e,t){super(e);const r=e.vocab.length;this.vocab=new Array(r),this.scores=new Array(r);for(let u=0;u<r;++u){const T=e.vocab[u];this.vocab[u]=T[0],this.scores[u]=T[1]}this.unk_token_id=e.unk_id,this.unk_token=this.vocab[e.unk_id],this.tokens_to_ids=new Map(this.vocab.map((u,T)=>[u,T])),this.bosToken=" ",this.bosTokenId=this.tokens_to_ids.get(this.bosToken),this.eosToken=t.eos_token,this.eosTokenId=this.tokens_to_ids.get(this.eosToken),this.unkToken=this.vocab[this.unk_token_id],this.minScore=min(this.scores)[0],this.unkScore=this.minScore-10,this.scores[this.unk_token_id]=this.unkScore,this.trie=new CharTrie,this.trie.extend(this.vocab),this.fuse_unk=!0}populateNodes(e){const t=e.sentence,r=t.length;let u=0;for(;u<r;){let d=!1;for(let A of this.trie.commonPrefixSearch(t.slice(u))){const le=this.tokens_to_ids.get(A),G=this.scores[le],B=A.length;e.insert(u,B,G,le),!d&&B===1&&(d=!0)}d||e.insert(u,1,this.unkScore,this.unk_token_id),u+=1}}tokenize(e){const t=new TokenLattice(e,this.bosTokenId,this.eosTokenId);return this.populateNodes(t),t.tokens()}encode(e){const t=[];for(const r of e){const u=this.tokenize(r);t.push(...u)}return t}}const BYTES_TO_UNICODE=(()=>{const n=[...Array.from({length:94},(u,T)=>T+33),...Array.from({length:12},(u,T)=>T+161),...Array.from({length:82},(u,T)=>T+174)],e=n.slice();let t=0;for(let u=0;u<256;++u)n.includes(u)||(n.push(u),e.push(256+t),t+=1);const r=e.map(u=>String.fromCharCode(u));return Object.fromEntries(n.map((u,T)=>[u,r[T]]))})(),UNICODE_TO_BYTES=reverseDictionary(BYTES_TO_UNICODE);class BPE extends TokenizerModel{constructor(e){super(e),this.BPE_SPLIT_TOKEN=" ",this.tokens_to_ids=objectToMap(e.vocab),this.unk_token_id=this.tokens_to_ids.get(e.unk_token),this.unk_token=e.unk_token,this.vocab=new Array(this.tokens_to_ids.size);for(const[t,r]of this.tokens_to_ids)this.vocab[r]=t;this.bpe_ranks=new Map(e.merges.map((t,r)=>[t,r])),this.merges=e.merges.map(t=>t.split(this.BPE_SPLIT_TOKEN)),this.end_of_word_suffix=e.end_of_word_suffix,this.continuing_subword_suffix=e.continuing_subword_suffix??null,this.byte_fallback=this.config.byte_fallback??!1,this.byte_fallback&&(this.text_encoder=new TextEncoder),this.cache=new Map}bpe(e){if(e.length===0)return[];const t=this.cache.get(e);if(t!==void 0)return t;const r=Array.from(e);this.end_of_word_suffix&&(r[r.length-1]+=this.end_of_word_suffix);let u=[];if(r.length>1){const T=new PriorityQueue((le,G)=>le.score<G.score);let d={token:r[0],bias:0,prev:null,next:null},A=d;for(let le=1;le<r.length;++le){const G={bias:le/r.length,token:r[le],prev:A,next:null};A.next=G,this._add_node(T,A),A=G}for(;!T.isEmpty();){const le=T.pop();if(le.deleted||!le.next||le.next.deleted)continue;if(le.deleted=!0,le.next.deleted=!0,le.prev){const B={...le.prev};le.prev.deleted=!0,le.prev=B,B.prev?B.prev.next=B:d=B}const G={token:le.token+le.next.token,bias:le.bias,prev:le.prev,next:le.next.next};G.prev?(G.prev.next=G,this._add_node(T,G.prev)):d=G,G.next&&(G.next.prev=G,this._add_node(T,G))}for(let le=d;le!==null;le=le.next)u.push(le.token)}else u=r;if(this.continuing_subword_suffix)for(let T=0;T<u.length-1;++T)u[T]+=this.continuing_subword_suffix;return this.cache.set(e,u),u}_add_node(e,t){const r=this.bpe_ranks.get(t.token+this.BPE_SPLIT_TOKEN+t.next.token);r!==void 0&&(t.score=r+t.bias,e.push(t))}encode(e){const t=[];for(const r of e){const u=this.bpe(r);for(const T of u)this.tokens_to_ids.has(T)?t.push(T):this.byte_fallback?t.push(...Array.from(this.text_encoder.encode(T)).map(d=>`<0x${d.toString(16).toUpperCase().padStart(2,"0")}>`)):t.push(this.unk_token)}return t}}class LegacyTokenizerModel extends TokenizerModel{constructor(e,t){super(e),this.tokens_to_ids=objectToMap(t.target_lang?e.vocab[t.target_lang]:e.vocab),this.bos_token=t.bos_token,this.bos_token_id=this.tokens_to_ids.get(this.bos_token),this.eos_token=t.eos_token,this.eos_token_id=this.tokens_to_ids.get(this.eos_token),this.pad_token=t.pad_token,this.pad_token_id=this.tokens_to_ids.get(this.pad_token),this.unk_token=t.unk_token,this.unk_token_id=this.tokens_to_ids.get(this.unk_token),this.vocab=new Array(this.tokens_to_ids.size);for(const[r,u]of this.tokens_to_ids)this.vocab[u]=r}encode(e){return e}}class Normalizer extends Callable{constructor(e){super(),this.config=e}static fromConfig(e){if(e===null)return null;switch(e.type){case"BertNormalizer":return new BertNormalizer(e);case"Precompiled":return new Precompiled(e);case"Sequence":return new NormalizerSequence(e);case"Replace":return new Replace(e);case"NFC":return new NFC(e);case"NFKC":return new NFKC(e);case"NFKD":return new NFKD(e);case"Strip":return new StripNormalizer(e);case"StripAccents":return new StripAccents(e);case"Lowercase":return new Lowercase(e);case"Prepend":return new Prepend(e);default:throw new Error(`Unknown Normalizer type: ${e.type}`)}}normalize(e){throw Error("normalize should be implemented in subclass.")}_call(e){return this.normalize(e)}}class Replace extends Normalizer{normalize(e){const t=createPattern(this.config.pattern);return t===null?e:e.replaceAll(t,this.config.content)}}class NFC extends Normalizer{normalize(e){return e=e.normalize("NFC"),e}}class NFKC extends Normalizer{normalize(e){return e=e.normalize("NFKC"),e}}class NFKD extends Normalizer{normalize(e){return e=e.normalize("NFKD"),e}}class StripNormalizer extends Normalizer{normalize(e){return this.config.strip_left&&this.config.strip_right?e=e.trim():(this.config.strip_left&&(e=e.trimStart()),this.config.strip_right&&(e=e.trimEnd())),e}}class StripAccents extends Normalizer{normalize(e){return e=remove_accents(e),e}}class Lowercase extends Normalizer{normalize(e){return e=e.toLowerCase(),e}}class Prepend extends Normalizer{normalize(e){return e=this.config.prepend+e,e}}class NormalizerSequence extends Normalizer{constructor(e){super(e),this.normalizers=e.normalizers.map(t=>Normalizer.fromConfig(t))}normalize(e){return this.normalizers.reduce((t,r)=>r.normalize(t),e)}}class BertNormalizer extends Normalizer{_tokenize_chinese_chars(e){const t=[];for(let r=0;r<e.length;++r){const u=e[r],T=u.charCodeAt(0);this._is_chinese_char(T)?(t.push(" "),t.push(u),t.push(" ")):t.push(u)}return t.join("")}_is_chinese_char(e){return e>=19968&&e<=40959||e>=13312&&e<=19903||e>=131072&&e<=173791||e>=173824&&e<=177983||e>=177984&&e<=178207||e>=178208&&e<=183983||e>=63744&&e<=64255||e>=194560&&e<=195103}stripAccents(e){return e.normalize("NFD").replace(/[\u0300-\u036f]/g,"")}_is_control(e){switch(e){case"	":case`
`:case"\r":return!1;default:return new RegExp("^\\p{Cc}|\\p{Cf}|\\p{Co}|\\p{Cs}$","u").test(e)}}_clean_text(e){const t=[];for(const r of e){const u=r.charCodeAt(0);u===0||u===65533||this._is_control(r)||(/^\s$/.test(r)?t.push(" "):t.push(r))}return t.join("")}normalize(e){return this.config.clean_text&&(e=this._clean_text(e)),this.config.handle_chinese_chars&&(e=this._tokenize_chinese_chars(e)),this.config.lowercase?(e=e.toLowerCase(),this.config.strip_accents!==!1&&(e=this.stripAccents(e))):this.config.strip_accents&&(e=this.stripAccents(e)),e}}class PreTokenizer extends Callable{static fromConfig(e){if(e===null)return null;switch(e.type){case"BertPreTokenizer":return new BertPreTokenizer(e);case"Sequence":return new PreTokenizerSequence(e);case"WhitespaceSplit":return new WhitespaceSplit(e);case"Metaspace":return new MetaspacePreTokenizer(e);case"ByteLevel":return new ByteLevelPreTokenizer(e);case"Split":return new SplitPreTokenizer(e);case"Punctuation":return new PunctuationPreTokenizer(e);case"Digits":return new DigitsPreTokenizer(e);case"Replace":return new ReplacePreTokenizer(e);default:throw new Error(`Unknown PreTokenizer type: ${e.type}`)}}pre_tokenize_text(e,t){throw Error("pre_tokenize_text should be implemented in subclass.")}pre_tokenize(e,t){return(Array.isArray(e)?e.map(r=>this.pre_tokenize_text(r,t)):this.pre_tokenize_text(e,t)).flat()}_call(e,t){return this.pre_tokenize(e,t)}}class BertPreTokenizer extends PreTokenizer{constructor(e){super(),this.pattern=new RegExp(`[^\\s${PUNCTUATION_REGEX}]+|[${PUNCTUATION_REGEX}]`,"gu")}pre_tokenize_text(e,t){return e.trim().match(this.pattern)||[]}}class ByteLevelPreTokenizer extends PreTokenizer{constructor(e){super(),this.config=e,this.add_prefix_space=this.config.add_prefix_space,this.trim_offsets=this.config.trim_offsets,this.use_regex=this.config.use_regex??!0,this.pattern=new RegExp("'s|'t|'re|'ve|'m|'ll|'d| ?\\p{L}+| ?\\p{N}+| ?[^\\s\\p{L}\\p{N}]+|\\s+(?!\\S)|\\s+","gu"),this.byte_encoder=BYTES_TO_UNICODE,this.text_encoder=new TextEncoder}pre_tokenize_text(e,t){return this.add_prefix_space&&!e.startsWith(" ")&&(e=" "+e),(this.use_regex?e.match(this.pattern)||[]:[e]).map(u=>Array.from(this.text_encoder.encode(u),T=>this.byte_encoder[T]).join(""))}}class SplitPreTokenizer extends PreTokenizer{constructor(e){super(),this.config=e,this.pattern=createPattern(this.config.pattern,this.config.invert)}pre_tokenize_text(e,t){return this.pattern===null?[]:this.config.invert?e.match(this.pattern)||[]:regexSplit(e,this.pattern)}}class PunctuationPreTokenizer extends PreTokenizer{constructor(e){super(),this.config=e,this.pattern=new RegExp(`[^${PUNCTUATION_REGEX}]+|[${PUNCTUATION_REGEX}]+`,"gu")}pre_tokenize_text(e,t){return e.match(this.pattern)||[]}}class DigitsPreTokenizer extends PreTokenizer{constructor(e){super(),this.config=e;const t=`[^\\d]+|\\d${this.config.individual_digits?"":"+"}`;this.pattern=new RegExp(t,"gu")}pre_tokenize_text(e,t){return e.match(this.pattern)||[]}}class PostProcessor extends Callable{constructor(e){super(),this.config=e}static fromConfig(e){if(e===null)return null;switch(e.type){case"TemplateProcessing":return new TemplateProcessing(e);case"ByteLevel":return new ByteLevelPostProcessor(e);case"RobertaProcessing":return new RobertaProcessing(e);case"BertProcessing":return new BertProcessing(e);default:throw new Error(`Unknown PostProcessor type: ${e.type}`)}}post_process(e,...t){throw Error("post_process should be implemented in subclass.")}_call(e,...t){return this.post_process(e,...t)}}class BertProcessing extends PostProcessor{constructor(e){super(e),this.cls=e.cls[0],this.sep=e.sep[0]}post_process(e,t=null,{add_special_tokens:r=!0}={}){r&&(e=mergeArrays([this.cls],e,[this.sep]));let u=new Array(e.length).fill(0);if(t!==null){const T=r&&this instanceof RobertaProcessing?[this.sep]:[],d=r?[this.sep]:[];e=mergeArrays(e,T,t,d),u=mergeArrays(u,new Array(t.length+T.length+d.length).fill(1))}return{tokens:e,token_type_ids:u}}}class RobertaProcessing extends BertProcessing{}class TemplateProcessing extends PostProcessor{constructor(e){super(e),this.single=e.single,this.pair=e.pair}post_process(e,t=null,{add_special_tokens:r=!0}={}){const u=t===null?this.single:this.pair;let T=[],d=[];for(const A of u)"SpecialToken"in A?r&&(T.push(A.SpecialToken.id),d.push(A.SpecialToken.type_id)):"Sequence"in A&&(A.Sequence.id==="A"?(T=mergeArrays(T,e),d=mergeArrays(d,new Array(e.length).fill(A.Sequence.type_id))):A.Sequence.id==="B"&&(T=mergeArrays(T,t),d=mergeArrays(d,new Array(t.length).fill(A.Sequence.type_id))));return{tokens:T,token_type_ids:d}}}class ByteLevelPostProcessor extends PostProcessor{post_process(e,t=null){return t&&(e=mergeArrays(e,t)),{tokens:e}}}class Decoder extends Callable{constructor(e){super(),this.config=e,this.added_tokens=[],this.end_of_word_suffix=null,this.trim_offsets=e.trim_offsets}static fromConfig(e){if(e===null)return null;switch(e.type){case"WordPiece":return new WordPieceDecoder(e);case"Metaspace":return new MetaspaceDecoder(e);case"ByteLevel":return new ByteLevelDecoder(e);case"Replace":return new ReplaceDecoder(e);case"ByteFallback":return new ByteFallback(e);case"Fuse":return new FuseDecoder(e);case"Strip":return new StripDecoder(e);case"Sequence":return new DecoderSequence(e);case"CTC":return new CTCDecoder(e);case"BPEDecoder":return new BPEDecoder(e);default:throw new Error(`Unknown Decoder type: ${e.type}`)}}_call(e){return this.decode(e)}decode(e){return this.decode_chain(e).join("")}decode_chain(e){throw Error("`decode_chain` should be implemented in subclass.")}}class ReplaceDecoder extends Decoder{decode_chain(e){const t=createPattern(this.config.pattern);return t===null?e:e.map(r=>r.replaceAll(t,this.config.content))}}class ByteFallback extends Decoder{constructor(e){super(e),this.text_decoder=new TextDecoder}decode_chain(e){const t=[];let r=[];for(const u of e){let T=null;if(u.length===6&&u.startsWith("<0x")&&u.endsWith(">")){const d=parseInt(u.slice(3,5),16);isNaN(d)||(T=d)}if(T!==null)r.push(T);else{if(r.length>0){const d=this.text_decoder.decode(Uint8Array.from(r));t.push(d),r=[]}t.push(u)}}if(r.length>0){const u=this.text_decoder.decode(Uint8Array.from(r));t.push(u),r=[]}return t}}class FuseDecoder extends Decoder{decode_chain(e){return[e.join("")]}}class StripDecoder extends Decoder{constructor(e){super(e),this.content=this.config.content,this.start=this.config.start,this.stop=this.config.stop}decode_chain(e){return e.map(t=>{let r=0;for(let T=0;T<this.start&&t[T]===this.content;++T){r=T+1;continue}let u=t.length;for(let T=0;T<this.stop;++T){const d=t.length-T-1;if(t[d]===this.content){u=d;continue}else break}return t.slice(r,u)})}}class WordPieceDecoder extends Decoder{constructor(e){super(e),this.cleanup=e.cleanup}decode_chain(e){return e.map((t,r)=>(r!==0&&(t.startsWith(this.config.prefix)?t=t.replace(this.config.prefix,""):t=" "+t),this.cleanup&&(t=clean_up_tokenization(t)),t))}}class ByteLevelDecoder extends Decoder{constructor(e){super(e),this.byte_decoder=UNICODE_TO_BYTES,this.text_decoder=new TextDecoder("utf-8",{fatal:!1,ignoreBOM:!0}),this.end_of_word_suffix=null}convert_tokens_to_string(e){const t=e.join(""),r=new Uint8Array([...t].map(T=>this.byte_decoder[T]));return this.text_decoder.decode(r)}decode_chain(e){const t=[];let r=[];for(const u of e)this.added_tokens.find(T=>T.content===u)!==void 0?(r.length>0&&(t.push(this.convert_tokens_to_string(r)),r=[]),t.push(u)):r.push(u);return r.length>0&&t.push(this.convert_tokens_to_string(r)),t}}class CTCDecoder extends Decoder{constructor(e){super(e),this.pad_token=this.config.pad_token,this.word_delimiter_token=this.config.word_delimiter_token,this.cleanup=this.config.cleanup}convert_tokens_to_string(e){if(e.length===0)return"";const t=[e[0]];for(let T=1;T<e.length;++T)e[T]!==t.at(-1)&&t.push(e[T]);let u=t.filter(T=>T!==this.pad_token).join("");return this.cleanup&&(u=clean_up_tokenization(u).replaceAll(this.word_delimiter_token," ").trim()),u}decode_chain(e){return[this.convert_tokens_to_string(e)]}}class DecoderSequence extends Decoder{constructor(e){super(e),this.decoders=e.decoders.map(t=>Decoder.fromConfig(t))}decode_chain(e){return this.decoders.reduce((t,r)=>r.decode_chain(t),e)}}class BPEDecoder extends Decoder{constructor(e){super(e),this.suffix=this.config.suffix}decode_chain(e){return e.map((t,r)=>t.replaceAll(this.suffix,r===e.length-1?"":" "))}}class VitsDecoder extends Decoder{decode_chain(e){let t="";for(let r=1;r<e.length;r+=2)t+=e[r];return[t]}}class MetaspacePreTokenizer extends PreTokenizer{constructor(e){super(),this.addPrefixSpace=e.add_prefix_space,this.replacement=e.replacement,this.strRep=e.str_rep||this.replacement,this.prepend_scheme=e.prepend_scheme??"always"}pre_tokenize_text(e,{section_index:t=void 0}={}){let r=e.replaceAll(" ",this.strRep);return this.addPrefixSpace&&!r.startsWith(this.replacement)&&(this.prepend_scheme==="always"||this.prepend_scheme==="first"&&t===0)&&(r=this.strRep+r),[r]}}class MetaspaceDecoder extends Decoder{constructor(e){super(e),this.addPrefixSpace=e.add_prefix_space,this.replacement=e.replacement}decode_chain(e){const t=[];for(let r=0;r<e.length;++r){let u=e[r].replaceAll(this.replacement," ");this.addPrefixSpace&&r==0&&u.startsWith(" ")&&(u=u.substring(1)),t.push(u)}return t}}class Precompiled extends Normalizer{constructor(e){super(e),this.charsmap=e.precompiled_charsmap}normalize(e){return e=e.replace(/[\u0001-\u0008\u000B\u000E-\u001F\u007F\u008F\u009F]/gm,""),e=e.replace(/[\u0009\u000A\u000C\u000D\u1680\u200B\u200C\u200E\u200F\u2028\u2029\u2581\uFEFF\uFFFD]/gm," "),e.includes("")?e=e.split("").map(r=>r.normalize("NFKC")).join(""):e=e.normalize("NFKC"),e}}class PreTokenizerSequence extends PreTokenizer{constructor(e){super(),this.tokenizers=e.pretokenizers.map(t=>PreTokenizer.fromConfig(t))}pre_tokenize_text(e,t){return this.tokenizers.reduce((r,u)=>u.pre_tokenize(r,t),[e])}}class WhitespaceSplit extends PreTokenizer{constructor(e){super()}pre_tokenize_text(e,t){return whitespace_split(e)}}class ReplacePreTokenizer extends PreTokenizer{constructor(e){super(),this.config=e,this.pattern=createPattern(this.config.pattern),this.content=this.config.content}pre_tokenize_text(e,t){return this.pattern===null?[e]:[e.replaceAll(this.pattern,this.config.content)]}}const SPECIAL_TOKEN_ATTRIBUTES=["bos_token","eos_token","unk_token","sep_token","pad_token","cls_token","mask_token"];function padHelper(n,e,t,r){for(const u of Object.keys(n)){const T=e-n[u].length,d=t(u),A=new Array(T).fill(d);n[u]=r==="right"?mergeArrays(n[u],A):mergeArrays(A,n[u])}}function truncateHelper(n,e){for(const t of Object.keys(n))n[t].length=e}class PreTrainedTokenizer extends Callable{constructor(t,r){super();Mt(this,"return_token_type_ids",!1);Mt(this,"_default_chat_template",`{% for message in messages %}{{'<|im_start|>' + message['role'] + '
' + message['content'] + '<|im_end|>' + '
'}}{% endfor %}{% if add_generation_prompt %}{{ '<|im_start|>assistant
' }}{% endif %}`);this._tokenizer_config=r,this.normalizer=Normalizer.fromConfig(t.normalizer),this.pre_tokenizer=PreTokenizer.fromConfig(t.pre_tokenizer),this.model=TokenizerModel.fromConfig(t.model,r),this.post_processor=PostProcessor.fromConfig(t.post_processor),this.decoder=Decoder.fromConfig(t.decoder),this.special_tokens=[],this.all_special_ids=[],this.added_tokens=[];for(const u of t.added_tokens){const T=new AddedToken(u);this.added_tokens.push(T),this.model.tokens_to_ids.set(T.content,T.id),this.model.vocab[T.id]=T.content,T.special&&(this.special_tokens.push(T.content),this.all_special_ids.push(T.id))}this.additional_special_tokens=r.additional_special_tokens??[],this.special_tokens.push(...this.additional_special_tokens),this.special_tokens=[...new Set(this.special_tokens)],this.decoder&&(this.decoder.added_tokens=this.added_tokens,this.decoder.end_of_word_suffix=this.model.end_of_word_suffix),this.added_tokens_regex=this.added_tokens.length>0?new RegExp(this.added_tokens.map(u=>`${u.lstrip?"\\s*":""}(${escapeRegExp(u.content)})${u.rstrip?"\\s*":""}`).join("|")):null,this.mask_token=this.getToken("mask_token"),this.mask_token_id=this.model.tokens_to_ids.get(this.mask_token),this.pad_token=this.getToken("pad_token","eos_token"),this.pad_token_id=this.model.tokens_to_ids.get(this.pad_token),this.sep_token=this.getToken("sep_token"),this.sep_token_id=this.model.tokens_to_ids.get(this.sep_token),this.unk_token=this.getToken(r,"unk_token"),this.unk_token_id=this.model.tokens_to_ids.get(this.unk_token),this.model_max_length=r.model_max_length,this.remove_space=r.remove_space,this.clean_up_tokenization_spaces=r.clean_up_tokenization_spaces??!0,this.do_lowercase_and_remove_accent=r.do_lowercase_and_remove_accent??!1,this.padding_side="right",this.legacy=!1,this.chat_template=r.chat_template??null,this._compiled_template_cache=new Map}getToken(...t){for(const r of t){const u=this._tokenizer_config[r];if(u)if(typeof u=="object"){if(u.__type==="AddedToken")return u.content;throw Error(`Unknown token: ${u}`)}else return u}return null}static async from_pretrained(t,{progress_callback:r=null,config:u=null,cache_dir:T=null,local_files_only:d=!1,revision:A="main",legacy:le=null}={}){const G=await loadTokenizer(t,{progress_callback:r,cache_dir:T,local_files_only:d,revision:A,legacy:le});return new this(...G)}_call(t,{text_pair:r=null,add_special_tokens:u=!0,padding:T=!1,truncation:d=null,max_length:A=null,return_tensor:le=!0}={}){const G=Array.isArray(t);let B;if(G){if(t.length===0)throw Error("text array must be non-empty");if(r!==null){if(Array.isArray(r)){if(t.length!==r.length)throw Error("text and text_pair must have the same length")}else throw Error("text_pair must also be an array");B=t.map((i,w)=>this._encode_plus(i,r[w],{add_special_tokens:u}))}else B=t.map(i=>this._encode_plus(i,null,{add_special_tokens:u}))}else{if(t===null)throw Error("text may not be null");if(Array.isArray(r))throw Error("When specifying `text_pair`, since `text` is a string, `text_pair` must also be a string (i.e., not an array).");B=[this._encode_plus(t,r,{add_special_tokens:u})]}if(A===null?T==="max_length"?A=this.model_max_length:A=max(B.map(i=>i.input_ids.length))[0]:d||console.warn("Truncation was not explicitly activated but `max_length` is provided a specific value, please use `truncation=true` to explicitly truncate examples to max length."),A=Math.min(A,this.model_max_length),T||d)for(let i=0;i<B.length;++i)B[i].input_ids.length!==A&&(B[i].input_ids.length>A?d&&truncateHelper(B[i],A):T&&padHelper(B[i],A,w=>w==="input_ids"?this.pad_token_id:0,this.padding_side));const o={};if(le){if(!(T&&d)&&B.some(w=>{var ae;for(const ue of Object.keys(w))if(w[ue].length!==((ae=B[0][ue])==null?void 0:ae.length))return!0;return!1}))throw Error("Unable to create tensor, you should probably activate truncation and/or padding with 'padding=true' and 'truncation=true' to have batched tensors with the same length.");const i=[B.length,B[0].input_ids.length];for(const w of Object.keys(B[0]))o[w]=new Tensor("int64",BigInt64Array.from(B.flatMap(ae=>ae[w]).map(BigInt)),i)}else{for(const i of Object.keys(B[0]))o[i]=B.map(w=>w[i]);if(!G)for(const i of Object.keys(o))o[i]=o[i][0]}return o}_encode_text(t){return t===null?null:(this.added_tokens_regex?t.split(this.added_tokens_regex).filter(T=>T):[t]).map((T,d)=>{if(this.added_tokens.find(le=>le.content===T)!==void 0)return T;{this.remove_space===!0&&(T=T.trim().split(/\s+/).join(" ")),this.do_lowercase_and_remove_accent&&(T=lowercase_and_remove_accent(T)),this.normalizer!==null&&(T=this.normalizer(T));const le=this.pre_tokenizer!==null?this.pre_tokenizer(T,{section_index:d}):[T];return this.model(le)}}).flat()}_encode_plus(t,r=null,{add_special_tokens:u=!0}={}){const T=this._encode_text(t),d=this._encode_text(r),A=this.post_processor?this.post_processor(T,d,{add_special_tokens:u}):{tokens:mergeArrays(T??[],d??[])},le=this.model.convert_tokens_to_ids(A.tokens),G={input_ids:le,attention_mask:new Array(le.length).fill(1)};return this.return_token_type_ids&&A.token_type_ids&&(G.token_type_ids=A.token_type_ids),G}encode(t,r=null,{add_special_tokens:u=!0}={}){const{input_ids:T}=this._encode_plus(t,r,{add_special_tokens:u});return T}batch_decode(t,r={}){return t instanceof Tensor&&(t=t.tolist()),t.map(u=>this.decode(u,r))}decode(t,r={}){if(t instanceof Tensor&&(t=prepareTensorForDecode(t)),!Array.isArray(t)||t.length===0||!isIntegralNumber(t[0]))throw Error("token_ids must be a non-empty array of integers.");return this.decode_single(t,r)}decode_single(t,{skip_special_tokens:r=!1,clean_up_tokenization_spaces:u=null}){let T=this.model.convert_ids_to_tokens(t);r&&(T=T.filter(A=>!this.special_tokens.includes(A)));let d=this.decoder?this.decoder(T):T.join(" ");return this.decoder&&this.decoder.end_of_word_suffix&&(d=d.replaceAll(this.decoder.end_of_word_suffix," "),r&&(d=d.trim())),(u??this.clean_up_tokenization_spaces)&&(d=clean_up_tokenization(d)),d}get default_chat_template(){return this._warned_about_chat_template||(console.warn("No chat template is defined for this tokenizer - using a default chat template that implements the ChatML format. If the default is not appropriate for your model, please set `tokenizer.chat_template` to an appropriate template. See https://huggingface.co/docs/transformers/main/chat_templating for more information."),this._warned_about_chat_template=!0),this._default_chat_template}apply_chat_template(t,{chat_template:r=null,add_generation_prompt:u=!1,tokenize:T=!0,padding:d=!1,truncation:A=!1,max_length:le=null,return_tensor:G=!0}={}){r??(r=this.chat_template??this.default_chat_template);let B=this._compiled_template_cache.get(r);B===void 0&&(B=new Template(r),this._compiled_template_cache.set(r,B));const o=Object.create(null);for(const w of SPECIAL_TOKEN_ATTRIBUTES){const ae=this.getToken(w);ae&&(o[w]=ae)}const i=B.render({messages:t,add_generation_prompt:u,...o});return T?this._call(i,{add_special_tokens:!1,padding:d,truncation:A,max_length:le,return_tensor:G}).input_ids:i}}class BertTokenizer extends PreTrainedTokenizer{constructor(){super(...arguments);Mt(this,"return_token_type_ids",!0)}}class AlbertTokenizer extends PreTrainedTokenizer{constructor(){super(...arguments);Mt(this,"return_token_type_ids",!0)}}class MobileBertTokenizer extends PreTrainedTokenizer{constructor(){super(...arguments);Mt(this,"return_token_type_ids",!0)}}class SqueezeBertTokenizer extends PreTrainedTokenizer{constructor(){super(...arguments);Mt(this,"return_token_type_ids",!0)}}class DebertaTokenizer extends PreTrainedTokenizer{constructor(){super(...arguments);Mt(this,"return_token_type_ids",!0)}}class DebertaV2Tokenizer extends PreTrainedTokenizer{constructor(){super(...arguments);Mt(this,"return_token_type_ids",!0)}}class HerbertTokenizer extends PreTrainedTokenizer{constructor(){super(...arguments);Mt(this,"return_token_type_ids",!0)}}class ConvBertTokenizer extends PreTrainedTokenizer{constructor(){super(...arguments);Mt(this,"return_token_type_ids",!0)}}class RoFormerTokenizer extends PreTrainedTokenizer{constructor(){super(...arguments);Mt(this,"return_token_type_ids",!0)}}class DistilBertTokenizer extends PreTrainedTokenizer{}class CamembertTokenizer extends PreTrainedTokenizer{}class XLMTokenizer extends PreTrainedTokenizer{constructor(t,r){super(t,r);Mt(this,"return_token_type_ids",!0);console.warn('WARNING: `XLMTokenizer` is not yet supported by Hugging Face\'s "fast" tokenizers library. Therefore, you may experience slightly inaccurate results.')}}class ElectraTokenizer extends PreTrainedTokenizer{constructor(){super(...arguments);Mt(this,"return_token_type_ids",!0)}}class T5Tokenizer extends PreTrainedTokenizer{}class GPT2Tokenizer extends PreTrainedTokenizer{constructor(){super(...arguments);Mt(this,"_default_chat_template",'{% for message in messages %}" "{{ message.content }}{{ eos_token }}" "{% endfor %}')}}class BartTokenizer extends PreTrainedTokenizer{}class MBartTokenizer extends PreTrainedTokenizer{constructor(e,t){super(e,t),this.languageRegex=/^[a-z]{2}_[A-Z]{2}$/,this.language_codes=this.special_tokens.filter(r=>this.languageRegex.test(r)),this.lang_to_token=r=>r}_build_translation_inputs(e,t,r){return _build_translation_inputs(this,e,t,r)}}class MBart50Tokenizer extends MBartTokenizer{}class RobertaTokenizer extends PreTrainedTokenizer{}class BloomTokenizer extends GPT2Tokenizer{constructor(e,t){var T,d;const r=".,!?",u=(d=(T=e.pre_tokenizer)==null?void 0:T.pretokenizers[0])==null?void 0:d.pattern;u&&u.Regex===` ?[^(\\s|[${r}])]+`&&(u.Regex=` ?[^\\s${r}]+`),super(e,t)}}const SPIECE_UNDERLINE="";class LlamaTokenizer extends PreTrainedTokenizer{constructor(t,r){super(t,r);Mt(this,"_default_chat_template",`{% if messages[0]['role'] == 'system' %}{% set loop_messages = messages[1:] %}{% set system_message = messages[0]['content'] %}{% elif USE_DEFAULT_PROMPT == true and not '<<SYS>>' in messages[0]['content'] %}{% set loop_messages = messages %}{% set system_message = 'DEFAULT_SYSTEM_MESSAGE' %}{% else %}{% set loop_messages = messages %}{% set system_message = false %}{% endif %}{% for message in loop_messages %}{% if (message['role'] == 'user') != (loop.index0 % 2 == 0) %}{{ raise_exception('Conversation roles must alternate user/assistant/user/assistant/...') }}{% endif %}{% if loop.index0 == 0 and system_message != false %}{% set content = '<<SYS>>
' + system_message + '
<</SYS>>

' + message['content'] %}{% else %}{% set content = message['content'] %}{% endif %}{% if message['role'] == 'user' %}{{ bos_token + '[INST] ' + content.strip() + ' [/INST]' }}{% elif message['role'] == 'system' %}{{ '<<SYS>>
' + content.strip() + '
<</SYS>>

' }}{% elif message['role'] == 'assistant' %}{{ ' '  + content.strip() + ' ' + eos_token }}{% endif %}{% endfor %}`);Mt(this,"DEFAULT_SYSTEM_PROMPT",`You are a helpful, respectful and honest assistant. Always answer as helpfully as possible, while being safe. Your answers should not include any harmful, unethical, racist, sexist, toxic, dangerous, or illegal content. Please ensure that your responses are socially unbiased and positive in nature.

If a question does not make any sense, or is not factually coherent, explain why instead of answering something not correct. If you don't know the answer to a question, please don't share false information.`);this.use_default_system_prompt=r.use_default_system_prompt??!1,this.legacy=r.legacy??!0,this.legacy||(this.normalizer=null,this.pre_tokenizer=new MetaspacePreTokenizer({replacement:SPIECE_UNDERLINE,add_prefix_space:!0,prepend_scheme:"first"}))}_encode_text(t){if(t===null)return null;if(this.legacy||t.length===0)return super._encode_text(t);let r=super._encode_text(SPIECE_UNDERLINE+t.replaceAll(SPIECE_UNDERLINE," "));return r.length>1&&r[0]===SPIECE_UNDERLINE&&this.special_tokens.includes(r[1])&&(r=r.slice(1)),r}get default_chat_template(){return super.default_chat_template.replaceAll("USE_DEFAULT_PROMPT",this.use_default_system_prompt?"true":"false").replaceAll("DEFAULT_SYSTEM_MESSAGE",this.DEFAULT_SYSTEM_PROMPT.replaceAll(`
`,"\\n").replaceAll("'","\\'"))}}class CodeLlamaTokenizer extends LlamaTokenizer{}class XLMRobertaTokenizer extends PreTrainedTokenizer{}class MPNetTokenizer extends PreTrainedTokenizer{}class FalconTokenizer extends PreTrainedTokenizer{}class GPTNeoXTokenizer extends PreTrainedTokenizer{}class EsmTokenizer extends PreTrainedTokenizer{}function _build_translation_inputs(n,e,t,r){if(!("language_codes"in n)||!Array.isArray(n.language_codes))throw new Error("Tokenizer must have `language_codes` attribute set and it should be an array of language ids.");if(!("languageRegex"in n)||!(n.languageRegex instanceof RegExp))throw new Error("Tokenizer must have `languageRegex` attribute set and it should be a regular expression.");if(!("lang_to_token"in n)||typeof n.lang_to_token!="function")throw new Error("Tokenizer must have `lang_to_token` attribute set and it should be a function.");const u=r.src_lang,T=r.tgt_lang;if(!n.language_codes.includes(T))throw new Error(`Target language code "${T}" is not valid. Must be one of: {${n.language_codes.join(", ")}}`);if(u!==void 0){if(!n.language_codes.includes(u))throw new Error(`Source language code "${u}" is not valid. Must be one of: {${n.language_codes.join(", ")}}`);for(const d of n.post_processor.config.single)if("SpecialToken"in d&&n.languageRegex.test(d.SpecialToken.id)){d.SpecialToken.id=n.lang_to_token(u);break}}return r.forced_bos_token_id=n.model.convert_tokens_to_ids([n.lang_to_token(T)])[0],n._call(e,t)}class NllbTokenizer extends PreTrainedTokenizer{constructor(e,t){super(e,t),this.languageRegex=/^[a-z]{3}_[A-Z][a-z]{3}$/,this.language_codes=this.special_tokens.filter(r=>this.languageRegex.test(r)),this.lang_to_token=r=>r}_build_translation_inputs(e,t,r){return _build_translation_inputs(this,e,t,r)}}class M2M100Tokenizer extends PreTrainedTokenizer{constructor(e,t){super(e,t),this.languageRegex=/^__[a-z]{2,3}__$/,this.language_codes=this.special_tokens.filter(r=>this.languageRegex.test(r)).map(r=>r.slice(2,-2)),this.lang_to_token=r=>`__${r}__`}_build_translation_inputs(e,t,r){return _build_translation_inputs(this,e,t,r)}}const WHISPER_LANGUAGES=[["en","english"],["zh","chinese"],["de","german"],["es","spanish"],["ru","russian"],["ko","korean"],["fr","french"],["ja","japanese"],["pt","portuguese"],["tr","turkish"],["pl","polish"],["ca","catalan"],["nl","dutch"],["ar","arabic"],["sv","swedish"],["it","italian"],["id","indonesian"],["hi","hindi"],["fi","finnish"],["vi","vietnamese"],["he","hebrew"],["uk","ukrainian"],["el","greek"],["ms","malay"],["cs","czech"],["ro","romanian"],["da","danish"],["hu","hungarian"],["ta","tamil"],["no","norwegian"],["th","thai"],["ur","urdu"],["hr","croatian"],["bg","bulgarian"],["lt","lithuanian"],["la","latin"],["mi","maori"],["ml","malayalam"],["cy","welsh"],["sk","slovak"],["te","telugu"],["fa","persian"],["lv","latvian"],["bn","bengali"],["sr","serbian"],["az","azerbaijani"],["sl","slovenian"],["kn","kannada"],["et","estonian"],["mk","macedonian"],["br","breton"],["eu","basque"],["is","icelandic"],["hy","armenian"],["ne","nepali"],["mn","mongolian"],["bs","bosnian"],["kk","kazakh"],["sq","albanian"],["sw","swahili"],["gl","galician"],["mr","marathi"],["pa","punjabi"],["si","sinhala"],["km","khmer"],["sn","shona"],["yo","yoruba"],["so","somali"],["af","afrikaans"],["oc","occitan"],["ka","georgian"],["be","belarusian"],["tg","tajik"],["sd","sindhi"],["gu","gujarati"],["am","amharic"],["yi","yiddish"],["lo","lao"],["uz","uzbek"],["fo","faroese"],["ht","haitian creole"],["ps","pashto"],["tk","turkmen"],["nn","nynorsk"],["mt","maltese"],["sa","sanskrit"],["lb","luxembourgish"],["my","myanmar"],["bo","tibetan"],["tl","tagalog"],["mg","malagasy"],["as","assamese"],["tt","tatar"],["haw","hawaiian"],["ln","lingala"],["ha","hausa"],["ba","bashkir"],["jw","javanese"],["su","sundanese"]],WHISPER_LANGUAGE_MAPPING=new Map(WHISPER_LANGUAGES),WHISPER_TO_LANGUAGE_CODE_MAPPING=new Map([...WHISPER_LANGUAGES.map(([n,e])=>[e,n]),["burmese","my"],["valencian","ca"],["flemish","nl"],["haitian","ht"],["letzeburgesch","lb"],["pushto","ps"],["panjabi","pa"],["moldavian","ro"],["moldovan","ro"],["sinhalese","si"],["castilian","es"]]);class WhisperTokenizer extends PreTrainedTokenizer{constructor(){super(...arguments);Mt(this,"_default_chat_template",'{% for message in messages %}" "{{ message.content }}{{ eos_token }}" "{% endfor %}')}_decode_asr(t,{return_timestamps:r=!1,return_language:u=!1,time_precision:T=null,force_full_sequences:d=!0}={}){if(T===null)throw Error("Must specify time_precision");let A=null;const le=r==="word";function G(){return{language:A,timestamp:[null,null],text:""}}const B=[];let o=G(),i=0;const w=this.model.convert_tokens_to_ids(["<|notimestamps|>"])[0]+1;let ae=[],ue=[],he=!1,pe=null;const ge=new Set(this.all_special_ids);for(const we of t){const Se=we.tokens,Ae=le?we.token_timestamps:null;let Re=null,Te=w;if("stride"in we){const[$e,He,De]=we.stride;if(i-=He,pe=$e-De,He&&(Te=He/T+w),De)for(let Xe=Se.length-1;Xe>=0;--Xe){const Me=Se[Xe];if(Me>=w){if(Re!==null&&(Me-w)*T<pe)break;Re=Me}}}let Ce=[],Ve=[];for(let $e=0;$e<Se.length;++$e){const He=Se[$e];if(ge.has(He)){const De=this.decode([He]),Xe=WHISPER_LANGUAGE_MAPPING.get(De.slice(2,-2));if(Xe!==void 0){if(A!==null&&Xe!==A&&!r){ae.push(Ce);const Me=this.findLongestCommonSequence(ae)[0],je=this.decode(Me);o.text=je,B.push(o),ae=[],Ce=[],o=G()}A=o.language=Xe}}else if(He>=w){const De=(He-w)*T+i,Xe=round(De,2);if(Re!==null&&He>=Re)he=!0;else if(he||ae.length>0&&He<Te)he=!1;else if(o.timestamp[0]===null)o.timestamp[0]=Xe;else if(Xe!==o.timestamp[0]){o.timestamp[1]=Xe,ae.push(Ce),le&&ue.push(Ve);const[Me,je]=this.findLongestCommonSequence(ae,ue),it=this.decode(Me);o.text=it,le&&(o.words=this.collateWordTimestamps(Me,je,A)),B.push(o),ae=[],Ce=[],ue=[],Ve=[],o=G()}}else if(Ce.push(He),le){let De=round(Ae[$e]+i,2),Xe;$e+1<Ae.length?Xe=round(Ae[$e+1]+i,2):Xe=null,Ve.push([De,Xe])}}if("stride"in we){const[$e,He,De]=we.stride;i+=$e-De}Ce.length>0?(ae.push(Ce),le&&ue.push(Ve)):ae.every($e=>$e.length===0)&&(o=G(),ae=[],Ce=[],ue=[],Ve=[])}if(ae.length>0){if(d&&r)throw new Error("Whisper did not predict an ending timestamp, which can happen if audio is cut off in the middle of a word. Also make sure WhisperTimeStampLogitsProcessor was used during generation.");const[we,Se]=this.findLongestCommonSequence(ae,ue),Ae=this.decode(we);o.text=Ae,le&&(o.words=this.collateWordTimestamps(we,Se,A)),B.push(o)}let be=Object.create(null);const ve=B.map(we=>we.text).join("");if(r||u){for(let we=0;we<B.length;++we){const Se=B[we];r||delete Se.timestamp,u||delete Se.language}if(le){const we=[];for(const Se of B)for(const Ae of Se.words)we.push(Ae);be={chunks:we}}else be={chunks:B}}return[ve,be]}findLongestCommonSequence(t,r=null){let u=t[0],T=u.length,d=[];const A=Array.isArray(r)&&r.length>0;let le=A?[]:null,G=A?r[0]:null;for(let B=1;B<t.length;++B){const o=t[B];let i=0,w=[T,T,0,0];const ae=o.length;for(let we=1;we<T+ae;++we){const Se=we/1e4,Ae=Math.max(0,T-we),Re=Math.min(T,T+ae-we),Te=u.slice(Ae,Re),Ce=Math.max(0,we-T),Ve=Math.min(ae,we),$e=o.slice(Ce,Ve);if(Te.length!==$e.length)throw new Error("There is a bug within whisper `decode_asr` function, please report it. Dropping to prevent bad inference.");const He=Te.filter((Xe,Me)=>Xe===$e[Me]).length,De=He/we+Se;He>1&&De>i&&(i=De,w=[Ae,Re,Ce,Ve])}const[ue,he,pe,ge]=w,be=Math.floor((he+ue)/2),ve=Math.floor((ge+pe)/2);d.push(...u.slice(0,be)),u=o.slice(ve),T=u.length,A&&(le.push(...G.slice(0,be)),G=r[B].slice(ve))}return d.push(...u),A?(le.push(...G),[d,le]):[d,[]]}collateWordTimestamps(t,r,u){const[T,d,A]=this.combineTokensIntoWords(t,u),le=[];for(let G=0;G<T.length;++G){const B=A[G];le.push({text:T[G],timestamp:[r[B.at(0)][0],r[B.at(-1)][1]]})}return le}combineTokensIntoWords(t,r,u=`"'([{-`,T=`"'.,!?:)]}`){r=r??"english";let d,A,le;return["chinese","japanese","thai","lao","myanmar"].includes(r)?[d,A,le]=this.splitTokensOnUnicode(t):[d,A,le]=this.splitTokensOnSpaces(t),this.mergePunctuations(d,A,le,u,T)}decode(t,r){let u;return r&&r.decode_with_timestamps?(t instanceof Tensor&&(t=prepareTensorForDecode(t)),u=this.decodeWithTimestamps(t,r)):u=super.decode(t,r),u}decodeWithTimestamps(t,r){const u=(r==null?void 0:r.time_precision)??.02,T=Array.from(this.all_special_ids).at(-1)+1;let d=[[]];for(const A of t)if(A>=T){const le=round((A-T)*u,2);d.push(`<|${le}|>`),d.push([])}else d[d.length-1].push(A);return d=d.map(A=>typeof A=="string"?A:super.decode(A,r)),d.join("")}splitTokensOnUnicode(t){const r=this.decode(t,{decode_with_timestamps:!0}),u="",T=[],d=[],A=[];let le=[],G=[],B=0;for(let o=0;o<t.length;++o){const i=t[o];le.push(i),G.push(o);const w=this.decode(le,{decode_with_timestamps:!0});(!w.includes(u)||r[B+w.indexOf(u)]===u)&&(T.push(w),d.push(le),A.push(G),le=[],G=[],B+=w.length)}return[T,d,A]}splitTokensOnSpaces(t){const[r,u,T]=this.splitTokensOnUnicode(t),d=[],A=[],le=[],G=new RegExp(`^[${PUNCTUATION_REGEX}]$`,"gu");for(let B=0;B<r.length;++B){const o=r[B],i=u[B],w=T[B],ae=i[0]>=this.model.tokens_to_ids.get("<|endoftext|>"),ue=o.startsWith(" "),he=o.trim(),pe=G.test(he);if(ae||ue||pe||d.length===0)d.push(o),A.push(i),le.push(w);else{const ge=d.length-1;d[ge]+=o,A[ge].push(...i),le[ge].push(...w)}}return[d,A,le]}mergePunctuations(t,r,u,T,d){const A=structuredClone(t),le=structuredClone(r),G=structuredClone(u);let B=A.length-2,o=A.length-1;for(;B>=0;)A[B].startsWith(" ")&&T.includes(A[B].trim())?(A[o]=A[B]+A[o],le[o]=mergeArrays(le[B],le[o]),G[o]=mergeArrays(G[B],G[o]),A[B]="",le[B]=[],G[B]=[]):o=B,--B;for(B=0,o=1;o<A.length;)!A[B].endsWith(" ")&&d.includes(A[o])?(A[B]+=A[o],le[B]=mergeArrays(le[B],le[o]),G[B]=mergeArrays(G[B],G[o]),A[o]="",le[o]=[],G[o]=[]):B=o,++o;return[A.filter(i=>i),le.filter(i=>i.length>0),G.filter(i=>i.length>0)]}get_decoder_prompt_ids({language:t=null,task:r=null,no_timestamps:u=!0}={}){const T=[];if(t){t=t.toLowerCase();let d=WHISPER_TO_LANGUAGE_CODE_MAPPING.get(t);if(d===void 0)if(WHISPER_LANGUAGE_MAPPING.has(t))d=t;else{const G=t.length===2?WHISPER_LANGUAGE_MAPPING.keys():WHISPER_LANGUAGE_MAPPING.values();throw new Error(`Language "${t}" is not supported. Must be one of: ${JSON.stringify(G)}`)}const A=this.model.tokens_to_ids.get(`<|${d}|>`);if(A===void 0)throw new Error(`Unable to find language "${d}" in model vocabulary. Please report this issue at https://github.com/xenova/transformers.js/issues/new/choose.`);T.push(A)}else T.push(null);if(r){if(r=r.toLowerCase(),r!=="transcribe"&&r!=="translate")throw new Error(`Task "${r}" is not supported. Must be one of: ["transcribe", "translate"]`);const d=this.model.tokens_to_ids.get(`<|${r}|>`);if(d===void 0)throw new Error(`Unable to find task "${r}" in model vocabulary. Please report this issue at https://github.com/xenova/transformers.js/issues/new/choose.`);T.push(d)}else T.push(null);if(u){const d=this.model.tokens_to_ids.get("<|notimestamps|>");if(d===void 0)throw new Error('Unable to find "<|notimestamps|>" in model vocabulary. Please report this issue at https://github.com/xenova/transformers.js/issues/new/choose.');T.push(d)}return T.map((d,A)=>[A+1,d]).filter(d=>d[1]!==null)}}class CodeGenTokenizer extends PreTrainedTokenizer{}class CLIPTokenizer extends PreTrainedTokenizer{}class SiglipTokenizer extends PreTrainedTokenizer{}class MarianTokenizer extends PreTrainedTokenizer{constructor(e,t){super(e,t),this.languageRegex=/^(>>\w+<<)\s*/g,this.supported_language_codes=this.model.vocab.filter(r=>this.languageRegex.test(r)),console.warn('WARNING: `MarianTokenizer` is not yet supported by Hugging Face\'s "fast" tokenizers library. Therefore, you may experience slightly inaccurate results.')}_encode_text(e){if(e===null)return null;const[t,...r]=e.trim().split(this.languageRegex);if(r.length===0)return super._encode_text(t);if(r.length===2){const[u,T]=r;return this.supported_language_codes.includes(u)||console.warn(`Unsupported language code "${u}" detected, which may lead to unexpected behavior. Should be one of: ${JSON.stringify(this.supported_language_codes)}`),mergeArrays([u],super._encode_text(T))}}}class Wav2Vec2CTCTokenizer extends PreTrainedTokenizer{}class BlenderbotTokenizer extends PreTrainedTokenizer{constructor(){super(...arguments);Mt(this,"_default_chat_template","{% for message in messages %}{% if message['role'] == 'user' %}{{ ' ' }}{% endif %}{{ message['content'] }}{% if not loop.last %}{{ '  ' }}{% endif %}{% endfor %}{{ eos_token }}")}}class BlenderbotSmallTokenizer extends BlenderbotTokenizer{}class SpeechT5Tokenizer extends PreTrainedTokenizer{}class NougatTokenizer extends PreTrainedTokenizer{}class VitsTokenizer extends PreTrainedTokenizer{constructor(e,t){super(e,t),this.decoder=new VitsDecoder({})}}class AutoTokenizer{static async from_pretrained(e,{quantized:t=!0,progress_callback:r=null,config:u=null,cache_dir:T=null,local_files_only:d=!1,revision:A="main",legacy:le=null}={}){var w;const[G,B]=await loadTokenizer(e,{progress_callback:r,cache_dir:T,local_files_only:d,revision:A,legacy:le}),o=((w=B.tokenizer_class)==null?void 0:w.replace(/Fast$/,""))??"PreTrainedTokenizer";let i=this.TOKENIZER_CLASS_MAPPING[o];return i||(console.warn(`Unknown tokenizer class "${o}", attempting to construct from base class.`),i=PreTrainedTokenizer),new i(G,B)}}Mt(AutoTokenizer,"TOKENIZER_CLASS_MAPPING",{T5Tokenizer,DistilBertTokenizer,CamembertTokenizer,DebertaTokenizer,DebertaV2Tokenizer,BertTokenizer,HerbertTokenizer,ConvBertTokenizer,RoFormerTokenizer,XLMTokenizer,ElectraTokenizer,MobileBertTokenizer,SqueezeBertTokenizer,AlbertTokenizer,GPT2Tokenizer,BartTokenizer,MBartTokenizer,MBart50Tokenizer,RobertaTokenizer,WhisperTokenizer,CodeGenTokenizer,CLIPTokenizer,SiglipTokenizer,MarianTokenizer,BloomTokenizer,NllbTokenizer,M2M100Tokenizer,LlamaTokenizer,CodeLlamaTokenizer,XLMRobertaTokenizer,MPNetTokenizer,FalconTokenizer,GPTNeoXTokenizer,EsmTokenizer,Wav2Vec2CTCTokenizer,BlenderbotTokenizer,BlenderbotSmallTokenizer,SpeechT5Tokenizer,NougatTokenizer,VitsTokenizer,PreTrainedTokenizer});async function loadConfig(n,e){return await getModelJSON(n,"config.json",!0,e)}class PretrainedConfig{constructor(e){this.model_type=null,this.is_encoder_decoder=!1,Object.assign(this,e)}static async from_pretrained(e,{progress_callback:t=null,config:r=null,cache_dir:u=null,local_files_only:T=!1,revision:d="main"}={}){let A=r??await loadConfig(e,{progress_callback:t,cache_dir:u,local_files_only:T,revision:d});return new this(A)}}class AutoConfig{static async from_pretrained(...e){return PretrainedConfig.from_pretrained(...e)}}class LogitsProcessorList extends Callable{constructor(){super(),this.processors=[]}push(e){this.processors.push(e)}extend(e){this.processors.push(...e)}_call(e,t){for(let r of t)this.processors.forEach(u=>u(e,r))}[Symbol.iterator](){return this.processors.values()}}class LogitsProcessor extends Callable{_call(e,t){throw Error("`_call` should be implemented in a subclass")}}class ForceTokensLogitsProcessor extends LogitsProcessor{constructor(e){super(),this.force_token_map=Object.fromEntries(e??[])}_call(e,t){let r=this.force_token_map[e.length];return exists(r)&&(t.data.fill(-1/0),t.data[r]=0),t}}class ForcedBOSTokenLogitsProcessor extends LogitsProcessor{constructor(e){super(),this.bos_token_id=e}_call(e,t){return e.length===1&&(t.data.fill(-1/0),t.data[this.bos_token_id]=0),t}}class ForcedEOSTokenLogitsProcessor extends LogitsProcessor{constructor(e,t){super(),this.max_length=e,this.forced_eos_token_id=t}_call(e,t){}}class SuppressTokensAtBeginLogitsProcessor extends LogitsProcessor{constructor(e,t){super(),this.begin_suppress_tokens=e,this.begin_index=t}_call(e,t){if(e.length===this.begin_index)for(let r of this.begin_suppress_tokens)t.data[r]=-1/0;return t}}class WhisperTimeStampLogitsProcessor extends LogitsProcessor{constructor(e){super(),this.eos_token_id=e.eos_token_id,this.no_timestamps_token_id=e.no_timestamps_token_id,this.timestamp_begin=this.no_timestamps_token_id+1,this.begin_index=(e.forced_decoder_ids||[]).length+2,e.forced_decoder_ids.slice(-1)[0][1]===this.no_timestamps_token_id&&(this.begin_index-=1),this.max_initial_timestamp_index=e.max_initial_timestamp_index}_call(e,t){const r=t.data;if(r[this.no_timestamps_token_id]=-1/0,e.length===this.begin_index-1)return r.fill(-1/0),r[this.timestamp_begin]=0,t;const u=e.slice(this.begin_index),T=u.length>=1&&u[u.length-1]>=this.timestamp_begin,d=u.length<2||u[u.length-2]>=this.timestamp_begin;if(T&&(d?r.subarray(this.timestamp_begin).fill(-1/0):r.subarray(0,this.eos_token_id).fill(-1/0)),e.length===this.begin_index&&this.max_initial_timestamp_index!==null){const B=this.timestamp_begin+this.max_initial_timestamp_index;r.subarray(B+1).fill(-1/0)}const A=log_softmax(r),le=Math.log(A.subarray(this.timestamp_begin).map(Math.exp).reduce((B,o)=>B+o)),G=max(A.subarray(0,this.timestamp_begin))[0];return le>G&&r.subarray(0,this.timestamp_begin).fill(-1/0),t}}class NoRepeatNGramLogitsProcessor extends LogitsProcessor{constructor(e){super(),this.no_repeat_ngram_size=e}getNgrams(e){const t=e.length,r=[];for(let T=0;T<t+1-this.no_repeat_ngram_size;++T){const d=[];for(let A=0;A<this.no_repeat_ngram_size;++A)d.push(e[T+A]);r.push(d)}const u=new Map;for(const T of r){const d=T.slice(0,T.length-1),A=JSON.stringify(d),le=u.get(A)??[];le.push(T[T.length-1]),u.set(A,le)}return u}getGeneratedNgrams(e,t){const r=t.slice(t.length+1-this.no_repeat_ngram_size,t.length);return e.get(JSON.stringify(r))??[]}calcBannedNgramTokens(e){const t=[];if(e.length+1<this.no_repeat_ngram_size)return t;{const r=this.getNgrams(e);return this.getGeneratedNgrams(r,e)}}_call(e,t){const r=this.calcBannedNgramTokens(e);for(const u of r)t.data[u]=-1/0;return t}}class RepetitionPenaltyLogitsProcessor extends LogitsProcessor{constructor(e){super(),this.penalty=e}_call(e,t){for(const r of e)t.data[r]<0?t.data[r]*=this.penalty:t.data[r]/=this.penalty;return t}}class MinLengthLogitsProcessor extends LogitsProcessor{constructor(e,t){super(),this.min_length=e,this.eos_token_id=Array.isArray(t)?t:[t]}_call(e,t){if(e.length<this.min_length)for(const r of this.eos_token_id)t.data[r]=-1/0;return t}}class MinNewTokensLengthLogitsProcessor extends LogitsProcessor{constructor(e,t,r){super(),this.prompt_length_to_skip=e,this.min_new_tokens=t,this.eos_token_id=Array.isArray(r)?r:[r]}_call(e,t){if(e.length-this.prompt_length_to_skip<this.min_new_tokens)for(const u of this.eos_token_id)t.data[u]=-1/0;return t}}class NoBadWordsLogitsProcessor extends LogitsProcessor{constructor(e,t){super(),this.bad_words_ids=e,this.eos_token_id=Array.isArray(t)?t:[t]}_call(e,t){for(const r of this.bad_words_ids){let u=!0;for(let T=1;T<=r.length-1&&r.length<e.length;++T)if(r.at(-T-1)!==e.at(-T)){u=!1;break}u&&(t.data[r.at(-1)]=-1/0)}return t}}const GenerationConfig=class{constructor(n={}){this.max_length=n.max_length??20,this.max_new_tokens=n.max_new_tokens??null,this.min_length=n.min_length??0,this.min_new_tokens=n.min_new_tokens??null,this.early_stopping=n.early_stopping??!1,this.max_time=n.max_time??null,this.do_sample=n.do_sample??!1,this.num_beams=n.num_beams??1,this.num_beam_groups=n.num_beam_groups??1,this.penalty_alpha=n.penalty_alpha??null,this.use_cache=n.use_cache??!0,this.temperature=n.temperature??1,this.top_k=n.top_k??50,this.top_p=n.top_p??1,this.typical_p=n.typical_p??1,this.epsilon_cutoff=n.epsilon_cutoff??0,this.eta_cutoff=n.eta_cutoff??0,this.diversity_penalty=n.diversity_penalty??0,this.repetition_penalty=n.repetition_penalty??1,this.encoder_repetition_penalty=n.encoder_repetition_penalty??1,this.length_penalty=n.length_penalty??1,this.no_repeat_ngram_size=n.no_repeat_ngram_size??0,this.bad_words_ids=n.bad_words_ids??null,this.force_words_ids=n.force_words_ids??null,this.renormalize_logits=n.renormalize_logits??!1,this.constraints=n.constraints??null,this.forced_bos_token_id=n.forced_bos_token_id??null,this.forced_eos_token_id=n.forced_eos_token_id??null,this.remove_invalid_values=n.remove_invalid_values??!1,this.exponential_decay_length_penalty=n.exponential_decay_length_penalty??null,this.suppress_tokens=n.suppress_tokens??null,this.begin_suppress_tokens=n.begin_suppress_tokens??null,this.forced_decoder_ids=n.forced_decoder_ids??null,this.num_return_sequences=n.num_return_sequences??1,this.output_attentions=n.output_attentions??!1,this.output_hidden_states=n.output_hidden_states??!1,this.output_scores=n.output_scores??!1,this.return_dict_in_generate=n.return_dict_in_generate??!1,this.pad_token_id=n.pad_token_id??null,this.bos_token_id=n.bos_token_id??null,this.eos_token_id=n.eos_token_id??null,this.encoder_no_repeat_ngram_size=n.encoder_no_repeat_ngram_size??0,this.decoder_start_token_id=n.decoder_start_token_id??null,this.generation_kwargs=n.generation_kwargs??{}}};class Sampler extends Callable{constructor(e){super(),this.generation_config=e}_call(e,t=-1){return this.sample(e,t)}sample(e,t){throw Error("sample should be implemented in subclasses.")}getLogits(e,t){let r=e.dims.at(-1),u=e.data;if(t===-1)u=u.slice(-r);else{let T=t*r;u=u.slice(T,T+r)}return this.generation_config.temperature>0&&(u=u.map(T=>T/this.generation_config.temperature)),u}randomSelect(e){let t=e.reduce((u,T)=>u+T,0),r=Math.random()*t;for(let u=0;u<e.length;++u)if(r-=e[u],r<=0)return u;return 0}static getSampler(e){if(e.do_sample)return new MultinomialSampler(e);if(e.num_beams>1)return new BeamSearchSampler(e);if(e.num_return_sequences>1)throw Error(`num_return_sequences has to be 1 when doing greedy search, but is ${e.num_return_sequences}.`);return new GreedySampler(e)}}class GreedySampler extends Sampler{sample(e,t=-1){let r=this.getLogits(e,t);return[[max(r)[1],0]]}}class MultinomialSampler extends Sampler{sample(e,t=-1){let r=e.dims.at(-1);this.generation_config.top_k>0&&(r=Math.min(this.generation_config.top_k,r));const u=this.getLogits(e,t),T=getTopItems(u,r),d=softmax(T.map(A=>A[1]));return Array.from({length:this.generation_config.num_beams},()=>{const A=this.randomSelect(d);return[T[A][0],Math.log(d[A])]})}}class BeamSearchSampler extends Sampler{sample(e,t=-1){let r=e.dims.at(-1);this.generation_config.top_k>0&&(r=Math.min(this.generation_config.top_k,r));const u=this.getLogits(e,t),T=getTopItems(u,r),d=softmax(T.map(A=>A[1]));return Array.from({length:this.generation_config.num_beams},(A,le)=>[T[le][0],Math.log(d[le])])}}const{InferenceSession,Tensor:ONNXTensor,env}=ONNX,MODEL_TYPES={EncoderOnly:0,EncoderDecoder:1,Seq2Seq:2,Vision2Seq:3,DecoderOnly:4,MaskGeneration:5},MODEL_TYPE_MAPPING=new Map,MODEL_NAME_TO_CLASS_MAPPING=new Map,MODEL_CLASS_TO_NAME_MAPPING=new Map;async function constructSession(n,e,t){let r=`onnx/${e}${t.quantized?"_quantized":""}.onnx`,u=await getModelFile(n,r,!0,t);try{return await InferenceSession.create(u,{executionProviders})}catch(T){if(executionProviders.length===1&&executionProviders[0]==="wasm")throw T;return console.warn(T),console.warn("Something went wrong during model construction (most likely a missing operation). Using `wasm` as a fallback. "),await InferenceSession.create(u,{executionProviders:["wasm"]})}}function validateInputs(n,e){const t=Object.create(null),r=[];for(const d of n.inputNames){const A=e[d];if(!(A instanceof Tensor)){r.push(d);continue}t[d]=env.wasm.proxy?A.clone():A}if(r.length>0)throw new Error(`An error occurred during model execution: "Missing the following inputs: ${r.join(", ")}.`);const u=Object.keys(e).length,T=n.inputNames.length;if(u>T){let d=Object.keys(e).filter(A=>!n.inputNames.includes(A));console.warn(`WARNING: Too many inputs were provided (${u} > ${T}). The following inputs will be ignored: "${d.join(", ")}".`)}return t}async function sessionRun(n,e){const t=validateInputs(n,e);try{let r=await n.run(t);return r=replaceTensors(r),r}catch(r){throw console.error(`An error occurred during model execution: "${r}".`),console.error("Inputs given to model:",t),r}}function replaceTensors(n){for(let e in n)n[e]instanceof ONNXTensor?n[e]=new Tensor(n[e]):typeof n[e]=="object"&&replaceTensors(n[e]);return n}function toI64Tensor(n){if(n instanceof Tensor)return n;if(n.length===0)throw Error("items must be non-empty");if(Array.isArray(n[0])){if(n.some(e=>e.length!==n[0].length))throw Error("Unable to create tensor, you should probably activate truncation and/or padding with 'padding=True' and/or 'truncation=True' to have batched tensors with the same length.");return new Tensor("int64",BigInt64Array.from(n.flat().map(e=>BigInt(e))),[n.length,n[0].length])}else return new Tensor("int64",BigInt64Array.from(n.map(e=>BigInt(e))),[1,n.length])}function prepareAttentionMask(n,e){let t=n.config.pad_token_id??null,r=n.config.eos_token_id??null;isIntegralNumber(r)&&(r=[r]);let u=e.indexOf(t)!==-1,T=r===null||!r.includes(t);if(u&&T){let d=BigInt64Array.from(e.data.map(A=>A!=t));return new Tensor("int64",d,e.dims)}else return ones_like(e)}function preparePositionIds(n,e,t){if(!n.inputNames.includes("position_ids"))return;const r=new BigInt64Array(e.attention_mask.data.length);for(let u=0;u<e.attention_mask.dims[0];++u){let T=u*e.attention_mask.dims[1],d=BigInt(0);for(let A=0;A<e.attention_mask.dims[1];++A){const le=T+A;e.attention_mask.data[le]===0n?r[le]=BigInt(1):(r[le]=d,d+=e.attention_mask.data[le])}}e.position_ids=new Tensor("int64",r,e.attention_mask.dims),t&&(e.position_ids=e.position_ids.slice(null,-1).unsqueeze_(-1))}function boolTensor(n){return new Tensor("bool",[n],[1])}async function seq2seqForward(n,e){let{encoder_outputs:t,past_key_values:r}=e;t||(t=(await encoderForward(n,e)).last_hidden_state);let u={input_ids:e.decoder_input_ids,encoder_hidden_states:t};const T=!!r;n.decoder_merged_session.inputNames.includes("use_cache_branch")&&(u.use_cache_branch=boolTensor(T)),n.decoder_merged_session.inputNames.includes("encoder_attention_mask")&&(u.encoder_attention_mask=e.attention_mask),preparePositionIds(n.decoder_merged_session,u,T),n.addPastKeyValues(u,r);const d=await sessionRun(n.decoder_merged_session,u);let A=d.logits;r=n.getPastKeyValues(d,r);const le=n.getAttentions(d);return new Seq2SeqLMOutput({logits:A,past_key_values:r,encoder_outputs:t,...le})}function seq2seqStartBeams(n,e,t,r){let u=[],T=0;const d=n.requires_attention_mask??!0;let A=t.decoder_input_ids??t.decoder_start_token_id??t.bos_token_id??t.eos_token_id;A instanceof Tensor?A=A.tolist().flat():Array.isArray(A)||(A=[A]);for(let le of e){le.dims=[1,...le.dims];let G={inputs:le,encoder_outputs:null,prev_model_outputs:null,output_token_ids:A,done:!1,score:0,id:T++};d&&(G.attention_mask=prepareAttentionMask(n,le)),u.push(G)}return u}async function seq2seqRunBeam(n,e){var d;const t=n.main_input_name;let r=e.output_token_ids;e.prev_model_outputs&&(r=r.slice(-1));let u={[t]:e.inputs,decoder_input_ids:toI64Tensor(r),encoder_outputs:e.encoder_outputs,past_key_values:(d=e.prev_model_outputs)==null?void 0:d.past_key_values};e.attention_mask&&(u.attention_mask=e.attention_mask);let T=await n.forward(u);return e.prev_model_outputs=T,e.encoder_outputs=T.encoder_outputs,T}function seq2seqUpdatebeam(n,e){n.output_token_ids=[...n.output_token_ids,e]}async function encoderForward(n,e){const t=Object.create(null);for(const r of n.session.inputNames)t[r]=e[r];return n.session.inputNames.includes("token_type_ids")&&!t.token_type_ids&&(t.token_type_ids=new Tensor("int64",new BigInt64Array(t.input_ids.data.length),t.input_ids.dims)),await sessionRun(n.session,t)}async function decoderForward(n,e){let{input_ids:t,past_key_values:r,attention_mask:u}=e,T={input_ids:t,attention_mask:u??prepareAttentionMask(n,t)};const d=!!r;n.session.inputNames.includes("use_cache_branch")&&(T.use_cache_branch=boolTensor(d)),preparePositionIds(n.session,T,d),n.addPastKeyValues(T,r);let A=await sessionRun(n.session,T),le=A.logits;return r=n.getPastKeyValues(A,r),{logits:le,past_key_values:r}}function decoderStartBeams(n,e,t,r,u){let T=[],d=0;for(let A of e){let le=A.tolist().map(Number);A.dims=[1,...A.dims];let G;u?(G=u[d],G.dims=[1,...G.dims]):G=prepareAttentionMask(n,A);let B={input:A,model_input_ids:A,attention_mask:G,prev_model_outputs:null,output_token_ids:le,num_output_tokens:r,done:!1,score:0,id:d++};T.push(B)}return T}async function decoderRunBeam(n,e){var T;let t=new BigInt64Array(e.output_token_ids.length).fill(1n),r={input_ids:e.model_input_ids,attention_mask:new Tensor("int64",t,[1,t.length]),past_key_values:(T=e.prev_model_outputs)==null?void 0:T.past_key_values},u=await n.forward(r);return e.prev_model_outputs=u,u}function decoderUpdatebeam(n,e){n.output_token_ids=[...n.output_token_ids,e],n.model_input_ids=new Tensor("int64",[BigInt(e)],[1,1])}class PreTrainedModel extends Callable{constructor(t,r){super();Mt(this,"main_input_name","input_ids");this.config=t,this.session=r;const u=MODEL_CLASS_TO_NAME_MAPPING.get(this.constructor),T=MODEL_TYPE_MAPPING.get(u);this.can_generate=!1,this._runBeam=null,this._getStartBeams=null,this._updateBeam=null,this._forward=null,T===MODEL_TYPES.DecoderOnly?(this.can_generate=!0,this._runBeam=decoderRunBeam,this._getStartBeams=decoderStartBeams,this._updateBeam=decoderUpdatebeam,this._forward=decoderForward):T===MODEL_TYPES.Seq2Seq||T===MODEL_TYPES.Vision2Seq?(this.can_generate=!0,this._runBeam=seq2seqRunBeam,this._getStartBeams=seq2seqStartBeams,this._updateBeam=seq2seqUpdatebeam,this._forward=seq2seqForward):T===MODEL_TYPES.EncoderDecoder?this._forward=encoderForward:this._forward=encoderForward}async dispose(){const t=[];for(let r of Object.keys(this)){const u=this[r];u instanceof InferenceSession&&t.push(u.handler.dispose())}return await Promise.all(t)}static async from_pretrained(t,{quantized:r=!0,progress_callback:u=null,config:T=null,cache_dir:d=null,local_files_only:A=!1,revision:le="main",model_file_name:G=null}={}){let B={quantized:r,progress_callback:u,config:T,cache_dir:d,local_files_only:A,revision:le,model_file_name:G};const o=MODEL_CLASS_TO_NAME_MAPPING.get(this),i=MODEL_TYPE_MAPPING.get(o);let w;return i===MODEL_TYPES.DecoderOnly?w=await Promise.all([AutoConfig.from_pretrained(t,B),constructSession(t,B.model_file_name??"decoder_model_merged",B),getModelJSON(t,"generation_config.json",!1,B)]):i===MODEL_TYPES.Seq2Seq||i===MODEL_TYPES.Vision2Seq?w=await Promise.all([AutoConfig.from_pretrained(t,B),constructSession(t,"encoder_model",B),constructSession(t,"decoder_model_merged",B),getModelJSON(t,"generation_config.json",!1,B)]):i===MODEL_TYPES.MaskGeneration?w=await Promise.all([AutoConfig.from_pretrained(t,B),constructSession(t,"vision_encoder",B),constructSession(t,"prompt_encoder_mask_decoder",B)]):i===MODEL_TYPES.EncoderDecoder?w=await Promise.all([AutoConfig.from_pretrained(t,B),constructSession(t,"encoder_model",B),constructSession(t,"decoder_model_merged",B)]):(i!==MODEL_TYPES.EncoderOnly&&console.warn(`Model type for '${o}' not found, assuming encoder-only architecture. Please report this at https://github.com/xenova/transformers.js/issues/new/choose.`),w=await Promise.all([AutoConfig.from_pretrained(t,B),constructSession(t,B.model_file_name??"model",B)])),new this(...w)}async _call(t){return await this.forward(t)}async forward(t){return await this._forward(this,t)}_get_logits_processor(t,r,u=null){const T=new LogitsProcessorList;if(t.repetition_penalty!==null&&t.repetition_penalty!==1&&T.push(new RepetitionPenaltyLogitsProcessor(t.repetition_penalty)),t.no_repeat_ngram_size!==null&&t.no_repeat_ngram_size>0&&T.push(new NoRepeatNGramLogitsProcessor(t.no_repeat_ngram_size)),t.bad_words_ids!==null&&T.push(new NoBadWordsLogitsProcessor(t.bad_words_ids,t.eos_token_id)),t.min_length!==null&&t.eos_token_id!==null&&t.min_length>0&&T.push(new MinLengthLogitsProcessor(t.min_length,t.eos_token_id)),t.min_new_tokens!==null&&t.eos_token_id!==null&&t.min_new_tokens>0&&T.push(new MinNewTokensLengthLogitsProcessor(r,t.min_new_tokens,t.eos_token_id)),t.forced_bos_token_id!==null&&T.push(new ForcedBOSTokenLogitsProcessor(t.forced_bos_token_id)),t.forced_eos_token_id!==null&&T.push(new ForcedEOSTokenLogitsProcessor(t.max_length,t.forced_eos_token_id)),t.begin_suppress_tokens!==null){let d=r>1||t.forced_bos_token_id===null?r:r+1;t.forced_decoder_ids!==null&&(d+=t.forced_decoder_ids[t.forced_decoder_ids.length-1][0]),T.push(new SuppressTokensAtBeginLogitsProcessor(t.begin_suppress_tokens,d))}return t.forced_decoder_ids!==null&&T.push(new ForceTokensLogitsProcessor(t.forced_decoder_ids)),u!==null&&T.extend(u),T}_get_generation_config(t){let r=new GenerationConfig(this.config);return"generation_config"in this&&Object.assign(r,this.generation_config),t!==null&&Object.assign(r,t),r}async generate(t,r=null,u=null,{inputs_attention_mask:T=null}={}){if(!this.can_generate){let pe=`The current model class (${MODEL_CLASS_TO_NAME_MAPPING.get(this.constructor)}) is not compatible with \`.generate()\`, as it doesn't have a language model head.`;const ge=this.config.model_type,be=MODEL_WITH_LM_HEAD_MAPPING_NAMES.get(ge)??MODEL_FOR_SEQ_TO_SEQ_CAUSAL_LM_MAPPING_NAMES.get(ge)??MODEL_FOR_SPEECH_SEQ_2_SEQ_MAPPING_NAMES.get(ge)??MODEL_FOR_VISION_2_SEQ_MAPPING_NAMES.get(ge);throw be&&(pe+=` Please use the following class instead: '${be[0]}'`),Error(pe)}if(!(t instanceof Tensor)&&!isTypedArray(t)&&!Array.isArray(t))throw Error(`\`inputs\` must be a Tensor, TypedArray, or Array, but is "${t.constructor.name}".`);let d;if(this.config.is_encoder_decoder)d=0;else if(d=t instanceof Tensor?t.dims.at(-1):t.length,d===0)throw Error("Must supply a non-empty array of input token ids.");r=this._get_generation_config(r),u=u??new LogitsProcessorList,u=this._get_logits_processor(r,d,u);let A=r.eos_token_id;A!==null&&!Array.isArray(A)&&(A=[A]);let le=1;const G=le+(r.max_new_tokens??1/0),B=Number.isInteger(r.max_length)&&(r.max_new_tokens??null)===null;let o=Sampler.getSampler(r),i=this.getStartBeams(t,r,le,T);for(;i.some(he=>!he.done)&&le<G;){let he=[];for(let pe of i){if(pe.done){he.push(pe);continue}if(B&&pe.output_token_ids.length>=r.max_length){pe.done=!0,he.push(pe);continue}let ge=await this.runBeam(pe);r.output_attentions&&this.addAttentionsToBeam(pe,ge),r.output_scores;let be=ge.logits.slice(null,-1,null);u(pe.output_token_ids,be);let ve=o(be);for(let[we,Se]of ve){let Ae={...pe};this.updateBeam(Ae,we),Ae.score+=Se,A&&A.includes(we)&&(Ae.done=!0),he.push(Ae)}}++le,he=this.groupBeams(he).map(pe=>pe.sort((ge,be)=>be.score-ge.score).slice(0,r.num_beams)),i=he.flat(),r.callback_function&&r.callback_function(i)}const w=this.groupBeams(i),ae=he=>w.map(pe=>r.num_return_sequences>1?pe.slice(0,r.num_return_sequences).map(ge=>ge[he]):[pe[0][he]]).flat(),ue=ae("output_token_ids");if(r.return_dict_in_generate){const he=ae("decoder_attentions"),pe=ae("cross_attentions");return{sequences:ue,decoder_attentions:he,cross_attentions:pe}}else return ue}addAttentionsToBeam(t,r){if(this.config.is_encoder_decoder){if(!r.cross_attentions||r.cross_attentions.length===0)throw Error("`output_attentions` is true, but the model did not produce cross-attentions. This is most likely because the model was not exported with `output_attentions=True`.");t.cross_attentions||(t.cross_attentions=[]),t.cross_attentions.push(r.cross_attentions)}if(!r.decoder_attentions||r.decoder_attentions.length===0)throw Error("`output_attentions` is true, but the model did not produce decoder-attentions. This is most likely because the model was not exported with `output_attentions=True`.");t.decoder_attentions||(t.decoder_attentions=[]),t.decoder_attentions.push(r.decoder_attentions)}groupBeams(t){const r=Object.create(null);for(const u of t)r[u.id]===void 0?r[u.id]=[u]:r[u.id].push(u);return Object.values(r)}getPastKeyValues(t,r){const u=Object.create(null);for(const T in t)if(T.startsWith("present")){let d=T.replace("present","past_key_values");r&&T.includes("encoder")?u[d]=r[d]:u[d]=t[T]}return u}getAttentions(t){const r=Object.create(null);for(const u of["cross_attentions","decoder_attentions"]){const T=[];for(const d in t)if(d.startsWith(u)){const A=d.split(".").pop();T[A]=t[d]}r[u]=T}return r}addPastKeyValues(t,r){if(r)Object.assign(t,r);else if(this.config.is_encoder_decoder&&(this.add_encoder_pkv??!0)){let T=[1,this.num_encoder_heads,0,this.encoder_dim_kv],d=[1,this.num_decoder_heads,0,this.decoder_dim_kv];for(let A=0;A<this.num_decoder_layers;++A)t[`past_key_values.${A}.encoder.key`]=new Tensor("float32",[],T),t[`past_key_values.${A}.encoder.value`]=new Tensor("float32",[],T),t[`past_key_values.${A}.decoder.key`]=new Tensor("float32",[],d),t[`past_key_values.${A}.decoder.value`]=new Tensor("float32",[],d)}else if(this.config.model_type==="falcon"){let T=[1*this.num_heads,0,this.dim_kv];for(let d=0;d<this.num_layers;++d)t[`past_key_values.${d}.key`]=new Tensor("float32",[],T),t[`past_key_values.${d}.value`]=new Tensor("float32",[],T)}else if(this.config.multi_query){let T=[1*this.num_heads,0,2*this.dim_kv];for(let d=0;d<this.num_layers;++d)t[`past_key_values.${d}.key_value`]=new Tensor("float32",[],T)}else if(this.config.model_type==="bloom"){let T=[1*this.num_heads,this.dim_kv,0],d=[1*this.num_heads,0,this.dim_kv];for(let A=0;A<this.num_layers;++A)t[`past_key_values.${A}.key`]=new Tensor("float32",[],T),t[`past_key_values.${A}.value`]=new Tensor("float32",[],d)}else{let T=[1,this.num_heads,0,this.dim_kv];for(let d=0;d<this.num_layers;++d)t[`past_key_values.${d}.key`]=new Tensor("float32",[],T),t[`past_key_values.${d}.value`]=new Tensor("float32",[],T)}}getStartBeams(t,r,u,T){return this._getStartBeams(this,t,r,u,T)}async runBeam(t){return await this._runBeam(this,t)}updateBeam(t,r){return this._updateBeam(t,r)}}class ModelOutput{}class BertPreTrainedModel extends PreTrainedModel{}class BertModel extends BertPreTrainedModel{}class BertForMaskedLM extends BertPreTrainedModel{async _call(e){return new MaskedLMOutput(await super._call(e))}}class BertForSequenceClassification extends BertPreTrainedModel{async _call(e){return new SequenceClassifierOutput(await super._call(e))}}class BertForTokenClassification extends BertPreTrainedModel{async _call(e){return new TokenClassifierOutput(await super._call(e))}}class BertForQuestionAnswering extends BertPreTrainedModel{async _call(e){return new QuestionAnsweringModelOutput(await super._call(e))}}class RoFormerPreTrainedModel extends PreTrainedModel{}class RoFormerModel extends RoFormerPreTrainedModel{}class RoFormerForMaskedLM extends RoFormerPreTrainedModel{async _call(e){return new MaskedLMOutput(await super._call(e))}}class RoFormerForSequenceClassification extends RoFormerPreTrainedModel{async _call(e){return new SequenceClassifierOutput(await super._call(e))}}class RoFormerForTokenClassification extends RoFormerPreTrainedModel{async _call(e){return new TokenClassifierOutput(await super._call(e))}}class RoFormerForQuestionAnswering extends RoFormerPreTrainedModel{async _call(e){return new QuestionAnsweringModelOutput(await super._call(e))}}class ConvBertPreTrainedModel extends PreTrainedModel{}class ConvBertModel extends ConvBertPreTrainedModel{}class ConvBertForMaskedLM extends ConvBertPreTrainedModel{async _call(e){return new MaskedLMOutput(await super._call(e))}}class ConvBertForSequenceClassification extends ConvBertPreTrainedModel{async _call(e){return new SequenceClassifierOutput(await super._call(e))}}class ConvBertForTokenClassification extends ConvBertPreTrainedModel{async _call(e){return new TokenClassifierOutput(await super._call(e))}}class ConvBertForQuestionAnswering extends ConvBertPreTrainedModel{async _call(e){return new QuestionAnsweringModelOutput(await super._call(e))}}class ElectraPreTrainedModel extends PreTrainedModel{}class ElectraModel extends ElectraPreTrainedModel{}class ElectraForMaskedLM extends ElectraPreTrainedModel{async _call(e){return new MaskedLMOutput(await super._call(e))}}class ElectraForSequenceClassification extends ElectraPreTrainedModel{async _call(e){return new SequenceClassifierOutput(await super._call(e))}}class ElectraForTokenClassification extends ElectraPreTrainedModel{async _call(e){return new TokenClassifierOutput(await super._call(e))}}class ElectraForQuestionAnswering extends ElectraPreTrainedModel{async _call(e){return new QuestionAnsweringModelOutput(await super._call(e))}}class CamembertPreTrainedModel extends PreTrainedModel{}class CamembertModel extends CamembertPreTrainedModel{}class CamembertForMaskedLM extends CamembertPreTrainedModel{async _call(e){return new MaskedLMOutput(await super._call(e))}}class CamembertForSequenceClassification extends CamembertPreTrainedModel{async _call(e){return new SequenceClassifierOutput(await super._call(e))}}class CamembertForTokenClassification extends CamembertPreTrainedModel{async _call(e){return new TokenClassifierOutput(await super._call(e))}}class CamembertForQuestionAnswering extends CamembertPreTrainedModel{async _call(e){return new QuestionAnsweringModelOutput(await super._call(e))}}class DebertaPreTrainedModel extends PreTrainedModel{}class DebertaModel extends DebertaPreTrainedModel{}class DebertaForMaskedLM extends DebertaPreTrainedModel{async _call(e){return new MaskedLMOutput(await super._call(e))}}class DebertaForSequenceClassification extends DebertaPreTrainedModel{async _call(e){return new SequenceClassifierOutput(await super._call(e))}}class DebertaForTokenClassification extends DebertaPreTrainedModel{async _call(e){return new TokenClassifierOutput(await super._call(e))}}class DebertaForQuestionAnswering extends DebertaPreTrainedModel{async _call(e){return new QuestionAnsweringModelOutput(await super._call(e))}}class DebertaV2PreTrainedModel extends PreTrainedModel{}class DebertaV2Model extends DebertaV2PreTrainedModel{}class DebertaV2ForMaskedLM extends DebertaV2PreTrainedModel{async _call(e){return new MaskedLMOutput(await super._call(e))}}class DebertaV2ForSequenceClassification extends DebertaV2PreTrainedModel{async _call(e){return new SequenceClassifierOutput(await super._call(e))}}class DebertaV2ForTokenClassification extends DebertaV2PreTrainedModel{async _call(e){return new TokenClassifierOutput(await super._call(e))}}class DebertaV2ForQuestionAnswering extends DebertaV2PreTrainedModel{async _call(e){return new QuestionAnsweringModelOutput(await super._call(e))}}class DistilBertPreTrainedModel extends PreTrainedModel{}class DistilBertModel extends DistilBertPreTrainedModel{}class DistilBertForSequenceClassification extends DistilBertPreTrainedModel{async _call(e){return new SequenceClassifierOutput(await super._call(e))}}class DistilBertForTokenClassification extends DistilBertPreTrainedModel{async _call(e){return new TokenClassifierOutput(await super._call(e))}}class DistilBertForQuestionAnswering extends DistilBertPreTrainedModel{async _call(e){return new QuestionAnsweringModelOutput(await super._call(e))}}class DistilBertForMaskedLM extends DistilBertPreTrainedModel{async _call(e){return new MaskedLMOutput(await super._call(e))}}class EsmPreTrainedModel extends PreTrainedModel{}class EsmModel extends EsmPreTrainedModel{}class EsmForMaskedLM extends EsmPreTrainedModel{async _call(e){return new MaskedLMOutput(await super._call(e))}}class EsmForSequenceClassification extends EsmPreTrainedModel{async _call(e){return new SequenceClassifierOutput(await super._call(e))}}class EsmForTokenClassification extends EsmPreTrainedModel{async _call(e){return new TokenClassifierOutput(await super._call(e))}}class MobileBertPreTrainedModel extends PreTrainedModel{}class MobileBertModel extends MobileBertPreTrainedModel{}class MobileBertForMaskedLM extends MobileBertPreTrainedModel{async _call(e){return new MaskedLMOutput(await super._call(e))}}class MobileBertForSequenceClassification extends MobileBertPreTrainedModel{async _call(e){return new SequenceClassifierOutput(await super._call(e))}}class MobileBertForQuestionAnswering extends MobileBertPreTrainedModel{async _call(e){return new QuestionAnsweringModelOutput(await super._call(e))}}class MPNetPreTrainedModel extends PreTrainedModel{}class MPNetModel extends MPNetPreTrainedModel{}class MPNetForMaskedLM extends MPNetPreTrainedModel{async _call(e){return new MaskedLMOutput(await super._call(e))}}class MPNetForSequenceClassification extends MPNetPreTrainedModel{async _call(e){return new SequenceClassifierOutput(await super._call(e))}}class MPNetForTokenClassification extends MPNetPreTrainedModel{async _call(e){return new TokenClassifierOutput(await super._call(e))}}class MPNetForQuestionAnswering extends MPNetPreTrainedModel{async _call(e){return new QuestionAnsweringModelOutput(await super._call(e))}}class SqueezeBertPreTrainedModel extends PreTrainedModel{}class SqueezeBertModel extends SqueezeBertPreTrainedModel{}class SqueezeBertForMaskedLM extends SqueezeBertPreTrainedModel{async _call(e){return new MaskedLMOutput(await super._call(e))}}class SqueezeBertForSequenceClassification extends SqueezeBertPreTrainedModel{async _call(e){return new SequenceClassifierOutput(await super._call(e))}}class SqueezeBertForQuestionAnswering extends SqueezeBertPreTrainedModel{async _call(e){return new QuestionAnsweringModelOutput(await super._call(e))}}class AlbertPreTrainedModel extends PreTrainedModel{}class AlbertModel extends AlbertPreTrainedModel{}class AlbertForSequenceClassification extends AlbertPreTrainedModel{async _call(e){return new SequenceClassifierOutput(await super._call(e))}}class AlbertForQuestionAnswering extends AlbertPreTrainedModel{async _call(e){return new QuestionAnsweringModelOutput(await super._call(e))}}class AlbertForMaskedLM extends AlbertPreTrainedModel{async _call(e){return new MaskedLMOutput(await super._call(e))}}class T5PreTrainedModel extends PreTrainedModel{}class T5Model extends T5PreTrainedModel{}class T5ForConditionalGeneration extends T5PreTrainedModel{constructor(e,t,r,u){super(e,t),this.decoder_merged_session=r,this.generation_config=u,this.num_decoder_layers=this.config.num_decoder_layers,this.num_decoder_heads=this.config.num_heads,this.decoder_dim_kv=this.config.d_kv,this.num_encoder_layers=this.config.num_layers,this.num_encoder_heads=this.config.num_heads,this.encoder_dim_kv=this.config.d_kv}}class LongT5PreTrainedModel extends PreTrainedModel{}class LongT5Model extends LongT5PreTrainedModel{}class LongT5ForConditionalGeneration extends LongT5PreTrainedModel{constructor(e,t,r,u){super(e,t),this.decoder_merged_session=r,this.generation_config=u,this.num_decoder_layers=this.config.num_decoder_layers,this.num_decoder_heads=this.config.num_heads,this.decoder_dim_kv=this.config.d_kv,this.num_encoder_layers=this.config.num_layers,this.num_encoder_heads=this.config.num_heads,this.encoder_dim_kv=this.config.d_kv}}class MT5PreTrainedModel extends PreTrainedModel{}class MT5Model extends MT5PreTrainedModel{}class MT5ForConditionalGeneration extends MT5PreTrainedModel{constructor(e,t,r,u){super(e,t),this.decoder_merged_session=r,this.generation_config=u,this.num_decoder_layers=this.config.num_decoder_layers,this.num_decoder_heads=this.config.num_heads,this.decoder_dim_kv=this.config.d_kv,this.num_encoder_layers=this.config.num_layers,this.num_encoder_heads=this.config.num_heads,this.encoder_dim_kv=this.config.d_kv}}class BartPretrainedModel extends PreTrainedModel{}class BartModel extends BartPretrainedModel{}class BartForConditionalGeneration extends BartPretrainedModel{constructor(e,t,r,u){super(e,t),this.decoder_merged_session=r,this.generation_config=u,this.num_decoder_layers=this.config.decoder_layers,this.num_decoder_heads=this.config.decoder_attention_heads,this.decoder_dim_kv=this.config.d_model/this.num_decoder_heads,this.num_encoder_layers=this.config.encoder_layers,this.num_encoder_heads=this.config.encoder_attention_heads,this.encoder_dim_kv=this.config.d_model/this.num_encoder_heads}}class BartForSequenceClassification extends BartPretrainedModel{async _call(e){return new SequenceClassifierOutput(await super._call(e))}}class MBartPreTrainedModel extends PreTrainedModel{}class MBartModel extends MBartPreTrainedModel{}class MBartForConditionalGeneration extends MBartPreTrainedModel{constructor(e,t,r,u){super(e,t),this.decoder_merged_session=r,this.generation_config=u,this.num_decoder_layers=this.config.decoder_layers,this.num_decoder_heads=this.config.decoder_attention_heads,this.decoder_dim_kv=this.config.d_model/this.num_decoder_heads,this.num_encoder_layers=this.config.encoder_layers,this.num_encoder_heads=this.config.encoder_attention_heads,this.encoder_dim_kv=this.config.d_model/this.num_encoder_heads}}class MBartForSequenceClassification extends MBartPreTrainedModel{async _call(e){return new SequenceClassifierOutput(await super._call(e))}}class MBartForCausalLM extends MBartPreTrainedModel{constructor(e,t,r){super(e,t),this.generation_config=r,this.num_decoder_layers=this.config.decoder_layers,this.num_decoder_heads=this.config.decoder_attention_heads,this.decoder_dim_kv=this.config.d_model/this.num_decoder_heads,this.num_encoder_layers=this.config.encoder_layers,this.num_encoder_heads=this.config.encoder_attention_heads,this.encoder_dim_kv=this.config.d_model/this.num_encoder_heads}}class BlenderbotPreTrainedModel extends PreTrainedModel{}class BlenderbotModel extends BlenderbotPreTrainedModel{}class BlenderbotForConditionalGeneration extends BlenderbotPreTrainedModel{constructor(e,t,r,u){super(e,t),this.decoder_merged_session=r,this.generation_config=u,this.num_decoder_layers=this.config.decoder_layers,this.num_decoder_heads=this.config.decoder_attention_heads,this.decoder_dim_kv=this.config.d_model/this.num_decoder_heads,this.num_encoder_layers=this.config.encoder_layers,this.num_encoder_heads=this.config.encoder_attention_heads,this.encoder_dim_kv=this.config.d_model/this.num_encoder_heads}}class BlenderbotSmallPreTrainedModel extends PreTrainedModel{}class BlenderbotSmallModel extends BlenderbotSmallPreTrainedModel{}class BlenderbotSmallForConditionalGeneration extends BlenderbotSmallPreTrainedModel{constructor(e,t,r,u){super(e,t),this.decoder_merged_session=r,this.generation_config=u,this.num_decoder_layers=this.config.decoder_layers,this.num_decoder_heads=this.config.decoder_attention_heads,this.decoder_dim_kv=this.config.d_model/this.num_decoder_heads,this.num_encoder_layers=this.config.encoder_layers,this.num_encoder_heads=this.config.encoder_attention_heads,this.encoder_dim_kv=this.config.d_model/this.num_encoder_heads}}class RobertaPreTrainedModel extends PreTrainedModel{}class RobertaModel extends RobertaPreTrainedModel{}class RobertaForMaskedLM extends RobertaPreTrainedModel{async _call(e){return new MaskedLMOutput(await super._call(e))}}class RobertaForSequenceClassification extends RobertaPreTrainedModel{async _call(e){return new SequenceClassifierOutput(await super._call(e))}}class RobertaForTokenClassification extends RobertaPreTrainedModel{async _call(e){return new TokenClassifierOutput(await super._call(e))}}class RobertaForQuestionAnswering extends RobertaPreTrainedModel{async _call(e){return new QuestionAnsweringModelOutput(await super._call(e))}}class XLMPreTrainedModel extends PreTrainedModel{}class XLMModel extends XLMPreTrainedModel{}class XLMWithLMHeadModel extends XLMPreTrainedModel{async _call(e){return new MaskedLMOutput(await super._call(e))}}class XLMForSequenceClassification extends XLMPreTrainedModel{async _call(e){return new SequenceClassifierOutput(await super._call(e))}}class XLMForTokenClassification extends XLMPreTrainedModel{async _call(e){return new TokenClassifierOutput(await super._call(e))}}class XLMForQuestionAnswering extends XLMPreTrainedModel{async _call(e){return new QuestionAnsweringModelOutput(await super._call(e))}}class XLMRobertaPreTrainedModel extends PreTrainedModel{}class XLMRobertaModel extends XLMRobertaPreTrainedModel{}class XLMRobertaForMaskedLM extends XLMRobertaPreTrainedModel{async _call(e){return new MaskedLMOutput(await super._call(e))}}class XLMRobertaForSequenceClassification extends XLMRobertaPreTrainedModel{async _call(e){return new SequenceClassifierOutput(await super._call(e))}}class XLMRobertaForTokenClassification extends XLMRobertaPreTrainedModel{async _call(e){return new TokenClassifierOutput(await super._call(e))}}class XLMRobertaForQuestionAnswering extends XLMRobertaPreTrainedModel{async _call(e){return new QuestionAnsweringModelOutput(await super._call(e))}}class ASTPreTrainedModel extends PreTrainedModel{}class ASTModel extends ASTPreTrainedModel{}class ASTForAudioClassification extends ASTPreTrainedModel{}class WhisperPreTrainedModel extends PreTrainedModel{}class WhisperModel extends WhisperPreTrainedModel{}class WhisperForConditionalGeneration extends WhisperPreTrainedModel{constructor(t,r,u,T){super(t,r);Mt(this,"requires_attention_mask",!1);Mt(this,"main_input_name","input_features");this.decoder_merged_session=u,this.generation_config=T,this.num_decoder_layers=this.config.decoder_layers,this.num_decoder_heads=this.config.decoder_attention_heads,this.decoder_dim_kv=this.config.d_model/this.num_decoder_heads,this.num_encoder_layers=this.config.encoder_layers,this.num_encoder_heads=this.config.encoder_attention_heads,this.encoder_dim_kv=this.config.d_model/this.num_encoder_heads}async generate(t,r=null,u=null){if(r=this._get_generation_config(r),r.return_timestamps??(r.return_timestamps=!1),r.return_timestamps&&(u=[new WhisperTimeStampLogitsProcessor(r)]),r.return_token_timestamps&&(r.output_attentions=!0,r.return_dict_in_generate=!0,r.task==="translate"&&console.warn("Token-level timestamps may not be reliable for task 'translate'."),!r.alignment_heads))throw new Error("Model generation config has no `alignment_heads`, token-level timestamps not available. See https://gist.github.com/hollance/42e32852f24243b748ae6bc1f985b13a on how to add this property to the generation config.");const T=await super.generate(t,r,u);return r.return_token_timestamps&&r.alignment_heads&&(T.token_timestamps=this._extract_token_timestamps(T,r.alignment_heads,r.num_frames)),T}_extract_token_timestamps(t,r,u=null,T=.02){if(!t.cross_attentions)throw new Error("Model outputs must contain cross attentions to extract timestamps. This is most likely because the model was not exported with `output_attentions=True`.");let d=this.config.median_filter_width;d===void 0&&(console.warn("Model config has no `median_filter_width`, using default value of 7."),d=7);const A=t.cross_attentions.map(B=>{let o=Array.from({length:this.config.decoder_layers},(pe,ge)=>cat(B.map(be=>be[ge]),2)),i=stack(r.map(([pe,ge])=>u?o[pe].slice(null,ge,null,[0,u]):o[pe].slice(null,ge)));i=i.transpose(1,0,2,3);let[w,ae]=std_mean(i,-2,0,!0),ue=i.clone();for(let pe=0;pe<ue.dims[0];++pe){let ge=ue[pe];for(let be=0;be<ge.dims[0];++be){let ve=ge[be];const we=w[pe][be][0],Se=ae[pe][be][0];for(let Ae=0;Ae<ve.dims[0];++Ae){let Re=ve[Ae];for(let Te=0;Te<Re.data.length;++Te)Re.data[Te]=(Re.data[Te]-Se.data[Te])/we.data[Te];Re.data.set(medianFilter(Re.data,d))}}}return mean(ue,1)}),le=[t.sequences.length,t.sequences[0].length],G=new Tensor("float32",new Float32Array(le[0]*le[1]),le);for(let B=0;B<le[0];++B){const o=A[B].neg().squeeze_(0);let[i,w]=dynamicTimeWarping(o),ae=Array.from({length:i.length-1},(pe,ge)=>i[ge+1]-i[ge]),ue=mergeArrays([1],ae).map(pe=>!!pe),he=[];for(let pe=0;pe<ue.length;++pe)ue[pe]&&he.push(w[pe]*T);G[B].data.set(he,1)}return G}}class VisionEncoderDecoderModel extends PreTrainedModel{constructor(t,r,u,T){super(t,r);Mt(this,"main_input_name","pixel_values");this.decoder_merged_session=u,this.generation_config=T;const d=this.config.encoder,A=this.config.decoder,le=d.model_type;(MODEL_MAPPING_NAMES_ENCODER_ONLY.get(le)??MODEL_MAPPING_NAMES_ENCODER_DECODER.get(le))||console.warn(`Model type for encoder '${le}' not found, assuming encoder-only architecture. Please report this at https://github.com/xenova/transformers.js/issues/new/choose.`);const B=MODEL_WITH_LM_HEAD_MAPPING_NAMES.get(A.model_type);if(!B)throw new Error(`Unable to construct \`VisionEncoderDecoder\` due to unsupported decoder: "${this.config.decoder.model_type}"`);const o=B[1],i=new o(A,u,T);this.add_encoder_pkv="num_decoder_layers"in i,this.add_encoder_pkv?(this.num_decoder_layers=i.num_decoder_layers,this.num_decoder_heads=i.num_decoder_heads,this.decoder_dim_kv=i.decoder_dim_kv,this.num_encoder_layers=i.num_encoder_layers,this.num_encoder_heads=i.num_encoder_heads,this.encoder_dim_kv=i.encoder_dim_kv):(this.num_layers=i.num_layers,this.num_heads=i.num_heads,this.dim_kv=i.dim_kv)}}class CLIPPreTrainedModel extends PreTrainedModel{}class CLIPModel extends CLIPPreTrainedModel{}class CLIPTextModelWithProjection extends CLIPPreTrainedModel{static async from_pretrained(e,t={}){return t.model_file_name??(t.model_file_name="text_model"),super.from_pretrained(e,t)}}class CLIPVisionModelWithProjection extends CLIPPreTrainedModel{static async from_pretrained(e,t={}){return t.model_file_name??(t.model_file_name="vision_model"),super.from_pretrained(e,t)}}class SiglipPreTrainedModel extends PreTrainedModel{}class SiglipModel extends SiglipPreTrainedModel{}class SiglipTextModel extends SiglipPreTrainedModel{static async from_pretrained(e,t={}){return t.model_file_name??(t.model_file_name="text_model"),super.from_pretrained(e,t)}}class SiglipVisionModel extends CLIPPreTrainedModel{static async from_pretrained(e,t={}){return t.model_file_name??(t.model_file_name="vision_model"),super.from_pretrained(e,t)}}class ChineseCLIPPreTrainedModel extends PreTrainedModel{}class ChineseCLIPModel extends ChineseCLIPPreTrainedModel{}class CLIPSegPreTrainedModel extends PreTrainedModel{}class CLIPSegModel extends CLIPSegPreTrainedModel{}class CLIPSegForImageSegmentation extends CLIPSegPreTrainedModel{}class GPT2PreTrainedModel extends PreTrainedModel{constructor(e,t,r){super(e,t),this.generation_config=r,this.config.pad_token_id=this.config.eos_token_id,this.num_heads=this.config.n_head,this.num_layers=this.config.n_layer,this.dim_kv=this.config.n_embd/this.num_heads}}class GPT2Model extends GPT2PreTrainedModel{}class GPT2LMHeadModel extends GPT2PreTrainedModel{}class GPTNeoPreTrainedModel extends PreTrainedModel{constructor(e,t,r){super(e,t),this.generation_config=r,this.config.pad_token_id=this.config.eos_token_id,this.num_heads=this.config.num_heads,this.num_layers=this.config.num_layers,this.dim_kv=this.config.hidden_size/this.num_heads}}class GPTNeoModel extends GPTNeoPreTrainedModel{}class GPTNeoForCausalLM extends GPTNeoPreTrainedModel{}class GPTNeoXPreTrainedModel extends PreTrainedModel{constructor(e,t,r){super(e,t),this.generation_config=r,this.config.pad_token_id=this.config.eos_token_id,this.num_heads=this.config.num_attention_heads,this.num_layers=this.config.num_hidden_layers,this.dim_kv=this.config.hidden_size/this.num_heads}}class GPTNeoXModel extends GPTNeoXPreTrainedModel{}class GPTNeoXForCausalLM extends GPTNeoXPreTrainedModel{}class GPTJPreTrainedModel extends PreTrainedModel{constructor(e,t,r){super(e,t),this.generation_config=r,this.config.pad_token_id=this.config.eos_token_id,this.num_heads=this.config.n_head,this.num_layers=this.config.n_layer,this.dim_kv=this.config.n_embd/this.num_heads}}class GPTJModel extends GPTJPreTrainedModel{}class GPTJForCausalLM extends GPTJPreTrainedModel{}class GPTBigCodePreTrainedModel extends PreTrainedModel{constructor(e,t,r){super(e,t),this.generation_config=r,this.config.pad_token_id=this.config.eos_token_id,this.num_heads=this.config.n_head,this.num_layers=this.config.n_layer,this.dim_kv=this.config.n_embd/this.num_heads}}class GPTBigCodeModel extends GPTBigCodePreTrainedModel{}class GPTBigCodeForCausalLM extends GPTBigCodePreTrainedModel{}class CodeGenPreTrainedModel extends PreTrainedModel{constructor(e,t,r){super(e,t),this.generation_config=r,this.config.pad_token_id=this.config.eos_token_id,this.num_heads=this.config.n_head,this.num_layers=this.config.n_layer,this.dim_kv=this.config.n_embd/this.num_heads}}class CodeGenModel extends CodeGenPreTrainedModel{}class CodeGenForCausalLM extends CodeGenPreTrainedModel{}class LlamaPreTrainedModel extends PreTrainedModel{constructor(e,t,r){super(e,t),this.generation_config=r,this.config.pad_token_id=this.config.eos_token_id,this.num_heads=this.config.num_key_value_heads??this.config.num_attention_heads,this.num_layers=this.config.num_hidden_layers,this.dim_kv=this.config.hidden_size/this.config.num_attention_heads}}class LlamaModel extends LlamaPreTrainedModel{}class LlamaForCausalLM extends LlamaPreTrainedModel{}class PhiPreTrainedModel extends PreTrainedModel{constructor(e,t,r){super(e,t),this.generation_config=r,this.config.pad_token_id=this.config.eos_token_id,this.num_heads=this.config.num_attention_heads,this.num_layers=this.config.num_hidden_layers,this.dim_kv=this.config.hidden_size/this.num_heads}}class PhiModel extends PhiPreTrainedModel{}class PhiForCausalLM extends PhiPreTrainedModel{}class BloomPreTrainedModel extends PreTrainedModel{constructor(e,t,r){super(e,t),this.generation_config=r,this.config.pad_token_id=this.config.eos_token_id,this.num_heads=this.config.n_head,this.num_layers=this.config.n_layer,this.dim_kv=this.config.hidden_size/this.num_heads}}class BloomModel extends BloomPreTrainedModel{}class BloomForCausalLM extends BloomPreTrainedModel{}class MptPreTrainedModel extends PreTrainedModel{constructor(e,t,r){super(e,t),this.generation_config=r,this.config.pad_token_id=this.config.eos_token_id,this.num_heads=this.config.n_heads,this.num_layers=this.config.n_layers,this.dim_kv=this.config.d_model/this.num_heads}}class MptModel extends MptPreTrainedModel{}class MptForCausalLM extends MptPreTrainedModel{}class OPTPreTrainedModel extends PreTrainedModel{constructor(e,t,r){super(e,t),this.generation_config=r,this.config.pad_token_id=this.config.eos_token_id,this.num_heads=this.config.num_attention_heads,this.num_layers=this.config.num_hidden_layers,this.dim_kv=this.config.hidden_size/this.num_heads}}class OPTModel extends OPTPreTrainedModel{}class OPTForCausalLM extends OPTPreTrainedModel{}class ViTPreTrainedModel extends PreTrainedModel{}class ViTModel extends ViTPreTrainedModel{}class ViTForImageClassification extends ViTPreTrainedModel{async _call(e){return new SequenceClassifierOutput(await super._call(e))}}class VitMattePreTrainedModel extends PreTrainedModel{}class VitMatteForImageMatting extends VitMattePreTrainedModel{async _call(e){return new ImageMattingOutput(await super._call(e))}}class MobileViTPreTrainedModel extends PreTrainedModel{}class MobileViTModel extends MobileViTPreTrainedModel{}class MobileViTForImageClassification extends MobileViTPreTrainedModel{async _call(e){return new SequenceClassifierOutput(await super._call(e))}}class OwlViTPreTrainedModel extends PreTrainedModel{}class OwlViTModel extends OwlViTPreTrainedModel{}class OwlViTForObjectDetection extends OwlViTPreTrainedModel{}class BeitPreTrainedModel extends PreTrainedModel{}class BeitModel extends BeitPreTrainedModel{}class BeitForImageClassification extends BeitPreTrainedModel{async _call(e){return new SequenceClassifierOutput(await super._call(e))}}class DetrPreTrainedModel extends PreTrainedModel{}class DetrModel extends DetrPreTrainedModel{}class DetrForObjectDetection extends DetrPreTrainedModel{async _call(e){return new DetrObjectDetectionOutput(await super._call(e))}}class DetrForSegmentation extends DetrPreTrainedModel{async _call(e){return new DetrSegmentationOutput(await super._call(e))}}class DetrObjectDetectionOutput extends ModelOutput{constructor({logits:e,pred_boxes:t}){super(),this.logits=e,this.pred_boxes=t}}class DetrSegmentationOutput extends ModelOutput{constructor({logits:e,pred_boxes:t,pred_masks:r}){super(),this.logits=e,this.pred_boxes=t,this.pred_masks=r}}class TableTransformerPreTrainedModel extends PreTrainedModel{}class TableTransformerModel extends TableTransformerPreTrainedModel{}class TableTransformerForObjectDetection extends TableTransformerPreTrainedModel{async _call(e){return new TableTransformerObjectDetectionOutput(await super._call(e))}}class TableTransformerObjectDetectionOutput extends DetrObjectDetectionOutput{}class DeiTPreTrainedModel extends PreTrainedModel{}class DeiTModel extends DeiTPreTrainedModel{}class DeiTForImageClassification extends DeiTPreTrainedModel{async _call(e){return new SequenceClassifierOutput(await super._call(e))}}class ResNetPreTrainedModel extends PreTrainedModel{}class ResNetModel extends ResNetPreTrainedModel{}class ResNetForImageClassification extends ResNetPreTrainedModel{async _call(e){return new SequenceClassifierOutput(await super._call(e))}}class SwinPreTrainedModel extends PreTrainedModel{}class SwinModel extends SwinPreTrainedModel{}class SwinForImageClassification extends SwinPreTrainedModel{async _call(e){return new SequenceClassifierOutput(await super._call(e))}}class Swin2SRPreTrainedModel extends PreTrainedModel{}class Swin2SRModel extends Swin2SRPreTrainedModel{}class Swin2SRForImageSuperResolution extends Swin2SRPreTrainedModel{}class DPTPreTrainedModel extends PreTrainedModel{}class DPTModel extends DPTPreTrainedModel{}class DPTForDepthEstimation extends DPTPreTrainedModel{}class GLPNPreTrainedModel extends PreTrainedModel{}class GLPNModel extends GLPNPreTrainedModel{}class GLPNForDepthEstimation extends GLPNPreTrainedModel{}class DonutSwinPreTrainedModel extends PreTrainedModel{}class DonutSwinModel extends DonutSwinPreTrainedModel{}class ConvNextPreTrainedModel extends PreTrainedModel{}class ConvNextModel extends ConvNextPreTrainedModel{}class ConvNextForImageClassification extends ConvNextPreTrainedModel{async _call(e){return new SequenceClassifierOutput(await super._call(e))}}class ConvNextV2PreTrainedModel extends PreTrainedModel{}class ConvNextV2Model extends ConvNextV2PreTrainedModel{}class ConvNextV2ForImageClassification extends ConvNextV2PreTrainedModel{async _call(e){return new SequenceClassifierOutput(await super._call(e))}}class Dinov2PreTrainedModel extends PreTrainedModel{}class Dinov2Model extends Dinov2PreTrainedModel{}class Dinov2ForImageClassification extends Dinov2PreTrainedModel{async _call(e){return new SequenceClassifierOutput(await super._call(e))}}class YolosPreTrainedModel extends PreTrainedModel{}class YolosModel extends YolosPreTrainedModel{}class YolosForObjectDetection extends YolosPreTrainedModel{async _call(e){return new YolosObjectDetectionOutput(await super._call(e))}}class YolosObjectDetectionOutput extends ModelOutput{constructor({logits:e,pred_boxes:t}){super(),this.logits=e,this.pred_boxes=t}}class SamPreTrainedModel extends PreTrainedModel{}class SamModel extends SamPreTrainedModel{constructor(e,t,r){super(e,t),this.prompt_encoder_mask_decoder=r}async get_image_embeddings({pixel_values:e}){return await encoderForward(this,{pixel_values:e})}async forward(e){if((!e.image_embeddings||!e.image_positional_embeddings)&&(e={...e,...await this.get_image_embeddings(e)}),!e.input_labels){const t=e.input_points.dims.slice(0,-1),r=t.reduce((u,T)=>u*T,1);e.input_labels=new Tensor("int64",new BigInt64Array(r).fill(1n),t)}return await sessionRun(this.prompt_encoder_mask_decoder,{input_points:e.input_points,input_labels:e.input_labels,image_embeddings:e.image_embeddings,image_positional_embeddings:e.image_positional_embeddings})}async _call(e){return new SamImageSegmentationOutput(await super._call(e))}}class SamImageSegmentationOutput extends ModelOutput{constructor({iou_scores:e,pred_masks:t}){super(),this.iou_scores=e,this.pred_masks=t}}class MarianPreTrainedModel extends PreTrainedModel{}class MarianModel extends MarianPreTrainedModel{}class MarianMTModel extends MarianPreTrainedModel{constructor(e,t,r,u){super(e,t),this.decoder_merged_session=r,this.generation_config=u,this.num_decoder_layers=this.config.decoder_layers,this.num_decoder_heads=this.config.decoder_attention_heads,this.decoder_dim_kv=this.config.d_model/this.num_decoder_heads,this.num_encoder_layers=this.config.encoder_layers,this.num_encoder_heads=this.config.encoder_attention_heads,this.encoder_dim_kv=this.config.d_model/this.num_encoder_heads}}class M2M100PreTrainedModel extends PreTrainedModel{}class M2M100Model extends M2M100PreTrainedModel{}class M2M100ForConditionalGeneration extends M2M100PreTrainedModel{constructor(e,t,r,u){super(e,t),this.decoder_merged_session=r,this.generation_config=u,this.num_decoder_layers=this.config.decoder_layers,this.num_decoder_heads=this.config.decoder_attention_heads,this.decoder_dim_kv=this.config.d_model/this.num_decoder_heads,this.num_encoder_layers=this.config.encoder_layers,this.num_encoder_heads=this.config.encoder_attention_heads,this.encoder_dim_kv=this.config.d_model/this.num_encoder_heads}}class Wav2Vec2PreTrainedModel extends PreTrainedModel{}class Wav2Vec2Model extends Wav2Vec2PreTrainedModel{}class Wav2Vec2ForCTC extends Wav2Vec2PreTrainedModel{async _call(e){return new CausalLMOutput(await super._call(e))}}class Wav2Vec2ForSequenceClassification extends Wav2Vec2PreTrainedModel{async _call(e){return new SequenceClassifierOutput(await super._call(e))}}class HubertModel extends Wav2Vec2PreTrainedModel{}class HubertForCTC extends Wav2Vec2PreTrainedModel{async _call(e){return new CausalLMOutput(await super._call(e))}}class HubertForSequenceClassification extends Wav2Vec2PreTrainedModel{async _call(e){return new SequenceClassifierOutput(await super._call(e))}}class WavLMPreTrainedModel extends PreTrainedModel{}class WavLMModel extends WavLMPreTrainedModel{}class WavLMForCTC extends WavLMPreTrainedModel{async _call(e){return new CausalLMOutput(await super._call(e))}}class WavLMForSequenceClassification extends WavLMPreTrainedModel{async _call(e){return new SequenceClassifierOutput(await super._call(e))}}class SpeechT5PreTrainedModel extends PreTrainedModel{}class SpeechT5ForSpeechToText extends SpeechT5PreTrainedModel{}class SpeechT5ForTextToSpeech extends SpeechT5PreTrainedModel{constructor(e,t,r,u){super(e,t),this.decoder_merged_session=r,this.generation_config=u,this.num_decoder_layers=this.config.decoder_layers,this.num_decoder_heads=this.config.decoder_attention_heads,this.decoder_dim_kv=this.config.hidden_size/this.num_decoder_heads,this.num_encoder_layers=this.config.encoder_layers,this.num_encoder_heads=this.config.encoder_attention_heads,this.encoder_dim_kv=this.config.hidden_size/this.num_encoder_heads}async generate_speech(e,t,{threshold:r=.5,minlenratio:u=0,maxlenratio:T=20,vocoder:d=null}={}){const A={input_ids:e},{encoder_outputs:le,encoder_attention_mask:G}=await encoderForward(this,A),B=le.dims[1]/this.config.reduction_factor,o=Math.floor(B*T),i=Math.floor(B*u),w=this.config.num_mel_bins;let ae=[],ue=null,he=null,pe=0;for(;;){++pe;const ve=boolTensor(!!he);let we;he?we=he.output_sequence_out:we=new Tensor("float32",new Float32Array(w),[1,1,w]);let Se={use_cache_branch:ve,output_sequence:we,encoder_attention_mask:G,speaker_embeddings:t,encoder_hidden_states:le};this.addPastKeyValues(Se,ue),he=await sessionRun(this.decoder_merged_session,Se),ue=this.getPastKeyValues(he,ue);const{prob:Ae,spectrum:Re}=he;if(ae.push(Re),pe>=i&&(Array.from(Ae.data).filter(Te=>Te>=r).length>0||pe>=o))break}const ge=cat(ae),{waveform:be}=await sessionRun(d.session,{spectrogram:ge});return{spectrogram:ge,waveform:be}}}class SpeechT5HifiGan extends PreTrainedModel{constructor(){super(...arguments);Mt(this,"main_input_name","spectrogram")}}class TrOCRPreTrainedModel extends PreTrainedModel{constructor(e,t,r){super(e,t),this.generation_config=r,this.config.pad_token_id=this.config.eos_token_id,this.num_encoder_layers=this.num_decoder_layers=this.config.decoder_layers,this.num_encoder_heads=this.num_decoder_heads=this.config.decoder_attention_heads,this.encoder_dim_kv=this.decoder_dim_kv=this.config.d_model/this.num_decoder_heads}}class TrOCRForCausalLM extends TrOCRPreTrainedModel{}class MistralPreTrainedModel extends PreTrainedModel{constructor(e,t,r){super(e,t),this.generation_config=r,this.config.pad_token_id=this.config.eos_token_id,this.num_heads=this.config.num_key_value_heads,this.num_layers=this.config.num_hidden_layers,this.dim_kv=this.config.hidden_size/this.config.num_attention_heads}}class MistralModel extends MistralPreTrainedModel{}class MistralForCausalLM extends MistralPreTrainedModel{}class FalconPreTrainedModel extends PreTrainedModel{constructor(e,t,r){super(e,t),this.generation_config=r,this.config.pad_token_id=this.config.eos_token_id,this.num_heads=this.config.num_attention_heads,this.num_layers=this.config.num_hidden_layers,this.dim_kv=this.config.hidden_size/this.config.num_attention_heads}}class FalconModel extends FalconPreTrainedModel{}class FalconForCausalLM extends FalconPreTrainedModel{}class ClapPreTrainedModel extends PreTrainedModel{}class ClapModel extends ClapPreTrainedModel{}class ClapTextModelWithProjection extends ClapPreTrainedModel{static async from_pretrained(e,t={}){return t.model_file_name??(t.model_file_name="text_model"),super.from_pretrained(e,t)}}class ClapAudioModelWithProjection extends ClapPreTrainedModel{static async from_pretrained(e,t={}){return t.model_file_name??(t.model_file_name="audio_model"),super.from_pretrained(e,t)}}class VitsPreTrainedModel extends PreTrainedModel{}class VitsModel extends VitsPreTrainedModel{async _call(e){return new VitsModelOutput(await super._call(e))}}class SegformerPreTrainedModel extends PreTrainedModel{}class SegformerForImageClassification extends SegformerPreTrainedModel{}class SegformerForSemanticSegmentation extends SegformerPreTrainedModel{}class PretrainedMixin{static async from_pretrained(e,{quantized:t=!0,progress_callback:r=null,config:u=null,cache_dir:T=null,local_files_only:d=!1,revision:A="main",model_file_name:le=null}={}){let G={quantized:t,progress_callback:r,config:u,cache_dir:T,local_files_only:d,revision:A,model_file_name:le};if(u=await AutoConfig.from_pretrained(e,G),G.config||(G.config=u),!this.MODEL_CLASS_MAPPINGS)throw new Error("`MODEL_CLASS_MAPPINGS` not implemented for this type of `AutoClass`: "+this.name);for(let B of this.MODEL_CLASS_MAPPINGS){const o=B.get(u.model_type);if(o)return await o[1].from_pretrained(e,G)}if(this.BASE_IF_FAIL)return console.warn(`Unknown model class "${u.model_type}", attempting to construct from base class.`),await PreTrainedModel.from_pretrained(e,G);throw Error(`Unsupported model type: ${u.model_type}`)}}Mt(PretrainedMixin,"MODEL_CLASS_MAPPINGS",null),Mt(PretrainedMixin,"BASE_IF_FAIL",!1);const MODEL_MAPPING_NAMES_ENCODER_ONLY=new Map([["bert",["BertModel",BertModel]],["roformer",["RoFormerModel",RoFormerModel]],["electra",["ElectraModel",ElectraModel]],["esm",["EsmModel",EsmModel]],["convbert",["ConvBertModel",ConvBertModel]],["camembert",["CamembertModel",CamembertModel]],["deberta",["DebertaModel",DebertaModel]],["deberta-v2",["DebertaV2Model",DebertaV2Model]],["mpnet",["MPNetModel",MPNetModel]],["albert",["AlbertModel",AlbertModel]],["distilbert",["DistilBertModel",DistilBertModel]],["roberta",["RobertaModel",RobertaModel]],["xlm",["XLMModel",XLMModel]],["xlm-roberta",["XLMRobertaModel",XLMRobertaModel]],["clap",["ClapModel",ClapModel]],["clip",["CLIPModel",CLIPModel]],["clipseg",["CLIPSegModel",CLIPSegModel]],["chinese_clip",["ChineseCLIPModel",ChineseCLIPModel]],["siglip",["SiglipModel",SiglipModel]],["mobilebert",["MobileBertModel",MobileBertModel]],["squeezebert",["SqueezeBertModel",SqueezeBertModel]],["wav2vec2",["Wav2Vec2Model",Wav2Vec2Model]],["hubert",["HubertModel",HubertModel]],["wavlm",["WavLMModel",WavLMModel]],["audio-spectrogram-transformer",["ASTModel",ASTModel]],["vits",["VitsModel",VitsModel]],["detr",["DetrModel",DetrModel]],["table-transformer",["TableTransformerModel",TableTransformerModel]],["vit",["ViTModel",ViTModel]],["mobilevit",["MobileViTModel",MobileViTModel]],["owlvit",["OwlViTModel",OwlViTModel]],["beit",["BeitModel",BeitModel]],["deit",["DeiTModel",DeiTModel]],["convnext",["ConvNextModel",ConvNextModel]],["convnextv2",["ConvNextV2Model",ConvNextV2Model]],["dinov2",["Dinov2Model",Dinov2Model]],["resnet",["ResNetModel",ResNetModel]],["swin",["SwinModel",SwinModel]],["swin2sr",["Swin2SRModel",Swin2SRModel]],["donut-swin",["DonutSwinModel",DonutSwinModel]],["yolos",["YolosModel",YolosModel]],["dpt",["DPTModel",DPTModel]],["glpn",["GLPNModel",GLPNModel]],["hifigan",["SpeechT5HifiGan",SpeechT5HifiGan]]]),MODEL_MAPPING_NAMES_ENCODER_DECODER=new Map([["t5",["T5Model",T5Model]],["longt5",["LongT5Model",LongT5Model]],["mt5",["MT5Model",MT5Model]],["bart",["BartModel",BartModel]],["mbart",["MBartModel",MBartModel]],["marian",["MarianModel",MarianModel]],["whisper",["WhisperModel",WhisperModel]],["m2m_100",["M2M100Model",M2M100Model]],["blenderbot",["BlenderbotModel",BlenderbotModel]],["blenderbot-small",["BlenderbotSmallModel",BlenderbotSmallModel]]]),MODEL_MAPPING_NAMES_DECODER_ONLY=new Map([["bloom",["BloomModel",BloomModel]],["gpt2",["GPT2Model",GPT2Model]],["gptj",["GPTJModel",GPTJModel]],["gpt_bigcode",["GPTBigCodeModel",GPTBigCodeModel]],["gpt_neo",["GPTNeoModel",GPTNeoModel]],["gpt_neox",["GPTNeoXModel",GPTNeoXModel]],["codegen",["CodeGenModel",CodeGenModel]],["llama",["LlamaModel",LlamaModel]],["phi",["PhiModel",PhiModel]],["mpt",["MptModel",MptModel]],["opt",["OPTModel",OPTModel]],["mistral",["MistralModel",MistralModel]],["falcon",["FalconModel",FalconModel]]]),MODEL_FOR_SPEECH_SEQ_2_SEQ_MAPPING_NAMES=new Map([["speecht5",["SpeechT5ForSpeechToText",SpeechT5ForSpeechToText]],["whisper",["WhisperForConditionalGeneration",WhisperForConditionalGeneration]]]),MODEL_FOR_TEXT_TO_SPECTROGRAM_MAPPING_NAMES=new Map([["speecht5",["SpeechT5ForTextToSpeech",SpeechT5ForTextToSpeech]]]),MODEL_FOR_TEXT_TO_WAVEFORM_MAPPING_NAMES=new Map([["vits",["VitsModel",VitsModel]]]),MODEL_FOR_SEQUENCE_CLASSIFICATION_MAPPING_NAMES=new Map([["bert",["BertForSequenceClassification",BertForSequenceClassification]],["roformer",["RoFormerForSequenceClassification",RoFormerForSequenceClassification]],["electra",["ElectraForSequenceClassification",ElectraForSequenceClassification]],["esm",["EsmForSequenceClassification",EsmForSequenceClassification]],["convbert",["ConvBertForSequenceClassification",ConvBertForSequenceClassification]],["camembert",["CamembertForSequenceClassification",CamembertForSequenceClassification]],["deberta",["DebertaForSequenceClassification",DebertaForSequenceClassification]],["deberta-v2",["DebertaV2ForSequenceClassification",DebertaV2ForSequenceClassification]],["mpnet",["MPNetForSequenceClassification",MPNetForSequenceClassification]],["albert",["AlbertForSequenceClassification",AlbertForSequenceClassification]],["distilbert",["DistilBertForSequenceClassification",DistilBertForSequenceClassification]],["roberta",["RobertaForSequenceClassification",RobertaForSequenceClassification]],["xlm",["XLMForSequenceClassification",XLMForSequenceClassification]],["xlm-roberta",["XLMRobertaForSequenceClassification",XLMRobertaForSequenceClassification]],["bart",["BartForSequenceClassification",BartForSequenceClassification]],["mbart",["MBartForSequenceClassification",MBartForSequenceClassification]],["mobilebert",["MobileBertForSequenceClassification",MobileBertForSequenceClassification]],["squeezebert",["SqueezeBertForSequenceClassification",SqueezeBertForSequenceClassification]]]),MODEL_FOR_TOKEN_CLASSIFICATION_MAPPING_NAMES=new Map([["bert",["BertForTokenClassification",BertForTokenClassification]],["roformer",["RoFormerForTokenClassification",RoFormerForTokenClassification]],["electra",["ElectraForTokenClassification",ElectraForTokenClassification]],["esm",["EsmForTokenClassification",EsmForTokenClassification]],["convbert",["ConvBertForTokenClassification",ConvBertForTokenClassification]],["camembert",["CamembertForTokenClassification",CamembertForTokenClassification]],["deberta",["DebertaForTokenClassification",DebertaForTokenClassification]],["deberta-v2",["DebertaV2ForTokenClassification",DebertaV2ForTokenClassification]],["mpnet",["MPNetForTokenClassification",MPNetForTokenClassification]],["distilbert",["DistilBertForTokenClassification",DistilBertForTokenClassification]],["roberta",["RobertaForTokenClassification",RobertaForTokenClassification]],["xlm",["XLMForTokenClassification",XLMForTokenClassification]],["xlm-roberta",["XLMRobertaForTokenClassification",XLMRobertaForTokenClassification]]]),MODEL_FOR_SEQ_TO_SEQ_CAUSAL_LM_MAPPING_NAMES=new Map([["t5",["T5ForConditionalGeneration",T5ForConditionalGeneration]],["longt5",["LongT5ForConditionalGeneration",LongT5ForConditionalGeneration]],["mt5",["MT5ForConditionalGeneration",MT5ForConditionalGeneration]],["bart",["BartForConditionalGeneration",BartForConditionalGeneration]],["mbart",["MBartForConditionalGeneration",MBartForConditionalGeneration]],["marian",["MarianMTModel",MarianMTModel]],["m2m_100",["M2M100ForConditionalGeneration",M2M100ForConditionalGeneration]],["blenderbot",["BlenderbotForConditionalGeneration",BlenderbotForConditionalGeneration]],["blenderbot-small",["BlenderbotSmallForConditionalGeneration",BlenderbotSmallForConditionalGeneration]]]),MODEL_WITH_LM_HEAD_MAPPING_NAMES=new Map([["bloom",["BloomForCausalLM",BloomForCausalLM]],["gpt2",["GPT2LMHeadModel",GPT2LMHeadModel]],["gptj",["GPTJForCausalLM",GPTJForCausalLM]],["gpt_bigcode",["GPTBigCodeForCausalLM",GPTBigCodeForCausalLM]],["gpt_neo",["GPTNeoForCausalLM",GPTNeoForCausalLM]],["gpt_neox",["GPTNeoXForCausalLM",GPTNeoXForCausalLM]],["codegen",["CodeGenForCausalLM",CodeGenForCausalLM]],["llama",["LlamaForCausalLM",LlamaForCausalLM]],["phi",["PhiForCausalLM",PhiForCausalLM]],["mpt",["MptForCausalLM",MptForCausalLM]],["opt",["OPTForCausalLM",OPTForCausalLM]],["mbart",["MBartForCausalLM",MBartForCausalLM]],["mistral",["MistralForCausalLM",MistralForCausalLM]],["falcon",["FalconForCausalLM",FalconForCausalLM]],["trocr",["TrOCRForCausalLM",TrOCRForCausalLM]]]),MODEL_FOR_MASKED_LM_MAPPING_NAMES=new Map([["bert",["BertForMaskedLM",BertForMaskedLM]],["roformer",["RoFormerForMaskedLM",RoFormerForMaskedLM]],["electra",["ElectraForMaskedLM",ElectraForMaskedLM]],["esm",["EsmForMaskedLM",EsmForMaskedLM]],["convbert",["ConvBertForMaskedLM",ConvBertForMaskedLM]],["camembert",["CamembertForMaskedLM",CamembertForMaskedLM]],["deberta",["DebertaForMaskedLM",DebertaForMaskedLM]],["deberta-v2",["DebertaV2ForMaskedLM",DebertaV2ForMaskedLM]],["mpnet",["MPNetForMaskedLM",MPNetForMaskedLM]],["albert",["AlbertForMaskedLM",AlbertForMaskedLM]],["distilbert",["DistilBertForMaskedLM",DistilBertForMaskedLM]],["roberta",["RobertaForMaskedLM",RobertaForMaskedLM]],["xlm",["XLMWithLMHeadModel",XLMWithLMHeadModel]],["xlm-roberta",["XLMRobertaForMaskedLM",XLMRobertaForMaskedLM]],["mobilebert",["MobileBertForMaskedLM",MobileBertForMaskedLM]],["squeezebert",["SqueezeBertForMaskedLM",SqueezeBertForMaskedLM]]]),MODEL_FOR_QUESTION_ANSWERING_MAPPING_NAMES=new Map([["bert",["BertForQuestionAnswering",BertForQuestionAnswering]],["roformer",["RoFormerForQuestionAnswering",RoFormerForQuestionAnswering]],["electra",["ElectraForQuestionAnswering",ElectraForQuestionAnswering]],["convbert",["ConvBertForQuestionAnswering",ConvBertForQuestionAnswering]],["camembert",["CamembertForQuestionAnswering",CamembertForQuestionAnswering]],["deberta",["DebertaForQuestionAnswering",DebertaForQuestionAnswering]],["deberta-v2",["DebertaV2ForQuestionAnswering",DebertaV2ForQuestionAnswering]],["mpnet",["MPNetForQuestionAnswering",MPNetForQuestionAnswering]],["albert",["AlbertForQuestionAnswering",AlbertForQuestionAnswering]],["distilbert",["DistilBertForQuestionAnswering",DistilBertForQuestionAnswering]],["roberta",["RobertaForQuestionAnswering",RobertaForQuestionAnswering]],["xlm",["XLMForQuestionAnswering",XLMForQuestionAnswering]],["xlm-roberta",["XLMRobertaForQuestionAnswering",XLMRobertaForQuestionAnswering]],["mobilebert",["MobileBertForQuestionAnswering",MobileBertForQuestionAnswering]],["squeezebert",["SqueezeBertForQuestionAnswering",SqueezeBertForQuestionAnswering]]]),MODEL_FOR_VISION_2_SEQ_MAPPING_NAMES=new Map([["vision-encoder-decoder",["VisionEncoderDecoderModel",VisionEncoderDecoderModel]]]),MODEL_FOR_DOCUMENT_QUESTION_ANSWERING_MAPPING_NAMES=new Map([["vision-encoder-decoder",["VisionEncoderDecoderModel",VisionEncoderDecoderModel]]]),MODEL_FOR_IMAGE_CLASSIFICATION_MAPPING_NAMES=new Map([["vit",["ViTForImageClassification",ViTForImageClassification]],["mobilevit",["MobileViTForImageClassification",MobileViTForImageClassification]],["beit",["BeitForImageClassification",BeitForImageClassification]],["deit",["DeiTForImageClassification",DeiTForImageClassification]],["convnext",["ConvNextForImageClassification",ConvNextForImageClassification]],["convnextv2",["ConvNextV2ForImageClassification",ConvNextV2ForImageClassification]],["dinov2",["Dinov2ForImageClassification",Dinov2ForImageClassification]],["resnet",["ResNetForImageClassification",ResNetForImageClassification]],["swin",["SwinForImageClassification",SwinForImageClassification]],["segformer",["SegformerForImageClassification",SegformerForImageClassification]]]),MODEL_FOR_OBJECT_DETECTION_MAPPING_NAMES=new Map([["detr",["DetrForObjectDetection",DetrForObjectDetection]],["table-transformer",["TableTransformerForObjectDetection",TableTransformerForObjectDetection]],["yolos",["YolosForObjectDetection",YolosForObjectDetection]]]),MODEL_FOR_ZERO_SHOT_OBJECT_DETECTION_MAPPING_NAMES=new Map([["owlvit",["OwlViTForObjectDetection",OwlViTForObjectDetection]]]),MODEL_FOR_IMAGE_SEGMENTATION_MAPPING_NAMES=new Map([["detr",["DetrForSegmentation",DetrForSegmentation]],["clipseg",["CLIPSegForImageSegmentation",CLIPSegForImageSegmentation]]]),MODEL_FOR_SEMANTIC_SEGMENTATION_MAPPING_NAMES=new Map([["segformer",["SegformerForSemanticSegmentation",SegformerForSemanticSegmentation]]]),MODEL_FOR_MASK_GENERATION_MAPPING_NAMES=new Map([["sam",["SamModel",SamModel]]]),MODEL_FOR_CTC_MAPPING_NAMES=new Map([["wav2vec2",["Wav2Vec2ForCTC",Wav2Vec2ForCTC]],["wavlm",["WavLMForCTC",WavLMForCTC]],["hubert",["HubertForCTC",HubertForCTC]]]),MODEL_FOR_AUDIO_CLASSIFICATION_MAPPING_NAMES=new Map([["wav2vec2",["Wav2Vec2ForSequenceClassification",Wav2Vec2ForSequenceClassification]],["wavlm",["WavLMForSequenceClassification",WavLMForSequenceClassification]],["hubert",["HubertForSequenceClassification",HubertForSequenceClassification]],["audio-spectrogram-transformer",["ASTForAudioClassification",ASTForAudioClassification]]]),MODEL_FOR_IMAGE_MATTING_MAPPING_NAMES=new Map([["vitmatte",["VitMatteForImageMatting",VitMatteForImageMatting]]]),MODEL_FOR_IMAGE_TO_IMAGE_MAPPING_NAMES=new Map([["swin2sr",["Swin2SRForImageSuperResolution",Swin2SRForImageSuperResolution]]]),MODEL_FOR_DEPTH_ESTIMATION_MAPPING_NAMES=new Map([["dpt",["DPTForDepthEstimation",DPTForDepthEstimation]],["glpn",["GLPNForDepthEstimation",GLPNForDepthEstimation]]]),MODEL_CLASS_TYPE_MAPPING=[[MODEL_MAPPING_NAMES_ENCODER_ONLY,MODEL_TYPES.EncoderOnly],[MODEL_MAPPING_NAMES_ENCODER_DECODER,MODEL_TYPES.EncoderDecoder],[MODEL_MAPPING_NAMES_DECODER_ONLY,MODEL_TYPES.DecoderOnly],[MODEL_FOR_SEQUENCE_CLASSIFICATION_MAPPING_NAMES,MODEL_TYPES.EncoderOnly],[MODEL_FOR_TOKEN_CLASSIFICATION_MAPPING_NAMES,MODEL_TYPES.EncoderOnly],[MODEL_FOR_SEQ_TO_SEQ_CAUSAL_LM_MAPPING_NAMES,MODEL_TYPES.Seq2Seq],[MODEL_FOR_SPEECH_SEQ_2_SEQ_MAPPING_NAMES,MODEL_TYPES.Seq2Seq],[MODEL_WITH_LM_HEAD_MAPPING_NAMES,MODEL_TYPES.DecoderOnly],[MODEL_FOR_MASKED_LM_MAPPING_NAMES,MODEL_TYPES.EncoderOnly],[MODEL_FOR_QUESTION_ANSWERING_MAPPING_NAMES,MODEL_TYPES.EncoderOnly],[MODEL_FOR_VISION_2_SEQ_MAPPING_NAMES,MODEL_TYPES.Vision2Seq],[MODEL_FOR_IMAGE_CLASSIFICATION_MAPPING_NAMES,MODEL_TYPES.EncoderOnly],[MODEL_FOR_IMAGE_SEGMENTATION_MAPPING_NAMES,MODEL_TYPES.EncoderOnly],[MODEL_FOR_SEMANTIC_SEGMENTATION_MAPPING_NAMES,MODEL_TYPES.EncoderOnly],[MODEL_FOR_IMAGE_MATTING_MAPPING_NAMES,MODEL_TYPES.EncoderOnly],[MODEL_FOR_IMAGE_TO_IMAGE_MAPPING_NAMES,MODEL_TYPES.EncoderOnly],[MODEL_FOR_DEPTH_ESTIMATION_MAPPING_NAMES,MODEL_TYPES.EncoderOnly],[MODEL_FOR_OBJECT_DETECTION_MAPPING_NAMES,MODEL_TYPES.EncoderOnly],[MODEL_FOR_ZERO_SHOT_OBJECT_DETECTION_MAPPING_NAMES,MODEL_TYPES.EncoderOnly],[MODEL_FOR_MASK_GENERATION_MAPPING_NAMES,MODEL_TYPES.MaskGeneration],[MODEL_FOR_CTC_MAPPING_NAMES,MODEL_TYPES.EncoderOnly],[MODEL_FOR_AUDIO_CLASSIFICATION_MAPPING_NAMES,MODEL_TYPES.EncoderOnly],[MODEL_FOR_TEXT_TO_SPECTROGRAM_MAPPING_NAMES,MODEL_TYPES.Seq2Seq],[MODEL_FOR_TEXT_TO_WAVEFORM_MAPPING_NAMES,MODEL_TYPES.EncoderOnly]];for(const[n,e]of MODEL_CLASS_TYPE_MAPPING)for(const[t,r]of n.values())MODEL_TYPE_MAPPING.set(t,e),MODEL_CLASS_TO_NAME_MAPPING.set(r,t),MODEL_NAME_TO_CLASS_MAPPING.set(t,r);const CUSTOM_MAPPING=[["CLIPTextModelWithProjection",CLIPTextModelWithProjection,MODEL_TYPES.EncoderOnly],["CLIPVisionModelWithProjection",CLIPVisionModelWithProjection,MODEL_TYPES.EncoderOnly],["SiglipTextModel",SiglipTextModel,MODEL_TYPES.EncoderOnly],["SiglipVisionModel",SiglipVisionModel,MODEL_TYPES.EncoderOnly],["ClapTextModelWithProjection",ClapTextModelWithProjection,MODEL_TYPES.EncoderOnly],["ClapAudioModelWithProjection",ClapAudioModelWithProjection,MODEL_TYPES.EncoderOnly]];for(const[n,e,t]of CUSTOM_MAPPING)MODEL_TYPE_MAPPING.set(n,t),MODEL_CLASS_TO_NAME_MAPPING.set(e,n),MODEL_NAME_TO_CLASS_MAPPING.set(n,e);class AutoModel extends PretrainedMixin{}Mt(AutoModel,"MODEL_CLASS_MAPPINGS",MODEL_CLASS_TYPE_MAPPING.map(e=>e[0])),Mt(AutoModel,"BASE_IF_FAIL",!0);class AutoModelForSequenceClassification extends PretrainedMixin{}Mt(AutoModelForSequenceClassification,"MODEL_CLASS_MAPPINGS",[MODEL_FOR_SEQUENCE_CLASSIFICATION_MAPPING_NAMES]);class AutoModelForTokenClassification extends PretrainedMixin{}Mt(AutoModelForTokenClassification,"MODEL_CLASS_MAPPINGS",[MODEL_FOR_TOKEN_CLASSIFICATION_MAPPING_NAMES]);class AutoModelForSeq2SeqLM extends PretrainedMixin{}Mt(AutoModelForSeq2SeqLM,"MODEL_CLASS_MAPPINGS",[MODEL_FOR_SEQ_TO_SEQ_CAUSAL_LM_MAPPING_NAMES]);class AutoModelForSpeechSeq2Seq extends PretrainedMixin{}Mt(AutoModelForSpeechSeq2Seq,"MODEL_CLASS_MAPPINGS",[MODEL_FOR_SPEECH_SEQ_2_SEQ_MAPPING_NAMES]);class AutoModelForTextToSpectrogram extends PretrainedMixin{}Mt(AutoModelForTextToSpectrogram,"MODEL_CLASS_MAPPINGS",[MODEL_FOR_TEXT_TO_SPECTROGRAM_MAPPING_NAMES]);class AutoModelForTextToWaveform extends PretrainedMixin{}Mt(AutoModelForTextToWaveform,"MODEL_CLASS_MAPPINGS",[MODEL_FOR_TEXT_TO_WAVEFORM_MAPPING_NAMES]);class AutoModelForCausalLM extends PretrainedMixin{}Mt(AutoModelForCausalLM,"MODEL_CLASS_MAPPINGS",[MODEL_WITH_LM_HEAD_MAPPING_NAMES]);class AutoModelForMaskedLM extends PretrainedMixin{}Mt(AutoModelForMaskedLM,"MODEL_CLASS_MAPPINGS",[MODEL_FOR_MASKED_LM_MAPPING_NAMES]);class AutoModelForQuestionAnswering extends PretrainedMixin{}Mt(AutoModelForQuestionAnswering,"MODEL_CLASS_MAPPINGS",[MODEL_FOR_QUESTION_ANSWERING_MAPPING_NAMES]);class AutoModelForVision2Seq extends PretrainedMixin{}Mt(AutoModelForVision2Seq,"MODEL_CLASS_MAPPINGS",[MODEL_FOR_VISION_2_SEQ_MAPPING_NAMES]);class AutoModelForImageClassification extends PretrainedMixin{}Mt(AutoModelForImageClassification,"MODEL_CLASS_MAPPINGS",[MODEL_FOR_IMAGE_CLASSIFICATION_MAPPING_NAMES]);class AutoModelForImageSegmentation extends PretrainedMixin{}Mt(AutoModelForImageSegmentation,"MODEL_CLASS_MAPPINGS",[MODEL_FOR_IMAGE_SEGMENTATION_MAPPING_NAMES]);class AutoModelForSemanticSegmentation extends PretrainedMixin{}Mt(AutoModelForSemanticSegmentation,"MODEL_CLASS_MAPPINGS",[MODEL_FOR_SEMANTIC_SEGMENTATION_MAPPING_NAMES]);class AutoModelForObjectDetection extends PretrainedMixin{}Mt(AutoModelForObjectDetection,"MODEL_CLASS_MAPPINGS",[MODEL_FOR_OBJECT_DETECTION_MAPPING_NAMES]);class AutoModelForZeroShotObjectDetection extends PretrainedMixin{}Mt(AutoModelForZeroShotObjectDetection,"MODEL_CLASS_MAPPINGS",[MODEL_FOR_ZERO_SHOT_OBJECT_DETECTION_MAPPING_NAMES]);class AutoModelForCTC extends PretrainedMixin{}Mt(AutoModelForCTC,"MODEL_CLASS_MAPPINGS",[MODEL_FOR_CTC_MAPPING_NAMES]);class AutoModelForAudioClassification extends PretrainedMixin{}Mt(AutoModelForAudioClassification,"MODEL_CLASS_MAPPINGS",[MODEL_FOR_AUDIO_CLASSIFICATION_MAPPING_NAMES]);class AutoModelForDocumentQuestionAnswering extends PretrainedMixin{}Mt(AutoModelForDocumentQuestionAnswering,"MODEL_CLASS_MAPPINGS",[MODEL_FOR_DOCUMENT_QUESTION_ANSWERING_MAPPING_NAMES]);class AutoModelForImageToImage extends PretrainedMixin{}Mt(AutoModelForImageToImage,"MODEL_CLASS_MAPPINGS",[MODEL_FOR_IMAGE_TO_IMAGE_MAPPING_NAMES]);class AutoModelForDepthEstimation extends PretrainedMixin{}Mt(AutoModelForDepthEstimation,"MODEL_CLASS_MAPPINGS",[MODEL_FOR_DEPTH_ESTIMATION_MAPPING_NAMES]);class Seq2SeqLMOutput extends ModelOutput{constructor({logits:e,past_key_values:t,encoder_outputs:r,decoder_attentions:u=null,cross_attentions:T=null}){super(),this.logits=e,this.past_key_values=t,this.encoder_outputs=r,this.decoder_attentions=u,this.cross_attentions=T}}class SequenceClassifierOutput extends ModelOutput{constructor({logits:e}){super(),this.logits=e}}class TokenClassifierOutput extends ModelOutput{constructor({logits:e}){super(),this.logits=e}}class MaskedLMOutput extends ModelOutput{constructor({logits:e}){super(),this.logits=e}}class QuestionAnsweringModelOutput extends ModelOutput{constructor({start_logits:e,end_logits:t}){super(),this.start_logits=e,this.end_logits=t}}class CausalLMOutput extends ModelOutput{constructor({logits:e}){super(),this.logits=e}}class ImageMattingOutput extends ModelOutput{constructor({alphas:e}){super(),this.alphas=e}}class VitsModelOutput extends ModelOutput{constructor({waveform:e,spectrogram:t}){super(),this.waveform=e,this.spectrogram=t}}const BROWSER_ENV=typeof self<"u",WEBWORKER_ENV=BROWSER_ENV&&self.constructor.name==="DedicatedWorkerGlobalScope";let createCanvasFunction,ImageDataClass,loadImageFunction;if(BROWSER_ENV)createCanvasFunction=(n,e)=>{if(!self.OffscreenCanvas)throw new Error("OffscreenCanvas not supported by this browser.");return new self.OffscreenCanvas(n,e)},loadImageFunction=self.createImageBitmap,ImageDataClass=self.ImageData;else if(sharp)loadImageFunction=async n=>{const t=(await n.metadata()).channels;let{data:r,info:u}=await n.raw().toBuffer({resolveWithObject:!0});const T=new RawImage(new Uint8ClampedArray(r),u.width,u.height,u.channels);return t!==void 0&&t!==u.channels&&T.convert(t),T};else throw new Error("Unable to load image processing library.");const RESAMPLING_MAPPING={0:"nearest",1:"lanczos",2:"bilinear",3:"bicubic",4:"box",5:"hamming"},CONTENT_TYPE_MAP=new Map([["png","image/png"],["jpg","image/jpeg"],["jpeg","image/jpeg"],["gif","image/gif"]]);class RawImage{constructor(e,t,r,u){this.data=e,this.width=t,this.height=r,this.channels=u}get size(){return[this.width,this.height]}static async read(e){if(e instanceof RawImage)return e;if(typeof e=="string"||e instanceof URL)return await this.fromURL(e);throw new Error(`Unsupported input type: ${typeof e}`)}static async fromURL(e){let t=await getFile(e);if(t.status!==200)throw new Error(`Unable to read image from "${e}" (${t.status} ${t.statusText})`);let r=await t.blob();return this.fromBlob(r)}static async fromBlob(e){if(BROWSER_ENV){let t=await loadImageFunction(e);const r=createCanvasFunction(t.width,t.height).getContext("2d");return r.drawImage(t,0,0),new this(r.getImageData(0,0,t.width,t.height).data,t.width,t.height,4)}else{let t=sharp(await e.arrayBuffer());return await loadImageFunction(t)}}static fromTensor(e,t="CHW"){if(e.dims.length!==3)throw new Error(`Tensor should have 3 dimensions, but has ${e.dims.length} dimensions.`);if(t==="CHW")e=e.transpose(1,2,0);else if(t!=="HWC")throw new Error(`Unsupported channel format: ${t}`);if(!(e.data instanceof Uint8ClampedArray||e.data instanceof Uint8Array))throw new Error(`Unsupported tensor type: ${e.type}`);switch(e.dims[2]){case 1:case 2:case 3:case 4:return new RawImage(e.data,e.dims[1],e.dims[0],e.dims[2]);default:throw new Error(`Unsupported number of channels: ${e.dims[2]}`)}}grayscale(){if(this.channels===1)return this;let e=new Uint8ClampedArray(this.width*this.height*1);switch(this.channels){case 3:case 4:for(let t=0,r=0;t<this.data.length;t+=this.channels){const u=this.data[t],T=this.data[t+1],d=this.data[t+2];e[r++]=Math.round(.2989*u+.587*T+.114*d)}break;default:throw new Error(`Conversion failed due to unsupported number of channels: ${this.channels}`)}return this._update(e,this.width,this.height,1)}rgb(){if(this.channels===3)return this;let e=new Uint8ClampedArray(this.width*this.height*3);switch(this.channels){case 1:for(let t=0,r=0;t<this.data.length;++t)e[r++]=this.data[t],e[r++]=this.data[t],e[r++]=this.data[t];break;case 4:for(let t=0,r=0;t<this.data.length;t+=4)e[r++]=this.data[t],e[r++]=this.data[t+1],e[r++]=this.data[t+2];break;default:throw new Error(`Conversion failed due to unsupported number of channels: ${this.channels}`)}return this._update(e,this.width,this.height,3)}rgba(){if(this.channels===4)return this;let e=new Uint8ClampedArray(this.width*this.height*4);switch(this.channels){case 1:for(let t=0,r=0;t<this.data.length;++t)e[r++]=this.data[t],e[r++]=this.data[t],e[r++]=this.data[t],e[r++]=255;break;case 3:for(let t=0,r=0;t<this.data.length;t+=3)e[r++]=this.data[t],e[r++]=this.data[t+1],e[r++]=this.data[t+2],e[r++]=255;break;default:throw new Error(`Conversion failed due to unsupported number of channels: ${this.channels}`)}return this._update(e,this.width,this.height,4)}async resize(e,t,{resample:r=2}={}){let u=RESAMPLING_MAPPING[r]??r;if(BROWSER_ENV){let T=this.channels,d=this.toCanvas();const A=createCanvasFunction(e,t).getContext("2d");return A.drawImage(d,0,0,e,t),new RawImage(A.getImageData(0,0,e,t).data,e,t,4).convert(T)}else{let T=this.toSharp();switch(u){case"box":case"hamming":(u==="box"||u==="hamming")&&(console.warn(`Resampling method ${u} is not yet supported. Using bilinear instead.`),u="bilinear");case"nearest":case"bilinear":case"bicubic":T=T.affine([e/this.width,0,0,t/this.height],{interpolator:u});break;case"lanczos":T=T.resize({width:e,height:t,fit:"fill",kernel:"lanczos3"});break;default:throw new Error(`Resampling method ${u} is not supported.`)}return await loadImageFunction(T)}}async pad([e,t,r,u]){if(e=Math.max(e,0),t=Math.max(t,0),r=Math.max(r,0),u=Math.max(u,0),e===0&&t===0&&r===0&&u===0)return this;if(BROWSER_ENV){let T=this.channels,d=this.toCanvas(),A=this.width+e+t,le=this.height+r+u;const G=createCanvasFunction(A,le).getContext("2d");return G.drawImage(d,0,0,this.width,this.height,e,r,A,le),new RawImage(G.getImageData(0,0,A,le).data,A,le,4).convert(T)}else{let T=this.toSharp().extend({left:e,right:t,top:r,bottom:u});return await loadImageFunction(T)}}async crop([e,t,r,u]){if(e=Math.max(e,0),t=Math.max(t,0),r=Math.min(r,this.width-1),u=Math.min(u,this.height-1),e===0&&t===0&&r===this.width-1&&u===this.height-1)return this;const T=r-e+1,d=u-t+1;if(BROWSER_ENV){const A=this.channels,le=this.toCanvas(),G=createCanvasFunction(T,d).getContext("2d");return G.drawImage(le,e,t,T,d,0,0,T,d),new RawImage(G.getImageData(0,0,T,d).data,T,d,4).convert(A)}else{const A=this.toSharp().extract({left:e,top:t,width:T,height:d});return await loadImageFunction(A)}}async center_crop(e,t){if(this.width===e&&this.height===t)return this;let r=(this.width-e)/2,u=(this.height-t)/2;if(BROWSER_ENV){let T=this.channels,d=this.toCanvas();const A=createCanvasFunction(e,t).getContext("2d");let le=0,G=0,B=0,o=0;return r>=0?le=r:B=-r,u>=0?G=u:o=-u,A.drawImage(d,le,G,e,t,B,o,e,t),new RawImage(A.getImageData(0,0,e,t).data,e,t,4).convert(T)}else{let T=this.toSharp();if(r>=0&&u>=0)T=T.extract({left:Math.floor(r),top:Math.floor(u),width:e,height:t});else if(r<=0&&u<=0){let d=Math.floor(-u),A=Math.floor(-r);T=T.extend({top:d,left:A,right:e-this.width-A,bottom:t-this.height-d})}else{let d=[0,0],A=0;u<0?(d[0]=Math.floor(-u),d[1]=t-this.height-d[0]):A=Math.floor(u);let le=[0,0],G=0;r<0?(le[0]=Math.floor(-r),le[1]=e-this.width-le[0]):G=Math.floor(r),T=T.extend({top:d[0],bottom:d[1],left:le[0],right:le[1]}).extract({left:G,top:A,width:e,height:t})}return await loadImageFunction(T)}}async toBlob(e="image/png",t=1){if(!BROWSER_ENV)throw new Error("toBlob() is only supported in browser environments.");return await this.toCanvas().convertToBlob({type:e,quality:t})}toCanvas(){if(!BROWSER_ENV)throw new Error("toCanvas() is only supported in browser environments.");let e=this.clone().rgba(),t=createCanvasFunction(e.width,e.height),r=new ImageDataClass(e.data,e.width,e.height);return t.getContext("2d").putImageData(r,0,0),t}_update(e,t,r,u=null){return this.data=e,this.width=t,this.height=r,u!==null&&(this.channels=u),this}clone(){return new RawImage(this.data.slice(),this.width,this.height,this.channels)}convert(e){if(this.channels===e)return this;switch(e){case 1:this.grayscale();break;case 3:this.rgb();break;case 4:this.rgba();break;default:throw new Error(`Conversion failed due to unsupported number of channels: ${this.channels}`)}return this}async save(e){if(BROWSER_ENV){if(WEBWORKER_ENV)throw new Error("Unable to save an image from a Web Worker.");const t=e.split(".").pop().toLowerCase(),r=CONTENT_TYPE_MAP.get(t)??"image/png",u=await this.toBlob(r),T=URL.createObjectURL(u),d=document.createElement("a");d.href=T,d.download=e,d.click(),d.remove()}else{if(env$1.useFS)return await this.toSharp().toFile(e);throw new Error("Unable to save the image because filesystem is disabled in this environment.")}}toSharp(){if(BROWSER_ENV)throw new Error("toSharp() is only supported in server-side environments.");return sharp(this.data,{raw:{width:this.width,height:this.height,channels:this.channels}})}}async function read_audio(n,e){if(typeof AudioContext>"u")throw Error("Unable to load audio from path/URL since `AudioContext` is not available in your environment. Instead, audio data should be passed directly to the pipeline/processor. For more information and some example code, see https://huggingface.co/docs/transformers.js/guides/node-audio-processing.");const t=await(await getFile(n)).arrayBuffer(),r=new AudioContext({sampleRate:e});typeof e>"u"&&console.warn(`No sampling rate provided, using default of ${r.sampleRate}Hz.`);const u=await r.decodeAudioData(t);let T;if(u.numberOfChannels===2){const d=Math.sqrt(2),A=u.getChannelData(0),le=u.getChannelData(1);T=new Float32Array(A.length);for(let G=0;G<u.length;++G)T[G]=d*(A[G]+le[G])/2}else T=u.getChannelData(0);return T}function hanning(n){if(n<1)return new Float64Array;if(n===1)return new Float64Array([1]);const e=n-1,t=Math.PI/e,r=new Float64Array(n);for(let u=0;u<n;++u){const T=2*u-e;r[u]=.5+.5*Math.cos(t*T)}return r}const HERTZ_TO_MEL_MAPPING={htk:n=>2595*Math.log10(1+n/700),kaldi:n=>1127*Math.log(1+n/700),slaney:(n,e=1e3,t=15,r=27/Math.log(6.4))=>n>=e?t+Math.log(n/e)*r:3*n/200};function hertz_to_mel(n,e="htk"){const t=HERTZ_TO_MEL_MAPPING[e];if(!t)throw new Error('mel_scale should be one of "htk", "slaney" or "kaldi".');return typeof n=="number"?t(n):n.map(r=>t(r))}const MEL_TO_HERTZ_MAPPING={htk:n=>700*(10**(n/2595)-1),kaldi:n=>700*(Math.exp(n/1127)-1),slaney:(n,e=1e3,t=15,r=Math.log(6.4)/27)=>n>=t?e*Math.exp(r*(n-t)):200*n/3};function mel_to_hertz(n,e="htk"){const t=MEL_TO_HERTZ_MAPPING[e];if(!t)throw new Error('mel_scale should be one of "htk", "slaney" or "kaldi".');return typeof n=="number"?t(n):n.map(r=>t(r))}function _create_triangular_filter_bank(n,e){const t=Float64Array.from({length:e.length-1},(d,A)=>e[A+1]-e[A]),r=Array.from({length:n.length},()=>new Array(e.length));for(let d=0;d<n.length;++d){const A=r[d];for(let le=0;le<e.length;++le)A[le]=e[le]-n[d]}const u=e.length-2,T=Array.from({length:u},()=>new Array(n.length));for(let d=0;d<n.length;++d){const A=r[d];for(let le=0;le<u;++le){const G=-A[le]/t[le],B=A[le+2]/t[le+1];T[le][d]=Math.max(0,Math.min(G,B))}}return T}function linspace(n,e,t){const r=(e-n)/(t-1);return Float64Array.from({length:t},(u,T)=>n+r*T)}function mel_filter_bank(n,e,t,r,u,T=null,d="htk",A=!1){if(T!==null&&T!=="slaney")throw new Error('norm must be one of null or "slaney"');const le=hertz_to_mel(t,d),G=hertz_to_mel(r,d),B=linspace(le,G,e+2);let o=mel_to_hertz(B,d),i;if(A){const ae=u/(n*2);i=hertz_to_mel(Float64Array.from({length:n},(ue,he)=>he*ae),d),o=B}else i=linspace(0,Math.floor(u/2),n);const w=_create_triangular_filter_bank(i,o);if(T!==null&&T==="slaney")for(let ae=0;ae<e;++ae){const ue=w[ae],he=2/(o[ae+2]-o[ae]);for(let pe=0;pe<n;++pe)ue[pe]*=he}return w}function padReflect(n,e,t){const r=new n.constructor(n.length+e+t),u=n.length-1;for(let T=0;T<n.length;++T)r[e+T]=n[T];for(let T=1;T<=e;++T)r[e-T]=n[calculateReflectOffset(T,u)];for(let T=1;T<=t;++T)r[u+e+T]=n[calculateReflectOffset(u-T,u)];return r}function _db_conversion_helper(n,e,t,r,u){if(t<=0)throw new Error("reference must be greater than zero");if(r<=0)throw new Error("min_value must be greater than zero");t=Math.max(r,t);const T=Math.log10(t);for(let d=0;d<n.length;++d)n[d]=e*Math.log10(Math.max(r,n[d])-T);if(u!==null){if(u<=0)throw new Error("db_range must be greater than zero");const d=max(n)[0]-u;for(let A=0;A<n.length;++A)n[A]=Math.max(n[A],d)}return n}function amplitude_to_db(n,e=1,t=1e-5,r=null){return _db_conversion_helper(n,20,e,t,r)}function power_to_db(n,e=1,t=1e-10,r=null){return _db_conversion_helper(n,10,e,t,r)}function spectrogram(n,e,t,r,{fft_length:u=null,power:T=1,center:d=!0,pad_mode:A="reflect",onesided:le=!0,preemphasis:G=null,mel_filters:B=null,mel_floor:o=1e-10,log_mel:i=null,reference:w=1,min_value:ae=1e-10,db_range:ue=null,remove_dc_offset:he=null,max_num_frames:pe=null,do_pad:ge=!0,transpose:be=!1}={}){const ve=e.length;if(u===null&&(u=t),t>u)throw Error(`frame_length (${t}) may not be larger than fft_length (${u})`);if(ve!==t)throw new Error(`Length of the window (${ve}) must equal frame_length (${t})`);if(r<=0)throw new Error("hop_length must be greater than zero");if(d){if(A!=="reflect")throw new Error(`pad_mode="${A}" not implemented yet.`);const Me=Math.floor((u-1)/2)+1;n=padReflect(n,Me,Me)}const we=Math.floor(1+Math.floor((n.length-t)/r)),Se=le?Math.floor(u/2)+1:u;let Ae=we,Re=we;pe!==null&&(pe>we?ge&&(Re=pe):Re=Ae=pe);const Te=new FFT(u),Ce=new Float64Array(u),Ve=new Float64Array(Te.outputBufferSize),$e=new Array(Ae);for(let Me=0;Me<Ae;++Me){const je=Me*r;for(let Ke=0;Ke<t;++Ke)Ce[Ke]=n[je+Ke];if(he){let Ke=0;for(let Pe=0;Pe<t;++Pe)Ke+=Ce[Pe];const qe=Ke/t;for(let Pe=0;Pe<t;++Pe)Ce[Pe]-=qe}if(G!==null){for(let Ke=t-1;Ke>=1;--Ke)Ce[Ke]-=G*Ce[Ke-1];Ce[0]*=1-G}for(let Ke=0;Ke<e.length;++Ke)Ce[Ke]*=e[Ke];Te.realTransform(Ve,Ce);const it=new Array(Se);for(let Ke=0;Ke<it.length;++Ke){const qe=Ke<<1;it[Ke]=Ve[qe]**2+Ve[qe+1]**2}$e[Me]=it}if(T!==null&&T!==2){const Me=2/T;for(let je=0;je<$e.length;++je){const it=$e[je];for(let Ke=0;Ke<it.length;++Ke)it[Ke]**=Me}}const He=B.length,De=new Float32Array(He*Re),Xe=be?[Re,He]:[He,Re];for(let Me=0;Me<He;++Me){const je=B[Me];for(let it=0;it<Ae;++it){const Ke=$e[it];let qe=0;for(let Pe=0;Pe<Se;++Pe)qe+=je[Pe]*Ke[Pe];De[be?it*He+Me:Me*Ae+it]=Math.max(o,qe)}}if(T!==null&&i!==null){const Me=Math.min(De.length,Ae*He);switch(i){case"log":for(let je=0;je<Me;++je)De[je]=Math.log(De[je]);break;case"log10":for(let je=0;je<Me;++je)De[je]=Math.log10(De[je]);break;case"dB":if(T===1)amplitude_to_db(De,w,ae,ue);else if(T===2)power_to_db(De,w,ae,ue);else throw new Error(`Cannot use log_mel option '${i}' with power ${T}`);break;default:throw new Error(`log_mel must be one of null, 'log', 'log10' or 'dB'. Got '${i}'`)}}return{data:De,dims:Xe}}function window_function(n,e,{periodic:t=!0,frame_length:r=null,center:u=!0}={}){const T=t?n+1:n;let d;switch(e){case"boxcar":d=new Float64Array(T).fill(1);break;case"hann":case"hann_window":d=hanning(T);break;default:throw new Error(`Unknown window type ${e}.`)}if(t&&(d=d.subarray(0,n)),r===null)return d;if(n>r)throw new Error(`Length of the window (${n}) may not be larger than frame_length (${r})`);return d}function center_to_corners_format([n,e,t,r]){return[n-t/2,e-r/2,n+t/2,e+r/2]}function post_process_object_detection(n,e=.5,t=null,r=!1){const u=n.logits,T=n.pred_boxes,[d,A,le]=u.dims;if(t!==null&&t.length!==d)throw Error("Make sure that you pass in as many target sizes as the batch dimension of the logits");let G=[];for(let B=0;B<d;++B){let o=t!==null?t[B]:null,i={boxes:[],classes:[],scores:[]},w=u[B],ae=T[B];for(let ue=0;ue<A;++ue){let he=w[ue],pe=[],ge;if(r){ge=he.sigmoid().data;for(let be=0;be<ge.length;++be)ge[be]>e&&pe.push(be)}else{let be=max(he.data)[1];if(be===le-1)continue;pe.push(be),ge=softmax(he.data)}for(const be of pe){let ve=ae[ue].data;ve=center_to_corners_format(ve),o!==null&&(ve=ve.map((we,Se)=>we*o[(Se+1)%2])),i.boxes.push(ve),i.classes.push(be),i.scores.push(ge[be])}}G.push(i)}return G}function validate_audio_inputs(n,e){var t;if(!(n instanceof Float32Array||n instanceof Float64Array))throw new Error(`${e} expects input to be a Float32Array or a Float64Array, but got ${((t=n==null?void 0:n.constructor)==null?void 0:t.name)??typeof n} instead.If using the feature extractor directly, remember to use \`read_audio(url, sampling_rate)\` to obtain the raw audio data of the file/url.`)}class FeatureExtractor extends Callable{constructor(e){super(),this.config=e}}class ImageFeatureExtractor extends FeatureExtractor{constructor(e){super(e),this.image_mean=this.config.image_mean??this.config.mean,this.image_std=this.config.image_std??this.config.std,this.resample=this.config.resample??2,this.do_rescale=this.config.do_rescale??!0,this.rescale_factor=this.config.rescale_factor??1/255,this.do_normalize=this.config.do_normalize,this.do_resize=this.config.do_resize,this.do_thumbnail=this.config.do_thumbnail,this.size=this.config.size,this.size_divisibility=this.config.size_divisibility??this.config.size_divisor,this.do_center_crop=this.config.do_center_crop,this.crop_size=this.config.crop_size,this.do_convert_rgb=this.config.do_convert_rgb??!0,this.do_crop_margin=this.config.do_crop_margin,this.pad_size=this.config.pad_size,this.do_pad=this.config.do_pad,this.do_pad&&!this.pad_size&&this.size&&this.size.width!==void 0&&this.size.height!==void 0&&(this.pad_size=this.size)}async thumbnail(e,t,r=2){const u=e.height,T=e.width,d=t.height,A=t.width;let le=Math.min(u,d),G=Math.min(T,A);return le===u&&G===T?e:(u>T?G=Math.floor(T*le/u):T>u&&(le=Math.floor(u*G/T)),await e.resize(G,le,{resample:r}))}async crop_margin(e,t=200){const r=e.clone().grayscale(),u=min(r.data)[0],d=max(r.data)[0]-u;if(d===0)return e;const A=t/255;let le=r.width,G=r.height,B=0,o=0;for(let i=0;i<r.height;++i){const w=i*r.width;for(let ae=0;ae<r.width;++ae)(r.data[w+ae]-u)/d<A&&(le=Math.min(le,ae),G=Math.min(G,i),B=Math.max(B,ae),o=Math.max(o,i))}return e=await e.crop([le,G,B,o]),e}pad_image(e,t,r,{mode:u="constant",center:T=!1,constant_values:d=0}={}){const[A,le,G]=t;let B,o;if(typeof r=="number"?(B=r,o=r):(B=r.width,o=r.height),B!==A||o!==le){const i=new Float32Array(B*o*G);if(Array.isArray(d))for(let ue=0;ue<i.length;++ue)i[ue]=d[ue%G];else d!==0&&i.fill(d);const[w,ae]=T?[Math.floor((B-A)/2),Math.floor((o-le)/2)]:[0,0];for(let ue=0;ue<le;++ue){const he=(ue+ae)*B,pe=ue*A;for(let ge=0;ge<A;++ge){const be=(he+ge+w)*G,ve=(pe+ge)*G;for(let we=0;we<G;++we)i[be+we]=e[ve+we]}}if(u==="symmetric"){if(T)throw new Error("`center` padding is not supported when `mode` is set to `symmetric`.");const ue=le-1,he=A-1;for(let pe=0;pe<o;++pe){const ge=pe*B,be=calculateReflectOffset(pe,ue)*A;for(let ve=0;ve<B;++ve){if(pe<le&&ve<A)continue;const we=(ge+ve)*G,Se=(be+calculateReflectOffset(ve,he))*G;for(let Ae=0;Ae<G;++Ae)i[we+Ae]=e[Se+Ae]}}}e=i,t=[o,B,G]}return[e,t]}rescale(e){for(let t=0;t<e.length;++t)e[t]=this.rescale_factor*e[t]}get_resize_output_image_size(e,t){const[r,u]=e.size;let T,d;if(this.do_thumbnail){const{height:A,width:le}=t;T=Math.min(A,le)}else Number.isInteger(t)?(T=t,d=this.config.max_size??T):t!==void 0&&(T=t.shortest_edge,d=t.longest_edge);if(T!==void 0||d!==void 0){const A=T===void 0?1:Math.max(T/r,T/u),le=r*A,G=u*A,B=d===void 0?1:Math.min(d/le,d/G),o=Math.floor(Number((le*B).toFixed(2))),i=Math.floor(Number((G*B).toFixed(2)));return[o,i]}else{if(t!==void 0&&t.width!==void 0&&t.height!==void 0)return[t.width,t.height];if(this.size_divisibility!==void 0){const A=Math.floor(r/this.size_divisibility)*this.size_divisibility,le=Math.floor(u/this.size_divisibility)*this.size_divisibility;return[A,le]}else throw new Error(`Could not resize image due to unsupported \`this.size\` option in config: ${JSON.stringify(t)}`)}}async resize(e){const[t,r]=this.get_resize_output_image_size(e,this.size);return await e.resize(t,r,{resample:this.resample})}async preprocess(e,{do_normalize:t=null,do_pad:r=null,do_convert_rgb:u=null,do_convert_grayscale:T=null}={}){this.do_crop_margin&&(e=await this.crop_margin(e));const[d,A]=e.size;if(u??this.do_convert_rgb?e=e.rgb():T&&(e=e.grayscale()),this.do_resize&&(e=await this.resize(e)),this.do_thumbnail&&(e=await this.thumbnail(e,this.size,this.resample)),this.do_center_crop){let w,ae;Number.isInteger(this.crop_size)?(w=this.crop_size,ae=this.crop_size):(w=this.crop_size.width,ae=this.crop_size.height),e=await e.center_crop(w,ae)}const le=[e.height,e.width];let G=Float32Array.from(e.data),B=[e.height,e.width,e.channels];if(this.do_rescale&&this.rescale(G),t??this.do_normalize){let w=this.image_mean;Array.isArray(this.image_mean)||(w=new Array(e.channels).fill(w));let ae=this.image_std;if(Array.isArray(this.image_std)||(ae=new Array(e.channels).fill(w)),w.length!==e.channels||ae.length!==e.channels)throw new Error(`When set to arrays, the length of \`image_mean\` (${w.length}) and \`image_std\` (${ae.length}) must match the number of channels in the image (${e.channels}).`);for(let ue=0;ue<G.length;ue+=e.channels)for(let he=0;he<e.channels;++he)G[ue+he]=(G[ue+he]-this.image_mean[he])/this.image_std[he]}(r??(this.do_pad&&this.pad_size))&&([G,B]=this.pad_image(G,[e.width,e.height,e.channels],this.pad_size));const o=new Tensor("float32",G,B),i=transpose(o,[2,0,1]);return{original_size:[A,d],reshaped_input_size:le,pixel_values:i}}async _call(e,...t){Array.isArray(e)||(e=[e]);const r=await Promise.all(e.map(T=>this.preprocess(T)));return{pixel_values:stack(r.map(T=>T.pixel_values),0),original_sizes:r.map(T=>T.original_size),reshaped_input_sizes:r.map(T=>T.reshaped_input_size)}}}class SegformerFeatureExtractor extends ImageFeatureExtractor{post_process_semantic_segmentation(e,t=null){const r=e.logits,u=r.dims[0];if(t!==null&&t.length!==u)throw Error("Make sure that you pass in as many target sizes as the batch dimension of the logits");const T=[];for(let d=0;d<u;++d){const A=t!==null?t[d]:null;let le=r[d];A!==null&&(le=interpolate(le,A,"bilinear",!1));const[G,B]=A??le.dims.slice(-2),o=new Tensor("int32",new Int32Array(G*B),[G,B]),i=le[0].data;for(let he=1;he<le.dims[0];++he){const pe=le[he].data;for(let ge=0;ge<pe.length;++ge)pe[ge]>i[ge]&&(i[ge]=pe[ge],o.data[ge]=he)}const w=new Array(le.dims[0]),ae=o.data;for(let he=0;he<ae.length;++he){const pe=ae[he];w[pe]=pe}const ue=w.filter(he=>he!==void 0);T.push({segmentation:o,labels:ue})}return T}}class BitImageProcessor extends ImageFeatureExtractor{}class DPTFeatureExtractor extends ImageFeatureExtractor{}class GLPNFeatureExtractor extends ImageFeatureExtractor{}class CLIPFeatureExtractor extends ImageFeatureExtractor{}class ChineseCLIPFeatureExtractor extends ImageFeatureExtractor{}class SiglipImageProcessor extends ImageFeatureExtractor{}class ConvNextFeatureExtractor extends ImageFeatureExtractor{constructor(e){super(e),this.crop_pct=this.config.crop_pct??224/256}async resize(e){var r;const t=(r=this.size)==null?void 0:r.shortest_edge;if(t===void 0)throw new Error("Size dictionary must contain 'shortest_edge' key.");if(t<384){const u=Math.floor(t/this.crop_pct),[T,d]=this.get_resize_output_image_size(e,{shortest_edge:u});e=await e.resize(T,d,{resample:this.resample}),e=await e.center_crop(t,t)}else e=await e.resize(t,t,{resample:this.resample});return e}}class ConvNextImageProcessor extends ConvNextFeatureExtractor{}class ViTFeatureExtractor extends ImageFeatureExtractor{}class ViTImageProcessor extends ImageFeatureExtractor{}class MobileViTFeatureExtractor extends ImageFeatureExtractor{}class OwlViTFeatureExtractor extends ImageFeatureExtractor{post_process_object_detection(...e){return post_process_object_detection(...e)}}class DeiTFeatureExtractor extends ImageFeatureExtractor{}class BeitFeatureExtractor extends ImageFeatureExtractor{}class DonutFeatureExtractor extends ImageFeatureExtractor{pad_image(e,t,r,u={}){const[T,d,A]=t;let le=this.image_mean;Array.isArray(this.image_mean)||(le=new Array(A).fill(le));let G=this.image_std;Array.isArray(G)||(G=new Array(A).fill(le));const B=le.map((o,i)=>-o/this.image_std[i]);return super.pad_image(e,t,r,{center:!0,constant_values:B,...u})}}class NougatImageProcessor extends DonutFeatureExtractor{}class DetrFeatureExtractor extends ImageFeatureExtractor{async _call(e){const t=await super._call(e),r=[t.pixel_values.dims[0],64,64],u=new Tensor("int64",new BigInt64Array(r.reduce((T,d)=>T*d)).fill(1n),r);return{...t,pixel_mask:u}}post_process_object_detection(...e){return post_process_object_detection(...e)}remove_low_and_no_objects(e,t,r,u){let T=[],d=[],A=[];for(let le=0;le<e.dims[0];++le){let G=e[le],B=t[le],o=max(G.data)[1];if(o===u)continue;let w=softmax(G.data)[o];w>r&&(T.push(B),d.push(w),A.push(o))}return[T,d,A]}check_segment_validity(e,t,r,u=.5,T=.8){let d=[],A=0,le=0;for(let B=0;B<e.length;++B)e[B]===r&&(d.push(B),++A),t[r].data[B]>=u&&++le;let G=A>0&&le>0;return G&&(G=A/le>T),[G,d]}compute_segments(e,t,r,u,T,d=null,A=null){let[le,G]=A??e[0].dims,B=new Tensor("int32",new Int32Array(le*G),[le,G]),o=[];if(A!==null)for(let ue=0;ue<e.length;++ue)e[ue]=interpolate(e[ue],A,"bilinear",!1);let i=new Int32Array(e[0].data.length),w=new Float32Array(e[0].data.length);for(let ue=0;ue<e.length;++ue){let he=t[ue];for(let pe=0;pe<e[ue].data.length;++pe)e[ue].data[pe]*=he,e[ue].data[pe]>w[pe]&&(i[pe]=ue,w[pe]=e[ue].data[pe])}let ae=0;for(let ue=0;ue<r.length;++ue){let he=r[ue],[pe,ge]=this.check_segment_validity(i,e,ue,u,T);if(pe){++ae;for(let be of ge)B.data[be]=ae;o.push({id:ae,label_id:he,score:t[ue]})}}return[B,o]}post_process_panoptic_segmentation(e,t=.5,r=.5,u=.8,T=null,d=null){T===null&&(console.warn("`label_ids_to_fuse` unset. No instance will be fused."),T=new Set);const A=e.logits,G=e.pred_masks.sigmoid();let[B,o,i]=A.dims;if(i-=1,d!==null&&d.length!==B)throw Error("Make sure that you pass in as many target sizes as the batch dimension of the logits");let w=[];for(let ae=0;ae<B;++ae){let ue=d!==null?d[ae]:null,he=A[ae],pe=G[ae],[ge,be,ve]=this.remove_low_and_no_objects(he,pe,t,i);if(ve.length===0){let[Ae,Re]=ue??pe.dims.slice(-2),Te=new Tensor("int32",new Int32Array(Ae*Re).fill(-1),[Ae,Re]);w.push({segmentation:Te,segments_info:[]});continue}let[we,Se]=this.compute_segments(ge,be,ve,r,u,T,ue);w.push({segmentation:we,segments_info:Se})}return w}post_process_instance_segmentation(){throw Error("Not implemented yet")}}class YolosFeatureExtractor extends ImageFeatureExtractor{post_process_object_detection(...e){return post_process_object_detection(...e)}}class SamImageProcessor extends ImageFeatureExtractor{reshape_input_points(e,t,r){e=structuredClone(e);let u=calculateDimensions(e);if(u.length===3)u=[1,...u],e=[e];else if(u.length!==4)throw Error("The input_points must be a 4D tensor of shape `batch_size`, `point_batch_size`, `nb_points_per_image`, `2`.");for(let T=0;T<e.length;++T){let d=t[T],A=r[T],le=[A[0]/d[0],A[1]/d[1]];for(let G=0;G<e[T].length;++G)for(let B=0;B<e[T][G].length;++B)for(let o=0;o<e[T][G][B].length;++o)e[T][G][B][o]*=le[o]}return new Tensor("float32",Float32Array.from(e.flat(1/0)),u)}add_input_labels(e,t){let r=calculateDimensions(e);if(r.length===2)r=[1,...r],e=[e];else if(r.length!==3)throw Error("The input_points must be a 4D tensor of shape `batch_size`, `point_batch_size`, `nb_points_per_image`, `2`.");if(r.some((u,T)=>u!==t.dims[T]))throw Error(`The first ${r.length} dimensions of 'input_points' and 'input_labels' must be the same.`);return new Tensor("int64",e.flat(1/0).map(BigInt),r)}async _call(e,t=null,r=null){const u=await super._call(e);if(t&&(u.input_points=this.reshape_input_points(t,u.original_sizes,u.reshaped_input_sizes)),r){if(!u.input_points)throw Error("`input_points` must be provided if `input_labels` are provided.");u.input_labels=this.add_input_labels(r,u.input_points)}return u}post_process_masks(e,t,r,{mask_threshold:u=0,binarize:T=!0,pad_size:d=null}={}){const A=[];d=d??this.pad_size;const le=[d.height,d.width];for(let G=0;G<t.length;++G){const B=t[G],o=r[G],i=e[G],w=[];for(let ae=0;ae<i.dims[0];++ae){const ue=i[ae];let he=interpolate(ue,le,"bilinear",!1);if(he=he.slice(null,[0,o[0]],[0,o[1]]),he=interpolate(he,B,"bilinear",!1),T){const pe=new Uint8Array(he.data.length);for(let ge=0;ge<he.data.length;++ge)he.data[ge]>u&&(pe[ge]=1);he=new Tensor("bool",pe,he.dims)}w.push(he)}A.push(stack(w))}return A}}class Swin2SRImageProcessor extends ImageFeatureExtractor{pad_image(e,t,r,u={}){const[T,d,A]=t;return super.pad_image(e,t,{width:T+(r-T%r)%r,height:d+(r-d%r)%r},{mode:"symmetric",center:!1,constant_values:-1,...u})}}class VitMatteImageProcessor extends ImageFeatureExtractor{async _call(e,t){Array.isArray(e)||(e=[e]),Array.isArray(t)||(t=[t]);const r=await Promise.all(e.map(d=>this.preprocess(d))),u=await Promise.all(t.map(d=>this.preprocess(d,{do_normalize:!1,do_convert_rgb:!1,do_convert_grayscale:!0})));return{pixel_values:stack(r.map((d,A)=>cat([d.pixel_values,u[A].pixel_values],0)),0),original_sizes:r.map(d=>d.original_size),reshaped_input_sizes:r.map(d=>d.reshaped_input_size)}}}class WhisperFeatureExtractor extends FeatureExtractor{constructor(e){var t;super(e),(t=this.config).mel_filters??(t.mel_filters=mel_filter_bank(Math.floor(1+this.config.n_fft/2),this.config.feature_size,0,8e3,this.config.sampling_rate,"slaney","slaney")),this.window=window_function(this.config.n_fft,"hann")}_extract_fbank_features(e){const{data:t,dims:r}=spectrogram(e,this.window,this.config.n_fft,this.config.hop_length,{power:2,mel_filters:this.config.mel_filters,log_mel:"log10",max_num_frames:this.config.nb_max_frames}),u=max(t)[0];for(let T=0;T<t.length;++T)t[T]=(Math.max(t[T],u-8)+4)/4;return{data:t,dims:r}}async _call(e){validate_audio_inputs(e,"WhisperFeatureExtractor");let t;e.length>this.config.n_samples?(console.warn("Attempting to extract features for audio longer than 30 seconds. If using a pipeline to extract transcript from a long audio clip, remember to specify `chunk_length_s` and/or `stride_length_s`."),t=e.slice(0,this.config.n_samples)):(t=new Float32Array(this.config.n_samples),t.set(e));const{data:r,dims:u}=this._extract_fbank_features(t);return{input_features:new Tensor("float32",r,[1,...u])}}}class Wav2Vec2FeatureExtractor extends FeatureExtractor{_zero_mean_unit_var_norm(e){const r=e.reduce((T,d)=>T+d,0)/e.length,u=e.reduce((T,d)=>T+(d-r)**2,0)/e.length;return e.map(T=>(T-r)/Math.sqrt(u+1e-7))}async _call(e){validate_audio_inputs(e,"Wav2Vec2FeatureExtractor"),e instanceof Float64Array&&(e=new Float32Array(e));let t=e;this.config.do_normalize&&(t=this._zero_mean_unit_var_norm(t));const r=[1,t.length];return{input_values:new Tensor("float32",t,r),attention_mask:new Tensor("int64",new BigInt64Array(t.length).fill(1n),r)}}}class ASTFeatureExtractor extends FeatureExtractor{constructor(e){super(e);const t=this.config.sampling_rate,r=mel_filter_bank(256,this.config.num_mel_bins,20,Math.floor(t/2),t,null,"kaldi",!0);for(let u=0;u<r.length;++u)r[u].push(0);this.mel_filters=r,this.window=window_function(400,"hann",{periodic:!1}),this.mean=this.config.mean,this.std=this.config.std}_extract_fbank_features(e,t){return spectrogram(e,this.window,400,160,{fft_length:512,power:2,center:!1,preemphasis:.97,mel_filters:this.mel_filters,log_mel:"log",mel_floor:1192092955078125e-22,remove_dc_offset:!0,max_num_frames:t,transpose:!0})}async _call(e){validate_audio_inputs(e,"ASTFeatureExtractor");const t=this._extract_fbank_features(e,this.config.max_length);if(this.config.do_normalize){const r=this.std*2;for(let u=0;u<t.data.length;++u)t.data[u]=(t.data[u]-this.mean)/r}return{input_values:new Tensor("float32",t.data,[1,...t.dims])}}}class ClapFeatureExtractor extends FeatureExtractor{constructor(e){super(e),this.mel_filters=mel_filter_bank(this.config.nb_frequency_bins,this.config.feature_size,this.config.frequency_min,this.config.frequency_max,this.config.sampling_rate,null,"htk"),this.mel_filters_slaney=mel_filter_bank(this.config.nb_frequency_bins,this.config.feature_size,this.config.frequency_min,this.config.frequency_max,this.config.sampling_rate,"slaney","slaney"),this.window=window_function(this.config.fft_window_size,"hann")}_get_input_mel(e,t,r,u){let T,d=!1;const A=e.length-t;if(A>0)if(r==="rand_trunc"){d=!0;const le=Math.floor(Math.random()*(A+1));e=e.subarray(le,le+t),T=this._extract_fbank_features(e,this.mel_filters_slaney,this.config.nb_max_samples),T.dims=[1,...T.dims]}else throw new Error(`Truncation strategy "${r}" not implemented`);else{if(A<0){let le=new Float64Array(t);if(le.set(e),u==="repeat")for(let G=e.length;G<t;G+=e.length)le.set(e.subarray(0,Math.min(e.length,t-G)),G);else if(u==="repeatpad")for(let G=e.length;G<-A;G+=e.length)le.set(e,G);e=le}if(r==="fusion")throw new Error(`Truncation strategy "${r}" not implemented`);T=this._extract_fbank_features(e,this.mel_filters_slaney,this.config.nb_max_samples),T.dims=[1,...T.dims]}return{...T,longer:d}}_extract_fbank_features(e,t,r=null){return spectrogram(e,this.window,this.config.fft_window_size,this.config.hop_length,{power:2,mel_filters:t,log_mel:"dB",max_num_frames:r,do_pad:!1,transpose:!0})}async _call(e,{max_length:t=null}={}){validate_audio_inputs(e,"ClapFeatureExtractor");const r=this._get_input_mel(e,t??this.config.nb_max_samples,this.config.truncation,this.config.padding);return{input_features:new Tensor("float32",r.data,[1,...r.dims])}}}class SpeechT5FeatureExtractor extends FeatureExtractor{}class Processor extends Callable{constructor(e){super(),this.feature_extractor=e}async _call(e,...t){return await this.feature_extractor(e,...t)}}class SamProcessor extends Processor{async _call(...e){return await this.feature_extractor(...e)}post_process_masks(...e){return this.feature_extractor.post_process_masks(...e)}reshape_input_points(...e){return this.feature_extractor.reshape_input_points(...e)}}class WhisperProcessor extends Processor{async _call(e){return await this.feature_extractor(e)}}class Wav2Vec2ProcessorWithLM extends Processor{async _call(e){return await this.feature_extractor(e)}}class SpeechT5Processor extends Processor{async _call(e){return await this.feature_extractor(e)}}class OwlViTProcessor extends Processor{}class AutoProcessor{static async from_pretrained(e,{progress_callback:t=null,config:r=null,cache_dir:u=null,local_files_only:T=!1,revision:d="main"}={}){let A=r??await getModelJSON(e,"preprocessor_config.json",!0,{progress_callback:t,cache_dir:u,local_files_only:T,revision:d}),le=A.feature_extractor_type??A.image_processor_type,G=this.FEATURE_EXTRACTOR_CLASS_MAPPING[le];if(!G)if(A.size!==void 0)console.warn(`Feature extractor type "${le}" not found, assuming ImageFeatureExtractor due to size parameter in config.`),G=ImageFeatureExtractor;else throw new Error(`Unknown Feature Extractor type: ${le}`);let B=this.PROCESSOR_CLASS_MAPPING[A.processor_class]??Processor,o=new G(A);return new B(o)}}Mt(AutoProcessor,"FEATURE_EXTRACTOR_CLASS_MAPPING",{WhisperFeatureExtractor,ViTFeatureExtractor,MobileViTFeatureExtractor,OwlViTFeatureExtractor,CLIPFeatureExtractor,ChineseCLIPFeatureExtractor,SiglipImageProcessor,ConvNextFeatureExtractor,ConvNextImageProcessor,SegformerFeatureExtractor,BitImageProcessor,DPTFeatureExtractor,GLPNFeatureExtractor,BeitFeatureExtractor,DeiTFeatureExtractor,DetrFeatureExtractor,YolosFeatureExtractor,DonutFeatureExtractor,NougatImageProcessor,ViTImageProcessor,VitMatteImageProcessor,SamImageProcessor,Swin2SRImageProcessor,Wav2Vec2FeatureExtractor,SpeechT5FeatureExtractor,ASTFeatureExtractor,ClapFeatureExtractor}),Mt(AutoProcessor,"PROCESSOR_CLASS_MAPPING",{WhisperProcessor,Wav2Vec2ProcessorWithLM,SamProcessor,SpeechT5Processor,OwlViTProcessor});async function prepareImages(n){return Array.isArray(n)||(n=[n]),await Promise.all(n.map(e=>RawImage.read(e)))}async function prepareAudios(n,e){return Array.isArray(n)||(n=[n]),await Promise.all(n.map(t=>typeof t=="string"||t instanceof URL?read_audio(t,e):t instanceof Float64Array?new Float32Array(t):t))}function get_bounding_box(n,e){e&&(n=n.map(d=>d|0));const[t,r,u,T]=n;return{xmin:t,ymin:r,xmax:u,ymax:T}}class Pipeline extends Callable{constructor({task:e,model:t,tokenizer:r=null,processor:u=null}){super(),this.task=e,this.model=t,this.tokenizer=r,this.processor=u}async dispose(){await this.model.dispose()}}class TextClassificationPipeline extends Pipeline{constructor(e){super(e)}async _call(e,{topk:t=1}={}){const r=this.tokenizer(e,{padding:!0,truncation:!0}),u=await this.model(r),T=this.model.config.problem_type==="multi_label_classification"?le=>le.sigmoid().data:le=>softmax(le.data),d=this.model.config.id2label,A=[];for(const le of u.logits){const G=T(le),o=getTopItems(G,t).map(i=>({label:d[i[0]],score:i[1]}));t===1?A.push(...o):A.push(o)}return Array.isArray(e)||t===1?A:A[0]}}class TokenClassificationPipeline extends Pipeline{constructor(e){super(e)}async _call(e,{ignore_labels:t=["O"]}={}){const r=Array.isArray(e),u=this.tokenizer(r?e:[e],{padding:!0,truncation:!0}),d=(await this.model(u)).logits,A=this.model.config.id2label,le=[];for(let G=0;G<d.dims[0];++G){const B=u.input_ids[G],o=d[G],i=[];for(let w=0;w<o.dims[0];++w){const ae=o[w],ue=max(ae.data)[1],he=A?A[ue]:`LABEL_${ue}`;if(t.includes(he))continue;const pe=this.tokenizer.decode([B[w].item()],{skip_special_tokens:!0});if(pe==="")continue;const ge=softmax(ae.data);i.push({entity:he,score:ge[ue],index:w,word:pe,start:null,end:null})}le.push(i)}return r?le:le[0]}}class QuestionAnsweringPipeline extends Pipeline{constructor(e){super(e)}async _call(e,t,{topk:r=1}={}){const u=this.tokenizer(e,{text_pair:t,padding:!0,truncation:!0}),T=await this.model(u),d=[];for(let A=0;A<T.start_logits.dims[0];++A){const le=u.input_ids[A],G=le.indexOf(this.tokenizer.sep_token_id),B=Array.from(softmax(T.start_logits[A].data)).map((w,ae)=>[w,ae]).filter(w=>w[1]>G),o=Array.from(softmax(T.end_logits[A].data)).map((w,ae)=>[w,ae]).filter(w=>w[1]>G),i=product(B,o).filter(w=>w[0][1]<=w[1][1]).map(w=>[w[0][1],w[1][1],w[0][0]*w[1][0]]).sort((w,ae)=>ae[2]-w[2]);for(let w=0;w<Math.min(i.length,r);++w){const[ae,ue,he]=i[w],pe=[...le].slice(ae,ue+1),ge=this.tokenizer.decode(pe,{skip_special_tokens:!0});d.push({answer:ge,score:he})}}return r===1?d[0]:d}}class FillMaskPipeline extends Pipeline{constructor(e){super(e)}async _call(e,{topk:t=5}={}){const r=this.tokenizer(e,{padding:!0,truncation:!0}),u=await this.model(r),T=[];for(let d=0;d<r.input_ids.dims[0];++d){const A=r.input_ids[d],le=A.indexOf(this.tokenizer.mask_token_id);if(le===-1)throw Error(`Mask token (${this.tokenizer.mask_token}) not found in text.`);const B=u.logits[d][le],o=getTopItems(softmax(B.data),t);T.push(o.map(i=>{const w=[...A];return w[le]=i[0],{score:i[1],token:i[0],token_str:this.tokenizer.model.vocab[i[0]],sequence:this.tokenizer.decode(w,{skip_special_tokens:!0})}}))}return Array.isArray(e)?T:T[0]}}class Text2TextGenerationPipeline extends Pipeline{constructor(t){super(t);Mt(this,"_key","generated_text")}async _call(t,r={}){Array.isArray(t)||(t=[t]),this.model.config.prefix&&(t=t.map(G=>this.model.config.prefix+G));const u=this.model.config.task_specific_params;u&&u[this.task]&&u[this.task].prefix&&(t=t.map(G=>u[this.task].prefix+G));const T=this.tokenizer,d={padding:!0,truncation:!0};let A;this instanceof TranslationPipeline&&"_build_translation_inputs"in T?A=T._build_translation_inputs(t,d,r).input_ids:A=T(t,d).input_ids;const le=await this.model.generate(A,r);return T.batch_decode(le,{skip_special_tokens:!0}).map(G=>({[this._key]:G}))}}class SummarizationPipeline extends Text2TextGenerationPipeline{constructor(t){super(t);Mt(this,"_key","summary_text")}}class TranslationPipeline extends Text2TextGenerationPipeline{constructor(t){super(t);Mt(this,"_key","translation_text")}}class TextGenerationPipeline extends Pipeline{constructor(e){super(e)}async _call(e,t={}){const r=Array.isArray(e);r||(e=[e]);const u=t.add_special_tokens??!1;this.tokenizer.padding_side="left";const{input_ids:T,attention_mask:d}=this.tokenizer(e,{add_special_tokens:u,padding:!0,truncation:!0}),A=await this.model.generate(T,t,null,{inputs_attention_mask:d}),le=this.tokenizer.batch_decode(A,{skip_special_tokens:!0}),G=Array.from({length:e.length},B=>[]);for(let B=0;B<le.length;++B){const o=Math.floor(B/A.length*e.length);G[o].push({generated_text:le[B]})}return!r&&G.length===1?G[0]:G}}class ZeroShotClassificationPipeline extends Pipeline{constructor(e){super(e),this.label2id=Object.fromEntries(Object.entries(this.model.config.label2id).map(([t,r])=>[t.toLowerCase(),r])),this.entailment_id=this.label2id.entailment,this.entailment_id===void 0&&(console.warn("Could not find 'entailment' in label2id mapping. Using 2 as entailment_id."),this.entailment_id=2),this.contradiction_id=this.label2id.contradiction??this.label2id.not_entailment,this.contradiction_id===void 0&&(console.warn("Could not find 'contradiction' in label2id mapping. Using 0 as contradiction_id."),this.contradiction_id=0)}async _call(e,t,{hypothesis_template:r="This example is {}.",multi_label:u=!1}={}){const T=Array.isArray(e);T||(e=[e]),Array.isArray(t)||(t=[t]);const d=t.map(G=>r.replace("{}",G)),A=u||t.length===1,le=[];for(const G of e){const B=[];for(const w of d){const ae=this.tokenizer(G,{text_pair:w,padding:!0,truncation:!0}),ue=await this.model(ae);A?B.push([ue.logits.data[this.contradiction_id],ue.logits.data[this.entailment_id]]):B.push(ue.logits.data[this.entailment_id])}const i=(A?B.map(w=>softmax(w)[1]):softmax(B)).map((w,ae)=>[w,ae]).sort((w,ae)=>ae[0]-w[0]);le.push({sequence:G,labels:i.map(w=>t[w[1]]),scores:i.map(w=>w[0])})}return T?le:le[0]}}class FeatureExtractionPipeline extends Pipeline{constructor(e){super(e)}async _call(e,{pooling:t="none",normalize:r=!1}={}){const u=this.tokenizer(e,{padding:!0,truncation:!0}),T=await this.model(u);let d=T.last_hidden_state??T.logits;if(t!=="none")if(t==="mean")d=mean_pooling(d,u.attention_mask);else if(t==="cls")d=d.slice(null,0);else throw Error(`Pooling method '${t}' not supported.`);return r&&(d=d.normalize(2,-1)),d}}class AudioClassificationPipeline extends Pipeline{constructor(e){super(e)}async _call(e,{topk:t=null}={}){const r=!Array.isArray(e),u=this.processor.feature_extractor.config.sampling_rate,T=await prepareAudios(e,u),d=this.model.config.id2label,A=[];for(const le of T){const G=await this.processor(le),o=(await this.model(G)).logits[0],w=getTopItems(softmax(o.data),t).map(ae=>({label:d[ae[0]],score:ae[1]}));t===1?A.push(...w):A.push(w)}return!r||t===1?A:A[0]}}class ZeroShotAudioClassificationPipeline extends Pipeline{constructor(e){super(e)}async _call(e,t,{hypothesis_template:r="This is a sound of {}."}={}){const u=!Array.isArray(e);u&&(e=[e]);const T=t.map(B=>r.replace("{}",B)),d=this.tokenizer(T,{padding:!0,truncation:!0}),A=this.processor.feature_extractor.config.sampling_rate,le=await prepareAudios(e,A),G=[];for(const B of le){const o=await this.processor(B),i=await this.model({...d,...o}),w=softmax(i.logits_per_audio.data);G.push([...w].map((ae,ue)=>({score:ae,label:t[ue]})))}return u?G[0]:G}}class AutomaticSpeechRecognitionPipeline extends Pipeline{constructor(e){super(e)}async _call(e,t={}){switch(this.model.config.model_type){case"whisper":return this._call_whisper(e,t);case"wav2vec2":case"hubert":return this._call_wav2vec2(e,t);default:throw new Error(`AutomaticSpeechRecognitionPipeline does not support model type '${this.model.config.model_type}'.`)}}async _call_wav2vec2(e,t={}){t.language&&console.warn('`language` parameter is not yet supported for `wav2vec2` models, defaulting to "English".'),t.task&&console.warn('`task` parameter is not yet supported for `wav2vec2` models, defaulting to "transcribe".');const r=!Array.isArray(e);r&&(e=[e]);const u=this.processor.feature_extractor.config.sampling_rate,T=await prepareAudios(e,u),d=[];for(const A of T){const le=await this.processor(A),B=(await this.model(le)).logits[0],o=[];for(const w of B)o.push(max(w.data)[1]);const i=this.tokenizer.decode(o);d.push({text:i})}return r?d[0]:d}async _call_whisper(e,t={}){const r=t.return_timestamps??!1,u=t.chunk_length_s??0,T=t.chunk_callback??null,d=t.force_full_sequences??!1;let A=t.stride_length_s??null;r==="word"&&(t.return_token_timestamps=!0);const le=pop(t,"language",null),G=pop(t,"task",null);if(le||G||r){if(t.forced_decoder_ids)throw new Error("Cannot specify `language`/`task`/`return_timestamps` and `forced_decoder_ids` at the same time.");const he=this.tokenizer.get_decoder_prompt_ids({language:le,task:G,no_timestamps:!r});he.length>0&&(t.forced_decoder_ids=he)}const B=!Array.isArray(e);B&&(e=[e]);const o=this.processor.feature_extractor.config.chunk_length/this.model.config.max_source_positions,i=this.processor.feature_extractor.config.hop_length,w=this.processor.feature_extractor.config.sampling_rate,ae=await prepareAudios(e,w),ue=[];for(const he of ae){let pe=[];if(u>0){if(A===null)A=u/6;else if(u<=A)throw Error("`chunk_length_s` must be larger than `stride_length_s`.");const ve=w*u,we=w*A,Se=ve-2*we;let Ae=0;for(;Ae<he.length;){const Re=he.subarray(Ae,Ae+ve),Te=await this.processor(Re),Ce=Ae===0,Ve=Ae+Se>=he.length;pe.push({stride:[Re.length,Ce?0:we,Ve?0:we],input_features:Te.input_features,is_last:Ve}),Ae+=Se}}else pe=[{stride:[he.length,0,0],input_features:(await this.processor(he)).input_features,is_last:!0}];for(const ve of pe){t.num_frames=Math.floor(ve.stride[0]/i);const we=await this.model.generate(ve.input_features,t);r==="word"?(ve.tokens=we.sequences[0],ve.token_timestamps=we.token_timestamps.tolist()[0].map(Se=>round(Se,2))):ve.tokens=we[0],ve.stride=ve.stride.map(Se=>Se/w),T!==null&&T(ve)}const[ge,be]=this.tokenizer._decode_asr(pe,{time_precision:o,return_timestamps:r,force_full_sequences:d});ue.push({text:ge,...be})}return B?ue[0]:ue}}class ImageToTextPipeline extends Pipeline{constructor(e){super(e)}async _call(e,t={}){const r=Array.isArray(e),u=await prepareImages(e),{pixel_values:T}=await this.processor(u),d=[];for(const A of T){A.dims=[1,...A.dims];const le=await this.model.generate(A,t),G=this.tokenizer.batch_decode(le,{skip_special_tokens:!0}).map(B=>({generated_text:B.trim()}));d.push(G)}return r?d:d[0]}}class ImageClassificationPipeline extends Pipeline{constructor(e){super(e)}async _call(e,{topk:t=1}={}){const r=Array.isArray(e),u=await prepareImages(e),{pixel_values:T}=await this.processor(u),d=await this.model({pixel_values:T}),A=this.model.config.id2label,le=[];for(const G of d.logits){const o=getTopItems(softmax(G.data),t).map(i=>({label:A[i[0]],score:i[1]}));t===1?le.push(...o):le.push(o)}return r||t===1?le:le[0]}}class ImageSegmentationPipeline extends Pipeline{constructor(e){super(e),this.subtasks_mapping={panoptic:"post_process_panoptic_segmentation",instance:"post_process_instance_segmentation",semantic:"post_process_semantic_segmentation"}}async _call(e,{threshold:t=.5,mask_threshold:r=.5,overlap_mask_area_threshold:u=.8,label_ids_to_fuse:T=null,target_sizes:d=null,subtask:A=null}={}){if(Array.isArray(e)&&e.length!==1)throw Error("Image segmentation pipeline currently only supports a batch size of 1.");const G=await prepareImages(e),B=G.map(pe=>[pe.height,pe.width]),{pixel_values:o,pixel_mask:i}=await this.processor(G),w=await this.model({pixel_values:o,pixel_mask:i});let ae=null;if(A!==null)ae=this.subtasks_mapping[A];else for(let[pe,ge]of Object.entries(this.subtasks_mapping))if(ge in this.processor.feature_extractor){ae=this.processor.feature_extractor[ge].bind(this.processor.feature_extractor),A=pe;break}const ue=this.model.config.id2label,he=[];if(A==="panoptic"||A==="instance"){const pe=ae(w,t,r,u,T,d??B)[0],ge=pe.segmentation;for(const be of pe.segments_info){const ve=new Uint8ClampedArray(ge.data.length);for(let Se=0;Se<ge.data.length;++Se)ge.data[Se]===be.id&&(ve[Se]=255);const we=new RawImage(ve,ge.dims[1],ge.dims[0],1);he.push({score:be.score,label:ue[be.label_id],mask:we})}}else if(A==="semantic"){const{segmentation:pe,labels:ge}=ae(w,d??B)[0];for(const be of ge){const ve=new Uint8ClampedArray(pe.data.length);for(let Se=0;Se<pe.data.length;++Se)pe.data[Se]===be&&(ve[Se]=255);const we=new RawImage(ve,pe.dims[1],pe.dims[0],1);he.push({score:null,label:ue[be],mask:we})}}else throw Error(`Subtask ${A} not supported.`);return he}}class ZeroShotImageClassificationPipeline extends Pipeline{constructor(e){super(e)}async _call(e,t,{hypothesis_template:r="This is a photo of {}"}={}){const u=Array.isArray(e),T=await prepareImages(e),d=t.map(i=>r.replace("{}",i)),A=this.tokenizer(d,{padding:this.model.config.model_type==="siglip"?"max_length":!0,truncation:!0}),{pixel_values:le}=await this.processor(T),G=await this.model({...A,pixel_values:le}),B=this.model.config.model_type==="siglip"?i=>i.sigmoid().data:i=>softmax(i.data),o=[];for(const i of G.logits_per_image){const ae=[...B(i)].map((ue,he)=>({score:ue,label:t[he]}));ae.sort((ue,he)=>he.score-ue.score),o.push(ae)}return u?o:o[0]}}class ObjectDetectionPipeline extends Pipeline{constructor(e){super(e)}async _call(e,{threshold:t=.9,percentage:r=!1}={}){const u=Array.isArray(e);if(u&&e.length!==1)throw Error("Object detection pipeline currently only supports a batch size of 1.");const T=await prepareImages(e),d=r?null:T.map(w=>[w.height,w.width]),{pixel_values:A,pixel_mask:le}=await this.processor(T),G=await this.model({pixel_values:A,pixel_mask:le}),B=this.processor.feature_extractor.post_process_object_detection(G,t,d),o=this.model.config.id2label,i=B.map(w=>w.boxes.map((ae,ue)=>({score:w.scores[ue],label:o[w.classes[ue]],box:get_bounding_box(ae,!r)})));return u?i:i[0]}}class ZeroShotObjectDetectionPipeline extends Pipeline{constructor(e){super(e)}async _call(e,t,{threshold:r=.1,topk:u=null,percentage:T=!1}={}){const d=Array.isArray(e),A=await prepareImages(e),le=this.tokenizer(t,{padding:!0,truncation:!0}),G=await this.processor(A),B=[];for(let o=0;o<A.length;++o){const i=A[o],w=T?null:[[i.height,i.width]],ae=G.pixel_values[o].unsqueeze_(0),ue=await this.model({...le,pixel_values:ae}),he=this.processor.feature_extractor.post_process_object_detection(ue,r,w,!0)[0];let pe=he.boxes.map((ge,be)=>({score:he.scores[be],label:t[he.classes[be]],box:get_bounding_box(ge,!T)})).sort((ge,be)=>be.score-ge.score);u!==null&&(pe=pe.slice(0,u)),B.push(pe)}return d?B:B[0]}}class DocumentQuestionAnsweringPipeline extends Pipeline{constructor(e){super(e)}async _call(e,t,r={}){const u=(await prepareImages(e))[0],{pixel_values:T}=await this.processor(u),d=`<s_docvqa><s_question>${t}</s_question><s_answer>`,A=this.tokenizer(d,{add_special_tokens:!1,padding:!0,truncation:!0}).input_ids,le=await this.model.generate(T,{...r,decoder_input_ids:A,max_length:this.model.config.decoder.max_position_embeddings}),B=this.tokenizer.batch_decode(le)[0].match(/<s_answer>(.*?)<\/s_answer>/);let o=null;return B&&B.length>=2&&(o=B[1].trim()),[{answer:o}]}}class TextToAudioPipeline extends Pipeline{constructor(t){super(t);Mt(this,"DEFAULT_VOCODER_ID","Xenova/speecht5_hifigan");this.vocoder=t.vocoder??null}async _call(t,{speaker_embeddings:r=null}={}){return this.processor?this._call_text_to_spectrogram(t,{speaker_embeddings:r}):this._call_text_to_waveform(t)}async _call_text_to_waveform(t){const r=this.tokenizer(t,{padding:!0,truncation:!0}),{waveform:u}=await this.model(r),T=this.model.config.sampling_rate;return{audio:u.data,sampling_rate:T}}async _call_text_to_spectrogram(t,{speaker_embeddings:r}){if(this.vocoder||(console.log("No vocoder specified, using default HifiGan vocoder."),this.vocoder=await AutoModel.from_pretrained(this.DEFAULT_VOCODER_ID,{quantized:!1})),(typeof r=="string"||r instanceof URL)&&(r=new Float32Array(await(await fetch(r)).arrayBuffer())),r instanceof Float32Array)r=new Tensor("float32",r,[1,r.length]);else if(!(r instanceof Tensor))throw new Error("Speaker embeddings must be a `Tensor`, `Float32Array`, `string`, or `URL`.");const{input_ids:u}=this.tokenizer(t,{padding:!0,truncation:!0}),{waveform:T}=await this.model.generate_speech(u,r,{vocoder:this.vocoder}),d=this.processor.feature_extractor.config.sampling_rate;return{audio:T.data,sampling_rate:d}}}class ImageToImagePipeline extends Pipeline{constructor(e){super(e)}async _call(e){const t=await prepareImages(e),r=await this.processor(t),u=await this.model(r),T=[];for(const d of u.reconstruction){const A=d.squeeze().clamp_(0,1).mul_(255).round_().to("uint8");T.push(RawImage.fromTensor(A))}return T.length>1?T:T[0]}}class DepthEstimationPipeline extends Pipeline{constructor(e){super(e)}async _call(e){const t=await prepareImages(e),r=await this.processor(t),{predicted_depth:u}=await this.model(r),T=[];for(let d=0;d<t.length;++d){const A=interpolate(u[d],t[d].size.reverse(),"bilinear",!1),le=A.mul_(255/max(A.data)[0]).to("uint8");T.push({predicted_depth:u[d],depth:RawImage.fromTensor(le)})}return T.length>1?T:T[0]}}const SUPPORTED_TASKS=Object.freeze({"text-classification":{tokenizer:AutoTokenizer,pipeline:TextClassificationPipeline,model:AutoModelForSequenceClassification,default:{model:"Xenova/distilbert-base-uncased-finetuned-sst-2-english"},type:"text"},"token-classification":{tokenizer:AutoTokenizer,pipeline:TokenClassificationPipeline,model:AutoModelForTokenClassification,default:{model:"Xenova/bert-base-multilingual-cased-ner-hrl"},type:"text"},"question-answering":{tokenizer:AutoTokenizer,pipeline:QuestionAnsweringPipeline,model:AutoModelForQuestionAnswering,default:{model:"Xenova/distilbert-base-cased-distilled-squad"},type:"text"},"fill-mask":{tokenizer:AutoTokenizer,pipeline:FillMaskPipeline,model:AutoModelForMaskedLM,default:{model:"Xenova/bert-base-uncased"},type:"text"},summarization:{tokenizer:AutoTokenizer,pipeline:SummarizationPipeline,model:AutoModelForSeq2SeqLM,default:{model:"Xenova/distilbart-cnn-6-6"},type:"text"},translation:{tokenizer:AutoTokenizer,pipeline:TranslationPipeline,model:AutoModelForSeq2SeqLM,default:{model:"Xenova/t5-small"},type:"text"},"text2text-generation":{tokenizer:AutoTokenizer,pipeline:Text2TextGenerationPipeline,model:AutoModelForSeq2SeqLM,default:{model:"Xenova/flan-t5-small"},type:"text"},"text-generation":{tokenizer:AutoTokenizer,pipeline:TextGenerationPipeline,model:AutoModelForCausalLM,default:{model:"Xenova/gpt2"},type:"text"},"zero-shot-classification":{tokenizer:AutoTokenizer,pipeline:ZeroShotClassificationPipeline,model:AutoModelForSequenceClassification,default:{model:"Xenova/distilbert-base-uncased-mnli"},type:"text"},"audio-classification":{pipeline:AudioClassificationPipeline,model:AutoModelForAudioClassification,processor:AutoProcessor,default:{model:"Xenova/wav2vec2-base-superb-ks"},type:"audio"},"zero-shot-audio-classification":{tokenizer:AutoTokenizer,pipeline:ZeroShotAudioClassificationPipeline,model:AutoModel,processor:AutoProcessor,default:{model:"Xenova/clap-htsat-unfused"},type:"multimodal"},"automatic-speech-recognition":{tokenizer:AutoTokenizer,pipeline:AutomaticSpeechRecognitionPipeline,model:[AutoModelForSpeechSeq2Seq,AutoModelForCTC],processor:AutoProcessor,default:{model:"Xenova/whisper-tiny.en"},type:"multimodal"},"text-to-audio":{tokenizer:AutoTokenizer,pipeline:TextToAudioPipeline,model:[AutoModelForTextToWaveform,AutoModelForTextToSpectrogram],processor:[AutoProcessor,null],default:{model:"Xenova/speecht5_tts"},type:"text"},"image-to-text":{tokenizer:AutoTokenizer,pipeline:ImageToTextPipeline,model:AutoModelForVision2Seq,processor:AutoProcessor,default:{model:"Xenova/vit-gpt2-image-captioning"},type:"multimodal"},"image-classification":{pipeline:ImageClassificationPipeline,model:AutoModelForImageClassification,processor:AutoProcessor,default:{model:"Xenova/vit-base-patch16-224"},type:"multimodal"},"image-segmentation":{pipeline:ImageSegmentationPipeline,model:[AutoModelForImageSegmentation,AutoModelForSemanticSegmentation],processor:AutoProcessor,default:{model:"Xenova/detr-resnet-50-panoptic"},type:"multimodal"},"zero-shot-image-classification":{tokenizer:AutoTokenizer,pipeline:ZeroShotImageClassificationPipeline,model:AutoModel,processor:AutoProcessor,default:{model:"Xenova/clip-vit-base-patch32"},type:"multimodal"},"object-detection":{pipeline:ObjectDetectionPipeline,model:AutoModelForObjectDetection,processor:AutoProcessor,default:{model:"Xenova/detr-resnet-50"},type:"multimodal"},"zero-shot-object-detection":{tokenizer:AutoTokenizer,pipeline:ZeroShotObjectDetectionPipeline,model:AutoModelForZeroShotObjectDetection,processor:AutoProcessor,default:{model:"Xenova/owlvit-base-patch32"},type:"multimodal"},"document-question-answering":{tokenizer:AutoTokenizer,pipeline:DocumentQuestionAnsweringPipeline,model:AutoModelForDocumentQuestionAnswering,processor:AutoProcessor,default:{model:"Xenova/donut-base-finetuned-docvqa"},type:"multimodal"},"image-to-image":{pipeline:ImageToImagePipeline,model:AutoModelForImageToImage,processor:AutoProcessor,default:{model:"Xenova/swin2SR-classical-sr-x2-64"},type:"image"},"depth-estimation":{pipeline:DepthEstimationPipeline,model:AutoModelForDepthEstimation,processor:AutoProcessor,default:{model:"Xenova/dpt-large"},type:"image"},"feature-extraction":{tokenizer:AutoTokenizer,pipeline:FeatureExtractionPipeline,model:AutoModel,default:{model:"Xenova/all-MiniLM-L6-v2"},type:"text"}}),TASK_ALIASES=Object.freeze({"sentiment-analysis":"text-classification",ner:"token-classification",asr:"automatic-speech-recognition","text-to-speech":"text-to-audio",embeddings:"feature-extraction"});async function pipeline(n,e=null,{quantized:t=!0,progress_callback:r=null,config:u=null,cache_dir:T=null,local_files_only:d=!1,revision:A="main"}={}){n=TASK_ALIASES[n]??n;const le=SUPPORTED_TASKS[n.split("_",1)[0]];if(!le)throw Error(`Unsupported pipeline: ${n}. Must be one of [${Object.keys(SUPPORTED_TASKS)}]`);e||(e=le.default.model,console.log(`No model specified. Using default model: "${e}".`));const G={quantized:t,progress_callback:r,config:u,cache_dir:T,local_files_only:d,revision:A},B=new Map([["tokenizer",le.tokenizer],["model",le.model],["processor",le.processor]]),o=await loadItems(B,e,G);o.task=n,dispatchCallback(r,{status:"ready",task:n,model:e});const i=le.pipeline;return new i(o)}async function loadItems(n,e,t){const r=Object.create(null),u=[];for(let[T,d]of n.entries()){if(!d)continue;let A;Array.isArray(d)?A=new Promise(async(le,G)=>{let B;for(let o of d){if(o===null){le(null);return}try{le(await o.from_pretrained(e,t));return}catch(i){B=i}}G(B)}):A=d.from_pretrained(e,t),r[T]=A,u.push(A)}await Promise.all(u);for(let[T,d]of Object.entries(r))r[T]=await d;return r}env$1.allowLocalModels=!1;env$1.useBrowserCache=!0;class AIService{constructor(){this.generator=null,this.isLoaded=!1,this._stats={totalRequests:0,successRequests:0,failedRequests:0,lastLatencyMs:0,averageLatencyMs:0,deviceType:"WASM",modelSizeMB:0}}static getInstance(){return AIService.instance||(AIService.instance=new AIService),AIService.instance}get stats(){return this._stats}async load(){this.isLoaded||("gpu"in navigator?this._stats.deviceType="GPU (WebGPU)":this._stats.deviceType="CPU",console.log("Loading AI Model..."),this.generator=await pipeline("text2text-generation","Xenova/flan-t5-small"),this.isLoaded=!0,this._stats.modelSizeMB=240,console.log("AI Model Loaded"))}async generate(e){if(!this.generator)throw new Error("AI not loaded. Click 'Load AI' first.");this._stats.totalRequests++;const t=performance.now();try{const r=await this.generator(e,{max_new_tokens:100,temperature:.1}),T=performance.now()-t;this._stats.lastLatencyMs=T,this._stats.successRequests++;const d=this._stats.averageLatencyMs*(this._stats.successRequests-1)+T;return this._stats.averageLatencyMs=d/this._stats.successRequests,r[0].generated_text}catch(r){throw this._stats.failedRequests++,r}}async generateRemote(e,t){var u,T,d;this._stats.totalRequests++,this._stats.deviceType="API",this._stats.modelSizeMB=0;const r=performance.now();try{const le=`${t.baseUrl.endsWith("/")?t.baseUrl.slice(0,-1):t.baseUrl}/chat/completions`,G=await fetch(le,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${t.apiKey}`},body:JSON.stringify({model:t.model,messages:[{role:"system",content:"You are a specialized SQL translation assistant. Output only raw SQL queries without markdown formatting or explanation."},{role:"user",content:`Translate to SQL: ${e}`}],temperature:.1})});if(!G.ok){const ue=await G.text();throw new Error(`API ${G.status}: ${ue.substring(0,100)}...`)}const o=((d=(T=(u=(await G.json()).choices)==null?void 0:u[0])==null?void 0:T.message)==null?void 0:d.content)||"",w=performance.now()-r;this._stats.lastLatencyMs=w,this._stats.successRequests++;const ae=this._stats.averageLatencyMs*(this._stats.successRequests-1)+w;return this._stats.averageLatencyMs=ae/this._stats.successRequests,o}catch(A){throw this._stats.failedRequests++,A}}}const ai=AIService.getInstance(),HardwareMonitor=({isProcessing:n,stats:e})=>{const[t,r]=reactExports.useState(5),[u,T]=reactExports.useState(e.modelSizeMB>0?e.modelSizeMB:45);return reactExports.useEffect(()=>{let d;return n?d=setInterval(()=>{e.deviceType==="API"?(r(Math.floor(Math.random()*5)),T(A=>Math.max(e.modelSizeMB,15))):(r(Math.floor(Math.random()*35)+60),T(A=>Math.min(A+Math.random(),e.modelSizeMB+50)))},800):(r(e.deviceType==="API"?1:5),e.modelSizeMB>0?T(e.modelSizeMB):T(15)),()=>clearInterval(d)},[n,e.modelSizeMB,e.deviceType]),jsxRuntimeExports.jsxs("div",{className:"flex gap-4 p-3 bg-black/40 rounded border border-slate-800 items-center w-full",children:[jsxRuntimeExports.jsxs("div",{className:"flex-1 border-r border-slate-800 pr-4",children:[jsxRuntimeExports.jsxs("div",{className:"flex justify-between items-center mb-1",children:[jsxRuntimeExports.jsxs("span",{className:"text-[10px] font-bold text-slate-500 uppercase flex items-center gap-1",children:[jsxRuntimeExports.jsx(Cpu,{size:12})," ",e.deviceType," Load"]}),jsxRuntimeExports.jsxs("span",{className:`text-xs font-mono font-bold ${n?"text-pink-400":"text-slate-400"}`,children:[t,"%"]})]}),jsxRuntimeExports.jsx("div",{className:"h-1.5 bg-slate-800 rounded-full overflow-hidden",children:jsxRuntimeExports.jsx("div",{className:`h-full transition-all duration-500 ${n?"bg-pink-500":"bg-slate-600"}`,style:{width:`${t}%`}})})]}),jsxRuntimeExports.jsxs("div",{className:"flex-1 border-r border-slate-800 pr-4",children:[jsxRuntimeExports.jsxs("div",{className:"flex justify-between items-center mb-1",children:[jsxRuntimeExports.jsxs("span",{className:"text-[10px] font-bold text-slate-500 uppercase flex items-center gap-1",children:[jsxRuntimeExports.jsx(Activity,{size:12})," VRAM/RAM"]}),jsxRuntimeExports.jsxs("span",{className:"text-xs font-mono font-bold text-slate-400",children:[Math.round(u)," MB"]})]}),jsxRuntimeExports.jsx("div",{className:"h-1.5 bg-slate-800 rounded-full overflow-hidden",children:jsxRuntimeExports.jsx("div",{className:"h-full bg-emerald-500 transition-all duration-500",style:{width:`${Math.min(u/1024*100,100)}%`}})})]}),jsxRuntimeExports.jsxs("div",{className:"flex-1 border-r border-slate-800 pr-4",children:[jsxRuntimeExports.jsxs("div",{className:"flex justify-between items-center mb-1",children:[jsxRuntimeExports.jsxs("span",{className:"text-[10px] font-bold text-slate-500 uppercase flex items-center gap-1",children:[jsxRuntimeExports.jsx(Zap,{size:12})," Latency (Last)"]}),jsxRuntimeExports.jsx("span",{className:"text-xs font-mono font-bold text-slate-400",children:e.lastLatencyMs?`${Math.round(e.lastLatencyMs)}ms`:"--"})]}),jsxRuntimeExports.jsxs("div",{className:"text-[9px] text-slate-600 font-mono",children:["Avg: ",Math.round(e.averageLatencyMs),"ms | Total: ",e.totalRequests]})]}),jsxRuntimeExports.jsxs("div",{className:"w-24",children:[jsxRuntimeExports.jsxs("div",{className:"flex justify-between items-center mb-1",children:[jsxRuntimeExports.jsxs("span",{className:"text-[10px] font-bold text-slate-500 uppercase flex items-center gap-1",children:[jsxRuntimeExports.jsx(CircleAlert,{size:12})," Errors"]}),jsxRuntimeExports.jsx("span",{className:`text-xs font-mono font-bold ${e.failedRequests>0?"text-red-500":"text-slate-400"}`,children:e.failedRequests})]}),jsxRuntimeExports.jsx("div",{className:"h-1.5 bg-slate-800 rounded-full overflow-hidden",children:jsxRuntimeExports.jsx("div",{className:"h-full bg-red-500 transition-all duration-300",style:{width:`${Math.min(e.failedRequests*10,100)}%`}})})]})]})},AlertCard$1=({alert:n,onClick:e})=>{const r={[ImpactLevel.PROHIBITIVE]:{border:"border-red-500",bg:"bg-red-950/20",icon:jsxRuntimeExports.jsx(OctagonAlert,{className:"text-red-500",size:16})},[ImpactLevel.UNDESIRABLE]:{border:"border-amber-500",bg:"bg-amber-950/20",icon:jsxRuntimeExports.jsx(TriangleAlert,{className:"text-amber-500",size:16})},[ImpactLevel.ACCEPTABLE]:{border:"border-emerald-500",bg:"bg-emerald-950/20",icon:jsxRuntimeExports.jsx(Activity,{className:"text-emerald-500",size:16})},[ImpactLevel.NEUTRAL]:{border:"border-slate-500",bg:"bg-slate-800",icon:jsxRuntimeExports.jsx(Info,{className:"text-slate-400",size:16})}}[n.severity];return jsxRuntimeExports.jsxs("div",{onClick:e,className:`p-3 rounded border-l-4 ${r.border} ${r.bg} mb-2 cursor-pointer hover:brightness-110 transition-all`,children:[jsxRuntimeExports.jsxs("div",{className:"flex justify-between items-start mb-1",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 font-bold text-slate-200 text-sm",children:[r.icon,n.title]}),jsxRuntimeExports.jsx("span",{className:"text-[10px] uppercase font-mono text-slate-500",children:n.impactArea})]}),jsxRuntimeExports.jsx("p",{className:"text-xs text-slate-400 leading-relaxed",children:n.description})]})},TerminalPanel=({alerts:n,onEntityClick:e,currentProjectId:t,setCurrentProjectId:r,activeArrangementId:u,setActiveArrangementId:T,projectArrangements:d,onFork:A})=>{const[le,G]=reactExports.useState(!1),[B,o]=reactExports.useState([{id:"IMPACT",label:"IMPACT ANALYSIS",colorClass:"bg-red-900/50 text-red-200 border-red-800"},{id:"CONSOLE",label:"SQL SHELL",colorClass:"bg-slate-700 text-white"},{id:"SNAPSHOTS",label:"SNAPSHOTS / IO",colorClass:"bg-indigo-900 text-indigo-200"},{id:"AI",label:"AI ASSISTANT",colorClass:"bg-pink-900 text-pink-200"},{id:"LOGS",label:"SYSTEM LOGS",colorClass:"bg-amber-900 text-amber-200"}]),[i,w]=reactExports.useState("IMPACT"),[ae,ue]=reactExports.useState(null),[he,pe]=reactExports.useState(""),[ge,be]=reactExports.useState([{type:"OUT",text:"DuckDB-Wasm Ready. Type SQL commands..."}]),[ve,we]=reactExports.useState([]),[Se,Ae]=reactExports.useState("LOCAL"),[Re,Te]=reactExports.useState(!1),[Ce,Ve]=reactExports.useState({baseUrl:"https://api.openai.com/v1",apiKey:"",model:"gpt-3.5-turbo"}),[$e,He]=reactExports.useState(!1),[De,Xe]=reactExports.useState(!1),[Me,je]=reactExports.useState(""),[it,Ke]=reactExports.useState(""),[qe,Pe]=reactExports.useState(ai.stats),[et,Je]=reactExports.useState([]),[at,tt]=reactExports.useState({INFO:!1,WARN:!0,ERROR:!0}),Tt=reactExports.useRef(null),vt=reactExports.useRef(null);reactExports.useEffect(()=>{const yt=console.log,$t=console.warn,Kt=console.error,Ut=(sn,wn)=>{const zt=wn.map(Zn=>typeof Zn=="object"?JSON.stringify(Zn):String(Zn)).join(" ");Je(Zn=>[...Zn.slice(-199),{id:Math.random().toString(36).substr(2,9),level:sn,message:zt,timestamp:new Date}])};return console.log=(...sn)=>{Ut("INFO",sn),yt(...sn)},console.warn=(...sn)=>{Ut("WARN",sn),$t(...sn)},console.error=(...sn)=>{Ut("ERROR",sn),Kt(...sn)},()=>{console.log=yt,console.warn=$t,console.error=Kt}},[]),reactExports.useEffect(()=>{Tt.current&&(Tt.current.scrollTop=Tt.current.scrollHeight)},[ge]),reactExports.useEffect(()=>{vt.current&&(vt.current.scrollTop=vt.current.scrollHeight)},[et,i]),reactExports.useEffect(()=>{const yt=async()=>{db.isReady&&await fn("Initial State",!0)},$t=setInterval(()=>{db.isReady&&(yt(),clearInterval($t))},1e3);return()=>clearInterval($t)},[]);const Dt=(yt,$t)=>{ue($t),yt.dataTransfer.effectAllowed="move"},Pt=(yt,$t)=>{if(yt.preventDefault(),ae===$t)return;const Kt=B.findIndex(zt=>zt.id===ae),Ut=B.findIndex(zt=>zt.id===$t);if(Kt===-1||Ut===-1)return;const sn=[...B],[wn]=sn.splice(Kt,1);sn.splice(Ut,0,wn),o(sn)},jt=()=>{ue(null)},tn=async()=>{if(!he.trim())return;const yt=he.trim();be($t=>[...$t,{type:"IN",text:yt}]),pe("");try{const $t=await db.execute(yt);$t.length===0?be(Kt=>[...Kt,{type:"OUT",text:"Success (No rows returned)"}]):be(Kt=>[...Kt,{type:"OUT",text:JSON.stringify($t,null,2)}])}catch($t){be(Kt=>[...Kt,{type:"ERR",text:$t.message}])}},Sn=yt=>{yt.key==="Enter"&&!yt.shiftKey&&(yt.preventDefault(),tn())},fn=async(yt="Manual Snapshot",$t=!1)=>{try{const Kt=await db.createFullSnapshot(),Ut={id:`snap_${Date.now()}`,timestamp:Date.now(),description:yt,data:Kt,isAuto:$t};we(sn=>[Ut,...sn]),$t||be(sn=>[...sn,{type:"OUT",text:`Snapshot created: ${Ut.id}`}])}catch(Kt){be(Ut=>[...Ut,{type:"ERR",text:`Snapshot failed: ${Kt.message}`}])}},Jt=async yt=>{if(confirm(`Restore snapshot "${yt.description}"? Current unsaved data will be lost.`))try{await db.restoreSnapshot(yt.data),be($t=>[...$t,{type:"OUT",text:`System restored to: ${new Date(yt.timestamp).toLocaleTimeString()}`}]),window.location.reload()}catch($t){be(Kt=>[...Kt,{type:"ERR",text:`Restore failed: ${$t.message}`}])}},Vn=yt=>{const $t=new Blob([yt.data],{type:"application/json"}),Kt=URL.createObjectURL($t),Ut=document.createElement("a");Ut.href=Kt,Ut.download=`hypothesis_backup_${yt.id}.json`,Ut.click(),URL.revokeObjectURL(Kt)},qn=yt=>{var Ut;const $t=(Ut=yt.target.files)==null?void 0:Ut[0];if(!$t)return;const Kt=new FileReader;Kt.onload=async sn=>{var zt;const wn=(zt=sn.target)==null?void 0:zt.result;try{JSON.parse(wn);const Zn={id:`import_${Date.now()}`,timestamp:Date.now(),description:`Imported: ${$t.name}`,data:wn,isAuto:!1};we(Le=>[Zn,...Le]),be(Le=>[...Le,{type:"OUT",text:`File imported as snapshot: ${$t.name}`}])}catch{be(Le=>[...Le,{type:"ERR",text:"Invalid JSON file"}])}},Kt.readAsText($t)},Yn=async()=>{Xe(!0);try{await ai.load(),He(!0),Pe({...ai.stats})}catch(yt){console.error(yt)}finally{Xe(!1)}},nr=async()=>{if(Me.trim()){Xe(!0),Ke("Processing...");try{let yt="";if(Se==="LOCAL"){const $t=`Translate to SQL: ${Me}`;yt=await ai.generate($t)}else yt=await ai.generateRemote(Me,Ce);Ke(yt),pe(yt)}catch(yt){Ke(`Error: ${yt.message}`)}finally{Xe(!1),Pe({...ai.stats})}}};return jsxRuntimeExports.jsxs("div",{className:`fixed bottom-0 left-0 right-0 bg-slate-900 border-t border-slate-700 shadow-2xl flex flex-col transition-all duration-300 z-50 ${le?"h-[400px]":"h-10"}`,children:[jsxRuntimeExports.jsxs("div",{className:"h-10 bg-slate-800 flex items-center justify-between",onClick:yt=>{yt.stopPropagation()},children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center px-2 gap-2 h-full border-r border-slate-700 mr-2 flex-shrink-0",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-1 bg-slate-900 rounded px-2 py-0.5 border border-slate-700",children:[jsxRuntimeExports.jsx(Box,{size:10,className:"text-slate-500"}),jsxRuntimeExports.jsx("select",{value:t,onChange:yt=>r(yt.target.value),className:"bg-transparent text-[10px] font-bold text-slate-300 outline-none w-24 truncate cursor-pointer",children:PROJECTS.map(yt=>jsxRuntimeExports.jsx("option",{value:yt.id,children:yt.name},yt.id))})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-1 bg-slate-900 rounded px-2 py-0.5 border border-slate-700",children:[jsxRuntimeExports.jsx(Layers,{size:10,className:"text-slate-500"}),jsxRuntimeExports.jsx("select",{value:u,onChange:yt=>T(yt.target.value),className:"bg-transparent text-[10px] font-bold text-slate-300 outline-none w-32 truncate cursor-pointer",children:d.map(yt=>jsxRuntimeExports.jsx("option",{value:yt.id,children:yt.name},yt.id))})]}),jsxRuntimeExports.jsxs("button",{onClick:A,className:"flex items-center gap-1 px-2 py-0.5 bg-indigo-900/50 hover:bg-indigo-900 border border-indigo-800 rounded text-[10px] font-bold text-indigo-300 transition-colors",title:"Fork Hypothesis",children:[jsxRuntimeExports.jsx(GitBranch,{size:10})," FORK"]})]}),jsxRuntimeExports.jsx("div",{className:"flex-1 flex items-center gap-0.5 px-2 overflow-x-auto h-full scrollbar-hide",children:le&&B.map(yt=>jsxRuntimeExports.jsxs("div",{draggable:!0,onDragStart:$t=>Dt($t,yt.id),onDragOver:$t=>Pt($t,yt.id),onDrop:jt,onClick:()=>w(yt.id),className:`
                                flex items-center gap-1 px-3 py-1.5 text-[10px] uppercase font-bold cursor-move select-none transition-colors border border-b-0 rounded-t
                                ${i===yt.id?yt.colorClass:"bg-slate-900 border-transparent text-slate-500 hover:text-slate-300 hover:bg-slate-800"}
                                ${ae===yt.id?"opacity-50":""}
                            `,children:[jsxRuntimeExports.jsx(GripVertical,{size:8,className:"text-slate-600"}),yt.label]},yt.id))}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 px-4 h-full bg-slate-900 border-l border-slate-700 cursor-pointer text-slate-400 hover:text-white hover:bg-slate-800 transition-colors",onClick:yt=>{yt.stopPropagation(),G(!le)},children:[jsxRuntimeExports.jsx(Terminal,{size:14}),jsxRuntimeExports.jsx("span",{className:"text-xs font-mono font-bold",children:"SYSTEM CONSOLE"}),le?jsxRuntimeExports.jsx(ChevronDown,{size:14}):jsxRuntimeExports.jsx(ChevronUp,{size:14})]})]}),le&&jsxRuntimeExports.jsxs("div",{className:"flex-1 overflow-hidden flex bg-slate-950 relative",children:[i==="IMPACT"&&jsxRuntimeExports.jsxs("div",{className:"flex-1 flex flex-col",children:[jsxRuntimeExports.jsxs("div",{className:"p-4 border-b border-slate-800 bg-indigo-950/20 flex-shrink-0 flex justify-between items-center",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("h2",{className:"text-sm font-bold text-indigo-400 flex items-center gap-2 uppercase tracking-wide",children:[jsxRuntimeExports.jsx(Shield,{size:16})," Global Impact Analysis"]}),jsxRuntimeExports.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Real-time risk assessment and consequence derivation for the active hypothesis."})]}),jsxRuntimeExports.jsxs("div",{className:"text-xs text-slate-400 font-mono",children:["Total Alerts: ",n.length]})]}),jsxRuntimeExports.jsx("div",{className:"flex-1 overflow-y-auto p-4 custom-scrollbar",children:n.length===0?jsxRuntimeExports.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-slate-600 italic text-sm",children:[jsxRuntimeExports.jsx(CircleCheckBig,{size:32,className:"mb-2 text-emerald-900/50"}),"No significant alerts detected. Hypothesis appears consistent."]}):jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[n.some(yt=>yt.severity===ImpactLevel.PROHIBITIVE)&&jsxRuntimeExports.jsxs("div",{className:"space-y-2",children:[jsxRuntimeExports.jsx("h3",{className:"text-[10px] font-bold text-red-400 uppercase tracking-wider mb-2 flex items-center gap-1",children:"Strategic Risks"}),n.filter(yt=>yt.severity===ImpactLevel.PROHIBITIVE).map(yt=>jsxRuntimeExports.jsx(AlertCard$1,{alert:yt,onClick:()=>e(EntityType.RULE,yt.provenance[0])},yt.id))]}),n.some(yt=>yt.severity!==ImpactLevel.PROHIBITIVE)&&jsxRuntimeExports.jsxs("div",{className:"space-y-2",children:[jsxRuntimeExports.jsx("h3",{className:"text-[10px] font-bold text-amber-400 uppercase tracking-wider mb-2 flex items-center gap-1",children:"Operational Implications"}),n.filter(yt=>yt.severity!==ImpactLevel.PROHIBITIVE).map(yt=>jsxRuntimeExports.jsx(AlertCard$1,{alert:yt,onClick:()=>e(EntityType.RULE,yt.provenance[0])},yt.id))]})]})})]}),i==="CONSOLE"&&jsxRuntimeExports.jsxs("div",{className:"flex-1 flex flex-col font-mono text-sm",children:[jsxRuntimeExports.jsx("div",{ref:Tt,className:"flex-1 p-4 overflow-y-auto space-y-1 bg-black/50",children:ge.map((yt,$t)=>jsxRuntimeExports.jsxs("div",{className:`${yt.type==="IN"?"text-slate-400 mt-2":yt.type==="ERR"?"text-red-400":"text-emerald-300 whitespace-pre-wrap"}`,children:[yt.type==="IN"?"> ":"",yt.text]},$t))}),jsxRuntimeExports.jsxs("div",{className:"p-2 bg-slate-800 flex items-center gap-2",children:[jsxRuntimeExports.jsx("span",{className:"text-emerald-500 font-bold",children:">"}),jsxRuntimeExports.jsx("input",{className:"flex-1 bg-transparent border-none outline-none text-slate-100 placeholder-slate-600",value:he,onChange:yt=>pe(yt.target.value),onKeyDown:Sn,placeholder:"SELECT * FROM projects...",autoFocus:!0}),jsxRuntimeExports.jsx("button",{onClick:tn,className:"text-slate-400 hover:text-white",children:jsxRuntimeExports.jsx(Play,{size:16})})]})]}),i==="SNAPSHOTS"&&jsxRuntimeExports.jsxs("div",{className:"flex-1 flex p-4 gap-6 bg-slate-900",children:[jsxRuntimeExports.jsxs("div",{className:"w-1/3 border-r border-slate-800 pr-6 space-y-4",children:[jsxRuntimeExports.jsxs("h3",{className:"font-bold text-indigo-400 flex items-center gap-2",children:[jsxRuntimeExports.jsx(Database,{size:16})," Registry Controls"]}),jsxRuntimeExports.jsx("p",{className:"text-xs text-slate-500",children:"The registry is segmented. Direct writes are disabled. Use Snapshots to version-control the entire database state."}),jsxRuntimeExports.jsxs("button",{onClick:()=>fn("Manual Backup"),className:"w-full flex items-center justify-center gap-2 py-2 bg-indigo-600 hover:bg-indigo-500 rounded text-sm font-bold",children:[jsxRuntimeExports.jsx(Save,{size:14})," CREATE NEW SNAPSHOT"]}),jsxRuntimeExports.jsxs("div",{className:"pt-4 border-t border-slate-800",children:[jsxRuntimeExports.jsx("label",{className:"block text-xs font-bold text-slate-500 mb-2 uppercase",children:"External Restore (JSON)"}),jsxRuntimeExports.jsx("div",{className:"flex gap-2",children:jsxRuntimeExports.jsxs("label",{className:"flex-1 flex items-center justify-center gap-2 py-2 bg-slate-800 hover:bg-slate-700 border border-slate-600 rounded text-sm cursor-pointer text-slate-300",children:[jsxRuntimeExports.jsx(Upload,{size:14})," Upload File",jsxRuntimeExports.jsx("input",{type:"file",onChange:qn,className:"hidden",accept:".json"})]})})]})]}),jsxRuntimeExports.jsxs("div",{className:"flex-1 overflow-y-auto",children:[jsxRuntimeExports.jsxs("h3",{className:"font-bold text-slate-400 mb-2 flex items-center gap-2",children:[jsxRuntimeExports.jsx(History,{size:14})," Timeline (",ve.length,")"]}),jsxRuntimeExports.jsxs("div",{className:"space-y-2",children:[ve.map(yt=>jsxRuntimeExports.jsxs("div",{className:"bg-slate-800 p-3 rounded border border-slate-700 flex justify-between items-center group",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx("span",{className:"font-bold text-slate-200",children:yt.description}),yt.isAuto&&jsxRuntimeExports.jsx("span",{className:"text-[10px] bg-slate-700 px-1 rounded text-slate-400",children:"AUTO"})]}),jsxRuntimeExports.jsxs("div",{className:"text-xs text-slate-500 font-mono",children:["ID: ",yt.id,"  ",new Date(yt.timestamp).toLocaleString(),"  Size: ",(yt.data.length/1024).toFixed(1)," KB"]})]}),jsxRuntimeExports.jsxs("div",{className:"flex gap-2 opacity-50 group-hover:opacity-100 transition-opacity",children:[jsxRuntimeExports.jsx("button",{onClick:()=>Jt(yt),className:"p-1.5 bg-emerald-900/50 text-emerald-400 hover:bg-emerald-900 rounded",title:"Restore State",children:jsxRuntimeExports.jsx(RefreshCw,{size:14})}),jsxRuntimeExports.jsx("button",{onClick:()=>Vn(yt),className:"p-1.5 bg-slate-700 text-slate-300 hover:bg-slate-600 rounded",title:"Download JSON",children:jsxRuntimeExports.jsx(Download,{size:14})})]})]},yt.id)),ve.length===0&&jsxRuntimeExports.jsx("div",{className:"text-slate-600 italic",children:"No snapshots recorded yet."})]})]})]}),i==="LOGS"&&jsxRuntimeExports.jsxs("div",{className:"flex-1 flex flex-col bg-slate-900",children:[jsxRuntimeExports.jsxs("div",{className:"h-10 border-b border-slate-800 flex items-center px-4 gap-6 bg-slate-950",children:[jsxRuntimeExports.jsxs("span",{className:"text-xs font-bold text-slate-500 uppercase flex items-center gap-2",children:[jsxRuntimeExports.jsx(FileText,{size:14})," Log Filters:"]}),jsxRuntimeExports.jsxs("label",{className:"flex items-center gap-2 cursor-pointer group",children:[jsxRuntimeExports.jsx("div",{onClick:()=>tt(yt=>({...yt,INFO:!yt.INFO})),children:at.INFO?jsxRuntimeExports.jsx(SquareCheckBig,{size:14,className:"text-sky-400"}):jsxRuntimeExports.jsx(Square,{size:14,className:"text-slate-600"})}),jsxRuntimeExports.jsx("span",{className:`text-xs font-bold ${at.INFO?"text-sky-400":"text-slate-600"}`,children:"INFO"})]}),jsxRuntimeExports.jsxs("label",{className:"flex items-center gap-2 cursor-pointer group",children:[jsxRuntimeExports.jsx("div",{onClick:()=>tt(yt=>({...yt,WARN:!yt.WARN})),children:at.WARN?jsxRuntimeExports.jsx(SquareCheckBig,{size:14,className:"text-amber-400"}):jsxRuntimeExports.jsx(Square,{size:14,className:"text-slate-600"})}),jsxRuntimeExports.jsx("span",{className:`text-xs font-bold ${at.WARN?"text-amber-400":"text-slate-600"}`,children:"WARNING"})]}),jsxRuntimeExports.jsxs("label",{className:"flex items-center gap-2 cursor-pointer group",children:[jsxRuntimeExports.jsx("div",{onClick:()=>tt(yt=>({...yt,ERROR:!yt.ERROR})),children:at.ERROR?jsxRuntimeExports.jsx(SquareCheckBig,{size:14,className:"text-red-400"}):jsxRuntimeExports.jsx(Square,{size:14,className:"text-slate-600"})}),jsxRuntimeExports.jsx("span",{className:`text-xs font-bold ${at.ERROR?"text-red-400":"text-slate-600"}`,children:"ERROR"})]}),jsxRuntimeExports.jsx("div",{className:"flex-1"}),jsxRuntimeExports.jsx("button",{onClick:()=>Je([]),className:"text-slate-500 hover:text-white",title:"Clear Logs",children:jsxRuntimeExports.jsx(Trash2,{size:14})})]}),jsxRuntimeExports.jsxs("div",{ref:vt,className:"flex-1 overflow-y-auto p-4 space-y-1 font-mono text-xs",children:[et.filter(yt=>at[yt.level]).map(yt=>jsxRuntimeExports.jsxs("div",{className:"flex gap-3 hover:bg-slate-800/50 p-1 rounded",children:[jsxRuntimeExports.jsx("span",{className:"text-slate-600 whitespace-nowrap",children:yt.timestamp.toLocaleTimeString()}),jsxRuntimeExports.jsx("span",{className:`font-bold w-12 flex-shrink-0 ${yt.level==="INFO"?"text-sky-500":yt.level==="WARN"?"text-amber-500":"text-red-500"}`,children:yt.level}),jsxRuntimeExports.jsx("span",{className:"text-slate-300 break-all",children:yt.message})]},yt.id)),et.filter(yt=>at[yt.level]).length===0&&jsxRuntimeExports.jsx("div",{className:"text-slate-600 italic mt-4 text-center",children:"No logs matching filters."})]})]}),i==="AI"&&jsxRuntimeExports.jsxs("div",{className:"flex-1 flex flex-col h-full relative",children:[jsxRuntimeExports.jsxs("div",{className:"h-10 border-b border-slate-800 flex items-center justify-between px-4 bg-slate-900/50",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx(Bot,{size:16,className:"text-pink-500"}),jsxRuntimeExports.jsx("span",{className:"text-xs font-bold text-slate-300",children:Se==="LOCAL"?"Local Model (Flan-T5)":`Remote API (${Ce.model})`})]}),jsxRuntimeExports.jsxs("button",{onClick:()=>Te(!Re),className:`flex items-center gap-2 px-3 py-1 rounded text-[10px] font-bold border transition-all ${Re?"bg-slate-700 border-slate-600 text-white":"bg-slate-800 border-slate-700 text-slate-400 hover:text-white"}`,children:[jsxRuntimeExports.jsx(Settings,{size:12}),"CONFIG & STATS"]})]}),Re&&jsxRuntimeExports.jsxs("div",{className:"bg-slate-900 border-b border-slate-800 p-4 animate-in slide-in-from-top-2",children:[jsxRuntimeExports.jsxs("div",{className:"flex gap-4 mb-4",children:[jsxRuntimeExports.jsxs("div",{className:"w-48 flex-shrink-0",children:[jsxRuntimeExports.jsx("label",{className:"text-[10px] font-bold text-slate-500 uppercase block mb-2",children:"Execution Environment"}),jsxRuntimeExports.jsxs("div",{className:"flex bg-slate-800 rounded p-1 border border-slate-700",children:[jsxRuntimeExports.jsx("button",{onClick:()=>Ae("LOCAL"),className:`flex-1 py-1 text-[10px] font-bold rounded ${Se==="LOCAL"?"bg-pink-600 text-white shadow":"text-slate-400 hover:text-slate-200"}`,children:"LOCAL"}),jsxRuntimeExports.jsx("button",{onClick:()=>Ae("REMOTE"),className:`flex-1 py-1 text-[10px] font-bold rounded ${Se==="REMOTE"?"bg-indigo-600 text-white shadow":"text-slate-400 hover:text-slate-200"}`,children:"REMOTE"})]})]}),jsxRuntimeExports.jsx("div",{className:"flex-1",children:Se==="REMOTE"?jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"text-[10px] font-bold text-slate-500 uppercase block mb-2",children:"API Configuration"}),jsxRuntimeExports.jsxs("div",{className:"flex gap-2",children:[jsxRuntimeExports.jsxs("div",{className:"flex-1 relative",children:[jsxRuntimeExports.jsx(Globe,{size:12,className:"absolute left-2 top-2 text-slate-500"}),jsxRuntimeExports.jsx("input",{className:"w-full bg-slate-800 border border-slate-700 rounded py-1 pl-7 pr-2 text-xs text-slate-300 focus:border-indigo-500 outline-none",placeholder:"Base URL",value:Ce.baseUrl,onChange:yt=>Ve({...Ce,baseUrl:yt.target.value})})]}),jsxRuntimeExports.jsxs("div",{className:"flex-1 relative",children:[jsxRuntimeExports.jsx(Key,{size:12,className:"absolute left-2 top-2 text-slate-500"}),jsxRuntimeExports.jsx("input",{type:"password",className:"w-full bg-slate-800 border border-slate-700 rounded py-1 pl-7 pr-2 text-xs text-slate-300 focus:border-indigo-500 outline-none",placeholder:"API Key",value:Ce.apiKey,onChange:yt=>Ve({...Ce,apiKey:yt.target.value})})]}),jsxRuntimeExports.jsxs("div",{className:"w-32 relative",children:[jsxRuntimeExports.jsx(Settings,{size:12,className:"absolute left-2 top-2 text-slate-500"}),jsxRuntimeExports.jsx("input",{className:"w-full bg-slate-800 border border-slate-700 rounded py-1 pl-7 pr-2 text-xs text-slate-300 focus:border-indigo-500 outline-none",placeholder:"Model",value:Ce.model,onChange:yt=>Ve({...Ce,model:yt.target.value})})]})]})]}):jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"text-[10px] font-bold text-slate-500 uppercase block mb-2",children:"Local Resources"}),jsxRuntimeExports.jsx(HardwareMonitor,{isProcessing:De,stats:qe})]})})]}),Se==="REMOTE"&&jsxRuntimeExports.jsx("div",{className:"pt-4 border-t border-slate-800",children:jsxRuntimeExports.jsx(HardwareMonitor,{isProcessing:De,stats:qe})})]}),jsxRuntimeExports.jsxs("div",{className:"flex-1 flex flex-col p-4 bg-slate-900 relative min-h-0",children:[Se==="LOCAL"&&!$e&&jsxRuntimeExports.jsxs("div",{className:"absolute inset-0 z-10 flex flex-col items-center justify-center bg-slate-900/90 backdrop-blur-sm",children:[jsxRuntimeExports.jsx(Bot,{size:48,className:"text-pink-500 mb-4 animate-bounce"}),jsxRuntimeExports.jsx("h2",{className:"text-xl font-bold text-white mb-2",children:"Transformers.js Integration"}),jsxRuntimeExports.jsxs("p",{className:"text-slate-400 max-w-md text-center text-sm mb-6",children:["Load a quantized version of ",jsxRuntimeExports.jsx("strong",{children:"flan-t5-small"})," (~240MB) directly into the browser. This enables local, offline translation of Natural Language to SQL and data format conversion without sending data to a server."]}),jsxRuntimeExports.jsxs("button",{onClick:Yn,disabled:De,className:"px-6 py-3 bg-pink-600 hover:bg-pink-500 text-white font-bold rounded shadow-lg flex items-center gap-2",children:[De?jsxRuntimeExports.jsx(RefreshCw,{className:"animate-spin"}):jsxRuntimeExports.jsx(Download,{}),De?"Downloading Model...":"LOAD AI MODEL (240MB)"]})]}),jsxRuntimeExports.jsxs("div",{className:"flex-1 flex gap-4 min-h-0",children:[jsxRuntimeExports.jsxs("div",{className:"w-1/2 flex flex-col gap-2",children:[jsxRuntimeExports.jsx("label",{className:"text-xs font-bold text-pink-400 uppercase",children:"Natural Language Input"}),jsxRuntimeExports.jsx("textarea",{className:"flex-1 bg-slate-800 border border-slate-700 rounded p-3 text-slate-200 resize-none outline-none focus:border-pink-500",placeholder:'e.g., "Select all projects where domain contains Health"',value:Me,onChange:yt=>je(yt.target.value),onKeyDown:yt=>{yt.key==="Enter"&&yt.ctrlKey&&nr()}}),jsxRuntimeExports.jsxs("button",{onClick:nr,className:`py-2 text-white font-bold rounded transition-colors ${Se==="LOCAL"?"bg-pink-700 hover:bg-pink-600":"bg-indigo-700 hover:bg-indigo-600"}`,children:[Se==="LOCAL"?"GENERATE SQL (LOCAL)":"GENERATE SQL (REMOTE API)"," (CTRL+ENTER)"]})]}),jsxRuntimeExports.jsxs("div",{className:"w-1/2 flex flex-col gap-2",children:[jsxRuntimeExports.jsx("label",{className:"text-xs font-bold text-emerald-400 uppercase",children:"Model Output"}),jsxRuntimeExports.jsx("div",{className:"flex-1 bg-black/50 border border-slate-700 rounded p-3 text-emerald-300 font-mono whitespace-pre-wrap overflow-y-auto",children:it||"// Output will appear here..."}),jsxRuntimeExports.jsx("button",{onClick:()=>{pe(it),w("CONSOLE")},className:"py-2 bg-slate-700 hover:bg-slate-600 text-slate-300 font-bold rounded text-xs",disabled:!it,children:"SEND TO CONSOLE"})]})]})]})]})]})]})},generateAlerts=n=>{const e=[],{services:t,container:r}=n,u=r.activeRules;if(n.projectId==="proj_ml_audio"){const d=t.some(pe=>pe.attributes.includes("SVD")),A=t.some(pe=>pe.attributes.includes("Transformer")),le=t.some(pe=>pe.attributes.includes("Normalization")),G=t.some(pe=>pe.attributes.includes("Training")),B=t.some(pe=>pe.attributes.includes("Validation")),o=t.some(pe=>pe.attributes.includes("Path-A")),i=t.some(pe=>pe.attributes.includes("Path-B"));u.find(pe=>pe.id==="r_rep_loss")&&d&&A&&e.push({id:"imp_rep_loss",title:"Representation Bottleneck",description:"Feeding Low-Dimensional SVD features into a High-Capacity Transformer Encoder creates an information bottleneck, negating the benefits of the Transformer.",type:AlertType.OPERATIONAL_IMPLICATION,severity:ImpactLevel.UNDESIRABLE,provenance:["r_rep_loss",...t.filter(pe=>pe.attributes.includes("SVD")||pe.attributes.includes("Transformer")).map(pe=>pe.id)],impactArea:"LATENCY"}),u.find(pe=>pe.id==="r_norm_safe")&&G&&!le&&e.push({id:"risk_gradient_explosion",title:"Unstable Training Dynamics",description:"Neural Network training is active but Input Normalization node is missing. High risk of gradient explosion or non-convergence.",type:AlertType.STRATEGIC_RISK,severity:ImpactLevel.PROHIBITIVE,provenance:["r_norm_safe",...t.filter(pe=>pe.attributes.includes("Training")).map(pe=>pe.id)],impactArea:"SECURITY"}),u.find(pe=>pe.id==="r_maint_div")&&o&&i&&e.push({id:"imp_divergence",title:"Maintenance Divergence",description:"Architecture maintains two distinct feature engineering paths (Path A & Path B). Increases technical debt and testing surface area.",type:AlertType.OPERATIONAL_IMPLICATION,severity:ImpactLevel.NEUTRAL,provenance:["r_maint_div",...t.filter(pe=>pe.attributes.includes("Path-A")||pe.attributes.includes("Path-B")).map(pe=>pe.id)],impactArea:"COST"}),u.find(pe=>pe.id==="r_model_eval")&&G&&!B&&e.push({id:"risk_blind",title:"Blind Model Deployment",description:"Model is being trained but no Evaluation node exists in the pipeline.",type:AlertType.STRATEGIC_RISK,severity:ImpactLevel.PROHIBITIVE,provenance:["r_model_eval",...t.filter(pe=>pe.attributes.includes("Training")).map(pe=>pe.id)],impactArea:"REGULATORY"})}else{const d=t.some(ue=>ue.attributes.includes("Cloud")||ue.attributes.includes("Off-Prem")),A=t.some(ue=>ue.type==="LEGACY_SYSTEM"),le=t.some(ue=>ue.attributes.includes("AI")),G=t.some(ue=>ue.attributes.includes("Safety-Layer")),B=t.some(ue=>ue.attributes.includes("Continuity")||ue.type==="LEGACY_SYSTEM"),o=u.find(ue=>ue.id==="r_hybrid");o&&d&&A&&(e.push({id:"imp_hybrid_complexity",title:"Hybrid Synchronization Overhead",description:o.description,type:AlertType.OPERATIONAL_IMPLICATION,severity:ImpactLevel.UNDESIRABLE,provenance:["r_hybrid",...t.filter(ue=>ue.type==="LEGACY_SYSTEM"||ue.attributes.includes("Cloud")).map(ue=>ue.id)],impactArea:"LATENCY"}),e.push({id:"imp_egress_fees",title:"Variable Egress Costs",description:"Frequent data transfer between On-Prem Mainframe and Cloud Storage will incur unpredictable operational costs.",type:AlertType.OPERATIONAL_IMPLICATION,severity:ImpactLevel.UNDESIRABLE,provenance:["r_cost"],impactArea:"COST"})),u.find(ue=>ue.id==="r_ai_safe")&&le&&(G?e.push({id:"imp_human_workload",title:"Human Workload Increase",description:"Mandatory human audit of AI outputs increases operational load on clinical staff.",type:AlertType.OPERATIONAL_IMPLICATION,severity:ImpactLevel.UNDESIRABLE,provenance:["r_ai_safe",...t.filter(ue=>ue.attributes.includes("Safety-Layer")).map(ue=>ue.id)],impactArea:"COST"}):e.push({id:"risk_ai_autonomous",title:"Clinical Safety Violation",description:'AI Service is active without a dedicated "Human-in-the-Loop" verification layer. This violates clinical traceability protocols.',type:AlertType.STRATEGIC_RISK,severity:ImpactLevel.PROHIBITIVE,provenance:["r_ai_safe",...t.filter(ue=>ue.attributes.includes("AI")).map(ue=>ue.id)],impactArea:"REGULATORY"}));const w=u.find(ue=>ue.id==="r_compliance");w&&d&&(t.some(he=>he.attributes.includes("API-Gateway")&&he.isExperimental)?e.push({id:"risk_sovereignty",title:"Data Residency Violation",description:"Use of Experimental 3rd Party SaaS implies uncontrolled data residency.",type:AlertType.STRATEGIC_RISK,severity:ImpactLevel.PROHIBITIVE,provenance:["r_compliance","p_sov"],impactArea:"SECURITY"}):e.push({id:"risk_cloud_reg",title:"Regulatory Audit Burden",description:w.description,type:AlertType.OPERATIONAL_IMPLICATION,severity:ImpactLevel.UNDESIRABLE,provenance:["r_compliance"],impactArea:"REGULATORY"})),u.find(ue=>ue.id==="r_continuity")&&!B&&d&&e.push({id:"risk_outage",title:"Critical Continuity Failure",description:"Architecture relies on Cloud/Internet connectivity without on-premise fallback.",type:AlertType.STRATEGIC_RISK,severity:ImpactLevel.PROHIBITIVE,provenance:["r_continuity","p_cont"],impactArea:"SECURITY"})}return e},AlertCard=({alert:n,onClick:e})=>{const r={[ImpactLevel.PROHIBITIVE]:{border:"border-red-500",bg:"bg-red-950/20",icon:jsxRuntimeExports.jsx(OctagonAlert,{className:"text-red-500",size:16})},[ImpactLevel.UNDESIRABLE]:{border:"border-amber-500",bg:"bg-amber-950/20",icon:jsxRuntimeExports.jsx(TriangleAlert,{className:"text-amber-500",size:16})},[ImpactLevel.ACCEPTABLE]:{border:"border-emerald-500",bg:"bg-emerald-950/20",icon:jsxRuntimeExports.jsx(Activity,{className:"text-emerald-500",size:16})},[ImpactLevel.NEUTRAL]:{border:"border-slate-500",bg:"bg-slate-800",icon:jsxRuntimeExports.jsx(Info,{className:"text-slate-400",size:16})}}[n.severity];return jsxRuntimeExports.jsxs("div",{onClick:e,className:`p-3 rounded border-l-4 ${r.border} ${r.bg} mb-2 cursor-pointer hover:brightness-110 transition-all`,children:[jsxRuntimeExports.jsxs("div",{className:"flex justify-between items-start mb-1",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 font-bold text-slate-200 text-sm",children:[r.icon,n.title]}),jsxRuntimeExports.jsx("span",{className:"text-[10px] uppercase font-mono text-slate-500",children:n.impactArea})]}),jsxRuntimeExports.jsx("p",{className:"text-xs text-slate-400 leading-relaxed",children:n.description})]})},ClusterAnalysis=({selectedEntities:n,arrangement:e,alerts:t,onClose:r,onEntityClick:u})=>{const T=t.filter(le=>n.some(G=>le.provenance.includes(G.id))),d=Array.from(new Set(T.map(le=>le.id))).map(le=>T.find(G=>G.id===le)),A=Array.from(new Set(n.filter(le=>le.type===EntityType.SERVICE).map(le=>{var G;return(G=e.services.find(B=>B.id===le.id))==null?void 0:G.group}).filter(Boolean)));return jsxRuntimeExports.jsxs("div",{className:"flex flex-col bg-slate-900/50",children:[jsxRuntimeExports.jsxs("div",{className:"p-4 border-b border-slate-800 bg-slate-900 flex justify-between items-start",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("div",{className:"text-[10px] font-bold text-indigo-400 uppercase tracking-wider mb-1 flex items-center gap-1",children:[jsxRuntimeExports.jsx(MousePointer2,{size:12})," Multi-Selection Analysis"]}),jsxRuntimeExports.jsxs("h2",{className:"text-lg font-bold text-slate-100",children:[n.length," Entities Selected"]})]}),jsxRuntimeExports.jsx("button",{onClick:r,className:"text-slate-500 hover:text-white p-1 hover:bg-slate-800 rounded transition-colors",children:jsxRuntimeExports.jsx(X,{size:16})})]}),jsxRuntimeExports.jsxs("div",{className:"p-4 space-y-6",children:[A.length>0&&jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"text-[10px] font-bold text-slate-500 uppercase block mb-2",children:"Active Clusters"}),jsxRuntimeExports.jsx("div",{className:"flex flex-wrap gap-2",children:A.map(le=>jsxRuntimeExports.jsx("span",{className:"px-2 py-1 bg-indigo-900/30 text-indigo-300 border border-indigo-700/50 rounded text-xs font-bold",children:le},le))})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"text-[10px] font-bold text-slate-500 uppercase block mb-2",children:"Selection Cluster"}),jsxRuntimeExports.jsx("div",{className:"flex flex-wrap gap-2",children:n.map(le=>{var B,o,i;let G=le.id;return le.type===EntityType.SERVICE&&(G=((B=e.services.find(w=>w.id===le.id))==null?void 0:B.name)||le.id),le.type===EntityType.RULE&&(G=((o=e.container.activeRules.find(w=>w.id===le.id))==null?void 0:o.name)||le.id),le.type===EntityType.PREDICATE&&(G=((i=e.predicates.find(w=>w.id===le.id))==null?void 0:i.label)||le.id),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 bg-slate-900 border border-slate-700 rounded px-2 py-1 text-xs text-slate-300",children:[jsxRuntimeExports.jsx("span",{children:G}),jsxRuntimeExports.jsx("button",{onClick:w=>{w.stopPropagation(),u(le.type,le.id,!0)},className:"hover:text-white text-slate-500",children:jsxRuntimeExports.jsx(X,{size:12})})]},`${le.type}-${le.id}`)})})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"text-[10px] font-bold text-slate-500 uppercase block mb-2",children:"Combined Impact Analysis"}),d.length>0?jsxRuntimeExports.jsx("div",{className:"space-y-2",children:d.map(le=>jsxRuntimeExports.jsx(AlertCard,{alert:le},le.id))}):jsxRuntimeExports.jsx("div",{className:"text-xs text-slate-600 italic p-4 border border-slate-900 rounded bg-slate-900/50 text-center",children:"No derived alerts found for this specific combination of entities."})]})]})]})},ServiceDetail=({service:n,rules:e,alerts:t,onClose:r,onNavigateToRule:u})=>{const T=t.filter(A=>A.provenance.includes(n.id)),d=e.filter(A=>n.attributes.some(le=>A.matcherKeywords.some(G=>le.includes(G)))||A.matcherKeywords.includes("Legacy")&&n.type==="LEGACY_SYSTEM");return jsxRuntimeExports.jsxs("div",{className:"flex flex-col bg-slate-900/50",children:[jsxRuntimeExports.jsxs("div",{className:"p-4 border-b border-slate-800 bg-slate-900 flex justify-between items-start",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("div",{className:"text-[10px] font-bold text-emerald-500 uppercase tracking-wider mb-1",children:"Component Details"}),jsxRuntimeExports.jsx("h2",{className:"text-lg font-bold text-slate-100",children:n.name})]}),jsxRuntimeExports.jsx("button",{onClick:r,className:"text-slate-500 hover:text-white p-1 hover:bg-slate-800 rounded transition-colors",children:jsxRuntimeExports.jsx(X,{size:16})})]}),jsxRuntimeExports.jsxs("div",{className:"p-6 space-y-6",children:[jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"text-[10px] font-bold text-slate-500 uppercase block mb-1",children:"Type"}),jsxRuntimeExports.jsx("span",{className:"text-xs text-slate-300 font-mono bg-slate-900 px-2 py-1 rounded border border-slate-800 inline-block",children:n.type})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"text-[10px] font-bold text-slate-500 uppercase block mb-1",children:"Status"}),n.isExperimental?jsxRuntimeExports.jsx("span",{className:"text-[10px] font-bold bg-amber-900/40 text-amber-500 px-2 py-1 rounded border border-amber-900/50",children:"EXPERIMENTAL"}):jsxRuntimeExports.jsx("span",{className:"text-[10px] font-bold bg-slate-800 text-slate-400 px-2 py-1 rounded border border-slate-700",children:"STABLE"})]})]}),n.group&&jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"text-[10px] font-bold text-slate-500 uppercase block mb-1",children:"Functional Cluster"}),jsxRuntimeExports.jsx("span",{className:"text-xs text-indigo-300 font-bold bg-indigo-900/30 px-2 py-1 rounded border border-indigo-800 inline-block",children:n.group})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"text-[10px] font-bold text-slate-500 uppercase block mb-2",children:"Attributes / Outputs"}),jsxRuntimeExports.jsx("div",{className:"flex flex-wrap gap-2",children:n.attributes.map(A=>jsxRuntimeExports.jsx("span",{className:"px-2 py-1 bg-slate-900 text-slate-400 text-xs rounded border border-slate-800",children:A},A))})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("label",{className:"text-[10px] font-bold text-slate-500 uppercase block mb-2",children:["Governing Rules (",d.length,")"]}),jsxRuntimeExports.jsx("div",{className:"space-y-2",children:d.length>0?d.map(A=>jsxRuntimeExports.jsxs("div",{onClick:()=>u(A.id),className:"flex items-center justify-between p-2 bg-slate-900 border border-slate-800 rounded hover:border-slate-600 cursor-pointer group",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-pink-500"}),jsxRuntimeExports.jsx("span",{className:"text-xs font-bold text-slate-300",children:A.name})]}),jsxRuntimeExports.jsx(ArrowRight,{size:12,className:"text-slate-600 group-hover:text-slate-300 transition-colors"})]},A.id)):jsxRuntimeExports.jsx("div",{className:"text-xs text-slate-600 italic",children:"No specific rules target this service's attributes."})})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("label",{className:"text-[10px] font-bold text-slate-500 uppercase block mb-2",children:["Consequences (",T.length,")"]}),T.length>0?jsxRuntimeExports.jsx("div",{className:"space-y-2",children:T.map(A=>jsxRuntimeExports.jsx(AlertCard,{alert:A},A.id))}):jsxRuntimeExports.jsx("div",{className:"text-xs text-slate-600 italic p-2 border border-slate-900 rounded bg-slate-900/50",children:"No direct negative impacts detected for this service."})]})]})]})},RuleDetail=({rule:n,status:e,predicates:t,services:r,onClose:u,onUpdate:T,onNavigateToService:d})=>{const[A,le]=reactExports.useState(!1),[G,B]=reactExports.useState(n),[o,i]=reactExports.useState("");reactExports.useEffect(()=>{B(n),le(!1)},[n]);const w=r.reduce((be,ve)=>{const we=[];return n.matcherKeywords.forEach(Se=>{ve.attributes.some(Ae=>Ae.includes(Se))&&we.push(Se),Se==="Legacy"&&ve.type==="LEGACY_SYSTEM"&&we.push("Legacy Type")}),we.length>0&&be.push({service:ve,reasons:Array.from(new Set(we))}),be},[]),ae=()=>{T(G),le(!1)},ue=be=>{B(ve=>{const we=ve.predicateIds.includes(be);return{...ve,predicateIds:we?ve.predicateIds.filter(Se=>Se!==be):[...ve.predicateIds,be]}})},he=()=>{o&&!G.matcherKeywords.includes(o)&&(B(be=>({...be,matcherKeywords:[...be.matcherKeywords,o]})),i(""))},pe=be=>{B(ve=>({...ve,matcherKeywords:ve.matcherKeywords.filter(we=>we!==be)}))},ge=()=>{switch(e){case"FAILED":return jsxRuntimeExports.jsxs("span",{className:"flex items-center gap-1 bg-red-900/50 text-red-400 px-2 py-1 rounded text-xs font-bold border border-red-900",children:[jsxRuntimeExports.jsx(OctagonAlert,{size:12})," BLOCKED"]});case"WARNING":return jsxRuntimeExports.jsxs("span",{className:"flex items-center gap-1 bg-amber-900/50 text-amber-400 px-2 py-1 rounded text-xs font-bold border border-amber-900",children:[jsxRuntimeExports.jsx(TriangleAlert,{size:12})," AT RISK"]});case"PASSED":return jsxRuntimeExports.jsxs("span",{className:"flex items-center gap-1 bg-emerald-900/50 text-emerald-400 px-2 py-1 rounded text-xs font-bold border border-emerald-900",children:[jsxRuntimeExports.jsx(CircleCheckBig,{size:12})," SATISFIED"]});default:return jsxRuntimeExports.jsx("span",{className:"bg-slate-800 text-slate-400 px-2 py-1 rounded text-xs border border-slate-700",children:"NOT APPLICABLE"})}};return jsxRuntimeExports.jsxs("div",{className:"flex flex-col bg-slate-900/50",children:[jsxRuntimeExports.jsxs("div",{className:"p-4 border-b border-slate-800 bg-slate-900 flex justify-between items-start",children:[jsxRuntimeExports.jsxs("div",{className:"flex-1 mr-4",children:[jsxRuntimeExports.jsx("div",{className:"text-[10px] font-bold text-pink-500 uppercase tracking-wider mb-1",children:"Rule Definition"}),A?jsxRuntimeExports.jsx("input",{className:"w-full bg-slate-800 border border-slate-700 rounded p-1 text-slate-100 font-bold",value:G.name,onChange:be=>B({...G,name:be.target.value})}):jsxRuntimeExports.jsx("h2",{className:"text-lg font-bold text-slate-100",children:n.name})]}),jsxRuntimeExports.jsxs("div",{className:"flex gap-2",children:[A?jsxRuntimeExports.jsx("button",{onClick:ae,className:"text-emerald-500 hover:text-white p-1 hover:bg-emerald-900 rounded",children:jsxRuntimeExports.jsx(Save,{size:16})}):jsxRuntimeExports.jsx("button",{onClick:()=>le(!0),className:"text-slate-500 hover:text-white p-1 hover:bg-slate-800 rounded",children:jsxRuntimeExports.jsx(Pen,{size:16})}),jsxRuntimeExports.jsx("button",{onClick:u,className:"text-slate-500 hover:text-white p-1 hover:bg-slate-800 rounded transition-colors",children:jsxRuntimeExports.jsx(X,{size:16})})]})]}),jsxRuntimeExports.jsxs("div",{className:"p-6 space-y-6",children:[jsxRuntimeExports.jsxs("div",{className:"flex justify-between items-center",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"text-[10px] font-bold text-slate-500 uppercase block mb-2",children:"Current Status"}),ge()]}),A&&jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"text-[10px] font-bold text-slate-500 uppercase block mb-2",children:"Logic Operator"}),jsxRuntimeExports.jsxs("select",{value:G.operator||"AND",onChange:be=>B({...G,operator:be.target.value}),className:"bg-slate-800 border border-slate-700 text-slate-200 text-xs rounded p-1",children:[jsxRuntimeExports.jsx("option",{value:"AND",children:"AND (All Required)"}),jsxRuntimeExports.jsx("option",{value:"OR",children:"OR (Any Required)"})]})]})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"text-[10px] font-bold text-slate-500 uppercase block mb-2",children:"Description"}),A?jsxRuntimeExports.jsx("textarea",{className:"w-full h-24 bg-slate-800 border border-slate-700 rounded p-2 text-sm text-slate-300",value:G.description,onChange:be=>B({...G,description:be.target.value})}):jsxRuntimeExports.jsx("p",{className:"text-sm text-slate-300 leading-relaxed bg-slate-900/50 p-3 rounded border border-slate-800",children:n.description})]}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"text-[10px] font-bold text-slate-500 uppercase block mb-1",children:"Priority"}),jsxRuntimeExports.jsx("span",{className:`inline-block px-2 py-1 rounded text-xs font-bold ${n.priority==="MUST"?"bg-red-900/30 text-red-400 border border-red-900":"bg-amber-900/30 text-amber-400 border border-amber-900"}`,children:n.priority})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"text-[10px] font-bold text-slate-500 uppercase block mb-1",children:"Matchers"}),jsxRuntimeExports.jsxs("div",{className:"flex flex-wrap gap-1",children:[G.matcherKeywords.map(be=>jsxRuntimeExports.jsxs("span",{className:"flex items-center gap-1 px-1.5 py-0.5 bg-slate-800 text-slate-400 text-[10px] rounded border border-slate-700",children:[be,A&&jsxRuntimeExports.jsx("button",{onClick:()=>pe(be),children:jsxRuntimeExports.jsx(X,{size:8})})]},be)),A&&jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-1 mt-1",children:[jsxRuntimeExports.jsx("input",{className:"w-16 bg-slate-800 border border-slate-700 rounded text-[10px] p-0.5 text-white",placeholder:"Add...",value:o,onChange:be=>i(be.target.value),onKeyDown:be=>be.key==="Enter"&&he()}),jsxRuntimeExports.jsx("button",{onClick:he,className:"text-slate-400 hover:text-white",children:jsxRuntimeExports.jsx(Plus,{size:12})})]})]})]})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("label",{className:"text-[10px] font-bold text-slate-500 uppercase block mb-2",children:["Impacted Services (",w.length,")"]}),jsxRuntimeExports.jsx("div",{className:"space-y-2",children:w.length>0?w.map(({service:be,reasons:ve})=>jsxRuntimeExports.jsxs("div",{onClick:()=>d(be.id),className:"flex items-center justify-between p-2 bg-slate-900 border border-slate-800 rounded hover:border-slate-600 cursor-pointer group",children:[jsxRuntimeExports.jsxs("div",{className:"flex flex-col",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-emerald-500"}),jsxRuntimeExports.jsx("span",{className:"text-xs font-bold text-slate-300",children:be.name})]}),jsxRuntimeExports.jsx("div",{className:"text-[9px] text-slate-500 mt-0.5 ml-3.5 flex flex-wrap gap-1",children:ve.map(we=>jsxRuntimeExports.jsxs("span",{className:"bg-slate-800 px-1 rounded border border-slate-700",children:["Matched: ",we]},we))})]}),jsxRuntimeExports.jsx(ArrowRight,{size:12,className:"text-slate-600 group-hover:text-slate-300 transition-colors"})]},be.id)):jsxRuntimeExports.jsx("div",{className:"text-xs text-slate-600 italic",children:"No current services match this rule."})})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"text-[10px] font-bold text-slate-500 uppercase block mb-2",children:"Linked Predicates"}),jsxRuntimeExports.jsxs("div",{className:"space-y-2",children:[A?t.map(be=>jsxRuntimeExports.jsxs("div",{onClick:()=>ue(be.id),className:`cursor-pointer flex items-start gap-2 p-2 rounded border ${G.predicateIds.includes(be.id)?"border-indigo-500 bg-indigo-900/20":"border-slate-800 bg-slate-900/30 hover:border-slate-600"}`,children:[jsxRuntimeExports.jsx("div",{className:`mt-1 w-3 h-3 rounded border flex items-center justify-center ${G.predicateIds.includes(be.id)?"bg-indigo-500 border-indigo-500":"border-slate-600"}`,children:G.predicateIds.includes(be.id)&&jsxRuntimeExports.jsx(CircleCheckBig,{size:10,className:"text-white"})}),jsxRuntimeExports.jsx("div",{children:jsxRuntimeExports.jsx("div",{className:"text-xs font-bold text-slate-300",children:be.label})})]},be.id)):n.predicateIds.map(be=>{const ve=t.find(we=>we.id===be);return ve?jsxRuntimeExports.jsxs("div",{className:"flex items-start gap-2 p-2 rounded border border-slate-800 bg-slate-900/30",children:[jsxRuntimeExports.jsx("div",{className:"mt-1 w-2 h-2 rounded-full bg-indigo-500 flex-shrink-0"}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("div",{className:"text-xs font-bold text-indigo-300",children:ve.label}),jsxRuntimeExports.jsx("div",{className:"text-[10px] text-slate-500 leading-tight mt-0.5",children:ve.description})]})]},be):null}),!A&&n.predicateIds.length===0&&jsxRuntimeExports.jsx("div",{className:"text-xs text-slate-600 italic",children:"No specific predicates linked."})]})]})]})]})},PredicateDetail=({predicate:n,onClose:e})=>jsxRuntimeExports.jsxs("div",{className:"flex flex-col bg-slate-900/50",children:[jsxRuntimeExports.jsxs("div",{className:"p-4 border-b border-slate-800 bg-slate-900 flex justify-between items-start",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("div",{className:"text-[10px] font-bold text-indigo-500 uppercase tracking-wider mb-1",children:"Predicate (Law)"}),jsxRuntimeExports.jsx("h2",{className:"text-lg font-bold text-slate-100",children:n.label})]}),jsxRuntimeExports.jsx("button",{onClick:e,className:"text-slate-500 hover:text-white p-1 hover:bg-slate-800 rounded transition-colors",children:jsxRuntimeExports.jsx(X,{size:16})})]}),jsxRuntimeExports.jsxs("div",{className:"p-6 space-y-6",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"text-[10px] font-bold text-slate-500 uppercase block mb-2",children:"Requirement"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-slate-300 leading-relaxed bg-slate-900/50 p-3 rounded border border-slate-800",children:n.description})]}),jsxRuntimeExports.jsxs("div",{className:"p-3 bg-indigo-950/10 border border-indigo-900/30 rounded text-xs text-indigo-400 leading-relaxed flex gap-2",children:[jsxRuntimeExports.jsx(Info,{size:16,className:"flex-shrink-0 mt-0.5"}),jsxRuntimeExports.jsx("span",{children:'Predicates represent immutable constraints or "laws of physics" for the project domain.'})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"text-[10px] font-bold text-slate-500 uppercase block mb-2",children:"Category"}),jsxRuntimeExports.jsx("span",{className:"text-xs font-mono bg-slate-800 text-slate-400 px-2 py-1 rounded",children:n.category})]})]})]}),AccordionItem=({title:n,icon:e,isOpen:t,onToggle:r,children:u,colorClass:T="text-indigo-400"})=>jsxRuntimeExports.jsxs("div",{className:"flex flex-col shrink-0 border-b border-slate-800",children:[jsxRuntimeExports.jsxs("div",{className:`flex items-center justify-between p-3 cursor-pointer transition-colors ${t?"bg-slate-900/80":"bg-slate-950 hover:bg-slate-900"}`,onClick:r,children:[jsxRuntimeExports.jsxs("div",{className:`flex items-center gap-2 font-bold text-xs uppercase tracking-wider ${t?T:"text-slate-500"}`,children:[jsxRuntimeExports.jsx(e,{size:14}),n]}),t?jsxRuntimeExports.jsx(ChevronUp,{size:14,className:"text-slate-500"}):jsxRuntimeExports.jsx(ChevronDown,{size:14,className:"text-slate-500"})]}),t&&jsxRuntimeExports.jsx("div",{className:"border-t border-slate-800/50",children:u})]});function App(){const[n,e]=reactExports.useState(PROJECTS[0].id),[t,r]=reactExports.useState(INITIAL_ARRANGEMENTS),[u,T]=reactExports.useState(INITIAL_ARRANGEMENTS[0].id),[d,A]=reactExports.useState("TOPOLOGY"),[le,G]=reactExports.useState(!1),[B,o]=reactExports.useState(null),[i,w]=reactExports.useState(340),[ae,ue]=reactExports.useState(!0),[he,pe]=reactExports.useState(null),[ge,be]=reactExports.useState({w:window.innerWidth,h:window.innerHeight}),[ve,we]=reactExports.useState({architecture:!0,rules:!1,inspector:!0});reactExports.useEffect(()=>{we(d==="TOPOLOGY"?tt=>({...tt,architecture:!0,rules:!1}):tt=>({...tt,architecture:!1,rules:!0}))},[d]);const[Se,Ae]=reactExports.useState([]);reactExports.useEffect(()=>{(async()=>{db.isReady||await db.init();try{const vt=await db.getArrangements(n);r(vt)}catch{console.log("DB not ready or empty")}})();const Tt=db.subscribe(async()=>{try{const vt=await db.getArrangements(n);r(vt)}catch(vt){console.error("Update failed",vt)}});return()=>Tt()},[n]),reactExports.useEffect(()=>{const tt=()=>be({w:window.innerWidth,h:window.innerHeight});return window.addEventListener("resize",tt),()=>window.removeEventListener("resize",tt)},[]),reactExports.useEffect(()=>{const tt=vt=>{if(he==="LEFT"){const Dt=Math.max(280,Math.min(vt.clientX,800));w(Dt)}},Tt=()=>{pe(null),document.body.style.cursor="default",document.body.style.userSelect="auto"};return he&&(window.addEventListener("mousemove",tt),window.addEventListener("mouseup",Tt),document.body.style.cursor="col-resize",document.body.style.userSelect="none"),()=>{window.removeEventListener("mousemove",tt),window.removeEventListener("mouseup",Tt),document.body.style.cursor="default",document.body.style.userSelect="auto"}},[he]);const Re=reactExports.useMemo(()=>t.filter(tt=>tt.projectId===n),[t,n]),Te=reactExports.useMemo(()=>t.find(tt=>tt.id===u)||Re[0],[t,u,Re]);PROJECTS.find(tt=>tt.id===n);const Ce=reactExports.useMemo(()=>Te?generateAlerts(Te):[],[Te]),Ve=Se.length===1?Se[0]:null,$e=reactExports.useMemo(()=>(Ve==null?void 0:Ve.type)===EntityType.RULE&&Te?Te.container.activeRules.find(tt=>tt.id===Ve.id):null,[Ve,Te]),He=reactExports.useMemo(()=>(Ve==null?void 0:Ve.type)===EntityType.PREDICATE&&Te?Te.predicates.find(tt=>tt.id===Ve.id):null,[Ve,Te]),De=reactExports.useMemo(()=>(Ve==null?void 0:Ve.type)===EntityType.SERVICE&&Te?Te.services.find(tt=>tt.id===Ve.id):null,[Ve,Te]),Xe=reactExports.useMemo(()=>Te?Te.container.activeRules.map(tt=>{const Tt=Ce.filter(Dt=>Dt.provenance.includes(tt.id));let vt="PASSED";return Tt.some(Dt=>Dt.severity===ImpactLevel.PROHIBITIVE)?vt="FAILED":Tt.some(Dt=>Dt.severity===ImpactLevel.UNDESIRABLE)?vt="WARNING":Te.services.some(Pt=>Pt.attributes.some(jt=>tt.matcherKeywords.some(tn=>jt.includes(tn)))||tt.matcherKeywords.includes("Legacy")&&Pt.type==="LEGACY_SYSTEM")||(vt="NOT_EVALUATED"),{...tt,status:vt,matchingServices:[]}}):[],[Te,Ce]),Me=reactExports.useMemo(()=>{var tt;return $e&&((tt=Xe.find(Tt=>Tt.id===$e.id))==null?void 0:tt.status)||"NOT_EVALUATED"},[$e,Xe]),je=reactExports.useMemo(()=>{if(!Te)return[];const tt=Ce.filter(Pt=>Se.some(jt=>Pt.provenance.includes(jt.id))),Tt=Se.filter(Pt=>Pt.type===EntityType.SERVICE).map(Pt=>Pt.id),vt=tt.flatMap(Pt=>Pt.provenance),Dt=Te.services.filter(Pt=>Se.some(jt=>{if(jt.type!==EntityType.RULE)return!1;const tn=Te.container.activeRules.find(Sn=>Sn.id===jt.id);return tn?Pt.attributes.some(Sn=>tn.matcherKeywords.some(fn=>Sn.includes(fn)))||tn.matcherKeywords.includes("Legacy")&&Pt.type==="LEGACY_SYSTEM"||tn.matcherKeywords.includes("AI")&&Pt.attributes.includes("AI"):!1})).map(Pt=>Pt.id);return Array.from(new Set([...Tt,...vt,...Dt]))},[Ce,Se,Te]),it=()=>{if(!Te)return;const tt=`hyp-${Date.now()}`,Tt={...Te,id:tt,name:`${Te.name} (Fork)`,services:Te.services.map(vt=>({...vt})),container:{...Te.container,id:`cont-${Date.now()}`,versionLabel:"V2.x Draft",hypothesisName:"Experimental Branch",description:"Testing new service configurations."},predicates:[...Te.predicates||[]],parentId:Te.id,createdAt:Date.now()};r(vt=>[...vt,Tt]),T(tt),db.saveFork(Tt).catch(vt=>console.error("Failed to save fork",vt))},Ke=(tt,Tt,vt)=>{Ae(Dt=>{const Pt=Dt.find(tn=>tn.id===Tt&&tn.type===tt);let jt;return vt?Pt?jt=Dt.filter(tn=>!(tn.id===Tt&&tn.type===tt)):jt=[...Dt,{type:tt,id:Tt}]:Pt&&Dt.length===1?jt=[]:jt=[{type:tt,id:Tt}],jt.length>0&&we(tn=>({...tn,inspector:!0})),jt})},qe=tt=>{r(Tt=>Tt.map(vt=>vt.id!==Te.id?vt:{...vt,container:{...vt.container,activeRules:vt.container.activeRules.map(Dt=>Dt.id===tt.id?tt:Dt)}}))},Pe=()=>{we(tt=>({...tt,architecture:!tt.architecture})),ve.architecture||A("TOPOLOGY")},et=()=>{we(tt=>({...tt,rules:!tt.rules})),ve.rules||A("LOGIC")},Je=()=>{we(tt=>({...tt,inspector:!tt.inspector}))},at=ge.w-(ae?i:0);return Te?jsxRuntimeExports.jsxs("div",{className:"flex h-screen bg-slate-950 text-slate-100 font-sans overflow-hidden",children:[jsxRuntimeExports.jsxs("div",{className:"border-r border-slate-800 flex flex-col bg-slate-950 flex-shrink-0 z-20 shadow-xl relative",style:{width:ae?i:0,transition:he?"none":"width 300ms ease-in-out"},children:[jsxRuntimeExports.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden w-full",children:[" ",jsxRuntimeExports.jsxs("div",{className:"p-4 border-b border-slate-800 bg-slate-900/50 flex justify-between items-start shrink-0",children:[jsxRuntimeExports.jsx("div",{children:jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 text-indigo-400 font-bold tracking-tight mb-2",children:[jsxRuntimeExports.jsx(Box,{size:18})," HYPOTHESIS EXPLORER"]})}),jsxRuntimeExports.jsx("button",{onClick:()=>ue(!1),className:"text-slate-500 hover:text-white p-1 rounded hover:bg-slate-800",title:"Collapse Sidebar",children:jsxRuntimeExports.jsx(ChevronsLeft,{size:16})})]}),jsxRuntimeExports.jsxs("div",{className:"p-4 border-b border-slate-800 shrink-0",children:[jsxRuntimeExports.jsx("h2",{className:"text-lg font-bold text-white mb-1",children:Te.container.versionLabel}),jsxRuntimeExports.jsxs("p",{className:"text-sm text-indigo-300 font-medium mb-2",children:['"',Te.container.hypothesisName,'"']}),jsxRuntimeExports.jsx("p",{className:"text-xs text-slate-400 leading-relaxed border-l-2 border-slate-700 pl-3",children:Te.container.description})]}),jsxRuntimeExports.jsxs("div",{className:"flex-1 overflow-y-auto",children:[jsxRuntimeExports.jsx(AccordionItem,{title:"Architecture Stack",icon:Layers,isOpen:ve.architecture,onToggle:Pe,colorClass:"text-emerald-500",children:jsxRuntimeExports.jsx("div",{className:"p-4 space-y-1",children:Te.services.map(tt=>{const Tt=Se.some(vt=>vt.id===tt.id&&vt.type===EntityType.SERVICE);return jsxRuntimeExports.jsxs("div",{onClick:vt=>Ke(EntityType.SERVICE,tt.id,vt.ctrlKey||vt.metaKey),className:`flex items-center justify-between p-2 rounded text-xs cursor-pointer border transition-all ${Tt?"bg-indigo-600 border-indigo-400 text-white shadow-lg z-10":je.includes(tt.id)?"bg-indigo-900/40 border-indigo-500/50 text-white shadow":"bg-slate-900 border-slate-800 text-slate-400 hover:border-slate-600"}`,children:[jsxRuntimeExports.jsx("span",{className:"truncate",children:tt.name}),tt.isExperimental&&jsxRuntimeExports.jsx("span",{className:"text-[9px] bg-amber-900 text-amber-500 px-1 rounded flex-shrink-0",children:"EXP"})]},tt.id)})})}),jsxRuntimeExports.jsx(AccordionItem,{title:"Rule Stack",icon:Network,isOpen:ve.rules,onToggle:et,colorClass:"text-pink-500",children:jsxRuntimeExports.jsx("div",{className:"p-4 space-y-1",children:Xe.map(tt=>{const Tt=Se.some(Dt=>Dt.id===tt.id&&Dt.type===EntityType.RULE);let vt="bg-slate-700";return tt.status==="FAILED"&&(vt="bg-red-500"),tt.status==="WARNING"&&(vt="bg-amber-500"),tt.status==="PASSED"&&(vt="bg-emerald-500"),jsxRuntimeExports.jsxs("div",{onClick:Dt=>Ke(EntityType.RULE,tt.id,Dt.ctrlKey||Dt.metaKey),className:`flex items-center justify-between p-2 rounded text-xs cursor-pointer border transition-all ${Tt?"bg-indigo-600 border-indigo-400 text-white shadow-lg z-10":"bg-slate-900 border-slate-800 text-slate-400 hover:border-slate-600"}`,children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 overflow-hidden",children:[jsxRuntimeExports.jsx("div",{className:`w-1.5 h-1.5 rounded-full ${vt} flex-shrink-0`}),jsxRuntimeExports.jsx("span",{className:"truncate",children:tt.name})]}),jsxRuntimeExports.jsx("span",{className:"text-[9px] font-bold opacity-50 flex-shrink-0",children:tt.priority[0]})]},tt.id)})})}),jsxRuntimeExports.jsx(AccordionItem,{title:"Inspector",icon:MousePointer2,isOpen:ve.inspector,onToggle:Je,colorClass:"text-indigo-400",children:jsxRuntimeExports.jsx("div",{className:"bg-slate-950",children:Se.length>0?Se.length>1?jsxRuntimeExports.jsx(ClusterAnalysis,{selectedEntities:Se,arrangement:Te,alerts:Ce,onClose:()=>Ae([]),onEntityClick:Ke}):$e?jsxRuntimeExports.jsx(RuleDetail,{rule:$e,status:Me,predicates:Te.predicates,services:Te.services,onClose:()=>Ae([]),onUpdate:qe,onNavigateToService:tt=>{we(Tt=>({...Tt,architecture:!0,inspector:!0})),A("TOPOLOGY"),Ke(EntityType.SERVICE,tt,!1)}}):He?jsxRuntimeExports.jsx(PredicateDetail,{predicate:He,onClose:()=>Ae([])}):De?jsxRuntimeExports.jsx(ServiceDetail,{service:De,rules:Te.container.activeRules,alerts:Ce,onClose:()=>Ae([]),onNavigateToRule:tt=>{we(Tt=>({...Tt,rules:!0,inspector:!0})),A("LOGIC"),Ke(EntityType.RULE,tt,!1)}}):null:jsxRuntimeExports.jsx("div",{className:"flex flex-col items-center justify-center py-10 text-slate-600 text-center italic",children:jsxRuntimeExports.jsx("p",{children:"Select an entity to inspect details."})})})})]})]}),jsxRuntimeExports.jsx("div",{className:"absolute top-0 right-0 w-1 h-full cursor-col-resize hover:bg-indigo-500 transition-colors z-30 group flex items-center justify-center",onMouseDown:()=>pe("LEFT"),children:jsxRuntimeExports.jsx("div",{className:"h-8 w-4 bg-slate-800 rounded opacity-0 group-hover:opacity-100 flex items-center justify-center shadow absolute -right-2 pointer-events-none",children:jsxRuntimeExports.jsx(GripVertical,{size:12,className:"text-slate-400"})})})]}),!ae&&jsxRuntimeExports.jsx("div",{className:"absolute left-2 top-20 z-40",children:jsxRuntimeExports.jsx("button",{onClick:()=>ue(!0),className:"p-2 bg-slate-800 border border-slate-700 text-slate-400 hover:text-white rounded shadow-lg",title:"Expand Sidebar",children:jsxRuntimeExports.jsx(ChevronsRight,{size:16})})}),jsxRuntimeExports.jsxs("div",{className:"flex-1 flex flex-col relative bg-slate-900 pb-10 min-w-0",children:[jsxRuntimeExports.jsxs("div",{className:"h-14 border-b border-slate-800 flex items-center justify-between px-6 bg-slate-950/80 backdrop-blur z-10",children:[jsxRuntimeExports.jsxs("div",{className:"flex bg-slate-800 rounded p-1",children:[jsxRuntimeExports.jsxs("button",{onClick:()=>A("TOPOLOGY"),className:`flex items-center gap-2 px-3 py-1 rounded text-xs font-bold transition-all ${d==="TOPOLOGY"?"bg-slate-700 text-white shadow":"text-slate-400 hover:text-slate-200"}`,children:[jsxRuntimeExports.jsx(Layers,{size:14})," ARCHITECTURE MAP"]}),jsxRuntimeExports.jsxs("button",{onClick:()=>A("LOGIC"),className:`flex items-center gap-2 px-3 py-1 rounded text-xs font-bold transition-all ${d==="LOGIC"?"bg-indigo-900/80 text-white shadow":"text-slate-400 hover:text-slate-200"}`,children:[jsxRuntimeExports.jsx(Network,{size:14})," LOGIC & RULES"]})]}),jsxRuntimeExports.jsxs("button",{onClick:()=>G(!0),className:"flex items-center gap-2 text-xs font-medium text-slate-400 hover:text-white px-3 py-1.5 rounded bg-slate-800 hover:bg-slate-700 border border-slate-700 transition-all",children:[jsxRuntimeExports.jsx(Maximize2,{size:14})," Compare Hypotheses"]})]}),jsxRuntimeExports.jsx("div",{className:"flex-1 relative bg-slate-950 overflow-hidden",children:d==="TOPOLOGY"?jsxRuntimeExports.jsx(GraphCanvas,{arrangement:Te,width:at,height:ge.h-60,onNodeClick:Ke,highlightedServiceIds:je,selectedEntityIds:Se.map(tt=>tt.id),alerts:Ce},`topo-${Te.id}`):jsxRuntimeExports.jsx(RulesCanvas,{arrangement:Te,evaluatedRules:Xe,width:at,height:ge.h-60,onNodeClick:Ke,activeRuleId:null,selectedEntityIds:Se.map(tt=>tt.id)},`logic-${Te.id}`)})]}),le&&jsxRuntimeExports.jsx(ComparisonView,{arrangementA:Te,arrangementB:Re.find(tt=>tt.id===B)||null,allArrangements:Re,onSelectB:o,onClose:()=>G(!1),generateAlerts}),jsxRuntimeExports.jsx(TerminalPanel,{alerts:Ce,onEntityClick:(tt,Tt)=>Ke(tt,Tt,!1),currentProjectId:n,setCurrentProjectId:e,activeArrangementId:u,setActiveArrangementId:T,projectArrangements:Re,onFork:it})]}):jsxRuntimeExports.jsx("div",{className:"p-10 text-white",children:"Loading..."})}const root=clientExports.createRoot(document.getElementById("root"));root.render(jsxRuntimeExports.jsx(App,{}));
